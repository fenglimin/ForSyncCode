{"version":3,"sources":["webpack:///./node_modules/moment/locale sync ^\\.\\/.*$","webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/annotation/ann-object.ts","webpack:///./src/app/annotation/ann-serialize.ts","webpack:///./src/app/annotation/ann-tool.ts","webpack:///./src/app/annotation/base-object/ann-base-circle.ts","webpack:///./src/app/annotation/base-object/ann-base-curve.ts","webpack:///./src/app/annotation/base-object/ann-base-ellipse.ts","webpack:///./src/app/annotation/base-object/ann-base-graphic-overlay.ts","webpack:///./src/app/annotation/base-object/ann-base-image.ts","webpack:///./src/app/annotation/base-object/ann-base-line.ts","webpack:///./src/app/annotation/base-object/ann-base-object.ts","webpack:///./src/app/annotation/base-object/ann-base-polygon.ts","webpack:///./src/app/annotation/base-object/ann-base-rectangle.ts","webpack:///./src/app/annotation/base-object/ann-base-text.ts","webpack:///./src/app/annotation/extend-object/ann-angle.ts","webpack:///./src/app/annotation/extend-object/ann-arrow.ts","webpack:///./src/app/annotation/extend-object/ann-cardiothoracic-ratio.ts","webpack:///./src/app/annotation/extend-object/ann-cervical-curve.ts","webpack:///./src/app/annotation/extend-object/ann-curve.ts","webpack:///./src/app/annotation/extend-object/ann-ellipse.ts","webpack:///./src/app/annotation/extend-object/ann-extend-object.ts","webpack:///./src/app/annotation/extend-object/ann-free-area.ts","webpack:///./src/app/annotation/extend-object/ann-image.ts","webpack:///./src/app/annotation/extend-object/ann-line.ts","webpack:///./src/app/annotation/extend-object/ann-lumbar-curve.ts","webpack:///./src/app/annotation/extend-object/ann-mark-spot.ts","webpack:///./src/app/annotation/extend-object/ann-point.ts","webpack:///./src/app/annotation/extend-object/ann-polygon.ts","webpack:///./src/app/annotation/extend-object/ann-rectangle.ts","webpack:///./src/app/annotation/extend-object/ann-ruler.ts","webpack:///./src/app/annotation/extend-object/ann-text-indicator.ts","webpack:///./src/app/annotation/extend-object/ann-text.ts","webpack:///./src/app/annotation/extend-object/ann-vertical-axis.ts","webpack:///./src/app/annotation/layer-object/ann-graphic-overlay.ts","webpack:///./src/app/annotation/layer-object/ann-guide.ts","webpack:///./src/app/annotation/layer-object/ann-image-ruler.ts","webpack:///./src/app/annotation/layer-object/ann-magnify.ts","webpack:///./src/app/annotation/layer-object/ann-text-overlay.ts","webpack:///./src/app/app-routing.module.ts","webpack:///./src/app/app.component.html","webpack:///./src/app/app.component.less","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/components/common/dropdown-button-menu-button/dropdown-button-menu-button.component.css","webpack:///./src/app/components/common/dropdown-button-menu-button/dropdown-button-menu-button.component.html","webpack:///./src/app/components/common/dropdown-button-menu-button/dropdown-button-menu-button.component.ts","webpack:///./src/app/components/common/dropdown-button-menu/dropdown-button-menu.component.css","webpack:///./src/app/components/common/dropdown-button-menu/dropdown-button-menu.component.html","webpack:///./src/app/components/common/dropdown-button-menu/dropdown-button-menu.component.ts","webpack:///./src/app/components/common/message-box/message-box.component.css","webpack:///./src/app/components/common/message-box/message-box.component.html","webpack:///./src/app/components/common/message-box/message-box.component.ts","webpack:///./src/app/components/dialog/manual-wl-dialog/manual-wl-dialog.component.css","webpack:///./src/app/components/dialog/manual-wl-dialog/manual-wl-dialog.component.html","webpack:///./src/app/components/dialog/manual-wl-dialog/manual-wl-dialog.component.ts","webpack:///./src/app/components/dialog/select-marker-dialog/select-marker-dialog.component.css","webpack:///./src/app/components/dialog/select-marker-dialog/select-marker-dialog.component.html","webpack:///./src/app/components/dialog/select-marker-dialog/select-marker-dialog.component.ts","webpack:///./src/app/components/dialog/select-studydate-dialog/select-studydate-dialog.component.css","webpack:///./src/app/components/dialog/select-studydate-dialog/select-studydate-dialog.component.html","webpack:///./src/app/components/dialog/select-studydate-dialog/select-studydate-dialog.component.ts","webpack:///./src/app/components/header-bar/header-bar.component.css","webpack:///./src/app/components/header-bar/header-bar.component.html","webpack:///./src/app/components/header-bar/header-bar.component.ts","webpack:///./src/app/components/viewer-shell/group-viewer/group-viewer.component.css","webpack:///./src/app/components/viewer-shell/group-viewer/group-viewer.component.html","webpack:///./src/app/components/viewer-shell/group-viewer/group-viewer.component.ts","webpack:///./src/app/components/viewer-shell/group-viewer/image-viewer/image-viewer.component.css","webpack:///./src/app/components/viewer-shell/group-viewer/image-viewer/image-viewer.component.html","webpack:///./src/app/components/viewer-shell/group-viewer/image-viewer/image-viewer.component.ts","webpack:///./src/app/components/viewer-shell/navigation/navigation.component.css","webpack:///./src/app/components/viewer-shell/navigation/navigation.component.html","webpack:///./src/app/components/viewer-shell/navigation/navigation.component.ts","webpack:///./src/app/components/viewer-shell/navigation/thumbnail/thumbnail.component.css","webpack:///./src/app/components/viewer-shell/navigation/thumbnail/thumbnail.component.html","webpack:///./src/app/components/viewer-shell/navigation/thumbnail/thumbnail.component.ts","webpack:///./src/app/components/viewer-shell/viewer-bottombar/viewer-bottombar.component.css","webpack:///./src/app/components/viewer-shell/viewer-bottombar/viewer-bottombar.component.html","webpack:///./src/app/components/viewer-shell/viewer-bottombar/viewer-bottombar.component.ts","webpack:///./src/app/components/viewer-shell/viewer-shell.component.css","webpack:///./src/app/components/viewer-shell/viewer-shell.component.html","webpack:///./src/app/components/viewer-shell/viewer-shell.component.ts","webpack:///./src/app/components/viewer-shell/viewer-toolbar/viewer-toolbar.component.css","webpack:///./src/app/components/viewer-shell/viewer-toolbar/viewer-toolbar.component.html","webpack:///./src/app/components/viewer-shell/viewer-toolbar/viewer-toolbar.component.ts","webpack:///./src/app/components/worklist-shell/operate-toolbar/operate-toolbar.component.css","webpack:///./src/app/components/worklist-shell/operate-toolbar/operate-toolbar.component.html","webpack:///./src/app/components/worklist-shell/operate-toolbar/operate-toolbar.component.ts","webpack:///./src/app/components/worklist-shell/query-shortcut/query-shortcut.component.css","webpack:///./src/app/components/worklist-shell/query-shortcut/query-shortcut.component.html","webpack:///./src/app/components/worklist-shell/query-shortcut/query-shortcut.component.ts","webpack:///./src/app/components/worklist-shell/query-toolbar/query-toolbar.component.css","webpack:///./src/app/components/worklist-shell/query-toolbar/query-toolbar.component.html","webpack:///./src/app/components/worklist-shell/query-toolbar/query-toolbar.component.ts","webpack:///./src/app/components/worklist-shell/worklist-shell.component.html","webpack:///./src/app/components/worklist-shell/worklist-shell.component.less","webpack:///./src/app/components/worklist-shell/worklist-shell.component.ts","webpack:///./src/app/components/worklist-shell/worklist/export-study/export-study.component.html","webpack:///./src/app/components/worklist-shell/worklist/export-study/export-study.component.less","webpack:///./src/app/components/worklist-shell/worklist/export-study/export-study.component.ts","webpack:///./src/app/components/worklist-shell/worklist/patient-edit/patient-edit.component.html","webpack:///./src/app/components/worklist-shell/worklist/patient-edit/patient-edit.component.less","webpack:///./src/app/components/worklist-shell/worklist/patient-edit/patient-edit.component.ts","webpack:///./src/app/components/worklist-shell/worklist/worklist.component.html","webpack:///./src/app/components/worklist-shell/worklist/worklist.component.less","webpack:///./src/app/components/worklist-shell/worklist/worklist.component.ts","webpack:///./src/app/models/annotation.ts","webpack:///./src/app/models/dailog-data/date-range.ts","webpack:///./src/app/models/dailog-data/image-process.ts","webpack:///./src/app/models/dropdown-button-menu-data.ts","webpack:///./src/app/models/hanging-protocol.ts","webpack:///./src/app/models/layout.ts","webpack:///./src/app/models/messageBox.ts","webpack:///./src/app/models/misc-data.ts","webpack:///./src/app/models/overlay.ts","webpack:///./src/app/models/pssi.ts","webpack:///./src/app/models/shortcut.ts","webpack:///./src/app/models/viewer-group-data.ts","webpack:///./src/app/models/viewer-image-data.ts","webpack:///./src/app/models/viewer-shell-data.ts","webpack:///./src/app/services/annotation.service.ts","webpack:///./src/app/services/configuration.service.ts","webpack:///./src/app/services/database.service.ts","webpack:///./src/app/services/dialog.service.ts","webpack:///./src/app/services/dicom-image.service.ts","webpack:///./src/app/services/hanging-protocol.service.ts","webpack:///./src/app/services/image-selector.service.ts","webpack:///./src/app/services/log.service.ts","webpack:///./src/app/services/shell-navigator.service.ts","webpack:///./src/app/services/view-context.service.ts","webpack:///./src/app/services/worklist.service.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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","file":"main.js","sourcesContent":["var map = {\n\t\"./af\": \"./node_modules/moment/locale/af.js\",\n\t\"./af.js\": \"./node_modules/moment/locale/af.js\",\n\t\"./ar\": \"./node_modules/moment/locale/ar.js\",\n\t\"./ar-dz\": \"./node_modules/moment/locale/ar-dz.js\",\n\t\"./ar-dz.js\": \"./node_modules/moment/locale/ar-dz.js\",\n\t\"./ar-kw\": \"./node_modules/moment/locale/ar-kw.js\",\n\t\"./ar-kw.js\": \"./node_modules/moment/locale/ar-kw.js\",\n\t\"./ar-ly\": \"./node_modules/moment/locale/ar-ly.js\",\n\t\"./ar-ly.js\": \"./node_modules/moment/locale/ar-ly.js\",\n\t\"./ar-ma\": \"./node_modules/moment/locale/ar-ma.js\",\n\t\"./ar-ma.js\": \"./node_modules/moment/locale/ar-ma.js\",\n\t\"./ar-sa\": \"./node_modules/moment/locale/ar-sa.js\",\n\t\"./ar-sa.js\": \"./node_modules/moment/locale/ar-sa.js\",\n\t\"./ar-tn\": \"./node_modules/moment/locale/ar-tn.js\",\n\t\"./ar-tn.js\": \"./node_modules/moment/locale/ar-tn.js\",\n\t\"./ar.js\": \"./node_modules/moment/locale/ar.js\",\n\t\"./az\": \"./node_modules/moment/locale/az.js\",\n\t\"./az.js\": \"./node_modules/moment/locale/az.js\",\n\t\"./be\": \"./node_modules/moment/locale/be.js\",\n\t\"./be.js\": \"./node_modules/moment/locale/be.js\",\n\t\"./bg\": \"./node_modules/moment/locale/bg.js\",\n\t\"./bg.js\": \"./node_modules/moment/locale/bg.js\",\n\t\"./bm\": \"./node_modules/moment/locale/bm.js\",\n\t\"./bm.js\": \"./node_modules/moment/locale/bm.js\",\n\t\"./bn\": \"./node_modules/moment/locale/bn.js\",\n\t\"./bn.js\": \"./node_modules/moment/locale/bn.js\",\n\t\"./bo\": \"./node_modules/moment/locale/bo.js\",\n\t\"./bo.js\": \"./node_modules/moment/locale/bo.js\",\n\t\"./br\": \"./node_modules/moment/locale/br.js\",\n\t\"./br.js\": \"./node_modules/moment/locale/br.js\",\n\t\"./bs\": \"./node_modules/moment/locale/bs.js\",\n\t\"./bs.js\": \"./node_modules/moment/locale/bs.js\",\n\t\"./ca\": \"./node_modules/moment/locale/ca.js\",\n\t\"./ca.js\": \"./node_modules/moment/locale/ca.js\",\n\t\"./cs\": \"./node_modules/moment/locale/cs.js\",\n\t\"./cs.js\": \"./node_modules/moment/locale/cs.js\",\n\t\"./cv\": \"./node_modules/moment/locale/cv.js\",\n\t\"./cv.js\": \"./node_modules/moment/locale/cv.js\",\n\t\"./cy\": \"./node_modules/moment/locale/cy.js\",\n\t\"./cy.js\": \"./node_modules/moment/locale/cy.js\",\n\t\"./da\": \"./node_modules/moment/locale/da.js\",\n\t\"./da.js\": \"./node_modules/moment/locale/da.js\",\n\t\"./de\": \"./node_modules/moment/locale/de.js\",\n\t\"./de-at\": \"./node_modules/moment/locale/de-at.js\",\n\t\"./de-at.js\": \"./node_modules/moment/locale/de-at.js\",\n\t\"./de-ch\": \"./node_modules/moment/locale/de-ch.js\",\n\t\"./de-ch.js\": \"./node_modules/moment/locale/de-ch.js\",\n\t\"./de.js\": \"./node_modules/moment/locale/de.js\",\n\t\"./dv\": \"./node_modules/moment/locale/dv.js\",\n\t\"./dv.js\": \"./node_modules/moment/locale/dv.js\",\n\t\"./el\": \"./node_modules/moment/locale/el.js\",\n\t\"./el.js\": \"./node_modules/moment/locale/el.js\",\n\t\"./en-SG\": \"./node_modules/moment/locale/en-SG.js\",\n\t\"./en-SG.js\": \"./node_modules/moment/locale/en-SG.js\",\n\t\"./en-au\": \"./node_modules/moment/locale/en-au.js\",\n\t\"./en-au.js\": \"./node_modules/moment/locale/en-au.js\",\n\t\"./en-ca\": \"./node_modules/moment/locale/en-ca.js\",\n\t\"./en-ca.js\": \"./node_modules/moment/locale/en-ca.js\",\n\t\"./en-gb\": \"./node_modules/moment/locale/en-gb.js\",\n\t\"./en-gb.js\": \"./node_modules/moment/locale/en-gb.js\",\n\t\"./en-ie\": \"./node_modules/moment/locale/en-ie.js\",\n\t\"./en-ie.js\": \"./node_modules/moment/locale/en-ie.js\",\n\t\"./en-il\": \"./node_modules/moment/locale/en-il.js\",\n\t\"./en-il.js\": \"./node_modules/moment/locale/en-il.js\",\n\t\"./en-nz\": \"./node_modules/moment/locale/en-nz.js\",\n\t\"./en-nz.js\": \"./node_modules/moment/locale/en-nz.js\",\n\t\"./eo\": \"./node_modules/moment/locale/eo.js\",\n\t\"./eo.js\": \"./node_modules/moment/locale/eo.js\",\n\t\"./es\": \"./node_modules/moment/locale/es.js\",\n\t\"./es-do\": \"./node_modules/moment/locale/es-do.js\",\n\t\"./es-do.js\": \"./node_modules/moment/locale/es-do.js\",\n\t\"./es-us\": \"./node_modules/moment/locale/es-us.js\",\n\t\"./es-us.js\": \"./node_modules/moment/locale/es-us.js\",\n\t\"./es.js\": \"./node_modules/moment/locale/es.js\",\n\t\"./et\": \"./node_modules/moment/locale/et.js\",\n\t\"./et.js\": \"./node_modules/moment/locale/et.js\",\n\t\"./eu\": \"./node_modules/moment/locale/eu.js\",\n\t\"./eu.js\": \"./node_modules/moment/locale/eu.js\",\n\t\"./fa\": \"./node_modules/moment/locale/fa.js\",\n\t\"./fa.js\": \"./node_modules/moment/locale/fa.js\",\n\t\"./fi\": \"./node_modules/moment/locale/fi.js\",\n\t\"./fi.js\": \"./node_modules/moment/locale/fi.js\",\n\t\"./fo\": \"./node_modules/moment/locale/fo.js\",\n\t\"./fo.js\": \"./node_modules/moment/locale/fo.js\",\n\t\"./fr\": \"./node_modules/moment/locale/fr.js\",\n\t\"./fr-ca\": \"./node_modules/moment/locale/fr-ca.js\",\n\t\"./fr-ca.js\": \"./node_modules/moment/locale/fr-ca.js\",\n\t\"./fr-ch\": \"./node_modules/moment/locale/fr-ch.js\",\n\t\"./fr-ch.js\": \"./node_modules/moment/locale/fr-ch.js\",\n\t\"./fr.js\": \"./node_modules/moment/locale/fr.js\",\n\t\"./fy\": \"./node_modules/moment/locale/fy.js\",\n\t\"./fy.js\": \"./node_modules/moment/locale/fy.js\",\n\t\"./ga\": \"./node_modules/moment/locale/ga.js\",\n\t\"./ga.js\": \"./node_modules/moment/locale/ga.js\",\n\t\"./gd\": \"./node_modules/moment/locale/gd.js\",\n\t\"./gd.js\": \"./node_modules/moment/locale/gd.js\",\n\t\"./gl\": \"./node_modules/moment/locale/gl.js\",\n\t\"./gl.js\": \"./node_modules/moment/locale/gl.js\",\n\t\"./gom-latn\": \"./node_modules/moment/locale/gom-latn.js\",\n\t\"./gom-latn.js\": \"./node_modules/moment/locale/gom-latn.js\",\n\t\"./gu\": \"./node_modules/moment/locale/gu.js\",\n\t\"./gu.js\": \"./node_modules/moment/locale/gu.js\",\n\t\"./he\": \"./node_modules/moment/locale/he.js\",\n\t\"./he.js\": \"./node_modules/moment/locale/he.js\",\n\t\"./hi\": \"./node_modules/moment/locale/hi.js\",\n\t\"./hi.js\": \"./node_modules/moment/locale/hi.js\",\n\t\"./hr\": \"./node_modules/moment/locale/hr.js\",\n\t\"./hr.js\": \"./node_modules/moment/locale/hr.js\",\n\t\"./hu\": \"./node_modules/moment/locale/hu.js\",\n\t\"./hu.js\": \"./node_modules/moment/locale/hu.js\",\n\t\"./hy-am\": \"./node_modules/moment/locale/hy-am.js\",\n\t\"./hy-am.js\": \"./node_modules/moment/locale/hy-am.js\",\n\t\"./id\": \"./node_modules/moment/locale/id.js\",\n\t\"./id.js\": \"./node_modules/moment/locale/id.js\",\n\t\"./is\": \"./node_modules/moment/locale/is.js\",\n\t\"./is.js\": \"./node_modules/moment/locale/is.js\",\n\t\"./it\": \"./node_modules/moment/locale/it.js\",\n\t\"./it-ch\": \"./node_modules/moment/locale/it-ch.js\",\n\t\"./it-ch.js\": \"./node_modules/moment/locale/it-ch.js\",\n\t\"./it.js\": \"./node_modules/moment/locale/it.js\",\n\t\"./ja\": \"./node_modules/moment/locale/ja.js\",\n\t\"./ja.js\": \"./node_modules/moment/locale/ja.js\",\n\t\"./jv\": \"./node_modules/moment/locale/jv.js\",\n\t\"./jv.js\": \"./node_modules/moment/locale/jv.js\",\n\t\"./ka\": \"./node_modules/moment/locale/ka.js\",\n\t\"./ka.js\": \"./node_modules/moment/locale/ka.js\",\n\t\"./kk\": \"./node_modules/moment/locale/kk.js\",\n\t\"./kk.js\": \"./node_modules/moment/locale/kk.js\",\n\t\"./km\": \"./node_modules/moment/locale/km.js\",\n\t\"./km.js\": \"./node_modules/moment/locale/km.js\",\n\t\"./kn\": \"./node_modules/moment/locale/kn.js\",\n\t\"./kn.js\": \"./node_modules/moment/locale/kn.js\",\n\t\"./ko\": \"./node_modules/moment/locale/ko.js\",\n\t\"./ko.js\": \"./node_modules/moment/locale/ko.js\",\n\t\"./ku\": \"./node_modules/moment/locale/ku.js\",\n\t\"./ku.js\": \"./node_modules/moment/locale/ku.js\",\n\t\"./ky\": \"./node_modules/moment/locale/ky.js\",\n\t\"./ky.js\": \"./node_modules/moment/locale/ky.js\",\n\t\"./lb\": \"./node_modules/moment/locale/lb.js\",\n\t\"./lb.js\": \"./node_modules/moment/locale/lb.js\",\n\t\"./lo\": \"./node_modules/moment/locale/lo.js\",\n\t\"./lo.js\": \"./node_modules/moment/locale/lo.js\",\n\t\"./lt\": \"./node_modules/moment/locale/lt.js\",\n\t\"./lt.js\": \"./node_modules/moment/locale/lt.js\",\n\t\"./lv\": \"./node_modules/moment/locale/lv.js\",\n\t\"./lv.js\": \"./node_modules/moment/locale/lv.js\",\n\t\"./me\": \"./node_modules/moment/locale/me.js\",\n\t\"./me.js\": \"./node_modules/moment/locale/me.js\",\n\t\"./mi\": \"./node_modules/moment/locale/mi.js\",\n\t\"./mi.js\": \"./node_modules/moment/locale/mi.js\",\n\t\"./mk\": \"./node_modules/moment/locale/mk.js\",\n\t\"./mk.js\": \"./node_modules/moment/locale/mk.js\",\n\t\"./ml\": \"./node_modules/moment/locale/ml.js\",\n\t\"./ml.js\": \"./node_modules/moment/locale/ml.js\",\n\t\"./mn\": \"./node_modules/moment/locale/mn.js\",\n\t\"./mn.js\": \"./node_modules/moment/locale/mn.js\",\n\t\"./mr\": \"./node_modules/moment/locale/mr.js\",\n\t\"./mr.js\": \"./node_modules/moment/locale/mr.js\",\n\t\"./ms\": \"./node_modules/moment/locale/ms.js\",\n\t\"./ms-my\": \"./node_modules/moment/locale/ms-my.js\",\n\t\"./ms-my.js\": \"./node_modules/moment/locale/ms-my.js\",\n\t\"./ms.js\": \"./node_modules/moment/locale/ms.js\",\n\t\"./mt\": \"./node_modules/moment/locale/mt.js\",\n\t\"./mt.js\": \"./node_modules/moment/locale/mt.js\",\n\t\"./my\": \"./node_modules/moment/locale/my.js\",\n\t\"./my.js\": \"./node_modules/moment/locale/my.js\",\n\t\"./nb\": \"./node_modules/moment/locale/nb.js\",\n\t\"./nb.js\": \"./node_modules/moment/locale/nb.js\",\n\t\"./ne\": \"./node_modules/moment/locale/ne.js\",\n\t\"./ne.js\": \"./node_modules/moment/locale/ne.js\",\n\t\"./nl\": \"./node_modules/moment/locale/nl.js\",\n\t\"./nl-be\": \"./node_modules/moment/locale/nl-be.js\",\n\t\"./nl-be.js\": \"./node_modules/moment/locale/nl-be.js\",\n\t\"./nl.js\": \"./node_modules/moment/locale/nl.js\",\n\t\"./nn\": \"./node_modules/moment/locale/nn.js\",\n\t\"./nn.js\": \"./node_modules/moment/locale/nn.js\",\n\t\"./pa-in\": \"./node_modules/moment/locale/pa-in.js\",\n\t\"./pa-in.js\": \"./node_modules/moment/locale/pa-in.js\",\n\t\"./pl\": \"./node_modules/moment/locale/pl.js\",\n\t\"./pl.js\": \"./node_modules/moment/locale/pl.js\",\n\t\"./pt\": \"./node_modules/moment/locale/pt.js\",\n\t\"./pt-br\": \"./node_modules/moment/locale/pt-br.js\",\n\t\"./pt-br.js\": \"./node_modules/moment/locale/pt-br.js\",\n\t\"./pt.js\": \"./node_modules/moment/locale/pt.js\",\n\t\"./ro\": \"./node_modules/moment/locale/ro.js\",\n\t\"./ro.js\": \"./node_modules/moment/locale/ro.js\",\n\t\"./ru\": \"./node_modules/moment/locale/ru.js\",\n\t\"./ru.js\": \"./node_modules/moment/locale/ru.js\",\n\t\"./sd\": \"./node_modules/moment/locale/sd.js\",\n\t\"./sd.js\": \"./node_modules/moment/locale/sd.js\",\n\t\"./se\": \"./node_modules/moment/locale/se.js\",\n\t\"./se.js\": \"./node_modules/moment/locale/se.js\",\n\t\"./si\": \"./node_modules/moment/locale/si.js\",\n\t\"./si.js\": \"./node_modules/moment/locale/si.js\",\n\t\"./sk\": \"./node_modules/moment/locale/sk.js\",\n\t\"./sk.js\": \"./node_modules/moment/locale/sk.js\",\n\t\"./sl\": \"./node_modules/moment/locale/sl.js\",\n\t\"./sl.js\": \"./node_modules/moment/locale/sl.js\",\n\t\"./sq\": \"./node_modules/moment/locale/sq.js\",\n\t\"./sq.js\": \"./node_modules/moment/locale/sq.js\",\n\t\"./sr\": \"./node_modules/moment/locale/sr.js\",\n\t\"./sr-cyrl\": \"./node_modules/moment/locale/sr-cyrl.js\",\n\t\"./sr-cyrl.js\": \"./node_modules/moment/locale/sr-cyrl.js\",\n\t\"./sr.js\": \"./node_modules/moment/locale/sr.js\",\n\t\"./ss\": \"./node_modules/moment/locale/ss.js\",\n\t\"./ss.js\": \"./node_modules/moment/locale/ss.js\",\n\t\"./sv\": \"./node_modules/moment/locale/sv.js\",\n\t\"./sv.js\": \"./node_modules/moment/locale/sv.js\",\n\t\"./sw\": \"./node_modules/moment/locale/sw.js\",\n\t\"./sw.js\": \"./node_modules/moment/locale/sw.js\",\n\t\"./ta\": \"./node_modules/moment/locale/ta.js\",\n\t\"./ta.js\": \"./node_modules/moment/locale/ta.js\",\n\t\"./te\": \"./node_modules/moment/locale/te.js\",\n\t\"./te.js\": \"./node_modules/moment/locale/te.js\",\n\t\"./tet\": \"./node_modules/moment/locale/tet.js\",\n\t\"./tet.js\": \"./node_modules/moment/locale/tet.js\",\n\t\"./tg\": \"./node_modules/moment/locale/tg.js\",\n\t\"./tg.js\": \"./node_modules/moment/locale/tg.js\",\n\t\"./th\": \"./node_modules/moment/locale/th.js\",\n\t\"./th.js\": \"./node_modules/moment/locale/th.js\",\n\t\"./tl-ph\": \"./node_modules/moment/locale/tl-ph.js\",\n\t\"./tl-ph.js\": \"./node_modules/moment/locale/tl-ph.js\",\n\t\"./tlh\": \"./node_modules/moment/locale/tlh.js\",\n\t\"./tlh.js\": \"./node_modules/moment/locale/tlh.js\",\n\t\"./tr\": \"./node_modules/moment/locale/tr.js\",\n\t\"./tr.js\": \"./node_modules/moment/locale/tr.js\",\n\t\"./tzl\": \"./node_modules/moment/locale/tzl.js\",\n\t\"./tzl.js\": \"./node_modules/moment/locale/tzl.js\",\n\t\"./tzm\": \"./node_modules/moment/locale/tzm.js\",\n\t\"./tzm-latn\": \"./node_modules/moment/locale/tzm-latn.js\",\n\t\"./tzm-latn.js\": \"./node_modules/moment/locale/tzm-latn.js\",\n\t\"./tzm.js\": \"./node_modules/moment/locale/tzm.js\",\n\t\"./ug-cn\": \"./node_modules/moment/locale/ug-cn.js\",\n\t\"./ug-cn.js\": \"./node_modules/moment/locale/ug-cn.js\",\n\t\"./uk\": \"./node_modules/moment/locale/uk.js\",\n\t\"./uk.js\": \"./node_modules/moment/locale/uk.js\",\n\t\"./ur\": \"./node_modules/moment/locale/ur.js\",\n\t\"./ur.js\": \"./node_modules/moment/locale/ur.js\",\n\t\"./uz\": \"./node_modules/moment/locale/uz.js\",\n\t\"./uz-latn\": \"./node_modules/moment/locale/uz-latn.js\",\n\t\"./uz-latn.js\": \"./node_modules/moment/locale/uz-latn.js\",\n\t\"./uz.js\": \"./node_modules/moment/locale/uz.js\",\n\t\"./vi\": \"./node_modules/moment/locale/vi.js\",\n\t\"./vi.js\": \"./node_modules/moment/locale/vi.js\",\n\t\"./x-pseudo\": \"./node_modules/moment/locale/x-pseudo.js\",\n\t\"./x-pseudo.js\": \"./node_modules/moment/locale/x-pseudo.js\",\n\t\"./yo\": \"./node_modules/moment/locale/yo.js\",\n\t\"./yo.js\": \"./node_modules/moment/locale/yo.js\",\n\t\"./zh-cn\": \"./node_modules/moment/locale/zh-cn.js\",\n\t\"./zh-cn.js\": \"./node_modules/moment/locale/zh-cn.js\",\n\t\"./zh-hk\": \"./node_modules/moment/locale/zh-hk.js\",\n\t\"./zh-hk.js\": \"./node_modules/moment/locale/zh-hk.js\",\n\t\"./zh-tw\": \"./node_modules/moment/locale/zh-tw.js\",\n\t\"./zh-tw.js\": \"./node_modules/moment/locale/zh-tw.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./node_modules/moment/locale sync recursive ^\\\\.\\\\/.*$\";","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","import { Point, Size, Rectangle, PositionInRectangle, MouseEventType } from '../models/annotation';\r\nimport { AnnTool } from \"./ann-tool\";\r\nimport { Image } from \"../models/pssi\";\r\nimport { IImageViewer } from \"../interfaces/image-viewer-interface\";\r\nimport { IAnnotationObject } from \"../interfaces/annotation-object-interface\";\r\nimport { ViewContext, ViewContextEnum } from \"../services/view-context.service\"\r\nimport { AnnSerialize } from \"./ann-serialize\";\r\n\r\nexport class Colors {\r\n    static white = \"#ffffff\";\r\n    static red = \"#ff0000\";\r\n    static yellow = \"#ffff00\";\r\n    static green = \"#00FF00\";\r\n    static blue = \"#0000FF\";\r\n};\r\n\r\nexport abstract class AnnObject {\r\n    protected created: boolean;\r\n    protected selected: boolean;\r\n    protected dragging: boolean;\r\n    protected mouseResponsible: boolean;\r\n\r\n    protected selectedColor = \"#F90\";\r\n    protected defaultColor = \"#FFF\";\r\n\r\n    protected image: Image;\r\n    protected layerId: string; \r\n    protected labelLayerId: string;\r\n\r\n    protected minLineWidth = 0.3;\r\n    protected minPointRadius = 2;\r\n    protected minArrowLineLength = 10;\r\n    protected minFontSize = 15;\r\n\r\n    protected lineWidth: number;\r\n    protected pointRadius: number;\r\n\r\n    protected oldCursor: any;\r\n\r\n    protected imageViewer: IImageViewer;\r\n\r\n    protected parentObj: AnnObject;\r\n    protected focusedObj: AnnObject;\r\n\r\n    protected pixelSpacing: Size;\r\n    protected stepIndex = -1;\r\n\r\n    constructor(parentObj: AnnObject, imageViewer: IImageViewer) {\r\n\r\n        this.parentObj = parentObj;\r\n        this.imageViewer = imageViewer;\r\n        this.image = imageViewer.getImage();\r\n        this.layerId = imageViewer.getAnnotationLayerId();\r\n        this.labelLayerId = imageViewer.getAnnLabelLayerId();\r\n\r\n        this.created = false;\r\n        this.selected = false;\r\n        this.dragging = false;\r\n        this.mouseResponsible = true;\r\n\r\n        this.lineWidth = this.getLineWidth();\r\n        this.pointRadius = this.getPointRadius();\r\n\r\n        this.pixelSpacing = this.image.getPixelSpacing();\r\n    }\r\n\r\n    isCreated() {\r\n        return this.created;\r\n    }\r\n\r\n    isSelected(): boolean {\r\n        return this.selected;\r\n    }\r\n\r\n    setStepIndex(stepIndex: number) {\r\n        this.stepIndex = stepIndex;\r\n    }\r\n\r\n    getDefaultColor(): string {\r\n        return this.defaultColor;\r\n    }\r\n\r\n    getFocusedObj(): AnnObject {\r\n        return this.focusedObj;\r\n    }\r\n\r\n    getStepIndex(): number {\r\n        return this.stepIndex;\r\n    }\r\n\r\n    setMouseResponsible(mouseResponsible: boolean) {\r\n        this.mouseResponsible = mouseResponsible;\r\n    }\r\n\r\n    onChildSelected(selectedObj: AnnObject) {\r\n\r\n        this.focusedObj = selectedObj;\r\n\r\n        if (this.parentObj) {\r\n            // If have parent, let parent manage the select status\r\n            this.parentObj.onChildSelected(this);\r\n        } else {\r\n            this.onSelect(true, true);\r\n        }\r\n    }\r\n\r\n    onChildDragStarted(draggedObj: any, pos: Point) {\r\n\r\n        this.focusedObj = draggedObj;\r\n\r\n        if (this.parentObj) {\r\n            // If have parent, let parent manage the drag status\r\n            this.parentObj.onChildDragStarted(this, pos);\r\n        } else {\r\n            this.onDragStarted(pos);\r\n        }\r\n    }\r\n\r\n    onChildDragEnded(draggedObj: any, pos: Point) {\r\n\r\n        this.focusedObj = draggedObj;\r\n\r\n        if (this.parentObj) {\r\n            // If have parent, let parent manage the drag status\r\n            this.parentObj.onChildDragEnded(this, pos);\r\n        } else {\r\n            this.onDragEnded(pos);\r\n        }\r\n    }\r\n\r\n    onChildDragged(draggedObj: any, deltaX: number, deltaY: number) {\r\n\r\n        this.focusedObj = draggedObj;\r\n\r\n        if (this.parentObj) {\r\n            // If have parent, let parent manage the drag status\r\n            this.parentObj.onChildDragged(this, deltaX, deltaY);\r\n        } else {\r\n            this.onDrag(deltaX, deltaY);\r\n        }\r\n    }\r\n\r\n    deleteObject(obj: any) {\r\n        if (AnnTool.isJcanvasObject(obj)) {\r\n            obj.del();\r\n            obj = undefined;\r\n        } else if (obj instanceof AnnObject) {\r\n            let annObj = obj as AnnObject;\r\n            annObj.onDeleteChildren();\r\n            annObj = undefined;\r\n        }\r\n    }\r\n\r\n    onKeyDown(keyEvent: any): void {\r\n\r\n        if (!this.focusedObj) return;\r\n\r\n        let focusedBottomObj = this.focusedObj;\r\n        while (focusedBottomObj.focusedObj) {\r\n            focusedBottomObj = focusedBottomObj.focusedObj;\r\n        }\r\n\r\n        // Move 5 screen point by default, or move 1 screen point if ctrl key is pressed\r\n        const step = keyEvent.ctrlKey ? 1 : 5;\r\n\r\n        const posImageOld = this.focusedObj.getPosition();\r\n        let posScreen = AnnTool.imageToScreen(posImageOld, focusedBottomObj.parentObj.getTransformMatrix());\r\n\r\n        if (keyEvent.code === \"ArrowUp\") {\r\n            posScreen.y -= step;\r\n        } else if (keyEvent.code === \"ArrowDown\") {\r\n            posScreen.y += step;\r\n        } else if (keyEvent.code === \"ArrowLeft\") {\r\n            posScreen.x -= step;\r\n        } else if (keyEvent.code === \"ArrowRight\") {\r\n            posScreen.x += step;\r\n        }\r\n\r\n        const posImageNew = AnnTool.screenToImage(posScreen, focusedBottomObj.parentObj.getTransformMatrix());\r\n        focusedBottomObj.parentObj.onChildDragged(focusedBottomObj, posImageNew.x - posImageOld.x, posImageNew.y - posImageOld.y);\r\n    }\r\n\r\n    getLineWidth(): number {\r\n        let lineWidth = 1 / this.image.getScaleValue();\r\n        if (lineWidth < this.minLineWidth) {\r\n            lineWidth = this.minLineWidth;\r\n        }\r\n\r\n        return lineWidth;\r\n    }\r\n\r\n    getPointRadius(): number {\r\n        let pointRadius = 3 / this.image.getScaleValue();\r\n        if (pointRadius < this.minPointRadius) {\r\n            pointRadius = this.minPointRadius;\r\n        }\r\n\r\n        return pointRadius;\r\n    }\r\n\r\n    getArrowLineLength(): number {\r\n        let lineLength = 10 / this.image.getScaleValue();\r\n        if (lineLength < this.minArrowLineLength) {\r\n            lineLength = this.minArrowLineLength;\r\n        }\r\n\r\n        return lineLength;\r\n    }\r\n\r\n    getFontSize(): number {\r\n        const scale = this.image.getScaleValue();\r\n        return scale > 1 ? this.minFontSize : this.minFontSize / scale;\r\n    }\r\n\r\n    getTransformMatrix(): any {\r\n        return this.image.transformMatrix;\r\n    }\r\n\r\n    getCursor(): any {\r\n        return this.imageViewer.getCursor();\r\n    }\r\n\r\n    setCursor(cursor: any): void {\r\n        this.imageViewer.setCursor(cursor);\r\n    }\r\n\r\n    setChildDraggable(parentObj: any, child: any, draggable: boolean) {\r\n\r\n        child.draggable({\r\n            disabled: !draggable,\r\n            start: arg => {\r\n                console.log(parentObj.constructor.name + \" on drag start\");\r\n                child._lastPos = {};\r\n\r\n                const point = AnnTool.screenToImage({ x: arg.x, y: arg.y }, parentObj.getTransformMatrix());\r\n                if (parentObj.onChildDragStarted) {\r\n                    parentObj.onChildDragStarted(child, point);\r\n                }\r\n\r\n            },\r\n            stop: arg => {\r\n                console.log(parentObj.constructor.name + \" on drag stop\");\r\n                child._lastPos = {};\r\n                if (this.imageViewer.getContext().action === ViewContextEnum.SelectAnn && parentObj.dragging) {\r\n                    parentObj.dragging = false;\r\n\r\n                    const point = AnnTool.screenToImage({ x: arg.x, y: arg.y }, parentObj.getTransformMatrix());\r\n                    if (parentObj.onChildDragEnded) {\r\n                        parentObj.onChildDragEnded(child, point);\r\n                    }\r\n                }\r\n            },\r\n            drag: arg => {\r\n\r\n                if (this.imageViewer.getContext().action === ViewContextEnum.SelectAnn && this.imageViewer.isDragging()) {\r\n                    const point = AnnTool.screenToImage({ x: arg.x, y: arg.y }, parentObj.getTransformMatrix());\r\n\r\n                    \r\n                    parentObj.dragging = true;\r\n\r\n                    if (typeof (child._lastPos.x) != \"undefined\") {\r\n                        const deltaX = point.x - child._lastPos.x;\r\n                        const deltaY = point.y - child._lastPos.y;\r\n\r\n                        console.log(parentObj.constructor.name + \" do dragging, deltaX = \" + deltaX + \" deltaY = \" + deltaY);\r\n                        //child._x += deltaX;\r\n                        //child._y += deltaY;\r\n\r\n                        //if (onDrag) {\r\n                        //    onDrag.call(parentObj, child, deltaX, deltaY);\r\n                        //}\r\n\r\n                        if (parentObj.onChildDragged) {\r\n                            parentObj.onChildDragged(child, deltaX, deltaY);\r\n                        }\r\n                    }\r\n\r\n                    child._lastPos = point;\r\n                }\r\n                return true;\r\n            }\r\n        });\r\n    }\r\n\r\n    setChildMouseEvent(parentObj: AnnObject, child: any) {\r\n\r\n        child._onmouseover = arg => {\r\n            if (parentObj.needResponseToChildMouseEvent()) {\r\n                console.log(parentObj.constructor.name + \" on mouse over\");\r\n                parentObj.onMouseEvent(MouseEventType.MouseOver, arg, child);\r\n                if (!this.imageViewer.isDragging()) {\r\n                    parentObj.oldCursor = parentObj.getCursor();\r\n                    parentObj.setCursor(child.mouseStyle);\r\n                }\r\n                \r\n            }\r\n\r\n            return false;\r\n        };\r\n\r\n        child._onmouseout = arg => {\r\n            if (parentObj.needResponseToChildMouseEvent()) {\r\n                console.log(parentObj.constructor.name + \" on mouse out\");\r\n                parentObj.onMouseEvent(MouseEventType.MouseOut, arg, child);\r\n                if (!this.imageViewer.isDragging()) {\r\n                    parentObj.setCursor(undefined);\r\n                }\r\n            }\r\n\r\n            return false;\r\n        };\r\n\r\n        child._onmousedown = arg => {\r\n            if (parentObj.needResponseToChildMouseEvent()) {\r\n                console.log(parentObj.constructor.name + \" on mouse down\");\r\n                parentObj.onMouseEvent(MouseEventType.MouseDown, arg, child);\r\n            }\r\n\r\n            //arg.event.cancelBubble = true;\r\n            //arg.event.stopPropagation();\r\n            //arg.event.stopImmediatePropagation();\r\n            //arg.event.preventDefault();\r\n\r\n            // return false to make sure no other jc object's mouse event will be called\r\n            return true;\r\n        };\r\n    }\r\n\r\n    needResponseToChildMouseEvent(): boolean {\r\n        return !this.dragging && this.imageViewer.getContext().action === ViewContextEnum.SelectAnn;\r\n    }\r\n\r\n\r\n    abstract onSelect(selected: boolean, focused: boolean);\r\n    abstract onDrag(deltaX: number, deltaY: number);\r\n    abstract onTranslate(deltaX: number, deltaY: number);\r\n    abstract onRotate(angle: number);\r\n    abstract onScale();\r\n    abstract onFlip(vertical: boolean);\r\n    abstract onMove(point: Point);\r\n    abstract onMouseEvent(mouseEventType: MouseEventType, point: Point, mouseObj: any);\r\n    abstract onLevelUp(level: any);\r\n    abstract onLevelDown(level: any);\r\n    abstract onChildCreated(annChildObj: AnnObject);\r\n    abstract onDeleteChild(annChildObj: AnnObject);\r\n    abstract onDeleteChildren();\r\n    abstract onDrawEnded();\r\n    abstract getRect(): Rectangle;\r\n    abstract getPosition(): Point;\r\n    abstract getSurroundPointList(): Point[];\r\n    abstract setVisible(visible: boolean);\r\n    abstract onLoad(config: any): any;\r\n    abstract onSave(annSerialize: AnnSerialize);\r\n    abstract onDragStarted(pos: Point);\r\n    abstract onDragEnded(pos: Point);\r\n}\r\n","﻿import { Point } from '../models/annotation';\r\nimport { IImageViewer } from \"../interfaces/image-viewer-interface\";\r\nimport { AnnExtendObject } from \"./extend-object/ann-extend-object\";\r\nimport { AnnotationService } from \"../services/annotation.service\";\r\n\r\nexport class AnnSerialize {\r\n    annData: Uint8Array;\r\n    imageViewer: IImageViewer;\r\n    annString = \"\";\r\n    version = 1023;\r\n    annotationService: AnnotationService;\r\n\r\n    constructor(annData: Uint8Array, imageViewer: IImageViewer) {\r\n        this.annData = annData;\r\n        this.imageViewer = imageViewer;\r\n        this.annotationService = imageViewer.getAnnotationService();\r\n    }\r\n\r\n    createAnn(): boolean {\r\n        if (!this.annData) return false;\r\n\r\n        if (this.annData[this.annData.length - 1] === 0X20) {\r\n            // Remove the last 0X20\r\n            this.readInteger(1);\r\n        }\r\n\r\n        this.version = this.readInteger(4);\r\n        const annCount = this.readInteger(4);\r\n\r\n        for (let i = 0; i < annCount; i++) {\r\n            const annIsName = this.readString();\r\n            const annDefData = this.annotationService.getAnnDefDataByIsName(annIsName);\r\n            if (!annDefData) {\r\n                return false;\r\n            }\r\n\r\n            const annObj = new annDefData.classType(undefined, this.imageViewer);\r\n            annObj.onLoad(this);\r\n        }\r\n\r\n        return annCount > 0;\r\n    }\r\n\r\n    getAnnString(annList: AnnExtendObject[]): string {\r\n        this.annData = new Uint8Array(0);\r\n        this.annString = \"\";\r\n        this.writeInteger(this.version, 4);\r\n        this.writeInteger(annList.length, 4);\r\n        annList.forEach(annObj => annObj.onSave(this));\r\n        return this.annString;\r\n    }\r\n\r\n    readInteger(bytes: number): number {\r\n        const length = this.annData.length;\r\n        let value = 0;\r\n        for (let i = 0; i < bytes; i++) {\r\n            value += this.annData[length - i - 1] << (i * 8);\r\n        }\r\n\r\n        this.annData = this.annData.slice(0, length - bytes);\r\n        return value;\r\n    }\r\n\r\n    readString(): string {\r\n        const strLen = this.readInteger(4) / 2;\r\n        let str = \"\";\r\n\r\n        for (let index = 0; index < strLen; index++) {\r\n            const ch = this.readInteger(2);\r\n            str += String.fromCharCode(ch);\r\n        }\r\n\r\n        return str;\r\n    }\r\n\r\n    readIntegerPoint(): Point {\r\n        return { x: this.readInteger(4), y: this.readInteger(4) };\r\n    }\r\n\r\n    readDouble(): number {\r\n        const ebits = 11;\r\n        const fbits = 52;\r\n\r\n        const bytes = this.readBytes(8);\r\n\r\n        // Bytes to bits\r\n        var bits = [];\r\n        for (var i = bytes.length; i; i -= 1) {\r\n            var byte = bytes[i - 1];\r\n            for (var j = 8; j; j -= 1) {\r\n                bits.push(byte % 2 ? 1 : 0); byte = byte >> 1;\r\n            }\r\n        }\r\n        bits.reverse();\r\n        var str = bits.join('');\r\n\r\n        // Unpack sign, exponent, fraction\r\n        var bias = (1 << (ebits - 1)) - 1;\r\n        var s = parseInt(str.substring(0, 1), 2) ? -1 : 1;\r\n        var e = parseInt(str.substring(1, 1 + ebits), 2);\r\n        var f = parseInt(str.substring(1 + ebits), 2);\r\n\r\n        // Produce number\r\n        if (e === (1 << ebits) - 1) {\r\n            return f !== 0 ? NaN : s * Infinity;\r\n        }\r\n        else if (e > 0) {\r\n            return s * Math.pow(2, e - bias) * (1 + f / Math.pow(2, fbits));\r\n        }\r\n        else if (f !== 0) {\r\n            return s * Math.pow(2, -(bias - 1)) * (f / Math.pow(2, fbits));\r\n        }\r\n        else {\r\n            return s * 0;\r\n        }\r\n    }\r\n\r\n    readDoublePoint(): Point {\r\n        return { x: this.readDouble(), y: this.readDouble() };\r\n    }\r\n\r\n    readBytes(count: number = -1) {\r\n        if (count === -1) {\r\n            count = this.readInteger(4);\r\n        }\r\n        \r\n        const bytes = [];\r\n        const length = this.annData.length;\r\n        for (let j = 0; j < count; j++) {\r\n            bytes.push(this.annData[length + j - count]);\r\n        }\r\n        this.annData = this.annData.slice(0, length - count);\r\n        return bytes;\r\n    }\r\n\r\n    writeBytes(bytes) {\r\n        const length = bytes.length;\r\n        this.writeInteger(length, 4);\r\n\r\n        this.addToAnnDataHead(bytes);\r\n        this.annString = this.byteArrayToHexString(bytes) + this.annString;\r\n    }\r\n\r\n    writeDouble(value: number) {\r\n        const ebits = 11;\r\n        const fbits = 52;\r\n\r\n        var bias = (1 << (ebits - 1)) - 1;\r\n\r\n        // Compute sign, exponent, fraction\r\n        var s, e, f;\r\n        if (isNaN(value)) {\r\n            e = (1 << bias) - 1; f = 1; s = 0;\r\n        }\r\n        else if (value === Infinity || value === -Infinity) {\r\n            e = (1 << bias) - 1; f = 0; s = (value < 0) ? 1 : 0;\r\n        }\r\n        else if (value === 0) {\r\n            e = 0; f = 0; s = (1 / value === -Infinity) ? 1 : 0;\r\n        }\r\n        else {\r\n            s = value < 0;\r\n            value = Math.abs(value);\r\n\r\n            if (value >= Math.pow(2, 1 - bias)) {\r\n                var ln = Math.min(Math.floor(Math.log(value) / Math.LN2), bias);\r\n                e = ln + bias;\r\n                f = value * Math.pow(2, fbits - ln) - Math.pow(2, fbits);\r\n            }\r\n            else {\r\n                e = 0;\r\n                f = value / Math.pow(2, 1 - bias - fbits);\r\n            }\r\n        }\r\n\r\n        // Pack sign, exponent, fraction\r\n        var i, bits = [];\r\n        for (i = fbits; i; i -= 1) { bits.push(f % 2 ? 1 : 0); f = Math.floor(f / 2); }\r\n        for (i = ebits; i; i -= 1) { bits.push(e % 2 ? 1 : 0); e = Math.floor(e / 2); }\r\n        bits.push(s ? 1 : 0);\r\n        bits.reverse();\r\n        var str = bits.join('');\r\n\r\n        // Bits to bytes\r\n        var bytes = [];\r\n        while (str.length) {\r\n            bytes.push(parseInt(str.substring(0, 8), 2));\r\n            str = str.substring(8);\r\n        }\r\n\r\n        this.addToAnnDataHead(bytes);\r\n        this.annString = this.byteArrayToHexString(bytes) + this.annString;\r\n    }\r\n\r\n    writeIntegerPoint(point: Point) {\r\n        this.writeInteger(point.x, 4);\r\n        this.writeInteger(point.y, 4);\r\n    }\r\n\r\n    writeDoublePoint(point: Point) {\r\n        this.writeDouble(point.x);\r\n        this.writeDouble(point.y);\r\n    }\r\n\r\n    writeInteger(value: number, bytes: number) {\r\n        // Old image suite annotation save the number in integer. Need to round it.\r\n        value = Math.round(value);\r\n        const byteArray = [];\r\n        for (let index = 0; index < bytes; index++) {\r\n            const byte = value & 0xff;\r\n            byteArray.unshift(byte);\r\n            value = (value - byte) / 256;\r\n        }\r\n\r\n        this.addToAnnDataHead(byteArray);\r\n        this.annString = this.byteArrayToHexString(byteArray) + this.annString;\r\n    }\r\n\r\n    writeString(str: string) {\r\n        const length = str.length;\r\n        this.writeInteger(length * 2, 4);\r\n        for (let index = 0; index < length; index ++) {\r\n            this.writeInteger(str.charCodeAt(index), 2);\r\n        }\r\n    }\r\n\r\n    byteArrayToHexString(byteArray): string {\r\n        let s = \"\";\r\n        byteArray.forEach(byte => {\r\n            s += (\"0\" + (byte & 0xFF).toString(16)).slice(-2);\r\n        });\r\n\r\n        return s;\r\n    }\r\n\r\n    addToAnnDataHead(byteArray) {\r\n        const annData = new Uint8Array(this.annData.length + byteArray.length);\r\n        annData.set(byteArray);\r\n        annData.set(this.annData, byteArray.length);\r\n        this.annData = annData;\r\n    }\r\n\r\n    loadBaseLine(): any {\r\n        const annName = this.readString(); // CGXAnnLine\r\n        const created = this.readInteger(4);\r\n        const moving = this.readInteger(4);\r\n        const selected = this.readInteger(1);\r\n\r\n        const startPoint = this.readIntegerPoint();\r\n        const endPoint = this.readIntegerPoint();\r\n\r\n        return { startPoint: startPoint, endPoint: endPoint, selected: selected };\r\n    }\r\n\r\n    loadLine(): any {\r\n        const annType = this.readInteger(4); // 33\r\n        const created = this.readInteger(4);\r\n        const selected = this.readInteger(1);\r\n        const config = this.loadBaseLine();\r\n\r\n        return config;\r\n    }\r\n\r\n    loadArrow(loadArrowMark: boolean = true): any {\r\n        // CGXAnnArrowMark\r\n        if (loadArrowMark) {\r\n            const annType = this.readInteger(4); // 10\r\n            const created = this.readInteger(4);\r\n            const selected = this.readInteger(1);\r\n        }\r\n\r\n        // CGXAnnArrow\r\n        const annName1 = this.readString();\r\n        const created1 = this.readInteger(4);\r\n        const selected1 = this.readInteger(1);\r\n\r\n        const config = this.loadBaseLine();\r\n\r\n        // The two small lines of the arrow will be created dynamically, read but ignore it\r\n        this.loadBaseLine();\r\n        this.loadBaseLine();\r\n\r\n        return config;\r\n    }\r\n\r\n    loadBaseText(): any {\r\n        const annName = this.readString(); // CGXAnnText\r\n        const created = this.readInteger(4);\r\n        const moving = this.readInteger(4);\r\n        const selected = this.readInteger(1);\r\n\r\n        const bottomRightPoint = this.readIntegerPoint();\r\n        const topLeftPoint = this.readIntegerPoint();\r\n        const text = this.readString();\r\n        const isRotateCreated = this.readInteger(4);\r\n        const rotateCreated = this.readInteger(4);\r\n        const fontHeight = this.readInteger(4);\r\n\r\n        return { topLeftPoint: topLeftPoint, bottomRightPoint: bottomRightPoint, text: text };\r\n    }\r\n\r\n    loadTextIndicator(): any {\r\n        const annName = this.readString(); // CGXAnnLabel\r\n        const created = this.readInteger(4);\r\n        const selected = this.readInteger(1);\r\n\r\n        const arrow = this.loadArrow(false);\r\n        const baseText = this.loadBaseText();\r\n\r\n        return arrow;\r\n    }\r\n\r\n    loadBaseRectangle(): any {\r\n        const annName = this.readString(); // CGXAnnRectangle\r\n        const created = this.readInteger(4);\r\n        const moving = this.readInteger(4);\r\n        const selected = this.readInteger(1);\r\n\r\n        const topLeftPoint = this.readIntegerPoint();\r\n        const bottomRightPoint = this.readIntegerPoint();\r\n        const topRightPoint = this.readIntegerPoint();\r\n        const bottomLeftPoint = this.readIntegerPoint();\r\n\r\n        return { topLeftPoint: topLeftPoint, width: bottomRightPoint.x - topLeftPoint.x, height: bottomRightPoint.y - topLeftPoint.y };\r\n    }\r\n\r\n    loadRectangle(): any {\r\n        const annType = this.readInteger(4); // 2\r\n        const created = this.readInteger(4);\r\n        const selected = this.readInteger(1);\r\n\r\n        const baseRect = this.loadBaseRectangle();\r\n        const textIndicator = this.loadTextIndicator();\r\n\r\n        return { baseRect: baseRect, textIndicator: textIndicator, selected: selected }\r\n    }\r\n\r\n    loadPolygon(): any {\r\n        const annType = this.readInteger(4); // 24\r\n        const created = this.readInteger(4);\r\n        const selected = this.readInteger(1);\r\n\r\n        const pointCount = this.readInteger(4);\r\n        const lineCount = this.readInteger(4);\r\n\r\n        const pointList = [];\r\n        for (let i = 0; i < pointCount; i++) {\r\n            pointList.push(this.readIntegerPoint());\r\n        }\r\n\r\n        for (let i = 0; i < lineCount; i++) {\r\n            this.loadBaseLine();\r\n        }\r\n\r\n        const textIndicator = this.loadTextIndicator();\r\n\r\n        return { pointList: pointList, textIndicator: textIndicator, selected: selected }\r\n    }\r\n\r\n    loadAngle(): any {\r\n        const annType = this.readInteger(4); // 8\r\n        const created = this.readInteger(4);\r\n        const moving = this.readInteger(4);\r\n        const selected = this.readInteger(1);\r\n        const arcAndTextOnly = this.readInteger(1);\r\n        const createState = this.readInteger(4);\r\n        const angle = this.readDouble();\r\n\r\n        for (let i = 0; i < 4; i++) {\r\n            this.readIntegerPoint();\r\n        }\r\n\r\n        const lineList = [];\r\n        for (let i = 0; i < 2; i++) {\r\n            lineList.push(this.loadBaseLine());\r\n        }\r\n\r\n        const textIndicator = this.loadTextIndicator();\r\n        return { lineList: lineList, textIndicator: textIndicator, selected: selected }\r\n    }\r\n\r\n    loadCurve() {\r\n        const annType = this.readInteger(4); // 30\r\n        const created = this.readInteger(4);\r\n        const selected = this.readInteger(1);\r\n\r\n\r\n        const pointList = [];\r\n        for (let i = 0; i < 3; i++) {\r\n            pointList.push(this.readDoublePoint());\r\n        }\r\n\r\n        const textIndicator = this.loadTextIndicator();\r\n        return { pointList: pointList, textIndicator: textIndicator, selected: selected }\r\n    }\r\n\r\n    loadImage() {\r\n        const imageFileName = this.readString();\r\n        const bytes = this.readBytes();\r\n        const annType = this.readInteger(4); // 10\r\n        const created = this.readInteger(4);\r\n        const moving = this.readInteger(4);\r\n        const selected = this.readInteger(1);\r\n\r\n        const topLeftPoint = this.readIntegerPoint();\r\n        const bottomRightPoint = this.readIntegerPoint();\r\n        const isRotateCreated = this.readInteger(1);\r\n        const rotateCreated = this.readInteger(4);\r\n\r\n        return { imageFileName: imageFileName, topLeftPoint: topLeftPoint, bottomRightPoint: bottomRightPoint, selected: selected }\r\n    }\r\n\r\n    loadEllipse() {\r\n        const width = this.readInteger(4);\r\n        const height = this.readInteger(4);\r\n        const selected = this.readInteger(1);\r\n        const centerPoint = this.readIntegerPoint();\r\n\r\n        const textIndicator = this.loadTextIndicator();\r\n        const isRotateCreated = this.readInteger(1);\r\n        const rotateCreated = this.readDouble();\r\n\r\n        return { centerPoint: centerPoint, width: width, height: height, textIndicator: textIndicator, selected: selected }\r\n    }\r\n\r\n    loadRuler() {\r\n        const annType = this.readInteger(4); // 7\r\n        const created = this.readInteger(4);\r\n        const selected = this.readInteger(1);\r\n\r\n        const line = this.loadBaseLine();\r\n        this.loadBaseLine();\r\n        this.loadBaseLine();\r\n\r\n        const textIndicator = this.loadTextIndicator();\r\n\r\n        return { startPoint: line.startPoint, endPoint: line.endPoint, textIndicator: textIndicator, selected: selected }\r\n    }\r\n\r\n    loadVerticalAxis() {\r\n        const annType = this.readInteger(4); // 27\r\n        const created = this.readInteger(4);\r\n        const selected = this.readInteger(1);\r\n\r\n        const initRotateCount = this.readInteger(4);\r\n        const line = this.loadBaseLine();\r\n\r\n        return { startPoint: line.startPoint, endPoint: line.endPoint, selected: selected }\r\n    }\r\n\r\n    loadMarkSpot() {\r\n        const annType = this.readInteger(4); // 36\r\n        const created = this.readInteger(4);\r\n        const selected = this.readInteger(1);\r\n\r\n        const count = this.readInteger(4);\r\n\r\n        const pointList = [];\r\n        for (let i = 0; i < count; i++) {\r\n            pointList.push(this.readIntegerPoint());\r\n        }\r\n\r\n        return { pointList: pointList, selected: selected }\r\n    }\r\n\r\n    loadCardiothoracicRatio() {\r\n        const annType = this.readInteger(4); // 12\r\n        const created = this.readInteger(4);\r\n        const selected = this.readInteger(1);\r\n\r\n        const lineList = [];\r\n        for (let i = 0; i < 5; i++) {\r\n            lineList.push(this.loadBaseLine());\r\n        }\r\n\r\n        const textIndicator = this.loadTextIndicator();\r\n        return { lineList: lineList, textIndicator: textIndicator, selected: selected }\r\n    }\r\n\r\n    loadFreeArea() {\r\n        const annType = this.readInteger(4); // 23\r\n        const created = this.readInteger(4);\r\n        const selected = this.readInteger(1);\r\n\r\n        const pointCount = this.readInteger(4);\r\n        const lineCount = this.readInteger(4);\r\n\r\n        const pointList = [];\r\n        for (let i = 0; i < pointCount; i++) {\r\n            pointList.push(this.readIntegerPoint());\r\n        }\r\n\r\n        for (let i = 0; i < lineCount; i++) {\r\n            this.loadBaseLine();\r\n        }\r\n\r\n        return { pointList: pointList, selected: selected }\r\n    }\r\n\r\n    loadTextMark() {\r\n        const annType = this.readInteger(4); // 6\r\n        const created = this.readInteger(4);\r\n        const isActive = this.readInteger(4);\r\n        const editCreated = this.readInteger(4);\r\n        const state = this.readInteger(4);\r\n        const selected = this.readInteger(1);\r\n\r\n        const fontSize = this.readInteger(4);\r\n        const basicText = this.loadBaseText();\r\n\r\n        const position = { x: basicText.topLeftPoint.x, y: basicText.bottomRightPoint.y };\r\n        return { position: position, text: basicText.text, fontSize: fontSize, selected: selected };\r\n    }\r\n}","﻿import { Point, Size, Rectangle, PositionInRectangle } from '../models/annotation';\r\nimport { Image } from \"../models/pssi\";\r\nimport { IImageViewer } from \"../interfaces/image-viewer-interface\";\r\n\r\nexport class AnnTool {\r\n\r\n    static minDelta = 0.0000000001;\r\n\r\n    static screenToImage(point: Point, transform: any): Point {\r\n        const x = point.x;\r\n        const y = point.y;\r\n        const imgPt = [0, 0, 1];\r\n\r\n        const a = x;\r\n        const b = y;\r\n        const n1 = transform[0][0];\r\n        const n2 = transform[0][1];\r\n        const n3 = transform[0][2];\r\n        const n4 = transform[1][0];\r\n        const n5 = transform[1][1];\r\n        const n6 = transform[1][2];\r\n\r\n        let t = a * n4 - n3 * n4 - b * n1 + n1 * n6;\r\n        const t2 = n2 * n4 - n1 * n5;\r\n\r\n        imgPt[1] = t / t2;\r\n\r\n        t = b * n2 - n2 * n6 - a * n5 + n3 * n5;\r\n        imgPt[0] = t / t2;\r\n\r\n        return {\r\n            x: imgPt[0],\r\n            y: imgPt[1]\r\n        };\r\n    }\r\n\r\n    static imageToScreen(point: Point, transform: any): Point {\r\n        const x = point.x;\r\n        const y = point.y;\r\n        const imgPt = [x, y, 1];\r\n        const screenPt = [0, 0, 1];\r\n\r\n        screenPt[0] = transform[0][0] * imgPt[0] + transform[0][1] * imgPt[1] + transform[0][2] * imgPt[2];\r\n        screenPt[1] = transform[1][0] * imgPt[0] + transform[1][1] * imgPt[1] + transform[1][2] * imgPt[2];\r\n\r\n        return {\r\n            x: screenPt[0],\r\n            y: screenPt[1]\r\n        };\r\n    }\r\n\r\n    static imageToImage(sourcePoint: Point, sourceTransform: any, destTransform: any): Point {\r\n        const screenPoint = AnnTool.imageToScreen(sourcePoint, sourceTransform);\r\n        return AnnTool.screenToImage(screenPoint, destTransform);\r\n    }\r\n\r\n    static imageListToImageList(pointList: Point[], sourceTransform: any, destTransform: any): Point[] {\r\n        const retList = [];\r\n\r\n        for (let i = 0; i < pointList.length; i++) {\r\n            retList.push(AnnTool.imageToImage(pointList[i], sourceTransform, destTransform));\r\n        }\r\n\r\n        return retList;\r\n    }\r\n\r\n    static annLabelLayerToAnnLayer(point: Point, imageViewer: IImageViewer): Point {\r\n        return AnnTool.imageToImage(point, imageViewer.getAnnLabelLayer().transform(), imageViewer.getImageLayer().transform());\r\n    }\r\n\r\n    static annLayerToAnnLabelLayer(point: Point, imageViewer: IImageViewer): Point {\r\n        return AnnTool.imageToImage(point, imageViewer.getImageLayer().transform(), imageViewer.getAnnLabelLayer().transform());\r\n    }\r\n\r\n    static isJcanvasObject(obj: any): boolean {\r\n        if (!obj) {\r\n            return false;\r\n        }\r\n\r\n        if (obj.optns) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    static countDistance(point1: Point, point2: Point): number {\r\n        let value = Math.pow((point1.x - point2.x), 2) + Math.pow((point1.y - point2.y), 2);\r\n        value = Math.sqrt(value);\r\n\r\n        return value;\r\n    }\r\n\r\n    static countPhysicalDistance(point1: Point, point2: Point, pixelSpacing: Size) {\r\n        const phyDistX = Math.abs(point1.x - point2.x) * pixelSpacing.cx;\r\n        const phyDistY = Math.abs(point1.y - point2.y) * pixelSpacing.cy;\r\n\r\n        let value = Math.pow(phyDistX, 2) + Math.pow(phyDistY, 2);\r\n        value = Math.sqrt(value);\r\n        return value;\r\n    }\r\n\r\n    static countTriangleArea(point1: Point, point2: Point, point3: Point): number {\r\n        return (point2.x * point3.y +\r\n                point1.x * point2.y +\r\n                point1.y * point3.x -\r\n                point1.y * point2.x -\r\n                point2.y * point3.x -\r\n                point1.x * point3.y) / 2.0;\r\n    }\r\n\r\n    static countTrianglePhysicalArea(point1: Point, point2: Point, point3: Point, pixelSpacing: Size): number {\r\n        return AnnTool.countTriangleArea(point1, point2, point3) * pixelSpacing.cx * pixelSpacing.cy;\r\n    }\r\n\r\n    static getSineTheta(pt1: Point, pt2: Point) {\r\n        const distance = AnnTool.countDistance(pt1, pt2);\r\n        if (Math.abs(distance) < AnnTool.minDelta) {\r\n            return 0.0;\r\n        } else {\r\n            const sineTheta = -(Math.abs(pt1.y - pt2.y)) / distance;\r\n            return (pt1.y > pt2.y) ? sineTheta : -sineTheta;\r\n        }\r\n    }\r\n\r\n    static getCosineTheta(pt1: Point, pt2: Point) {\r\n        const distance = AnnTool.countDistance(pt1, pt2);\r\n        if (Math.abs(distance) < AnnTool.minDelta) {\r\n            return 0.0;\r\n        } else {\r\n            const cosineTheta = (Math.abs(pt1.x - pt2.x)) / distance;\r\n            return (pt1.x < pt2.x) ? cosineTheta : -cosineTheta;\r\n        }\r\n    }\r\n\r\n    static multiplyPointM(x, y, m) {\r\n        return {\r\n            x: (x * m[0][0] + y * m[0][1] + m[0][2]),\r\n            y: (x * m[1][0] + y * m[1][1] + m[1][2])\r\n        }\r\n    }\r\n\r\n    static equalPoint(p1: Point, p2: Point): boolean {\r\n        return Math.abs(p1.x - p2.x) < 0.0001 && Math.abs(p1.y - p2.y) < 0.0001;\r\n    }\r\n\r\n    static pointListFromRect(rect: Rectangle): Point[] {\r\n        const retPointList = [];\r\n\r\n        retPointList.push({ x: rect.x, y: rect.y });\r\n        retPointList.push({ x: rect.x + rect.width, y: rect.y });\r\n        retPointList.push({ x: rect.x + rect.width, y: rect.y + rect.height });\r\n        retPointList.push({ x: rect.x, y: rect.y + rect.height });\r\n\r\n        return retPointList;\r\n    }\r\n\r\n    static pointListFromEllipse(centerPoint: Point, width: number, height: number): Point[] {\r\n        const retPointList = [];\r\n\r\n        retPointList.push({ x: centerPoint.x, y: centerPoint.y - height });\r\n        retPointList.push({ x: centerPoint.x + width, y: centerPoint.y });\r\n        retPointList.push({ x: centerPoint.x, y: centerPoint.y + height });\r\n        retPointList.push({ x: centerPoint.x - width, y: centerPoint.y });\r\n\r\n        return retPointList;\r\n    }\r\n\r\n    static pointListFrom(point: Point, posInRect: PositionInRectangle, width: number, height: number): Point[] {\r\n        const retPointList = [];\r\n\r\n        if (posInRect === PositionInRectangle.TopLeft) {\r\n            retPointList.push({ x: point.x, y: point.y });\r\n            retPointList.push({ x: point.x + width, y: point.y });\r\n            retPointList.push({ x: point.x + width, y: point.y + height });\r\n            retPointList.push({ x: point.x, y: point.y + height });\r\n        } else if (posInRect === PositionInRectangle.TopRight) {\r\n            retPointList.push({ x: point.x - width, y: point.y });\r\n            retPointList.push({ x: point.x, y: point.y });\r\n            retPointList.push({ x: point.x, y: point.y + height });\r\n            retPointList.push({ x: point.x - width, y: point.y + height });\r\n        } else if (posInRect === PositionInRectangle.BottomRight) {\r\n            retPointList.push({ x: point.x - width, y: point.y - height });\r\n            retPointList.push({ x: point.x, y: point.y - height });\r\n            retPointList.push({ x: point.x, y: point.y });\r\n            retPointList.push({ x: point.x - width, y: point.y });\r\n        } else if (posInRect === PositionInRectangle.BottomLeft) {\r\n            retPointList.push({ x: point.x, y: point.y - height });\r\n            retPointList.push({ x: point.x + width, y: point.y - height });\r\n            retPointList.push({ x: point.x + width, y: point.y });\r\n            retPointList.push({ x: point.x, y: point.y });\r\n        }\r\n\r\n\r\n        return retPointList;\r\n    }\r\n\r\n    static centerPoint(point1: Point, point2: Point): Point {\r\n        return { x: (point1.x + point2.x) / 2.0, y: (point1.y + point2.y) / 2.0 };\r\n    }\r\n\r\n\r\n    static calcLineAngle(point1: Point, point2: Point): number {\r\n\r\n        const dwSin = AnnTool.getSineTheta(point1, point2);\r\n        const dwCos = AnnTool.getCosineTheta(point1, point2);\r\n\r\n        let dwTheta: number;\r\n        if (dwSin >= 0 && dwCos >= 0) {\r\n            dwTheta = Math.asin(Math.abs(dwSin));\r\n        } else if (dwSin >= 0 && dwCos < 0) {\r\n            dwTheta = Math.asin(Math.abs(dwSin));\r\n            dwTheta = Math.PI - dwTheta;\r\n        } else if (dwSin < 0 && dwCos <= 0) {\r\n            dwTheta = Math.asin(Math.abs(dwSin));\r\n            dwTheta = Math.PI + dwTheta;\r\n        } else {\r\n            dwTheta = Math.asin(Math.abs(dwSin));\r\n            dwTheta = Math.PI * 2 - dwTheta;\r\n        }\r\n        if (180.0 / Math.PI * dwTheta > 360) {\r\n            return 180.0 / Math.PI * dwTheta - 360;\r\n        }\r\n\r\n        return 180.0 / Math.PI * dwTheta;\r\n    }\r\n\r\n    static pointInRect(point: Point, rect: Rectangle): boolean {\r\n        const startX = Math.min(rect.x, rect.x + rect.width);\r\n        const endX = Math.max(rect.x, rect.x + rect.width);\r\n        const startY = Math.min(rect.y, rect.y + rect.height);\r\n        const endY = Math.max(rect.y, rect.y + rect.height);\r\n\r\n        return startX <= point.x && point.x <= endX && startY <= point.y && point.y <= endY;\r\n    }\r\n\r\n    static pointInLine(point: Point, lineStartPoint: Point, lineEndPoint: Point): any {\r\n        const lenToStart = AnnTool.countDistance(point, lineStartPoint);\r\n        const lenToEnd = AnnTool.countDistance(point, lineEndPoint);\r\n        const length = AnnTool.countDistance(lineStartPoint, lineEndPoint);\r\n        const lenDelta = lenToStart + lenToEnd - length;\r\n\r\n        return { isInLine: lenDelta < 0.01, nearStart: lenToStart < lenToEnd };\r\n    }\r\n\r\n    static calcFootPoint(point1: Point, point2: Point, pointDrag: Point): Point {\r\n        const dSinB = AnnTool.getSineTheta(point1, point2);\r\n        const dCosB = AnnTool.getCosineTheta(point1, point2);\r\n\r\n        const dSinC = AnnTool.getSineTheta(point1, pointDrag);\r\n        const dCosC = AnnTool.getCosineTheta(point1, pointDrag);\r\n\r\n        const dCosBsubC = dCosB * dCosC + dSinB * dSinC; // Cos(B-C)\r\n\r\n        const dLineAC = AnnTool.countDistance(point1, pointDrag);\r\n        const dLineAM = dLineAC * dCosBsubC;\r\n\r\n        return { x: point1.x + dLineAM * dCosB, y: point1.y + dLineAM * dSinB };\r\n    }\r\n\r\n    static formatRect(rect: Rectangle): Rectangle {\r\n        // Format the rect to make sure that both width and height are positive\r\n        if (rect.width < 0) {\r\n            rect.x += rect.width;\r\n            rect.width = -rect.width;\r\n        }\r\n\r\n        if (rect.height < 0) {\r\n            rect.y += rect.height;\r\n            rect.height = -rect.height;\r\n        }\r\n\r\n        return rect;\r\n    }\r\n\r\n    static pointInLineByDistance(lineStartPoint: Point, lineEndPoint: Point, distanceToStart: number): Point {\r\n        const lineDistance = AnnTool.countDistance(lineStartPoint, lineEndPoint);\r\n        const lineRatio = distanceToStart / lineDistance;\r\n        const x = (lineEndPoint.x - lineStartPoint.x) * lineRatio + lineStartPoint.x;\r\n        const y = (lineEndPoint.y - lineStartPoint.y) * lineRatio + lineStartPoint.y;\r\n        return { x: x, y: y };\r\n    }\r\n\r\n    // Calculate the middle point of the curve (The curve is determined by start/end point and its radius, default direction is left or up)\r\n    static calcMiddlePointOfArc(startPoint: Point, endPoint: Point, radius: number): Point {\r\n        const pointDir = { x: 1, y: 1 };\r\n        const centerPoint = AnnTool.centerPoint(startPoint, endPoint);\r\n\r\n        const dSinAB = AnnTool.getSineTheta(startPoint, endPoint);\r\n        const dCosAB = AnnTool.getCosineTheta(startPoint, endPoint);\r\n\r\n        const dLineAD = AnnTool.countDistance(startPoint, centerPoint);\r\n\r\n        const ptO1 = new Point(0, 0);\r\n        const ptO2 = new Point(0, 0);\r\n\r\n        //get the two center ponints.\r\n        //check if the arc is almost 180, if true, lineAd is the radius\r\n        if (Math.abs(dLineAD - radius) < AnnTool.minDelta || radius < dLineAD) {\r\n            ptO1.x = ptO2.x = centerPoint.x;\r\n            ptO1.y = ptO2.y = centerPoint.y;\r\n        } else {\r\n            const dLineOD = Math.sqrt(Math.abs(radius * radius - dLineAD * dLineAD));\r\n\r\n            ptO1.x = centerPoint.x + dLineOD * dSinAB;\r\n            ptO1.y = centerPoint.y - dLineOD * dCosAB;\r\n\r\n            ptO2.x = centerPoint.x - dLineOD * dSinAB;\r\n            ptO2.y = centerPoint.y + dLineOD * dCosAB;\r\n        }\r\n\r\n        var dSinBA = AnnTool.getSineTheta(endPoint, startPoint),\r\n            dCosBA = AnnTool.getCosineTheta(endPoint, startPoint),\r\n            dSinBC = AnnTool.getSineTheta(endPoint, pointDir),\r\n            dCosBC = AnnTool.getCosineTheta(endPoint, pointDir);\r\n\r\n        //determine the center point\r\n        const middlePoint = new Point(0, 0);\r\n        var dSinBC_BA = dSinBC * dCosBA - dCosBC * dSinBA;\r\n        if (dSinBC_BA < 0.0) {\r\n            middlePoint.x = ptO1.x - radius * dSinAB;\r\n            middlePoint.y = ptO1.y + radius * dCosAB;\r\n        } else {\r\n            middlePoint.x = ptO2.x + radius * dSinAB;\r\n            middlePoint.y = ptO2.y - radius * dCosAB;\r\n        }\r\n\r\n        return middlePoint;\r\n    }\r\n\r\n    // Calculate the center point of the curve ( The curve is determined by three points )\r\n    static calcCenterBy3Points(startPoint: Point, endPoint: Point, middlePoint: Point): any {\r\n        let isInvalid = false;\r\n        let needRevert = false;\r\n\r\n        // D and E is center point of Line AB and Line BC\r\n        const ptD = AnnTool.centerPoint(startPoint, endPoint);\r\n        const ptE = AnnTool.centerPoint(endPoint, middlePoint);\r\n\r\n        // k of Line OD and Line OE\r\n        // O is center point of arc\r\n        //\r\n        const dkOD = -(endPoint.x - startPoint.x) / (endPoint.y - startPoint.y);\r\n        const dkOE = -(middlePoint.x - endPoint.x) / (middlePoint.y - endPoint.y);\r\n\r\n        const centerPoint = new Point(0, 0);\r\n        if (Math.abs(middlePoint.y - endPoint.y) < AnnTool.minDelta) {\r\n            centerPoint.x = ptE.x;\r\n            centerPoint.y = (ptE.x - ptD.x) * dkOD + ptD.y;\r\n        } else if (Math.abs(endPoint.y - startPoint.y) < AnnTool.minDelta) {\r\n            centerPoint.x = ptD.x;\r\n            centerPoint.y = (ptD.x - ptE.x) * dkOE + ptE.y;\r\n        } else if (Math.abs(middlePoint.x - endPoint.x) < AnnTool.minDelta) {\r\n            centerPoint.y = ptE.y;\r\n            centerPoint.x = (ptE.y - ptD.y) / dkOD + ptD.x;\r\n        } else if (Math.abs(endPoint.x - startPoint.x) < AnnTool.minDelta) {\r\n            centerPoint.y = ptD.y;\r\n            centerPoint.x = (ptD.y - ptE.y) / dkOE + ptE.x;\r\n        } else {\r\n            centerPoint.x = (ptE.y - ptD.y - (ptE.x * dkOE) + (ptD.x * dkOD)) / (dkOD - dkOE);\r\n            centerPoint.y = ptD.y + dkOD * (centerPoint.x - ptD.x);\r\n        }\r\n\r\n        // Analysis Start Point and End point\r\n        // Arc() always draw arc in a Clockwise\r\n        //\r\n        var dSinBA = AnnTool.getSineTheta(endPoint, startPoint),\r\n            dCosBA = AnnTool.getCosineTheta(endPoint, startPoint),\r\n            dSinBC = AnnTool.getSineTheta(endPoint, middlePoint),\r\n            dCosBC = AnnTool.getCosineTheta(endPoint, middlePoint);\r\n\r\n        var dSinBC_BA = dSinBC * dCosBA - dCosBC * dSinBA;\r\n\r\n        // Check Arc angle\r\n        //\r\n        var dSinOA = AnnTool.getSineTheta(centerPoint, startPoint),\r\n            dCosOA = AnnTool.getCosineTheta(centerPoint, startPoint),\r\n            dSinOB = AnnTool.getSineTheta(centerPoint, endPoint),\r\n            dCosOB = AnnTool.getCosineTheta(centerPoint, endPoint);\r\n\r\n        var dSinArc = dSinOA * dCosOB - dCosOA * dSinOB;\r\n\r\n        if (dSinBC_BA > 0.0) {\r\n            dSinArc = (-1.0) * dSinArc;\r\n        }\r\n\r\n        if (dSinArc < 0.0) {\r\n            isInvalid = true;\r\n        }\r\n\r\n        //need to revert start and end.\r\n        if (dSinBC_BA > 0.0) {\r\n            needRevert = true;\r\n        }\r\n\r\n        return { centerPoint: centerPoint, isInvalid: isInvalid, needRevert: needRevert };\r\n    }\r\n\r\n    // Calculate all necessary information of a curve\r\n    static calcArcBy3Points(startPoint: Point, endPoint: Point, middlePoint: Point, needCheckArc: boolean): any {\r\n        const arcData = AnnTool.calcCenterBy3Points(startPoint, endPoint, middlePoint);\r\n\r\n        if (needCheckArc && arcData.isInvalid)\r\n            return false; //user may drag the point out of range\r\n\r\n        const radius = AnnTool.countDistance(arcData.centerPoint, startPoint);\r\n\r\n        const dSinAB = AnnTool.getSineTheta(startPoint, endPoint);\r\n        const dCosAB = AnnTool.getCosineTheta(startPoint, endPoint);\r\n\r\n        if (arcData.needRevert) {\r\n            middlePoint.x = arcData.centerPoint.x + radius * dSinAB;\r\n            middlePoint.y = arcData.centerPoint.y - radius * dCosAB;\r\n        } else {\r\n            middlePoint.x = arcData.centerPoint.x - radius * dSinAB;\r\n            middlePoint.y = arcData.centerPoint.y + radius * dCosAB;\r\n        }\r\n\r\n        const arcStart = AnnTool.calcLineAngle(arcData.centerPoint, startPoint);\r\n        let arcEnd = AnnTool.calcLineAngle(arcData.centerPoint, endPoint);\r\n        if (arcEnd < arcStart) {\r\n            arcEnd = arcEnd + 360.0;\r\n        }\r\n\r\n        return {\r\n            centerPoint: arcData.centerPoint,\r\n            startPoint: startPoint,\r\n            endPoint: endPoint,\r\n            middlePoint: middlePoint,\r\n            radius: radius,\r\n            startAngle: arcStart,\r\n            endAngle: arcEnd,\r\n            anticlockwise: !arcData.needRevert\r\n        };\r\n    }\r\n}","﻿import { Point, MouseEventType } from '../../models/annotation';\r\nimport { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnBaseObject } from \"./ann-base-object\";\r\nimport { AnnObject } from '../ann-object';\r\n\r\nexport class AnnBaseCircle extends AnnBaseObject {\r\n\r\n    private fill: boolean;\r\n\r\n    constructor(parentObj: AnnObject, center: Point, radius: number, imageViewer: IImageViewer, fill: boolean = false) {\r\n\r\n        super(parentObj, imageViewer);\r\n\r\n        this.fill = fill;\r\n        this.jcObj = jCanvaScript.circle(center.x, center.y, radius, this.selectedColor, fill).layer(this.layerId);\r\n        super.setJcObj();\r\n        this.jcObj.mouseStyle = \"crosshair\";\r\n        \r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Override functions of base class\r\n\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Public functions\r\n\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Private functions\r\n}","﻿import { Point, MouseEventType } from '../../models/annotation';\r\nimport { AnnTool } from \"../ann-tool\";\r\nimport { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnBaseObject } from \"./ann-base-object\";\r\nimport { AnnObject } from '../ann-object';\r\n\r\nexport class AnnBaseCurve extends AnnBaseObject {\r\n\r\n    constructor(parentObj: AnnObject, center: Point, radius: number, startAngle: number, endAngle: number, anticlockwise: boolean, imageViewer: IImageViewer) {\r\n\r\n        super(parentObj, imageViewer);\r\n\r\n        this.jcObj = jCanvaScript.arc(center.x, center.y, radius, startAngle, endAngle, anticlockwise, this.selectedColor).layer(this.layerId);\r\n        super.setJcObj();\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Override functions of base class\r\n\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Public functions\r\n    setAngle(startAngle: number, endAngle: number) {\r\n        this.jcObj._startAngle = startAngle;\r\n        this.jcObj._endAngle = endAngle;\r\n    }\r\n\r\n    setAnticlockwise(anticlockwise: boolean) {\r\n        this.jcObj._anticlockwise = anticlockwise;\r\n    }\r\n\r\n    getAngle(): number {\r\n        let arcAngle = this.jcObj._endAngle - this.jcObj._startAngle;\r\n        if (arcAngle > 180) {\r\n            arcAngle = 360 - arcAngle;\r\n        }\r\n\r\n        return arcAngle;\r\n    }\r\n\r\n    getText(angleOnly: boolean = false): string {\r\n        const arcAngle = this.getAngle();\r\n        const angleText = arcAngle.toFixed(2) + \"\\xb0\";\r\n        if (angleOnly) {\r\n            return angleText;\r\n        }\r\n\r\n        // Display radius, not the length of the arc\r\n        //const arcLength = Math.PI * this.jcObj._radius * arcAngle / 180;\r\n\r\n        let text : string;\r\n        if (this.pixelSpacing) {\r\n            text = (this.jcObj._radius * this.pixelSpacing.cx).toFixed(2) + \"mm\";\r\n        } else {\r\n            text = this.jcObj._radius.toFixed(2) + \"pt\";\r\n        }\r\n\r\n        text += \" \" + angleText;\r\n\r\n        return text;\r\n    }\r\n    \r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Private functions\r\n}\r\n","﻿import { Point, MouseEventType } from '../../models/annotation';\r\nimport { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnBaseObject } from \"./ann-base-object\";\r\nimport { AnnObject } from '../ann-object';\r\n\r\nexport class AnnBaseEllipse extends AnnBaseObject {\r\n\r\n    constructor(parentObj: AnnObject, center: Point, width: number, height: number, imageViewer: IImageViewer) {\r\n\r\n        super(parentObj, imageViewer);\r\n\r\n        this.jcObj = jCanvaScript.ellipse(center.x, center.y, Math.abs(width), Math.abs(height), this.selectedColor).layer(this.layerId);\r\n        super.setJcObj();\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Override functions of base class\r\n\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Public functions\r\n    setWidth(width: number) {\r\n        this.jcObj._width = Math.abs(width);\r\n        this.checkCircle();\r\n    }\r\n\r\n    setHeight(height: number) {\r\n        this.jcObj._height = Math.abs(height);\r\n        this.checkCircle();\r\n    }\r\n\r\n    checkCircle() {\r\n        const isCircle = Math.round(this.getWidth()) === Math.round(this.getHeight());\r\n        this.jcObj.color( isCircle? \"#F00\" : this.selectedColor);\r\n    }\r\n\r\n    getAreaString(): string {\r\n\r\n        const width = this.getWidth();\r\n        const height = this.getHeight();\r\n        const area = Math.abs(width * height) * Math.PI;\r\n\r\n        let areaString = \"Size = \";\r\n        if (this.pixelSpacing) {\r\n            areaString += (area * this.pixelSpacing.cx * this.pixelSpacing.cy).toFixed(2) + \"mm\";\r\n        } else {\r\n            areaString += area.toFixed(2) + \"pt\";\r\n        }\r\n\r\n        areaString += \"\\xb2\";\r\n        return areaString;\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Private functions\r\n}","﻿import { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnBaseObject } from \"./ann-base-object\";\r\nimport { AnnObject } from '../ann-object';\r\nimport { GraphicOverlayData } from \"../../models/overlay\";\r\n\r\nexport class AnnBaseGraphicOverlay extends AnnBaseObject {\r\n\r\n    private graphicOverlayCanvas: any;\r\n    private ctx: any;\r\n    private graphicOverlayData: GraphicOverlayData;\r\n    private hFlipped = false;\r\n    private vFlipped = false;\r\n\r\n    constructor(parentObj: AnnObject, graphicOverlayData: GraphicOverlayData, imageViewer: IImageViewer, layerId: string) {\r\n        super(parentObj, imageViewer);\r\n        this.graphicOverlayData = graphicOverlayData;\r\n\r\n        this.graphicOverlayCanvas = document.createElement(\"canvas\");\r\n        this.graphicOverlayCanvas.width = this.image.width();\r\n        this.graphicOverlayCanvas.height = this.image.height();\r\n        this.ctx = this.graphicOverlayCanvas.getContext(\"2d\");\r\n\r\n        this.draw();\r\n        this.jcObj = jCanvaScript.image(this.graphicOverlayCanvas).layer(layerId);\r\n        super.setJcObj();\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////s\r\n    // Override functions of base class\r\n    onFlip(vertical: boolean) {\r\n        if (vertical) {\r\n            this.vFlipped = !this.vFlipped;\r\n        } else {\r\n            this.hFlipped = !this.hFlipped;\r\n        }\r\n\r\n        this.draw();\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Public functions\r\n    onReset() {\r\n        this.vFlipped = false;\r\n        this.hFlipped = false;\r\n        this.draw();\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Private functions\r\n    private draw() {\r\n        const imageWidth = this.image.width();\r\n        const imageHeight = this.image.height();\r\n\r\n        this.ctx.clearRect(0, 0, imageWidth, imageHeight);\r\n        this.ctx.beginPath();\r\n        this.graphicOverlayData.dataList.forEach(data => {\r\n            this.ctx.rect(this.hFlipped ? imageWidth - data.x : data.x, this.vFlipped ? imageHeight - data.y : data.y, 1, 1);\r\n        });\r\n        this.ctx.strokeStyle = this.selectedColor;\r\n        this.ctx.stroke();\r\n    }\r\n}","﻿import { Point, MouseEventType } from '../../models/annotation';\r\nimport { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnBaseObject } from \"./ann-base-object\";\r\nimport { AnnObject } from '../ann-object';\r\n\r\nexport class AnnBaseImage extends AnnBaseObject {\r\n\r\n    private fill: boolean;\r\n\r\n    constructor(parentObj: AnnObject, imageData: any, startPoint: Point, imageViewer: IImageViewer) {\r\n\r\n        super(parentObj, imageViewer);\r\n\r\n        const scale = this.image.getScaleValue();\r\n        const width = imageData.width / scale;\r\n        const height = imageData.height / scale;\r\n\r\n        this.jcObj = jCanvaScript.image(imageData, startPoint.x, startPoint.y, width, height).layer(this.layerId);\r\n        super.setJcObj();\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Override functions of base class\r\n    onSelect(selected: boolean, focused: boolean) {\r\n        this.selected = selected;\r\n    }\r\n\r\n    onFlip(vertical: boolean) {\r\n\r\n        if (vertical) {\r\n            this.jcObj._y = this.image.height() - this.jcObj._y - this.jcObj._height;\r\n        } else {\r\n            this.jcObj._x = this.image.width() - this.jcObj._x - this.jcObj._width;\r\n        }\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Public functions\r\n    setImage(imageData: any) {\r\n        this.jcObj._img = imageData;\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Private functions\r\n}","﻿import { Point, MouseEventType } from '../../models/annotation';\r\nimport { AnnTool } from \"../ann-tool\";\r\nimport { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnBaseObject } from \"./ann-base-object\";\r\nimport { AnnObject } from '../ann-object';\r\nimport { AnnSerialize } from \"../ann-serialize\";\r\n\r\nexport class AnnBaseLine extends AnnBaseObject {\r\n\r\n    constructor(parentObj: AnnObject, startPoint: Point, endPoint: Point, imageViewer: IImageViewer, annSerialize: AnnSerialize = undefined) {\r\n\r\n        super(parentObj, imageViewer);\r\n\r\n        if (annSerialize) {\r\n            const config = annSerialize.loadBaseLine();\r\n            startPoint = config.startPoint;\r\n            endPoint = config.endPoint;\r\n        } \r\n\r\n        this.jcObj = jCanvaScript.line([[startPoint.x, startPoint.y], [endPoint.x, endPoint.y]], this.selectedColor).layer(this.layerId);\r\n        super.setJcObj();\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Override functions of base class\r\n    onSave(annSerialize: AnnSerialize) {\r\n        annSerialize.writeString(\"CGXAnnLine\");\r\n        annSerialize.writeInteger(1, 4);\r\n        annSerialize.writeInteger(0, 4);\r\n        annSerialize.writeInteger(this.selected ? 1 : 0, 1);\r\n\r\n        annSerialize.writeIntegerPoint(this.getStartPosition());\r\n        annSerialize.writeIntegerPoint(this.getEndPosition());\r\n    }\r\n\r\n    onFlip(vertical: boolean) {\r\n\r\n        if (vertical) {\r\n            this.jcObj._y0 = this.image.height() - this.jcObj._y0;\r\n            this.jcObj._y1 = this.image.height() - this.jcObj._y1;\r\n        } else {\r\n            this.jcObj._x0 = this.image.width() - this.jcObj._x0;\r\n            this.jcObj._x1 = this.image.width() - this.jcObj._x1;\r\n        }\r\n\r\n    }\r\n\r\n    onTranslate(deltaX: number, deltaY: number) {\r\n        this.jcObj._x0 += deltaX;\r\n        this.jcObj._y0 += deltaY;\r\n\r\n        this.jcObj._x1 += deltaX;\r\n        this.jcObj._y1 += deltaY;\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Public functions\r\n    onMoveStartPoint(point: Point) {\r\n        this.jcObj._x0 = point.x;\r\n        this.jcObj._y0 = point.y;\r\n    }\r\n\r\n    onMoveEndPoint(point: Point) {\r\n        this.jcObj._x1 = point.x;\r\n        this.jcObj._y1 = point.y;\r\n    }\r\n\r\n    getStartPosition(): Point {\r\n        return { x: this.jcObj._x0, y: this.jcObj._y0 }\r\n    }\r\n\r\n    getEndPosition(): Point {\r\n        return { x: this.jcObj._x1, y: this.jcObj._y1 }\r\n    }\r\n\r\n    getLengthInPixel(): number {\r\n        return AnnTool.countDistance(this.getStartPosition(), this.getEndPosition());\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Private functions\r\n}\r\n","﻿import { Point, MouseEventType, Rectangle, AnnotationDefinitionData } from '../../models/annotation';\r\nimport { AnnObject } from '../ann-object';\r\nimport { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnSerialize } from \"../ann-serialize\";\r\n\r\nexport abstract class AnnBaseObject extends AnnObject {\r\n\r\n    jcObj: any;\r\n\r\n    constructor(parentObj: AnnObject, imageViewer: IImageViewer) {\r\n\r\n        super(parentObj, imageViewer);\r\n        if (parentObj) {\r\n            parentObj.onChildCreated(this);\r\n        }\r\n    }\r\n\r\n    setJcObj() {\r\n        if (this.jcObj) {\r\n            this.jcObj._lineWidth = this.lineWidth;\r\n            this.jcObj.mouseStyle = \"move\";\r\n            this.jcObj.parentObj = this;\r\n        }\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Override functions of base class\r\n\r\n    onDrag(deltaX: number, deltaY: number) {\r\n        this.onTranslate(deltaX, deltaY);\r\n    }\r\n\r\n    onSelect(selected: boolean, focused: boolean) {\r\n\r\n        this.selected = selected;\r\n        const color = selected ? this.selectedColor : this.defaultColor;\r\n\r\n        if (focused && !this.focusedObj) {\r\n            this.focusedObj = this.jcObj;\r\n        }\r\n\r\n        this.jcObj.color(color);\r\n    }\r\n\r\n    onDrawEnded() {\r\n        if (this.mouseResponsible) {\r\n            this.setChildDraggable(this, this.jcObj, true);\r\n            this.setChildMouseEvent(this, this.jcObj);\r\n        }\r\n    }\r\n\r\n\r\n    onMouseEvent(mouseEventType: MouseEventType, point: Point, mouseObj: any) {\r\n        if (mouseEventType === MouseEventType.MouseDown) {\r\n            this.onChildSelected(mouseObj);\r\n        }\r\n    }\r\n\r\n    onScale() {\r\n        this.jcObj._lineWidth = this.parentObj.getLineWidth();\r\n    }\r\n\r\n    onFlip(vertical: boolean) {\r\n        if (vertical) {\r\n            this.jcObj._y = this.image.height() - this.jcObj._y;\r\n        } else {\r\n            this.jcObj._x = this.image.width() - this.jcObj._x;\r\n        }\r\n    }\r\n\r\n    onTranslate(deltaX: number, deltaY: number) {\r\n        this.jcObj._x += deltaX;\r\n        this.jcObj._y += deltaY;\r\n    }\r\n\r\n    onMove(point: Point) {\r\n        this.jcObj._x = point.x;\r\n        this.jcObj._y = point.y;\r\n    }\r\n\r\n    onRotate(angle: number) {\r\n        // For annotation drawn on the ann layer, nothing need to do for rotating,\r\n        // because the ann layer and the image layer are binded.\r\n    }\r\n\r\n    onDeleteChildren() {\r\n        this.deleteObject(this.jcObj);\r\n    }\r\n\r\n    getPosition(): Point {\r\n        return { x: this.jcObj._x, y: this.jcObj._y }\r\n    }\r\n\r\n    getRadius(): number {\r\n        return this.jcObj._radius;\r\n    }\r\n\r\n    setRadius(radius: number) {\r\n        this.jcObj._radius = radius;\r\n    }\r\n\r\n    getWidth(): number {\r\n        return this.jcObj._width;\r\n    }\r\n\r\n    setWidth(width: number) {\r\n        this.jcObj._width = width;\r\n    }\r\n\r\n    getHeight(): number {\r\n        return this.jcObj._height;\r\n    }\r\n\r\n    setHeight(height: number) {\r\n        this.jcObj._height = height;\r\n    }\r\n\r\n    setColor(color: string) {\r\n        this.jcObj.color(color);\r\n    }\r\n\r\n    setVisible(visible: boolean) {\r\n        this.jcObj.visible(visible);\r\n    }\r\n\r\n    setTransparent(transparent: boolean) {\r\n        this.defaultColor = transparent ? \"rgba(0,0,0,0)\" : \"#FFF\";\r\n    }\r\n\r\n    onLevelUp(level: any = 1) {\r\n        if (this.jcObj) {\r\n            this.jcObj.up(level);\r\n        }\r\n    }\r\n\r\n    onLevelDown(level: any = 1) {\r\n        if (this.jcObj) {\r\n            this.jcObj.down(level);\r\n        }\r\n    }\r\n\r\n    getSurroundPointList(): Point[] {\r\n        return [];\r\n    }\r\n\r\n    getRect(): Rectangle {\r\n        return this.jcObj.getRect(\"poor\");\r\n    }\r\n\r\n    onChildCreated(annChildObj: AnnObject) {\r\n        alert(\"Internal error : AnnBaseObject.onChildCreated() should never be called.\");\r\n    }\r\n\r\n    onDeleteChild(annChildObj: AnnObject) {\r\n        alert(\"Internal error : AnnBaseObject.onDeleteChild() should never be called.\");\r\n    }\r\n\r\n    onLoad(annSerialize: AnnSerialize): any {\r\n        alert(\"Internal error : AnnBaseObject.onLoad() should never be called.\");\r\n        return undefined;\r\n    }\r\n\r\n    onSave(annSerialize: AnnSerialize) {\r\n        alert(\"Internal error : AnnBaseObject.onSave() should never be called.\");\r\n    }\r\n\r\n    onDragStarted(pos: Point) {\r\n\r\n    }\r\n\r\n    onDragEnded(pos: Point) {\r\n\r\n    }\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Public functions\r\n    saveBasicInfo(annSerialize: AnnSerialize, annotationDefinitionData: AnnotationDefinitionData) {\r\n        annSerialize.writeString(annotationDefinitionData.imageSuiteAnnName);\r\n        annSerialize.writeInteger(annotationDefinitionData.imageSuiteAnnType, 4);     // AnnType\r\n        annSerialize.writeInteger(1, 4);     // created\r\n        annSerialize.writeInteger(this.selected ? 1 : 0, 1);     // selected\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Protected functions\r\n}","﻿import { Point, AnnotationDefinitionData } from '../../models/annotation';\r\nimport { AnnTool } from \"../ann-tool\";\r\nimport { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnBaseObject } from \"./ann-base-object\";\r\nimport { AnnObject } from '../ann-object';\r\nimport { AnnSerialize } from \"../ann-serialize\";\r\n\r\nexport class AnnBasePolygon extends AnnBaseObject {\r\n\r\n    private freeArea: boolean;\r\n    constructor(parentObj: AnnObject, pointList: any, imageViewer: IImageViewer, freeArea: boolean = false) {\r\n        super(parentObj, imageViewer);\r\n        this.freeArea = freeArea;\r\n        this.jcObj = jCanvaScript.lines(pointList, this.selectedColor).layer(this.layerId);\r\n        super.setJcObj();\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Override functions of base class\r\n    onSave(annSerialize: AnnSerialize) {\r\n        const points = this.jcObj.points();\r\n        const length = points.length;\r\n        annSerialize.writeInteger(length, 4);\r\n        annSerialize.writeInteger(length, 4);\r\n\r\n        for (let i = 0; i < length; i ++) {\r\n            annSerialize.writeInteger(points[i][0], 4);\r\n            annSerialize.writeInteger(points[i][1], 4);\r\n        }\r\n\r\n        for (let i = 0; i < length; i++) {\r\n            annSerialize.writeString(\"CGXAnnLine\"); // CGXAnnLine\r\n            annSerialize.writeInteger(1, 4);\r\n            annSerialize.writeInteger(0, 4);\r\n            annSerialize.writeInteger(0, 1);\r\n\r\n            if (i !== length - 1) {\r\n                annSerialize.writeInteger(points[i][0], 4);\r\n                annSerialize.writeInteger(points[i][1], 4);\r\n                annSerialize.writeInteger(points[i + 1][0], 4);\r\n                annSerialize.writeInteger(points[i + 1][1], 4);\r\n            } else {\r\n                annSerialize.writeInteger(points[0][0], 4);\r\n                annSerialize.writeInteger(points[0][1], 4);\r\n                annSerialize.writeInteger(points[length - 1][0], 4);\r\n                annSerialize.writeInteger(points[length - 1][1], 4);\r\n            }\r\n        }\r\n    }\r\n\r\n    onFlip(vertical: boolean) {\r\n        const points = this.jcObj.points();\r\n        if (vertical) {\r\n            const height = this.image.height();\r\n            points.forEach(point => {\r\n                point[1] = height - point[1];\r\n            });\r\n        } else {\r\n            const width = this.image.width();\r\n            points.forEach(point => {\r\n                point[0] = width - point[0];\r\n            });\r\n        }\r\n\r\n        this.jcObj.points(points);\r\n    }\r\n\r\n    onTranslate(deltaX: number, deltaY: number) {\r\n        const points = this.jcObj.points();\r\n        points.forEach(point => {\r\n            point[0] += deltaX;\r\n            point[1] += deltaY;\r\n        });\r\n\r\n        this.jcObj.points(points);\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Public functions\r\n    setClosed(closed: boolean) {\r\n        this.jcObj._closed = closed;\r\n    }\r\n\r\n    addPoint(point: Point) {\r\n        this.jcObj.addPoint(point.x, point.y);\r\n    }\r\n\r\n    deletePoint(point: Point) {\r\n        this.jcObj.delPoint(point.x, point.y, 1);\r\n    }\r\n\r\n    updateLastPoint(point: Point) {\r\n        this.updatePoint(this.jcObj.points().length - 1, point);\r\n    }\r\n\r\n    updatePoint(index: number, point: Point) {\r\n        const points = this.jcObj.points();\r\n        if (index >= points.length || index < 0) {\r\n            alert(\"Internal error, invalid index in AnnBasePolygon.updatePoint()\");\r\n            return;\r\n        }\r\n\r\n        points[index][0] = point.x;\r\n        points[index][1] = point.y;\r\n\r\n        this.jcObj.points(points);\r\n    }\r\n\r\n    getAreaString(): string {\r\n        let areaString = \"Size = \";\r\n\r\n        const originalPoint = new Point(0, 0);\r\n\r\n        const points = this.jcObj.points();\r\n        const length = points.length;\r\n        let area = AnnTool.countTriangleArea(originalPoint,\r\n            new Point(points[length - 1][0], points[length - 1][1]),\r\n            new Point(points[0][0], points[0][1]));\r\n\r\n        for (let i = 1; i < length; i ++) {\r\n            area += AnnTool.countTriangleArea(originalPoint,\r\n                new Point(points[i - 1][0], points[i - 1][1]),\r\n                new Point(points[i][0], points[i][1]));\r\n        }\r\n\r\n        area = Math.abs(area);\r\n        if (this.pixelSpacing) {\r\n            areaString += (area * this.pixelSpacing.cx * this.pixelSpacing.cy).toFixed(2) + \"mm\";\r\n        } else {\r\n            areaString += area.toFixed(2) + \"pt\";\r\n        }\r\n\r\n        areaString += \"\\xb2\";\r\n        return areaString;\r\n    }\r\n\r\n    setPointList(pointList: any) {\r\n        this.jcObj.points(pointList);\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Private functions\r\n}\r\n","﻿import { Point, Rectangle } from \"../../models/annotation\";\r\nimport { AnnObject } from \"../ann-object\";\r\nimport { AnnTool } from \"../ann-tool\";\r\nimport { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnBaseObject } from \"./ann-base-object\";\r\nimport { AnnSerialize } from \"../ann-serialize\";\r\n\r\nexport class AnnBaseRectangle extends AnnBaseObject {\r\n\r\n    \r\n    forText: boolean;\r\n\r\n    constructor(parentObj: AnnObject, topLeft: Point, width: number, height: number, imageViewer: IImageViewer, forText: boolean = false) {\r\n\r\n        // AnnBaseRectangle can be used either for AnnRectangle which is in annotation layer, or for AnnText which is in label layer\r\n        super(parentObj, imageViewer);\r\n\r\n        // Set layer based on its usage\r\n        this.forText = forText;\r\n        this.jcObj = jCanvaScript.rect(topLeft.x, topLeft.y, width, height, this.selectedColor).layer(forText? this.labelLayerId : this.layerId);\r\n        super.setJcObj();\r\n\r\n        this.setTransparent(forText);\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Override functions of base class\r\n    onSave(annSerialize: AnnSerialize) {\r\n        annSerialize.writeString(\"CGXAnnRectangle\");\r\n        annSerialize.writeInteger(1, 4);\r\n        annSerialize.writeInteger(0, 4);\r\n        annSerialize.writeInteger(0, 1);\r\n\r\n        const topLeftPoint = this.getPosition()\r\n        const rect = new Rectangle(topLeftPoint.x, topLeftPoint.y, this.getWidth(), this.getHeight());\r\n        const pointList = AnnTool.pointListFromRect(rect);\r\n\r\n        annSerialize.writeIntegerPoint(pointList[0]); // top left\r\n        annSerialize.writeIntegerPoint(pointList[2]); // bottom right\r\n        annSerialize.writeIntegerPoint(pointList[1]); // top right\r\n        annSerialize.writeIntegerPoint(pointList[3]); // bottom left\r\n    }\r\n\r\n    onFlip(vertical: boolean) {\r\n\r\n        if (vertical) {\r\n            this.jcObj._y = this.image.height() - this.jcObj._y;\r\n            this.jcObj._height = -this.jcObj._height;\r\n        } else {\r\n            this.jcObj._x = this.image.width() - this.jcObj._x;\r\n            this.jcObj._width = -this.jcObj._width;\r\n        }\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Public functions\r\n    getSurroundPointList(): Point[] {\r\n        const rect = new Rectangle(this.jcObj._x, this.jcObj._y, this.jcObj._width, this.jcObj._height);\r\n        const pointList = AnnTool.pointListFromRect(rect);\r\n        return this.forText\r\n            ? AnnTool.imageListToImageList(pointList,\r\n                this.imageViewer.getAnnLabelLayer().transform(),\r\n                this.imageViewer.getImageLayer().transform())\r\n            : pointList;\r\n    }\r\n\r\n    redraw(rect: Rectangle) {\r\n        this.onMove({ x: rect.x, y: rect.y });\r\n        this.setWidth(rect.width);\r\n        this.setHeight(rect.height);\r\n    }\r\n\r\n    getAreaString(): string {\r\n\r\n        const width = this.getWidth();\r\n        const height = this.getHeight();\r\n        const area = Math.abs(width * height);\r\n\r\n        let areaString = \"Size = \";\r\n        if (this.pixelSpacing) {\r\n            areaString += (area * this.pixelSpacing.cx * this.pixelSpacing.cy).toFixed(2) + \"mm\";\r\n        } else {\r\n            areaString += area.toFixed(2) + \"pt\";\r\n        }\r\n\r\n        areaString += \"\\xb2\";\r\n        return areaString;\r\n    }\r\n\r\n    getTransformMatrix(): any {\r\n        return this.forText ? this.imageViewer.getAnnLabelLayer().transform() : this.image.transformMatrix;;\r\n    }\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Private functions\r\n}","﻿import { Point, Rectangle, MouseEventType } from '../../models/annotation';\r\nimport { FontData} from \"../../models/misc-data\"\r\nimport { AnnTool } from \"../ann-tool\";\r\nimport { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnBaseObject } from \"./ann-base-object\";\r\nimport { AnnObject } from '../ann-object';\r\nimport { AnnSerialize } from \"../ann-serialize\";\r\n\r\nexport class AnnBaseText extends AnnBaseObject {\r\n\r\n    private fontSizeFixed = false;\r\n    private createdFontSize: number;\r\n\r\n    constructor(parentObj: AnnObject, text: string, startPoint: Point, imageViewer: IImageViewer) {\r\n\r\n        super(parentObj, imageViewer);\r\n        \r\n        // The coordinate of input point is for annotation layer, since text will always be drawn in label layer, need to convert the coordinate\r\n        startPoint = AnnTool.annLayerToAnnLabelLayer(startPoint, imageViewer);\r\n\r\n        this.createdFontSize = this.parentObj.getFontSize();\r\n        const font = new FontData(\"Times New Roman\", \"#FFF\", this.createdFontSize);\r\n        this.jcObj = jCanvaScript.text(text, startPoint.x, startPoint.y).color(this.selectedColor).font(font.getCanvasFontString()).layer(this.labelLayerId).align(\"left\");\r\n        //this.jcObj._shadowX = 1;\r\n        //this.jcObj._shadowY = 1;\r\n        //this.jcObj._shadowColor = \"#000\";\r\n        super.setJcObj();\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Override functions of base class\r\n    onSave(annSerialize: AnnSerialize) {\r\n        annSerialize.writeString(\"CGXAnnLabel\");\r\n        annSerialize.writeInteger(1, 4);\r\n        annSerialize.writeInteger(0, 4);\r\n        annSerialize.writeInteger(0, 1);\r\n\r\n        const topLeftPoint = this.getPosition();\r\n        const rect = new Rectangle(topLeftPoint.x, topLeftPoint.y, this.getWidth(), this.getHeight());\r\n        const pointList = AnnTool.pointListFromRect(rect);\r\n\r\n        annSerialize.writeIntegerPoint(pointList[0]); // top left\r\n        annSerialize.writeIntegerPoint(pointList[2]); // bottom right\r\n        annSerialize.writeIntegerPoint(pointList[1]); // top right\r\n        annSerialize.writeIntegerPoint(pointList[3]); // bottom left\r\n    }\r\n\r\n    onScale() {\r\n        // When scale value changed, the font size need to be changed as well to make sure it look unchanged in the screen\r\n        const fontSize = this.fontSizeFixed ? this.createdFontSize : this.parentObj.getFontSize();\r\n        this.setFontSize(fontSize);\r\n\r\n        //const font = this.fontSizeFixed ? new FontData(\"Times New Roman\", \"#FFF\", this.createdFontSize) :\r\n        //    new FontData(\"Times New Roman\", \"#FFF\", this.parentObj.getFontSize());\r\n        //this.jcObj.font(font.getCanvasFontString());\r\n    }\r\n\r\n    onMove(point: Point) {\r\n        // The coordinate of input point is for annotation layer, since text will always be drawn in label layer, need to convert the coordinate\r\n        point = AnnTool.annLayerToAnnLabelLayer(point, this.imageViewer);\r\n        super.onMove(point);\r\n    }\r\n\r\n    getRect(): Rectangle {\r\n        // Not sure why JCanvas returns the wrong rect, adjust it\r\n        const rect = this.jcObj.getRect(\"poor\");\r\n\r\n        const newHeight = this.fontSizeFixed? this.createdFontSize : this.parentObj.getFontSize();\r\n        //rect.y -= newHeight - rect.height - 2;\r\n        rect.y = this.getPosition().y - newHeight * 0.85;\r\n        rect.height = newHeight + 4;\r\n        rect.x -= 2;\r\n        rect.width += 4;\r\n\r\n        // the coordinate is for annotation label layer\r\n        return rect;\r\n    } \r\n\r\n    getTransformMatrix(): any {\r\n        // Text is always in label layer\r\n        return this.imageViewer.getAnnLabelLayer().transform();\r\n    }\r\n\r\n    onDragStarted(pos: Point) {\r\n\r\n    }\r\n\r\n    onDragEnded(pos: Point) {\r\n\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Public functions\r\n    getText(): string {\r\n        return this.jcObj._string;\r\n    }\r\n\r\n    setText(text: string) {\r\n        this.jcObj.string(text);\r\n    }\r\n\r\n    setFontSizeFixed(fontSizeFixed: boolean) {\r\n        this.fontSizeFixed = fontSizeFixed;\r\n    }\r\n\r\n    setFontSize(fontSize: number) {\r\n        this.createdFontSize = fontSize\r\n        const font = new FontData(\"Times New Roman\", \"#FFF\", fontSize);\r\n        this.jcObj.font(font.getCanvasFontString());\r\n    }\r\n\r\n    getCreateFontSize(): number {\r\n        return this.createdFontSize;\r\n    }\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Private functions\r\n}","﻿import { Point, MouseEventType } from '../../models/annotation';\r\nimport { AnnTool } from \"../ann-tool\";\r\nimport { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnExtendObject } from \"./ann-extend-object\";\r\nimport { AnnPoint } from \"./ann-point\";\r\nimport { AnnBaseCurve } from \"../base-object/ann-base-curve\";\r\nimport { AnnTextIndicator } from \"./ann-text-indicator\"\r\nimport { AnnBaseLine } from \"../base-object/ann-base-line\";\r\nimport { AnnSerialize } from \"../ann-serialize\";\r\n\r\nexport class AnnAngle extends AnnExtendObject {\r\n\r\n    private annBaseLine1: AnnBaseLine;\r\n    private annBaseLine2: AnnBaseLine;\r\n    private annStartPoint: AnnPoint;\r\n    private annEndPoint1: AnnPoint;\r\n    private annEndPoint2: AnnPoint;\r\n    private annBaseCurve: AnnBaseCurve;\r\n    private annTextIndicator: AnnTextIndicator;\r\n\r\n    private line1Drawn = false;\r\n\r\n    constructor(parent: AnnExtendObject, imageViewer: IImageViewer) {\r\n        super(parent, imageViewer);\r\n    }\r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Override functions of base class\r\n\r\n    onMouseEvent(mouseEventType: MouseEventType, point: Point, mouseObj: any) {\r\n\r\n        const imagePoint = AnnTool.screenToImage(point, this.image.transformMatrix);\r\n        if (mouseEventType === MouseEventType.MouseDown) {\r\n\r\n            if (this.created) {\r\n                this.onSelect(true, false);\r\n                return;\r\n            }\r\n\r\n            if (!this.annStartPoint) {\r\n                this.annStartPoint = this.createPoint(imagePoint);\r\n            } else if (!this.line1Drawn) {\r\n                this.line1Drawn = true;\r\n            }else {\r\n                this.focusedObj = this.annStartPoint;\r\n                this.redrawAngle();\r\n\r\n                if (!this.parentObj) {\r\n                    this.onDrawEnded();\r\n                }\r\n            }\r\n\r\n        } else if (mouseEventType === MouseEventType.MouseMove) {\r\n            if (!this.annStartPoint) {\r\n                return;\r\n            }\r\n\r\n            if (this.annBaseLine1) {\r\n                if (this.line1Drawn) {\r\n                    if (this.annBaseLine2) {\r\n                        this.annBaseLine2.onMoveEndPoint(imagePoint);\r\n                        this.annEndPoint2.onMove(imagePoint);\r\n                    } else {\r\n                        this.annEndPoint2 = this.createPoint(imagePoint);\r\n                        this.annBaseLine2 = new AnnBaseLine(this, this.annStartPoint.getPosition(), imagePoint, this.imageViewer);\r\n                    }\r\n                } else {\r\n                    this.annBaseLine1.onMoveEndPoint(imagePoint);\r\n                    this.annEndPoint1.onMove(imagePoint);\r\n                }\r\n            } else {\r\n                this.annEndPoint1 = this.createPoint(imagePoint);\r\n                this.annBaseLine1 = new AnnBaseLine(this, this.annStartPoint.getPosition(), imagePoint, this.imageViewer);\r\n            }\r\n        }\r\n    }\r\n\r\n    onCreate(lineList: any, arrowStartPoint: Point = undefined, arrowEndPoint: Point = undefined) {\r\n        if (lineList.length !==  2) {\r\n            alert(\"Error config of AnnAngle!\");\r\n            return;\r\n        }\r\n\r\n        this.annBaseLine1 = new AnnBaseLine(this, lineList[0].startPoint, lineList[0].endPoint, this.imageViewer);\r\n        this.annBaseLine2 = new AnnBaseLine(this, lineList[1].startPoint, lineList[1].endPoint, this.imageViewer);\r\n\r\n        this.annStartPoint = this.createPoint(lineList[0].startPoint);\r\n        this.annEndPoint1 = this.createPoint(lineList[0].endPoint);\r\n        this.annEndPoint2 = this.createPoint(lineList[1].endPoint);\r\n\r\n        this.redrawAngle(arrowStartPoint);\r\n    }\r\n\r\n    onLoadConfig(annSerialize: AnnSerialize) {\r\n        return annSerialize.loadAngle();\r\n    }\r\n\r\n    onCreateFromConfig(config: any) {\r\n        this.onCreate(config.lineList, config.textIndicator.startPoint, config.textIndicator.endPoint);\r\n        this.focusedObj = this.annStartPoint;\r\n    }\r\n\r\n    onSave(annSerialize: AnnSerialize) {\r\n        this.saveBasicInfo(annSerialize, true);\r\n        annSerialize.writeInteger(0, 1);     // arcAndTextOnly        \r\n        annSerialize.writeInteger(3, 4);     // createState\r\n        const angle = this.annBaseCurve.getAngle();\r\n        annSerialize.writeDouble(angle);     // angle\r\n\r\n        const startPoint = this.annStartPoint.getPosition();\r\n        const radius = this.annBaseCurve.getRadius();\r\n        const arcStartPoint = AnnTool.pointInLineByDistance(startPoint, this.annBaseLine1.getEndPosition(), radius);\r\n        annSerialize.writeIntegerPoint(arcStartPoint);\r\n        const arcEndPoint = AnnTool.pointInLineByDistance(startPoint, this.annBaseLine2.getEndPosition(), radius);\r\n        annSerialize.writeIntegerPoint(arcEndPoint);\r\n\r\n        // TopLeft point of curve's rect\r\n        annSerialize.writeIntegerPoint({ x: startPoint.x - radius, y: startPoint.y - radius });\r\n        annSerialize.writeIntegerPoint({ x: startPoint.x + radius, y: startPoint.y + radius });\r\n\r\n        this.annBaseLine1.onSave(annSerialize);\r\n        this.annBaseLine2.onSave(annSerialize);\r\n        this.annTextIndicator.onSave(annSerialize);\r\n    }\r\n\r\n\r\n    onDrag(deltaX: number, deltaY: number) {\r\n        if (this.focusedObj === this.annStartPoint) {\r\n            this.annStartPoint.onDrag(deltaX, deltaY);\r\n            const startPoint = this.annStartPoint.getPosition();\r\n            this.annBaseLine1.onMoveStartPoint(startPoint);\r\n            this.annBaseLine2.onMoveStartPoint(startPoint);\r\n            this.redrawAngle();\r\n        } else if (this.focusedObj === this.annEndPoint1) {\r\n            this.annEndPoint1.onDrag(deltaX, deltaY);\r\n            this.annBaseLine1.onMoveEndPoint(this.annEndPoint1.getPosition());\r\n            this.redrawAngle();\r\n        } else if (this.focusedObj === this.annEndPoint2) {\r\n            this.annEndPoint2.onDrag(deltaX, deltaY);\r\n            this.annBaseLine2.onMoveEndPoint(this.annEndPoint2.getPosition());\r\n            this.redrawAngle();\r\n        } else if (this.focusedObj === this.annTextIndicator) {\r\n            this.annTextIndicator.onDrag(deltaX, deltaY);\r\n        } else {\r\n            this.onTranslate(deltaX, deltaY);\r\n        }\r\n    }\r\n\r\n    onFlip(vertical: boolean) {\r\n        super.onFlip(vertical);\r\n        this.redrawAngle();\r\n    }\r\n\r\n    // The arrow of the text indicator will always point to the start point\r\n    getSurroundPointList(): Point[] {\r\n        return [this.annStartPoint.getPosition()];\r\n    }\r\n\r\n    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Private functions\r\n    private redrawAngle(arrowStartPoint: Point = undefined) {\r\n        const radius = this.getAngelRadius();\r\n        const arcStartPoint = AnnTool.pointInLineByDistance(this.annStartPoint.getPosition(), this.annBaseLine1.getEndPosition(), radius);\r\n        const arcEndPoint = AnnTool.pointInLineByDistance(this.annStartPoint.getPosition(), this.annBaseLine2.getEndPosition(), radius);\r\n        let arcMiddlePoint = AnnTool.calcMiddlePointOfArc(arcStartPoint, arcEndPoint, radius);\r\n\r\n        const lineCenter = AnnTool.centerPoint(arcStartPoint, arcEndPoint);\r\n\r\n        // another middle point\r\n        const newMiddlePoint = { x: lineCenter.x * 2 - arcMiddlePoint.x, y: lineCenter.y * 2 - arcMiddlePoint.y };\r\n        const startPoint = this.annStartPoint.getPosition();\r\n\r\n        // The far point is the wanted\r\n        if (AnnTool.countDistance(startPoint, newMiddlePoint) > AnnTool.countDistance(startPoint, arcMiddlePoint)) {\r\n            arcMiddlePoint = newMiddlePoint;\r\n        }\r\n\r\n        const arcData = AnnTool.calcArcBy3Points(arcStartPoint, arcEndPoint, arcMiddlePoint, true);\r\n\r\n        if (this.annBaseCurve) {\r\n            this.annBaseCurve.onMove(arcData.centerPoint);\r\n            this.annBaseCurve.setRadius(arcData.radius);\r\n            this.annBaseCurve.setAngle(arcData.startAngle, arcData.endAngle);\r\n            this.annBaseCurve.setAnticlockwise(arcData.anticlockwise);\r\n\r\n            this.annTextIndicator.setText(this.annBaseCurve.getText(true));\r\n        } else {\r\n            this.annBaseCurve = new AnnBaseCurve(this, arcData.centerPoint, arcData.radius, arcData.startAngle, arcData.endAngle, arcData.anticlockwise, this.imageViewer);\r\n            this.annTextIndicator = new AnnTextIndicator(this, this.imageViewer);\r\n            this.annTextIndicator.onCreate(this.annBaseCurve.getText(true), startPoint, arrowStartPoint);\r\n        }\r\n    }\r\n\r\n    private getAngelRadius(): number {\r\n        const scale = this.image.getScaleValue();\r\n        const len1 = this.annBaseLine1.getLengthInPixel() * scale;\r\n        const len2 = this.annBaseLine2.getLengthInPixel() * scale;\r\n        const radius = Math.min(len1, len2, 30);\r\n        return radius / scale;\r\n    }\r\n\r\n    private createPoint(point: Point): AnnPoint {\r\n        const annPoint = new AnnPoint(this, this.imageViewer);\r\n        annPoint.onCreate(point);\r\n        annPoint.onLevelUp(\"top\");\r\n\r\n        return annPoint;\r\n    }\r\n}\r\n","﻿import { Point, MouseEventType } from '../../models/annotation';\r\nimport { AnnTool } from \"../ann-tool\";\r\nimport { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnBaseLine } from \"../base-object/ann-base-line\";\r\nimport { AnnExtendObject } from \"./ann-extend-object\";\r\nimport { AnnPoint } from \"./ann-point\";\r\nimport { AnnLine } from \"./ann-line\";\r\nimport { AnnSerialize } from \"../ann-serialize\";\r\n\r\nexport class AnnArrow extends AnnExtendObject {\r\n\r\n    private annLine: AnnLine;\r\n    private annArrowLineA: AnnBaseLine;\r\n    private annArrowLineB: AnnBaseLine;\r\n\r\n    constructor(parent: AnnExtendObject, imageViewer: IImageViewer) {\r\n        super(parent, imageViewer);\r\n    } \r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Override functions of base class\r\n\r\n    onMouseEvent(mouseEventType: MouseEventType, point: Point, mouseObj: any) {\r\n\r\n        const imagePoint = AnnTool.screenToImage(point, this.image.transformMatrix);\r\n        if (mouseEventType === MouseEventType.MouseDown) {\r\n\r\n            if (this.created) {\r\n                this.onSelect(true, false);\r\n                return;\r\n            }\r\n\r\n            if (!this.annLine) {\r\n                this.annLine = new AnnLine(this, this.imageViewer);\r\n                this.annLine.onMouseEvent(mouseEventType, point, null);\r\n            } else {\r\n                this.annLine.onMouseEvent(mouseEventType, point, null);\r\n\r\n                if (!this.parentObj) {\r\n                    this.onDrawEnded();\r\n                }\r\n            }\r\n        } else if (mouseEventType === MouseEventType.MouseMove) {\r\n            if (this.annLine) {\r\n                this.annLine.onMouseEvent(mouseEventType, point, null);\r\n                this.redrawArrow(this.annLine.getStartPosition(), imagePoint);\r\n            }\r\n        }\r\n    }\r\n\r\n    onCreate(arrowStartPoint: Point, arrowEndPoint: Point) {\r\n        this.onDeleteChildren();\r\n\r\n        this.annLine = new AnnLine(this, this.imageViewer);\r\n        this.annLine.onCreate(arrowStartPoint, arrowEndPoint);\r\n        this.redrawArrow(arrowStartPoint, arrowEndPoint);\r\n    }\r\n\r\n    onLoadConfig(annSerialize: AnnSerialize) {\r\n        return annSerialize.loadArrow();\r\n    }\r\n\r\n    onCreateFromConfig(config: any) {\r\n        this.onCreate(config.startPoint, config.endPoint);\r\n        this.focusedObj = this.annLine;\r\n    }\r\n\r\n    onSave(annSerialize: AnnSerialize, saveArrowMark: boolean = true) {\r\n        if (saveArrowMark) {\r\n           this.saveBasicInfo(annSerialize);\r\n        }\r\n        \r\n        annSerialize.writeString(\"CGXAnnArrow\");\r\n        annSerialize.writeInteger(1, 4);\r\n        annSerialize.writeInteger(0, 1);\r\n\r\n        this.annLine.getBaseLine().onSave(annSerialize);\r\n        this.annArrowLineA.onSave(annSerialize);\r\n        this.annArrowLineB.onSave(annSerialize);\r\n    }\r\n\r\n    onDrag(deltaX: number, deltaY: number) {\r\n        this.annLine.onDrag(deltaX, deltaY);\r\n        this.redrawArrow(this.annLine.getStartPosition(), this.annLine.getEndPosition());\r\n    }\r\n\r\n    onScale() {\r\n        super.onScale();\r\n        this.redrawArrow(this.annLine.getStartPosition(), this.annLine.getEndPosition());\r\n    }\r\n\r\n    onSwitchFocus() {\r\n        this.annLine.onSwitchFocus();\r\n    }\r\n\r\n    onMoveStartPoint(point: Point) {\r\n        this.annLine.onMoveStartPoint(point);\r\n        const endPoint = this.annLine.getEndPosition();\r\n        this.redrawArrow(point, endPoint);\r\n    }\r\n\r\n    onMoveEndPoint(point: Point) {\r\n        this.annLine.onMoveEndPoint(point);\r\n        const startPoint = this.annLine.getStartPosition();\r\n        this.redrawArrow(startPoint, point);\r\n    }\r\n\r\n    getStartPosition(): Point {\r\n        return this.annLine.getStartPosition();\r\n    }\r\n\r\n    getEndPosition(): Point {\r\n        return this.annLine.getEndPosition();\r\n    }\r\n\r\n    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Private functions\r\n    private redrawArrow(startPoint: Point, endPoint: Point) {\r\n        const arrowLength = this.getArrowLineLength();\r\n        const sineTheta = AnnTool.getSineTheta(endPoint, startPoint);\r\n        const cosineTheta = AnnTool.getCosineTheta(endPoint, startPoint);\r\n\r\n        const lineAEndPoint = {\r\n            x: endPoint.x + arrowLength * cosineTheta - arrowLength / 2.0 * sineTheta,\r\n            y: endPoint.y + arrowLength * sineTheta + arrowLength / 2.0 * cosineTheta\r\n        };\r\n\r\n        const lineBEndPoint = {\r\n            x: endPoint.x + arrowLength * cosineTheta + arrowLength / 2.0 * sineTheta,\r\n            y: endPoint.y + arrowLength * sineTheta - arrowLength / 2.0 * cosineTheta\r\n        }\r\n\r\n        if (this.annArrowLineA && this.annArrowLineB) {\r\n            this.annArrowLineA.onMoveStartPoint(endPoint);\r\n            this.annArrowLineA.onMoveEndPoint(lineAEndPoint);\r\n\r\n            this.annArrowLineB.onMoveStartPoint(endPoint);\r\n            this.annArrowLineB.onMoveEndPoint(lineBEndPoint);\r\n\r\n        } else {\r\n            this.annArrowLineA = new AnnBaseLine(this, endPoint, lineAEndPoint, this.imageViewer);\r\n            this.annArrowLineA.setMouseResponsible(false);\r\n            this.annArrowLineB = new AnnBaseLine(this, endPoint, lineBEndPoint, this.imageViewer);\r\n            this.annArrowLineB.setMouseResponsible(false);\r\n        }\r\n    }\r\n}","﻿import { Point, MouseEventType } from '../../models/annotation';\r\nimport { AnnTool } from \"../ann-tool\";\r\nimport { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnExtendObject } from \"./ann-extend-object\";\r\nimport { AnnBaseLine } from \"../base-object/ann-base-line\";\r\nimport { AnnPoint } from \"./ann-point\";\r\nimport { AnnTextIndicator } from \"./ann-text-indicator\"\r\nimport { AnnLine } from \"./ann-line\";\r\nimport { AnnSerialize } from \"../ann-serialize\";\r\n\r\nexport class AnnCardiothoracicRatio extends AnnExtendObject {\r\n\r\n    /*\r\n                            \r\n                        | A(0)\r\n                        |\r\n                        |\r\n                 C(2)---|-------D(3)\r\n                        |\r\n                        |\r\n                        |\r\n                        |\r\n                        |\r\n            E(4)--------|-------------F(5)\r\n                        |\r\n                        |\r\n                        |\r\n                        B(1)\r\n    */\r\n\r\n\r\n    private annLineAb: AnnLine;\r\n    private annLineCd: AnnLine;\r\n    private annLineEf: AnnLine;\r\n\r\n    private annBaseLineAb: AnnBaseLine;\r\n    private annTextIndicator: AnnTextIndicator;\r\n    private annPointList: Array<AnnPoint> = [];\r\n    private annLineList: Array<AnnBaseLine> = [];\r\n\r\n    constructor(parent: AnnExtendObject, imageViewer: IImageViewer) {\r\n        super(parent, imageViewer);\r\n    }\r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Override functions of base class\r\n\r\n    onMouseEvent(mouseEventType: MouseEventType, point: Point, mouseObj: any) {\r\n        const imagePoint = AnnTool.screenToImage(point, this.image.transformMatrix);\r\n        const stepIndex = this.imageViewer.getCurrentStepIndex();\r\n\r\n        if (mouseEventType === MouseEventType.MouseDown) {\r\n\r\n            if (this.created) {\r\n                this.onSelect(true, false);\r\n                return;\r\n            }\r\n\r\n            switch (stepIndex) {\r\n                // Draw the start point of line Ab\r\n                case 0: {\r\n                    this.onStep1(point, imagePoint);\r\n                    break;\r\n                }\r\n\r\n                // Draw line AB and point B\r\n                case 1: {\r\n                    this.onStep2(imagePoint);\r\n                    break;\r\n                }\r\n\r\n                // Draw the start point of line Cd\r\n                case 2: {\r\n                    this.onStep3(point, imagePoint);\r\n                    break;\r\n                }\r\n\r\n                // Draw base line Cc and Dd, draw point D, delete temp line Cd\r\n                case 3: {\r\n                    this.onStep4(imagePoint);\r\n                    break;\r\n                }\r\n\r\n                // Draw the start point of line EF\r\n                case 4: {\r\n                    this.onStep5(point, imagePoint);\r\n                    break;\r\n                }\r\n\r\n                // Draw base line Ee and Ff, draw point F, delete temp line Ef\r\n                case 5: {\r\n                    this.onStep6(imagePoint);\r\n                    break;\r\n                }\r\n\r\n                default: {\r\n                    alert(\"Invalid step index \" + stepIndex);\r\n                    return;\r\n                }\r\n            }\r\n\r\n            // Step the guide\r\n            this.imageViewer.stepGuide();\r\n\r\n        } else if (mouseEventType === MouseEventType.MouseMove) {\r\n\r\n            switch (stepIndex) {\r\n                // Move the end point of line AB\r\n                case 1: {\r\n                    this.annLineAb.onMouseEvent(mouseEventType, point, null);\r\n                    break;\r\n                }\r\n\r\n                // Move the end point of line CD\r\n                case 3: {\r\n                    this.annLineCd.onMouseEvent(mouseEventType, point, null);\r\n                    break;\r\n                }\r\n\r\n                // Move the end point of line EF\r\n                case 5: {\r\n                    this.annLineEf.onMouseEvent(mouseEventType, point, null);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    onCreate(lineList: any, arrowStartPoint: Point = undefined, arrowEndPoint: Point = undefined) {\r\n        if (lineList.length !== 5) {\r\n            alert(\"Error config of AnnCardiothoracicRatio!\");\r\n            return;\r\n        }\r\n\r\n        const pointA = lineList[0].startPoint;\r\n        const pointB = lineList[0].endPoint;\r\n\r\n        this.createPoint(pointA, 0);\r\n        this.createPoint(pointB, 1);\r\n\r\n        this.annBaseLineAb = new AnnBaseLine(this, pointA, pointB, this.imageViewer);\r\n        this.annLineList.push(new AnnBaseLine(this, pointA, pointA, this.imageViewer)); //BaseLineAa \r\n        this.annLineList.push(new AnnBaseLine(this, pointB, pointB, this.imageViewer)); //BaseLineBb\r\n        for (let i = 1; i < 5; i ++) {\r\n            this.annLineList.push(new AnnBaseLine(this, lineList[i].startPoint, lineList[i].endPoint, this.imageViewer));\r\n            this.createPoint(lineList[i].startPoint, i + 1);\r\n            this.handleFootPoint(lineList[i].startPoint);\r\n        }\r\n\r\n        this.annTextIndicator = new AnnTextIndicator(this, this.imageViewer);\r\n        this.annTextIndicator.onCreate(this.getText(), arrowEndPoint, arrowStartPoint);\r\n    }\r\n\r\n    onLoadConfig(annSerialize: AnnSerialize) {\r\n        return annSerialize.loadCardiothoracicRatio();\r\n    }\r\n\r\n    onCreateFromConfig(config: any) {\r\n        this.onCreate(config.lineList, config.textIndicator.startPoint, config.textIndicator.endPoint);\r\n        this.focusedObj = this.annPointList[0];\r\n    }\r\n\r\n    onSave(annSerialize: AnnSerialize) {\r\n        this.saveBasicInfo(annSerialize);\r\n\r\n        this.annBaseLineAb.onSave(annSerialize);\r\n        for (let i = 2; i < this.annLineList.length; i ++) {\r\n            this.annLineList[i].onSave(annSerialize);\r\n        }\r\n\r\n        this.annTextIndicator.onSave(annSerialize);\r\n    }\r\n\r\n    onDrag(deltaX: number, deltaY: number) {\r\n        if (this.focusedObj.getStepIndex() !== -1) {\r\n            this.focusedObj.onTranslate(deltaX, deltaY);\r\n            this.redraw();\r\n        } else if (this.focusedObj === this.annTextIndicator) {\r\n            this.annTextIndicator.onDrag(deltaX, deltaY);\r\n        } else {\r\n            this.onTranslate(deltaX, deltaY);\r\n        }\r\n    }\r\n\r\n    onSwitchFocus() {\r\n        const index = this.annPointList.findIndex(annObj => annObj === this.focusedObj);\r\n        if (index === -1) {\r\n            // Current focused object is text indicator\r\n            this.onChildSelected(this.annPointList[0]);\r\n        } else if (index === this.annPointList.length - 1) {\r\n            this.onChildSelected(this.annTextIndicator);\r\n        } else {\r\n            this.onChildSelected(this.annPointList[index+1]);\r\n        }\r\n    }\r\n\r\n    // The arrow of the text indicator will always point to the  point A\r\n    getSurroundPointList(): Point[] {\r\n        return [this.annPointList[0].getPosition()];\r\n    }\r\n\r\n    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Private functions\r\n\r\n    private onStep1(screenPoint: Point, imagePoint: Point) {\r\n        this.annLineAb = new AnnLine(this, this.imageViewer);\r\n        this.annLineAb.onMouseEvent(MouseEventType.MouseDown, screenPoint, null);\r\n\r\n        const annPointA = new AnnPoint(this, this.imageViewer);\r\n        annPointA.onCreate(imagePoint);\r\n        annPointA.setStepIndex(0);\r\n        this.annPointList.push(annPointA);\r\n\r\n        const annBaseLineAa = new AnnBaseLine(this, imagePoint, imagePoint, this.imageViewer);\r\n        this.annLineList.push(annBaseLineAa);\r\n    }\r\n\r\n    private onStep2(imagePoint: Point) {\r\n        const pointA = this.annLineAb.getStartPosition();\r\n        this.onDeleteChild(this.annLineAb);\r\n\r\n        this.annBaseLineAb = new AnnBaseLine(this, pointA, imagePoint, this.imageViewer);\r\n\r\n        const annPointB = new AnnPoint(this, this.imageViewer);\r\n        annPointB.onCreate(imagePoint);\r\n        annPointB.setStepIndex(1);\r\n        this.annPointList.push(annPointB);\r\n\r\n        const annBaseLineBb = new AnnBaseLine(this, imagePoint, imagePoint, this.imageViewer);\r\n        this.annLineList.push(annBaseLineBb);\r\n    }\r\n\r\n    private onStep3(screenPoint: Point, imagePoint: Point) {\r\n        this.annLineCd = new AnnLine(this, this.imageViewer);\r\n        this.annLineCd.onMouseEvent(MouseEventType.MouseDown, screenPoint, null);\r\n\r\n        const annPointC = new AnnPoint(this, this.imageViewer);\r\n        annPointC.onCreate(imagePoint);\r\n        annPointC.setStepIndex(2);\r\n        this.annPointList.push(annPointC);\r\n    }\r\n\r\n    private onStep4(imagePoint: Point) {\r\n        const pointC = this.annLineCd.getStartPosition();\r\n        const pointD = this.annLineCd.getEndPosition();\r\n        this.onDeleteChild(this.annLineCd);\r\n\r\n        const footPointC = this.handleFootPoint(pointC);\r\n        const annBaseLineCc = new AnnBaseLine(this, pointC, footPointC, this.imageViewer);\r\n        this.annLineList.push(annBaseLineCc);\r\n\r\n        const footPointD = this.handleFootPoint(pointD);\r\n        const annBaseLineDd = new AnnBaseLine(this, pointD, footPointD, this.imageViewer);\r\n        this.annLineList.push(annBaseLineDd);\r\n\r\n        const annPointD = new AnnPoint(this, this.imageViewer);\r\n        annPointD.onCreate(pointD);\r\n        annPointD.setStepIndex(3);\r\n        this.annPointList.push(annPointD);\r\n    }\r\n\r\n    private onStep5(screenPoint: Point, imagePoint: Point) {\r\n        this.annLineEf = new AnnLine(this, this.imageViewer);\r\n        this.annLineEf.onMouseEvent(MouseEventType.MouseDown, screenPoint, null);\r\n\r\n        const annPointE = new AnnPoint(this, this.imageViewer);\r\n        annPointE.onCreate(imagePoint);\r\n        annPointE.setStepIndex(4);\r\n\r\n        this.annPointList.push(annPointE);\r\n    }\r\n\r\n    private onStep6(imagePoint: Point) {\r\n        const pointE = this.annLineEf.getStartPosition();\r\n        const pointF = this.annLineEf.getEndPosition();\r\n        this.onDeleteChild(this.annLineEf);\r\n\r\n        const footPointE = this.handleFootPoint(pointE);\r\n        const annBaseLineEe = new AnnBaseLine(this, pointE, footPointE, this.imageViewer);\r\n        this.annLineList.push(annBaseLineEe);\r\n\r\n        const footPointF = this.handleFootPoint(pointF);\r\n        const annBaseLineFf = new AnnBaseLine(this, pointF, footPointF, this.imageViewer);\r\n        this.annLineList.push(annBaseLineFf);\r\n\r\n        const annPointF = new AnnPoint(this, this.imageViewer);\r\n        annPointF.onCreate(pointF);\r\n        annPointF.setStepIndex(5);\r\n        this.annPointList.push(annPointF);\r\n\r\n        this.annTextIndicator = new AnnTextIndicator(this, this.imageViewer);\r\n        this.annTextIndicator.onCreate(this.getText(), this.annBaseLineAb.getStartPosition());\r\n\r\n        this.focusedObj = this.annPointList[0];\r\n\r\n        if (!this.parentObj) {\r\n            this.onDrawEnded();\r\n        }\r\n    }\r\n\r\n    private getText(): string {\r\n        const heartWidth = this.annLineList[2].getLengthInPixel() + this.annLineList[3].getLengthInPixel();\r\n        const chestWidth = this.annLineList[4].getLengthInPixel() + this.annLineList[5].getLengthInPixel();\r\n        const ratio = (heartWidth * 100 / chestWidth).toFixed(2);\r\n\r\n        // Sail: What if the pixel spacing of x and y is different???\r\n        return this.pixelSpacing ? \"H: {0}mm / C: {1}mm / R: {2}%\".format((heartWidth * this.pixelSpacing.cx).toFixed(2), (chestWidth * this.pixelSpacing.cx).toFixed(2), ratio) :\r\n            \"H: {0}pt / C: {1}pt / R: {2}%\".format(heartWidth.toFixed(2), chestWidth.toFixed(2), ratio);\r\n    }\r\n\r\n    private handleFootPoint(point: Point): Point {\r\n        const pointA = this.annBaseLineAb.getStartPosition();\r\n        const pointB = this.annBaseLineAb.getEndPosition();\r\n\r\n        const footPoint = AnnTool.calcFootPoint(pointA, pointB, point);\r\n\r\n        const chestPointResult = AnnTool.pointInLine(footPoint, pointA, pointB);\r\n        if (!chestPointResult.isInLine) {\r\n            this.onNewFootPoint(footPoint, chestPointResult.nearStart ? 0 : 1);\r\n        }\r\n\r\n        return footPoint;\r\n    }\r\n\r\n    private onNewFootPoint(footPoint: Point, index: number) {\r\n        // index must be 0 or 1. 0 means start point(A), 1 means end point(B).\r\n        if (index !== 0 && index !== 1) {\r\n            alert(\"Internal error in onNewFootPoint\");\r\n            return;\r\n        }\r\n\r\n        const startPoint = this.annPointList[index].getPosition();\r\n        if (AnnTool.countDistance(footPoint, startPoint) > this.annLineList[index].getLengthInPixel()) {\r\n            this.annLineList[index].onMoveEndPoint(footPoint);\r\n        }\r\n    }\r\n\r\n    private redraw() {\r\n        const pointList = [];\r\n        for (let i = 0; i < this.annPointList.length; i ++) {\r\n            pointList.push(this.annPointList[i].getPosition());\r\n        }\r\n\r\n        this.annBaseLineAb.onMoveStartPoint(pointList[0]);\r\n        this.annBaseLineAb.onMoveEndPoint(pointList[1]);\r\n\r\n        for (let i = 0; i < 2; i++) {\r\n            this.annLineList[i].onMoveStartPoint(pointList[i]);\r\n            this.annLineList[i].onMoveEndPoint(pointList[i]);\r\n        }\r\n\r\n        for (let i = 2; i < this.annPointList.length; i++) {\r\n            const footPoint = this.handleFootPoint(pointList[i]);\r\n            this.annLineList[i].onMoveStartPoint(pointList[i]);\r\n            this.annLineList[i].onMoveEndPoint(footPoint);\r\n        }\r\n\r\n        this.annTextIndicator.setText(this.getText());\r\n    }\r\n\r\n    private createPoint(point: Point, stepIndex: number) {\r\n        const annPoint = new AnnPoint(this, this.imageViewer);\r\n        annPoint.onCreate(point);\r\n        annPoint.setStepIndex(stepIndex);\r\n        this.annPointList.push(annPoint);\r\n    }\r\n}","﻿import { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnExtendObject } from \"./ann-extend-object\";\r\nimport { AnnCurve } from \"./ann-curve\"\r\n\r\nexport class AnnCervicalCurve extends AnnCurve {\r\n    constructor(parent: AnnExtendObject, imageViewer: IImageViewer) {\r\n        super(parent, imageViewer);\r\n        this.radiusInImage = this.pixelSpacing ? 170 / this.pixelSpacing.cx : 170;\r\n    }\r\n}\r\n","﻿import { Point, MouseEventType } from '../../models/annotation';\r\nimport { AnnTool } from \"../ann-tool\";\r\nimport { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnExtendObject } from \"./ann-extend-object\";\r\nimport { AnnPoint } from \"./ann-point\";\r\nimport { AnnBaseCurve } from \"../base-object/ann-base-curve\";\r\nimport { AnnTextIndicator } from \"./ann-text-indicator\"\r\nimport { AnnSerialize } from \"../ann-serialize\";\r\n\r\nexport class AnnCurve extends AnnExtendObject {\r\n\r\n    private annBaseCurve: AnnBaseCurve;\r\n    private annStartPoint: AnnPoint;\r\n    private annMiddlePoint: AnnPoint;\r\n    private annEndPoint: AnnPoint;\r\n    private annTextIndicator: AnnTextIndicator;\r\n\r\n    protected radiusInImage: number;\r\n\r\n    constructor(parent: AnnExtendObject, imageViewer: IImageViewer) {\r\n        super(parent, imageViewer);\r\n    }\r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Override functions of base class\r\n\r\n    onMouseEvent(mouseEventType: MouseEventType, point: Point, mouseObj: any) {\r\n\r\n        const imagePoint = AnnTool.screenToImage(point, this.image.transformMatrix);\r\n        if (mouseEventType === MouseEventType.MouseDown) {\r\n\r\n            if (this.created) {\r\n                this.onSelect(true, false);\r\n                return;\r\n            }\r\n\r\n            const stepIndex = this.imageViewer.getCurrentStepIndex();\r\n            let ret: boolean;\r\n            switch (stepIndex) {\r\n\r\n                // Step 0: Draw the start point\r\n                case 0: {\r\n                    ret = this.onStep1(imagePoint);\r\n                    break;\r\n                }\r\n\r\n                // Draw curve\r\n                case 1: {\r\n                    ret = this.onStep2(imagePoint);\r\n                    break;\r\n                }\r\n\r\n                // Adjust curve direction\r\n                case 2: {\r\n                    ret = this.onStep3(imagePoint);\r\n                    break;\r\n                }\r\n                    \r\n                default: {\r\n                    alert(\"Invalid step index \" + stepIndex);\r\n                    return;\r\n                }\r\n            }\r\n\r\n            // Step the guide\r\n            if (ret) {\r\n                this.imageViewer.stepGuide();\r\n            }\r\n        }\r\n    }\r\n\r\n    onCreate(pointList: any, arrowStartPoint: Point = undefined, arrowEndPoint: Point = undefined) {\r\n        if (pointList.length !== 3) {\r\n            alert(\"Error config of AnnCurve!\");\r\n            return;\r\n        }\r\n\r\n        this.onStep1(pointList[0]);\r\n        this.redraw(pointList[0], pointList[1], pointList[2]);\r\n    }\r\n\r\n    onLoadConfig(annSerialize: AnnSerialize) {\r\n        return annSerialize.loadCurve();\r\n    }\r\n\r\n    onCreateFromConfig(config: any) {\r\n        this.onCreate(config.pointList, config.textIndicator.startPoint, config.textIndicator.endPoint);\r\n        this.focusedObj = this.annStartPoint;\r\n    }\r\n\r\n    onSave(annSerialize: AnnSerialize) {\r\n       this.saveBasicInfo(annSerialize);\r\n\r\n        annSerialize.writeDoublePoint(this.annStartPoint.getPosition());\r\n        annSerialize.writeDoublePoint(this.annEndPoint.getPosition());\r\n        annSerialize.writeDoublePoint(this.annMiddlePoint.getPosition());\r\n\r\n        this.annTextIndicator.onSave(annSerialize);\r\n    }\r\n\r\n    onDrag(deltaX: number, deltaY: number) {\r\n        if (this.focusedObj === this.annStartPoint) {\r\n            this.onDragStartPoint(deltaX, deltaY);\r\n        } else if (this.focusedObj === this.annEndPoint) {\r\n            this.onDragEndPoint(deltaX, deltaY);\r\n        } else if (this.focusedObj === this.annMiddlePoint) {\r\n            this.onDragMiddlePoint(deltaX, deltaY);\r\n        } else if (this.focusedObj === this.annTextIndicator) {\r\n            this.annTextIndicator.onDrag(deltaX, deltaY);\r\n        } else {\r\n            this.onTranslate(deltaX, deltaY);\r\n        }\r\n    }\r\n\r\n    onFlip(vertical: boolean) {\r\n        this.annStartPoint.onFlip(vertical);\r\n        this.annEndPoint.onFlip(vertical);\r\n        this.annMiddlePoint.onFlip(vertical);\r\n        this.annTextIndicator.onFlip(vertical);\r\n\r\n        const startPoint = this.annStartPoint.getPosition();\r\n        const endPoint = this.annEndPoint.getPosition();\r\n        const middlePoint = this.annMiddlePoint.getPosition();\r\n        \r\n        this.redraw(startPoint, endPoint, middlePoint);\r\n    }\r\n\r\n    // The arrow of the text indicator will always point to the middle point\r\n    getSurroundPointList(): Point[] {\r\n        return [this.annMiddlePoint.getPosition()];\r\n    }\r\n\r\n    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Private functions\r\n\r\n    private onStep1(imagePoint: Point): boolean {\r\n        this.annStartPoint = new AnnPoint(this, this.imageViewer);\r\n        this.annStartPoint.onCreate(imagePoint);\r\n        this.annStartPoint.enableShowAlways(true);\r\n        this.annStartPoint.setStepIndex(0);\r\n        return true;\r\n    }\r\n\r\n    private onStep2(imagePoint: Point): boolean {\r\n        const startPoint = this.annStartPoint.getPosition();\r\n        if (AnnTool.equalPoint(imagePoint, startPoint)) return false;\r\n\r\n        const length = AnnTool.countDistance(startPoint, imagePoint);\r\n        if (length > this.radiusInImage * 2) return false;\r\n\r\n        const middlePoint = AnnTool.calcMiddlePointOfArc(startPoint, imagePoint, this.radiusInImage);\r\n        this.redraw(startPoint, imagePoint, middlePoint);\r\n        return true;\r\n    }\r\n\r\n    private onStep3(imagePoint: Point): boolean {\r\n        const startPoint = this.annStartPoint.getPosition();\r\n        const endPoint = this.annEndPoint.getPosition();\r\n        const middlePoint = this.annMiddlePoint.getPosition();\r\n        const lineCenter = AnnTool.centerPoint(startPoint, endPoint);\r\n\r\n        // another middle point\r\n        const newMiddlePoint = { x: lineCenter.x * 2 - middlePoint.x, y: lineCenter.y * 2 - middlePoint.y };\r\n\r\n        // The nearest is the wanted\r\n        if (AnnTool.countDistance(imagePoint, newMiddlePoint) < AnnTool.countDistance(imagePoint, middlePoint)) {\r\n            this.redraw(startPoint, endPoint, newMiddlePoint);\r\n        }\r\n\r\n        this.focusedObj = this.annMiddlePoint;\r\n\r\n        if (!this.parentObj) {\r\n            this.onDrawEnded();\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    private onDragStartPoint(deltaX: number, deltaY: number) {\r\n        const startPoint = this.annStartPoint.getPosition();\r\n        const endPoint = this.annEndPoint.getPosition();\r\n        const middlePoint = this.annMiddlePoint.getPosition();\r\n\r\n        startPoint.x += deltaX;\r\n        startPoint.y += deltaY;\r\n\r\n        this.redraw(startPoint, endPoint, middlePoint);\r\n    }\r\n\r\n    private onDragEndPoint(deltaX: number, deltaY: number) {\r\n        const startPoint = this.annStartPoint.getPosition();\r\n        const endPoint = this.annEndPoint.getPosition();\r\n        const middlePoint = this.annMiddlePoint.getPosition();\r\n\r\n        endPoint.x += deltaX;\r\n        endPoint.y += deltaY;\r\n\r\n        this.redraw(startPoint, endPoint, middlePoint);\r\n    }\r\n\r\n    private onDragMiddlePoint(deltaX: number, deltaY: number) {\r\n        const startPoint = this.annStartPoint.getPosition();\r\n        const endPoint = this.annEndPoint.getPosition();\r\n        const middlePoint = this.annMiddlePoint.getPosition();\r\n\r\n        middlePoint.x += deltaX;\r\n        middlePoint.y += deltaY;\r\n\r\n        this.redraw(startPoint, endPoint, middlePoint);\r\n    }\r\n\r\n    // Redraw the curve\r\n    private redraw(startPoint: Point, endPoint: Point, middlePoint: Point) {\r\n\r\n        const arcData = AnnTool.calcArcBy3Points(startPoint, endPoint, middlePoint, true);\r\n        if (!arcData) return;\r\n\r\n        if (this.annBaseCurve) {\r\n            this.annStartPoint.onMove(arcData.startPoint);\r\n            this.annEndPoint.onMove(arcData.endPoint);\r\n            this.annMiddlePoint.onMove(arcData.middlePoint);\r\n\r\n            this.annBaseCurve.onMove(arcData.centerPoint);\r\n            this.annBaseCurve.setRadius(arcData.radius);\r\n            this.annBaseCurve.setAngle(arcData.startAngle, arcData.endAngle);\r\n            this.annBaseCurve.setAnticlockwise(arcData.anticlockwise);\r\n\r\n            this.annTextIndicator.setText(this.annBaseCurve.getText());\r\n        } else {\r\n            this.annEndPoint = new AnnPoint(this, this.imageViewer);\r\n            this.annEndPoint.onCreate(endPoint);\r\n            this.annEndPoint.enableShowAlways(true);\r\n            this.annEndPoint.setStepIndex(1);\r\n\r\n            this.annMiddlePoint = new AnnPoint(this, this.imageViewer);\r\n            this.annMiddlePoint.onCreate(middlePoint);\r\n            this.annMiddlePoint.enableShowAlways(true);\r\n            this.annMiddlePoint.setStepIndex(2);\r\n\r\n            this.annBaseCurve = new AnnBaseCurve(this, arcData.centerPoint, arcData.radius, arcData.startAngle, arcData.endAngle, arcData.anticlockwise, this.imageViewer);\r\n\r\n            this.annTextIndicator = new AnnTextIndicator(this, this.imageViewer);\r\n            this.annTextIndicator.onCreate(this.annBaseCurve.getText(), middlePoint);\r\n\r\n            this.annBaseCurve.onLevelDown();\r\n        }\r\n    }\r\n}","﻿import { Point, MouseEventType } from '../../models/annotation';\r\nimport { AnnTool } from \"../ann-tool\";\r\nimport { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnPoint } from \"./ann-point\";\r\nimport { AnnBaseEllipse } from \"../base-object/ann-base-ellipse\";\r\nimport { AnnExtendObject } from \"./ann-extend-object\";\r\nimport { AnnTextIndicator } from \"./ann-text-indicator\"\r\nimport { AnnSerialize } from \"../ann-serialize\";\r\n\r\nexport class AnnEllipse extends AnnExtendObject {\r\n\r\n    private annBaseEllipse: AnnBaseEllipse;\r\n    private annCenterPoint: AnnPoint;\r\n    private annPointList = new Array<AnnPoint>();\r\n    private annTextIndicator: AnnTextIndicator;\r\n\r\n    constructor(parentObj: AnnExtendObject, imageViewer: IImageViewer) {\r\n        super(parentObj, imageViewer);\r\n    }\r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Override functions of base class\r\n\r\n    onMouseEvent(mouseEventType: MouseEventType, point: Point, mouseObj: any) {\r\n        const imagePoint = AnnTool.screenToImage(point, this.image.transformMatrix);\r\n        if (mouseEventType === MouseEventType.MouseDown) {\r\n\r\n            if (this.created) {\r\n                this.onSelect(true, false);\r\n                return;\r\n            }\r\n\r\n            if (!this.annCenterPoint) {\r\n                this.annCenterPoint = new AnnPoint(this, this.imageViewer);\r\n                this.annCenterPoint.onCreate(imagePoint);\r\n            } else {\r\n                this.focusedObj = this.annBaseEllipse;\r\n                if (!this.parentObj) {\r\n                    this.onDrawEnded();\r\n                }\r\n            }\r\n        } else if (mouseEventType === MouseEventType.MouseMove) {\r\n            if (this.annCenterPoint) {\r\n                const centerPoint = this.annCenterPoint.getPosition();\r\n                const pointList = AnnTool.pointListFromEllipse(centerPoint, imagePoint.x - centerPoint.x, imagePoint.y - centerPoint.y);\r\n\r\n                if (this.annBaseEllipse) {\r\n                    this.redraw(pointList);\r\n                } else {\r\n                    pointList.push(undefined);  // Arrow start\r\n                    pointList.push(pointList[0]); // Arrow end\r\n                    this.createFromPointList(pointList);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    onCreate(centerPoint: Point, width: number, height: number, showIndicator: boolean, arrowStartPoint: Point = undefined, arrowEndPoint: Point = undefined) {\r\n        this.annCenterPoint = new AnnPoint(this, this.imageViewer);\r\n        this.annCenterPoint.onCreate(centerPoint);\r\n\r\n        const pointList = AnnTool.pointListFromEllipse(centerPoint, width, height);\r\n        pointList.push(arrowStartPoint);\r\n        pointList.push(arrowEndPoint);\r\n        this.createFromPointList(pointList);\r\n    }\r\n\r\n    onLoadConfig(annSerialize: AnnSerialize) {\r\n        return annSerialize.loadEllipse();\r\n    }\r\n\r\n    onCreateFromConfig(config: any) {\r\n        this.onCreate(config.centerPoint, config.width, config.height, true, config.textIndicator.startPoint, config.textIndicator.endPoint);\r\n        this.focusedObj = this.annBaseEllipse;\r\n    }\r\n\r\n    onSave(annSerialize: AnnSerialize) {\r\n        annSerialize.writeString(this.annDefData.imageSuiteAnnName);\r\n        annSerialize.writeInteger(this.annBaseEllipse.getWidth(), 4);\r\n        annSerialize.writeInteger(this.annBaseEllipse.getHeight(), 4);\r\n        annSerialize.writeInteger(this.selected ? 1 : 0, 1);\r\n        annSerialize.writeIntegerPoint(this.annCenterPoint.getPosition());\r\n\r\n        this.annTextIndicator.onSave(annSerialize);\r\n        annSerialize.writeInteger(1, 1);\r\n        annSerialize.writeDouble(0);\r\n    }\r\n\r\n    onDrag(deltaX: number, deltaY: number) {\r\n        if (this.focusedObj === this.annCenterPoint || this.focusedObj === this.annBaseEllipse) {\r\n            this.onTranslate(deltaX, deltaY);\r\n        } else if (this.annPointList.some(annObj => annObj === this.focusedObj)) {\r\n            this.onDragPoint(this.focusedObj, deltaX, deltaY);\r\n        } else if (this.annTextIndicator === this.focusedObj) {\r\n            this.annTextIndicator.onDrag(deltaX, deltaY);\r\n        }\r\n    }\r\n\r\n    getSurroundPointList(): Point[] {\r\n        const pointList = [];\r\n        for (let i = 0; i < 4; i++) {\r\n            pointList.push(this.annPointList[i].getPosition());\r\n        }\r\n        return pointList;\r\n    }\r\n\r\n    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Private functions\r\n\r\n    private redraw(pointList: Point[]) {\r\n        if (pointList.length !== 4 || this.annPointList.length !== 4) {\r\n            alert(\"Internal error in AnnEllipse.redraw()\");\r\n            return;\r\n        }\r\n\r\n        this.annBaseEllipse.setWidth(pointList[1].x - pointList[0].x);\r\n        this.annBaseEllipse.setHeight(pointList[1].y - pointList[0].y);\r\n\r\n        for (let i = 0; i < 4; i ++) {\r\n            this.annPointList[i].onMove(pointList[i]);\r\n        }\r\n\r\n        this.annTextIndicator.redrawArrow();\r\n        this.annTextIndicator.setText(this.annBaseEllipse.getAreaString());\r\n    }\r\n\r\n    private createFromPointList(pointList: Point[]) {\r\n        if (pointList.length !== 6 || !this.annCenterPoint) {\r\n            alert(\"Internal error in AnnEllipse.createFromPointList()\");\r\n            return;\r\n        }\r\n\r\n        for (let i = 0; i < 4; i++) {\r\n            const annPoint = new AnnPoint(this, this.imageViewer);\r\n            annPoint.onCreate(pointList[i]);\r\n            this.annPointList.push(annPoint);\r\n        }\r\n\r\n        const centerPoint = this.annCenterPoint.getPosition();\r\n        this.annBaseEllipse = new AnnBaseEllipse(this, centerPoint, pointList[1].x - centerPoint.x, pointList[2].y - centerPoint.y, this.imageViewer);\r\n        this.annBaseEllipse.onLevelDown();\r\n\r\n        this.annTextIndicator = new AnnTextIndicator(this, this.imageViewer);\r\n        this.annTextIndicator.onCreate(this.annBaseEllipse.getAreaString(), pointList[5], pointList[4]);\r\n    }\r\n\r\n    private onDragPoint(draggedObj: any, deltaX: number, deltaY: number) {\r\n        const pointList = this.getSurroundPointList();\r\n\r\n        if (draggedObj === this.annPointList[0]) {\r\n            // Top point\r\n            pointList[0].y += deltaY;\r\n            pointList[2].y -= deltaY;\r\n        } else if (draggedObj === this.annPointList[1]) {\r\n            // Right point\r\n            pointList[1].x += deltaX;\r\n            pointList[3].x -= deltaX;\r\n        } else if (draggedObj === this.annPointList[2]) {\r\n            // Bottom point\r\n            pointList[0].y -= deltaY;\r\n            pointList[2].y += deltaY;\r\n        } else if (draggedObj === this.annPointList[3]) {\r\n            // Left point\r\n            pointList[1].x -= deltaX;\r\n            pointList[3].x += deltaX;\r\n        }\r\n        this.redraw(pointList);\r\n    }\r\n}","﻿import { Point, MouseEventType, Rectangle, AnnotationDefinitionData } from '../../models/annotation';\r\nimport { AnnObject } from '../ann-object';\r\nimport { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnSerialize } from \"../ann-serialize\";\r\n\r\nexport abstract class AnnExtendObject extends AnnObject {\r\n\r\n    protected annObjList: Array<AnnObject> = [];\r\n    protected loadedFromTag = false;   // The annotation is created when loading image\r\n    protected annDefData: AnnotationDefinitionData;\r\n\r\n    constructor(parentObj: AnnExtendObject, imageViewer: IImageViewer) {\r\n        super(parentObj, imageViewer);\r\n        this.annDefData = imageViewer.getAnnotationService().getAnnDefDataByClassName(this.constructor.name);\r\n        if (parentObj) {\r\n            parentObj.onChildCreated(this);\r\n        }\r\n    }\r\n\r\n    getTypeName() {\r\n        return this.annDefData.className;\r\n    }\r\n\r\n    isGuideNeeded(): boolean {\r\n        return this.annDefData.needGuide;\r\n    }\r\n\r\n    isLoadedFromTag(): boolean {\r\n        return this.loadedFromTag;\r\n    }\r\n\r\n    selectChildByStepIndex(stepIndex: number) {\r\n        if (!this.isGuideNeeded()) return;\r\n\r\n        const annChildList = this.annObjList.filter(annObj => annObj.getStepIndex() === stepIndex);\r\n        if (annChildList.length > 0) {\r\n            this.focusedObj = annChildList[0];\r\n            this.onSelect(true, true);\r\n        }\r\n\r\n    }\r\n\r\n    onMouseEvent(mouseEventType: MouseEventType, point: Point, mouseObj: any) {\r\n        alert(\"Error in AnnExtendObject.onMouseEvent, this function must be overrode.\");\r\n    }\r\n\r\n    onSwitchFocus() {\r\n        if (!this.focusedObj) {\r\n            alert(\"No focus object set!\");\r\n            return;\r\n        }\r\n\r\n        const index = this.annObjList.findIndex(annObj => annObj === this.focusedObj);\r\n        const nextIndex = index === this.annObjList.length - 1 ? 0 : index + 1;\r\n        this.onChildSelected(this.annObjList[nextIndex]);\r\n    }\r\n\r\n    onDeleteChild(annChildObj: AnnObject) {\r\n        annChildObj.onDeleteChildren();\r\n\r\n        const index = this.annObjList.findIndex(annObj => annObj === annChildObj);\r\n        if (index !== -1) {\r\n            this.annObjList.splice(index, 1);\r\n        } else {\r\n            alert(\"Internal error!  AnnExtendObject.onDeleteChild() - Can NOT find child to be delete\");\r\n        }\r\n    }\r\n\r\n    onChildCreated(annChildObj: AnnObject) {\r\n        // A child annotation is created, add it to the children list\r\n        this.addChildObj(annChildObj);\r\n    }\r\n\r\n    onDrawEnded() {\r\n\r\n        if (this.mouseResponsible) {\r\n            this.annObjList.forEach(annObj => annObj.onDrawEnded());\r\n        } \r\n\r\n        this.created = true;\r\n\r\n        if (!this.parentObj) {\r\n            // Parent not set, this mean it is not a child of a parentObj annotation. \r\n            this.imageViewer.onAnnotationCreated(this);\r\n        }\r\n    }\r\n\r\n    onDrag(deltaX: number, deltaY: number) {\r\n        this.onTranslate(deltaX, deltaY);\r\n    }\r\n\r\n    onSelect(selected: boolean, focused: boolean) {\r\n\r\n        this.selected = selected;\r\n\r\n        this.annObjList.forEach(annObj => annObj.onSelect(selected, focused && annObj === this.focusedObj));\r\n\r\n        if (!this.parentObj && this.selected) {\r\n            this.imageViewer.selectAnnotation(this);\r\n        }\r\n    }\r\n\r\n    onRotate(angle: number) {\r\n        this.annObjList.forEach(annObj => {\r\n            // The text indicator is drawn in the separated layer, need to rotate it.\r\n            if (annObj.constructor.name === \"AnnTextIndicator\" || annObj.constructor.name === \"AnnText\") {\r\n                annObj.onRotate(angle);\r\n            }\r\n        });\r\n    }\r\n\r\n    onScale() {\r\n        this.annObjList.forEach(annObj => annObj.onScale());\r\n    }\r\n\r\n    onFlip(vertical: boolean) {\r\n        this.annObjList.forEach(annObj => annObj.onFlip(vertical));\r\n    }\r\n\r\n    onTranslate(deltaX: number, deltaY: number) {\r\n        this.annObjList.forEach(annObj => annObj.onTranslate(deltaX, deltaY));\r\n    }\r\n\r\n    onMove(point: Point) {\r\n        this.annObjList.forEach(annObj => annObj.onMove(point));\r\n    }\r\n\r\n    onDeleteChildren() {\r\n        this.annObjList.forEach(annObj => annObj.onDeleteChildren());\r\n    }\r\n\r\n    onLevelUp(level: any = 1) {\r\n        this.annObjList.forEach(annObj => annObj.onLevelUp(level));\r\n    }\r\n\r\n    onLevelDown(level: any = 1) {\r\n        this.annObjList.forEach(annObj => annObj.onLevelDown(level));\r\n    }\r\n\r\n    getPosition(): Point {\r\n        return { x: 0, y: 0 }\r\n    }\r\n\r\n    getSurroundPointList(): Point[] {\r\n        alert(\"Internal error : AnnExtendObject.getSurroundPointList() should never be called.\");\r\n        return [];\r\n    }\r\n\r\n    getRect(): Rectangle {\r\n        alert(\"Internal error : AnnExtendObject.getRect() should never be called.\");\r\n        return undefined;\r\n    }\r\n\r\n    setStepIndex(stepIndex: number) {\r\n        super.setStepIndex(stepIndex);\r\n        this.annObjList.forEach(annObj => annObj.setStepIndex(stepIndex));\r\n    }\r\n\r\n    setVisible(visible: boolean) {\r\n        this.annObjList.forEach(annObj => annObj.setVisible(visible));\r\n    }\r\n\r\n    onLoad(annSerialize: AnnSerialize) {\r\n        this.loadedFromTag = true;\r\n        const config = this.onLoadConfig(annSerialize);\r\n        this.onCreateFromConfig(config);\r\n        this.onSelect(config.selected, config.selected);\r\n        if (!this.parentObj) {\r\n            this.onDrawEnded();\r\n        }\r\n    }\r\n\r\n    onSave(annSerialize: AnnSerialize) {\r\n        alert(\"Internal error : AnnExtendObject.onSave() should never be called.\");\r\n    }\r\n\r\n    onCreateFromConfig(config: any) {\r\n        alert(\"Internal error : AnnExtendObject.onCreateFromConfig() should never be called.\");\r\n        return undefined;\r\n    }\r\n\r\n    onLoadConfig(annSerialize: AnnSerialize) {\r\n        alert(\"Internal error : AnnExtendObject.onLoadConfig() should never be called.\");\r\n        return undefined;\r\n    }\r\n\r\n    onDragStarted(pos: Point) {\r\n\r\n    }\r\n\r\n    onDragEnded(pos: Point) {\r\n\r\n    }\r\n\r\n    private addChildObj(annObj: AnnObject) {\r\n        this.annObjList.push(annObj);\r\n    }\r\n\r\n    protected saveBasicInfo(annSerialize: AnnSerialize, saveMoving: boolean = false) {\r\n        annSerialize.writeString(this.annDefData.imageSuiteAnnName);\r\n        annSerialize.writeInteger(this.annDefData.imageSuiteAnnType, 4);     // AnnType\r\n        annSerialize.writeInteger(1, 4);     // created\r\n        if (saveMoving) {\r\n            annSerialize.writeInteger(0, 4);     // moving\r\n        }\r\n        annSerialize.writeInteger(this.selected ? 1 : 0, 1);     // selected\r\n    }\r\n}","﻿import { Point, MouseEventType } from '../../models/annotation';\r\nimport { AnnTool } from \"../ann-tool\";\r\nimport { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnExtendObject } from \"./ann-extend-object\";\r\nimport { AnnPoint } from \"./ann-point\";\r\nimport { AnnBasePolygon } from \"../base-object/ann-base-polygon\";\r\nimport { AnnTextIndicator } from \"./ann-text-indicator\"\r\nimport { AnnSerialize } from \"../ann-serialize\";\r\n\r\nexport class AnnFreeArea extends AnnExtendObject {\r\n\r\n    private annBasePolygon: AnnBasePolygon;\r\n\r\n    constructor(parent: AnnExtendObject, imageViewer: IImageViewer) {\r\n        super(parent, imageViewer);\r\n    }\r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Override functions of base class\r\n    onMouseEvent(mouseEventType: MouseEventType, point: Point, mouseObj: any) {\r\n        const imagePoint = AnnTool.screenToImage(point, this.image.transformMatrix);\r\n        if (mouseEventType === MouseEventType.MouseDown) {\r\n\r\n            if (this.created) {\r\n                this.onSelect(true, false);\r\n                return;\r\n            }\r\n\r\n            if (!this.annBasePolygon) {\r\n                this.annBasePolygon = new AnnBasePolygon(this, [[imagePoint.x, imagePoint.y]], this.imageViewer, true);\r\n            }\r\n        } else if (mouseEventType === MouseEventType.DblClick) {\r\n\r\n            this.annBasePolygon.setClosed(true);\r\n            this.focusedObj = this.annBasePolygon;\r\n\r\n            if (!this.parentObj) {\r\n                this.onDrawEnded();\r\n            }\r\n        } else if (mouseEventType === MouseEventType.MouseMove) {\r\n            if (this.annBasePolygon) {\r\n                this.annBasePolygon.addPoint(imagePoint);\r\n            }\r\n        }\r\n    }\r\n\r\n    onCreate(pointList: any) {\r\n        this.annBasePolygon = new AnnBasePolygon(this, [], this.imageViewer, true);\r\n\r\n        const dataList = [];\r\n        const length = pointList.length;\r\n        for (let i = 0; i < length; i++) {\r\n            dataList.push([pointList[i].x, pointList[i].y]);\r\n        }\r\n        this.annBasePolygon.setPointList(dataList);\r\n        this.annBasePolygon.setClosed(true);\r\n    }\r\n\r\n    onLoadConfig(annSerialize: AnnSerialize) {\r\n        return annSerialize.loadFreeArea();\r\n    }\r\n\r\n    onCreateFromConfig(config: any) {\r\n        this.onCreate(config.pointList);\r\n        this.focusedObj = this.annBasePolygon;\r\n    }\r\n\r\n    onSave(annSerialize: AnnSerialize) {\r\n        this.annBasePolygon.saveBasicInfo(annSerialize, this.annDefData);\r\n        this.annBasePolygon.onSave(annSerialize);\r\n    }\r\n\r\n    onDrag(deltaX: number, deltaY: number) {\r\n        if (this.focusedObj === this.annBasePolygon) {\r\n            this.onTranslate(deltaX, deltaY);\r\n        } else {\r\n            this.focusedObj.onTranslate(deltaX, deltaY);\r\n            const index = this.annObjList.findIndex(annObj => annObj === this.focusedObj);\r\n            this.annBasePolygon.updatePoint(index - 1, this.focusedObj.getPosition());\r\n\r\n        }\r\n    }\r\n\r\n    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Private functions\r\n\r\n\r\n}\r\n","﻿import { Point, PositionInRectangle, MouseEventType, Rectangle } from '../../models/annotation';\r\nimport { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnExtendObject } from \"./ann-extend-object\";\r\nimport { AnnRectangle } from \"../extend-object/ann-rectangle\";\r\nimport { AnnBaseImage } from \"../base-object/ann-base-image\";\r\nimport { AnnTool } from \"../ann-tool\";\r\nimport { AnnSerialize } from \"../ann-serialize\";\r\n\r\nexport class AnnImage extends AnnExtendObject {\r\n\r\n    private annBaseImage: AnnBaseImage;\r\n    private annRectangle: AnnRectangle;\r\n    private imageFileName: string;\r\n\r\n    constructor(parentObj: AnnExtendObject, imageViewer: IImageViewer) {\r\n        super(parentObj, imageViewer);\r\n    }\r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Override functions of base class\r\n\r\n    onMouseEvent(mouseEventType: MouseEventType, point: Point) {\r\n\r\n        const imagePoint = AnnTool.screenToImage(point, this.image.transformMatrix);\r\n        if (mouseEventType === MouseEventType.MouseDown) {\r\n\r\n            if (this.created) {\r\n                this.onSelect(true, false);\r\n                return;\r\n            }\r\n\r\n            this.focusedObj = this.annBaseImage;\r\n            if (!this.parentObj) {\r\n                this.onDrawEnded();\r\n            }\r\n        } else if (mouseEventType === MouseEventType.MouseMove) {\r\n            if (this.annBaseImage) {\r\n                this.onMove(imagePoint);\r\n            }\r\n        }\r\n    }\r\n\r\n    onCreate(imageFileName: string, topLeftPoint: Point, bottomRightPoint: Point = undefined) {\r\n\r\n        this.imageFileName = imageFileName;\r\n        const imageData = new Image();\r\n        imageData.onload = ev => {\r\n            this.annBaseImage = new AnnBaseImage(this, imageData, topLeftPoint, this.imageViewer);\r\n\r\n            let width: number, height: number;\r\n            if (bottomRightPoint) {\r\n                width = bottomRightPoint.x - topLeftPoint.x;\r\n                height = bottomRightPoint.y - topLeftPoint.y;\r\n            } else {\r\n                width = this.annBaseImage.getWidth();\r\n                height = this.annBaseImage.getHeight();\r\n            }\r\n\r\n            this.annRectangle = new AnnRectangle(this, this.imageViewer);\r\n            this.annRectangle.onCreate(topLeftPoint, width, height, false);\r\n            this.annBaseImage.onLevelDown(\"bottom\");\r\n\r\n            if (bottomRightPoint) {\r\n                this.onRectangleChanged();\r\n            }\r\n\r\n            if (this.loadedFromTag) {\r\n                this.focusedObj = this.annBaseImage;\r\n                this.onSelect(this.selected, this.selected);\r\n                if (!this.parentObj) {\r\n                    this.onDrawEnded();\r\n                }\r\n                this.imageViewer.refresh();\r\n            }\r\n        };\r\n\r\n        imageData.src = this.imageViewer.getBaseUrl() + \"assets/img/Stamp/\" + imageFileName + \".PNG\";\r\n    }\r\n\r\n    onLoad(config: any) {\r\n        this.loadedFromTag = true;\r\n        this.onCreateFromConfig(config);\r\n    }\r\n\r\n    onSave(annSerialize: AnnSerialize) {\r\n        annSerialize.writeString(this.annDefData.imageSuiteAnnName);\r\n        annSerialize.writeString(this.imageFileName);\r\n        annSerialize.writeBytes([]);\r\n        annSerialize.writeInteger(this.annDefData.imageSuiteAnnType, 4);\r\n        annSerialize.writeInteger(1, 4);     // created\r\n        annSerialize.writeInteger(0, 4);     // moving\r\n        annSerialize.writeInteger(this.selected ? 1 : 0, 1);     // selected\r\n\r\n        const rect = this.annRectangle.getRect();\r\n        annSerialize.writeIntegerPoint({ x: rect.x, y: rect.y });\r\n        annSerialize.writeIntegerPoint({ x: rect.x + rect.width, y: rect.y + rect.height });\r\n        annSerialize.writeInteger(1, 1);\r\n        annSerialize.writeInteger(0, 4);\r\n    }\r\n\r\n    onLoadConfig(annSerialize: AnnSerialize) {\r\n        return annSerialize.loadImage();\r\n    }\r\n\r\n    onCreateFromConfig(config: any) {\r\n        this.selected = config.selected;\r\n        this.onCreate(config.imageFileName, config.topLeftPoint, config.bottomRightPoint);\r\n    }\r\n\r\n    onSelect(selected: boolean, focused: boolean) {\r\n        super.onSelect(selected, focused);\r\n        if (this.annRectangle) {\r\n            this.annRectangle.setVisible(selected);\r\n        }\r\n    }\r\n\r\n    onDrag(deltaX: number, deltaY: number) {\r\n        if (this.annRectangle === this.focusedObj) {\r\n            this.annRectangle.onDrag(deltaX, deltaY);\r\n            this.onRectangleChanged();\r\n        } else {\r\n            this.onTranslate(deltaX, deltaY);\r\n        }\r\n    }\r\n\r\n    onMove(point: Point) {\r\n        this.annBaseImage.onMove(point);\r\n\r\n        const width = this.annBaseImage.getWidth();\r\n        const height = this.annBaseImage.getHeight();\r\n        const pointList = AnnTool.pointListFrom(point, PositionInRectangle.TopLeft, width, height);\r\n        this.annRectangle.redraw(pointList);\r\n    }\r\n\r\n    onSwitchFocus() {\r\n        this.annRectangle.onSwitchFocus();\r\n    }\r\n\r\n    getRect(): Rectangle {\r\n        return this.annBaseImage.getRect();\r\n    }\r\n    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Public functions\r\n\r\n    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Private functions\r\n    private onRectangleChanged() {\r\n        let rect = this.annRectangle.getRect();\r\n        rect = AnnTool.formatRect(rect);\r\n        this.annBaseImage.onMove(new Point(rect.x, rect.y));\r\n        this.annBaseImage.setWidth(rect.width);\r\n        this.annBaseImage.setHeight(rect.height);\r\n    }\r\n}","﻿import { Point, MouseEventType } from '../../models/annotation';\r\nimport { AnnTool } from \"../ann-tool\";\r\nimport { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnBaseLine } from \"../base-object/ann-base-line\";\r\nimport { AnnExtendObject } from \"./ann-extend-object\";\r\nimport { AnnPoint } from \"./ann-point\";\r\nimport { AnnSerialize } from \"../ann-serialize\";\r\n\r\nexport class AnnLine extends AnnExtendObject {\r\n    \r\n    private annBaseLine: AnnBaseLine;\r\n    private annStartPoint: AnnPoint;\r\n    private annEndPoint: AnnPoint;\r\n\r\n    constructor(parentObj: AnnExtendObject, imageViewer: IImageViewer) {\r\n        super(parentObj, imageViewer);\r\n    }    \r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Override functions of base class\r\n\r\n    onMouseEvent(mouseEventType: MouseEventType, point: Point, mouseObj: any) {\r\n\r\n        const imagePoint = AnnTool.screenToImage(point, this.image.transformMatrix);\r\n        if (mouseEventType === MouseEventType.MouseDown) {\r\n\r\n            if (this.created) {\r\n                this.onSelect(true, false);\r\n                return;\r\n            }\r\n\r\n            if (!this.annStartPoint) {\r\n                this.annStartPoint = new AnnPoint(this, this.imageViewer);\r\n                this.annStartPoint.onCreate(imagePoint);\r\n            } else {\r\n                this.focusedObj = this.annBaseLine;\r\n\r\n                if (!this.parentObj) {\r\n                    this.onDrawEnded();\r\n                }\r\n            }\r\n        } else if (mouseEventType === MouseEventType.MouseMove) {\r\n            if (this.annStartPoint) {\r\n                if (this.annBaseLine) {\r\n                    this.annBaseLine.onMoveEndPoint(imagePoint);\r\n                    this.annEndPoint.onMove(imagePoint);\r\n                } else {\r\n                    this.annEndPoint = new AnnPoint(this, this.imageViewer);\r\n                    this.annEndPoint.onCreate(imagePoint);\r\n                    this.annBaseLine = new AnnBaseLine(this, this.annStartPoint.getPosition(), imagePoint, this.imageViewer);\r\n\r\n                    // Make sure the start point is on the top the line So that we can easily select it for moving\r\n                    this.annStartPoint.onLevelUp();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    onCreate(startPoint: Point, endPoint: Point) {\r\n        this.onDeleteChildren();\r\n\r\n        this.annBaseLine = new AnnBaseLine(this, startPoint, endPoint, this.imageViewer);\r\n        this.annStartPoint = new AnnPoint(this, this.imageViewer);\r\n        this.annStartPoint.onCreate(startPoint);\r\n        this.annEndPoint = new AnnPoint(this, this.imageViewer);\r\n        this.annEndPoint.onCreate(endPoint);\r\n\r\n        this.focusedObj = this.annBaseLine;\r\n    }\r\n\r\n    onLoadConfig(annSerialize: AnnSerialize) {\r\n        return annSerialize.loadLine();\r\n    }\r\n\r\n    onCreateFromConfig(config: any) {\r\n        this.onCreate(config.startPoint, config.endPoint);\r\n        this.focusedObj = this.annBaseLine;\r\n    }\r\n\r\n    onSave(annSerialize: AnnSerialize) {\r\n        this.saveBasicInfo(annSerialize);\r\n\r\n        this.annBaseLine.onSave(annSerialize);\r\n    }\r\n\r\n    onDrag(deltaX: number, deltaY: number) {\r\n        if (this.focusedObj === this.annStartPoint) {\r\n            this.onDragStartPoint(deltaX, deltaY);\r\n        } else if (this.focusedObj === this.annEndPoint) {\r\n            this.onDragEndPoint(deltaX, deltaY);\r\n        }else {\r\n            this.onTranslate(deltaX, deltaY);\r\n        }\r\n    }\r\n\r\n    onMoveStartPoint(point: Point) {\r\n        this.annBaseLine.onMoveStartPoint(point);\r\n        this.annStartPoint.onMove(point);\r\n    }\r\n\r\n    onMoveEndPoint(point: Point) {\r\n        this.annBaseLine.onMoveEndPoint(point);\r\n        this.annEndPoint.onMove(point);\r\n    }\r\n\r\n    getStartPosition(): Point {\r\n        return this.annBaseLine.getStartPosition();\r\n    }\r\n\r\n    getEndPosition(): Point {\r\n        return this.annBaseLine.getEndPosition();\r\n    }\r\n\r\n    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Public functions\r\n    getBaseLine(): AnnBaseLine {\r\n        return this.annBaseLine;\r\n    }\r\n\r\n    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Private functions\r\n    private onDragStartPoint(deltaX: number, deltaY: number) {\r\n        this.annStartPoint.onTranslate(deltaX, deltaY);\r\n        const point = this.annStartPoint.getPosition();\r\n        this.annBaseLine.onMoveStartPoint(point);\r\n    }\r\n\r\n    private onDragEndPoint(deltaX: number, deltaY: number) {\r\n        this.annEndPoint.onTranslate(deltaX, deltaY);\r\n        const point = this.annEndPoint.getPosition();\r\n        this.annBaseLine.onMoveEndPoint(point);\r\n    }\r\n}","﻿import { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnExtendObject } from \"./ann-extend-object\";\r\nimport { AnnCurve } from \"./ann-curve\"\r\n\r\nexport class AnnLumbarCurve extends AnnCurve {\r\n    constructor(parent: AnnExtendObject, imageViewer: IImageViewer) {\r\n        super(parent, imageViewer);\r\n        this.radiusInImage = this.pixelSpacing ? 220 / this.pixelSpacing.cx : 220;\r\n    }\r\n}","﻿import { Point, MouseEventType } from '../../models/annotation';\r\nimport { AnnTool } from \"../ann-tool\";\r\nimport { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnExtendObject } from \"./ann-extend-object\";\r\nimport { AnnPoint } from \"./ann-point\";\r\nimport { AnnSerialize } from \"../ann-serialize\";\r\n\r\nexport class AnnMarkSpot extends AnnExtendObject {\r\n\r\n    constructor(parent: AnnExtendObject, imageViewer: IImageViewer) {\r\n        super(parent, imageViewer);\r\n    }\r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Override functions of base class\r\n\r\n    onMouseEvent(mouseEventType: MouseEventType, point: Point, mouseObj: any) {\r\n        const imagePoint = AnnTool.screenToImage(point, this.image.transformMatrix);\r\n        if(mouseEventType === MouseEventType.MouseDown) {\r\n\r\n            if (this.created) {\r\n                this.onSelect(true, false);\r\n                return;\r\n            }\r\n\r\n            this.createNewPoint(imagePoint);\r\n        } else if (mouseEventType === MouseEventType.DblClick) {\r\n\r\n            // ********** Mouse down was called two times before calling dbclick, need to delete the additional point\r\n            const length = this.annObjList.length;\r\n            if (length > 1) {\r\n                this.onDeleteChild(this.annObjList[length - 1]);\r\n            }\r\n\r\n            // Step the guide\r\n            this.imageViewer.stepGuide();\r\n\r\n            this.focusedObj = this.annObjList[0];\r\n\r\n            if (!this.parentObj) {\r\n                this.onDrawEnded();\r\n            }\r\n        }\r\n    }\r\n\r\n    onCreate(pointList: Point[]) {\r\n        this.onDeleteChildren();\r\n\r\n        for (let i = 0; i < pointList.length; i ++) {\r\n            this.createNewPoint(pointList[i]);\r\n        }\r\n    }\r\n\r\n    onLoadConfig(annSerialize: AnnSerialize) {\r\n        return annSerialize.loadMarkSpot();\r\n    }\r\n\r\n    onCreateFromConfig(config: any) {\r\n        this.onCreate(config.pointList);\r\n        this.focusedObj = this.annObjList[0];\r\n    }\r\n\r\n    onSave(annSerialize: AnnSerialize) {\r\n        this.saveBasicInfo(annSerialize);\r\n\r\n        const count = this.annObjList.length;\r\n        annSerialize.writeInteger(count, 4);\r\n\r\n        for (let i = 0; i < count; i++) {\r\n            annSerialize.writeIntegerPoint(this.annObjList[i].getPosition());\r\n        }\r\n    }\r\n\r\n    onDrag(deltaX: number, deltaY: number) {\r\n        this.focusedObj.onTranslate(deltaX, deltaY);\r\n    }\r\n\r\n    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Private functions\r\n\r\n    private createNewPoint(imagePoint: Point) {\r\n        const annPoint = new AnnPoint(this, this.imageViewer);\r\n        annPoint.onCreate(imagePoint);\r\n        annPoint.enableShowAlways(true);\r\n        annPoint.setStepIndex(0);\r\n    }\r\n\r\n}\r\n","﻿import { Point, MouseEventType } from '../../models/annotation';\r\nimport { AnnTool } from \"../ann-tool\";\r\nimport { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnBaseCircle } from \"../base-object/ann-base-circle\";\r\nimport { AnnExtendObject } from \"./ann-extend-object\";\r\n\r\nexport class AnnPoint extends AnnExtendObject {\r\n\r\n    private annCenterCircle: AnnBaseCircle;\r\n    private annOuterCircle: AnnBaseCircle;\r\n    private showAlways = false;\r\n\r\n    constructor(parentObj: AnnExtendObject, imageViewer: IImageViewer) {\r\n\r\n        super(parentObj, imageViewer);\r\n    }\r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Override functions of base class\r\n\r\n    onMouseEvent(mouseEventType: MouseEventType, point: Point, mouseObj: any) {\r\n\r\n        const imagePoint = AnnTool.screenToImage(point, this.getTransformMatrix());\r\n        if (mouseEventType === MouseEventType.MouseDown) {\r\n\r\n            if (this.created) {\r\n                this.onSelect(true, false);\r\n                return;\r\n            }\r\n\r\n            this.onCreate(imagePoint);\r\n        }\r\n    }\r\n\r\n    onCreate(position: Point) {\r\n        this.annCenterCircle = new AnnBaseCircle(this, position, this.pointRadius, this.imageViewer, true);\r\n        this.annCenterCircle.setMouseResponsible(false);\r\n\r\n        this.annOuterCircle = new AnnBaseCircle(this, position, this.pointRadius * 2, this.imageViewer, false);\r\n        this.annOuterCircle.setTransparent(true);\r\n        this.annOuterCircle.setColor(this.annOuterCircle.getDefaultColor());\r\n        this.annOuterCircle.onLevelUp(\"top\");\r\n\r\n        this.focusedObj = this.annCenterCircle;\r\n    }\r\n\r\n    onScale() {\r\n        const pointRadius = this.getPointRadius();\r\n        this.setRadius(pointRadius);\r\n        this.annOuterCircle.onScale();\r\n    }\r\n\r\n    onSelect(selected: boolean, focused: boolean) {\r\n\r\n        this.selected = selected;\r\n        const color = selected ? this.selectedColor : this.defaultColor;\r\n\r\n        if (focused && !this.focusedObj) {\r\n            this.focusedObj = this.annCenterCircle;\r\n        }\r\n\r\n        this.annCenterCircle.setVisible(selected || this.showAlways);\r\n        this.annCenterCircle.setColor(color);\r\n\r\n        this.annOuterCircle.setColor(focused ? color : this.annOuterCircle.getDefaultColor());\r\n    }\r\n\r\n    setRadius(radius: number) {\r\n        this.annCenterCircle.setRadius(radius);\r\n        this.annOuterCircle.setRadius(radius * 2);\r\n    }\r\n\r\n    getPosition(): Point {\r\n        return this.annCenterCircle.getPosition();\r\n    }\r\n    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Public functions\r\n    enableShowAlways(showAlways: boolean) {\r\n        this.showAlways = showAlways;\r\n    }\r\n}","﻿import { Point, MouseEventType } from '../../models/annotation';\r\nimport { AnnTool } from \"../ann-tool\";\r\nimport { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnExtendObject } from \"./ann-extend-object\";\r\nimport { AnnPoint } from \"./ann-point\";\r\nimport { AnnBasePolygon } from \"../base-object/ann-base-polygon\";\r\nimport { AnnTextIndicator } from \"./ann-text-indicator\"\r\nimport { AnnSerialize } from \"../ann-serialize\";\r\n\r\nexport class AnnPolygon extends AnnExtendObject {\r\n\r\n    private annBasePolygon: AnnBasePolygon;\r\n    private annPoint: AnnPoint;\r\n    private annTextIndicator: AnnTextIndicator;\r\n    private moveToCreate = true;\r\n\r\n    constructor(parent: AnnExtendObject, imageViewer: IImageViewer) {\r\n        super(parent, imageViewer);\r\n    }\r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Override functions of base class\r\n    onMouseEvent(mouseEventType: MouseEventType, point: Point, mouseObj: any) {\r\n        const imagePoint = AnnTool.screenToImage(point, this.image.transformMatrix);\r\n        if (mouseEventType === MouseEventType.MouseDown) {\r\n\r\n            if (this.created) {\r\n                this.onSelect(true, false);\r\n                return;\r\n            }\r\n\r\n            if (this.annObjList.length === 0) {\r\n                this.annBasePolygon = new AnnBasePolygon(this, [[imagePoint.x, imagePoint.y]], this.imageViewer);\r\n                this.createNewPoint(imagePoint);\r\n            }\r\n            this.moveToCreate = true;\r\n        } else if (mouseEventType === MouseEventType.DblClick) {\r\n\r\n            // ********** Mouse down was called two times before calling dbclick, need to delete the additional point\r\n            const length = this.annObjList.length;\r\n            if (length > 1) {\r\n                this.onDeleteChild(this.annObjList[length - 1]);\r\n            }\r\n\r\n            this.createNewPoint(imagePoint);\r\n\r\n            this.annTextIndicator = new AnnTextIndicator(this, this.imageViewer);\r\n            this.annTextIndicator.onCreate(this.annBasePolygon.getAreaString(), imagePoint);\r\n\r\n            this.annBasePolygon.setClosed(true);\r\n            this.focusedObj = this.annBasePolygon;\r\n\r\n            if (!this.parentObj) {\r\n                this.onDrawEnded();\r\n            }\r\n        } else if (mouseEventType === MouseEventType.MouseMove) {\r\n            if (this.annObjList.length !== 0) {\r\n                if (this.moveToCreate) {\r\n                    this.moveToCreate = false;\r\n\r\n                    this.createNewPoint(imagePoint);\r\n                    this.annBasePolygon.addPoint(imagePoint);\r\n                } else {\r\n                    this.annBasePolygon.updateLastPoint(imagePoint);\r\n                    this.annPoint.onMove(imagePoint);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    onCreate(pointList: any, showIndicator: boolean, arrowStartPoint: Point = undefined, arrowEndPoint: Point = undefined) {\r\n        this.annBasePolygon = new AnnBasePolygon(this, [], this.imageViewer);\r\n\r\n        const dataList = [];\r\n        const length = pointList.length;\r\n        for (let i = 0; i < length; i ++) {\r\n            dataList.push([pointList[i].x, pointList[i].y]);\r\n            this.createNewPoint(pointList[i]);\r\n        }\r\n        this.annBasePolygon.setPointList(dataList);\r\n        this.annBasePolygon.setClosed(true);\r\n\r\n        if (showIndicator) {\r\n            this.annTextIndicator = new AnnTextIndicator(this, this.imageViewer);\r\n            this.annTextIndicator.onCreate(this.annBasePolygon.getAreaString(), arrowEndPoint, arrowStartPoint);\r\n        }\r\n    }\r\n\r\n    onLoadConfig(annSerialize: AnnSerialize) {\r\n        return annSerialize.loadPolygon();\r\n    }\r\n\r\n    onCreateFromConfig(config: any) {\r\n        this.onCreate(config.pointList, true, config.textIndicator.startPoint, config.textIndicator.endPoint);\r\n        this.focusedObj = this.annBasePolygon;\r\n    }\r\n\r\n    onSave(annSerialize: AnnSerialize) {\r\n        this.annBasePolygon.saveBasicInfo(annSerialize, this.annDefData);\r\n        this.annBasePolygon.onSave(annSerialize);\r\n        this.annTextIndicator.onSave(annSerialize);\r\n    }\r\n\r\n    onDrag(deltaX: number, deltaY: number) {\r\n        if (this.focusedObj === this.annBasePolygon) {\r\n            this.onTranslate(deltaX, deltaY);\r\n        } else if (this.annTextIndicator === this.focusedObj) {\r\n            this.annTextIndicator.onDrag(deltaX, deltaY);\r\n        } else {\r\n            this.focusedObj.onTranslate(deltaX, deltaY);\r\n            const index = this.annObjList.findIndex(annObj => annObj === this.focusedObj);\r\n            this.annBasePolygon.updatePoint(index - 1, this.focusedObj.getPosition());\r\n\r\n            if (this.annTextIndicator) {\r\n                this.annTextIndicator.redrawArrow();\r\n                this.annTextIndicator.setText(this.annBasePolygon.getAreaString());\r\n            }\r\n        }\r\n    }\r\n\r\n    getSurroundPointList(): Point[] {\r\n        \r\n        const pointList = [];\r\n\r\n        for (let i = 1; i < this.annObjList.length - 1; i++) {\r\n            pointList.push(this.annObjList[i].getPosition());\r\n        }\r\n\r\n        return pointList;\r\n    }\r\n\r\n    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Private functions\r\n\r\n    private createNewPoint(imagePoint: Point) {\r\n        this.annPoint = new AnnPoint(this, this.imageViewer);\r\n        this.annPoint.onCreate(imagePoint);\r\n    }\r\n\r\n}\r\n","﻿import { Point, Rectangle, MouseEventType, PositionInRectangle } from '../../models/annotation';\r\nimport { AnnTool } from \"../ann-tool\";\r\nimport { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnBaseLine } from \"../base-object/ann-base-line\";\r\nimport { AnnExtendObject } from \"./ann-extend-object\";\r\nimport { AnnPoint } from \"./ann-point\";\r\nimport { AnnBaseRectangle } from \"../base-object/ann-base-rectangle\";\r\nimport { AnnTextIndicator } from \"./ann-text-indicator\"\r\nimport { AnnSerialize } from \"../ann-serialize\";\r\n\r\nexport class AnnRectangle extends AnnExtendObject {\r\n    \r\n    /*\r\n         P0                                         P1  \r\n            --------------------------------------\r\n            |                                    |\r\n            |                                    |  \r\n            |                                    |\r\n            --------------------------------------\r\n         P3                                         P2                \r\n\r\n    */\r\n\r\n    private annPointList = new Array<AnnPoint>();\r\n    private annBaseRectangle: AnnBaseRectangle;\r\n    private annTextIndicator: AnnTextIndicator;\r\n\r\n\r\n    constructor(parentObj: AnnExtendObject, imageViewer: IImageViewer) {\r\n        super(parentObj, imageViewer);\r\n    }     \r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Override functions of base class\r\n\r\n    onMouseEvent(mouseEventType: MouseEventType, point: Point) {\r\n\r\n        const imagePoint = AnnTool.screenToImage(point, this.image.transformMatrix);\r\n        if (mouseEventType === MouseEventType.MouseDown) {\r\n\r\n            if (this.created) {\r\n                this.onSelect(true, false);\r\n                return;\r\n            }\r\n\r\n            if (this.annPointList.length === 0) {\r\n                const annTopLeftPoint = new AnnPoint(this, this.imageViewer);\r\n                annTopLeftPoint.onCreate(imagePoint);\r\n                this.annPointList.push(annTopLeftPoint);\r\n            } else {\r\n                this.focusedObj = this.annBaseRectangle;\r\n                if (!this.parentObj) {\r\n                    this.onDrawEnded();\r\n                }\r\n            }\r\n        } else if (mouseEventType === MouseEventType.MouseMove) {\r\n            if (this.annPointList.length !== 0) {\r\n\r\n                const pointList = [];\r\n                \r\n                const topLeftPoint = this.annPointList[0].getPosition();\r\n                pointList.push(topLeftPoint);\r\n                pointList.push({ x: imagePoint.x, y: topLeftPoint.y });\r\n                pointList.push(imagePoint);\r\n                pointList.push({ x: topLeftPoint.x, y: imagePoint.y });\r\n                \r\n\r\n                if (this.annBaseRectangle) {\r\n                    this.redraw(pointList);\r\n                } else {\r\n\r\n                    for (let i = 1; i < 4; i ++) {\r\n                        const annPoint = new AnnPoint(this, this.imageViewer);\r\n                        annPoint.onCreate(pointList[i]);\r\n                        this.annPointList.push(annPoint);\r\n                    }\r\n\r\n                    this.annBaseRectangle = new AnnBaseRectangle(this, topLeftPoint, imagePoint.x - topLeftPoint.x, imagePoint.y - topLeftPoint.y, this.imageViewer);\r\n                    this.annBaseRectangle.onLevelDown(\"bottom\");\r\n\r\n                    this.annTextIndicator = new AnnTextIndicator(this, this.imageViewer);\r\n                    this.annTextIndicator.onCreate(this.annBaseRectangle.getAreaString(), topLeftPoint);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    onCreate(topLeftPoint: Point, width: number, height: number, showIndicator: boolean, arrowStartPoint: Point = undefined, arrowEndPoint: Point = undefined ) {\r\n        const pointList = AnnTool.pointListFrom(topLeftPoint, PositionInRectangle.TopLeft, width, height);\r\n        if (arrowStartPoint) {\r\n            pointList.push(arrowStartPoint);\r\n        }\r\n\r\n        if (arrowEndPoint) {\r\n            pointList.push(arrowEndPoint);\r\n        }\r\n\r\n        this.createFromPointList(pointList, showIndicator);\r\n        this.focusedObj = this.annBaseRectangle;\r\n    }\r\n\r\n    onLoadConfig(annSerialize: AnnSerialize) {\r\n        return annSerialize.loadRectangle();\r\n    }\r\n\r\n    onCreateFromConfig(config: any) {\r\n        this.onCreate(config.baseRect.topLeftPoint, config.baseRect.width, config.baseRect.height, true, config.textIndicator.startPoint, config.textIndicator.endPoint);\r\n        this.focusedObj = this.annBaseRectangle;\r\n    }\r\n\r\n    onSave(annSerialize: AnnSerialize) {\r\n        this.saveBasicInfo(annSerialize);\r\n\r\n        this.annBaseRectangle.onSave(annSerialize);\r\n        this.annTextIndicator.onSave(annSerialize);\r\n    }\r\n\r\n    onDrag(deltaX: number, deltaY: number) {\r\n\r\n        if (this.annBaseRectangle === this.focusedObj) {\r\n            this.onTranslate(deltaX, deltaY);\r\n        } else if (this.annPointList.some(annObj => annObj === this.focusedObj)) {\r\n            this.focusedObj.onTranslate(deltaX, deltaY);\r\n            this.onPointDragged(this.focusedObj, deltaX, deltaY);\r\n        } else if (this.annTextIndicator === this.focusedObj) {\r\n            this.onTextDragged(deltaX, deltaY);\r\n        }\r\n    }\r\n\r\n    getSurroundPointList(): Point[] {\r\n\r\n        const pointList = [];\r\n\r\n        for (let i = 0; i < 4; i++) {\r\n            pointList.push(this.annPointList[i].getPosition());\r\n        }\r\n\r\n        return pointList;\r\n    }\r\n\r\n    getRect(): Rectangle {\r\n        return this.annBaseRectangle.getRect();\r\n    }\r\n\r\n    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Public functions\r\n    redraw(pointList: Point[]) {\r\n\r\n        for (let i = 0; i < 4; i++) {\r\n            this.annPointList[i].onMove(pointList[i]);\r\n        }\r\n\r\n        this.annBaseRectangle.redraw(new Rectangle(pointList[0].x, pointList[0].y, pointList[2].x - pointList[0].x, pointList[2].y - pointList[0].y));\r\n\r\n        if (this.annTextIndicator) {\r\n            this.annTextIndicator.redrawArrow();\r\n            this.annTextIndicator.setText(this.annBaseRectangle.getAreaString());\r\n        }\r\n    }\r\n\r\n    showBorder(show: boolean) {\r\n        this.annBaseRectangle.setVisible(show);\r\n    }\r\n    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Private functions\r\n    private onPointDragged(draggedObj: any, deltaX: number, deltaY: number) {\r\n\r\n        const pointList = this.getSurroundPointList();\r\n        \r\n        if (draggedObj === this.annPointList[0]) {\r\n            pointList[1].y = pointList[0].y;\r\n            pointList[3].x = pointList[0].x;\r\n        } else if (draggedObj === this.annPointList[1]) {\r\n            pointList[0].y = pointList[1].y;\r\n            pointList[2].x = pointList[1].x;\r\n        } else if (draggedObj === this.annPointList[2]) {\r\n            pointList[3].y = pointList[2].y;\r\n            pointList[1].x = pointList[2].x;\r\n        } else if (draggedObj === this.annPointList[3]) {\r\n            pointList[2].y = pointList[3].y;\r\n            pointList[0].x = pointList[3].x;\r\n        }\r\n\r\n        this.redraw(pointList);\r\n    }\r\n\r\n    private onTextDragged(deltaX: number, deltaY: number) {\r\n        this.annTextIndicator.onDrag(deltaX, deltaY);\r\n    }\r\n\r\n    private createFromPointList(pointList: Point[], showIndicator: boolean) {\r\n        for (let i = 0; i < 4; i++) {\r\n            const annPoint = new AnnPoint(this, this.imageViewer);\r\n            annPoint.onCreate(pointList[i]);\r\n            this.annPointList.push(annPoint);\r\n        }\r\n\r\n        this.annBaseRectangle = new AnnBaseRectangle(this, pointList[0], pointList[2].x - pointList[0].x, pointList[2].y - pointList[0].y, this.imageViewer);\r\n        this.annBaseRectangle.onLevelDown(\"bottom\");\r\n\r\n        if (showIndicator) {\r\n            this.annTextIndicator = new AnnTextIndicator(this, this.imageViewer);\r\n            const arrowStartPoint = pointList.length >= 5 ? pointList[4] : undefined;\r\n            const arrowEndPoint = pointList.length === 6 ? pointList[5] : pointList[0];\r\n            this.annTextIndicator.onCreate(this.annBaseRectangle.getAreaString(), arrowEndPoint, arrowStartPoint);\r\n        }\r\n    }\r\n}","﻿import { Point, MouseEventType } from '../../models/annotation';\r\nimport { AnnTool } from \"../ann-tool\";\r\nimport { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnBaseLine } from \"../base-object/ann-base-line\";\r\nimport { AnnExtendObject } from \"./ann-extend-object\";\r\nimport { AnnPoint } from \"./ann-point\";\r\nimport { AnnTextIndicator } from \"./ann-text-indicator\"\r\nimport { AnnLine } from \"./ann-line\";\r\nimport { AnnSerialize } from \"../ann-serialize\";\r\n\r\nexport class AnnRuler extends AnnExtendObject {\r\n    private annLine: AnnLine;\r\n    private annMiddlePoint: AnnPoint;\r\n    private lineNodeA: AnnBaseLine;\r\n    private lineNodeB: AnnBaseLine;\r\n    private rulerNode = 15;\r\n    private annTextIndicator: AnnTextIndicator;\r\n\r\n    constructor(parentObj: AnnExtendObject, imageViewer: IImageViewer) {\r\n        super(parentObj, imageViewer);\r\n    }    \r\n\r\n    onMouseEvent(mouseEventType: MouseEventType, point: Point, mouseObj: any) {\r\n\r\n        const imagePoint = AnnTool.screenToImage(point, this.image.transformMatrix);\r\n        if (mouseEventType === MouseEventType.MouseDown) {\r\n\r\n            if (this.created) {\r\n                this.onSelect(true, false);\r\n                return;\r\n            }\r\n\r\n            if (!this.annLine) {\r\n                this.annLine = new AnnLine(this, this.imageViewer);\r\n                this.annLine.onMouseEvent(mouseEventType, point, null);\r\n            } else {\r\n                this.redraw(this.annLine.getStartPosition(), imagePoint);\r\n                this.focusedObj = this.annLine;\r\n\r\n                if (!this.parentObj) {\r\n                    this.onDrawEnded();\r\n                }\r\n            }\r\n        } else if (mouseEventType === MouseEventType.MouseMove) {\r\n            if (this.annLine) {\r\n                this.annLine.onMouseEvent(mouseEventType, point, null);\r\n                this.redraw(this.annLine.getStartPosition(), imagePoint);\r\n            }\r\n        }\r\n    }\r\n\r\n    onCreate(startPoint: Point, endPoint: Point, textPoint: Point) {\r\n        this.onDeleteChildren();\r\n\r\n        this.annLine = new AnnLine(this, this.imageViewer);\r\n        this.annLine.onCreate(startPoint, endPoint);\r\n        this.redraw(startPoint, endPoint, textPoint);\r\n    }\r\n\r\n    onLoadConfig(annSerialize: AnnSerialize) {\r\n        return annSerialize.loadRuler();\r\n    }\r\n\r\n    onCreateFromConfig(config: any) {\r\n        this.onCreate(config.startPoint, config.endPoint, config.textIndicator.startPoint);\r\n        this.focusedObj = this.annLine;\r\n    }\r\n\r\n    onSave(annSerialize: AnnSerialize) {\r\n        this.saveBasicInfo(annSerialize);\r\n\r\n        this.annLine.getBaseLine().onSave(annSerialize);\r\n        this.lineNodeA.onSave(annSerialize);\r\n        this.lineNodeB.onSave(annSerialize);\r\n        this.annTextIndicator.onSave(annSerialize);\r\n    }\r\n\r\n    onDrag(deltaX: number, deltaY: number) {\r\n        if (this.focusedObj === this.annLine) {\r\n            this.annLine.onDrag(deltaX, deltaY);\r\n            this.redraw(this.annLine.getStartPosition(), this.annLine.getEndPosition());\r\n            this.annMiddlePoint.onMove(AnnTool.centerPoint(this.annLine.getStartPosition(), this.annLine.getEndPosition()));\r\n\r\n            const text = this.getLength(this.annLine.getStartPosition(), this.annLine.getEndPosition());\r\n            this.annTextIndicator.setText(text);\r\n        } else if (this.focusedObj === this.annTextIndicator) {\r\n            this.annTextIndicator.onDrag(deltaX, deltaY);\r\n        } else {\r\n            this.onTranslate(deltaX, deltaY);\r\n        }\r\n    }\r\n\r\n    getSurroundPointList(): Point[] {\r\n        AnnTool.centerPoint(this.annLine.getStartPosition(), this.annLine.getEndPosition());\r\n        return [this.annMiddlePoint.getPosition()];\r\n    }\r\n\r\n    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Private functions\r\n    private redraw(startPoint: Point, endPoint: Point, textPoint: Point = undefined) {\r\n        let sineTheta = AnnTool.getSineTheta(endPoint, startPoint);\r\n        let cosineTheta = AnnTool.getCosineTheta(endPoint, startPoint);\r\n        let ptStartA: Point;\r\n        let ptStartB: Point;\r\n        let ptEndA: Point;\r\n        let ptEndB: Point;\r\n\r\n        ptStartA = new Point(0, 0);\r\n        ptStartB = new Point(0, 0);\r\n        ptEndA = new Point(0, 0);\r\n        ptEndB = new Point(0, 0);\r\n\r\n        ptStartA.x = startPoint.x - this.rulerNode * sineTheta + 0.5;\r\n        ptStartB.x = startPoint.x + this.rulerNode * sineTheta + 0.5;\r\n\r\n        ptStartA.y = startPoint.y + this.rulerNode * cosineTheta + 0.5;\r\n        ptStartB.y = startPoint.y - this.rulerNode * cosineTheta + 0.5;\r\n\r\n        sineTheta = AnnTool.getSineTheta(startPoint, endPoint);\r\n        cosineTheta = AnnTool.getCosineTheta(startPoint, endPoint);\r\n\r\n        ptEndA.x = endPoint.x - this.rulerNode * sineTheta + 0.5;\r\n        ptEndB.x = endPoint.x + this.rulerNode * sineTheta + 0.5;\r\n\r\n        ptEndA.y = endPoint.y + this.rulerNode * cosineTheta + 0.5;\r\n        ptEndB.y = endPoint.y - this.rulerNode * cosineTheta + 0.5;\r\n\r\n        if (!this.lineNodeA) {\r\n            this.lineNodeA = new AnnBaseLine(this, ptStartA, ptStartB, this.imageViewer);\r\n            this.lineNodeA.onLevelDown(\"bottom\");\r\n        } else {\r\n            this.lineNodeA.onMoveStartPoint(ptStartA);\r\n            this.lineNodeA.onMoveEndPoint(ptStartB);\r\n        }\r\n\r\n        if (!this.lineNodeB) {\r\n            this.lineNodeB = new AnnBaseLine(this, ptEndA, ptEndB, this.imageViewer);\r\n            this.lineNodeB.onLevelDown(\"bottom\");\r\n        } else {\r\n            this.lineNodeB.onMoveStartPoint(ptEndA);\r\n            this.lineNodeB.onMoveEndPoint(ptEndB);\r\n        }\r\n\r\n        const centerPoint = AnnTool.centerPoint(startPoint, endPoint);\r\n        if (!this.annMiddlePoint) {\r\n            this.annMiddlePoint = new AnnPoint(this, this.imageViewer);\r\n            this.annMiddlePoint.onCreate(centerPoint);\r\n        } else {\r\n            this.annMiddlePoint.onMove(centerPoint);\r\n        }\r\n\r\n        const text = this.getLength(startPoint, endPoint);\r\n        if (!this.annTextIndicator) {\r\n            this.annTextIndicator = new AnnTextIndicator(this, this.imageViewer);\r\n            this.annTextIndicator.onCreate(text, this.annMiddlePoint.getPosition(), textPoint);\r\n        } else {\r\n            this.annTextIndicator.setText(text);\r\n        }\r\n    }\r\n\r\n    private getLength(startPoint, endPoint) {\r\n        let strDist;\r\n\r\n        if (this.pixelSpacing) {\r\n            const dDistance = AnnTool.countPhysicalDistance(startPoint, endPoint, this.pixelSpacing);\r\n            strDist = dDistance.toFixed(2) + \"mm\";\r\n        }\r\n        else {\r\n            const dDistance = AnnTool.countDistance(startPoint, endPoint);\r\n            strDist = dDistance.toFixed(2) + \"pt\";\r\n        }\r\n\r\n        return strDist;\r\n    }\r\n}","﻿import { Point, PositionInRectangle, MouseEventType } from '../../models/annotation';\r\nimport { AnnTool } from \"../ann-tool\";\r\nimport { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnExtendObject } from \"./ann-extend-object\";\r\nimport { AnnText } from \"./ann-text\";\r\nimport { AnnArrow } from \"./ann-arrow\";\r\nimport { AnnSerialize } from \"../ann-serialize\";\r\n\r\nexport class AnnTextIndicator extends AnnExtendObject {\r\n\r\n    private annArrow: AnnArrow;\r\n    private annText: AnnText;\r\n\r\n    constructor(parentObj: AnnExtendObject, imageViewer: IImageViewer) {\r\n        super(parentObj, imageViewer);\r\n    }     \r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Override functions of base class\r\n\r\n    // The point is the coordinate of image layer, for text, need to convert to text layer coordinate\r\n    onCreate(text: string, targetPoint: Point, arrowStartPoint: Point = undefined) {\r\n        this.onDeleteChildren();\r\n\r\n        if (!arrowStartPoint) {\r\n            const delta = 30 / this.image.getScaleValue();\r\n            arrowStartPoint = { x: targetPoint.x + delta, y: targetPoint.y - delta };\r\n        }\r\n  \r\n        this.annArrow = new AnnArrow(this, this.imageViewer);\r\n        this.annArrow.onCreate(arrowStartPoint, targetPoint);\r\n        this.annArrow.onLevelDown(\"bottom\");\r\n        this.annArrow.setMouseResponsible(false);\r\n\r\n        this.annText = new AnnText(this, this.imageViewer);\r\n        this.annText.onCreate(arrowStartPoint, text);\r\n\r\n        this.focusedObj = this.annText;\r\n        if (!this.parentObj) {\r\n            this.onDrawEnded();\r\n        }\r\n    }\r\n\r\n    onSave(annSerialize: AnnSerialize) {\r\n        annSerialize.writeString(\"CGXAnnLabel\");\r\n        annSerialize.writeInteger(1, 4);\r\n        annSerialize.writeInteger(0, 1);\r\n\r\n        this.annArrow.onSave(annSerialize, false);\r\n        this.annText.onSave(annSerialize);\r\n    }\r\n\r\n    onDrag(deltaX: number, deltaY: number) {\r\n        this.annText.onDrag(deltaX, deltaY);\r\n        this.redrawArrow();\r\n    }\r\n\r\n    onTranslate(deltaX: number, deltaY: number) {\r\n        this.annArrow.onTranslate(deltaX, deltaY);\r\n        this.redrawText();\r\n    }\r\n\r\n    onFlip(vertical: boolean) {\r\n        this.annArrow.onFlip(vertical);\r\n        this.redrawText();\r\n    }\r\n\r\n    onRotate(angle: number) {\r\n       this.redrawText();\r\n    }\r\n\r\n    onSwitchFocus() {\r\n        this.focusedObj = this.annText;\r\n        this.onChildSelected(this.annText);\r\n    }\r\n\r\n    redrawArrow() {\r\n        // Draw the arrow, keep text position unchanged.\r\n        const parentPosList = this.parentObj.getSurroundPointList();\r\n        if (parentPosList.length === 0) {\r\n            alert(this.parentObj.constructor.name +\r\n                \" did NOT implement function getSurroundPointList. For annotations contain text indicator, must implement it.\");\r\n            return;\r\n        }\r\n        const posList = this.getShortestDistancePoint(parentPosList, this.getTextPointList());\r\n\r\n        this.annArrow.onMoveStartPoint(posList[1]);\r\n        this.annArrow.onMoveEndPoint(posList[0]);\r\n    }\r\n\r\n    redrawText() {\r\n        // Draw the text, keep the arrow position unchanged\r\n\r\n        const arrowStartPoint = this.annArrow.getStartPosition();\r\n\r\n        //const parentPosList = this.parentObj.getSurroundPointList();\r\n        //const textRect = this.annText.getRect();\r\n        //const posList = [PositionInRectangle.TopLeft, PositionInRectangle.TopRight, PositionInRectangle.BottomRight, PositionInRectangle.BottomLeft];\r\n\r\n        //let i = 0;\r\n        //for (; i < 4; i ++) {\r\n        //    const textPointList = AnnTool.pointListFrom(arrowStartPoint, posList[i], textRect.width, textRect.height);\r\n        //    const arrowPointList = this.getShortestDistancePoint(parentPosList, textPointList);\r\n        //    if (AnnTool.equalPoint(arrowStartPoint, arrowPointList[1])) {\r\n        //        break;\r\n        //    }\r\n        //}\r\n\r\n        //if (i === 4) {\r\n        //    alert(\"error!\");\r\n        //    return;\r\n        //}\r\n\r\n        //const textStartPoint = arrowStartPoint;\r\n        //if (posList[i] === PositionInRectangle.TopLeft) {\r\n        //    textStartPoint.y += textRect.height;\r\n        //} else if (posList[i] === PositionInRectangle.TopRight) {\r\n        //    textStartPoint.x -= textRect.width;\r\n        //    textStartPoint.y += textRect.height;\r\n        //} else if (posList[i] === PositionInRectangle.BottomRight) {\r\n        //    textStartPoint.x -= textRect.width;\r\n        //}\r\n\r\n        this.annText.onMove(arrowStartPoint);\r\n    }\r\n\r\n    setText(text: string) {\r\n        this.annText.setText(text);\r\n        this.redrawArrow();\r\n    }\r\n\r\n\r\n    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Private functions\r\n    private getShortestDistancePoint(destPointList: Point[], textPointList: Point[]): Point[] {\r\n\r\n        const lenDest = destPointList.length;\r\n        const lenText = textPointList.length;\r\n\r\n        const retPointList = [];\r\n        retPointList.push(destPointList[0]);\r\n        retPointList.push(textPointList[0]);\r\n        let minLen = Number.MAX_VALUE;\r\n\r\n        for (let i = 0; i < lenDest; i++) {\r\n            for (let j = 0; j < lenText; j++) {\r\n                const distance = AnnTool.countDistance(destPointList[i], textPointList[j]);\r\n                if (distance < minLen) {\r\n                    minLen = distance;\r\n                    retPointList[0] = destPointList[i];\r\n                    retPointList[1] = textPointList[j];\r\n                }\r\n            }\r\n        }\r\n\r\n        return retPointList;\r\n    }\r\n\r\n    private getTextPointList(): Point[] {\r\n        return this.annText.getSurroundPointList();\r\n    }\r\n} ","﻿import { Point, Rectangle, MouseEventType } from '../../models/annotation';\r\nimport { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnExtendObject } from \"./ann-extend-object\";\r\nimport { AnnBaseRectangle } from \"../base-object/ann-base-rectangle\";\r\nimport { AnnBaseText } from \"../base-object/ann-base-text\";\r\nimport { AnnSerialize } from \"../ann-serialize\";\r\nimport { AnnPoint } from \"../extend-object/ann-point\";\r\nimport { AnnTool } from \"../ann-tool\";\r\n\r\nexport class AnnText extends AnnExtendObject {\r\n\r\n    private annBaseText: AnnBaseText;\r\n    private annRectangle: AnnBaseRectangle;\r\n    private forTextIndicator: boolean;\r\n    private annPosPoint: AnnPoint;\r\n    private annAdjustPoint: AnnPoint;\r\n    \r\n    constructor(parentObj: AnnExtendObject, imageViewer: IImageViewer) {\r\n        super(parentObj, imageViewer);\r\n    }\r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Override functions of base class\r\n\r\n    onCreate(position: Point, text: string, forTextIndicator: boolean = true) {\r\n        this.forTextIndicator = forTextIndicator;\r\n        this.annBaseText = new AnnBaseText(this, \" \" + text + \" \", position, this.imageViewer);\r\n        this.annBaseText.setFontSizeFixed(!forTextIndicator);\r\n\r\n        const rect = this.annBaseText.getRect();\r\n        this.annRectangle = new AnnBaseRectangle(this, { x: rect.x, y: rect.y }, rect.width, rect.height, this.imageViewer, true);\r\n\r\n        if (!forTextIndicator) {\r\n            const posPoint = { x: rect.x, y: rect.y + rect.height };\r\n            const posAnn = AnnTool.annLabelLayerToAnnLayer(posPoint, this.imageViewer);\r\n            this.annPosPoint = new AnnPoint(this, this.imageViewer);\r\n            this.annPosPoint.onCreate(posAnn);\r\n            this.annPosPoint.setVisible(false);\r\n            this.annPosPoint.enableShowAlways(false);\r\n\r\n            const adjustPoint = { x: rect.x + rect.width, y: rect.y + rect.height };\r\n            const adjustAnn = AnnTool.annLabelLayerToAnnLayer(adjustPoint, this.imageViewer);\r\n            this.annAdjustPoint = new AnnPoint(this, this.imageViewer);\r\n            this.annAdjustPoint.onCreate(adjustAnn);\r\n        }\r\n        \r\n        this.annBaseText.onLevelDown(\"bottom\");\r\n        this.focusedObj = this.annRectangle;\r\n    }\r\n\r\n    onLoadConfig(annSerialize: AnnSerialize) {\r\n        return annSerialize.loadTextMark();\r\n    }\r\n\r\n    onCreateFromConfig(config: any) {\r\n        this.onCreate(config.position, config.text, false);\r\n        this.annBaseText.setFontSize(config.fontSize * 2);\r\n        this.redrawByText();\r\n        this.focusedObj = this.annRectangle;\r\n    }\r\n\r\n    onSave(annSerialize: AnnSerialize) {\r\n\r\n        const fontSize = this.annBaseText.getCreateFontSize();\r\n        if (!this.forTextIndicator) {\r\n            annSerialize.writeString(this.annDefData.imageSuiteAnnName);\r\n            annSerialize.writeInteger(this.annDefData.imageSuiteAnnType, 4);     // AnnType\r\n            annSerialize.writeInteger(1, 4);     // created\r\n            annSerialize.writeInteger(0, 4);     // is active\r\n            annSerialize.writeInteger(0, 4);     // edit created\r\n            annSerialize.writeInteger(1, 4);     // state\r\n            annSerialize.writeInteger(this.selected ? 1 : 0, 1);     // selected\r\n            annSerialize.writeInteger(fontSize / 2, 4);     // font size \r\n        } \r\n\r\n        annSerialize.writeString(\"CGXAnnText\");\r\n        annSerialize.writeInteger(1, 4);\r\n        annSerialize.writeInteger(0, 4);\r\n        annSerialize.writeInteger(0, 1);\r\n\r\n        const pointList = this.annRectangle.getSurroundPointList();\r\n        annSerialize.writeIntegerPoint(pointList[2]);\r\n        annSerialize.writeIntegerPoint(pointList[0]);\r\n\r\n        annSerialize.writeString(this.annBaseText.getText().trim());\r\n        annSerialize.writeInteger(1, 4);\r\n        annSerialize.writeInteger(0, 4);\r\n        annSerialize.writeInteger(fontSize, 4);\r\n    }\r\n\r\n    onScale() {\r\n        if (this.forTextIndicator) {\r\n            super.onScale();\r\n            this.redrawByText();\r\n        } else {\r\n            this.annRectangle.onScale();\r\n            this.annPosPoint.onScale();\r\n            this.annAdjustPoint.onScale();\r\n        }\r\n    }\r\n\r\n    onFlip(vertical: boolean) {\r\n        if (this.forTextIndicator) {\r\n            super.onFlip(vertical);\r\n        } else {\r\n            this.annPosPoint.onFlip(vertical);\r\n            this.redrawByPosPoint();\r\n        }\r\n    }\r\n\r\n    onRotate(angle: number) {\r\n        if (this.forTextIndicator) {\r\n            super.onRotate(angle);\r\n        } else {\r\n            this.annPosPoint.onRotate(angle);\r\n            this.redrawByPosPoint();\r\n        }\r\n    }\r\n\r\n    onDrag(deltaX: number, deltaY: number) {\r\n        if (this.focusedObj === this.annRectangle || this.focusedObj === this.annBaseText) {\r\n            this.annBaseText.onDrag(deltaX, deltaY);\r\n            this.redrawByText();\r\n        } else if (this.focusedObj === this.annAdjustPoint) {\r\n            this.annAdjustPoint.setVisible(false);\r\n            this.annAdjustPoint.onDrag(deltaX, deltaY);\r\n            this.redrawByAdjustPoint();\r\n        }\r\n    }\r\n\r\n    onDragEnded(pos: Point) {\r\n        if (this.focusedObj === this.annAdjustPoint) {\r\n            this.annAdjustPoint.setVisible(true);\r\n            this.focusedObj = this.annRectangle;\r\n            this.redrawByText();\r\n            this.imageViewer.refresh();\r\n        }\r\n    }\r\n\r\n    onMove(point: Point) {\r\n        this.annBaseText.onMove(point);\r\n        this.redrawByText();\r\n    }\r\n\r\n    getPosition(): Point {\r\n        return this.annRectangle.getPosition();\r\n    }\r\n\r\n    getSurroundPointList(): Point[] {\r\n        return this.annRectangle.getSurroundPointList();\r\n    }\r\n\r\n    setText(text: string) {\r\n        this.annBaseText.setText(text);\r\n        this.redrawByText();\r\n    }\r\n\r\n    getRect(): Rectangle {\r\n        return this.annBaseText.getRect();\r\n    }\r\n\r\n    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Private functions\r\n    private redrawByPosPoint() {\r\n        this.annBaseText.onMove(this.annPosPoint.getPosition());\r\n        const rect = this.annBaseText.getRect();\r\n        this.annRectangle.redraw(rect);\r\n        this.annBaseText.onLevelUp();\r\n\r\n        \r\n        const adjustPoint = { x: rect.x + rect.width, y: rect.y + rect.height };\r\n        const adjustAnn = AnnTool.annLabelLayerToAnnLayer(adjustPoint, this.imageViewer);\r\n        this.annAdjustPoint.onMove(adjustAnn);\r\n    }\r\n\r\n    private redrawByText() {\r\n        const rect = this.annBaseText.getRect();\r\n        this.annRectangle.redraw(rect);\r\n\r\n        if (!this.forTextIndicator) {\r\n            const posPoint = { x: rect.x, y: rect.y + rect.height };\r\n            const posAnn = AnnTool.annLabelLayerToAnnLayer(posPoint, this.imageViewer);\r\n            this.annPosPoint.onMove(posAnn);\r\n\r\n            const adjustPoint = { x: rect.x + rect.width, y: rect.y + rect.height };\r\n            const adjustAnn = AnnTool.annLabelLayerToAnnLayer(adjustPoint, this.imageViewer);\r\n            this.annAdjustPoint.onMove(adjustAnn);\r\n        }\r\n    }\r\n\r\n    private redrawByAdjustPoint() {\r\n        const adjustPoint = this.annAdjustPoint.getPosition();\r\n        const newBottomRight = AnnTool.annLayerToAnnLabelLayer(adjustPoint, this.imageViewer);\r\n        const pos = this.annRectangle.getPosition();\r\n        const oldHeight = this.annRectangle.getHeight();\r\n        const fontSize = this.annBaseText.getCreateFontSize();\r\n\r\n        const newFontSize = fontSize * (newBottomRight.y - pos.y) / oldHeight;\r\n        if (newFontSize < 0) {\r\n            return;\r\n        }\r\n\r\n        this.annBaseText.setFontSize(newFontSize);\r\n\r\n        const rect = this.annBaseText.getRect();\r\n        this.annRectangle.redraw(rect);\r\n\r\n        const posPoint = { x: rect.x, y: rect.y + rect.height };\r\n        const posAnn = AnnTool.annLabelLayerToAnnLayer(posPoint, this.imageViewer);\r\n        this.annPosPoint.onMove(posAnn);\r\n    }\r\n}","﻿import { Point, MouseEventType } from '../../models/annotation';\r\nimport { AnnTool } from \"../ann-tool\";\r\nimport { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnBaseLine } from \"../base-object/ann-base-line\";\r\nimport { AnnExtendObject } from \"./ann-extend-object\";\r\nimport { AnnPoint } from \"./ann-point\";\r\nimport { AnnLine } from \"./ann-line\";\r\nimport { AnnSerialize } from \"../ann-serialize\";\r\n\r\nexport class AnnVerticalAxis extends AnnExtendObject {\r\n\r\n    private annBaseLine: AnnBaseLine;\r\n    private annCenterPoint: AnnPoint;\r\n\r\n    constructor(parentObj: AnnExtendObject, imageViewer: IImageViewer) {\r\n        super(parentObj, imageViewer);\r\n    }\r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Override functions of base class\r\n\r\n    onMouseEvent(mouseEventType: MouseEventType, point: Point, mouseObj: any) {\r\n\r\n        const imagePoint = AnnTool.screenToImage(point, this.image.transformMatrix);\r\n        if (mouseEventType === MouseEventType.MouseDown) {\r\n\r\n            if (this.created) {\r\n                this.onSelect(true, false);\r\n                return;\r\n            }\r\n\r\n            if (this.annBaseLine) {\r\n                this.createCenterPoint();\r\n                if (!this.parentObj) {\r\n                    this.onDrawEnded();\r\n                }\r\n            }\r\n        } else if (mouseEventType === MouseEventType.MouseMove) {\r\n            this.redraw(imagePoint);\r\n        }\r\n    }\r\n\r\n    onCreate(centerPoint: Point) {\r\n        this.onDeleteChildren();\r\n\r\n        this.redraw(centerPoint);\r\n        this.createCenterPoint();\r\n    }\r\n\r\n    onLoadConfig(annSerialize: AnnSerialize) {\r\n        return annSerialize.loadVerticalAxis();\r\n    }\r\n\r\n    onCreateFromConfig(config: any) {\r\n        const centerPoint = AnnTool.centerPoint(config.startPoint, config.endPoint);\r\n        this.onCreate(centerPoint);\r\n        this.focusedObj = this.annBaseLine;\r\n    }\r\n\r\n    onSave(annSerialize: AnnSerialize) {\r\n        this.saveBasicInfo(annSerialize);\r\n\r\n        annSerialize.writeInteger(0, 4);  //initRotateCount\r\n\r\n        this.annBaseLine.onSave(annSerialize);\r\n    }\r\n\r\n    onDrag(deltaX: number, deltaY: number) {\r\n        this.onTranslate(deltaX, 0);\r\n    }\r\n\r\n    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Private functions\r\n    private redraw(centerPoint: Point) {\r\n        const startPoint = { x: centerPoint.x, y: 0 };\r\n        const endPoint = { x: centerPoint.x, y: this.image.height() };\r\n\r\n        if (this.annBaseLine) {\r\n            this.annBaseLine.onMoveStartPoint(startPoint);\r\n            this.annBaseLine.onMoveEndPoint(endPoint);\r\n        } else {\r\n            this.annBaseLine = new AnnBaseLine(this, startPoint, endPoint, this.imageViewer);\r\n        }\r\n    }\r\n\r\n    private createCenterPoint() {\r\n        const centerPoint = AnnTool.centerPoint(this.annBaseLine.getStartPosition(), this.annBaseLine.getEndPosition());\r\n        this.annCenterPoint = new AnnPoint(this, this.imageViewer);\r\n        this.annCenterPoint.onCreate(centerPoint);\r\n    }\r\n}","﻿import { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnBaseGraphicOverlay } from \"../base-object/ann-base-graphic-overlay\";\r\nimport { GraphicOverlayData } from '../../models/overlay';\r\n\r\nexport class AnnGraphicOverlay {\r\n\r\n    private annGraphicOverlayList = new Array<AnnBaseGraphicOverlay>();\r\n    private mgLayerDrawn = false;\r\n\r\n    constructor(private graphicOverlayDataList: GraphicOverlayData[], private imageViewer: IImageViewer) {\r\n        this.graphicOverlayDataList.forEach(\r\n            graphicOverlayData => this.annGraphicOverlayList.push(\r\n                new AnnBaseGraphicOverlay(undefined, graphicOverlayData, imageViewer, imageViewer.getImageLayerId())));\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Public functions\r\n    onFlip(vertical: boolean) {\r\n        this.annGraphicOverlayList.forEach(annObj => annObj.onFlip(vertical));\r\n    }\r\n\r\n    setVisible(visible: boolean) {\r\n        this.annGraphicOverlayList.forEach(annObj => annObj.setVisible(visible));\r\n    }\r\n\r\n    onReset() {\r\n        this.annGraphicOverlayList.forEach(annObj => annObj.onReset());\r\n    }\r\n\r\n    del() {\r\n        this.annGraphicOverlayList.forEach(annObj => annObj.onDeleteChildren());\r\n    }\r\n\r\n    drawToMgLayer() {\r\n        if (!this.mgLayerDrawn) {\r\n            this.graphicOverlayDataList.forEach(\r\n                graphicOverlayData => this.annGraphicOverlayList.push(\r\n                    new AnnBaseGraphicOverlay(undefined, graphicOverlayData, this.imageViewer, this.imageViewer.getMgLayer().id)));\r\n        }\r\n\r\n        this.mgLayerDrawn = true;\r\n    }\r\n    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Private functions\r\n}","﻿import { Point, AnnGuideStepData, AnnGuideActionButton, AnnGuideData, AnnGuideStepConfig, MouseEventType } from '../../models/annotation';\r\nimport { AnnTool } from \"../ann-tool\";\r\nimport { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnExtendObject } from \"../extend-object/ann-extend-object\";\r\nimport { FontData } from '../../models/misc-data';\r\n\r\nexport class AnnGuide {\r\n\r\n    private layerId: string;\r\n    private baseUrl: string;\r\n    private font: FontData;\r\n\r\n    private backgroundColor = \"rgba(96,96,96,0.6)\";\r\n    private borderColor = \"#888\";\r\n\r\n    private totalWidth = 605;\r\n    private totalHeight = 160;\r\n    private textAreaWidth = 420;\r\n    private tutorImageWidth = 125;\r\n    private tutorImageHeight = 150;\r\n    private stepButtonWidth = 20;\r\n    private stepButtonHeight = 20;\r\n    private actionButtonHeight = 40;\r\n    private interval = 5;\r\n\r\n    private annStepDataList: Array<AnnGuideStepData> = [];\r\n    private annGuideCloseButton: AnnGuideActionButton;\r\n    private annGuideResetButton: AnnGuideActionButton;\r\n    private annGuideHideButton: AnnGuideActionButton;\r\n    private annGuideShowButton: AnnGuideActionButton;\r\n\r\n    private startX: number;\r\n    private stepIndex = 0;\r\n\r\n    private jcBackground: any;\r\n    private jcBackgroundBorder: any;\r\n    private jcTextAreaBackground: any;\r\n    private jcTutorImage: any;\r\n    private jcCurrentStep: any;\r\n    private jcAnnotationName: any;\r\n    private jcStepText: any;\r\n\r\n    private showStepList = true;\r\n    private actionButtonLoaded = false;\r\n\r\n    private annGuideTarget: AnnExtendObject;\r\n    private targetAnnName: string;\r\n\r\n    static annGuideDataList: Array<AnnGuideData> = [];\r\n\r\n    constructor(private imageViewer: IImageViewer) {\r\n        this.layerId = imageViewer.getAnnGuideLayerId();\r\n        this.baseUrl = this.imageViewer.getBaseUrl();\r\n        this.font = this.imageViewer.getTextFont();\r\n\r\n        this.annGuideCloseButton = new AnnGuideActionButton(this.baseUrl, \"close\", this.onClose);\r\n        this.annGuideResetButton = new AnnGuideActionButton(this.baseUrl, \"reset\", this.onReset);\r\n        this.annGuideHideButton = new AnnGuideActionButton(this.baseUrl, \"hide\", this.onHide);\r\n        this.annGuideShowButton = new AnnGuideActionButton(this.baseUrl, \"show\", this.onShow);\r\n\r\n        const guideLayer = this.imageViewer.getAnnGuideLayer();\r\n        guideLayer.click(arg => false);\r\n        guideLayer.dblclick(arg => false);\r\n        guideLayer.mousedown(arg => false);\r\n        guideLayer.mouseup(arg => false);\r\n        guideLayer.mousemove(arg => false);\r\n\r\n        guideLayer.mouseover((arg) => {\r\n            if (!this.isHidden()) {\r\n                this.imageViewer.setCursor(\"default\");\r\n            }\r\n            \r\n            return false;\r\n        });\r\n\r\n        guideLayer.mouseout((arg) => {\r\n            if (!this.isHidden()) {\r\n                this.imageViewer.setCursor(undefined);\r\n            }\r\n            \r\n            return false;\r\n        });\r\n    }\r\n\r\n    static createAnnGuideDataList() {\r\n        const annGuideCervicalCurve = new AnnGuideData(\"AnnCervicalCurve\");\r\n        annGuideCervicalCurve.addStepConfig(new AnnGuideStepConfig(\"CGXAnnCervicalCurve_01.png\", \"Step 1. Click to place a point on the center of the anterior tubercle of the anterior arch\"));\r\n        annGuideCervicalCurve.addStepConfig(new AnnGuideStepConfig(\"CGXAnnCervicalCurve_02.png\", \"Step 2. Click to place a point on the top center of the first thoracic vertebrae\"));\r\n        annGuideCervicalCurve.addStepConfig(new AnnGuideStepConfig(\"CGXAnnCervicalCurve_03.png\", \"Step 3. Click on either side of the line to flip the curve. Move center point to change radius of curve\",\r\n            \"Step 3. Move center point to change radius of curve\"));\r\n        this.annGuideDataList.push(annGuideCervicalCurve);\r\n\r\n        const annGuideLumbarCurve = new AnnGuideData(\"AnnLumbarCurve\");\r\n        annGuideLumbarCurve.addStepConfig(new AnnGuideStepConfig(\"CGXAnnLumbarCurve_01.png\", \"Step 1. Click to place a point on center of 12th thoracic vertebrae\"));\r\n        annGuideLumbarCurve.addStepConfig(new AnnGuideStepConfig(\"CGXAnnLumbarCurve_02.png\", \"Step 2. Click to place a point on top center of sacrum\"));\r\n        annGuideLumbarCurve.addStepConfig(new AnnGuideStepConfig(\"CGXAnnLumbarCurve_03.png\", \"Step 3. Click either side of line to flip curve.Move center point to change radius of curve\",\r\n            \"Step 3. Move center point to change radius of curve\"));\r\n        this.annGuideDataList.push(annGuideLumbarCurve);\r\n\r\n        const annCardiothoracicRatio = new AnnGuideData(\"AnnCardiothoracicRatio\");\r\n        annCardiothoracicRatio.addStepConfig(new AnnGuideStepConfig(\"CGXAnnHCRatio_01.png\", \"Step 1. Click to place a point on the highest point of the spine\"));\r\n        annCardiothoracicRatio.addStepConfig(new AnnGuideStepConfig(\"CGXAnnHCRatio_02.png\", \"Step 2. Click to place a point on the lowest point of the spine\"));\r\n        annCardiothoracicRatio.addStepConfig(new AnnGuideStepConfig(\"CGXAnnHCRatio_03.png\", \"Step 3. Click to place a point on the right side of the heart at its widest point\"));\r\n        annCardiothoracicRatio.addStepConfig(new AnnGuideStepConfig(\"CGXAnnHCRatio_04.png\", \"Step 4. Click to place a point on the left side of the heart at its widest point\"));\r\n        annCardiothoracicRatio.addStepConfig(new AnnGuideStepConfig(\"CGXAnnHCRatio_05.png\", \"Step 5. Click to place a point on the right side of the chest at its widest point\"));\r\n        annCardiothoracicRatio.addStepConfig(new AnnGuideStepConfig(\"CGXAnnHCRatio_06.png\", \"Step 6. Click to place a point on the left side of the chest at its widest point\"));\r\n        this.annGuideDataList.push(annCardiothoracicRatio);\r\n\r\n        const annGuideMarkSpot = new AnnGuideData(\"AnnMarkSpot\");\r\n        annGuideMarkSpot.addStepConfig(new AnnGuideStepConfig(\"CGXAnnMarkSpot_01.png\", \"Step 1.Click to place point(s) on the anatomy. Double Click when complete\"));\r\n        this.annGuideDataList.push(annGuideMarkSpot);\r\n    }\r\n\r\n    static findAnnGuideData(annName: string): AnnGuideData {\r\n        const result = AnnGuide.annGuideDataList.filter(guideData => guideData.annName === annName);\r\n        if (result.length === 0) {\r\n            alert(\"AnnGuide.findAnnGuideData() - Can not find guide data for annotation \" + annName + \" in the list\");\r\n            return undefined;\r\n        } else {\r\n            if (result.length > 1) {\r\n                alert(\"AnnGuide.findAnnGuideData() - There are more than one guide data for annotation \" + annName + \" in the list\");\r\n            }\r\n            return result[0];\r\n        }\r\n    }\r\n\r\n    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Public functions\r\n\r\n    // Show the guide\r\n    show(targetAnnName: string, stepIndex: number = 0) {\r\n        // show the guide layer\r\n        this.imageViewer.getAnnGuideLayer().visible(true);\r\n        \r\n        // Different annotation, need to lo\r\n        if (this.targetAnnName !== targetAnnName) {\r\n            this.targetAnnName = targetAnnName;\r\n            this.stepIndex = stepIndex;\r\n\r\n            this.delJcObj(false);\r\n            let promiseList = [];\r\n\r\n            const tutorImageAlreadyLoaded = this.createStepDataList(targetAnnName);\r\n            if (!tutorImageAlreadyLoaded) {\r\n                // The tutor images of this annotation are NOT loaded\r\n                for (let i = 0; i < this.annStepDataList.length; i++) {\r\n                    promiseList.push(this.createPromiseForStepData(i));\r\n                }\r\n            }\r\n\r\n            // Load action button images if NOT loaded\r\n            if (!this.actionButtonLoaded) {\r\n                promiseList = promiseList.concat(this.createPromiseListForActionButton(this.annGuideCloseButton));\r\n                promiseList = promiseList.concat(this.createPromiseListForActionButton(this.annGuideResetButton));\r\n                promiseList = promiseList.concat(this.createPromiseListForActionButton(this.annGuideHideButton));\r\n                promiseList = promiseList.concat(this.createPromiseListForActionButton(this.annGuideShowButton));\r\n            }\r\n            \r\n            if (promiseList.length !== 0) {\r\n                // Draw the guide UI when all necessary data are loaded from server\r\n                Promise.all(promiseList).then(arg => {\r\n                    if (!tutorImageAlreadyLoaded) {\r\n                        this.cacheTutorImage(this.targetAnnName);\r\n                    }\r\n                    this.draw();\r\n                    this.actionButtonLoaded = true;\r\n                }).catch(arg => {\r\n                    console.error(arg);\r\n                });\r\n            } else {\r\n                // All images are loaded, start to draw.\r\n                this.draw();\r\n            }\r\n            \r\n        } else {\r\n            // Same annotation\r\n            this.stepTo(stepIndex);\r\n        }\r\n    }\r\n\r\n    // Hide the guide layer.\r\n    hide() {\r\n        this.imageViewer.getAnnGuideLayer().visible(false);\r\n        // Set the target annotation object to undefined\r\n        this.annGuideTarget = undefined;\r\n    }\r\n\r\n    // Check if the guide layer is hidden\r\n    isHidden(): boolean {\r\n        return !(this.imageViewer.getAnnGuideLayer()._visible);\r\n    }\r\n\r\n    // Set the target annotation object\r\n    setGuideTargetObj(guideTarget: AnnExtendObject) {\r\n        this.annGuideTarget = guideTarget;\r\n\r\n        if (!this.actionButtonLoaded) {\r\n            return;\r\n        }\r\n\r\n        if (this.annGuideTarget && this.annGuideTarget.isCreated()) {\r\n            // If the annotation is created, need to disable the Close and Reset button\r\n            this.annGuideCloseButton.onDisabled();\r\n            this.annGuideResetButton.onDisabled();\r\n        } else {\r\n            // No target annotation or the target annotation is creating, need to enable the \r\n            // Close and Reset button in case they were disabled before.\r\n            this.annGuideCloseButton.onUp();\r\n            this.annGuideResetButton.onUp();\r\n        }\r\n    }\r\n\r\n    // Step the guide\r\n    step() {\r\n        if (this.stepIndex < this.annStepDataList.length - 1) {\r\n            this.stepTo(this.stepIndex + 1);\r\n        } else { \r\n            // If ended, hide the guide\r\n            this.imageViewer.getAnnGuideLayer().visible(false);\r\n        }\r\n    }\r\n\r\n    // Get current step index\r\n    getStepIndex(): number {\r\n        return this.stepIndex;\r\n    }\r\n\r\n    // Check if the mouse is clicked in the guide area\r\n    hitTest(point: Point): boolean {\r\n        return !this.isHidden() && this.jcBackground && AnnTool.pointInRect(point, this.jcBackground.getRect());\r\n    }\r\n\r\n    // Step to the given step index\r\n    stepTo(step: number) {\r\n        if (step < 0 || step > this.annStepDataList.length) {\r\n            alert(`Invalid step number ${step}`);\r\n            return;\r\n        }\r\n\r\n        // Step to end, close the guide\r\n        if (step === this.annStepDataList.length) {\r\n            this.onClose();\r\n            return;\r\n        }\r\n\r\n        // De-highlight the step list that previous highlighted\r\n        this.annStepDataList[this.stepIndex].jcBackgroundBorder.color(\"#FFF\");\r\n        this.annStepDataList[this.stepIndex].jcText.color(\"#FFF\");\r\n\r\n\r\n        this.stepIndex = step;\r\n\r\n        // Highlight the step\r\n        this.annStepDataList[this.stepIndex].jcBackgroundBorder.color(\"#F90\");\r\n        this.annStepDataList[this.stepIndex].jcText.color(\"#F90\");\r\n\r\n        // Update the text and image\r\n        this.jcStepText.string(this.getTipText(this.annStepDataList[this.stepIndex]));\r\n        this.jcTutorImage._img = this.annStepDataList[this.stepIndex].imageData;\r\n        this.jcCurrentStep.string((this.stepIndex + 1).toString());\r\n    }\r\n\r\n\r\n    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Private functions\r\n\r\n    // Save the tutor image\r\n    private cacheTutorImage(annName: string) {\r\n        const annGuideData = AnnGuide.findAnnGuideData(annName);\r\n        if (!annGuideData) return;\r\n\r\n        annGuideData.guideStepImageList.length = 0;\r\n        for (let i = 0; i < this.annStepDataList.length; i++) {\r\n            annGuideData.guideStepImageList.push(this.annStepDataList[i].imageData);\r\n        }\r\n    }\r\n\r\n    // Draw the guide\r\n    private draw() {\r\n        const width = this.showStepList ? this.totalWidth : this.totalWidth - this.textAreaWidth - this.interval;\r\n        this.startX = (this.imageViewer.getCanvas().width - width) / 2;\r\n        if (this.startX < 0)\r\n            this.startX = 0;\r\n\r\n        this.drawBackground();\r\n        this.drawTutorImage();\r\n        if (this.showStepList) {\r\n            this.drawStepList();\r\n        }\r\n        \r\n        this.drawActionButton();\r\n        this.imageViewer.refresh();\r\n    }\r\n\r\n    // Create promise for loading the image of step button\r\n    private createPromiseForStepData(index: number): any {\r\n        const promise = new Promise((resolve, reject) => {\r\n            this.annStepDataList[index].imageData.onload = ev => {\r\n                resolve();\r\n            };\r\n\r\n            this.annStepDataList[index].imageData.onerror = ev => {\r\n                reject(ev);\r\n            };\r\n\r\n            this.annStepDataList[index].loadImage();\r\n        });\r\n\r\n        return promise;\r\n    }\r\n\r\n    // Create promise list for loading the image of action button\r\n    private createPromiseListForActionButton(annGuideActionButton: AnnGuideActionButton): any {\r\n        const promiseList = [];\r\n        annGuideActionButton.imageDataList.forEach(imageData => {\r\n            const promise = new Promise((resolve, reject) => {\r\n                imageData.onload = ev => {\r\n                    resolve();\r\n                };\r\n\r\n                imageData.onerror = ev => {\r\n                    reject(ev);\r\n                };\r\n\r\n                annGuideActionButton.loadImage();\r\n            });\r\n\r\n            promiseList.push(promise);\r\n        });\r\n\r\n        return promiseList;\r\n    }\r\n\r\n    // Draw the background of guide\r\n    private drawBackground() {\r\n        if (this.showStepList) {\r\n            this.jcBackgroundBorder = jCanvaScript.rect(this.startX, this.interval, this.totalWidth, this.totalHeight, this.borderColor).layer(this.layerId);\r\n            this.jcTextAreaBackground = jCanvaScript.rect(this.startX + this.tutorImageWidth + this.interval * 2, this.interval * 2, this.textAreaWidth, this.totalHeight - this.interval * 2, \"#FFF\").layer(this.layerId);\r\n            this.jcBackground = jCanvaScript.rect(this.startX, this.interval, this.totalWidth, this.totalHeight, this.backgroundColor, true).layer(this.layerId);\r\n        } else {\r\n            this.jcBackgroundBorder = jCanvaScript.rect(this.startX, this.interval, this.totalWidth - this.textAreaWidth - this.interval, this.totalHeight, this.borderColor).layer(this.layerId);\r\n            this.jcBackground = jCanvaScript.rect(this.startX, this.interval, this.totalWidth - this.textAreaWidth - this.interval, this.totalHeight, this.backgroundColor, true).layer(this.layerId);\r\n        }\r\n    }\r\n\r\n    // Draw tutor image\r\n    private drawTutorImage() {\r\n        // The size of the pictures is always same : 125*150\r\n        this.jcTutorImage = jCanvaScript.image(this.annStepDataList[this.stepIndex].imageData, this.startX + this.interval, this.interval * 2).layer(this.layerId);\r\n    }\r\n\r\n    // Step the step button list\r\n    private drawStepList() {\r\n        const count = this.annStepDataList.length;\r\n        const totalWidth = this.stepButtonWidth * count + this.interval * (count - 1);\r\n        const center = this.startX + this.tutorImageWidth + this.interval * 2 + this.textAreaWidth / 2;\r\n        const start = center - totalWidth / 2;\r\n\r\n        for (let i = 0; i < count; i++) {\r\n            this.annStepDataList[i].jcBackground = jCanvaScript.rect(start + i * (this.stepButtonWidth + this.interval), this.interval * 4, this.stepButtonWidth, this.stepButtonHeight, \"#111\", true).layer(this.layerId);\r\n            this.annStepDataList[i].jcText = jCanvaScript.text((i + 1).toString(), start + this.stepButtonWidth / 2 + i * (this.stepButtonWidth + this.interval), this.interval * 7)\r\n                .color(this.font.color).font(this.font.getCanvasFontString()).align(\"center\").layer(this.layerId);\r\n            this.annStepDataList[i].jcBackgroundBorder = jCanvaScript.rect(start + i * (this.stepButtonWidth + this.interval), this.interval * 4, this.stepButtonWidth, this.stepButtonHeight, \"#FFF\").layer(this.layerId);\r\n\r\n            this.setStepButtonEvent(this.annStepDataList[i]);\r\n        }\r\n\r\n        this.jcAnnotationName = jCanvaScript.text(this.targetAnnName, center, this.interval * 12).color(\"#F90\").font(this.font.getCanvasFontString()).align(\"center\").layer(this.layerId);\r\n        this.jcStepText = jCanvaScript.text(this.getTipText(this.annStepDataList[this.stepIndex]), this.startX + this.tutorImageWidth + this.interval * 4, this.interval * 15, this.textAreaWidth - this.interval * 2)\r\n            .color(this.font.color).font(this.font.getCanvasFontString()).align(\"left\").layer(this.layerId);\r\n\r\n        this.annStepDataList[this.stepIndex].jcBackgroundBorder.color(\"#F90\");\r\n        this.annStepDataList[this.stepIndex].jcText.color(\"#F90\");\r\n    }\r\n\r\n    // Draw the action button\r\n    private drawActionButton() {\r\n        const startX = this.startX + this.tutorImageWidth + this.interval * 3 + (this.showStepList ? this.textAreaWidth : -this.interval);\r\n        const startY = this.interval * 2;\r\n\r\n        this.annGuideCloseButton.jcImage = jCanvaScript.image(this.getActionButtonImage(this.annGuideCloseButton),\r\n            startX, startY).layer(this.layerId);\r\n        this.annGuideResetButton.jcImage = jCanvaScript.image(this.getActionButtonImage(this.annGuideResetButton),\r\n            startX, startY + this.actionButtonHeight + this.interval).layer(this.layerId);\r\n        this.setActionButtonEvent(this.annGuideCloseButton);\r\n        this.setActionButtonEvent(this.annGuideResetButton);\r\n\r\n        if (this.showStepList) {\r\n            this.annGuideHideButton.jcImage = jCanvaScript.image(this.annGuideHideButton.getUpImage(),\r\n                startX, startY + (this.actionButtonHeight + this.interval) * 2).layer(this.layerId);\r\n            this.setActionButtonEvent(this.annGuideHideButton);\r\n        } else {\r\n            this.annGuideShowButton.jcImage = jCanvaScript.image(this.annGuideShowButton.getUpImage(),\r\n                startX, startY + (this.actionButtonHeight + this.interval) * 2).layer(this.layerId);\r\n            this.setActionButtonEvent(this.annGuideShowButton);\r\n        }\r\n        \r\n        this.jcCurrentStep = jCanvaScript.text((this.stepIndex + 1).toString(), startX + this.actionButtonHeight / 2, this.totalHeight - this.interval)\r\n            .color(this.font.color).font(this.font.getCanvasFontString()).align(\"center\").layer(this.layerId);\r\n    }\r\n\r\n    // Set step button mouse event\r\n    private setStepButtonEvent(annGuideStepData: AnnGuideStepData) {\r\n        annGuideStepData.jcBackgroundBorder._onmouseover = arg => {\r\n            annGuideStepData.jcBackgroundBorder.color(\"#F90\");\r\n            this.imageViewer.setCursor(\"pointer\");\r\n\r\n            this.jcStepText.string(this.getTipText(annGuideStepData));\r\n            this.jcTutorImage._img = annGuideStepData.imageData;\r\n\r\n            if (this.isTargetAnnCreated()) {\r\n                this.imageViewer.selectChildByStepIndex(annGuideStepData.stepIndex);\r\n            }\r\n        };\r\n\r\n        annGuideStepData.jcBackgroundBorder._onmouseout = arg => {\r\n            if (annGuideStepData !== this.annStepDataList[this.stepIndex]) {\r\n                annGuideStepData.jcBackgroundBorder.color(\"#FFF\");\r\n            }\r\n\r\n            this.imageViewer.setCursor(\"default\");\r\n            this.jcStepText.string(this.getTipText(this.annStepDataList[this.stepIndex]));\r\n            this.jcTutorImage._img = this.annStepDataList[this.stepIndex].imageData;\r\n        };\r\n    }\r\n\r\n    // Set action button mouse event\r\n    private setActionButtonEvent(annGuideButton: AnnGuideActionButton) {\r\n        annGuideButton.jcImage._onmouseover = arg => {\r\n            if (this.ignoreMouseEvent(annGuideButton)) return;\r\n            \r\n            annGuideButton.onHover();\r\n            this.imageViewer.setCursor(\"pointer\");\r\n        };\r\n\r\n        annGuideButton.jcImage._onmouseout = arg => {\r\n            if (this.ignoreMouseEvent(annGuideButton)) return;\r\n\r\n            annGuideButton.onUp();\r\n            this.imageViewer.setCursor(\"default\");\r\n        };\r\n\r\n        annGuideButton.jcImage._onmousedown = arg => {\r\n            if (this.ignoreMouseEvent(annGuideButton)) return false;\r\n\r\n            annGuideButton.onSelect();\r\n            if (annGuideButton.onButtonClick) {\r\n                annGuideButton.onButtonClick.call(this);\r\n            }\r\n            return false;\r\n        };\r\n\r\n        annGuideButton.jcImage._onmouseup = arg => {\r\n            if (this.ignoreMouseEvent(annGuideButton)) return false;\r\n\r\n            annGuideButton.onUp();\r\n            return false;\r\n        };\r\n    }\r\n\r\n    // Check if need to ignore the mouse event\r\n    private ignoreMouseEvent(annGuideButton: AnnGuideActionButton): boolean {\r\n        return this.isHidden() || annGuideButton.isDisabled();\r\n    }\r\n\r\n    // Delete all jc object\r\n    private delJcObj(onlyStepObj: boolean) {\r\n\r\n        if (!onlyStepObj) {\r\n            if (this.jcBackground) this.jcBackground.del();\r\n            if (this.jcBackgroundBorder) this.jcBackgroundBorder.del();\r\n            if (this.jcTextAreaBackground) this.jcTextAreaBackground.del();\r\n            this.annGuideCloseButton.del();\r\n            this.annGuideResetButton.del();\r\n            this.annGuideHideButton.del();\r\n            this.annGuideShowButton.del();\r\n        }\r\n\r\n        if (this.jcTutorImage) this.jcTutorImage.del();\r\n        if (this.jcCurrentStep) this.jcCurrentStep.del();\r\n        if (this.jcAnnotationName) this.jcAnnotationName.del();\r\n        if (this.jcStepText) this.jcStepText.del();\r\n        this.annStepDataList.forEach(stepObj => stepObj.del());\r\n    }\r\n\r\n    // Close the guide\r\n    private onClose() {\r\n        this.imageViewer.getAnnGuideLayer().visible(false);\r\n        this.imageViewer.cancelCreate(false);\r\n    }\r\n\r\n    // Reset the guide\r\n    private onReset() {\r\n        this.stepTo(0);\r\n        this.imageViewer.cancelCreate(true);\r\n    }\r\n\r\n    // Hide the step list\r\n    private onHide() {\r\n        this.delJcObj(false);\r\n        this.showStepList = false;\r\n        this.draw();\r\n        this.imageViewer.setCursor(undefined);\r\n    }\r\n\r\n    // Show the step list\r\n    private onShow() {\r\n        this.delJcObj(false);\r\n        this.showStepList = true;\r\n        this.draw();\r\n        this.imageViewer.setCursor(\"default\");\r\n    }\r\n\r\n    // Create the step button list for the annotation\r\n    private createStepDataList(annName: string): boolean {\r\n        const annGuideData = AnnGuide.findAnnGuideData(annName);\r\n        if (!annGuideData) return false;\r\n\r\n        this.annStepDataList.length = 0;\r\n        const stepConfigList = annGuideData.guideStepConfigList;\r\n        for (let i = 0; i < stepConfigList.length; i ++) {\r\n            this.annStepDataList.push(new AnnGuideStepData(i, this.baseUrl, stepConfigList[i]));\r\n        }\r\n\r\n        const stepImageList = annGuideData.guideStepImageList;\r\n        if (stepImageList.length === stepConfigList.length) {\r\n            // The images were already loaded before\r\n            for (let i = 0; i < stepImageList.length; i++) {\r\n                this.annStepDataList[i].imageData = stepImageList[i];\r\n            }\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    // If the target annotation is created or NOT\r\n    private isTargetAnnCreated(): boolean {\r\n        return this.annGuideTarget ? this.annGuideTarget.isCreated() : false;\r\n    }\r\n\r\n    // Get the tip text. The tip text for creating and viewing might be different\r\n    private getTipText(annGuideStepData: AnnGuideStepData): string {\r\n        const annCreated = this.isTargetAnnCreated();\r\n        return annGuideStepData.getTipText(annCreated);\r\n    }\r\n\r\n    // Get the action button image based on current target annotation. If created, the Close/Reset button should be disabled\r\n    private getActionButtonImage(annGuideActionButton: AnnGuideActionButton): any {\r\n        const annCreated = this.isTargetAnnCreated();\r\n        return annCreated ? annGuideActionButton.getDisabledImage() : annGuideActionButton.getUpImage();\r\n    }\r\n}\r\n","﻿import { Point, AnnGuideStepData, AnnGuideActionButton, AnnGuideData, AnnGuideStepConfig, MouseEventType } from '../../models/annotation';\r\nimport { AnnTool } from \"../ann-tool\";\r\nimport { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnExtendObject } from \"../extend-object/ann-extend-object\";\r\nimport { FontData } from '../../models/misc-data';\r\n\r\nexport class AnnImageRuler {\r\n    private layerId: string;\r\n    private baseUrl: string;\r\n    private font: FontData;\r\n\r\n    private textColor = \"#FFF\";\r\n    private textFontSize = 17;\r\n\r\n    private FONTOFFSET = 5;\r\n    private LINEOFFSET = 1;\r\n    private RULERLINEWIDTH = 2;\r\n    private RULERCELLPERCENT = 0.33;\r\n    private RULERCELLSPACING = 5;\r\n    private RULERUNITLENGTH = 5;\r\n    private TEXTRULERSPACING = 5;\r\n\r\n    private linesVertical = [];\r\n    private linesHorizontal = [];\r\n\r\n    private baseLineH: any;\r\n    private baseLineV: any;\r\n    private lblHorizontal: any;\r\n    private lblVertical: any;\r\n\r\n    constructor(private imageViewer: IImageViewer) {\r\n        \r\n    }\r\n\r\n    reDraw(imageViewer) {\r\n        this.layerId = imageViewer.getAnnImageRulerLayerId();\r\n        this.baseUrl = this.imageViewer.getBaseUrl();\r\n        this.font = this.imageViewer.getTextFont();\r\n\r\n        let image = imageViewer.getImage();\r\n        let canvas = imageViewer.getCanvas();\r\n\r\n        let fontHeight = this.textFontSize;\r\n        let font = \"{0}px {1}\".format(this.textFontSize, this.font);\r\n\r\n        let pixelSpacing = image.getPixelSpacing();\r\n\r\n        let lineUnit = '';\r\n        let squareUnit = '';\r\n\r\n        let unitPerPixelX, unitPerPixelY;\r\n        let curScale = image.getScaleValue();\r\n\r\n        // If pixel spacing is undefined, use 'pt'.\r\n        if (!pixelSpacing) {\r\n            lineUnit = squareUnit = 'pt';\r\n\r\n            unitPerPixelX = 1 / curScale;\r\n            unitPerPixelY = 1 / curScale;\r\n        }\r\n        else {\r\n            lineUnit = 'cm';\r\n            squareUnit = 'cm2';\r\n\r\n            unitPerPixelX = pixelSpacing.cx / curScale / 10;\r\n            unitPerPixelY = pixelSpacing.cy / curScale / 10;\r\n        }\r\n\r\n        let canvasWidth = canvas.width;\r\n        let canvasHeight = canvas.height;\r\n\r\n        let strRulerInfo = '';\r\n\r\n        this.reset(imageViewer);\r\n\r\n        // horizontal ruler\r\n        {\r\n            let unitsToDraw = Math.round(unitPerPixelX * this.RULERCELLPERCENT * canvasWidth);\r\n\r\n            if (unitsToDraw == 0) {\r\n                unitsToDraw = 1;\r\n            }\r\n\r\n            strRulerInfo = unitsToDraw + lineUnit;\r\n\r\n            let hRulerStartX = Math.round((canvasWidth - unitsToDraw / unitPerPixelX) / 2);\r\n\r\n            if (!pixelSpacing) {\r\n                let lineStart = Math.round(hRulerStartX);\r\n                let lineStop = Math.round(hRulerStartX + unitsToDraw / unitPerPixelX);\r\n\r\n                let line = jCanvaScript.line([\r\n                    [lineStart + this.LINEOFFSET, canvasHeight - this.RULERCELLSPACING - this.RULERUNITLENGTH + this.LINEOFFSET],\r\n                    [lineStart + this.LINEOFFSET, canvasHeight - this.RULERCELLSPACING + this.LINEOFFSET]\r\n                ]).layer(this.layerId).color(this.textColor);\r\n                this.linesHorizontal.push(line);\r\n\r\n                let pt1 = [lineStart + this.LINEOFFSET, canvasHeight - this.RULERCELLSPACING + this.LINEOFFSET];\r\n                let pt2 = [lineStop + this.LINEOFFSET, canvasHeight - this.RULERCELLSPACING + this.LINEOFFSET];\r\n\r\n                if (!this.baseLineH) {\r\n                    this.baseLineH = jCanvaScript.line([pt1, pt2]).layer(this.layerId).color(this.textColor);\r\n                } else {\r\n                    this.baseLineH.points([pt1, pt2]);\r\n                }\r\n\r\n                line = jCanvaScript.line([\r\n                    [lineStop + this.LINEOFFSET, canvasHeight - this.RULERCELLSPACING + this.LINEOFFSET],\r\n                    [lineStop + this.LINEOFFSET, canvasHeight - this.RULERCELLSPACING - this.RULERUNITLENGTH + this.LINEOFFSET]\r\n                ]).layer(this.layerId).color(this.textColor);\r\n                this.linesHorizontal.push(line);\r\n            }\r\n            else {\r\n                let unitStart;\r\n\r\n                for (let i = 0; i < unitsToDraw; i++) {\r\n                    unitStart = Math.round(hRulerStartX + i / unitPerPixelX);\r\n\r\n                    let line = jCanvaScript.line([\r\n                        [unitStart + this.LINEOFFSET, canvasHeight - this.RULERCELLSPACING - this.RULERUNITLENGTH + this.LINEOFFSET],\r\n                        [unitStart + this.LINEOFFSET, canvasHeight - this.RULERCELLSPACING + this.LINEOFFSET]\r\n                    ]).layer(this.layerId).color(this.textColor);\r\n                    this.linesHorizontal.push(line);\r\n\r\n                    line = jCanvaScript.line([\r\n                        [unitStart + this.LINEOFFSET, canvasHeight - this.RULERCELLSPACING + this.LINEOFFSET],\r\n                        [Math.round(unitStart + this.LINEOFFSET + 1 / unitPerPixelX), canvasHeight - this.RULERCELLSPACING + this.LINEOFFSET]\r\n                    ]).layer(this.layerId).color(this.textColor);\r\n                    this.linesHorizontal.push(line);\r\n                }\r\n\r\n                let pt1 = [Math.round(unitStart + this.LINEOFFSET + 1 / unitPerPixelX), canvasHeight - this.RULERCELLSPACING + this.LINEOFFSET];\r\n                let pt2 = [Math.round(hRulerStartX + unitsToDraw / unitPerPixelX + this.LINEOFFSET), canvasHeight - this.RULERCELLSPACING - this.RULERUNITLENGTH + this.LINEOFFSET];\r\n                if (!this.baseLineH) {\r\n                    this.baseLineH = jCanvaScript.line([pt1, pt2]).layer(this.layerId).color(this.textColor);\r\n                } else {\r\n                    this.baseLineH.points([pt1, pt2]);\r\n                }\r\n            }\r\n\r\n            let ptTextX = Math.round(hRulerStartX + unitsToDraw / unitPerPixelX + this.FONTOFFSET);\r\n            let ptTextY = canvasHeight - this.RULERCELLSPACING;\r\n\r\n            if (!this.lblHorizontal) {\r\n                this.lblHorizontal = jCanvaScript.text(strRulerInfo, ptTextX, ptTextY).layer(this.layerId).color(this.textColor).font(font).align('left');\r\n            } else {\r\n                this.lblHorizontal._x = ptTextX;\r\n                this.lblHorizontal._y = ptTextY;\r\n                this.lblHorizontal.string(strRulerInfo);\r\n            }\r\n        }\r\n\r\n        // vertical ruler\r\n        {\r\n            let iUnitsToDraw = Math.round(unitPerPixelY * this.RULERCELLPERCENT * canvasHeight);\r\n            if (iUnitsToDraw == 0) {\r\n                iUnitsToDraw = 1;\r\n            }\r\n\r\n            strRulerInfo = iUnitsToDraw + lineUnit;\r\n\r\n            let iRulerStartY = Math.round((canvasHeight - iUnitsToDraw / unitPerPixelY) / 2);\r\n            if (!pixelSpacing) {\r\n                let iLineStart = Math.round(iRulerStartY);\r\n                let iLineStop = Math.round(iRulerStartY + iUnitsToDraw / unitPerPixelY);\r\n\r\n                let line = jc.line([\r\n                    [canvasWidth - this.TEXTRULERSPACING - this.RULERUNITLENGTH + this.LINEOFFSET, iLineStart + this.LINEOFFSET],\r\n                    [canvasWidth - this.TEXTRULERSPACING + this.LINEOFFSET, iLineStart + this.LINEOFFSET]\r\n                ]).layer(this.layerId).color(this.textColor);\r\n                this.linesVertical.push(line);\r\n\r\n                let pt1 = [canvasWidth - this.TEXTRULERSPACING + this.LINEOFFSET, iLineStart + this.LINEOFFSET];\r\n                let pt2 = [canvasWidth - this.TEXTRULERSPACING + this.LINEOFFSET, iLineStop + this.LINEOFFSET];\r\n\r\n                if (!this.baseLineV) {\r\n                    this.baseLineV = jc.line([pt1, pt2]).layer(this.layerId).color(this.textColor);\r\n                } else {\r\n                    this.baseLineV.points([pt1, pt2]);\r\n                }\r\n\r\n                line = jc.line([\r\n                    [canvasWidth - this.TEXTRULERSPACING + this.LINEOFFSET, iLineStop + this.LINEOFFSET],\r\n                    [canvasWidth - this.TEXTRULERSPACING - this.RULERUNITLENGTH + this.LINEOFFSET, iLineStop + this.LINEOFFSET]\r\n                ]).layer(this.layerId).color(this.textColor);\r\n                this.linesVertical.push(line);\r\n            }\r\n            else {\r\n                let iUnitStart;\r\n                for (let i = 0; i < iUnitsToDraw; i++) {\r\n                    iUnitStart = Math.round(iRulerStartY + i / unitPerPixelY);\r\n\r\n                    let line = jc.line([\r\n                        [canvasWidth - this.TEXTRULERSPACING - this.RULERUNITLENGTH + this.LINEOFFSET, iUnitStart + this.LINEOFFSET],\r\n                        [canvasWidth - this.TEXTRULERSPACING + this.LINEOFFSET, iUnitStart + this.LINEOFFSET]\r\n                    ]).layer(this.layerId).color(this.textColor);\r\n                    this.linesVertical.push(line);\r\n\r\n                    line = jc.line([\r\n                        [canvasWidth - this.TEXTRULERSPACING + this.LINEOFFSET, iUnitStart + this.LINEOFFSET],\r\n                        [canvasWidth - this.TEXTRULERSPACING + this.LINEOFFSET, Math.round(iUnitStart + this.LINEOFFSET + 1 / unitPerPixelY)]\r\n                    ]).layer(this.layerId).color(this.textColor);\r\n                    this.linesVertical.push(line);\r\n                }\r\n\r\n                let pt1 = [canvasWidth - this.TEXTRULERSPACING + this.LINEOFFSET, Math.round(iUnitStart + this.LINEOFFSET + 1 / unitPerPixelY)];\r\n                let pt2 = [canvasWidth - this.TEXTRULERSPACING - this.RULERUNITLENGTH + this.LINEOFFSET, Math.round(iRulerStartY + iUnitsToDraw / unitPerPixelY + this.LINEOFFSET)];\r\n                if (!this.baseLineV) {\r\n                    this.baseLineV = jc.line([pt1, pt2]).layer(this.layerId).color(this.textColor);\r\n                } else {\r\n                    this.baseLineV.points([pt1, pt2]);\r\n                }\r\n            }\r\n\r\n            let ptTextX = canvasWidth - this.RULERCELLSPACING - strRulerInfo.length * fontHeight / 2;\r\n            let ptTextY = Math.round(iRulerStartY + iUnitsToDraw / unitPerPixelY + 2 * this.FONTOFFSET + this.TEXTRULERSPACING);\r\n\r\n            if (!this.lblVertical) {\r\n                this.lblVertical = jc.text(strRulerInfo, ptTextX, ptTextY).layer(this.layerId).color(this.textColor).font(font).align('left');\r\n            } else {\r\n                this.lblVertical._x = ptTextX;\r\n                this.lblVertical._y = ptTextY;\r\n                this.lblVertical.string(strRulerInfo);\r\n            }\r\n        }\r\n    }\r\n\r\n    reset(imageViewer) {\r\n        let annImageRuler = imageViewer.annImageRuler;\r\n\r\n        if (!annImageRuler)\r\n            return;\r\n\r\n        if (annImageRuler.lblHorizontal) {\r\n            annImageRuler.lblHorizontal.del();\r\n            annImageRuler.lblHorizontal = undefined;\r\n        }\r\n        if (annImageRuler.lblVertical) {\r\n            annImageRuler.lblVertical.del();\r\n            annImageRuler.lblVertical = undefined;\r\n        }\r\n\r\n        if (annImageRuler.baseLineH) {\r\n            annImageRuler.baseLineH.del();\r\n            annImageRuler.baseLineH = undefined;\r\n        }\r\n        if (annImageRuler.baseLineV) {\r\n            annImageRuler.baseLineV.del();\r\n            annImageRuler.baseLineV = undefined;\r\n        }\r\n\r\n        if (annImageRuler.linesVertical) {\r\n            annImageRuler.linesVertical.forEach(line => line.del());\r\n            annImageRuler.linesVertical = [];\r\n        }\r\n\r\n        if (annImageRuler.linesHorizontal) {\r\n            annImageRuler.linesHorizontal.forEach(line => line.del());\r\n            annImageRuler.linesHorizontal = [];\r\n        }\r\n    }\r\n}","﻿import { Point } from '../../models/annotation';\r\nimport { AnnTool } from \"../ann-tool\";\r\nimport { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { FontData } from \"../../models/misc-data\";\r\n\r\nexport class AnnMagnify {\r\n\r\n    private imageLayer: any;\r\n    private mgLayer: any;\r\n    private canvas: any;\r\n    private font: FontData;\r\n\r\n    private jcRect: any;\r\n    private jcImage: any;\r\n    private jcText: any;\r\n\r\n    private halfWidth = 80;\r\n    private started = false;\r\n    private textOverlayId: string;\r\n    \r\n    constructor(private imageViewer: IImageViewer) {\r\n        this.imageLayer = this.imageViewer.getImageLayer();\r\n        this.mgLayer = this.imageViewer.getMgLayer();\r\n        this.canvas = this.imageViewer.getCtCanvas();\r\n        this.font = this.imageViewer.getTextFont();\r\n        this.textOverlayId = this.imageViewer.getTextOverlayLayerId();\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Public functions\r\n    start(screenPoint: Point, scale: number) {\r\n        this.mgLayer.transform(1, 0, 0, 1, 0, 0, true);\r\n        this.mgLayer.optns.scaleMatrix = this.imageLayer.optns.scaleMatrix;\r\n        this.mgLayer.optns.rotateMatrix = this.imageLayer.optns.rotateMatrix;\r\n        this.mgLayer.optns.translateMatrix = this.imageLayer.optns.translateMatrix;\r\n        this.mgLayer.scale(scale);\r\n        this.mgLayer.visible(true);\r\n\r\n        if (!this.jcImage) {\r\n            this.jcImage = jCanvaScript.image(this.canvas).layer(this.mgLayer.id);\r\n        }\r\n        \r\n        if (!this.jcRect) {\r\n            const rectPos = this.getRectPos(screenPoint);\r\n            this.jcRect = jCanvaScript.rect(rectPos.x, rectPos.y, this.halfWidth * 2, this.halfWidth * 2, \"rgba(127,255,0)\").layer(this.textOverlayId);\r\n        } else {\r\n            this.jcRect.visible(true);\r\n        }\r\n\r\n        if (!this.jcText) {\r\n            const textPos = this.getTextPos(screenPoint);\r\n            this.jcText = jCanvaScript.text(`${scale}`, textPos.x, textPos.y).layer(this.imageViewer.getTextOverlayLayerId()).color(\"rgba(127,255,0)\").font(this.textOverlayId).align(\"left\");\r\n        } else {\r\n            this.jcText.visible(true);\r\n            this.jcText.string(`${scale}`);\r\n        }\r\n         \r\n        this.started = true;\r\n        this.moveTo(screenPoint);\r\n    }\r\n\r\n    moveTo(screenPoint: Point) {\r\n        if (!this.started) {\r\n            return;\r\n        }\r\n\r\n        const rectPos = this.getRectPos(screenPoint);\r\n        this.jcRect._x = rectPos.x;\r\n        this.jcRect._y = rectPos.y;\r\n\r\n        const textPos = this.getTextPos(screenPoint);\r\n        this.jcText._x = textPos.x;\r\n        this.jcText._y = textPos.y;\r\n\r\n        // Convert screen point to image point\r\n        const imagePoint = AnnTool.screenToImage(screenPoint, this.imageLayer.transform());\r\n        const screenAfter = AnnTool.imageToScreen(imagePoint, this.mgLayer.transform());\r\n\r\n        // Move mg layer\r\n        this.mgLayer.translate(screenPoint.x - screenAfter.x, screenPoint.y - screenAfter.y);\r\n\r\n        // Clip the layer to only show the image under rectangle\r\n        this.mgLayer.clip(this.jcRect);\r\n    }\r\n\r\n    end() {\r\n        this.mgLayer.visible(false);\r\n\r\n        if (this.jcRect) {\r\n            this.jcRect.visible(false);\r\n        }\r\n\r\n        if (this.jcText) {\r\n            this.jcText.visible(false);\r\n        }\r\n\r\n        this.started = false;\r\n    }\r\n\r\n    isStarted(): boolean {\r\n        return this.started;\r\n    }\r\n\r\n    del() {\r\n        if (this.jcImage) {\r\n            this.jcImage.del();\r\n        }\r\n\r\n        if (this.jcRect) {\r\n            this.jcRect.del();\r\n        }\r\n\r\n        if (this.jcText) {\r\n            this.jcText.del();\r\n        }\r\n    }\r\n\r\n    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Private functions\r\n    getRectPos(screenPoint: Point): Point {\r\n        return { x: screenPoint.x - this.halfWidth, y: screenPoint.y - this.halfWidth };\r\n    }\r\n\r\n    getTextPos(screenPoint: Point): Point {\r\n        return { x: screenPoint.x - this.halfWidth + 2, y: screenPoint.y + this.halfWidth - 2 };\r\n    }\r\n}","﻿import { IImageViewer } from \"../../interfaces/image-viewer-interface\";\r\nimport { AnnBaseText } from \"../base-object/ann-base-text\";\r\nimport { TextOverlayData, TextOverlayDisplayGroup, TextOverlayDisplayItem } from \"../../models/overlay\";\r\nimport { DicomImageService } from \"../../services/dicom-image.service\";\r\nimport { Image } from \"../../models/pssi\";\r\nimport { FontData } from \"../../models/misc-data\";\r\n\r\nexport class AnnTextOverlay {\r\n\r\n    private jcTextOverlayList = [];\r\n    private textOverlayDataList = [];\r\n    private layerId: string;\r\n    private canvas: any;\r\n    private image: Image;\r\n    private windowCenterIndex: number;\r\n    private zoomRatioIndex: number;\r\n    private font: FontData;\r\n\r\n    constructor(private imageViewer: IImageViewer, private dicomImageService: DicomImageService) {\r\n        this.canvas = this.imageViewer.getCanvas();\r\n        this.image = this.imageViewer.getImage();\r\n        this.layerId = this.imageViewer.getTextOverlayLayerId();\r\n        this.font = this.imageViewer.getTextFont();\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Public functions\r\n    updateWindowCenter(width: number, center: number) {\r\n        if (this.windowCenterIndex !== -1) {\r\n            const text = this.textOverlayDataList[this.windowCenterIndex].text.format(width, center);\r\n            this.jcTextOverlayList[this.windowCenterIndex].string(text);\r\n        }\r\n    }\r\n\r\n    updateZoomRatioTextOverlay(roomRatio: number) {\r\n        if (this.zoomRatioIndex !== -1) {\r\n            const text = this.textOverlayDataList[this.zoomRatioIndex].text.format(roomRatio.toFixed(2));\r\n            this.jcTextOverlayList[this.zoomRatioIndex].string(text);\r\n        }\r\n    }\r\n\r\n    redraw() {\r\n        this.del();\r\n        this.windowCenterIndex = -1;\r\n        this.zoomRatioIndex = -1;\r\n\r\n        if (this.canvas.width) {\r\n            if (this.canvas.width >= 800) {\r\n                this.font.size = 15;\r\n            } else if (this.canvas.width < 300) {\r\n                this.font.size = 10;\r\n            } else {\r\n                this.font.size = 10 + Math.floor((this.canvas.width - 300) / 100);\r\n            }\r\n        }\r\n\r\n        this.textOverlayDataList = this.dicomImageService.getOverlayDisplayList(this.image, this.canvas, this.font);\r\n        this.textOverlayDataList.forEach((overlay, index) => {\r\n            const label = jCanvaScript.text(overlay.text, overlay.posX, overlay.posY).layer(this.layerId)\r\n                .color(this.font.color).font(this.font.getCanvasFontString()).align(overlay.align);\r\n\r\n            this.jcTextOverlayList.push(label);\r\n\r\n            if (overlay.id === \"9003\") {\r\n                this.windowCenterIndex = index;\r\n                this.updateWindowCenter(this.image.cornerStoneImage.windowWidth, this.image.cornerStoneImage.windowCenter);\r\n            } else if (overlay.id === \"9004\") {\r\n                this.zoomRatioIndex = index;\r\n                this.updateZoomRatioTextOverlay(this.image.getScaleValue());\r\n            }\r\n        });\r\n    }\r\n\r\n    del() {\r\n        this.jcTextOverlayList.forEach(jcText => jcText.del());\r\n        this.jcTextOverlayList.length = 0;\r\n    }\r\n\r\n    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Private functions\r\n    \r\n}","import { NgModule } from \"@angular/core\";\r\nimport { RouterModule, Routes } from \"@angular/router\";\r\n\r\nimport { WorklistShellComponent } from \"./components/worklist-shell/worklist-shell.component\";\r\nimport { ViewerShellComponent } from \"./components/viewer-shell/viewer-shell.component\";\r\n\r\nconst routes: Routes = [\r\n    { path: \"\", redirectTo: \"/worklist\", pathMatch: \"full\" },\r\n    { path: \"worklist\", component: WorklistShellComponent },\r\n    { path: \"viewer\", component: ViewerShellComponent }\r\n];\r\n\r\n@NgModule({\r\n    imports: [RouterModule.forRoot(routes)],\r\n    exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule {\r\n}\r\n","module.exports = \"<body id=\\\"bodyLayout\\\">\\r\\n    <div id=\\\"test123\\\" class=\\\"navbar navbar-fixed-top black-header\\\">\\r\\n        <app-header-bar></app-header-bar>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"container body-content\\\">\\r\\n        <!--<app-worklist-shell></app-worklist-shell>-->\\r\\n        <template #shellContainer></template>\\r\\n        <!--<router-outlet></router-outlet>-->\\r\\n    </div>\\r\\n</body>\\r\\n\"","module.exports = \"/*@black: #000;\\n@orange: orange;\\n@gray: #555;\\n@silver: #aaa;\\n@white: #fff;*/\\n/*.theme-dark {\\n    @background-color : @black;\\n    @underline-color : @orange;\\n    @border-color : @silver;\\n    @container-background-color : @gray;\\n    @disable-color : @gray;\\n    @font-color : @white;\\n    .change-dark(@background-color);\\n}\\n\\n\\n.theme-light {\\n    @background-color : @white;\\n    @underline-color : @orange;\\n    @border-color : @white;\\n    @disable-color : @white;\\n    @container-background-color : @white;\\n    @font-color: @black;\\n    .change-dark(@background-color);\\n}*/\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYXBwLmNvbXBvbmVudC5sZXNzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O2NBSWM7QUFDZDs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFQW1CRSIsImZpbGUiOiJzcmMvYXBwL2FwcC5jb21wb25lbnQubGVzcyJ9 */\"","﻿import { Component, OnInit, ViewChild, ViewContainerRef, ComponentFactoryResolver } from \"@angular/core\";\r\n\r\nimport { WorklistShellComponent } from \"./components/worklist-shell/worklist-shell.component\"\r\nimport { ViewerShellComponent } from \"./components/viewer-shell/viewer-shell.component\"\r\n\r\nimport { ShellNavigatorService } from \"./services/shell-navigator.service\";\r\nimport { Subscription } from \"rxjs\";\r\n\r\nimport { ViewerShellData } from \"./models/viewer-shell-data\";\r\nimport { ViewerGroupData } from \"./models/viewer-group-data\";\r\nimport { ViewerImageData } from \"./models/viewer-image-data\";\r\nimport { DicomImageService } from \"./services/dicom-image.service\";\r\nimport { WorklistService } from \"./services/worklist.service\";\r\nimport { LogService } from \"./services/log.service\";\r\n\r\nimport * as less from 'less';\r\n\r\n@Component({\r\n    selector: \"app-root\",\r\n    templateUrl: \"./app.component.html\",\r\n    styleUrls: [\"./app.component.less\"]\r\n})\r\nexport class AppComponent implements OnInit {\r\n    title = \"AngularPacsDemo\";\r\n    @ViewChild(\"shellContainer\", { read: ViewContainerRef })\r\n    container;\r\n    createComponents: Array<any> = [];\r\n\r\n    shellDataList: Array<ViewerShellData> = [];\r\n\r\n    subscriptionShellCreated: Subscription;\r\n    subscriptionShellDeleted: Subscription;\r\n\r\n    constructor(private resolver: ComponentFactoryResolver, private shellNavigatorService: ShellNavigatorService,\r\n        private dicomImageService: DicomImageService, private worklistService: WorklistService,\r\n        private logService: LogService) {\r\n        this.subscriptionShellCreated = shellNavigatorService.shellCreated$.subscribe(\r\n            viewerShellData => {\r\n                this.shellDataList.push(viewerShellData);\r\n                this.createViewerShell(viewerShellData);\r\n            });\r\n\r\n\r\n        this.subscriptionShellDeleted = shellNavigatorService.shellDeleted$.subscribe(\r\n            viewerShellData => {\r\n                this.deleteViewerShell(viewerShellData);\r\n\r\n                const index = this.shellDataList.indexOf(viewerShellData, 0);\r\n                if (index > -1) {\r\n                    this.shellDataList.splice(index, 1);\r\n                }\r\n            }\r\n        );\r\n\r\n        ViewerShellData.logService = this.logService;\r\n        ViewerGroupData.logService = this.logService;\r\n        ViewerImageData.logService = this.logService;\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.createWorklistShell();\r\n        this.initConerstone();\r\n\r\n        document.body.className = 'theme-' + 'light';\r\n    }\r\n\r\n    createWorklistShell() {\r\n        const componentFactory = this.resolver.resolveComponentFactory(WorklistShellComponent);\r\n        const componentRef = this.container.createComponent(componentFactory);\r\n        componentRef.instance.hideMe = false;\r\n    }\r\n\r\n    createViewerShell(viewerShellData: ViewerShellData) {\r\n\r\n        this.logService.seperator();\r\n        this.logService.info('User: Open study - ' + viewerShellData.getName());\r\n\r\n        const componentFactory = this.resolver.resolveComponentFactory(ViewerShellComponent);\r\n        const componentRef = this.container.createComponent(componentFactory);\r\n        componentRef.instance.hideMe = false;\r\n        componentRef.instance.viewerShellData = viewerShellData;\r\n\r\n        this.createComponents.push(componentRef);\r\n    }\r\n\r\n    deleteViewerShell(viewerShellData: ViewerShellData) {\r\n        const studyCom =\r\n            this.createComponents.filter(\r\n                (value, index, array) => value.instance.viewerShellData.getId() === viewerShellData.getId());\r\n        if (studyCom.length !== 0) {\r\n            studyCom[0].destroy();\r\n        }\r\n\r\n        this.createComponents =\r\n            this.createComponents.filter(\r\n                (value, index, array) => value.instance.viewerShellData.getId() !== viewerShellData.getId());\r\n    }\r\n\r\n    private initConerstone() {\r\n        cornerstoneWADOImageLoader.external.cornerstone = cornerstone;\r\n        cornerstoneTools.external.cornerstone = cornerstone;\r\n\r\n        //var baseUrl = dicom.baseUrl;\r\n        const config = {\r\n            webWorkerPath: \"./assets/script/cornerstoneWADOImageLoaderWebWorker.js\",\r\n            taskConfiguration: {\r\n                'decodeTask': {\r\n                    codecsPath: \"./cornerstoneWADOImageLoaderCodecs.js\"\r\n                }\r\n            }\r\n        };\r\n        cornerstoneWADOImageLoader.webWorkerManager.initialize(config);\r\n    }\r\n}\r\n","import { BrowserModule } from \"@angular/platform-browser\";\r\nimport { NgModule } from \"@angular/core\";\r\nimport { FormsModule } from \"@angular/forms\";\r\nimport { HttpClientModule } from \"@angular/common/http\";\r\n\r\nimport { AppRoutingModule } from \"./app-routing.module\";\r\nimport { AppComponent } from \"./app.component\";\r\n\r\nimport { BrowserAnimationsModule } from \"@angular/platform-browser/animations\";\r\n\r\nimport { HeaderBarComponent } from \"./components/header-bar/header-bar.component\";\r\n\r\nimport { WorklistShellComponent } from \"./components/worklist-shell/worklist-shell.component\";\r\nimport { QueryShortcutComponent } from \"./components/worklist-shell/query-shortcut/query-shortcut.component\";\r\nimport { WorklistComponent } from \"./components/worklist-shell/worklist/worklist.component\";\r\n\r\nimport { ViewerShellComponent } from \"./components/viewer-shell/viewer-shell.component\";\r\nimport { ViewerToolbarComponent } from \"./components/viewer-shell/viewer-toolbar/viewer-toolbar.component\";\r\nimport { NavigationComponent } from \"./components/viewer-shell/navigation/navigation.component\";\r\nimport { ThumbnailComponent } from \"./components/viewer-shell/navigation/thumbnail/thumbnail.component\";\r\nimport { GroupViewerComponent } from \"./components/viewer-shell/group-viewer/group-viewer.component\";\r\nimport { ImageViewerComponent } from \"./components/viewer-shell/group-viewer/image-viewer/image-viewer.component\";\r\nimport { QueryToolbarComponent } from \"./components/worklist-shell/query-toolbar/query-toolbar.component\";\r\nimport { OperateToolbarComponent } from \"./components/worklist-shell/operate-toolbar/operate-toolbar.component\";\r\nimport { MessageBoxComponent } from \"./components/common/message-box/message-box.component\";\r\nimport { DropdownButtonMenuComponent } from \"./components/common/dropdown-button-menu/dropdown-button-menu.component\";\r\nimport { DropdownButtonMenuButtonComponent } from\r\n    \"./components/common/dropdown-button-menu-button/dropdown-button-menu-button.component\";\r\n\r\nimport { ManualWlDialogComponent } from \"./components/dialog/manual-wl-dialog/manual-wl-dialog.component\";\r\n\r\nimport {\r\n    MatDatepickerModule,\r\n    MatDialogModule,\r\n    MatInputModule,\r\n    MatListModule,\r\n    MatPaginatorModule,\r\n    MatProgressSpinnerModule,\r\n    MatSidenavModule,\r\n    MatSortModule,\r\n    MatTableModule,\r\n    MatToolbarModule\r\n} from \"@angular/material\";\r\n\r\nimport { MatMenuModule } from \"@angular/material/menu\";\r\nimport { MatButtonModule } from \"@angular/material/button\"\r\nimport { MatIconModule } from \"@angular/material/icon\";\r\nimport { MatCardModule } from \"@angular/material/card\";\r\nimport { MatTabsModule } from \"@angular/material/tabs\";\r\n\r\nimport { ReactiveFormsModule } from \"@angular/forms\";\r\nimport { MatMomentDateModule } from \"@angular/material-moment-adapter\";\r\nimport { SelectStudydateDialogComponent } from './components/dialog/select-studydate-dialog/select-studydate-dialog.component';\r\nimport { SelectMarkerDialogComponent } from './components/dialog/select-marker-dialog/select-marker-dialog.component';\r\nimport { ViewerBottombarComponent } from './components/viewer-shell/viewer-bottombar/viewer-bottombar.component';\r\nimport { PatientEditComponent } from './components/worklist-shell/worklist/patient-edit/patient-edit.component';\r\nimport { ExportStudyComponent } from './components/worklist-shell/worklist/export-study/export-study.component';\r\n\r\n\r\n@NgModule({\r\n    declarations: [\r\n        AppComponent,\r\n        HeaderBarComponent,\r\n        QueryShortcutComponent,\r\n        WorklistComponent,\r\n        WorklistShellComponent,\r\n        NavigationComponent,\r\n        ViewerShellComponent,\r\n        ViewerToolbarComponent,\r\n        ThumbnailComponent,\r\n        GroupViewerComponent,\r\n        ImageViewerComponent,\r\n        QueryToolbarComponent,\r\n        OperateToolbarComponent,\r\n        MessageBoxComponent,\r\n        DropdownButtonMenuComponent,\r\n        DropdownButtonMenuButtonComponent,\r\n        ManualWlDialogComponent,\r\n        SelectStudydateDialogComponent,\r\n        SelectMarkerDialogComponent,\r\n        ViewerBottombarComponent,\r\n        PatientEditComponent,\r\n        ExportStudyComponent\r\n    ],\r\n    imports: [\r\n        BrowserModule,\r\n        BrowserAnimationsModule,\r\n        AppRoutingModule,\r\n        HttpClientModule,\r\n        FormsModule,\r\n        MatMenuModule,\r\n        MatButtonModule,\r\n        MatIconModule,\r\n        MatCardModule,\r\n        MatTabsModule,\r\n        MatSidenavModule,\r\n        MatListModule,\r\n        MatToolbarModule,\r\n        MatInputModule,\r\n        MatTableModule,\r\n        MatPaginatorModule,\r\n        MatSortModule,\r\n        MatProgressSpinnerModule,\r\n        MatDialogModule,\r\n        AppRoutingModule,\r\n        ReactiveFormsModule,\r\n        MatMomentDateModule,\r\n        MatDatepickerModule\r\n    ],\r\n    providers: [],\r\n    bootstrap: [AppComponent],\r\n    entryComponents: [MessageBoxComponent, ManualWlDialogComponent, SelectStudydateDialogComponent, SelectMarkerDialogComponent, PatientEditComponent, ExportStudyComponent]\r\n})\r\nexport class AppModule {\r\n}\r\n","module.exports = \".dropdown-button-menu-button {\\r\\n    background-color: transparent;\\r\\n    border: none;\\r\\n    height: 33px;\\r\\n    outline: none;\\r\\n    width: 33px;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy9jb21tb24vZHJvcGRvd24tYnV0dG9uLW1lbnUtYnV0dG9uL2Ryb3Bkb3duLWJ1dHRvbi1tZW51LWJ1dHRvbi5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksNkJBQTZCO0lBQzdCLFlBQVk7SUFDWixZQUFZO0lBQ1osYUFBYTtJQUNiLFdBQVc7QUFDZiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvY29tbW9uL2Ryb3Bkb3duLWJ1dHRvbi1tZW51LWJ1dHRvbi9kcm9wZG93bi1idXR0b24tbWVudS1idXR0b24uY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5kcm9wZG93bi1idXR0b24tbWVudS1idXR0b24ge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XHJcbiAgICBib3JkZXI6IG5vbmU7XHJcbiAgICBoZWlnaHQ6IDMzcHg7XHJcbiAgICBvdXRsaW5lOiBub25lO1xyXG4gICAgd2lkdGg6IDMzcHg7XHJcbn1cclxuIl19 */\"","module.exports = \"<button class=\\\"dropdown-button-menu-button\\\" [style.background-image]=\\\"backgroundUrl\\\" role=\\\"button\\\" [title]=\\\"buttonData.tip\\\" [style.margin-top]=\\\"getDefaultMarginTop()\\\"\\r\\n        (click)=\\\"onClick()\\\" (mouseover)=\\\"onMouseOver($event)\\\" (mouseout)=\\\"onMouseOut($event)\\\" (mousedown)=\\\"onMouseDown($event)\\\" (mouseup)=\\\"onMouseUp($event)\\\">\\r\\n</button>\\r\\n\"","import { Component, OnInit, Input, EventEmitter, Output } from \"@angular/core\";\r\nimport { Subscription } from \"rxjs\";\r\n\r\nimport { SelectedButtonData, ButtonStyleToken } from \"../../../models/dropdown-button-menu-data\";\r\nimport { OperationEnum, ViewContext, ViewContextService } from \"../../../services/view-context.service\";\r\nimport { ConfigurationService } from \"../../../services/configuration.service\";\r\n\r\n@Component({\r\n    selector: \"app-dropdown-button-menu-button\",\r\n    templateUrl: \"./dropdown-button-menu-button.component.html\",\r\n    styleUrls: [\"./dropdown-button-menu-button.component.css\"]\r\n})\r\nexport class DropdownButtonMenuButtonComponent implements OnInit {\r\n    buttonStyleToken: ButtonStyleToken;\r\n    baseUrl: string;\r\n\r\n    backgroundUrl: string;\r\n    isCheckStyle: boolean;\r\n    defaultStyle: string;\r\n\r\n\r\n    private subscriptionViewContextChange: Subscription;\r\n\r\n    @Output()\r\n    selected = new EventEmitter<SelectedButtonData>();\r\n    @Input()\r\n    isTopButton: boolean;\r\n    @Input()\r\n    showArrow: boolean;\r\n\r\n\r\n    private _buttonData: SelectedButtonData;\r\n\r\n    @Input()\r\n    set buttonData(value: SelectedButtonData) {\r\n        this._buttonData = value;\r\n        if (this.isTopButton && this.isCheckStyle) {\r\n            if (this._buttonData.operationData.type === OperationEnum.SetContext) {\r\n                this.defaultStyle = this.buttonStyleToken.down;\r\n            } else {\r\n                this.defaultStyle = this.buttonStyleToken.normal;\r\n            }\r\n        }\r\n        this.backgroundUrl = this.createBackgroundUrl(this.defaultStyle);\r\n    }\r\n\r\n    get buttonData() {\r\n        return this._buttonData;\r\n    }\r\n\r\n    private _isChecked: boolean;\r\n\r\n    @Input()\r\n    set isChecked(value: boolean) {\r\n        this._isChecked = value;\r\n        if (this.isCheckStyle) {\r\n            this.defaultStyle = this.getDefaultStyle();\r\n            this.backgroundUrl = this.createBackgroundUrl(this.defaultStyle);\r\n        }\r\n    }\r\n\r\n    get isChecked() {\r\n        return this._isChecked;\r\n    }\r\n\r\n    constructor(private viewContext: ViewContextService, private configurationService: ConfigurationService) {\r\n        this.buttonStyleToken = { normal: \"normal\", over: \"focus\", down: \"down\", disable: \"disable\" };\r\n        this.baseUrl = this.configurationService.getBaseUrl();\r\n\r\n        this.subscriptionViewContextChange = viewContext.viewContextChanged$.subscribe(\r\n            context => {\r\n                this.setContext(context);\r\n            });\r\n\r\n        this.defaultStyle = this.buttonStyleToken.normal;\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.isCheckStyle = this.viewContext.isImageToolBarButtonCheckStyle(this.buttonData);\r\n        this.isChecked = this.viewContext.isImageToolBarButtonChecked(this.buttonData);\r\n    }\r\n\r\n    getDefaultStyle(): string {\r\n        return this.isChecked ? this.buttonStyleToken.down : this.buttonStyleToken.normal;\r\n    }\r\n\r\n    getDefaultMarginTop() {\r\n        return this.isTopButton ? \"-20px\" : \"0\";\r\n    }\r\n\r\n    createBackgroundUrl(styleToken: string): string {\r\n        const arrowToken = this.showArrow ? \"_h\" : \"\";\r\n        const backgroundUrl =\r\n            `url(${this.baseUrl}assets/img/Toolbar/${this.buttonData.name}/${styleToken}/bitmap${arrowToken}.gif)`;\r\n        return backgroundUrl;\r\n    }\r\n\r\n    onMouseOver(event) {\r\n        this.setBackgroundImage(this.buttonStyleToken.over);\r\n    }\r\n\r\n    onMouseOut(event) {\r\n        this.setBackgroundImage(this.defaultStyle);\r\n    }\r\n\r\n    onMouseDown(event) {\r\n        if (this.isCheckStyle && this.isChecked) {\r\n            this.setBackgroundImage(this.buttonStyleToken.normal);\r\n        } else {\r\n            this.setBackgroundImage(this.buttonStyleToken.down);\r\n        }\r\n    }\r\n\r\n    onMouseUp(event) {\r\n        this.setBackgroundImage(this.defaultStyle);\r\n    }\r\n\r\n    setBackgroundImage(style) {\r\n        this.backgroundUrl = this.createBackgroundUrl(style);\r\n    }\r\n\r\n    onClick() {\r\n        if (!this.isTopButton) {\r\n            this.selected.emit(this.buttonData);\r\n        }\r\n\r\n        if (this.buttonData.operationData.type === OperationEnum.SetContext) {\r\n            \r\n            if (this.buttonData.operationData.data instanceof ViewContext) {\r\n                const viewContext = this.buttonData.operationData.data as ViewContext;\r\n                this.viewContext.setContext(viewContext.action, viewContext.data);\r\n            } else {\r\n                this.viewContext.setContext(this.buttonData.operationData.data, null);\r\n            }\r\n            \r\n        } else {\r\n            this.viewContext.onOperation(this.buttonData.operationData);\r\n            if (this.isCheckStyle && this.isTopButton && !this.showArrow) {\r\n                this.isChecked = !this.isChecked;\r\n            }\r\n        }\r\n    }\r\n\r\n    setContext(viewContext) {\r\n        if (this.buttonData.operationData.type === OperationEnum.SetContext) {\r\n            \r\n            if (this.buttonData.operationData.data instanceof ViewContext) {\r\n                const myViewContext = this.buttonData.operationData.data as ViewContext;\r\n                this.isChecked = (viewContext.action === myViewContext.action && viewContext.data === myViewContext.data);\r\n            } else {\r\n                this.isChecked = (viewContext.action === this.buttonData.operationData.data);\r\n            }\r\n            \r\n        }\r\n    }\r\n}\r\n","module.exports = \"li.dropdown.open {\\r\\n    margin: -20px 0 0;\\r\\n    width: 35px;\\r\\n}\\r\\n\\r\\nli.dropdown {\\r\\n    margin: -20px 0 0;\\r\\n    width: 35px;\\r\\n}\\r\\n\\r\\n.dropdown-button-menu {\\r\\n    background-color: transparent;\\r\\n    margin: -24px 0 0;\\r\\n    min-width: 33px;\\r\\n    padding-bottom: 0;\\r\\n}\\r\\n\\r\\n.dropdown-button-menu-button {\\r\\n    background-color: transparent;\\r\\n    border: none;\\r\\n    height: 33px;\\r\\n    outline: none;\\r\\n    width: 33px;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy9jb21tb24vZHJvcGRvd24tYnV0dG9uLW1lbnUvZHJvcGRvd24tYnV0dG9uLW1lbnUuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGlCQUFpQjtJQUNqQixXQUFXO0FBQ2Y7O0FBRUE7SUFDSSxpQkFBaUI7SUFDakIsV0FBVztBQUNmOztBQUVBO0lBQ0ksNkJBQTZCO0lBQzdCLGlCQUFpQjtJQUNqQixlQUFlO0lBQ2YsaUJBQWlCO0FBQ3JCOztBQUVBO0lBQ0ksNkJBQTZCO0lBQzdCLFlBQVk7SUFDWixZQUFZO0lBQ1osYUFBYTtJQUNiLFdBQVc7QUFDZiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvY29tbW9uL2Ryb3Bkb3duLWJ1dHRvbi1tZW51L2Ryb3Bkb3duLWJ1dHRvbi1tZW51LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJsaS5kcm9wZG93bi5vcGVuIHtcclxuICAgIG1hcmdpbjogLTIwcHggMCAwO1xyXG4gICAgd2lkdGg6IDM1cHg7XHJcbn1cclxuXHJcbmxpLmRyb3Bkb3duIHtcclxuICAgIG1hcmdpbjogLTIwcHggMCAwO1xyXG4gICAgd2lkdGg6IDM1cHg7XHJcbn1cclxuXHJcbi5kcm9wZG93bi1idXR0b24tbWVudSB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcclxuICAgIG1hcmdpbjogLTI0cHggMCAwO1xyXG4gICAgbWluLXdpZHRoOiAzM3B4O1xyXG4gICAgcGFkZGluZy1ib3R0b206IDA7XHJcbn1cclxuXHJcbi5kcm9wZG93bi1idXR0b24tbWVudS1idXR0b24ge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XHJcbiAgICBib3JkZXI6IG5vbmU7XHJcbiAgICBoZWlnaHQ6IDMzcHg7XHJcbiAgICBvdXRsaW5lOiBub25lO1xyXG4gICAgd2lkdGg6IDMzcHg7XHJcbn1cclxuIl19 */\"","module.exports = \"<li class=\\\"dropdown\\\">\\r\\n    <a class=\\\"dropdown-toggle nav navbar-collapse\\\" data-toggle=\\\"dropdown\\\" href=\\\"#\\\" role=\\\"button\\\" aria-haspopup=\\\"false\\\" aria-expanded=\\\"false\\\">\\r\\n        <app-dropdown-button-menu-button [buttonData]=\\\"selectedButton\\\" [isTopButton]=\\\"true\\\" [showArrow]=\\\"true\\\">\\r\\n        </app-dropdown-button-menu-button>\\r\\n    </a>\\r\\n    <ul class=\\\"dropdown-menu dropdown-button-menu\\\">\\r\\n        <li *ngFor=\\\"let menuButton of menuButtonList\\\">\\r\\n            <app-dropdown-button-menu-button [buttonData]=\\\"menuButton\\\" [isTopButton]=\\\"false\\\" [showArrow]=\\\"false\\\" [isChecked]=\\\"selectedButton == menuButton\\\" (selected)=\\\"onSelectChanged($event)\\\"></app-dropdown-button-menu-button>\\r\\n        </li>\\r\\n    </ul>\\r\\n</li>\\r\\n\"","import { Component, OnInit, Input } from \"@angular/core\";\r\nimport { SelectedButtonData } from \"../../../models/dropdown-button-menu-data\";\r\nimport { ViewContextService } from \"../../../services/view-context.service\";\r\n\r\n@Component({\r\n    selector: \"app-dropdown-button-menu\",\r\n    templateUrl: \"./dropdown-button-menu.component.html\",\r\n    styleUrls: [\"./dropdown-button-menu.component.css\"]\r\n})\r\nexport class DropdownButtonMenuComponent implements OnInit {\r\n    selectedButton: SelectedButtonData;\r\n    @Input()\r\n    menuButtonList: SelectedButtonData[];\r\n\r\n    constructor(private viewContext: ViewContextService) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.selectedButton = this.menuButtonList[0];\r\n\r\n        const $dropdownLi = $(\"li.dropdown\");\r\n\r\n        $dropdownLi.mouseover(function() {\r\n            $(this).addClass(\"open\");\r\n        }).mouseout(function() {\r\n            $(this).removeClass(\"open\");\r\n        }).click(function() {\r\n            $(this).addClass(\"open\");\r\n        });\r\n    }\r\n\r\n    onSelectChanged(menuButton: SelectedButtonData) {\r\n        this.selectedButton = menuButton;\r\n    }\r\n}\r\n","module.exports = \".mat-dialog-title {\\r\\n    border-bottom: 1px solid #FF9900;\\r\\n    color: #f90;\\r\\n    font-size: 18px;\\r\\n    margin: -24px -24px 0px -24px;\\r\\n    min-width: 400px;\\r\\n    padding: 1px 10px;\\r\\n}\\r\\n\\r\\n.mat-dialog-content {\\r\\n    color: white;\\r\\n    font-size: 16px;\\r\\n    min-height: 80px;\\r\\n    min-width: 400px;\\r\\n    padding: 10px 10px;\\r\\n}\\r\\n\\r\\n.mat-dialog-actions { margin-right: -12px; }\\r\\n\\r\\n.mat-form-field { min-width: 400px; }\\r\\n\\r\\n.mat-raised-button {\\r\\n    background-color: #444;\\r\\n    border: 1px solid #777;\\r\\n    border-radius: 3px;\\r\\n    color: white;\\r\\n    margin-left: 6px;\\r\\n    padding: 3px;\\r\\n    width: 100px;\\r\\n}\\r\\n\\r\\n.mat-raised-button:disabled:hover { color: #999; }\\r\\n\\r\\n.mat-raised-button:hover { color: #f90; }\\r\\n\\r\\n.mat-dialog-actions { flex-direction: row-reverse; }\\r\\n\\r\\n.matInput {\\r\\n    caret-color: #F90;\\r\\n    color: green;\\r\\n}\\r\\n\\r\\n.mat-input-element { caret-color: #F90; }\\r\\n\\r\\n#span-message-text {\\r\\n    word-break: break-all;\\r\\n    word-wrap: break-word;\\r\\n    white-space: pre-wrap;\\r\\n    min-width: 400px;\\r\\n}\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy9jb21tb24vbWVzc2FnZS1ib3gvbWVzc2FnZS1ib3guY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGdDQUFnQztJQUNoQyxXQUFXO0lBQ1gsZUFBZTtJQUNmLDZCQUE2QjtJQUM3QixnQkFBZ0I7SUFDaEIsaUJBQWlCO0FBQ3JCOztBQUVBO0lBQ0ksWUFBWTtJQUNaLGVBQWU7SUFDZixnQkFBZ0I7SUFDaEIsZ0JBQWdCO0lBQ2hCLGtCQUFrQjtBQUN0Qjs7QUFFQSxzQkFBc0IsbUJBQW1CLEVBQUU7O0FBRTNDLGtCQUFrQixnQkFBZ0IsRUFBRTs7QUFFcEM7SUFDSSxzQkFBc0I7SUFDdEIsc0JBQXNCO0lBQ3RCLGtCQUFrQjtJQUNsQixZQUFZO0lBQ1osZ0JBQWdCO0lBQ2hCLFlBQVk7SUFDWixZQUFZO0FBQ2hCOztBQUVBLG9DQUFvQyxXQUFXLEVBQUU7O0FBRWpELDJCQUEyQixXQUFXLEVBQUU7O0FBRXhDLHNCQUFzQiwyQkFBMkIsRUFBRTs7QUFFbkQ7SUFDSSxpQkFBaUI7SUFDakIsWUFBWTtBQUNoQjs7QUFFQSxxQkFBcUIsaUJBQWlCLEVBQUU7O0FBRXhDO0lBQ0kscUJBQXFCO0lBQ3JCLHFCQUFxQjtJQUNyQixxQkFBcUI7SUFDckIsZ0JBQWdCO0FBQ3BCIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50cy9jb21tb24vbWVzc2FnZS1ib3gvbWVzc2FnZS1ib3guY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5tYXQtZGlhbG9nLXRpdGxlIHtcclxuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjRkY5OTAwO1xyXG4gICAgY29sb3I6ICNmOTA7XHJcbiAgICBmb250LXNpemU6IDE4cHg7XHJcbiAgICBtYXJnaW46IC0yNHB4IC0yNHB4IDBweCAtMjRweDtcclxuICAgIG1pbi13aWR0aDogNDAwcHg7XHJcbiAgICBwYWRkaW5nOiAxcHggMTBweDtcclxufVxyXG5cclxuLm1hdC1kaWFsb2ctY29udGVudCB7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBmb250LXNpemU6IDE2cHg7XHJcbiAgICBtaW4taGVpZ2h0OiA4MHB4O1xyXG4gICAgbWluLXdpZHRoOiA0MDBweDtcclxuICAgIHBhZGRpbmc6IDEwcHggMTBweDtcclxufVxyXG5cclxuLm1hdC1kaWFsb2ctYWN0aW9ucyB7IG1hcmdpbi1yaWdodDogLTEycHg7IH1cclxuXHJcbi5tYXQtZm9ybS1maWVsZCB7IG1pbi13aWR0aDogNDAwcHg7IH1cclxuXHJcbi5tYXQtcmFpc2VkLWJ1dHRvbiB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDQ0O1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgIzc3NztcclxuICAgIGJvcmRlci1yYWRpdXM6IDNweDtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIG1hcmdpbi1sZWZ0OiA2cHg7XHJcbiAgICBwYWRkaW5nOiAzcHg7XHJcbiAgICB3aWR0aDogMTAwcHg7XHJcbn1cclxuXHJcbi5tYXQtcmFpc2VkLWJ1dHRvbjpkaXNhYmxlZDpob3ZlciB7IGNvbG9yOiAjOTk5OyB9XHJcblxyXG4ubWF0LXJhaXNlZC1idXR0b246aG92ZXIgeyBjb2xvcjogI2Y5MDsgfVxyXG5cclxuLm1hdC1kaWFsb2ctYWN0aW9ucyB7IGZsZXgtZGlyZWN0aW9uOiByb3ctcmV2ZXJzZTsgfVxyXG5cclxuLm1hdElucHV0IHtcclxuICAgIGNhcmV0LWNvbG9yOiAjRjkwO1xyXG4gICAgY29sb3I6IGdyZWVuO1xyXG59XHJcblxyXG4ubWF0LWlucHV0LWVsZW1lbnQgeyBjYXJldC1jb2xvcjogI0Y5MDsgfVxyXG5cclxuI3NwYW4tbWVzc2FnZS10ZXh0IHtcclxuICAgIHdvcmQtYnJlYWs6IGJyZWFrLWFsbDtcclxuICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDtcclxuICAgIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDtcclxuICAgIG1pbi13aWR0aDogNDAwcHg7XHJcbn0iXX0= */\"","module.exports = \"<h5 mat-dialog-title>{{content.title}}</h5>\\r\\n\\r\\n\\r\\n<mat-dialog-content [formGroup]=\\\"form\\\">\\r\\n\\r\\n    <i *ngIf=\\\"content.messageType === 0\\\" class=\\\"glyphicon glyphicon-info-sign\\\" style=\\\"padding-right: 8px\\\"></i>\\r\\n    <i *ngIf=\\\"content.messageType === 1\\\" class=\\\"glyphicon glyphicon-question-sign\\\" style=\\\"padding-right: 8px\\\"></i>\\r\\n    <i *ngIf=\\\"content.messageType === 2\\\" class=\\\"glyphicon glyphicon-warning-sign\\\" style=\\\"color: #F90; padding-right: 8px;\\\"></i>\\r\\n    <i *ngIf=\\\"content.messageType === 3\\\" class=\\\"glyphicon glyphicon-remove\\\" style=\\\"color: #F90; padding-right: 8px;\\\"></i>\\r\\n    <span id=\\\"span-message-text\\\" *ngIf=\\\"content.messageType !== 4\\\" style=\\\"color: white\\\">{{content.messageText}}</span>\\r\\n    <mat-form-field *ngIf=\\\"content.messageType === 4\\\">\\r\\n        <input matInput\\r\\n               placeholder=\\\"{{content.messageText}}\\\"\\r\\n               formControlName=\\\"valueInput\\\"\\r\\n               (input)=\\\"onInput($event)\\\">\\r\\n    </mat-form-field>\\r\\n</mat-dialog-content>\\r\\n\\r\\n<mat-dialog-actions>\\r\\n\\r\\n    <button *ngIf=\\\"needShowYesNoButton()\\\" class=\\\"mat-raised-button\\\"\\r\\n            (click)=\\\"onNo()\\\">\\r\\n        <i class=\\\"glyphicon glyphicon-remove-circle\\\" style=\\\"padding-right: 8px\\\"></i>No\\r\\n    </button>\\r\\n\\r\\n    <button *ngIf=\\\"needShowYesNoButton()\\\" class=\\\"mat-raised-button\\\"\\r\\n            (click)=\\\"onYes()\\\">\\r\\n        <i class=\\\"glyphicon glyphicon-ok-circle\\\" style=\\\"padding-right: 8px\\\"></i>Yes\\r\\n    </button>\\r\\n\\r\\n    <button *ngIf=\\\"needShowCancelButton()\\\" class=\\\"mat-raised-button\\\"\\r\\n            (click)=\\\"onCancel()\\\">\\r\\n        <i class=\\\"glyphicon glyphicon-remove-circle\\\" style=\\\"padding-right: 8px\\\"></i>Cancel\\r\\n    </button>\\r\\n\\r\\n    <button *ngIf=\\\"needShowOkButton()\\\" class=\\\"mat-raised-button\\\" [disabled]=\\\"needDisableYesButton\\\"\\r\\n            (click)=\\\"onOk()\\\">\\r\\n        <i class=\\\"glyphicon glyphicon-ok-circle\\\" style=\\\"padding-right: 8px\\\"></i>Ok\\r\\n    </button>\\r\\n\\r\\n</mat-dialog-actions>\\r\\n\"","import { Component, OnInit, Inject } from \"@angular/core\";\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from \"@angular/material\";\r\nimport { FormBuilder, Validators, FormGroup } from \"@angular/forms\";\r\nimport { MessageBoxType, MessageBoxContent, DialogResult } from \"../../../models/messageBox\";\r\n\r\n@Component({\r\n    selector: \"app-message-box\",\r\n    templateUrl: \"./message-box.component.html\",\r\n    styleUrls: [\"./message-box.component.css\"]\r\n})\r\nexport class MessageBoxComponent implements OnInit {\r\n\r\n    form: FormGroup;\r\n    dialogResult: DialogResult;\r\n    valueInput: string;\r\n    needDisableYesButton = false;\r\n    content: MessageBoxContent;\r\n\r\n    constructor(\r\n        private fb: FormBuilder,\r\n        private dialogRef: MatDialogRef<MessageBoxComponent>,\r\n        @Inject(MAT_DIALOG_DATA) messageBoxContent: MessageBoxContent) {\r\n\r\n        this.content = messageBoxContent;\r\n\r\n        //this.content.messageText = this.content.callbackFunction();\r\n        if (this.content.callbackFunction) {\r\n            this.content.callbackFunction.call(this.content.callbackOwner, this.content.callbackArg).subscribe(value => {\r\n                if (value === \"\") {\r\n                    this.form.value.dialogResult = DialogResult.Ok;\r\n                    this.dialogRef.close(this.form.value);\r\n                } else {\r\n                    this.content.messageText = value;\r\n                }\r\n\r\n            });\r\n        }\r\n        \r\n        this.form = fb.group({\r\n            dialogResult: [DialogResult.Yes],\r\n            valueInput: [this.valueInput, Validators.required]\r\n        });\r\n\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.needDisableYesButton = this.content.messageType === MessageBoxType.Input;\r\n    }\r\n\r\n\r\n    onYes() {\r\n        this.form.value.dialogResult = DialogResult.Yes;\r\n        this.dialogRef.close(this.form.value);\r\n    }\r\n\r\n    onNo() {\r\n        this.form.value.dialogResult = DialogResult.No;\r\n        this.dialogRef.close(this.form.value);\r\n    }\r\n\r\n    onOk() {\r\n        this.form.value.dialogResult = DialogResult.Ok;\r\n        this.dialogRef.close(this.form.value);\r\n    }\r\n\r\n    onCancel() {\r\n        this.form.value.dialogResult = DialogResult.Cancel;\r\n        this.dialogRef.close(this.form.value);\r\n    }\r\n\r\n    public closeDialog() {\r\n        this.dialogRef.close();\r\n    }\r\n\r\n    needShowYesNoButton(): boolean {\r\n        return this.content.messageType === MessageBoxType.Question;\r\n    }\r\n\r\n    needShowOkButton(): boolean {\r\n        return this.content.messageType !== MessageBoxType.Question && this.content.messageType !== MessageBoxType.InfoCancel;\r\n    }\r\n\r\n    needShowCancelButton(): boolean {\r\n        return this.content.messageType === MessageBoxType.Input || this.content.messageType === MessageBoxType.InfoCancel;\r\n    }\r\n\r\n    onInput(event) {\r\n        this.needDisableYesButton = this.content.messageType === MessageBoxType.Input &&\r\n        (this.form.value.valueInput === null ||\r\n            this.form.value.valueInput === undefined ||\r\n            this.form.value.valueInput === \"\");\r\n\r\n        //if (!this.needDisableYesButton && event.code === \"Enter\") {\r\n        //  this.onOk();\r\n        //}\r\n    }\r\n}\r\n","module.exports = \".mat-dialog-title {\\r\\n    border-bottom: 1px solid #FF9900;\\r\\n    color: #f90;\\r\\n    font-size: 15px;\\r\\n    margin: -24px -24px 0px -24px;\\r\\n    min-width: 200px;\\r\\n    padding: 1px 10px;\\r\\n}\\r\\n\\r\\n.mat-dialog-content {\\r\\n    color: white;\\r\\n    font-size: 15px;\\r\\n    height: 100px;\\r\\n    min-width: 200px;\\r\\n    padding: 10px 10px;\\r\\n}\\r\\n\\r\\n.mat-form-field-appearance-legacy .mat-form-field-wrapper {\\r\\n    padding-bottom: 2px;\\r\\n}\\r\\n\\r\\n.mat-form-field-appearance-legacy .mat-form-field-infix {\\r\\n    padding: 0;\\r\\n}\\r\\n\\r\\n.matInput {\\r\\n    caret-color: #F90;\\r\\n    color: green;\\r\\n}\\r\\n\\r\\n.mat-input-element {\\r\\n    caret-color: #F90;\\r\\n    padding-left: 5px;\\r\\n}\\r\\n\\r\\n.mat-form-field-label-wrapper {\\r\\n    padding-top: 3px;\\r\\n}\\r\\n\\r\\n.mat-form-field-infix {\\r\\n    border-top: 0;\\r\\n}\\r\\n\\r\\n.mat-raised-button {\\r\\n    background-color: #444;\\r\\n    border: 1px solid #777;\\r\\n    border-radius: 3px;\\r\\n    color: white;\\r\\n    font-size: 13px;\\r\\n    margin-left: 6px;\\r\\n    padding: 1px;\\r\\n    width: 90px;\\r\\n    height: 30px;\\r\\n    line-height: 10px;\\r\\n}\\r\\n\\r\\n.mat-dialog-actions { margin-right: -12px; }\\r\\n\\r\\n.mat-raised-button:disabled:hover { color: #999; }\\r\\n\\r\\n.mat-raised-button:hover { color: #f90; }\\r\\n\\r\\n.mat-dialog-actions { flex-direction: row-reverse; }\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy9kaWFsb2cvbWFudWFsLXdsLWRpYWxvZy9tYW51YWwtd2wtZGlhbG9nLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxnQ0FBZ0M7SUFDaEMsV0FBVztJQUNYLGVBQWU7SUFDZiw2QkFBNkI7SUFDN0IsZ0JBQWdCO0lBQ2hCLGlCQUFpQjtBQUNyQjs7QUFFQTtJQUNJLFlBQVk7SUFDWixlQUFlO0lBQ2YsYUFBYTtJQUNiLGdCQUFnQjtJQUNoQixrQkFBa0I7QUFDdEI7O0FBRUE7SUFDSSxtQkFBbUI7QUFDdkI7O0FBRUE7SUFDSSxVQUFVO0FBQ2Q7O0FBRUE7SUFDSSxpQkFBaUI7SUFDakIsWUFBWTtBQUNoQjs7QUFFQTtJQUNJLGlCQUFpQjtJQUNqQixpQkFBaUI7QUFDckI7O0FBRUE7SUFDSSxnQkFBZ0I7QUFDcEI7O0FBRUE7SUFDSSxhQUFhO0FBQ2pCOztBQUVBO0lBQ0ksc0JBQXNCO0lBQ3RCLHNCQUFzQjtJQUN0QixrQkFBa0I7SUFDbEIsWUFBWTtJQUNaLGVBQWU7SUFDZixnQkFBZ0I7SUFDaEIsWUFBWTtJQUNaLFdBQVc7SUFDWCxZQUFZO0lBQ1osaUJBQWlCO0FBQ3JCOztBQUVBLHNCQUFzQixtQkFBbUIsRUFBRTs7QUFFM0Msb0NBQW9DLFdBQVcsRUFBRTs7QUFFakQsMkJBQTJCLFdBQVcsRUFBRTs7QUFFeEMsc0JBQXNCLDJCQUEyQixFQUFFIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50cy9kaWFsb2cvbWFudWFsLXdsLWRpYWxvZy9tYW51YWwtd2wtZGlhbG9nLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubWF0LWRpYWxvZy10aXRsZSB7XHJcbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI0ZGOTkwMDtcclxuICAgIGNvbG9yOiAjZjkwO1xyXG4gICAgZm9udC1zaXplOiAxNXB4O1xyXG4gICAgbWFyZ2luOiAtMjRweCAtMjRweCAwcHggLTI0cHg7XHJcbiAgICBtaW4td2lkdGg6IDIwMHB4O1xyXG4gICAgcGFkZGluZzogMXB4IDEwcHg7XHJcbn1cclxuXHJcbi5tYXQtZGlhbG9nLWNvbnRlbnQge1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gICAgZm9udC1zaXplOiAxNXB4O1xyXG4gICAgaGVpZ2h0OiAxMDBweDtcclxuICAgIG1pbi13aWR0aDogMjAwcHg7XHJcbiAgICBwYWRkaW5nOiAxMHB4IDEwcHg7XHJcbn1cclxuXHJcbi5tYXQtZm9ybS1maWVsZC1hcHBlYXJhbmNlLWxlZ2FjeSAubWF0LWZvcm0tZmllbGQtd3JhcHBlciB7XHJcbiAgICBwYWRkaW5nLWJvdHRvbTogMnB4O1xyXG59XHJcblxyXG4ubWF0LWZvcm0tZmllbGQtYXBwZWFyYW5jZS1sZWdhY3kgLm1hdC1mb3JtLWZpZWxkLWluZml4IHtcclxuICAgIHBhZGRpbmc6IDA7XHJcbn1cclxuXHJcbi5tYXRJbnB1dCB7XHJcbiAgICBjYXJldC1jb2xvcjogI0Y5MDtcclxuICAgIGNvbG9yOiBncmVlbjtcclxufVxyXG5cclxuLm1hdC1pbnB1dC1lbGVtZW50IHtcclxuICAgIGNhcmV0LWNvbG9yOiAjRjkwO1xyXG4gICAgcGFkZGluZy1sZWZ0OiA1cHg7XHJcbn1cclxuXHJcbi5tYXQtZm9ybS1maWVsZC1sYWJlbC13cmFwcGVyIHtcclxuICAgIHBhZGRpbmctdG9wOiAzcHg7XHJcbn1cclxuXHJcbi5tYXQtZm9ybS1maWVsZC1pbmZpeCB7XHJcbiAgICBib3JkZXItdG9wOiAwO1xyXG59XHJcblxyXG4ubWF0LXJhaXNlZC1idXR0b24ge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzQ0NDtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkICM3Nzc7XHJcbiAgICBib3JkZXItcmFkaXVzOiAzcHg7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBmb250LXNpemU6IDEzcHg7XHJcbiAgICBtYXJnaW4tbGVmdDogNnB4O1xyXG4gICAgcGFkZGluZzogMXB4O1xyXG4gICAgd2lkdGg6IDkwcHg7XHJcbiAgICBoZWlnaHQ6IDMwcHg7XHJcbiAgICBsaW5lLWhlaWdodDogMTBweDtcclxufVxyXG5cclxuLm1hdC1kaWFsb2ctYWN0aW9ucyB7IG1hcmdpbi1yaWdodDogLTEycHg7IH1cclxuXHJcbi5tYXQtcmFpc2VkLWJ1dHRvbjpkaXNhYmxlZDpob3ZlciB7IGNvbG9yOiAjOTk5OyB9XHJcblxyXG4ubWF0LXJhaXNlZC1idXR0b246aG92ZXIgeyBjb2xvcjogI2Y5MDsgfVxyXG5cclxuLm1hdC1kaWFsb2ctYWN0aW9ucyB7IGZsZXgtZGlyZWN0aW9uOiByb3ctcmV2ZXJzZTsgfSJdfQ== */\"","module.exports = \"<h1 mat-dialog-title\\r\\n    cdkDrag\\r\\n    cdkDragRootElement=\\\".cdk-overlay-pane\\\"\\r\\n    cdkDragHandle>\\r\\n    Manual WL\\r\\n</h1>\\r\\n<mat-dialog-content>\\r\\n    <table>\\r\\n        <tr>\\r\\n            <td style=\\\"padding-left: 5px\\\">Window Center</td>\\r\\n            <td style=\\\"width: 10px\\\"></td>\\r\\n            <td style=\\\"padding-left: 5px\\\">Window Width</td>\\r\\n        </tr>\\r\\n        <tr>\\r\\n            <td>\\r\\n                <mat-form-field>\\r\\n                    <input type=\\\"number\\\" matInput [(ngModel)]=\\\"data.windowWidth\\\" cdkFocusInitial>\\r\\n                </mat-form-field>\\r\\n            </td>\\r\\n            <td></td>\\r\\n            <td>\\r\\n                <mat-form-field>\\r\\n                    <input type=\\\"number\\\" matInput [(ngModel)]=\\\"data.windowCenter\\\">\\r\\n                </mat-form-field>\\r\\n            </td>\\r\\n        </tr>\\r\\n    </table>\\r\\n</mat-dialog-content>\\r\\n<mat-dialog-actions>\\r\\n    <button class=\\\"mat-raised-button\\\" (click)=\\\"onCancelClick()\\\">\\r\\n        <i class=\\\"glyphicon glyphicon-remove-circle\\\" style=\\\"padding-right: 8px\\\"></i>Cancel\\r\\n    </button>\\r\\n    <button class=\\\"mat-raised-button\\\" (click)=\\\"onOkClick()\\\">\\r\\n        <i class=\\\"glyphicon glyphicon-ok-circle\\\" style=\\\"padding-right: 8px\\\"></i>Ok\\r\\n    </button>\\r\\n</mat-dialog-actions>\\r\\n\"","import { Component, Inject } from \"@angular/core\";\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from \"@angular/material\";\r\nimport { WindowLevelData } from \"../../../models/dailog-data/image-process\";\r\nimport { DialogService } from \"../../../services/dialog.service\";\r\nimport { MessageBoxType, MessageBoxContent } from \"../../../models/messageBox\";\r\n\r\n@Component({\r\n    selector: \"app-manual-wl-dialog\",\r\n    templateUrl: \"./manual-wl-dialog.component.html\",\r\n    styleUrls: [\"./manual-wl-dialog.component.css\"]\r\n})\r\nexport class ManualWlDialogComponent {\r\n\r\n    constructor(\r\n        public dialogRef: MatDialogRef<ManualWlDialogComponent>,\r\n        @Inject(MAT_DIALOG_DATA) public data: WindowLevelData,\r\n        private dialogService: DialogService) {\r\n    }\r\n\r\n    onCancelClick(): void {\r\n        this.dialogRef.close();\r\n    }\r\n\r\n    onOkClick(): void {\r\n        const windowCenter = Number(this.data.windowCenter);\r\n        const windowWidth = Number(this.data.windowWidth);\r\n\r\n        if (isNaN(windowCenter) || isNaN(windowWidth)) {\r\n            const content = new MessageBoxContent();\r\n            content.title = \"Input error\";\r\n            content.messageText = \"Only number is allowed for window center and width!\";\r\n            content.messageType = MessageBoxType.Warning;\r\n\r\n            this.dialogService.showMessageBox(content);\r\n            return;\r\n        }\r\n\r\n        this.dialogRef.close(this.data);\r\n    }\r\n}\r\n","module.exports = \".mat-dialog-title {\\r\\n    border-bottom: 1px solid #FF9900;\\r\\n    color: #f90;\\r\\n    font-size: 15px;\\r\\n    margin: -24px -24px 0px -24px;\\r\\n    min-width: 200px;\\r\\n    padding: 1px 10px;\\r\\n}\\r\\n\\r\\n.mat-dialog-content {\\r\\n    color: white;\\r\\n    font-size: 15px;\\r\\n    min-width: 200px;\\r\\n    padding: 10px 10px;\\r\\n}\\r\\n\\r\\n.mat-form-field-appearance-legacy .mat-form-field-wrapper {\\r\\n    padding-bottom: 2px;\\r\\n}\\r\\n\\r\\n.mat-form-field-appearance-legacy .mat-form-field-infix {\\r\\n    padding: 0;\\r\\n}\\r\\n\\r\\n.matInput {\\r\\n    caret-color: #F90;\\r\\n    color: green;\\r\\n}\\r\\n\\r\\n.mat-input-element {\\r\\n    caret-color: #F90;\\r\\n    padding-left: 5px;\\r\\n}\\r\\n\\r\\n.mat-form-field-label-wrapper {\\r\\n    padding-top: 3px;\\r\\n}\\r\\n\\r\\n.mat-form-field-infix {\\r\\n    border-top: 0;\\r\\n}\\r\\n\\r\\n.mat-raised-button {\\r\\n    background-color: #444;\\r\\n    border: 1px solid #777;\\r\\n    border-radius: 3px;\\r\\n    color: white;\\r\\n    font-size: 13px;\\r\\n    margin-left: 6px;\\r\\n    padding: 1px;\\r\\n    width: 90px;\\r\\n    height: 30px;\\r\\n    line-height: 10px;\\r\\n}\\r\\n\\r\\n.mat-dialog-actions { margin-right: -12px; }\\r\\n\\r\\n.mat-raised-button:disabled:hover { color: #999; }\\r\\n\\r\\n.mat-raised-button:hover { color: #f90; }\\r\\n\\r\\n.mat-dialog-actions { flex-direction: row-reverse; }\\r\\n\\r\\n.marker-image {\\r\\n    border: 1px solid #808080;\\r\\n}\\r\\n\\r\\n.marker-image:hover {\\r\\n    border: 1px solid #F90;\\r\\n}\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy9kaWFsb2cvc2VsZWN0LW1hcmtlci1kaWFsb2cvc2VsZWN0LW1hcmtlci1kaWFsb2cuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGdDQUFnQztJQUNoQyxXQUFXO0lBQ1gsZUFBZTtJQUNmLDZCQUE2QjtJQUM3QixnQkFBZ0I7SUFDaEIsaUJBQWlCO0FBQ3JCOztBQUVBO0lBQ0ksWUFBWTtJQUNaLGVBQWU7SUFDZixnQkFBZ0I7SUFDaEIsa0JBQWtCO0FBQ3RCOztBQUVBO0lBQ0ksbUJBQW1CO0FBQ3ZCOztBQUVBO0lBQ0ksVUFBVTtBQUNkOztBQUVBO0lBQ0ksaUJBQWlCO0lBQ2pCLFlBQVk7QUFDaEI7O0FBRUE7SUFDSSxpQkFBaUI7SUFDakIsaUJBQWlCO0FBQ3JCOztBQUVBO0lBQ0ksZ0JBQWdCO0FBQ3BCOztBQUVBO0lBQ0ksYUFBYTtBQUNqQjs7QUFFQTtJQUNJLHNCQUFzQjtJQUN0QixzQkFBc0I7SUFDdEIsa0JBQWtCO0lBQ2xCLFlBQVk7SUFDWixlQUFlO0lBQ2YsZ0JBQWdCO0lBQ2hCLFlBQVk7SUFDWixXQUFXO0lBQ1gsWUFBWTtJQUNaLGlCQUFpQjtBQUNyQjs7QUFFQSxzQkFBc0IsbUJBQW1CLEVBQUU7O0FBRTNDLG9DQUFvQyxXQUFXLEVBQUU7O0FBRWpELDJCQUEyQixXQUFXLEVBQUU7O0FBRXhDLHNCQUFzQiwyQkFBMkIsRUFBRTs7QUFFbkQ7SUFDSSx5QkFBeUI7QUFDN0I7O0FBRUE7SUFDSSxzQkFBc0I7QUFDMUIiLCJmaWxlIjoic3JjL2FwcC9jb21wb25lbnRzL2RpYWxvZy9zZWxlY3QtbWFya2VyLWRpYWxvZy9zZWxlY3QtbWFya2VyLWRpYWxvZy5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1hdC1kaWFsb2ctdGl0bGUge1xyXG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNGRjk5MDA7XHJcbiAgICBjb2xvcjogI2Y5MDtcclxuICAgIGZvbnQtc2l6ZTogMTVweDtcclxuICAgIG1hcmdpbjogLTI0cHggLTI0cHggMHB4IC0yNHB4O1xyXG4gICAgbWluLXdpZHRoOiAyMDBweDtcclxuICAgIHBhZGRpbmc6IDFweCAxMHB4O1xyXG59XHJcblxyXG4ubWF0LWRpYWxvZy1jb250ZW50IHtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIGZvbnQtc2l6ZTogMTVweDtcclxuICAgIG1pbi13aWR0aDogMjAwcHg7XHJcbiAgICBwYWRkaW5nOiAxMHB4IDEwcHg7XHJcbn1cclxuXHJcbi5tYXQtZm9ybS1maWVsZC1hcHBlYXJhbmNlLWxlZ2FjeSAubWF0LWZvcm0tZmllbGQtd3JhcHBlciB7XHJcbiAgICBwYWRkaW5nLWJvdHRvbTogMnB4O1xyXG59XHJcblxyXG4ubWF0LWZvcm0tZmllbGQtYXBwZWFyYW5jZS1sZWdhY3kgLm1hdC1mb3JtLWZpZWxkLWluZml4IHtcclxuICAgIHBhZGRpbmc6IDA7XHJcbn1cclxuXHJcbi5tYXRJbnB1dCB7XHJcbiAgICBjYXJldC1jb2xvcjogI0Y5MDtcclxuICAgIGNvbG9yOiBncmVlbjtcclxufVxyXG5cclxuLm1hdC1pbnB1dC1lbGVtZW50IHtcclxuICAgIGNhcmV0LWNvbG9yOiAjRjkwO1xyXG4gICAgcGFkZGluZy1sZWZ0OiA1cHg7XHJcbn1cclxuXHJcbi5tYXQtZm9ybS1maWVsZC1sYWJlbC13cmFwcGVyIHtcclxuICAgIHBhZGRpbmctdG9wOiAzcHg7XHJcbn1cclxuXHJcbi5tYXQtZm9ybS1maWVsZC1pbmZpeCB7XHJcbiAgICBib3JkZXItdG9wOiAwO1xyXG59XHJcblxyXG4ubWF0LXJhaXNlZC1idXR0b24ge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzQ0NDtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkICM3Nzc7XHJcbiAgICBib3JkZXItcmFkaXVzOiAzcHg7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBmb250LXNpemU6IDEzcHg7XHJcbiAgICBtYXJnaW4tbGVmdDogNnB4O1xyXG4gICAgcGFkZGluZzogMXB4O1xyXG4gICAgd2lkdGg6IDkwcHg7XHJcbiAgICBoZWlnaHQ6IDMwcHg7XHJcbiAgICBsaW5lLWhlaWdodDogMTBweDtcclxufVxyXG5cclxuLm1hdC1kaWFsb2ctYWN0aW9ucyB7IG1hcmdpbi1yaWdodDogLTEycHg7IH1cclxuXHJcbi5tYXQtcmFpc2VkLWJ1dHRvbjpkaXNhYmxlZDpob3ZlciB7IGNvbG9yOiAjOTk5OyB9XHJcblxyXG4ubWF0LXJhaXNlZC1idXR0b246aG92ZXIgeyBjb2xvcjogI2Y5MDsgfVxyXG5cclxuLm1hdC1kaWFsb2ctYWN0aW9ucyB7IGZsZXgtZGlyZWN0aW9uOiByb3ctcmV2ZXJzZTsgfVxyXG5cclxuLm1hcmtlci1pbWFnZSB7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjODA4MDgwO1xyXG59XHJcblxyXG4ubWFya2VyLWltYWdlOmhvdmVyIHtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkICNGOTA7XHJcbn0iXX0= */\"","module.exports = \"<h1 mat-dialog-title\\r\\n    cdkDrag\\r\\n    cdkDragRootElement=\\\".cdk-overlay-pane\\\"\\r\\n    cdkDragHandle>\\r\\n    Select Marker\\r\\n</h1>\\r\\n<mat-dialog-content>\\r\\n    <mat-tab-group>\\r\\n        <mat-tab *ngFor=\\\"let markerGroup of markerGroupList\\\" [label]=\\\"markerGroup.groupName\\\">\\r\\n            <table style=\\\"background-color: #808080\\\">\\r\\n                <tr *ngFor=\\\"let markerRow of markerGroup.markerDataTable\\\" >\\r\\n                    <td *ngFor=\\\"let markerData of markerRow\\\" style=\\\"border: 1px solid white\\\">\\r\\n                        <img [src]=\\\"getImageUrl(markerData)\\\" [alt]=\\\"markerData.displayText\\\" (click)=\\\"onOkClick(markerData)\\\" class=\\\"marker-image\\\"/>\\r\\n                    </td>\\r\\n                </tr>\\r\\n            </table>\\r\\n        </mat-tab>\\r\\n    </mat-tab-group>\\r\\n</mat-dialog-content>\\r\\n<mat-dialog-actions>\\r\\n    <button class=\\\"mat-raised-button\\\" (click)=\\\"onCancelClick()\\\">\\r\\n        <i class=\\\"glyphicon glyphicon-remove-circle\\\" style=\\\"padding-right: 8px\\\"></i>Cancel\\r\\n    </button>\\r\\n</mat-dialog-actions>\"","import { Component, Inject } from \"@angular/core\";\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from \"@angular/material\";\r\nimport { DialogService } from \"../../../services/dialog.service\";\r\nimport { ConfigurationService } from \"../../../services/configuration.service\";\r\nimport { MarkerData, MarkerGroupData} from \"../../../models/misc-data\"\r\n\r\n@Component({\r\n  selector: 'app-select-marker-dialog',\r\n  templateUrl: './select-marker-dialog.component.html',\r\n  styleUrls: ['./select-marker-dialog.component.css']\r\n})\r\nexport class SelectMarkerDialogComponent {\r\n\r\n    baseUrl: string;\r\n    markerGroupList: Array<MarkerGroupData> = [];\r\n\r\n    constructor(\r\n        public dialogRef: MatDialogRef<SelectMarkerDialogComponent>,\r\n        private dialogService: DialogService,\r\n        private configService: ConfigurationService) {\r\n\r\n        this.baseUrl = this.configService.getBaseUrl();\r\n\r\n        this.markerGroupList = this.configService.getMarkerConfig();\r\n    }\r\n\r\n    ngOnInit() {\r\n    }\r\n\r\n    onCancelClick(): void {\r\n        this.dialogRef.close();\r\n    }\r\n\r\n    onOkClick(markerData: MarkerData): void {\r\n        this.dialogRef.close(markerData.imageName.substr(0, markerData.imageName.length-4));\r\n    }\r\n\r\n    getImageUrl(markerData: MarkerData): string {\r\n        return this.baseUrl + \"assets/img/Stamp/\" + markerData.imageName;\r\n    }\r\n}\r\n","module.exports = \".mat-dialog-title {\\r\\n    border-bottom: 1px solid #FF9900;\\r\\n    color: #f90;\\r\\n    font-size: 15px;\\r\\n    margin: -24px -24px 0px -24px;\\r\\n    min-width: 200px;\\r\\n    padding: 1px 10px;\\r\\n}\\r\\n\\r\\n.mat-dialog-content {\\r\\n    color: white;\\r\\n    font-size: 15px;\\r\\n    height: 100px;\\r\\n    min-width: 200px;\\r\\n    padding: 10px 10px;\\r\\n}\\r\\n\\r\\n.mat-dialog-actions { margin-right: -12px; }\\r\\n\\r\\n.mat-form-field { }\\r\\n\\r\\n.mat-raised-button {\\r\\n    background-color: #444;\\r\\n    border: 1px solid #777;\\r\\n    border-radius: 3px;\\r\\n    color: white;\\r\\n    font-size: 13px;\\r\\n    margin-left: 6px;\\r\\n    padding: 1px;\\r\\n    width: 100px;\\r\\n}\\r\\n\\r\\n.mat-raised-button:disabled:hover { color: #999; }\\r\\n\\r\\n.mat-raised-button:hover { color: #f90; }\\r\\n\\r\\n.mat-dialog-actions { flex-direction: row-reverse; }\\r\\n\\r\\n.matInput {\\r\\n    caret-color: #F90;\\r\\n    color: green;\\r\\n}\\r\\n\\r\\n.mat-input-element { caret-color: #F90; }\\r\\n\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy9kaWFsb2cvc2VsZWN0LXN0dWR5ZGF0ZS1kaWFsb2cvc2VsZWN0LXN0dWR5ZGF0ZS1kaWFsb2cuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGdDQUFnQztJQUNoQyxXQUFXO0lBQ1gsZUFBZTtJQUNmLDZCQUE2QjtJQUM3QixnQkFBZ0I7SUFDaEIsaUJBQWlCO0FBQ3JCOztBQUVBO0lBQ0ksWUFBWTtJQUNaLGVBQWU7SUFDZixhQUFhO0lBQ2IsZ0JBQWdCO0lBQ2hCLGtCQUFrQjtBQUN0Qjs7QUFFQSxzQkFBc0IsbUJBQW1CLEVBQUU7O0FBRTNDLGtCQUFrQjs7QUFFbEI7SUFDSSxzQkFBc0I7SUFDdEIsc0JBQXNCO0lBQ3RCLGtCQUFrQjtJQUNsQixZQUFZO0lBQ1osZUFBZTtJQUNmLGdCQUFnQjtJQUNoQixZQUFZO0lBQ1osWUFBWTtBQUNoQjs7QUFFQSxvQ0FBb0MsV0FBVyxFQUFFOztBQUVqRCwyQkFBMkIsV0FBVyxFQUFFOztBQUV4QyxzQkFBc0IsMkJBQTJCLEVBQUU7O0FBRW5EO0lBQ0ksaUJBQWlCO0lBQ2pCLFlBQVk7QUFDaEI7O0FBRUEscUJBQXFCLGlCQUFpQixFQUFFIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50cy9kaWFsb2cvc2VsZWN0LXN0dWR5ZGF0ZS1kaWFsb2cvc2VsZWN0LXN0dWR5ZGF0ZS1kaWFsb2cuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5tYXQtZGlhbG9nLXRpdGxlIHtcclxuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjRkY5OTAwO1xyXG4gICAgY29sb3I6ICNmOTA7XHJcbiAgICBmb250LXNpemU6IDE1cHg7XHJcbiAgICBtYXJnaW46IC0yNHB4IC0yNHB4IDBweCAtMjRweDtcclxuICAgIG1pbi13aWR0aDogMjAwcHg7XHJcbiAgICBwYWRkaW5nOiAxcHggMTBweDtcclxufVxyXG5cclxuLm1hdC1kaWFsb2ctY29udGVudCB7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBmb250LXNpemU6IDE1cHg7XHJcbiAgICBoZWlnaHQ6IDEwMHB4O1xyXG4gICAgbWluLXdpZHRoOiAyMDBweDtcclxuICAgIHBhZGRpbmc6IDEwcHggMTBweDtcclxufVxyXG5cclxuLm1hdC1kaWFsb2ctYWN0aW9ucyB7IG1hcmdpbi1yaWdodDogLTEycHg7IH1cclxuXHJcbi5tYXQtZm9ybS1maWVsZCB7IH1cclxuXHJcbi5tYXQtcmFpc2VkLWJ1dHRvbiB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDQ0O1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgIzc3NztcclxuICAgIGJvcmRlci1yYWRpdXM6IDNweDtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIGZvbnQtc2l6ZTogMTNweDtcclxuICAgIG1hcmdpbi1sZWZ0OiA2cHg7XHJcbiAgICBwYWRkaW5nOiAxcHg7XHJcbiAgICB3aWR0aDogMTAwcHg7XHJcbn1cclxuXHJcbi5tYXQtcmFpc2VkLWJ1dHRvbjpkaXNhYmxlZDpob3ZlciB7IGNvbG9yOiAjOTk5OyB9XHJcblxyXG4ubWF0LXJhaXNlZC1idXR0b246aG92ZXIgeyBjb2xvcjogI2Y5MDsgfVxyXG5cclxuLm1hdC1kaWFsb2ctYWN0aW9ucyB7IGZsZXgtZGlyZWN0aW9uOiByb3ctcmV2ZXJzZTsgfVxyXG5cclxuLm1hdElucHV0IHtcclxuICAgIGNhcmV0LWNvbG9yOiAjRjkwO1xyXG4gICAgY29sb3I6IGdyZWVuO1xyXG59XHJcblxyXG4ubWF0LWlucHV0LWVsZW1lbnQgeyBjYXJldC1jb2xvcjogI0Y5MDsgfVxyXG5cclxuIl19 */\"","module.exports = \"\\r\\n<h1 mat-dialog-title\\r\\n    cdkDrag\\r\\n    cdkDragRootElement=\\\".cdk-overlay-pane\\\"\\r\\n    cdkDragHandle>\\r\\n    Select Study Date Range\\r\\n</h1>\\r\\n<mat-dialog-content>\\r\\n    <table>\\r\\n        <tr>\\r\\n            <td></td>\\r\\n            <td style=\\\"width: 10px\\\"></td>\\r\\n            <td></td>\\r\\n        </tr>\\r\\n        <tr>\\r\\n            <td>\\r\\n                <mat-form-field>\\r\\n                    <input matInput [matDatepicker]=\\\"picker1\\\" [min]=\\\"fromMinDate\\\" [max]=\\\"fromMaxDate\\\" placeholder=\\\"From\\\" (dateChange)=\\\"fromDateChanged('change', $event)\\\">\\r\\n                    <mat-datepicker-toggle matSuffix [for]=\\\"picker1\\\"></mat-datepicker-toggle>\\r\\n                    <mat-datepicker #picker1></mat-datepicker>\\r\\n                </mat-form-field>\\r\\n            </td>\\r\\n            <td></td>\\r\\n            <td>\\r\\n                <mat-form-field>\\r\\n                    <input matInput [matDatepicker]=\\\"picker2\\\" [min]=\\\"toMinDate\\\" [max]=\\\"toMaxDate\\\" placeholder=\\\"To\\\" (dateChange)=\\\"toDateChanged('change', $event)\\\">\\r\\n                    <mat-datepicker-toggle matSuffix [for]=\\\"picker2\\\"></mat-datepicker-toggle>\\r\\n                    <mat-datepicker #picker2></mat-datepicker>\\r\\n                </mat-form-field>\\r\\n            </td>\\r\\n        </tr>\\r\\n    </table>\\r\\n</mat-dialog-content>\\r\\n<mat-dialog-actions>\\r\\n    <button class=\\\"mat-raised-button\\\" (click)=\\\"onCancelClick()\\\">\\r\\n        <i class=\\\"glyphicon glyphicon-remove-circle\\\" style=\\\"padding-right: 8px\\\"></i>Cancel\\r\\n    </button>\\r\\n    <button class=\\\"mat-raised-button\\\" (click)=\\\"onOkClick()\\\">\\r\\n        <i class=\\\"glyphicon glyphicon-ok-circle\\\" style=\\\"padding-right: 8px\\\"></i>Ok\\r\\n    </button>\\r\\n</mat-dialog-actions>\\r\\n\"","import { Component, Inject } from \"@angular/core\";\r\nimport { MAT_DIALOG_DATA, MatDialogRef, MatDatepickerInputEvent } from \"@angular/material\";\r\nimport { DateRange } from \"../../../models/dailog-data/date-range\";\r\nimport { DialogService } from \"../../../services/dialog.service\";\r\nimport { MessageBoxType, MessageBoxContent } from \"../../../models/messageBox\";\r\n\r\n// Import DatePicker format\r\nimport { MomentDateAdapter } from \"@angular/material-moment-adapter\";\r\nimport { DateAdapter, MAT_DATE_FORMATS, MAT_DATE_LOCALE } from \"@angular/material/core\";\r\n\r\nexport const MY_FORMATS = {\r\n    parse: {\r\n        dateInput: \"LL\",\r\n    },\r\n    display: {\r\n        dateInput: \"LL\",\r\n        monthYearLabel: \"MMM YYYY\",\r\n        dateA11yLabel: \"LL\",\r\n        monthYearA11yLabel: \"MMMM YYYY\",\r\n    },\r\n};\r\n\r\n@Component({\r\n  selector: 'app-select-studydate-dialog',\r\n  templateUrl: './select-studydate-dialog.component.html',\r\n    styleUrls: ['./select-studydate-dialog.component.css'],\r\n  providers: [\r\n      // i18n\r\n      { provide: MAT_DATE_LOCALE, useValue: \"zh-CN\" },\r\n      { provide: DateAdapter, useClass: MomentDateAdapter, deps: [MAT_DATE_LOCALE] },\r\n      { provide: MAT_DATE_FORMATS, useValue: MY_FORMATS },\r\n  ],\r\n})\r\nexport class SelectStudydateDialogComponent {\r\n    fromMinDate = new Date(1900, 1, 1);\r\n    fromMaxDate = new Date();\r\n\r\n    toMinDate = new Date();\r\n    toMaxDate = new Date();\r\n\r\n\r\n    constructor(\r\n        public dialogRef: MatDialogRef<SelectStudydateDialogComponent>,\r\n        @Inject(MAT_DIALOG_DATA) public dateRange: DateRange,\r\n        private dialogService: DialogService) {\r\n    }\r\n\r\n    onCancelClick(): void {\r\n        this.dialogRef.close();\r\n    }\r\n\r\n    onOkClick(): void {\r\n\r\n\r\n        this.dialogRef.close(this.dateRange);\r\n\r\n    }\r\n\r\n    fromDateChanged(type: string, event: MatDatepickerInputEvent<Date>) {\r\n        this.toMinDate = event.value;\r\n        this.dateRange.dateFrom = event.value;\r\n    }\r\n\r\n    toDateChanged(type: string, event: MatDatepickerInputEvent<Date>) {\r\n        this.fromMaxDate = event.value;\r\n        this.dateRange.dateTo = event.value;\r\n    }\r\n\r\n}\r\n","module.exports = \".nav-button {\\r\\n    /*display: inline-block;*/\\r\\n    background-color: #555555;\\r\\n    border-radius: 1px;\\r\\n    border-width: 1px;\\r\\n    color: white;\\r\\n    margin-left: 2px;\\r\\n    margin-right: 2px;\\r\\n    text-decoration: none;\\r\\n}\\r\\n\\r\\n/*.nav-button:visited {\\r\\n  color: #607D8B;\\r\\n}*/\\r\\n\\r\\n.nav-button:hover { color: #ff9900; }\\r\\n\\r\\n/*.nav-button:active {\\r\\n  color: #039be5;\\r\\n}*/\\r\\n\\r\\n.company-name {\\r\\n    color: white;\\r\\n    font-size: 18px;\\r\\n    font-weight: 600;\\r\\n}\\r\\n\\r\\n.product-name {\\r\\n    color: white;\\r\\n    font-size: 12px;\\r\\n    padding: 15px 2px;\\r\\n}\\r\\n\\r\\n.div-headerbar-nav {\\r\\n    /*display: inline-block;*/\\r\\n    background-color: #555555;\\r\\n    border-radius: 1px;\\r\\n    border-width: 1px;\\r\\n    color: white;\\r\\n    margin-left: 2px;\\r\\n    margin-right: 2px;\\r\\n    text-decoration: none;\\r\\n}\\r\\n\\r\\n.div-headerbar-button {\\r\\n    background-color: #555555;\\r\\n    border-radius: 2px;\\r\\n    border-width: 0px;\\r\\n    color: white;\\r\\n    height: 28px;\\r\\n    padding-top: 3px;\\r\\n    text-decoration: none;\\r\\n}\\r\\n\\r\\n.div-headerbar-button:hover { color: #ff9900; }\\r\\n\\r\\n.div-headerbar-button:focus { outline: none; }\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy9oZWFkZXItYmFyL2hlYWRlci1iYXIuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLHlCQUF5QjtJQUN6Qix5QkFBeUI7SUFDekIsa0JBQWtCO0lBQ2xCLGlCQUFpQjtJQUNqQixZQUFZO0lBQ1osZ0JBQWdCO0lBQ2hCLGlCQUFpQjtJQUNqQixxQkFBcUI7QUFDekI7O0FBRUE7O0VBRUU7O0FBRUYsb0JBQW9CLGNBQWMsRUFBRTs7QUFFcEM7O0VBRUU7O0FBRUY7SUFDSSxZQUFZO0lBQ1osZUFBZTtJQUNmLGdCQUFnQjtBQUNwQjs7QUFFQTtJQUNJLFlBQVk7SUFDWixlQUFlO0lBQ2YsaUJBQWlCO0FBQ3JCOztBQUVBO0lBQ0kseUJBQXlCO0lBQ3pCLHlCQUF5QjtJQUN6QixrQkFBa0I7SUFDbEIsaUJBQWlCO0lBQ2pCLFlBQVk7SUFDWixnQkFBZ0I7SUFDaEIsaUJBQWlCO0lBQ2pCLHFCQUFxQjtBQUN6Qjs7QUFFQTtJQUNJLHlCQUF5QjtJQUN6QixrQkFBa0I7SUFDbEIsaUJBQWlCO0lBQ2pCLFlBQVk7SUFDWixZQUFZO0lBQ1osZ0JBQWdCO0lBQ2hCLHFCQUFxQjtBQUN6Qjs7QUFFQSw4QkFBOEIsY0FBYyxFQUFFOztBQUU5Qyw4QkFBOEIsYUFBYSxFQUFFIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50cy9oZWFkZXItYmFyL2hlYWRlci1iYXIuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5uYXYtYnV0dG9uIHtcclxuICAgIC8qZGlzcGxheTogaW5saW5lLWJsb2NrOyovXHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNTU1NTU1O1xyXG4gICAgYm9yZGVyLXJhZGl1czogMXB4O1xyXG4gICAgYm9yZGVyLXdpZHRoOiAxcHg7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBtYXJnaW4tbGVmdDogMnB4O1xyXG4gICAgbWFyZ2luLXJpZ2h0OiAycHg7XHJcbiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XHJcbn1cclxuXHJcbi8qLm5hdi1idXR0b246dmlzaXRlZCB7XHJcbiAgY29sb3I6ICM2MDdEOEI7XHJcbn0qL1xyXG5cclxuLm5hdi1idXR0b246aG92ZXIgeyBjb2xvcjogI2ZmOTkwMDsgfVxyXG5cclxuLyoubmF2LWJ1dHRvbjphY3RpdmUge1xyXG4gIGNvbG9yOiAjMDM5YmU1O1xyXG59Ki9cclxuXHJcbi5jb21wYW55LW5hbWUge1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gICAgZm9udC1zaXplOiAxOHB4O1xyXG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcclxufVxyXG5cclxuLnByb2R1Y3QtbmFtZSB7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBmb250LXNpemU6IDEycHg7XHJcbiAgICBwYWRkaW5nOiAxNXB4IDJweDtcclxufVxyXG5cclxuLmRpdi1oZWFkZXJiYXItbmF2IHtcclxuICAgIC8qZGlzcGxheTogaW5saW5lLWJsb2NrOyovXHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNTU1NTU1O1xyXG4gICAgYm9yZGVyLXJhZGl1czogMXB4O1xyXG4gICAgYm9yZGVyLXdpZHRoOiAxcHg7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBtYXJnaW4tbGVmdDogMnB4O1xyXG4gICAgbWFyZ2luLXJpZ2h0OiAycHg7XHJcbiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XHJcbn1cclxuXHJcbi5kaXYtaGVhZGVyYmFyLWJ1dHRvbiB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNTU1NTU1O1xyXG4gICAgYm9yZGVyLXJhZGl1czogMnB4O1xyXG4gICAgYm9yZGVyLXdpZHRoOiAwcHg7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBoZWlnaHQ6IDI4cHg7XHJcbiAgICBwYWRkaW5nLXRvcDogM3B4O1xyXG4gICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xyXG59XHJcblxyXG4uZGl2LWhlYWRlcmJhci1idXR0b246aG92ZXIgeyBjb2xvcjogI2ZmOTkwMDsgfVxyXG5cclxuLmRpdi1oZWFkZXJiYXItYnV0dG9uOmZvY3VzIHsgb3V0bGluZTogbm9uZTsgfVxyXG4iXX0= */\"","module.exports = \"<div class=\\\"container-fluid\\\">\\r\\n    <div class=\\\"navbar-header\\\">\\r\\n        <table>\\r\\n            <tr>\\r\\n                <td>\\r\\n                    <!--<div class=\\\"navbar-brand\\\" href=\\\"#\\\">\\r\\n                        <img src=\\\"../../../assets/img/Carestream.svg\\\">\\r\\n                    </div>-->\\r\\n                    <div class=\\\"company-name\\\">Carestream</div>\\r\\n                </td>\\r\\n                <td>\\r\\n                    <div class=\\\"product-name\\\">Image Suite</div>\\r\\n                </td>\\r\\n                <td>\\r\\n                    <div class=\\\"nav-button\\\" style=\\\"padding-left: 4px; padding-right: 4px\\\">\\r\\n                        <button id=\\\"headerButton-worklist\\\" class=\\\"div-headerbar-button\\\" (click)=\\\"showViewerShell(null)\\\">Worklist</button>\\r\\n                    </div>\\r\\n                </td>\\r\\n                <td *ngFor=\\\"let viewerShellData of getViewerShellDataList()\\\">\\r\\n                    <div class=\\\"nav-button\\\">\\r\\n                        <button [id]=\\\"getId(viewerShellData)\\\" class=\\\"div-headerbar-button\\\" (click)=\\\"showViewerShell(viewerShellData)\\\">{{viewerShellData.getName()}}</button>\\r\\n                        <button class=\\\"div-headerbar-button\\\" (click)=\\\"closeViewerShell(viewerShellData)\\\">x</button>\\r\\n                    </div>\\r\\n                </td>\\r\\n            </tr>\\r\\n        </table>\\r\\n    </div>\\r\\n</div>\\r\\n\"","import { Component, OnInit, SimpleChanges, AfterContentInit, AfterViewInit, AfterViewChecked } from \"@angular/core\";\r\nimport { ShellNavigatorService } from \"../../services/shell-navigator.service\";\r\nimport { Subscription } from \"rxjs\";\r\nimport { ViewerShellData } from \"../../models/viewer-shell-data\";\r\n\r\n@Component({\r\n    selector: \"app-header-bar\",\r\n    templateUrl: \"./header-bar.component.html\",\r\n    styleUrls: [\"./header-bar.component.css\"]\r\n})\r\nexport class HeaderBarComponent implements OnInit, AfterContentInit, AfterViewInit, AfterViewChecked {\r\n\r\n    subscriptionShellNavigated: Subscription;\r\n\r\n    // Do NOT need to subscribe on shellCreated message, since when a new ViewerShell is created, \r\n    // shellNavigatorService.viewerShellDataList will updated, and this will update the UI of \r\n    // header-bar page\r\n    constructor(private shellNavigatorService: ShellNavigatorService) {\r\n        this.subscriptionShellNavigated = shellNavigatorService.shellSelected$.subscribe(\r\n            viewerShellData => { this.highlightStudyButton(viewerShellData); });\r\n    }\r\n\r\n    ngOnInit() {\r\n    }\r\n\r\n    ngAfterContentInit() {\r\n\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n    }\r\n\r\n    ngAfterViewChecked(): void {\r\n        this.highlightStudyButton(this.shellNavigatorService.viewerShellDataHighlighted);\r\n    }\r\n\r\n    getViewerShellDataList() {\r\n        return this.shellNavigatorService.viewerShellDataList;\r\n    }\r\n\r\n    showViewerShell(viewerShellData: ViewerShellData) {\r\n        this.shellNavigatorService.shellNavigate(viewerShellData);\r\n    }\r\n\r\n    closeViewerShell(viewerShellData: ViewerShellData) {\r\n        this.shellNavigatorService.shellDelete(viewerShellData);\r\n    }\r\n\r\n    highlightStudyButton(viewerShellData: ViewerShellData) {\r\n        let highlightedId: string;\r\n\r\n        if (viewerShellData === null || viewerShellData === undefined) {\r\n            highlightedId = \"headerButton-worklist\";\r\n        } else {\r\n            highlightedId = viewerShellData.getId();\r\n        }\r\n\r\n        let o = document.getElementById(\"headerButton-worklist\");\r\n        if (o !== undefined && o !== null) {\r\n            o.style.color = (highlightedId === \"headerButton-worklist\") ? \"#ff9900\" : \"white\";\r\n        }\r\n\r\n\r\n        const len = this.getViewerShellDataList().length;\r\n        for (let i = 0; i < len; i++) {\r\n            const id = `headerButton${this.getViewerShellDataList()[i].getId()}`;\r\n            o = document.getElementById(id);\r\n            if (o !== undefined && o !== null) {\r\n                o.style.color = (this.getViewerShellDataList()[i].getId() === highlightedId) ? \"#ff9900\" : \"white\";\r\n            }\r\n        }\r\n    }\r\n\r\n    getId(viewerShellData: ViewerShellData): string {\r\n        return `headerButton${viewerShellData.getId()}`;\r\n    }\r\n}\r\n","module.exports = \".DivLayoutViewer {\\r\\n    background-color: #555555;\\r\\n    /*border-top: solid 2px #FFFFFF;\\r\\n  border-bottom: solid 2px #FFFFFF;\\r\\n  border-left: solid 2px #FFFFFF;\\r\\n  border-right: solid 2px #FFFFFF;*/\\r\\n    border: 1px solid #555555;\\r\\n    color: #F5F5F5;\\r\\n    display: flex;\\r\\n    height: 100%;\\r\\n    margin: 0 auto;\\r\\n    width: 100%;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy92aWV3ZXItc2hlbGwvZ3JvdXAtdmlld2VyL2dyb3VwLXZpZXdlci5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0kseUJBQXlCO0lBQ3pCOzs7bUNBRytCO0lBQy9CLHlCQUF5QjtJQUN6QixjQUFjO0lBQ2QsYUFBYTtJQUNiLFlBQVk7SUFDWixjQUFjO0lBQ2QsV0FBVztBQUNmIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50cy92aWV3ZXItc2hlbGwvZ3JvdXAtdmlld2VyL2dyb3VwLXZpZXdlci5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLkRpdkxheW91dFZpZXdlciB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNTU1NTU1O1xyXG4gICAgLypib3JkZXItdG9wOiBzb2xpZCAycHggI0ZGRkZGRjtcclxuICBib3JkZXItYm90dG9tOiBzb2xpZCAycHggI0ZGRkZGRjtcclxuICBib3JkZXItbGVmdDogc29saWQgMnB4ICNGRkZGRkY7XHJcbiAgYm9yZGVyLXJpZ2h0OiBzb2xpZCAycHggI0ZGRkZGRjsqL1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgIzU1NTU1NTtcclxuICAgIGNvbG9yOiAjRjVGNUY1O1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGhlaWdodDogMTAwJTtcclxuICAgIG1hcmdpbjogMCBhdXRvO1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbn1cclxuIl19 */\"","module.exports = \"<div class=\\\"DivLayoutViewer\\\" [id]=\\\"getId()\\\" (click)=\\\"onSelected()\\\" [style.border]=\\\"getBorderStyle()\\\">\\r\\n    <div class=\\\"div-flex-column\\\" *ngFor=\\\"let a of Arr(groupData.imageMatrix.colCount).fill(1); let colIndex = index\\\">\\r\\n        <div class=\\\"div-flex-row\\\" *ngFor=\\\"let a of Arr(groupData.imageMatrix.rowCount).fill(1); let rowIndex = index\\\">\\r\\n            <app-image-viewer [imageData]=\\\"getImageData(rowIndex,colIndex)\\\" class=\\\"div-flex-row\\\">\\r\\n            </app-image-viewer>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\"","import { Component, OnInit, Input, AfterContentInit, ViewChildren, QueryList } from \"@angular/core\";\r\nimport { ImageSelectorService } from \"../../../services/image-selector.service\";\r\nimport { ImageHangingProtocol } from \"../../../models/hanging-protocol\";\r\nimport { HangingProtocolService } from \"../../../services/hanging-protocol.service\";\r\nimport { Subscription } from \"rxjs\";\r\nimport { ViewerGroupData } from \"../../../models/viewer-group-data\";\r\nimport { ViewerImageData } from \"../../../models/viewer-image-data\";\r\nimport { ImageViewerComponent } from \"./image-viewer/image-viewer.component\";\r\nimport { Image } from \"../../../models/pssi\";\r\nimport { LogService } from \"../../../services/log.service\";\r\n\r\n@Component({\r\n    selector: \"app-group-viewer\",\r\n    templateUrl: \"./group-viewer.component.html\",\r\n    styleUrls: [\"./group-viewer.component.css\"]\r\n})\r\nexport class GroupViewerComponent implements OnInit, AfterContentInit {\r\n    Arr = Array; //Array type captured in a variable\r\n    _groupData: ViewerGroupData;\r\n    logPrefix: string;\r\n\r\n    imageDataList: ViewerImageData[];\r\n\r\n    @ViewChildren(ImageViewerComponent)\r\n    childImages: QueryList<ImageViewerComponent>;\r\n\r\n    @Input()\r\n    set groupData(groupData: ViewerGroupData) {\r\n        this.logPrefix = \"Group\" + groupData.getId() + \": \";\r\n        const log = this.logPrefix + \"set groupData, protocol is \" + ImageHangingProtocol[groupData.imageHangingProtocol];\r\n        this.logService.debug(log);\r\n\r\n        this._groupData = groupData;    \r\n        \r\n        this.setImageLayout(this.groupData.imageHangingProtocol);\r\n    }\r\n\r\n    get groupData() {\r\n        return this._groupData;\r\n    }\r\n\r\n    selected = false;\r\n\r\n    subscriptionThumbnailSelection: Subscription;\r\n    subscriptionImageSelection: Subscription;\r\n    subscriptionImageLayoutChange: Subscription;\r\n\r\n    constructor(private imageSelectorService: ImageSelectorService,\r\n        private hangingProtocolService: HangingProtocolService,\r\n        private logService: LogService) {\r\n        this.subscriptionImageSelection = imageSelectorService.imageSelected$.subscribe(\r\n            viewerImageData => {\r\n                this.doSelectGroup(viewerImageData);\r\n            });\r\n\r\n        this.subscriptionThumbnailSelection = imageSelectorService.thumbnailSelected$.subscribe(\r\n            image => {\r\n                this.doSelectGroupByThumbnail(image);\r\n            });\r\n\r\n        this.subscriptionImageLayoutChange = imageSelectorService.imageLayoutChanged$.subscribe(\r\n            imageLayoutStyle => {\r\n                this.onChangeImageLayout(imageLayoutStyle);\r\n            });\r\n\r\n        this.logService.debug(\"Group: a new GroupViewerComponent is created!\");\r\n    }\r\n\r\n    ngOnInit() {\r\n\r\n    }\r\n\r\n    ngAfterContentInit() {\r\n    }\r\n\r\n    ngAfterViewChecked() {\r\n        if (this.childImages) {\r\n            this.setHeight(this.childImages.first.canvas.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.clientHeight);\r\n\r\n            this.childImages.forEach(child => child.adjustHeight());\r\n        }\r\n    }\r\n\r\n    onSelected() {\r\n    }\r\n\r\n    doSelectGroup(viewerImageData: ViewerImageData) {\r\n        this.selected = (this._groupData === viewerImageData.groupData);\r\n    }\r\n\r\n    doSelectGroupByThumbnail(image: Image) {\r\n        const find = this._groupData.imageDataList.find(imageData => imageData.image === image);\r\n        this.selected = (find !== undefined);\r\n    }\r\n\r\n    getBorderStyle(): string {\r\n        return this.selected ? \"1px solid green\" : \"1px solid #555555\";\r\n    }\r\n\r\n    //doSelectById(id: string, selected: boolean): void {\r\n    //  const o = document.getElementById(id);\r\n    //  if (o !== undefined && o !== null) {\r\n    //    o.style.border = selected ? '1px solid yellow' : '1px solid #555555';\r\n    //  }\r\n    //}\r\n\r\n    //doSelectByImageViewerId(imageViewerId: string): void {\r\n    //  const id = this.groupData.getId();\r\n    //  this.selected = imageViewerId.startsWith(id);\r\n    //  var divId = 'DivLayoutViewer' + id;\r\n\r\n    //  this.doSelectById(divId, this.selected);\r\n    //}\r\n\r\n    onChangeImageLayout(imageLayoutStyle: number): void {\r\n        if (this.selected) {\r\n            this.setImageLayout(imageLayoutStyle);\r\n        }\r\n    }\r\n\r\n    setImageLayout(imageLayoutStyle: number): void {\r\n        if (this.childImages)\r\n        {\r\n            this.childImages.forEach(child => child.setHeight(0));\r\n        }\r\n        \r\n        this.hangingProtocolService.applyImageHangingProtocol(this.groupData, imageLayoutStyle);\r\n        this.imageDataList = this.groupData.imageDataList;\r\n        this.onResize();\r\n    }\r\n\r\n    getId(): string {\r\n        return `DivLayoutViewer${this.groupData.getId()}`;\r\n    }\r\n\r\n    onResize() {\r\n        if (!this.childImages)\r\n            return;\r\n\r\n        this.logService.debug(\"Group: onResize()\");\r\n\r\n        this.childImages.forEach((imageViewer, index) => {\r\n            \r\n            imageViewer.onResize();\r\n        });\r\n    }\r\n\r\n    getImageData(rowIndex: number, colIndex: number): ViewerImageData {\r\n        const imageIndex = rowIndex * this.groupData.imageMatrix.colCount + colIndex;\r\n        return this.imageDataList[imageIndex];\r\n       // return this.groupData.getImage(rowIndex, colIndex);\r\n    }\r\n\r\n    setHeight(height: number) {\r\n        const o = document.getElementById(this.getId());\r\n        if (o !== undefined && o !== null) {\r\n            if (this.childImages) {\r\n                this.childImages.forEach(child => child.setHeight(0));\r\n            }\r\n\r\n            o.style.height = height.toString() + \"px\";\r\n\r\n        }\r\n    }\r\n\r\n    saveSelectedImage() {\r\n        this.childImages.forEach(imageViewer => {\r\n            if (imageViewer.selected) {\r\n                imageViewer.saveImage();\r\n            }\r\n        });\r\n    }\r\n}","module.exports = \".DivImageViewer {\\r\\n    align-items: right;\\r\\n    background-color: #000000;\\r\\n    /*border-top: solid 2px #FFFFFF;\\r\\n  border-bottom: solid 2px #FFFFFF;\\r\\n  border-left: solid 2px #FFFFFF;\\r\\n  border-right: solid 2px #FFFFFF;*/\\r\\n    border: 1px solid #555555;\\r\\n    color: #F5F5F5;\\r\\n    display: flex;\\r\\n    flex: 1;\\r\\n    height: 100%;\\r\\n    justify-content: normal;\\r\\n    overflow: hidden;\\r\\n    width: 100%;\\r\\n}\\r\\n\\r\\n.DivImageViewer .viewerCanvas {\\r\\n    -khtml-user-select: none;\\r\\n    -moz-user-select: none;\\r\\n    -ms-user-select: none;\\r\\n    -o-user-select: none;\\r\\n    -webkit-touch-callout: none;\\r\\n    -webkit-user-select: none;\\r\\n\\r\\n    background-color: black;\\r\\n    flex: 1;\\r\\n    height: auto;\\r\\n    max-height: 100%;\\r\\n    max-width: 100%;\\r\\n    user-select: none;\\r\\n    width: auto;\\r\\n}\\r\\n\\r\\n.helpElement {\\r\\n    overflow: hidden;\\r\\n    position: absolute;\\r\\n    visibility: hidden;\\r\\n    z-index: -10000000;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy92aWV3ZXItc2hlbGwvZ3JvdXAtdmlld2VyL2ltYWdlLXZpZXdlci9pbWFnZS12aWV3ZXIuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGtCQUFrQjtJQUNsQix5QkFBeUI7SUFDekI7OzttQ0FHK0I7SUFDL0IseUJBQXlCO0lBQ3pCLGNBQWM7SUFDZCxhQUFhO0lBQ2IsT0FBTztJQUNQLFlBQVk7SUFDWix1QkFBdUI7SUFDdkIsZ0JBQWdCO0lBQ2hCLFdBQVc7QUFDZjs7QUFFQTtJQUNJLHdCQUF3QjtJQUN4QixzQkFBc0I7SUFDdEIscUJBQXFCO0lBQ3JCLG9CQUFvQjtJQUNwQiwyQkFBMkI7SUFDM0IseUJBQXlCOztJQUV6Qix1QkFBdUI7SUFDdkIsT0FBTztJQUNQLFlBQVk7SUFDWixnQkFBZ0I7SUFDaEIsZUFBZTtJQUNmLGlCQUFpQjtJQUNqQixXQUFXO0FBQ2Y7O0FBRUE7SUFDSSxnQkFBZ0I7SUFDaEIsa0JBQWtCO0lBQ2xCLGtCQUFrQjtJQUNsQixrQkFBa0I7QUFDdEIiLCJmaWxlIjoic3JjL2FwcC9jb21wb25lbnRzL3ZpZXdlci1zaGVsbC9ncm91cC12aWV3ZXIvaW1hZ2Utdmlld2VyL2ltYWdlLXZpZXdlci5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLkRpdkltYWdlVmlld2VyIHtcclxuICAgIGFsaWduLWl0ZW1zOiByaWdodDtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDAwMDA7XHJcbiAgICAvKmJvcmRlci10b3A6IHNvbGlkIDJweCAjRkZGRkZGO1xyXG4gIGJvcmRlci1ib3R0b206IHNvbGlkIDJweCAjRkZGRkZGO1xyXG4gIGJvcmRlci1sZWZ0OiBzb2xpZCAycHggI0ZGRkZGRjtcclxuICBib3JkZXItcmlnaHQ6IHNvbGlkIDJweCAjRkZGRkZGOyovXHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjNTU1NTU1O1xyXG4gICAgY29sb3I6ICNGNUY1RjU7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleDogMTtcclxuICAgIGhlaWdodDogMTAwJTtcclxuICAgIGp1c3RpZnktY29udGVudDogbm9ybWFsO1xyXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG59XHJcblxyXG4uRGl2SW1hZ2VWaWV3ZXIgLnZpZXdlckNhbnZhcyB7XHJcbiAgICAta2h0bWwtdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgICAtbW96LXVzZXItc2VsZWN0OiBub25lO1xyXG4gICAgLW1zLXVzZXItc2VsZWN0OiBub25lO1xyXG4gICAgLW8tdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgICAtd2Via2l0LXRvdWNoLWNhbGxvdXQ6IG5vbmU7XHJcbiAgICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xyXG5cclxuICAgIGJhY2tncm91bmQtY29sb3I6IGJsYWNrO1xyXG4gICAgZmxleDogMTtcclxuICAgIGhlaWdodDogYXV0bztcclxuICAgIG1heC1oZWlnaHQ6IDEwMCU7XHJcbiAgICBtYXgtd2lkdGg6IDEwMCU7XHJcbiAgICB1c2VyLXNlbGVjdDogbm9uZTtcclxuICAgIHdpZHRoOiBhdXRvO1xyXG59XHJcblxyXG4uaGVscEVsZW1lbnQge1xyXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIHZpc2liaWxpdHk6IGhpZGRlbjtcclxuICAgIHotaW5kZXg6IC0xMDAwMDAwMDtcclxufVxyXG4iXX0= */\"","module.exports = \"<div class=\\\"DivImageViewer\\\" [id]=\\\"getId()\\\" (click)=\\\"onSelected()\\\" [style.border]=\\\"getBorderStyle()\\\">\\r\\n    <!--<div *ngIf=\\\"worklistService.isUsingLocalTestData() && imageData!== null && imageData.image !== null\\\" style=\\\"width: 500px\\\">\\r\\n        <p>\\r\\n            **************************************\\r\\n            Name : {{imageData.image.series.study.patient.patientName}} | \\r\\n            AccNo : {{imageData.image.series.study.accessionNo}} | \\r\\n            Modality : {{imageData.image.series.modality}} | \\r\\n            ImageID : {{imageData.image.id}}\\r\\n        </p>\\r\\n    </div>-->\\r\\n    <canvas [id]=\\\"getCanvasId()\\\" #viewerCanvas class=\\\"viewerCanvas\\\" (keyup)=\\\"onKeyUp($event)\\\" (keydown)=\\\"onKeyDown($event)\\\" tabindex=\\\"0\\\"></canvas>\\r\\n</div>\\r\\n\\r\\n<div #helpElement class=\\\"helpElement\\\"></div>\\r\\n\"","import { Component, OnInit, Input, AfterContentInit, ViewChild, ElementRef, NgZone } from \"@angular/core\";\r\nimport { Location, LocationStrategy, PathLocationStrategy } from \"@angular/common\";\r\nimport { ImageSelectorService } from \"../../../../services/image-selector.service\";\r\nimport { DicomImageService } from \"../../../../services/dicom-image.service\";\r\nimport { AnnotationService } from \"../../../../services/annotation.service\";\r\nimport { ViewContextEnum, ViewContext, OperationEnum, OperationData, ViewContextService } from \"../../../../services/view-context.service\"\r\nimport { Subscription } from \"rxjs\";\r\nimport { Image as DicomImage } from \"../../../../models/pssi\";\r\nimport { ViewerImageData } from \"../../../../models/viewer-image-data\";\r\nimport { WorklistService } from \"../../../../services/worklist.service\";\r\nimport { ConfigurationService } from \"../../../../services/configuration.service\";\r\nimport { DialogService } from \"../../../../services/dialog.service\";\r\nimport { LogService } from \"../../../../services/log.service\";\r\nimport { WindowLevelData } from \"../../../../models/dailog-data/image-process\";\r\nimport { ManualWlDialogComponent } from \"../../../dialog/manual-wl-dialog/manual-wl-dialog.component\";\r\nimport { SelectMarkerDialogComponent } from \"../../../dialog/select-marker-dialog/select-marker-dialog.component\";\r\nimport { FontData } from \"../../../../models/misc-data\"\r\nimport { MessageBoxType, MessageBoxContent, DialogResult } from \"../../../../models/messageBox\";\r\nimport { IImageViewer } from \"../../../../interfaces/image-viewer-interface\";\r\nimport { Point, MouseEventType, AnnType } from \"../../../../models/annotation\";\r\nimport { GraphicOverlayData } from \"../../../../models/overlay\";\r\nimport { AnnObject } from \"../../../../annotation/ann-object\";\r\nimport { AnnTool } from \"../../../../annotation/ann-tool\";\r\nimport { AnnText } from \"../../../../annotation/extend-object/ann-text\";\r\nimport { AnnExtendObject } from \"../../../../annotation/extend-object/ann-extend-object\";\r\nimport { AnnGuide } from \"../../../../annotation/layer-object/ann-guide\";\r\nimport { AnnImageRuler } from \"../../../../annotation/layer-object/ann-image-ruler\";\r\nimport { AnnImage } from \"../../../../annotation/extend-object/ann-image\";\r\nimport { AnnSerialize } from \"../../../../annotation/ann-serialize\";\r\nimport { AnnGraphicOverlay } from \"../../../../annotation/layer-object/ann-graphic-overlay\";\r\nimport { AnnTextOverlay } from \"../../../../annotation/layer-object/ann-text-overlay\";\r\nimport { AnnMagnify } from \"../../../../annotation/layer-object/ann-magnify\";\r\n\r\n@Component({\r\n    selector: \"app-image-viewer\",\r\n    templateUrl: \"./image-viewer.component.html\",\r\n    styleUrls: [\"./image-viewer.component.css\"],\r\n    providers: [Location, { provide: LocationStrategy, useClass: PathLocationStrategy }]\r\n})\r\nexport class ImageViewerComponent implements OnInit, AfterContentInit, IImageViewer {\r\n    private _imageData: ViewerImageData;\r\n    private image: DicomImage;\r\n    private isImageLoaded: boolean;\r\n    private needResize = false;\r\n    selected = false;\r\n    private dragging = false;\r\n\r\n    private baseUrl: string;\r\n    private isViewInited: boolean;\r\n\r\n    private subscriptionThumbnailSelection: Subscription;\r\n    private subscriptionImageSelection: Subscription;\r\n    private subscriptionImageLayoutChange: Subscription;\r\n    private subscriptionViewContextChange: Subscription;\r\n    private subscriptionOperation: Subscription;\r\n\r\n    @ViewChild(\"viewerCanvas\")\r\n    private canvasRef: ElementRef;\r\n    public canvas;\r\n\r\n    @ViewChild(\"helpElement\")\r\n    private helpElementRef: ElementRef;\r\n    private helpElement;\r\n    private hasInitedHelpElement: boolean;\r\n\r\n    //layers\r\n    private imgLayer: any;\r\n    private imgLayerId: string;\r\n    private annLayer: any;\r\n    private annLayerId: string;\r\n    private annLabelLayer: any;\r\n    private annLabelLayerId: string;\r\n    private mgLayer: any;\r\n    private mgLayerId: string;\r\n    private olLayer: any;\r\n    private olLayerId: string;\r\n    private imgRulerLayer: any;\r\n    private imgRulerLayerId: string;\r\n    private tooltipLayer: any;\r\n    private tooltipLayerId: string;\r\n\r\n    private jcImage: any;\r\n    private jcanvas: any;\r\n\r\n    \r\n    private mouseEventHelper: any = {};\r\n    private eventHandlers: any = {};\r\n\r\n    private originalWindowWidth: number;\r\n    private originalWindowCenter: number;\r\n\r\n    private waitingLabel: any;\r\n    private logPrefix: string;\r\n    private curSelectObj: AnnExtendObject;\r\n    private ctrlKeyPressed = false;\r\n\r\n    private annMagnify: AnnMagnify;\r\n    private annGraphicOverlay: AnnGraphicOverlay;\r\n    private annTextOverlay: AnnTextOverlay\r\n    private annGuide: AnnGuide;\r\n    private annImageRuler: AnnImageRuler;\r\n    private annSerialize: AnnSerialize;\r\n\r\n    @Input()\r\n    set imageData(imageData: ViewerImageData) {\r\n        this.logPrefix = \"Image\" + imageData.getId() + \": \";\r\n        const log = this.logPrefix + \"set imageData, image \" + (imageData.image === null ? 'is null' : 'id is ' + imageData.image.id);\r\n        this.logService.debug(log);\r\n\r\n        if (this._imageData !== imageData) {\r\n            this._imageData = imageData;\r\n            this.image = this._imageData.image;\r\n\r\n            // If the view is NOT inited, will load image after view inited ( in ngAfterViewInit )\r\n            // If the view is already inited, which means this component is created before, load image here\r\n            if (this.isViewInited) {\r\n                this.loadImage();\r\n            }\r\n        }\r\n    }\r\n\r\n    get imageData() {\r\n        return this._imageData;\r\n    }\r\n\r\n    constructor(private imageSelectorService: ImageSelectorService,\r\n        private dicomImageService: DicomImageService,\r\n        private configurationService: ConfigurationService,\r\n        private viewContext: ViewContextService,\r\n        public worklistService: WorklistService,\r\n        private dialogService: DialogService,\r\n        private logService: LogService,\r\n        private ngZone: NgZone,\r\n        private annotationService: AnnotationService) {\r\n\r\n        this.subscriptionImageSelection = imageSelectorService.imageSelected$.subscribe(\r\n            viewerImageData => {\r\n                this.doSelectImage(viewerImageData);\r\n            });\r\n\r\n        this.subscriptionThumbnailSelection = imageSelectorService.thumbnailSelected$.subscribe(\r\n            image => {\r\n                this.doSelectImageByThumbnail(image);\r\n            });\r\n\r\n        this.subscriptionViewContextChange = viewContext.viewContextChanged$.subscribe(\r\n            context => {\r\n                if (!(this._imageData.groupData.viewerShellData.hide) && this.selected) {\r\n                    this.setContext(context);\r\n                }\r\n            });\r\n\r\n        this.subscriptionOperation = viewContext.onOperation$.subscribe(\r\n            operation => {\r\n                this.onOperation(operation);\r\n            });\r\n\r\n        this.logService.debug(\"Image: a new ImageViewerComponent is created!\");\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.logService.debug(this.logPrefix + \"ngOnInit\");\r\n        this.baseUrl = this.configurationService.getBaseUrl();\r\n    }\r\n\r\n    ngAfterContentInit() {\r\n        this.logService.debug(this.logPrefix + \"ngAfterContentInit\");\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.logService.debug(this.logPrefix + \"ngAfterViewInit\");\r\n        this.loadImage();\r\n\r\n        \r\n        this.canvas = this.canvasRef.nativeElement;\r\n        this.helpElement = this.helpElementRef.nativeElement;\r\n\r\n        const canvasId = this.getCanvasId();\r\n        jCanvaScript.start(canvasId, true);\r\n        this.jcanvas = jCanvaScript.canvas(canvasId);\r\n\r\n        const parent = this.canvas.parentElement;\r\n        this.canvas.width = parent.clientWidth;\r\n        this.canvas.height = parent.clientHeight;\r\n\r\n        this.jcanvas.width(this.canvas.width);\r\n        this.jcanvas.height(this.canvas.height);\r\n\r\n        this.createLayers(canvasId);\r\n        this.registerCanvasEvents();\r\n        this.registerImgLayerEvents();\r\n\r\n        this.isViewInited = true;\r\n        \r\n\r\n        if (this.image) {\r\n            this.showWaitingText();\r\n        }\r\n\r\n        this.annGuide = new AnnGuide(this);\r\n        this.annImageRuler = new AnnImageRuler(this);\r\n    }\r\n\r\n    private showImage() {\r\n\r\n        if (this.image.cornerStoneImage) {\r\n            this.initHelpElement();\r\n            this.canvas = this.canvasRef.nativeElement;\r\n\r\n            const canvasId = this.getCanvasId();\r\n            jCanvaScript.start(canvasId, true);\r\n            this.jcanvas = jCanvaScript.canvas(canvasId);\r\n\r\n            const parent = this.canvas.parentElement.parentElement;\r\n            this.canvas.width = parent.clientWidth;\r\n            this.canvas.height = parent.clientHeight;\r\n\r\n            this.jcanvas.width(this.canvas.width);\r\n            this.jcanvas.height(this.canvas.height);\r\n\r\n            this.logService.debug(this.logPrefix + 'showImage() - canvas width: ' + this.canvas.width + ', canvas height: ' + this.canvas.height);\r\n\r\n            this.isImageLoaded = false;\r\n            cornerstone.displayImage(this.helpElement, this.image.cornerStoneImage);\r\n\r\n            this.logService.debug(this.logPrefix + 'image is loaded, displaying it...');\r\n        } else {\r\n            this.logService.debug(this.logPrefix + 'local test data, no image to show.');\r\n        }\r\n\r\n        const id = this.getId();\r\n        const index = id.substr(id.length - 4, 4);\r\n        if (index === \"0000\") {\r\n            this.onSelected();\r\n        }\r\n    }\r\n\r\n    private loadImage() {\r\n        //// Make sure this function is called after view is inited.\r\n        //if (!this.isViewInited) {\r\n        //    alert(\"Internal error : Must load image after view is inited\");\r\n        //    return;\r\n        //}\r\n\r\n        // The image is null, which means to clear the image viewer\r\n        if (!this.image) {\r\n            if (this.jcanvas) {\r\n                this.deleteAll();\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (this.image.cornerStoneImage) {\r\n            // The image is already downloaded, show the image\r\n            this.showImage();\r\n        } else {\r\n            // The image is NOT downloaded, get the image from server and show it after download\r\n            this.dicomImageService.getCornerStoneImage(this.image).then(ctImage => this.onImageDownloaded(ctImage));\r\n        }\r\n\r\n    }\r\n\r\n\r\n    private onImageDownloaded(ctImage: any) {\r\n        this.logService.info(this.logPrefix + \"Image is downloaded from server. Start to show it by cornerstone.\");\r\n        this.image.setCornerStoneImage(ctImage);\r\n        this.image.graphicOverlayDataList = this.dicomImageService.getGraphicOverlayList(this.image);\r\n        this.showImage();\r\n    }\r\n\r\n    adjustHeight() {\r\n        const parent = this.canvas.parentElement.parentElement;\r\n        this.setHeight(parent.clientHeight);\r\n    }\r\n\r\n    ngAfterViewChecked() {\r\n        if (this.needResize && this.isImageLoaded) {\r\n            const parent = this.canvas.parentElement.parentElement;\r\n\r\n            \r\n            const curWidth = parent.clientWidth;\r\n            const curHeight = parent.clientHeight;\r\n\r\n            this.canvas.width = curWidth;\r\n            this.canvas.height = curHeight;\r\n            this.jcanvas.width(this.canvas.width);\r\n            this.jcanvas.height(this.canvas.height);\r\n            this.jcanvas.restart();\r\n\r\n            this.logService.debug(this.logPrefix + 'ngAfterViewChecked() - canvas width: ' + this.canvas.width + ', canvas height: ' + this.canvas.height);\r\n            \r\n            if (this.image) {\r\n                this.fitWindow();\r\n                if (this.olLayer) {\r\n                    this.showTextOverlay();\r\n                }\r\n                if (this.imgRulerLayer) {\r\n                    this.annImageRuler.reDraw(this);\r\n                }\r\n            } else {\r\n                this.deleteAll();\r\n            }\r\n\r\n            this.needResize = false;\r\n        }\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this.jcanvas) {\r\n            this.jcanvas.del();\r\n        }\r\n\r\n        if (this.helpElement) {\r\n            cornerstone.disable(this.helpElement);\r\n        }\r\n    }\r\n\r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Implementation of interface IImageViewer\r\n    isCtrlKeyPressed(): boolean {\r\n        return this.ctrlKeyPressed;\r\n    }\r\n\r\n    getImageLayerId(): string {\r\n        return this.imgLayerId;\r\n    }\r\n\r\n    getAnnotationLayerId(): string {\r\n        return this.annLayerId;\r\n    }\r\n\r\n    getAnnLabelLayerId(): string {\r\n        return this.annLabelLayerId;\r\n    }\r\n\r\n    getAnnGuideLayerId(): string {\r\n        return this.tooltipLayerId;\r\n    }\r\n\r\n    getAnnImageRulerLayerId(): string {\r\n        return this.imgRulerLayerId;\r\n    }\r\n\r\n    getTextOverlayLayerId(): string {\r\n        return this.olLayerId;\r\n    }\r\n\r\n    getImageLayer(): any {\r\n        return this.imgLayer;\r\n    }\r\n\r\n    getMgLayer(): any {\r\n        return this.mgLayer;\r\n    }\r\n\r\n    getAnnLabelLayer(): any {\r\n        return this.annLabelLayer;\r\n    }\r\n\r\n    getAnnGuideLayer(): any {\r\n        return this.tooltipLayer;\r\n    }\r\n\r\n    getImage(): DicomImage {\r\n        return this.image;\r\n    }\r\n\r\n    getCanvas(): any {\r\n        return this.canvas;\r\n    }\r\n\r\n    getCtCanvas(): any {\r\n        return cornerstone.getEnabledElement(this.helpElement).canvas;\r\n    }\r\n\r\n    getContext(): ViewContext {\r\n        return this.viewContext.curContext;\r\n    }\r\n\r\n    getBaseUrl(): string {\r\n        return this.baseUrl;\r\n    }\r\n\r\n    getTextFont(): FontData {\r\n        return this.configurationService.getTextOverlayFont();\r\n    }\r\n\r\n    selectAnnotation(annObj: AnnExtendObject) {\r\n        if (annObj) {\r\n            if (this.curSelectObj !== annObj) {\r\n                if (this.curSelectObj) {\r\n                    this.curSelectObj.onSelect(false, false);\r\n                }\r\n\r\n                this.curSelectObj = annObj;\r\n                if (!this.curSelectObj.isSelected()) {\r\n                    this.curSelectObj.onSelect(true, true);\r\n                }\r\n            }\r\n        } else {\r\n            if (this.curSelectObj) {\r\n                if (!this.curSelectObj.isCreated()) {\r\n                    this.deleteAnnotation(this.curSelectObj);\r\n                } else {\r\n                    this.curSelectObj.onSelect(false, false);\r\n                }\r\n\r\n            }\r\n\r\n            this.curSelectObj = undefined;\r\n        }\r\n\r\n        const stepIndex = (this.curSelectObj && this.curSelectObj.isGuideNeeded()) ? this.curSelectObj.getFocusedObj().getStepIndex() : -1;\r\n        if (stepIndex !== -1) {\r\n            this.annGuide.setGuideTargetObj(this.curSelectObj);\r\n            this.annGuide.show(this.curSelectObj.getTypeName(), stepIndex);\r\n        } else {\r\n            this.annGuide.hide();\r\n        }\r\n    }\r\n\r\n    selectNextAnnotation(backward: boolean) {\r\n        const len = this.image.annObjList.length;\r\n        if (len === 0) return;\r\n\r\n        if (!this.curSelectObj) {\r\n            this.selectAnnotation(this.image.annObjList[0]);\r\n            return;\r\n        }\r\n\r\n        let i = 0;\r\n        for (; i < len; i++) {\r\n            if (this.curSelectObj === this.image.annObjList[i]) break;\r\n        }\r\n\r\n        let nextIndex = i;\r\n        if (backward) {\r\n            nextIndex = (i === 0) ? len - 1 : i - 1;\r\n        } else {\r\n            nextIndex = (i === len - 1) ? 0 : i + 1;\r\n        }\r\n        \r\n        this.selectAnnotation(this.image.annObjList[nextIndex]);\r\n    }\r\n\r\n    onAnnotationCreated(annObj: AnnExtendObject) {\r\n        if (!annObj.isCreated()) {\r\n            alert(\"Internal error in onAnnotationCreated()\");\r\n            return;\r\n        }\r\n\r\n        this.image.annObjList.push(annObj);\r\n        if (!annObj.isLoadedFromTag()) {\r\n            this.curSelectObj = annObj;\r\n            this.viewContext.setContext(ViewContextEnum.SelectAnn);\r\n        }\r\n    }\r\n\r\n    stepGuide() {\r\n        this.annGuide.step();\r\n    }\r\n\r\n    getCurrentStepIndex(): number {\r\n        return this.annGuide.getStepIndex();\r\n    }\r\n\r\n    cancelCreate(needRecreate: boolean) {\r\n        this.deleteAnnotation(this.curSelectObj);\r\n        this.curSelectObj = undefined;\r\n        this.annGuide.stepTo(0);\r\n\r\n        if (!needRecreate) {\r\n            this.viewContext.setContext(ViewContextEnum.SelectAnn);\r\n        }\r\n    }\r\n\r\n    selectChildByStepIndex(stepIndex: number) {\r\n        if (this.curSelectObj) {\r\n            this.curSelectObj.selectChildByStepIndex(stepIndex);\r\n        }\r\n    }\r\n\r\n    getCursor(): any {\r\n        this.logService.debug(`Get cursor return ${this.canvas.style.cursor}`);\r\n        return this.canvas.style.cursor;\r\n    }\r\n\r\n    setCursor(cursor: any): void {\r\n        if (!cursor) {\r\n            cursor = this.getCursorFromContext();\r\n        }\r\n        this.logService.debug(`Set cursor to ${cursor}`);\r\n        this.canvas.style.cursor = cursor;\r\n    }\r\n\r\n    isDragging(): boolean {\r\n        return this.dragging;\r\n    }\r\n\r\n    refresh() {\r\n        this.redraw(1);\r\n    }\r\n\r\n    getAnnotationService(): AnnotationService {\r\n        return this.annotationService;\r\n    }\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////'\r\n\r\n    onKeyUp(event) {\r\n\r\n        let needRedraw = true;\r\n        if (event.code === \"Delete\") {\r\n            this.deleteSelectedAnnotation();\r\n        }else if (event.code === \"KeyA\") {\r\n            this.selectNextAnnotation(event.shiftKey);\r\n        } else if (event.code === \"KeyF\") {\r\n            if (this.curSelectObj) {\r\n                this.curSelectObj.onSwitchFocus();\r\n            }\r\n        }\r\n        else if (event.code === \"ArrowUp\" || event.code === \"ArrowDown\" || event.code === \"ArrowLeft\" || event.code === \"ArrowRight\") {\r\n            if (this.curSelectObj) {\r\n                this.curSelectObj.onKeyDown(event);\r\n            } else {\r\n                needRedraw = false;\r\n            }\r\n        } else if (event.code === \"ControlLeft\" || event.code === \"ControlRight\") {\r\n            this.ctrlKeyPressed = false;\r\n            needRedraw = false;\r\n        } \r\n\r\n        if (needRedraw) {\r\n            this.redraw(1);\r\n        }\r\n    }\r\n\r\n    onKeyDown(event) {\r\n\r\n        if (event.code === \"ControlLeft\" || event.code === \"ControlRight\") {\r\n            this.ctrlKeyPressed = true;\r\n        } \r\n    }\r\n\r\n    getId(): string {\r\n        //TODO: make sure the viewid is unique, even two viewer opened the same image\r\n        return `DivImageViewer${this.imageData.getId()}`;\r\n    }\r\n\r\n    getCanvasId(): string {\r\n        //TODO: make sure the canvas is unique, even two viewer opened the same image\r\n        return `viewerCanvas_${this.imageData.getId()}`;\r\n    }\r\n\r\n\r\n\r\n \r\n\r\n    //private checkLoadImage() {\r\n    //    if (!this.isViewInited || (this.image && this.image.cornerStoneImage === undefined)) {\r\n    //        this.logService.debug(this.logPrefix + 'view not inited or image not loaded, wait...');\r\n    //        setTimeout(() => {\r\n    //            this.checkLoadImage();\r\n    //        }, 100);\r\n    //    } else {\r\n\r\n    //        if (!this.image) {\r\n    //            if (this.jcanvas) {\r\n    //                this.jcanvas.clear();\r\n    //            }\r\n                \r\n    //            this.logService.debug(this.logPrefix + 'image is null, clear the canvas.');\r\n    //        } else {\r\n    //            this.initHelpElement();\r\n    //            this.ctImage = this.image.cornerStoneImage;\r\n    //            if (this.ctImage) {\r\n    //                this.canvas = this.canvasRef.nativeElement;\r\n                    \r\n\r\n    //                const canvasId = this.getCanvasId();\r\n    //                jCanvaScript.start(canvasId, true);\r\n    //                this.jcanvas = jCanvaScript.canvas(canvasId);\r\n\r\n    //                const parent = this.canvas.parentElement.parentElement;\r\n    //                this.canvas.width = parent.clientWidth;\r\n    //                this.canvas.height = parent.clientHeight;\r\n\r\n    //                this.jcanvas.width(this.canvas.width);\r\n    //                this.jcanvas.height(this.canvas.height);\r\n\r\n    //                this.logService.debug(this.logPrefix + 'checkLoadImage() - canvas width: ' + this.canvas.width + ', canvas height: ' + this.canvas.height);\r\n\r\n    //                this.isImageLoaded = false;\r\n    //                cornerstone.displayImage(this.helpElement, this.ctImage);\r\n\r\n    //                this.logService.debug(this.logPrefix + 'image is loaded, displaying it...');\r\n    //            }else {\r\n    //                this.logService.debug(this.logPrefix + 'local test data, no image to show.');\r\n    //            }\r\n    //        }\r\n    //    }\r\n    //}\r\n\r\n    private initHelpElement() {\r\n        this.ngZone.runOutsideAngular(() => {\r\n            if (!this.hasInitedHelpElement) {\r\n                this.helpElement = this.helpElementRef.nativeElement;\r\n                //TODO: the init canvas's height and width may too big, should scale to a smaller when first load\r\n                $(this.helpElement).width(this.image.imageColumns).height(this.image.imageRows);\r\n                cornerstone.enable(this.helpElement);\r\n\r\n                var comp = this;\r\n                $(this.helpElement).on(\"cornerstoneimagerendered\",\r\n                    function (e, data) {\r\n                        if (comp.isImageLoaded) { //rendering, or invert\r\n                            comp.onImageRendered(e, data);\r\n                        } else { //first load\r\n                            comp.isImageLoaded = true;\r\n                            comp.onImageLoaded(e, data); //this will set w/l, which will call Rendered again\r\n                        }\r\n                    });\r\n\r\n                this.hasInitedHelpElement = true;\r\n            }\r\n        });\r\n    }\r\n\r\n    private onImageRendered(e, data) {\r\n        this.logService.debug(this.logPrefix + 'onImageRendered() - canvas width: ' + this.canvas.width + ', canvas height: ' + this.canvas.height);\r\n        this.redraw(1);\r\n    }\r\n\r\n    private onImageLoaded(e, data) {\r\n        this.logService.debug(this.logPrefix + 'onImageLoaded() - canvas width: ' + this.canvas.width + ', canvas height: ' + this.canvas.height);\r\n        \r\n        const ctCanvas = cornerstone.getEnabledElement(this.helpElement).canvas;\r\n        this.jcImage = jCanvaScript.image(ctCanvas).layer(this.imgLayerId);\r\n        this.toggleGraphicOverlay(true);\r\n\r\n        //fit window\r\n        this.fitWindow();\r\n\r\n        // Save the original window center/width for later reset.\r\n        this.originalWindowCenter = this.image.cornerStoneImage.windowCenter;\r\n        this.originalWindowWidth = this.image.cornerStoneImage.windowWidth;\r\n\r\n        this.hideWaitingText();\r\n        this.showTextOverlay();\r\n\r\n        this.updateImageTransform();\r\n        this.syncAnnLabelLayerTransform();\r\n        this.viewContext.setContext(ViewContextEnum.SelectAnn);\r\n        this.annSerialize = new AnnSerialize(this.image.annData, this);\r\n        this.deleteAllAnnotation();\r\n        if (!this.annSerialize.createAnn()) {\r\n            this.setContext(this.viewContext.curContext);\r\n        }\r\n\r\n        this.redraw(2);\r\n    }\r\n\r\n    private showWaitingText() {\r\n        this.olLayer.visible(true);\r\n\r\n        const font = this.configurationService.getTextOverlayFont();\r\n        this.waitingLabel = jCanvaScript.text(\"Loading.....\", this.canvas.width / 2, this.canvas.height / 2).layer(this.olLayerId)\r\n            .color(font.color).font(font.getCanvasFontString()).align(\"center\");\r\n        this.redraw(1);\r\n    }\r\n\r\n    private hideWaitingText() {\r\n        if (this.waitingLabel) {\r\n          this.waitingLabel.del();\r\n          this.waitingLabel = null;\r\n        }\r\n    }\r\n\r\n    private showTextOverlay() {\r\n        this.olLayer.visible(true);\r\n        \r\n        if (!this.annTextOverlay) {\r\n            this.annTextOverlay = new AnnTextOverlay(this, this.dicomImageService);\r\n        }\r\n        this.annTextOverlay.redraw();\r\n        this.redraw(1);\r\n    }\r\n\r\n    private createLayers(canvasId) {\r\n        //create layers\r\n\r\n        this.imgLayerId = canvasId + \"_imgLayer\";\r\n        this.imgLayer = jCanvaScript.layer(this.imgLayerId).level(0); //layer to hold the image\r\n        this.imgLayer.id = this.imgLayerId;\r\n        this.imgLayer.needRedraw = true;\r\n\r\n        this.annLayerId = canvasId + \"_annLayer\";\r\n        this.annLayer = jCanvaScript.layer(this.annLayerId).level(1); //layer to draw annotations\r\n        this.annLayer.onBeforeDraw = () => this.onBeforeDrawAnnLayer();\r\n        this.annLayer.id = this.annLayerId;\r\n        this.annLayer.needRedraw = true;\r\n\r\n        this.annLabelLayerId = canvasId + \"_annLabelLayer\";\r\n        this.annLabelLayer = jCanvaScript.layer(this.annLabelLayerId).level(2); //layer to draw annotations label.\r\n        this.annLabelLayer.id = this.annLabelLayerId;\r\n        this.annLabelLayer.needRedraw = true;\r\n\r\n        this.mgLayerId = canvasId + \"_mgLayer\";\r\n        this.mgLayer = jCanvaScript.layer(this.mgLayerId).level(4); //layer to show magnified image\r\n        this.mgLayer.visible(false);\r\n        this.mgLayer.id = this.mgLayerId;\r\n        this.mgLayer.needRedraw = true;\r\n\r\n        this.olLayerId = canvasId + \"_overlayLayer\";\r\n        this.olLayer = jCanvaScript.layer(this.olLayerId).level(10); //layer to show overlay\r\n        this.olLayer.id = this.olLayerId;\r\n        this.olLayer.needRedraw = true;\r\n\r\n        this.imgRulerLayerId = canvasId + \"_imgRulerLayer\"; // layer to show ruler\r\n        this.imgRulerLayer = jCanvaScript.layer(this.imgRulerLayerId).level(9);\r\n        this.imgRulerLayer.id = this.imgRulerLayerId;\r\n        this.imgRulerLayer.needRedraw = true;\r\n\r\n        this.tooltipLayerId = canvasId + \"_tooltipLayer\"; // layer to show tooltip dialog\r\n        this.tooltipLayer = jCanvaScript.layer(this.tooltipLayerId).draggable(true).level(20);\r\n        this.tooltipLayer.id = this.tooltipLayerId;\r\n        this.tooltipLayer.needRedraw = true;\r\n    }\r\n\r\n    private onBeforeDrawAnnLayer() {\r\n        if (!this.isImageLoaded)\r\n            return;\r\n\r\n        //apply transform\r\n        this.annLayer.transform(1, 0, 0, 1, 0, 0, true);\r\n        this.annLayer.optns.scaleMatrix = this.imgLayer.optns.scaleMatrix;\r\n        this.annLayer.optns.rotateMatrix = this.imgLayer.optns.rotateMatrix;\r\n        this.annLayer.optns.translateMatrix = this.imgLayer.optns.translateMatrix;\r\n        this.annLayer.scale(1);\r\n\r\n        this.syncAnnLabelLayerTransform();\r\n    }\r\n\r\n    private syncAnnLabelLayerTransform() {\r\n        this.annLabelLayer.transform(1, 0, 0, 1, 0, 0, true);\r\n        this.annLabelLayer.optns.scaleMatrix = this.imgLayer.optns.scaleMatrix;\r\n        this.annLabelLayer.optns.translateMatrix = this.imgLayer.optns.translateMatrix;\r\n        this.annLabelLayer.scale(1);\r\n    }\r\n\r\n    onSelected() {\r\n        this.imageSelectorService.selectImage(this.imageData);\r\n        this.canvas.focus();\r\n    }\r\n\r\n    getBorderStyle(): string {\r\n        return this.selected ? \"1px solid #F90\" : \"1px solid #555555\";\r\n    }\r\n\r\n    doSelectImage(viewerImageData: ViewerImageData) {\r\n        this.selected = (this._imageData === viewerImageData);\r\n    }\r\n\r\n    doSelectImageByThumbnail(image: DicomImage) {\r\n        this.selected = (this.image === image);\r\n    }\r\n\r\n    setHeight(height: number) {\r\n        const o = document.getElementById(this.getId());\r\n        if (o !== undefined && o !== null) {\r\n            o.style.height = height.toString() + \"px\";\r\n        }\r\n    }\r\n\r\n    //private doSelectById(id: string, selected: boolean): void {\r\n    //    const o = document.getElementById(id);\r\n    //    if (o !== undefined && o !== null) {\r\n    //        o.style.border = selected ? '1px solid green' : '1px solid #555555';\r\n    //    }\r\n    //}\r\n\r\n    //private doSelectByImageViewerId(imageViewerId: string): void {\r\n    //    var selectedDivId = \"DivImageViewer\" + imageViewerId;\r\n    //    var divId = 'DivImageViewer' + this.imageData.getId();\r\n    //    this.selected = selectedDivId === divId;\r\n    //    this.doSelectById(divId, this.selected);\r\n    //}\r\n\r\n    private setContext(context: ViewContext) {\r\n        //const draggable = (context.action == ViewContextEnum.Pan) ||\r\n        //    (context.action == ViewContextEnum.Select && this.curSelectObj == undefined);\r\n        if (!this.isImageLoaded) {\r\n            return;\r\n        }\r\n\r\n        const draggable = context.action === ViewContextEnum.Pan;\r\n        this.draggable(draggable);\r\n\r\n        //each time context changed, we should unselect cur selected object\r\n        this.selectAnnotation(undefined);\r\n        this.annGuide.hide();\r\n\r\n        //if (previousCtx == contextEnum.create && ctx != contextEnum.create && this.tooltips) {\r\n        //    //hide all tooltips\r\n        //    var theObj = this.tooltips;\r\n        //    var propertys = Object.getOwnPropertyNames(theObj);\r\n        //    propertys.forEach(function (prop) {\r\n        //        var obj = theObj[prop];\r\n        //        if (obj instanceof annTooltip) {\r\n        //            log('hide tooltip');\r\n        //            obj.show(false);\r\n        //        }\r\n        //    });\r\n        //}\r\n\r\n        this.setCursorFromContext();\r\n    }\r\n\r\n    private onOperation(operation: OperationData) {\r\n        if (!this.isImageLoaded)\r\n            return;\r\n\r\n        if (!this.selected)\r\n            return;\r\n\r\n        switch (operation.type) {\r\n            case OperationEnum.Rotate:{\r\n                this.rotate(operation.data.angle);\r\n                break;\r\n            }\r\n\r\n            case OperationEnum.Flip:{\r\n                this.flip(operation.data);\r\n                break;\r\n            }\r\n\r\n            case OperationEnum.Invert:{\r\n                this.invert();\r\n                break;\r\n            }\r\n\r\n            case OperationEnum.FitWidth:\r\n            case OperationEnum.FitHeight:\r\n            case OperationEnum.FitOriginal:\r\n            case OperationEnum.FitWindow:{\r\n                this.doFit(operation.type);\r\n                break;\r\n            }\r\n\r\n            case OperationEnum.ShowOverlay:{\r\n                this.olLayer.visible(operation.data.show);\r\n                break;\r\n            }\r\n\r\n            case OperationEnum.ShowRuler:{\r\n                this.imgRulerLayer.visible(operation.data.show);\r\n                break;\r\n            }\r\n\r\n            case OperationEnum.ShowAnnotation:{\r\n                this.annLayer.visible(operation.data.show);\r\n                break;\r\n            }\r\n\r\n            case OperationEnum.ShowGraphicOverlay: {\r\n                this.toggleGraphicOverlay(operation.data.show);\r\n                break;\r\n            }\r\n\r\n            case OperationEnum.ManualWL:{\r\n                this.doManualWl();\r\n                break;\r\n            }\r\n\r\n            case OperationEnum.ToggleKeyImage:{\r\n                if (this.image.keyImage === 'Y') {\r\n                    this.image.keyImage = 'N';\r\n                    this.setKeyImage(false);\r\n                } else {\r\n                    this.image.keyImage = 'Y';\r\n                    this.setKeyImage(true);\r\n                }\r\n                break;\r\n            }\r\n\r\n            case OperationEnum.Reset: {\r\n                this.doReset();\r\n                break;\r\n            }\r\n        }\r\n\r\n        this.redraw(1);\r\n    }\r\n\r\n    private getCursorFromContext() {\r\n        const curContext = this.viewContext.curContext;\r\n        const cursorUrl = `url(${this.baseUrl}/assets/img/cursor/{0}.cur),move`;\r\n\r\n        let cursor = \"default\";\r\n\r\n        switch (curContext.action) {\r\n            case ViewContextEnum.WL:\r\n                cursor = cursorUrl.format(\"adjustwl\");\r\n                break;\r\n\r\n            case ViewContextEnum.Pan:\r\n                cursor = cursorUrl.format(\"hand\");\r\n                break;\r\n\r\n            case ViewContextEnum.Zoom:\r\n                cursor = cursorUrl.format(\"zoom\");\r\n                break;\r\n\r\n            case ViewContextEnum.Magnify:\r\n                cursor = cursorUrl.format(\"magnify\");\r\n                break;\r\n\r\n            case ViewContextEnum.ROIZoom:\r\n                cursor = cursorUrl.format(\"rectzoom\");\r\n                break;\r\n\r\n            case ViewContextEnum.SelectAnn:\r\n                cursor = cursorUrl.format(\"select\");\r\n                break;\r\n\r\n            case ViewContextEnum.CreateAnn:\r\n                const cursorName = this.annotationService.getCursorNameByType(curContext.data);\r\n                cursor = cursorUrl.format(cursorName);\r\n                break;\r\n        }\r\n\r\n        return cursor;\r\n    }\r\n\r\n    private setCursorFromContext() {\r\n        const cursor = this.getCursorFromContext();\r\n        this.setCursor(cursor);\r\n\r\n        const curContext = this.viewContext.curContext;\r\n        if (curContext.action === ViewContextEnum.CreateAnn) {\r\n            const annDefData = this.annotationService.getAnnDefDataByType(curContext.data);\r\n            if (!annDefData) return;\r\n\r\n            if (annDefData.needGuide) {\r\n                this.annGuide.show(annDefData.className);\r\n                this.redraw(1);\r\n            } else if (annDefData.cursorName === \"ann_stamp\") {\r\n                this.selectMarker();\r\n            }\r\n        }\r\n    }\r\n\r\n    rotate(angle) {\r\n        if (angle == 0) //rotate 0 will cause the transform messed\r\n            return;\r\n\r\n        this.imgLayer.rotate(angle, \"center\");\r\n        this.updateImageTransform();\r\n\r\n        this.image.annObjList.forEach(obj => obj.onRotate(angle));\r\n    }\r\n\r\n    flip(flipVertical: boolean) {\r\n\r\n        const viewPort = cornerstone.getViewport(this.helpElement);\r\n\r\n        const rotateAngle = this.getRotate();\r\n        if (Math.abs(rotateAngle % 180) === 90) {\r\n            flipVertical = !flipVertical;\r\n        }\r\n\r\n        if (flipVertical) {\r\n            viewPort.vflip = !viewPort.vflip;\r\n        } else {\r\n            viewPort.hflip = !viewPort.hflip;\r\n        }\r\n\r\n        cornerstone.setViewport(this.helpElement, viewPort);\r\n\r\n        this.image.annObjList.forEach(annObj => annObj.onFlip(flipVertical));\r\n        if (this.annGraphicOverlay) {\r\n            this.annGraphicOverlay.onFlip(flipVertical);\r\n        }\r\n    }\r\n\r\n    invert() {\r\n        const viewPort = cornerstone.getViewport(this.helpElement);\r\n        viewPort.invert = !viewPort.invert;\r\n        cornerstone.setViewport(this.helpElement, viewPort);\r\n    }\r\n\r\n    scale(value) {\r\n        if (value > 0) {\r\n            this.imgLayer.scale(value);\r\n            this.updateImageTransform();\r\n\r\n            //var totalScale = this.getScale();\r\n            ////adjust objects' size\r\n            //this.image.annObjList.forEach(function (obj) {\r\n            //    if (obj.onScale) {\r\n            //        obj.onScale(totalScale);\r\n            //    }\r\n            //});\r\n\r\n            //this.updateTag(dicomTag.customScale, totalScale.toPrecision(2));\r\n\r\n            //if (value !== 1) {\r\n            //    this.refreshRuler();\r\n            //}\r\n        }\r\n    }\r\n\r\n    translate(x, y) {\r\n        this.imgLayer.translate(x, y);\r\n        this.updateImageTransform();\r\n\r\n        //this.image.annObjList.forEach(function (obj) {\r\n        //    if (obj.onTranslate) {\r\n        //        obj.onTranslate();\r\n        //    }\r\n        //});\r\n    }\r\n\r\n    getScale() {\r\n        if (this.image)\r\n            return this.image.getScaleValue();\r\n\r\n        return 1;\r\n    }\r\n\r\n    getRotate() {\r\n        if (this.image)\r\n            return this.image.getRotateAngle();\r\n\r\n        return 0;\r\n    }\r\n\r\n    private updateImageTransform() {\r\n        if (this.image) {\r\n            this.image.transformMatrix = this.imgLayer.transform();\r\n        }\r\n    }\r\n\r\n    onResize() {\r\n\r\n        this.logService.debug(\"Image: onResize()\");\r\n        setTimeout(() => {\r\n                this.needResize = true;\r\n            },\r\n            1);\r\n    }\r\n\r\n    fitWindow() {\r\n        if (!this.isImageLoaded)\r\n            return;\r\n\r\n        const curRotate = 0 - this.getRotate(); //get rotate return the minus value\r\n        const width = this.image.width();\r\n        const height = this.image.height();\r\n\r\n        const parent = this.canvas.parentElement.parentElement;\r\n        this.canvas.width = parent.clientWidth;\r\n        this.canvas.height = parent.clientHeight;\r\n\r\n        const canvasWidth = this.canvas.width;\r\n        const canvasHeight = this.canvas.height;\r\n        const widthScale = canvasWidth / width;\r\n        const heightScale = canvasHeight / height;\r\n\r\n        this.logService.debug(this.logPrefix + 'fitWindow() - canvas width: ' + this.canvas.width + ', canvas height: ' + this.canvas.height);\r\n\r\n        //log('bestfit, canvas width:' + canvasWidth + \",height:\" + canvasHeight);\r\n\r\n        //this.trueSize();//each time bestfit, need to reset the transform, then apply the scale value.\r\n        this.imgLayer.transform(1, 0, 0, 1, 0, 0, true);\r\n\r\n        if (widthScale < heightScale) {\r\n            this.scale(widthScale);\r\n            this.translate(0, (canvasHeight - height * widthScale) / 2);\r\n        } else {\r\n            this.scale(heightScale);\r\n            this.translate((canvasWidth - width * heightScale) / 2, 0);\r\n        }\r\n\r\n        this.rotate(curRotate);\r\n        this.refreshUi();\r\n    }\r\n\r\n    doReset() {\r\n        if (!this.isImageLoaded)\r\n            return;\r\n\r\n        const width = this.image.width();\r\n        const height = this.image.height();\r\n        const canvasWidth = this.canvas.width;\r\n        const canvasHeight = this.canvas.height;\r\n\r\n        const widthScale = canvasWidth / width;\r\n        const heightScale = canvasHeight / height;\r\n\r\n        this.imgLayer.transform(1, 0, 0, 1, 0, 0, true);\r\n\r\n        if (widthScale < heightScale) {\r\n            this.scale(widthScale);\r\n            this.translate((canvasWidth - width * widthScale) / 2, (canvasHeight - height * widthScale) / 2);\r\n        } else {\r\n            this.scale(heightScale);\r\n            this.translate((canvasWidth - width * heightScale) / 2, (canvasHeight - height * heightScale) / 2);\r\n        }\r\n\r\n        // Reset W/L\r\n        this.image.cornerStoneImage.windowWidth = this.originalWindowWidth;\r\n        this.image.cornerStoneImage.windowCenter = this.originalWindowCenter;\r\n\r\n        const viewPort = cornerstone.getViewport(this.helpElement);\r\n        viewPort.voi.windowCenter = this.originalWindowCenter;\r\n        viewPort.voi.windowWidth = this.originalWindowWidth;\r\n\r\n        // Reset Flip status\r\n        viewPort.vflip = false;\r\n        viewPort.hflip = false;\r\n\r\n        cornerstone.setViewport(this.helpElement, viewPort);\r\n\r\n        this.updateWlTextOverlay(this.originalWindowWidth, this.originalWindowCenter);\r\n        this.updateZoomRatioTextOverlay(this.getScale());\r\n\r\n        this.deleteAllAnnotation();\r\n        this.curSelectObj = undefined;\r\n\r\n        if (this.annGraphicOverlay) {\r\n            this.annGraphicOverlay.onReset();\r\n        }\r\n        this.refreshUi();\r\n    }\r\n\r\n    doFit(fitType: OperationEnum) {\r\n\r\n        if (!this.isImageLoaded)\r\n            return;\r\n\r\n        const width = this.image.width();\r\n        const height = this.image.height();\r\n        const canvasWidth = this.canvas.width;\r\n        const canvasHeight = this.canvas.height;\r\n\r\n        let widthScale = canvasWidth / width;\r\n        let heightScale = canvasHeight / height;\r\n\r\n        this.logService.debug(this.logPrefix + 'doFit() - canvas width: ' + this.canvas.width + ', canvas height: ' + this.canvas.height);\r\n\r\n        const curRotate = 0 - this.getRotate(); //get rotate return the minus value\r\n        // Sail : currently ignore the free rotate, since free rotate will change both width and height,\r\n        // rotate 90 only switch width and height\r\n        if (Math.abs(curRotate % 180 ) === 90) {\r\n            widthScale = canvasWidth / height;\r\n            heightScale = canvasHeight / width;\r\n        }\r\n\r\n\r\n        this.imgLayer.transform(1, 0, 0, 1, 0, 0, true);\r\n\r\n\r\n        if (fitType === OperationEnum.FitWindow) {\r\n            if (widthScale < heightScale) {\r\n                this.scale(widthScale);\r\n                this.translate((canvasWidth - width * widthScale) / 2, (canvasHeight - height * widthScale) / 2);\r\n            } else {\r\n                this.scale(heightScale);\r\n                this.translate((canvasWidth - width * heightScale) / 2, (canvasHeight - height * heightScale) / 2);\r\n            }\r\n        } else if (fitType === OperationEnum.FitHeight) {\r\n            this.scale(heightScale);\r\n            this.translate((canvasWidth - width * heightScale) / 2, (canvasHeight - height * heightScale) / 2);\r\n        } else if (fitType === OperationEnum.FitWidth) {\r\n            this.scale(widthScale);\r\n            this.translate((canvasWidth - width * widthScale) / 2, (canvasHeight - height * widthScale) / 2);\r\n        } else if (fitType === OperationEnum.FitOriginal) {\r\n            this.translate((canvasWidth - width) / 2, (canvasHeight - height) / 2);\r\n        }\r\n\r\n\r\n        this.rotate(curRotate);\r\n        this.updateZoomRatioTextOverlay(this.getScale());\r\n        this.refreshUi();\r\n    }\r\n\r\n    showOverlay(visible) {\r\n        if (!this.isImageLoaded) {\r\n            return;\r\n        }\r\n        if (visible === undefined) {\r\n            visible = false;\r\n        }\r\n\r\n        this.olLayer.visible(visible);\r\n    }\r\n\r\n    showAnnotation(visible) {\r\n        if (!this.isImageLoaded) {\r\n            return;\r\n        }\r\n        if (visible === undefined) {\r\n            visible = false;\r\n        }\r\n        this.annLayer.visible(visible);\r\n        this.annLabelLayer.visible(visible);\r\n    }\r\n\r\n    showRuler(visible) {\r\n        if (!this.isImageLoaded) {\r\n            return;\r\n        }\r\n        if (visible === undefined) {\r\n            visible = false;\r\n        }\r\n        this.imgRulerLayer.visible(visible);\r\n    }\r\n\r\n    draggable(draggable: boolean) {\r\n        var self = this;\r\n        if (!self.isImageLoaded) {\r\n            return;\r\n        }\r\n\r\n        var canvas = this.canvas;\r\n        var curContext = this.viewContext.curContext;\r\n\r\n        this.imgLayer.draggable({\r\n            disabled: !draggable,\r\n            start: function(arg) {\r\n                if (curContext.action == ViewContextEnum.Select || curContext.action == ViewContextEnum.CreateAnn) {\r\n                    canvas.style.cursor = \"move\";\r\n                }\r\n            },\r\n            stop: function(arg) {\r\n                if (curContext.action == ViewContextEnum.Select || curContext.action == ViewContextEnum.CreateAnn) {\r\n                    canvas.style.cursor = \"auto\";\r\n                }\r\n            },\r\n            drag: function(arg) {\r\n            }\r\n        });\r\n    }\r\n\r\n    saveImage() {\r\n        const annString = this.annSerialize.getAnnString(this.image.annObjList);\r\n        this.image.cornerStoneImage.data.elements[\"x0011101d\"] = this.annSerialize.annData;\r\n        this.dicomImageService.saveImageAnn(this.image.id, annString).subscribe(ret => {\r\n            const content = new MessageBoxContent();\r\n            content.title = \"Save Image\";\r\n            if (ret) {\r\n                content.messageText = \"Save image failed! \" + ret;\r\n                content.messageType = MessageBoxType.Error;\r\n            } else {\r\n                content.messageText = \"Save image successfully!\";\r\n                content.messageType = MessageBoxType.Info;\r\n            }\r\n            \r\n            this.dialogService.showMessageBox(content);\r\n        });\r\n    }\r\n\r\n    private doWL(deltaX, deltaY) {\r\n        if (!this.isImageLoaded)\r\n            return;\r\n\r\n        const self = this;\r\n        const dcmImg = self.image.cornerStoneImage;\r\n\r\n        if (deltaX != 0 || deltaY != 0) {\r\n            const maxVOI = dcmImg.maxPixelValue * dcmImg.slope + dcmImg.intercept;\r\n            const minVOI = dcmImg.minPixelValue * dcmImg.slope + dcmImg.intercept;\r\n            const imageDynamicRange = maxVOI - minVOI;\r\n            const multiplier = imageDynamicRange / 1024;\r\n\r\n            const width = dcmImg.windowWidth + Math.round(deltaX * multiplier);\r\n            const center = dcmImg.windowCenter + Math.round(deltaY * multiplier);\r\n\r\n            this.doWlByValue(center, width);\r\n\r\n            //dcmImg.render(width, center, function () {\r\n            //    //update window level values\r\n            //    self.updateTag(dicomTag.windowWidth, dcmImg.windowWidth);\r\n            //    self.updateTag(dicomTag.windowCenter, dcmImg.windowCenter);\r\n            //});\r\n        }\r\n    }\r\n\r\n    private doZoom(delta) {\r\n        if (!this.isImageLoaded)\r\n            return;\r\n\r\n        let scaleValue = 1;\r\n        if (delta > 0) {\r\n            scaleValue = 1.05;\r\n        } else {\r\n            scaleValue = 0.95;\r\n        }\r\n\r\n        const preWidth = this.imgLayer.getRect().width;\r\n        this.scale(scaleValue);\r\n        const afterWidth = this.imgLayer.getRect().width;\r\n\r\n        delta = (afterWidth - preWidth) / 2;\r\n        this.translate(-delta, -delta);\r\n\r\n        this.updateZoomRatioTextOverlay(this.getScale());\r\n\r\n        this.refreshUi();\r\n    }\r\n\r\n    private refreshUi() {\r\n        this.image.annObjList.forEach(annObject => annObject.onScale(this.getScale()));\r\n        this.annImageRuler.reDraw(this);\r\n    }\r\n\r\n    private registerImgLayerEvents() {\r\n        var self = this;\r\n\r\n        //register imglayer events, note the arg.x/y is screen (canvas) coordinates\r\n        self.imgLayer.mousedown(function(arg) {\r\n            self.onMouseDown(arg);\r\n            return false;\r\n        });\r\n        self.imgLayer.mousemove(function(arg) {\r\n            self.onMouseMove(arg);\r\n        });\r\n        self.imgLayer.mouseup(function(arg) {\r\n            self.onMouseUp(arg);\r\n        });\r\n        self.imgLayer.mouseout(function(arg) {\r\n            self.onMouseOut(arg);\r\n        });\r\n        self.imgLayer.click(function(arg) {\r\n            //self.onClick(arg);\r\n        });\r\n        self.imgLayer.dblclick(function(arg) { //the event happend after div's dblclick and canva's dblclick, so no use.\r\n            //log('imglayer dblclick ' + self.canvas.id);\r\n        });\r\n    }\r\n\r\n    private onMouseDown(evt) {\r\n\r\n        const self = this;\r\n        if (!self.isImageLoaded) {\r\n            return;\r\n        }\r\n\r\n        this.logService.debug(\"Image Layer - onMouseDown\");\r\n\r\n        const viewContext = self.viewContext;\r\n        //log('viwer mouse down: ' + this.canvasId);\r\n\r\n        //if in select context, and not click any object, will unselect all objects.\r\n        if (viewContext.curContext.action == ViewContextEnum.Select) {\r\n            if (!evt.event.cancelBubble) {\r\n                //if (self.curSelectObj && self.curSelectObj.select) {\r\n                //    self.curSelectObj.onSelect(false);\r\n                //    self.curSelectObj = undefined;\r\n                //}\r\n                self.selectAnnotation(null);\r\n                self.draggable(true);\r\n            } else { //an annobject has been selected\r\n                self.draggable(false);\r\n            }\r\n        } else if (viewContext.curContext.action == ViewContextEnum.CreateAnn) {\r\n            const parm = viewContext.curContext.data;\r\n            if (parm && parm.type && !parm.objCreated) {\r\n                const newObj: AnnObject = new parm.type();\r\n //               self.createAnnObject(newObj, parm);\r\n\r\n                parm.objCreated = true; //stop create the annObject again\r\n            }\r\n        }\r\n\r\n        self.emitEvent(evt, MouseEventType.MouseDown, \"onMouseDown\");\r\n    }\r\n\r\n    private onMouseMove(evt) {\r\n        //this.logService.debug(\"Image Layer - onMouseMove\");\r\n        this.emitEvent(evt, MouseEventType.MouseMove, \"onMouseMove\");\r\n    }\r\n\r\n    private onMouseOut(evt) {\r\n        this.logService.debug(\"Image Layer - onMouseOut\");\r\n        //log('viwer mouse out: ' + this.canvasId);\r\n        this.emitEvent(evt, MouseEventType.MouseOut, \"onMouseOut\");\r\n    }\r\n\r\n    private onMouseUp(evt) {\r\n        this.logService.debug(\"Image Layer - onMouseUp\");\r\n        //log('viwer mouse up: ' +this.canvasId);\r\n        this.emitEvent(evt, MouseEventType.MouseUp, \"onMouseUp\");\r\n    }\r\n\r\n    //image layer events\r\n    registerEvent(obj, type) {\r\n        if (!this.eventHandlers[type]) {\r\n            this.eventHandlers[type] = [];\r\n        }\r\n\r\n        const handlers = this.eventHandlers[type];\r\n        const len = handlers.length;\r\n        let i: number;\r\n\r\n        for (i = 0; i < len; i++) {\r\n            if (handlers[i] === obj) {\r\n                return; //exists already\r\n            }\r\n        }\r\n\r\n        handlers.push(obj);\r\n    }\r\n\r\n    unRegisterEvent(obj, type) {\r\n        if (!this.eventHandlers[type]) {\r\n            return;\r\n        }\r\n\r\n        const handlers = this.eventHandlers[type];\r\n        const len = handlers.length;\r\n        let i: number;\r\n        let found = false;\r\n\r\n        for (i = 0; i < len; i++) {\r\n            if (handlers[i] === obj) {\r\n                found = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (found) {\r\n            handlers.splice(i, 1);\r\n        }\r\n    }\r\n\r\n    private emitEvent(arg, type, handler) {\r\n        if (!this.isImageLoaded) {\r\n            return;\r\n        }\r\n        const handlers = this.eventHandlers[type];\r\n        if (!handlers || handlers.length == 0) {\r\n            return;\r\n        }\r\n\r\n        //covert screen point to image point\r\n        if (arg.x) {\r\n            arg = AnnTool.screenToImage(arg, this.imgLayer.transform());\r\n        }\r\n\r\n        handlers.forEach(function(obj) {\r\n            if (obj[handler]) {\r\n                obj[handler](arg);\r\n            }\r\n        });\r\n    }\r\n\r\n    private registerCanvasEvents() {\r\n        var self = this;\r\n\r\n        self.canvas.addEventListener(\"contextmenu\",\r\n            function(evt) {\r\n                self.onCanvasContextMenu(evt);\r\n            });\r\n\r\n        //$(self.canvas).on(\"DOMMouseScroll mousewheel\", function (evt) {\r\n        //    self.onCanvasMouseWheel(evt);\r\n        //});\r\n\r\n        $(self.canvas).on(\"dblclick\",\r\n            function(evt) {\r\n                self.onCanvasDblClick(evt);\r\n            });\r\n\r\n        //TODO: keyup not work any more\r\n        const parent = self.canvas.parentElement;\r\n        $(parent).on(\"keyup\",\r\n            function(key) {\r\n                self.onCanvasKeyUp(key);\r\n            });\r\n\r\n        $(self.canvas).on(\"mousemove\",\r\n            function(evt) {\r\n                self.onCanvasMouseMove(evt);\r\n            });\r\n\r\n        $(self.canvas).on(\"mousedown\",\r\n            function(evt) {\r\n                self.onCanvasMouseDown(evt);\r\n            });\r\n\r\n        $(self.canvas).on(\"mouseup\",\r\n            function(evt) {\r\n                self.onCanvasMouseUp(evt);\r\n            });\r\n\r\n        $(self.canvas).on(\"mouseover\",\r\n            function(evt) {\r\n                self.onCanvasMouseOver(evt);\r\n            });\r\n\r\n        $(self.canvas).on(\"mouseout\",\r\n            function(evt) {\r\n                self.onCanvasMouseOut(evt);\r\n            });\r\n    }\r\n\r\n    private onCanvasKeyUp(key) {\r\n        if (!this.isImageLoaded) {\r\n            return;\r\n        }\r\n\r\n        //console.log(key.keyCode);\r\n        //if (key.keyCode == 46) {//user press Delete\r\n        //    this.deleteCurObject();\r\n        //    if (viewContext.curContext == contextEnum.create) {//delete under creating object\r\n        //        viewContext.setContext(contextEnum.select);\r\n        //    }\r\n        //} else if (key.keyCode == 82) { //r\r\n        //    this.rotate(30);\r\n        //} else if (key.keyCode == 90) {//z\r\n        //    this.scale(1.1);\r\n        //}\r\n    }\r\n\r\n    private onCanvasDblClick(evt) {\r\n        //the imagelayer's double click events fires mousedown=>mouseup=>mousedown, which missed the last mosueup event, so we manually fire the mouseup here\r\n\r\n        if (!this.isImageLoaded) {\r\n            return;\r\n        }\r\n\r\n        const point = { x: evt.offsetX, y: evt.offsetY };\r\n\r\n        if (this.annGuide.hitTest(point)) {\r\n            return;\r\n        }\r\n\r\n        this.mouseEventHelper._mouseWhich = evt.which; //_mouseWhich has value means current is mouse down\r\n\r\n        this.mouseEventHelper._mouseDownPosCvs = point;\r\n\r\n        if (this.mouseEventHelper._mouseWhich === 1) {\r\n\r\n            if (this.viewContext.curContext.action === ViewContextEnum.CreateAnn) {\r\n                if (this.curSelectObj && !this.curSelectObj.isCreated()) {\r\n                    this.curSelectObj.onMouseEvent(MouseEventType.DblClick, point, null);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.canvas && this.canvas.on)\r\n        this.canvas.onmouseup(evt); //cause jc to trigger mouseup event, which will stop the drag (imglayer)\r\n        this.redraw(1);\r\n        //log('canvas dblclick: ' + this.canvas.id);\r\n    }\r\n\r\n    private onCanvasContextMenu(evt) {\r\n        if (!this.isViewInited) {\r\n            return;\r\n        }\r\n        //todo: add context menus\r\n\r\n        evt.stopImmediatePropagation();\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n    }\r\n\r\n    private onCanvasMouseDown(evt) {\r\n        this.logService.debug(\"onCanvasMouseDown\");\r\n        if (!this.isImageLoaded) {\r\n            return;\r\n        }\r\n\r\n        const point = { x: evt.offsetX, y: evt.offsetY };\r\n        if (this.annGuide.hitTest(point)) {\r\n            this.redraw(1);\r\n            return;\r\n        }\r\n\r\n        this.dragging = true;\r\n        this.mouseEventHelper._mouseWhich = evt.which; //_mouseWhich has value means current is mouse down\r\n        \r\n        this.mouseEventHelper._mouseDownPosCvs = point;\r\n\r\n        if (this.mouseEventHelper._mouseWhich === 3) { //right mouse\r\n\r\n            if (this.viewContext.curContext.action === ViewContextEnum.CreateAnn) {\r\n                // Right click to cancel the creation of an annotation.\r\n                this.cancelCreate(true);\r\n            } else {\r\n                this.mouseEventHelper._lastContext = this.viewContext.curContext;\r\n                this.viewContext.setContext(ViewContextEnum.WL);\r\n            }\r\n            \r\n        } else if (this.mouseEventHelper._mouseWhich === 1) {\r\n            if (this.viewContext.curContext.action === ViewContextEnum.Magnify) {\r\n                this.startMagnify(point);\r\n                } else if (this.viewContext.curContext.action === ViewContextEnum.CreateAnn) {\r\n                if (this.curSelectObj) {\r\n                    // There is annotation selected\r\n                    if (!this.curSelectObj.isCreated()) {\r\n                        // The selected annotation is creating\r\n                        this.curSelectObj.onMouseEvent(MouseEventType.MouseDown, point, null);\r\n                    } else {\r\n                        // The selected annotation is created\r\n                        this.selectAnnotation(null);\r\n                        // Start to create a new annotation and assign it as selected.\r\n                        this.startCreateAnnAtPoint(point);\r\n                    }\r\n                } else {\r\n                    // There is no annotation selected\r\n                    this.startCreateAnnAtPoint(point);\r\n                }\r\n            }\r\n            else if (this.viewContext.curContext.action === ViewContextEnum.SelectAnn) {\r\n            }\r\n        }\r\n\r\n        this.redraw(1);\r\n    }\r\n\r\n    private onCanvasMouseMove(evt) {\r\n\r\n        const self = this;\r\n        if (!this.isImageLoaded) {\r\n            return;\r\n        }\r\n\r\n        const point = { x: evt.offsetX, y: evt.offsetY };\r\n        //console.log(evt.offsetX + \",\" + evt.offsetY);\r\n        const curContext = this.viewContext.curContext;\r\n\r\n        if (!self.mouseEventHelper._lastPosCvs) {\r\n            self.mouseEventHelper._lastPosCvs = { x: evt.offsetX, y: evt.offsetY };\r\n        }\r\n        const deltaX = evt.offsetX - self.mouseEventHelper._lastPosCvs.x;\r\n        const deltaY = evt.offsetY - self.mouseEventHelper._lastPosCvs.y;\r\n\r\n\r\n        if (curContext.action === ViewContextEnum.CreateAnn) {\r\n            if (this.curSelectObj && !this.curSelectObj.isCreated()) {\r\n                const point = { x: evt.offsetX, y: evt.offsetY };\r\n                this.curSelectObj.onMouseEvent(MouseEventType.MouseMove, point, null);\r\n            }\r\n        } else {\r\n            if (self.mouseEventHelper._mouseWhich === 3) {\r\n\r\n                if (curContext.action === ViewContextEnum.WL) {\r\n                    self.doWL(deltaX, deltaY);\r\n                }\r\n            } else if (self.mouseEventHelper._mouseWhich === 1) {\r\n\r\n                if (curContext.action === ViewContextEnum.Magnify) {\r\n                    this.magnifyAtPoint(point);\r\n                } else if (curContext.action === ViewContextEnum.WL) {\r\n                    self.doWL(deltaX, deltaY);\r\n                } else if (curContext.action === ViewContextEnum.Zoom) {\r\n                    const delta = Math.abs(deltaX) > Math.abs(deltaY) ? deltaX : deltaY;\r\n                    if (Math.abs(delta) > 0) {\r\n                        self.doZoom(delta);\r\n                    }\r\n\r\n                } else if (curContext.action === ViewContextEnum.ROIZoom) {\r\n                    const curPosCvs = {\r\n                        x: evt.offsetX,\r\n                        y: evt.offsetY\r\n                    };\r\n\r\n                    //self.drawROIZoom(self.mouseEventHelper._mouseDownPosCvs, curPosCvs);\r\n                }\r\n            }\r\n        }\r\n\r\n        this.redraw(this.dragging ? 2 : 1);\r\n        self.mouseEventHelper._lastPosCvs = { x: evt.offsetX, y: evt.offsetY };\r\n    }\r\n\r\n    private onCanvasMouseUp(evt) {\r\n\r\n        this.logService.debug(\"onCanvasMouseUp\");\r\n        const self = this;\r\n        if (!self.isImageLoaded) {\r\n            return;\r\n        }\r\n\r\n        const point = { x: evt.offsetX, y: evt.offsetY };\r\n        if (this.annGuide.hitTest(point)) {\r\n            this.redraw(2);\r\n            return;\r\n        }\r\n\r\n\r\n        this.dragging = false;\r\n        const curContext = this.viewContext.curContext;\r\n\r\n        if (self.mouseEventHelper._mouseWhich === 3) {\r\n\r\n            if (curContext.action === ViewContextEnum.WL) {\r\n                if (self.mouseEventHelper._lastContext.action === ViewContextEnum.CreateAnn) { //cancel create\r\n                    this.viewContext.setContext(ViewContextEnum.Select);\r\n                } else {\r\n                    this.viewContext.setContext(self.mouseEventHelper._lastContext.action,\r\n                        self.mouseEventHelper._lastContext.data);\r\n                }\r\n            }\r\n        } else if (self.mouseEventHelper._mouseWhich === 1) {\r\n\r\n            if (curContext.action === ViewContextEnum.Magnify) {\r\n                this.endMagnify();\r\n            }\r\n            //else if (curContext.action == contextEnum.roizoom) {\r\n            //    var endPosCvs = {\r\n            //        x: evt.offsetX,\r\n            //        y: evt.offsetY\r\n            //    }\r\n            //    self._applyROIZoom(self._mouseDownPosCvs, endPosCvs);\r\n            //}\r\n        }\r\n\r\n        this.redraw(2);\r\n        self.mouseEventHelper._mouseWhich = 0;\r\n    }\r\n\r\n    private onCanvasMouseOut(evt) {\r\n\r\n        this.logService.debug(\"onCanvasMouseOut\");\r\n        const self = this;\r\n        if (!self.isImageLoaded) {\r\n            return;\r\n        }\r\n\r\n        self.canvas.onmouseup(evt); //cause jc to trigger mouseup event, which will stop the drag (imglayer)\r\n        if (self.mouseEventHelper._mouseWhich != 0) {\r\n            self.onCanvasMouseUp(evt); //call mouseup to end the action\r\n        }\r\n\r\n        ////log('mouse out ' + self.id);\r\n\r\n        //if (viewContext.curContext == contextEnum.create) {\r\n        //    var parm = viewContext.curContextParam;\r\n        //    if (parm && parm.type && parm.tooltip && !parm.objCreated) {\r\n        //        var tooltip = self.getTooltip(parm.type);\r\n        //        tooltip.show(false);\r\n        //    }\r\n        //}\r\n    }\r\n\r\n    private onCanvasMouseOver(evt) {\r\n\r\n        this.logService.debug(\"onCanvasMouseOver\");\r\n        const self = this;\r\n        if (!self.isImageLoaded) {\r\n            return;\r\n        }\r\n\r\n        //log('mouse over ' + self.id + ', contex:' + viewContext.curContext);\r\n        //if (viewContext.curContext == contextEnum.create) {\r\n        //    var parm = viewContext.curContextParam;\r\n        //    if (parm && parm.type && !parm.objCreated && parm.tooltip) {//show tooltip before the object is created\r\n        //        log('mouse over: show tooltip');\r\n        //        var tooltip = self.getTooltip(parm.type);\r\n        //        tooltip.setParentCreated(false);\r\n        //        tooltip.setStep(stepEnum.step1);\r\n        //        tooltip.show(true);\r\n        //    }\r\n        //}\r\n    }\r\n\r\n\r\n\r\n    //private createAnnObject(annObj: AnnObject, param: any) {\r\n    //    if (!this.isImageLoaded)\r\n    //        return;\r\n\r\n    //    var self = this;\r\n    //    if (annObj.hasToolTip()) {\r\n    //        //show tooltip\r\n    //    }\r\n\r\n    //    self.showAnnotation(true); //in case user closed the annotation\r\n\r\n    //    if (self.curSelectObj) {\r\n    //        self.selectObject(undefined);\r\n    //    }\r\n\r\n    //    self.curSelectObj = annObj;\r\n    //    annObj.startCreate(self,\r\n    //        function() {\r\n    //            const newObj = this;\r\n    //            if (newObj && newObj.isCreated) {\r\n    //                //finish create\r\n    //                if (self.annObjList.indexOf(newObj) < 0) {\r\n    //                    self.annObjList.push(newObj);\r\n    //                }\r\n\r\n    //                self.viewContext.setContext(ViewContextEnum.Select);\r\n    //                self.selectObject(newObj);\r\n    //            }\r\n    //        },\r\n    //        param);\r\n\r\n    //    return annObj;\r\n    //}\r\n\r\n    private deleteAllAnnotation() {\r\n        this.image.annObjList.forEach(annObj => annObj.onDeleteChildren());\r\n        this.image.annObjList.length = 0;\r\n    }\r\n\r\n    private deleteAnnotation(annObj: AnnExtendObject) {\r\n\r\n        if (!annObj) return;\r\n\r\n        if (annObj.isCreated()) {\r\n            // If this annotation is already created, need to remove it from the list\r\n            const len = this.image.annObjList.length;\r\n\r\n            let i = 0;\r\n            for (; i < len; i++) {\r\n                if (this.image.annObjList[i] === annObj) {\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (i !== len) {\r\n                this.image.annObjList.splice(i, 1);\r\n            }\r\n        }\r\n\r\n        annObj.onDeleteChildren();\r\n    }\r\n\r\n    private doManualWl() {\r\n        const windowLevelData = new WindowLevelData();\r\n        windowLevelData.windowCenter = this.image.cornerStoneImage.windowCenter;\r\n        windowLevelData.windowWidth = this.image.cornerStoneImage.windowWidth;\r\n        this.dialogService.showDialog(ManualWlDialogComponent, windowLevelData).subscribe(\r\n            val => {\r\n                this.doWlByValue(val.windowCenter, val.windowWidth);\r\n            }\r\n        );\r\n\r\n    }\r\n\r\n    private doWlByValue(center: number, width: number) {\r\n        const viewPort = cornerstone.getViewport(this.helpElement);\r\n        viewPort.voi.windowCenter = center;\r\n        viewPort.voi.windowWidth = width;\r\n        cornerstone.setViewport(this.helpElement, viewPort);\r\n\r\n        this.image.cornerStoneImage.windowWidth = width;\r\n        this.image.cornerStoneImage.windowCenter = center;\r\n\r\n        this.updateWlTextOverlay(width, center);\r\n    }\r\n\r\n    private updateWlTextOverlay(width: number, center: number) {\r\n        if (this.annTextOverlay) {\r\n            this.annTextOverlay.updateWindowCenter(width, center);\r\n        }\r\n    }\r\n\r\n    private updateZoomRatioTextOverlay(roomRatio: number) {\r\n        if (this.annTextOverlay) {\r\n            this.annTextOverlay.updateZoomRatioTextOverlay(roomRatio);\r\n        }\r\n    }\r\n\r\n    private startCreateAnnAtPoint(point: Point) {\r\n        this.updateImageTransform();\r\n\r\n        const annDefData = this.annotationService.getAnnDefDataByType(this.viewContext.curContext.data);\r\n        if (!annDefData) return;\r\n\r\n        if (annDefData.imageSuiteAnnType === AnnType.Text) {\r\n            this.createFreeText(point);\r\n        } else {\r\n            this.curSelectObj = new annDefData.classType(undefined, this);\r\n            if (annDefData.needGuide) {\r\n                this.annGuide.setGuideTargetObj(this.curSelectObj);\r\n            }\r\n            this.curSelectObj.onMouseEvent(MouseEventType.MouseDown, point, null);\r\n        }\r\n        \r\n    }\r\n\r\n    private deleteSelectedAnnotation() {\r\n        this.deleteAnnotation(this.curSelectObj);\r\n        this.curSelectObj = undefined;\r\n        this.annGuide.hide();\r\n    }\r\n\r\n    private selectMarker() {\r\n        this.dialogService.showDialog(SelectMarkerDialogComponent, undefined).subscribe(\r\n            val => {\r\n                if (val) {\r\n                    this.updateImageTransform();\r\n                    const annImage = new AnnImage(undefined, this);\r\n                    annImage.onCreate(val, new Point(0, 0));\r\n                    this.curSelectObj = annImage;\r\n                }\r\n            }\r\n        );\r\n    }\r\n\r\n    private setKeyImage(keyImage) {\r\n        this.configurationService.setKeyImage(this.image.id, keyImage);\r\n    }\r\n\r\n    private redraw(count: number) {\r\n        for (let i = 0; i < count; i++) {\r\n            this.jcanvas.frame();\r\n        }\r\n    }\r\n\r\n    private deleteAll() {\r\n        if (this.annMagnify) {\r\n            this.annMagnify.del();\r\n        }\r\n\r\n        if (this.annTextOverlay) {\r\n            this.annTextOverlay.del();\r\n        }\r\n\r\n        if (this.annGraphicOverlay) {\r\n            this.annGraphicOverlay.del();\r\n        }\r\n\r\n        if (this.annImageRuler) {\r\n            this.annImageRuler.reset(this);\r\n        }\r\n\r\n        if (this.image && this.image.annObjList) {\r\n            this.deleteAllAnnotation();\r\n        }\r\n\r\n        if (this.jcImage) {\r\n            this.jcImage.del();\r\n        }\r\n    }\r\n\r\n    private toggleGraphicOverlay(show: boolean) {\r\n        if (!this.image || this.image.graphicOverlayDataList.length === 0) {\r\n            return;\r\n        }\r\n\r\n        if (show) {\r\n            if (!this.annGraphicOverlay) {\r\n                this.annGraphicOverlay = new AnnGraphicOverlay(this.image.graphicOverlayDataList, this);\r\n            }\r\n            this.annGraphicOverlay.setVisible(true);\r\n        } else {\r\n            if (this.annGraphicOverlay) {\r\n                this.annGraphicOverlay.setVisible(false);\r\n            }\r\n        }\r\n    }\r\n\r\n    startMagnify(point: Point) {\r\n        if (!this.annMagnify) {\r\n            this.annMagnify = new AnnMagnify(this);\r\n        }\r\n\r\n        this.annMagnify.start(point, this.viewContext.curContext.data);\r\n        this.canvas.style.cursor = \"none\";\r\n\r\n        if (this.annGraphicOverlay) {\r\n            this.annGraphicOverlay.drawToMgLayer();\r\n        }\r\n    }\r\n\r\n    magnifyAtPoint(point: Point) {\r\n        if (!this.annMagnify || !this.annMagnify.isStarted()) {\r\n            return;\r\n        }\r\n\r\n        this.annMagnify.moveTo(point);\r\n    }\r\n\r\n    endMagnify() {\r\n        if (!this.annMagnify || !this.annMagnify.isStarted()) {\r\n            return;\r\n        }\r\n\r\n        this.annMagnify.end();\r\n        this.setCursorFromContext();\r\n    }\r\n\r\n    private createFreeText(point: Point) {\r\n        const content = new MessageBoxContent();\r\n        content.title = \"Text\";\r\n        content.messageText = \"Please input the text:\";\r\n        content.messageType = MessageBoxType.Input;\r\n\r\n        this.dialogService.showMessageBox(content).subscribe(\r\n            val => {\r\n                if (val.dialogResult === DialogResult.Ok) {\r\n                    const imagePoint = AnnTool.screenToImage(point, this.image.transformMatrix);\r\n                    const annObj = new AnnText(undefined, this);\r\n                    annObj.onCreate(imagePoint, val.valueInput, false);\r\n                    annObj.onDrawEnded();\r\n                    this.curSelectObj = annObj;\r\n                    this.redraw(1);\r\n                }\r\n            }\r\n        );\r\n    }\r\n}\r\n","module.exports = \"#main-nav { margin-left: 1px; }\\r\\n\\r\\n.hangingProtocol-div {\\r\\n    background-color: #333;\\r\\n    border-radius: 2px;\\r\\n    height: 44px;\\r\\n    margin-bottom: 3px;\\r\\n    padding: 2px;\\r\\n}\\r\\n\\r\\n/*.open>.hangingProtocol-menu {\\r\\n    display: block;\\r\\n}*/\\r\\n\\r\\nli.dropdown.open {\\r\\n    margin: -20px 0 0;\\r\\n    width: 44px;\\r\\n}\\r\\n\\r\\nli.dropdown {\\r\\n    margin: -20px 0 0;\\r\\n    width: 44px;\\r\\n}\\r\\n\\r\\n.hangingProtocol-menu {\\r\\n    background-color: #333;\\r\\n    margin: -24px 0 0;\\r\\n    min-width: 40px;\\r\\n    padding-bottom: 0;\\r\\n}\\r\\n\\r\\n.hangingProtocol-menu-button {\\r\\n    background-color: #333;\\r\\n    border: none;\\r\\n    height: 40px;\\r\\n    outline: none;\\r\\n    width: 40px;\\r\\n}\\r\\n\\r\\n.patient-div {\\r\\n    background-color: #333;\\r\\n    border-radius: 2px;\\r\\n    margin-bottom: 3px;\\r\\n    padding: 2px;\\r\\n}\\r\\n\\r\\n.patient-header {\\r\\n    background-color: #555555;\\r\\n    border: solid 1px #333;\\r\\n    border-radius: 3px;\\r\\n    color: white;\\r\\n    display: flex;\\r\\n    height: 48px;\\r\\n    padding: 4px;\\r\\n    width: 184px;\\r\\n}\\r\\n\\r\\n.patient-header:hover { color: #F90; }\\r\\n\\r\\n.patient-header:hover .patient-button { background: url('Patient_N2.gif') no-repeat left top; }\\r\\n\\r\\n.patient-header:hover .patient-button:active { background: url('Patient_N3.gif') no-repeat left top; }\\r\\n\\r\\n.patient-button {\\r\\n    background: url('Patient_N1.gif') no-repeat left top;\\r\\n    border: none;\\r\\n    height: 40px;\\r\\n    outline: none;\\r\\n    width: 40px;\\r\\n}\\r\\n\\r\\n.patient-info {\\r\\n    height: 40px;\\r\\n    margin-left: 6px;\\r\\n    width: 100%;\\r\\n}\\r\\n\\r\\n.study-header {\\r\\n    background-color: #555555;\\r\\n    border: solid 1px #333;\\r\\n    border-radius: 3px;\\r\\n    color: white;\\r\\n    display: flex;\\r\\n    height: 48px;\\r\\n    margin-left: 10px;\\r\\n    padding: 4px;\\r\\n    width: 174px;\\r\\n}\\r\\n\\r\\n.study-header:hover { color: #F90; }\\r\\n\\r\\n.study-header:hover .study-button { background: url('Study_N2.gif') no-repeat left top; }\\r\\n\\r\\n.study-header:hover .study-button:active { background: url('Study_N3.gif') no-repeat left top; }\\r\\n\\r\\n.study-button {\\r\\n    background: url('Study_N1.gif') no-repeat left top;\\r\\n    border: none;\\r\\n    height: 40px;\\r\\n    outline: none;\\r\\n    width: 40px;\\r\\n}\\r\\n\\r\\n.study-info {\\r\\n    height: 40px;\\r\\n    margin-left: 6px;\\r\\n    overflow: hidden;\\r\\n    width: 100%;\\r\\n}\\r\\n\\r\\n.series-header {\\r\\n    background-color: #555555;\\r\\n    border: solid 1px #333;\\r\\n    border-radius: 3px;\\r\\n    color: white;\\r\\n    display: flex;\\r\\n    height: 48px;\\r\\n    margin-left: 20px;\\r\\n    padding: 4px;\\r\\n    width: 164px;\\r\\n}\\r\\n\\r\\n.series-header:hover { color: #F90; }\\r\\n\\r\\n.series-header:hover .series-button { background: url('Series_N2.gif') no-repeat left top; }\\r\\n\\r\\n.series-header:hover .series-button:active { background: url('Series_N3.gif') no-repeat left top; }\\r\\n\\r\\n.series-button {\\r\\n    background: url('Series_N1.gif') no-repeat left top;\\r\\n    border: none;\\r\\n    height: 40px;\\r\\n    outline: none;\\r\\n    width: 40px;\\r\\n}\\r\\n\\r\\n.series-info {\\r\\n    height: 40px;\\r\\n    margin-left: 6px;\\r\\n    width: 100%;\\r\\n}\\r\\n\\r\\n.image-list {\\r\\n    background-color: #555555;\\r\\n    border: solid 1px #333;\\r\\n    border-radius: 3px;\\r\\n    color: white;\\r\\n    margin-left: 30px;\\r\\n    padding: 4px;\\r\\n    width: 154px;\\r\\n}\\r\\n\\r\\n.image-button {\\r\\n    background-color: #555;\\r\\n    border: solid 1px #333;\\r\\n    border-radius: 3px;\\r\\n    color: white;\\r\\n    display: flex;\\r\\n    height: 80px;\\r\\n    margin-left: 30px;\\r\\n    padding: 4px;\\r\\n    width: 154px;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy92aWV3ZXItc2hlbGwvbmF2aWdhdGlvbi9uYXZpZ2F0aW9uLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxnQkFBZ0IsRUFBRTs7QUFFOUI7SUFDSSxzQkFBc0I7SUFDdEIsa0JBQWtCO0lBQ2xCLFlBQVk7SUFDWixrQkFBa0I7SUFDbEIsWUFBWTtBQUNoQjs7QUFFQTs7RUFFRTs7QUFFRjtJQUNJLGlCQUFpQjtJQUNqQixXQUFXO0FBQ2Y7O0FBRUE7SUFDSSxpQkFBaUI7SUFDakIsV0FBVztBQUNmOztBQUVBO0lBQ0ksc0JBQXNCO0lBQ3RCLGlCQUFpQjtJQUNqQixlQUFlO0lBQ2YsaUJBQWlCO0FBQ3JCOztBQUVBO0lBQ0ksc0JBQXNCO0lBQ3RCLFlBQVk7SUFDWixZQUFZO0lBQ1osYUFBYTtJQUNiLFdBQVc7QUFDZjs7QUFFQTtJQUNJLHNCQUFzQjtJQUN0QixrQkFBa0I7SUFDbEIsa0JBQWtCO0lBQ2xCLFlBQVk7QUFDaEI7O0FBRUE7SUFDSSx5QkFBeUI7SUFDekIsc0JBQXNCO0lBQ3RCLGtCQUFrQjtJQUNsQixZQUFZO0lBQ1osYUFBYTtJQUNiLFlBQVk7SUFDWixZQUFZO0lBQ1osWUFBWTtBQUNoQjs7QUFFQSx3QkFBd0IsV0FBVyxFQUFFOztBQUVyQyx3Q0FBd0Msb0RBQXFGLEVBQUU7O0FBRS9ILCtDQUErQyxvREFBcUYsRUFBRTs7QUFFdEk7SUFDSSxvREFBcUY7SUFDckYsWUFBWTtJQUNaLFlBQVk7SUFDWixhQUFhO0lBQ2IsV0FBVztBQUNmOztBQUVBO0lBQ0ksWUFBWTtJQUNaLGdCQUFnQjtJQUNoQixXQUFXO0FBQ2Y7O0FBRUE7SUFDSSx5QkFBeUI7SUFDekIsc0JBQXNCO0lBQ3RCLGtCQUFrQjtJQUNsQixZQUFZO0lBQ1osYUFBYTtJQUNiLFlBQVk7SUFDWixpQkFBaUI7SUFDakIsWUFBWTtJQUNaLFlBQVk7QUFDaEI7O0FBRUEsc0JBQXNCLFdBQVcsRUFBRTs7QUFFbkMsb0NBQW9DLGtEQUFtRixFQUFFOztBQUV6SCwyQ0FBMkMsa0RBQW1GLEVBQUU7O0FBRWhJO0lBQ0ksa0RBQW1GO0lBQ25GLFlBQVk7SUFDWixZQUFZO0lBQ1osYUFBYTtJQUNiLFdBQVc7QUFDZjs7QUFFQTtJQUNJLFlBQVk7SUFDWixnQkFBZ0I7SUFDaEIsZ0JBQWdCO0lBQ2hCLFdBQVc7QUFDZjs7QUFFQTtJQUNJLHlCQUF5QjtJQUN6QixzQkFBc0I7SUFDdEIsa0JBQWtCO0lBQ2xCLFlBQVk7SUFDWixhQUFhO0lBQ2IsWUFBWTtJQUNaLGlCQUFpQjtJQUNqQixZQUFZO0lBQ1osWUFBWTtBQUNoQjs7QUFFQSx1QkFBdUIsV0FBVyxFQUFFOztBQUVwQyxzQ0FBc0MsbURBQW9GLEVBQUU7O0FBRTVILDZDQUE2QyxtREFBb0YsRUFBRTs7QUFFbkk7SUFDSSxtREFBb0Y7SUFDcEYsWUFBWTtJQUNaLFlBQVk7SUFDWixhQUFhO0lBQ2IsV0FBVztBQUNmOztBQUVBO0lBQ0ksWUFBWTtJQUNaLGdCQUFnQjtJQUNoQixXQUFXO0FBQ2Y7O0FBRUE7SUFDSSx5QkFBeUI7SUFDekIsc0JBQXNCO0lBQ3RCLGtCQUFrQjtJQUNsQixZQUFZO0lBQ1osaUJBQWlCO0lBQ2pCLFlBQVk7SUFDWixZQUFZO0FBQ2hCOztBQUVBO0lBQ0ksc0JBQXNCO0lBQ3RCLHNCQUFzQjtJQUN0QixrQkFBa0I7SUFDbEIsWUFBWTtJQUNaLGFBQWE7SUFDYixZQUFZO0lBQ1osaUJBQWlCO0lBQ2pCLFlBQVk7SUFDWixZQUFZO0FBQ2hCIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50cy92aWV3ZXItc2hlbGwvbmF2aWdhdGlvbi9uYXZpZ2F0aW9uLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjbWFpbi1uYXYgeyBtYXJnaW4tbGVmdDogMXB4OyB9XHJcblxyXG4uaGFuZ2luZ1Byb3RvY29sLWRpdiB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzO1xyXG4gICAgYm9yZGVyLXJhZGl1czogMnB4O1xyXG4gICAgaGVpZ2h0OiA0NHB4O1xyXG4gICAgbWFyZ2luLWJvdHRvbTogM3B4O1xyXG4gICAgcGFkZGluZzogMnB4O1xyXG59XHJcblxyXG4vKi5vcGVuPi5oYW5naW5nUHJvdG9jb2wtbWVudSB7XHJcbiAgICBkaXNwbGF5OiBibG9jaztcclxufSovXHJcblxyXG5saS5kcm9wZG93bi5vcGVuIHtcclxuICAgIG1hcmdpbjogLTIwcHggMCAwO1xyXG4gICAgd2lkdGg6IDQ0cHg7XHJcbn1cclxuXHJcbmxpLmRyb3Bkb3duIHtcclxuICAgIG1hcmdpbjogLTIwcHggMCAwO1xyXG4gICAgd2lkdGg6IDQ0cHg7XHJcbn1cclxuXHJcbi5oYW5naW5nUHJvdG9jb2wtbWVudSB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzO1xyXG4gICAgbWFyZ2luOiAtMjRweCAwIDA7XHJcbiAgICBtaW4td2lkdGg6IDQwcHg7XHJcbiAgICBwYWRkaW5nLWJvdHRvbTogMDtcclxufVxyXG5cclxuLmhhbmdpbmdQcm90b2NvbC1tZW51LWJ1dHRvbiB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzO1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgaGVpZ2h0OiA0MHB4O1xyXG4gICAgb3V0bGluZTogbm9uZTtcclxuICAgIHdpZHRoOiA0MHB4O1xyXG59XHJcblxyXG4ucGF0aWVudC1kaXYge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzMzMztcclxuICAgIGJvcmRlci1yYWRpdXM6IDJweDtcclxuICAgIG1hcmdpbi1ib3R0b206IDNweDtcclxuICAgIHBhZGRpbmc6IDJweDtcclxufVxyXG5cclxuLnBhdGllbnQtaGVhZGVyIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICM1NTU1NTU7XHJcbiAgICBib3JkZXI6IHNvbGlkIDFweCAjMzMzO1xyXG4gICAgYm9yZGVyLXJhZGl1czogM3B4O1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGhlaWdodDogNDhweDtcclxuICAgIHBhZGRpbmc6IDRweDtcclxuICAgIHdpZHRoOiAxODRweDtcclxufVxyXG5cclxuLnBhdGllbnQtaGVhZGVyOmhvdmVyIHsgY29sb3I6ICNGOTA7IH1cclxuXHJcbi5wYXRpZW50LWhlYWRlcjpob3ZlciAucGF0aWVudC1idXR0b24geyBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltZy9EaWNvbVZpZXdlci9QYXRpZW50X04yLmdpZikgbm8tcmVwZWF0IGxlZnQgdG9wOyB9XHJcblxyXG4ucGF0aWVudC1oZWFkZXI6aG92ZXIgLnBhdGllbnQtYnV0dG9uOmFjdGl2ZSB7IGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL0RpY29tVmlld2VyL1BhdGllbnRfTjMuZ2lmKSBuby1yZXBlYXQgbGVmdCB0b3A7IH1cclxuXHJcbi5wYXRpZW50LWJ1dHRvbiB7XHJcbiAgICBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltZy9EaWNvbVZpZXdlci9QYXRpZW50X04xLmdpZikgbm8tcmVwZWF0IGxlZnQgdG9wO1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgaGVpZ2h0OiA0MHB4O1xyXG4gICAgb3V0bGluZTogbm9uZTtcclxuICAgIHdpZHRoOiA0MHB4O1xyXG59XHJcblxyXG4ucGF0aWVudC1pbmZvIHtcclxuICAgIGhlaWdodDogNDBweDtcclxuICAgIG1hcmdpbi1sZWZ0OiA2cHg7XHJcbiAgICB3aWR0aDogMTAwJTtcclxufVxyXG5cclxuLnN0dWR5LWhlYWRlciB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNTU1NTU1O1xyXG4gICAgYm9yZGVyOiBzb2xpZCAxcHggIzMzMztcclxuICAgIGJvcmRlci1yYWRpdXM6IDNweDtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBoZWlnaHQ6IDQ4cHg7XHJcbiAgICBtYXJnaW4tbGVmdDogMTBweDtcclxuICAgIHBhZGRpbmc6IDRweDtcclxuICAgIHdpZHRoOiAxNzRweDtcclxufVxyXG5cclxuLnN0dWR5LWhlYWRlcjpob3ZlciB7IGNvbG9yOiAjRjkwOyB9XHJcblxyXG4uc3R1ZHktaGVhZGVyOmhvdmVyIC5zdHVkeS1idXR0b24geyBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltZy9EaWNvbVZpZXdlci9TdHVkeV9OMi5naWYpIG5vLXJlcGVhdCBsZWZ0IHRvcDsgfVxyXG5cclxuLnN0dWR5LWhlYWRlcjpob3ZlciAuc3R1ZHktYnV0dG9uOmFjdGl2ZSB7IGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL0RpY29tVmlld2VyL1N0dWR5X04zLmdpZikgbm8tcmVwZWF0IGxlZnQgdG9wOyB9XHJcblxyXG4uc3R1ZHktYnV0dG9uIHtcclxuICAgIGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL0RpY29tVmlld2VyL1N0dWR5X04xLmdpZikgbm8tcmVwZWF0IGxlZnQgdG9wO1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgaGVpZ2h0OiA0MHB4O1xyXG4gICAgb3V0bGluZTogbm9uZTtcclxuICAgIHdpZHRoOiA0MHB4O1xyXG59XHJcblxyXG4uc3R1ZHktaW5mbyB7XHJcbiAgICBoZWlnaHQ6IDQwcHg7XHJcbiAgICBtYXJnaW4tbGVmdDogNnB4O1xyXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG59XHJcblxyXG4uc2VyaWVzLWhlYWRlciB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNTU1NTU1O1xyXG4gICAgYm9yZGVyOiBzb2xpZCAxcHggIzMzMztcclxuICAgIGJvcmRlci1yYWRpdXM6IDNweDtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBoZWlnaHQ6IDQ4cHg7XHJcbiAgICBtYXJnaW4tbGVmdDogMjBweDtcclxuICAgIHBhZGRpbmc6IDRweDtcclxuICAgIHdpZHRoOiAxNjRweDtcclxufVxyXG5cclxuLnNlcmllcy1oZWFkZXI6aG92ZXIgeyBjb2xvcjogI0Y5MDsgfVxyXG5cclxuLnNlcmllcy1oZWFkZXI6aG92ZXIgLnNlcmllcy1idXR0b24geyBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltZy9EaWNvbVZpZXdlci9TZXJpZXNfTjIuZ2lmKSBuby1yZXBlYXQgbGVmdCB0b3A7IH1cclxuXHJcbi5zZXJpZXMtaGVhZGVyOmhvdmVyIC5zZXJpZXMtYnV0dG9uOmFjdGl2ZSB7IGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL0RpY29tVmlld2VyL1Nlcmllc19OMy5naWYpIG5vLXJlcGVhdCBsZWZ0IHRvcDsgfVxyXG5cclxuLnNlcmllcy1idXR0b24ge1xyXG4gICAgYmFja2dyb3VuZDogdXJsKC4uLy4uLy4uLy4uL2Fzc2V0cy9pbWcvRGljb21WaWV3ZXIvU2VyaWVzX04xLmdpZikgbm8tcmVwZWF0IGxlZnQgdG9wO1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgaGVpZ2h0OiA0MHB4O1xyXG4gICAgb3V0bGluZTogbm9uZTtcclxuICAgIHdpZHRoOiA0MHB4O1xyXG59XHJcblxyXG4uc2VyaWVzLWluZm8ge1xyXG4gICAgaGVpZ2h0OiA0MHB4O1xyXG4gICAgbWFyZ2luLWxlZnQ6IDZweDtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG59XHJcblxyXG4uaW1hZ2UtbGlzdCB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNTU1NTU1O1xyXG4gICAgYm9yZGVyOiBzb2xpZCAxcHggIzMzMztcclxuICAgIGJvcmRlci1yYWRpdXM6IDNweDtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIG1hcmdpbi1sZWZ0OiAzMHB4O1xyXG4gICAgcGFkZGluZzogNHB4O1xyXG4gICAgd2lkdGg6IDE1NHB4O1xyXG59XHJcblxyXG4uaW1hZ2UtYnV0dG9uIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICM1NTU7XHJcbiAgICBib3JkZXI6IHNvbGlkIDFweCAjMzMzO1xyXG4gICAgYm9yZGVyLXJhZGl1czogM3B4O1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGhlaWdodDogODBweDtcclxuICAgIG1hcmdpbi1sZWZ0OiAzMHB4O1xyXG4gICAgcGFkZGluZzogNHB4O1xyXG4gICAgd2lkdGg6IDE1NHB4O1xyXG59XHJcbiJdfQ== */\"","module.exports = \"<div class=\\\"container-fluid\\\">\\r\\n    <div class=\\\"row hangingProtocol-div\\\">\\r\\n        <table>\\r\\n            <tr>\\r\\n                <td>\\r\\n                    <li class=\\\"dropdown\\\">\\r\\n                        <a class=\\\"dropdown-toggle nav navbar-collapse\\\" data-toggle=\\\"dropdown\\\" href=\\\"#\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\">\\r\\n                            <button class=\\\"hangingProtocol-menu-button\\\" [style.background-image]=\\\"getHpMenuBackground(selectedGroupHangingData.name)\\\" role=\\\"button\\\" [title]=\\\"selectedGroupHangingData.tip\\\" style=\\\"margin-top: -20px;\\\"\\r\\n                                    (mouseover)=\\\"onMouseOver($event, true)\\\" (mouseout)=\\\"onMouseOut($event)\\\">\\r\\n                            </button>\\r\\n                        </a>\\r\\n                        <ul class=\\\"dropdown-menu hangingProtocol-menu\\\">\\r\\n                            <li *ngFor=\\\"let groupHangingData of hangingProtocolService.getGroupHangingDataList()\\\">\\r\\n                                <button class=\\\"hangingProtocol-menu-button\\\" [style.background-image]=\\\"getHpMenuBackground(groupHangingData.name)\\\" role=\\\"button\\\" [title]=\\\"groupHangingData.tip\\\"\\r\\n                                        (click)=\\\"onSelectGroupHangingProtocol(groupHangingData)\\\" (mouseover)=\\\"onMouseOver($event, false)\\\" (mouseout)=\\\"onMouseOut($event)\\\" (mousedown)=\\\"onMouseDown($event)\\\" (mouseup)=\\\"onMouseUp($event)\\\">\\r\\n                                </button>\\r\\n                            </li>\\r\\n                        </ul>\\r\\n                    </li>\\r\\n                </td>\\r\\n                <td>\\r\\n                    <li class=\\\"dropdown\\\">\\r\\n                        <a class=\\\"dropdown-toggle nav navbar-collapse\\\" data-toggle=\\\"dropdown\\\" href=\\\"#\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\">\\r\\n                            <button class=\\\"hangingProtocol-menu-button\\\" [style.background-image]=\\\"getHpMenuBackground(selectedGroupLayoutData.name)\\\" role=\\\"button\\\" [title]=\\\"selectedGroupLayoutData.tip\\\" style=\\\"margin-top: -20px;\\\"\\r\\n                                    (mouseover)=\\\"onMouseOver($event, true)\\\" (mouseout)=\\\"onMouseOut($event)\\\">\\r\\n                            </button>\\r\\n                        </a>\\r\\n                        <ul class=\\\"dropdown-menu hangingProtocol-menu\\\">\\r\\n                            <li *ngFor=\\\"let groupLayoutData of hangingProtocolService.getGroupLayoutDataList()\\\">\\r\\n                                <button class=\\\"hangingProtocol-menu-button\\\" [style.background-image]=\\\"getHpMenuBackground(groupLayoutData.name)\\\" role=\\\"button\\\" [title]=\\\"groupLayoutData.tip\\\"\\r\\n                                        (click)=\\\"onSelectGroupLayout(groupLayoutData)\\\" (mouseover)=\\\"onMouseOver($event, false)\\\" (mouseout)=\\\"onMouseOut($event)\\\" (mousedown)=\\\"onMouseDown($event)\\\" (mouseup)=\\\"onMouseUp($event)\\\">\\r\\n                                </button>\\r\\n                            </li>\\r\\n                        </ul>\\r\\n                    </li>\\r\\n                </td>\\r\\n                <td>\\r\\n                    <li class=\\\"dropdown\\\">\\r\\n                        <a class=\\\"dropdown-toggle nav navbar-collapse\\\" data-toggle=\\\"dropdown\\\" href=\\\"#\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\">\\r\\n                            <button class=\\\"hangingProtocol-menu-button\\\" [style.background-image]=\\\"getHpMenuBackground(selectedImageLayoutData.name)\\\" role=\\\"button\\\" [title]=\\\"selectedImageLayoutData.tip\\\" style=\\\"margin-top: -20px;\\\"\\r\\n                                    (mouseover)=\\\"onMouseOver($event, true)\\\" (mouseout)=\\\"onMouseOut($event)\\\">\\r\\n                            </button>\\r\\n                        </a>\\r\\n                        <ul class=\\\"dropdown-menu hangingProtocol-menu\\\">\\r\\n                            <li *ngFor=\\\"let imageLayoutData of hangingProtocolService.getImageLayoutDataList()\\\">\\r\\n                                <button class=\\\"hangingProtocol-menu-button\\\" [style.background-image]=\\\"getHpMenuBackground(imageLayoutData.name)\\\" role=\\\"button\\\" [title]=\\\"imageLayoutData.tip\\\"\\r\\n                                        (click)=\\\"onSelectImageLayout(imageLayoutData)\\\" (mouseover)=\\\"onMouseOver($event, false)\\\" (mouseout)=\\\"onMouseOut($event)\\\" (mousedown)=\\\"onMouseDown($event)\\\" (mouseup)=\\\"onMouseUp($event)\\\">\\r\\n                                </button>\\r\\n                            </li>\\r\\n                        </ul>\\r\\n                    </li>\\r\\n                </td>\\r\\n            </tr>\\r\\n        </table>\\r\\n    </div>\\r\\n    <div *ngFor=\\\"let patient of viewerShellData.patientList\\\" class=\\\"row patient-div\\\">\\r\\n        <div class=\\\"patient-header\\\">\\r\\n            <div>\\r\\n                <button class=\\\"patient-button\\\" (click)=\\\"onClickPssi(patient)\\\" title=\\\"Toggle to show/hide patient images\\\"></button>\\r\\n            </div>\\r\\n            <table class=\\\"patient-info\\\">\\r\\n                <tr>{{patient.patientName}}</tr>\\r\\n                <tr>{{patient.patientId}}</tr>\\r\\n            </table>\\r\\n        </div>\\r\\n        <div *ngFor=\\\"let study of patient.studyList\\\"\\r\\n             [style.visibility]=\\\"getPssiVisibility(patient)\\\" [style.height]=\\\"getPssiHeight(patient)\\\">\\r\\n            <div class=\\\"study-header\\\">\\r\\n                <div>\\r\\n                    <button class=\\\"study-button\\\" (click)=\\\"onClickPssi(study)\\\" title=\\\"Toggle to show/hide study images\\\"></button>\\r\\n                </div>\\r\\n                <table class=\\\"study-info\\\">\\r\\n                    <tr>{{study.studyDate}}</tr>\\r\\n                    <tr>{{study.studyDescription}}</tr>\\r\\n                </table>\\r\\n            </div>\\r\\n            <div *ngFor=\\\"let series of study.seriesList\\\"\\r\\n                 [style.visibility]=\\\"getPssiVisibility(study)\\\" [style.height]=\\\"getPssiHeight(study)\\\">\\r\\n                <div class=\\\"series-header\\\">\\r\\n                    <div>\\r\\n                        <button class=\\\"series-button\\\" (click)=\\\"onClickPssi(series)\\\" title=\\\"Toggle to show/hide series images\\\"></button>\\r\\n                    </div>\\r\\n                    <table class=\\\"series-info\\\">\\r\\n                        <tr>{{series.modality}}</tr>\\r\\n                        <tr>{{series.imageCount}} image</tr>\\r\\n                    </table>\\r\\n                </div>\\r\\n                <div *ngFor=\\\"let a of Arr(getThumbnailListRowCount(series)).fill(1); let imageIndex = index\\\"\\r\\n                     [style.visibility]=\\\"getPssiVisibility(series)\\\" [style.height]=\\\"getPssiHeight(series)\\\">\\r\\n                    <div class=\\\"image-button\\\">\\r\\n                        <app-thumbnail [image]=\\\"series.imageList[imageIndex*2]\\\"></app-thumbnail>\\r\\n                        <app-thumbnail *ngIf=\\\"imageIndex*2+1 < series.imageList.length\\\" [image]=\\\"series.imageList[imageIndex*2+1]\\\"></app-thumbnail>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\"","import { Component, OnInit, Input, EventEmitter, Output } from \"@angular/core\";\r\nimport { LocationStrategy } from \"@angular/common\";\r\n\r\nimport { ViewerShellData } from \"../../../models/viewer-shell-data\";\r\nimport { Series, Pssi } from \"../../../models/pssi\";\r\nimport { GroupHangingData, ImageHangingData } from \"../../../models/hanging-protocol\";\r\nimport { HangingProtocolService } from \"../../../services/hanging-protocol.service\";\r\nimport { ImageSelectorService } from \"../../../services/image-selector.service\";\r\nimport { LogService } from \"../../../services/log.service\";\r\n\r\n@Component({\r\n    selector: \"app-navigation\",\r\n    templateUrl: \"./navigation.component.html\",\r\n    styleUrls: [\"./navigation.component.css\"]\r\n})\r\nexport class NavigationComponent implements OnInit {\r\n    Arr = Array; //Array type captured in a variable\r\n    @Input()\r\n    viewerShellData: ViewerShellData;\r\n    @Output()\r\n    layout = new EventEmitter<number>();\r\n\r\n    private baseUrl: string;\r\n\r\n    groupLayoutList = [\"1X1\", \"1X2\", \"2X1\", \"2X2\", \"3X3\"];\r\n    imageHangingList = [\"1X1\", \"1X2\", \"2X1\", \"2X2\", \"3X3\", \"3X4\", \"5X6\"];\r\n\r\n    selectedGroupHangingData: GroupHangingData;\r\n    selectedGroupLayoutData: GroupHangingData;\r\n    selectedImageLayoutData: ImageHangingData;\r\n\r\n    groupLayout = \"1X1\";\r\n    imageLayout = \"1X1\";\r\n\r\n    constructor(public hangingProtocolService: HangingProtocolService,\r\n        private imageSelectorService: ImageSelectorService,\r\n        private locationStrategy: LocationStrategy,\r\n        private logService: LogService) {\r\n        this.selectedGroupHangingData = this.hangingProtocolService.getDefaultGroupHangingData();\r\n        this.selectedGroupLayoutData = this.hangingProtocolService.getDefaultGroupLayoutData();\r\n        this.selectedImageLayoutData = this.hangingProtocolService.getDefaultImageLayoutData();\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.baseUrl = window.location.origin + this.locationStrategy.getBaseHref();\r\n    }\r\n\r\n    onClickPssi(pssi: Pssi) {\r\n        const hide = !pssi.hide;\r\n        pssi.setHide(hide);\r\n    }\r\n\r\n    getPssiVisibility(pssi: Pssi) {\r\n        return (pssi.hide || this.viewerShellData.hide) ? \"hidden\" : \"visible\";\r\n    }\r\n\r\n    getPssiHeight(pssi: Pssi) {\r\n        return (pssi.hide || this.viewerShellData.hide) ? \"0px\" : \"100%\";\r\n    }\r\n\r\n    getThumbnailListRowCount(series: Series): number {\r\n        const count = Math.trunc((series.imageList.length + 1) / 2);\r\n        return count;\r\n    }\r\n\r\n    getHpMenuBackground(name: string) {\r\n        const background = `url(${this.baseUrl}assets/img/DicomViewer/${name}_N1.gif)`;\r\n        return background;\r\n    }\r\n\r\n    onMouseOver(event, triggerClick: boolean) {\r\n        event.target.style.backgroundImage = event.target.style.backgroundImage.replace(\"N1\", \"N2\");\r\n        if (triggerClick) {\r\n            //event.target.click();\r\n        }\r\n    }\r\n\r\n    onMouseOut(event) {\r\n        const imageUrl = event.target.style.backgroundImage.replace(\"N2\", \"N1\");\r\n        if (imageUrl === event.target.style.backgroundImage) {\r\n            event.target.style.backgroundImage = event.target.style.backgroundImage.replace(\"N3\", \"N1\");\r\n        } else {\r\n            event.target.style.backgroundImage = imageUrl;\r\n        }\r\n    }\r\n\r\n    onMouseDown(event) {\r\n        event.target.style.backgroundImage = event.target.style.backgroundImage.replace(\"N2\", \"N3\");\r\n    }\r\n\r\n    onMouseUp(event) {\r\n        event.target.style.backgroundImage = event.target.style.backgroundImage.replace(\"N3\", \"N1\");\r\n    }\r\n\r\n    onSelectGroupHangingProtocol(groupHangingData: GroupHangingData) {\r\n        this.logService.seperator();\r\n        this.logService.info(\"User: \" + groupHangingData.tip);\r\n        this.selectedGroupHangingData = groupHangingData;\r\n        this.layout.emit(this.selectedGroupHangingData.groupHangingProtocol);\r\n    }\r\n\r\n    onSelectGroupLayout(groupHangingData: GroupHangingData) {\r\n        this.logService.seperator();\r\n        this.logService.info(\"User: \" + groupHangingData.tip);\r\n        this.selectedGroupLayoutData = groupHangingData;\r\n        this.layout.emit(this.selectedGroupLayoutData.groupHangingProtocol);\r\n    }\r\n\r\n    onSelectImageLayout(imageLayoutData: ImageHangingData) {\r\n        this.logService.seperator();\r\n        this.logService.info(\"User: \" + imageLayoutData.tip);\r\n        this.selectedImageLayoutData = imageLayoutData;\r\n        this.imageSelectorService.changeImageLayout(this.selectedImageLayoutData.imageHangingProtocol);\r\n    }\r\n}\r\n","module.exports = \".thumbnail {\\r\\n    background-color: black;\\r\\n    border: solid 1px #888;\\r\\n    height: 70px;\\r\\n    margin-right: 4px;\\r\\n    overflow: hidden;\\r\\n    padding: 2px;\\r\\n    width: 70px;\\r\\n}\\r\\n\\r\\n.thumbnail:hover { border: solid 2px #F90; }\\r\\n\\r\\n.img {\\r\\n    background-color: black;\\r\\n    height: 70px;\\r\\n  \\r\\n    margin-right: 4px;\\r\\n    overflow: hidden;\\r\\n    width: 70px;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy92aWV3ZXItc2hlbGwvbmF2aWdhdGlvbi90aHVtYm5haWwvdGh1bWJuYWlsLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSx1QkFBdUI7SUFDdkIsc0JBQXNCO0lBQ3RCLFlBQVk7SUFDWixpQkFBaUI7SUFDakIsZ0JBQWdCO0lBQ2hCLFlBQVk7SUFDWixXQUFXO0FBQ2Y7O0FBRUEsbUJBQW1CLHNCQUFzQixFQUFFOztBQUczQztJQUNJLHVCQUF1QjtJQUN2QixZQUFZOztJQUVaLGlCQUFpQjtJQUNqQixnQkFBZ0I7SUFDaEIsV0FBVztBQUNmIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50cy92aWV3ZXItc2hlbGwvbmF2aWdhdGlvbi90aHVtYm5haWwvdGh1bWJuYWlsLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIudGh1bWJuYWlsIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IGJsYWNrO1xyXG4gICAgYm9yZGVyOiBzb2xpZCAxcHggIzg4ODtcclxuICAgIGhlaWdodDogNzBweDtcclxuICAgIG1hcmdpbi1yaWdodDogNHB4O1xyXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgIHBhZGRpbmc6IDJweDtcclxuICAgIHdpZHRoOiA3MHB4O1xyXG59XHJcblxyXG4udGh1bWJuYWlsOmhvdmVyIHsgYm9yZGVyOiBzb2xpZCAycHggI0Y5MDsgfVxyXG5cclxuXHJcbi5pbWcge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7XHJcbiAgICBoZWlnaHQ6IDcwcHg7XHJcbiAgXHJcbiAgICBtYXJnaW4tcmlnaHQ6IDRweDtcclxuICAgIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgICB3aWR0aDogNzBweDtcclxufVxyXG4iXX0= */\"","module.exports = \"<div class=\\\"thumbnail\\\" [style.border]=\\\"getBorderStyle()\\\" (click)=\\\"onSelected()\\\" (mouseover)=\\\"onMouseOver($event)\\\" (mouseout)=\\\"onMouseOut($event)\\\">\\r\\n    <img [src]=\\\"thumbnailToShow\\\"/>\\r\\n</div>\\r\\n\"","import { Component, OnInit, Input } from \"@angular/core\";\r\nimport { Subscription } from \"rxjs\";\r\nimport { Image } from \"../../../../models/pssi\";\r\nimport { WorklistService } from \"../../../../services/worklist.service\";\r\nimport { ImageSelectorService } from \"../../../../services/image-selector.service\";\r\nimport { DicomImageService } from \"../../../../services/dicom-image.service\";\r\n\r\n@Component({\r\n    selector: \"app-thumbnail\",\r\n    templateUrl: \"./thumbnail.component.html\",\r\n    styleUrls: [\"./thumbnail.component.css\"]\r\n})\r\nexport class ThumbnailComponent implements OnInit {\r\n\r\n    thumbnailToShow: any;\r\n    isImageLoading: boolean;\r\n    selected = false;\r\n    subscriptionImage: Subscription;\r\n    subscriptionThumbnail: Subscription;\r\n\r\n    borderStyle = \"1px solid #555\";\r\n\r\n    _image: Image;\r\n\r\n    @Input()\r\n    set image(Image: Image) {\r\n        if (this._image !== Image) {\r\n            this._image = Image;\r\n            this.refreshImage();\r\n        }\r\n    }\r\n\r\n    get image() {\r\n        return this._image;\r\n    }\r\n\r\n    constructor(private imageSelectorService: ImageSelectorService,\r\n        private dicomImageService: DicomImageService,\r\n        private worklistService: WorklistService) {\r\n        this.subscriptionImage = imageSelectorService.imageSelected$.subscribe(\r\n            viewerImageData => { this.doSelectImage(viewerImageData.image); });\r\n\r\n        this.subscriptionImage = imageSelectorService.thumbnailSelected$.subscribe(\r\n            image => { this.doSelectImage(image); });\r\n    }\r\n\r\n\r\n    ngOnInit() {\r\n    }\r\n\r\n    getBorderStyle(): string {\r\n        return this.borderStyle;\r\n    }\r\n\r\n    doSelectImage(image: Image) {\r\n        this.selected = (this.image === image);\r\n        this.borderStyle = this.selected ? \"2px solid #F90\" : \"1px solid #555\";\r\n    }\r\n\r\n    onSelected() {\r\n        this.imageSelectorService.selectThumbnail(this.image);\r\n    }\r\n\r\n    onMouseOver(event) {\r\n        this.borderStyle = \"1px solid #F90\";\r\n    }\r\n\r\n    onMouseOut(event) {\r\n        this.borderStyle = this.selected ? \"2px solid #F90\" : \"1px solid #555\";\r\n    }\r\n\r\n    /*\r\n    setSelectState(selected: boolean): void {\r\n        var o = document.getElementById(\"thumbnail\" + this.imageSop);\r\n        if (o !== null) {\r\n            o.style.color = selected ? 'red' : 'white';\r\n        }\r\n    }\r\n  \r\n    onClick() {\r\n        this.setSelectState(true);\r\n        this.imageSelectorService.selectImage(this.imageSop);\r\n    }\r\n    */\r\n\r\n    refreshImage() {\r\n        if (this._image !== null) {\r\n            if (this.worklistService.isUsingLocalTestData()) {\r\n                this.thumbnailToShow =\r\n                    \"data:image/jpeg;base64,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1NPS0M7Nzs7PyLy+w8bKztbc2c7Tv7y6tK2jm5GABgUGM2F3jJeepauwuL3CydPR19ze2djSy8G9vLiyqqCYlpWKlZ6mqK2tqa+4uL7CxcbGyMnJx8jHycvK0drj6Ojo6Onn5uTk6OXj3dfU1dTT0tLW1dXW1tTT0tHR0dDQ0tHRz83LysvLysKysbrBxMrR2dzZz9LBvLu1rqWdk4AFBQg4YXqPmJ+lq7K3vcLP0NLX3d/c2tTMwbi4trGvqaGcl5OSmqepqrCwsrm8u73EycjMzdHPzMrNz8/R2ePp6Ojo6ejm4+To4eDa1tXV09XW1dTV1NPSzs7Nzs7OzM3PzMzKycfIyMa6qquwt73CytPb3NnQz8a+u7awpp6VggUFCzphfZCYoKatsri9w9XO0tfc3+Hd1c3BtaywsbS0qKGblpWdoa2qr7W0uL+8v8LGy87Q0tTV1NTU19jb4+rn6Ojp5uXj5Ojg393c2dnX19XT09TQzs/Ly8vKy8jIysnHxcXFxcbAsaCepayxu8PL1t3b2NDMy768tq+mn5eGBQUOO2J/kJmgp62yuL7F0szT19vf4t/WzMG1ra2usLGtpJyVl6Wlp6qvuLm6vsC/wsXHztDU1dTV19nb3d7k6+fo5+jm5OLk5uDf3dnV09PT0tDQ0MvLy8fHx8bHw8fHwcDBwcC/u6qcnJ2hp6+7xM3Y3tzX0crQv7y2sKegmYcFBRM6Y3+RmaCnrrK5v8bKzNPX2t/i4tnNwLaysK6ur66om5mXpqmqqK66vLq8wsHDxcbLztTV09TW1tna3uTq6Ojo5+bk4+Tl4N/d2NPR0M/PzMzPycjIw8LAvr/Cv7i3uLW3tK6goqGcnaGjrbrGzdve3NbSytXBvLaxqaCahwUFFzlif5CZoaevtLvAx8vN09fa3uLk3M7Du7azrqypoqeclZWlrK6vr7S+vrzBwsXFxsrM0NPS1dXV19rf5efp6Ojn5uTj5OPj49zX09DNysjHycvDwMK/urm3urexrK2pqqeel5mbmaCjo6atucXP397b1tPLzMG7uLOropuIBQUbOmF/kJqhqK+1u8LIzc7T19rd4uThzsS/urOspqCYl6GWlp6utre3ubzBvsHExcbHy8zQ0c/R09XY2d7m6eno6Ojn5eTk5eXk3dfUzcnFu7vBwLSzs7e3sbSspqCdmZaWkZKSi5CboKGnq6+4x9Th39nW08zEwby5tKyinIkFBx46YH6PmaGosLa9xMrOz9TX2t3i5OTTxsC7ta6hmpqRmJmYlai0tbe7vcHCwMTGxsnMzdDQ0NHS1NfZ3uXn5+bm5+Xj4eHi4uLe1dLNx7qmkaCln5+hp6GjnZSOgn6CiImQlo6Rj5aeoqits7nK2eDf2dbTzMXBvru2rqOciQQLIDpde46Zoaivt77Hy87P09fa3eHk5dfKwbq1qKKemJKPio6Ro6yxtLm+wcXDxcfGyczN0dLR0tPT1dji5ufn5+fo5+Xj4uPk497U0s3Gt6OMl4l3f4+ZjYuBdnp5iYKLkIuEhoyTkp+mqq+0vs7b4N7Y1tLNxsPAvLewpJ2KBBAiO1t5jJihqa+3v8fMz9DT1trd4OPl2s/Euq+spaCblpGNg4SgqrC0ur3BxcjHycfL0c3R0tTU09XW2OHl5+fn5+no5ePi4+Pk3tTTzMGzq5ePh29ufYeDgoB8hoJ+d35+fYWDipGXm6Sqs7vFztzf3dnW0s7IxsG9ubGlnYoEFCQ7WXaKmKGpsLi/x83Oz9LW2d3f4ubc0Me5saqloZiZlpCAfZGlr7S8wMLGy8vNy8vR0dLR09TW1tja4OXn5+fn6Ofk4uHh4+Lc1dDLwLCll4d/eIWMjYeSgoaFe3Z4eHF9gYmIjZKWpLG5wcfO3t7d2dbTzsjGw7+6s6adigcXJTpWc4eVn6mwuL/Gzc/P0tbZ3N7j5d3Qx72xq6SfnZKUmIJ2iayvsrq/wsXKzc7Ozs3R09HT09bX2Nrf5efn5ufo5+Ti4uPj39rSzMnCsqSdio+UkJKHk5N9fH14hoNucX6Ah4WHj5qmtb3EyM/d3N3Y1dPOx8bFwLu1p56KCxooOlRvhJSfqLC4wMbMz9DS1dnb3eLk4NLEvrWso52ZjomMiH17ma60tbvAxMjKz8zNz9LT0M/S1dTX2d/l5ubm5ujn5OPi4eHe2dLLyMG4r6iWmJ2Uk5GPhnN1gH9+cG56gH1/iYqSnqmzvsTJz93c3NfV0czIx8TAvLWnnYsQHCo7U2uBkZ2nrrjAxsrOz9LV2Nvd4uPg0sK5trGlnpmPh4OGh4KIpLK2uLvAxsjOzs7N0dbT0dPT1Njb4OXm5ufn5+bj4+Lh4N7Z1M/NyL6xqKChnpyRkol8fYSBfnR1doCEfICHkJujprG9xMfO3tzb1tTRzMfFw8G9tqidixMfLDxSaH6PnKavuMDFyc7P0tbY2tzh4+HOwrmzsaujmpSQi4qGgYSarrW5ubvCxszQz87S1NLU1tjY2tvh5ebm5+bn5uPi4uHh3tfSy8nIw7SrpZyaiYyJjJOTj3h2eYCAgnl7hoqVnKKor7vAx9De3NrV09HMxsXEwb21qZ2KFSEuPFBle4yapK63v8XJzc3R1dfa3ODk4c++t7Suramln5yTkoZ9e4+lsbm8u77BxszMzdHT0tPT1tbW2N7k5ufn5ufn5eTk5OPe1M/KycrJwbGkiYJ8gXh1hZiFc3V+foGAgImUlpWaoaWpr77H097d2NbT0MvFxMPBvbarnIgXIzA+UGJ3iZikrbe/xcnLzc/T1tnb4OTg07uyrq6tq6qkoZKPjIWBhpSgsbu8wMHFys3Lz9PV09TV1dXY3+Pn5+bl5ubj5OTj4NzVz8rIx8O/r6OGhId9d3d8fX15bn2CjIWFjJSXmpiZm56ovcnY3d3Y1dPPy8XEwsG9tqychxglMkBQYXSFlqKst7/FycvNz9PW2dzg4t7WvrGrqaqrp6CcmJKNjX1xhJyktLfAxsXKzMzO0dPR0tTU1dff5Obm5eXm5ePi4+Lh39bRzMXDvrWqnpeTjoB+foBxdYGChYSMkZOWlZSUlJSWnKa6zNzd29fV0c7JxMTBwb23rZ2HGiYzQU9fcIKToKu3vsXJy8zO0tbZ3ODi3tHIsaulpKGfnpuXl4+IgnRxk5+us7vCzMzLy83O0M7Q0tLV2N/k5ubm5+fn5eTj4eDd2NHKxcK7squklJSXgXx6dn5/hIWNi4iOioqMjo2RmJidpLXT297Z1tTRzcjCw8HBvbatnYccKDNCUV9uf5Ceqra+xcjKy87R1dnc3+Ddz868rqagnJiRlpGMj4mBgHaHnaixvL3ByMrKzMvOzs/Q0tTX3uPk5eXm5+bj4eLg393Y0czHwbmtqqSOlJF/eHuBhoV+iYJ/gIKFgYCEjZOXm5+jtdba3dfV1NDMx8LDwcC9tq2ehh4qNEJSX218jZuqtr7Ex8nKzNDV2Nrf39nOy8m1p5+TiYWJj46NjX6BgoCWrbe7vL2/xsfKyczOzs/Q0tbc4uTk5OXm5eLh4N/e3tjSzMa/tKijnpCRk4qIi4Z9gIuIfn5+fHV5goCKkZecoK3D1Nvb19XT0cvGw8PBwLy2raCFICs2QlFgbXuLmqm1vMPHx8nMz9TX2d3e18vJx8KrmYuGhISAhYWIi4iHioqksLq8urvAxMbGy83P0NDS19zi5eXl5ubl4uHg4N/b1tDKw7uypKChl5CfkpCGhISAhoOEeXR0dnmBgYqTl5yqvcXQ29nX1NPRysXEw8HAvLWsoYchLDdDUmFteomYqbS8wsXIycvP1NbY3N7Zx8fCvrSXj4ODfHl7eHJ3goiMhouitLq+wMDDxcTJzNDPz9DW3OHl5eXl5eXi4ODf3trWzsXBu7SuqaOYmqGVmY+Gf355eHdyeXd4eoGEgImZpri+xs3Z2dfU0tDKxcXCwcC7tayhiCMsN0VTYW16iZmps7rAxMbIys/T1tfa3tvGwr26r6qTjIZ7dXZ8cWlyfoaFfJKmtbi7v8PFycrMzs3O0dfc4eTk5OXl4+Hf393d29bQycTBurKnn5mkmYeWkH5xaG1vdHiAdXV7g3+EjZ6wt77EytjZ19PSz8zGxcPBv7u0q6CIJC02Q1NhbnqJm6qyusDDxMfJztTV19je28a8u7GuqaiThHpya3F0bm1tbXV5eZOqtre+v8LFy87Q0dLS1tvg4+Tk5OPi4N7e3d3b083FwL22tqedm6KbjYV4ZGpwbWpubnNydn6Bh5Cdpq20u8DD2dnX09HPzcfFwsC+u7SroIokLjdBUWFteoqeqrK6v8LDx8jP09XW197aybmtrqmmoaOSfHdvaWpudXBpZ3BvcZGot727xsXJzc3Ozs/V2t/j4+Pj4+Hf3t3c2tfSzMbBu7azpZyboKOUd3hoZmhjZWhoa3J4fIWQmZ2jqa+4tcHY2dbS0c/MycTCv766tKyhiyQuN0BPX256jqCrs7m/wMLGyM/S1NbW3dnPtaWjqKSemZmQe3JybXBub2xnaWRgaJWmtbi1usPKysrKy9LY3uDi4uHh39zc29vZ1c7MxcO/tKqZj5STm5F4c2llaGdrbGtxb3qHj5OWm6Snpamxwdja1NLQzsvLxMK+vLm0rKKNJy42P0xdbn+Uoauzur6/wsXKztHU1dbc19Ozpp2doZyWkZCPgnRzcmplZmVnZWNZZo+ksa6ut8LGxsbJ0dff4eLj4+Ph4N7c29rWzcrFw8CvoZmDjJaWjn5vZWhzb2tqb3R7gIqLkJacnpiYpLDC19vU0c/Ny8vGwb67ubOto44tMzU/SVlthZejrLS6vb/CxMzO0NPV1trX0rqonZmUlpOPkZKOgHd4b2ZjYVxWYGRfdZ6qrq2wub3Aw8bP193f4eDh4d/c29nY19bNxr++wquZiHZ/iIyBZmVnZ2ltbHJ4gIaIjoyMkpGNj5ehrcfW2tTRz8zLysbAvbq4tK6lkTI6Pj5JVG6HmKWutbm9vsHEzc7Q0tPX2dbMxK2emJCMjZGJioyKhH95bmtoYFlcYm9yhKKtrq6zt72+w8zU297f39/g3tvZ2NfX1MrDwLu7oYiCgIGFhnJnYF9dYWx1dnqCg4qLi4p/fYWMlqCszNLY1dHOzMvJyMC9ure0rqiVNz9DQkdWbYqapq60uby/wMfMzs/Q0tfY08rFtKCWjYyKh4mIgn2Af3t4enZxamhtc3p6kayxrK2zuL3AydHY3d7e39/d29nX1tbTysPBvK6cgYOGhoB0amBdY2hmcHV6en6AiImDe3l6goiWorPN0tfV0s7Ny8rJwby5t7SuqZY7Q0hIS1ptipynr7W6vb7Ayc3OztDR2NjQyMG/pZWNi4WBgYB9end3dXJycXFsXGFsdnBvkK+1sbK1usHJz9Xc3dzd3d3a19fX19HJwLu4rZqFj5KSf3ZzbGtobHJwbXFydXR2cnR7enx/iJWmwMbR1tTSz8zMysnEvLi2s6+pmD5GS0xVXm2Fnqmwtbq8vcDMzM7OztHY2c/CwL2zlo+LiIWAdHh6dW9tcHRxcXtzY15caG57lae1t7W5vsjQ1dzd293d3NrY19jV08rEvbeynYqXoaWMfWtqa3FuaWhmaGtjYWZucnV6foKGmLS+ws3V1NPOzc3Kyca8ubazr6qZQEdNV19haoKhq7K2uby9xMzMzs3N0dnYzry+uremj4uKgntwa2Zqa2hpamdtbmxsZ158iH+DnLi3tri/ydDW29zc3d7d2tjX19fVzsvCvLennJiWnX9nY2lvaWZiXV1XWVpdYmdudHqAiZKrtLe/xNXU1M7NzcvJyL66trOwq5pDS1RdY2VqgKStsre5u73HzMzOzMzR2dnPvLe2sa6ejoh+dmpiX2FgY2NlYGFgWWJtanmUjoqasry8vcHIz9Tb2tvc3dzY2NfX1tPOyb65sqycloyNfWFeY2NdWE5NTlFWWVpgaG50eoOTpa+xs7m/1NPUzMzMy8nIwbq1srCrmkpUWWBmZ2t+p66zt7i7vsnMzc7MzNHZ2NG8sbCxqqqfiHxxbGVhWFdSVFZfZGFdZ2hyeImLiY+ls7a4v8fM0dja2trb2tfW1dXT0crFurSupo19fnhpV1lgV1BRSkxOUltZWl1gY25/kqKprq6vsb3U09PLy8zLycnEu7ezsKybUltfYmdrbH6rrrO3ubzAy8zNzszN0djY1Lyxq6+qpaSYfHFuY1tXUlBRUFFcVlpjXm90eYSTkJWutLa+wsfN1tjZ2tvZ19fV1dPRysG3sKydgnZzclJFRU5PUFdMTU9WWV1fYWNsd46coKisrKivvtTS0srKy8rJyce8uLOvq5xXYWNkam1vh62xtLa5vcPMzc/PzM3Q1tnXvbKsqqyloJaNeGtjX15eXlZRUVdQT1dgbWZgdI6SkKmwtr/ExczT1dfZ2tjV1NPT0tHIvrOvqJN1bmVqXUdGUEtPT0dKTVJUV1pkcHyCjZadpaikqrC/1NPQycnLysnJyL65tK+rnFxlaGhrbnGYrrK1uLu+x83Nz8/Nzc/T2djCta6ppZ+TjY6KeWRcWlVTU1VQUVVKVmliVlBmdnqElqOuu8PGytDT1dfZ19TT09LUz8S7sKmjjHhxYlxkUVVcUlBKS1JUUlFgbHR5hoeHjJmanKOttMPT08zHycvKycjJwbu2sqycX2lqaWxye6avs7W5vL/Jzc7Qz83NztHX1s24r6mhjoyNjIqFfGpZUU9UUFFYVlNZbGZcXWyDfHyIlai2wMTKz9HT1NfY09LS0tTOv7Wsp6OKfHVlYWJUYGFRTU1RVFJaY2hwd4CFgISFgJOapK65y9LSysfIycrJycnCvLizrp1ia21sbnSOq6+ztbm8wMvOz9DPzc3N0NPV0cCxp52Hf4OEgHp0c3FjWVNTXVRLS05WXWqPkoN1c4SUp7O9wsjO0dHS1djU0dLT0c++sKqkmIR5a2VlbXdyW1dTV2NwcHJtcXNxcnR5dW93jpqksMPM087KxsfKysjIyca8ubSwnmhucG9wfJ2tr7O2urzCzc3P0M/NzczO0NXPzLWml4mAeXR6enF0e3RuaFtZT0xITkxGS2V1dnJweo6ms7vFyM/S0dLV19TS0tTU0Mazq6icfXFxZWp9emleZGVkZWNob3FzcGxvbGVmbHWKlqW3yMzTy8nFxsnKycfIx724tbGgcXNzcnKJpKyvs7e7v8XOzc7PzszMzM3P1M/LwqeVioB5cmpueXt8dG5lYVxQSkhKSUNMUFxmZmlwiaa1vcTIz9PR0dTX09LS0tDMxLespZF8dnFscoRvaWFmaV5gXmFmamxlYFhaYGZteIyXrMDGz9HKyMTEx8rIxsfHv7m2saF6e3d2eZinq7CzuL2/yM3Nz8/OzMvLy8/TzsnCtpuNfXdxbm1ubHBvamReYGFhW11gXWBgYWlobHiEqLW7wsjO09LR1NbT0tHQ0MrDuLCpkoV2cHZ1f3dwaWVnY2piYWFcWVxgXFteYWh5jJ+zvsbPz8rGxMPFycfGxcfAuLSwooGDfHuJo6itr7O5vsHMzMzOz83LysnKztPNyMCzqpiAd3BtaGZeX2JoY2ZmZWRdZWdnbHBubnJjZH+hs7vCyM/V09HS1NPRz87NysG7tqWMh3Z6h3dyZ2VnaWNiY1RQT05QWWJhZmRkaICZqK+6xs/PysXDwsTIyMXExsO4s6+ih4yHjJmiqa2vtbq+w83Mzc7PzMrJx8jN08/EvLCppJF6dXRuaWJcUFNbYWJdVFdiW15ufH15aFxqeZizvMPJz9TT0dLU0tHPzMfDurywkICCfXd0Xl5XUFZYVVVIREdMTVBTWF5ia2p3k52iqLbC0NDJxMPBwsbIxMTExbi0rp+MkZKan6aqrLC2u7/GzcvMz8/LyMfGx83S0cSyrKejoJSAdm5nYVhUUFJOSEpOWVpfXW99d3BiWWqGn7O8wsfM0dXS0tPR0NHNxMC+uKV8cXZ4cGZbUlNKSkRFQ0JHREhJTFZWXGNpeouXl5uiqsTQ0MjDwsDBxsjFwsLFu7SvoJCZmp6lqquusbi8vsrLy8zPzcnHxsbHy9LSxbGkoaGfk5CBcGVfWFRSTkhDQkJMR1dhaG9jVUtNX4Kbr7e9wsrR0tPU09HPzsvEv7mxmWlda4Z0W1RTTkVJRUNFQUNDRU1QUFlkc32FjJSVlJWpyNDQxcLBwMHGyMXBwcK+tLGilaChpaaorLCzuLzBy8nJy8/Mx8bFxsbI0tPIsKKbn52SkI+CcmRZVVFKRUNDRUVGTV5jXVZOQ0RXfZensLW/yc7Q0tTTzszJxsO9saN+U1RdfHFUU1tIRkZIR0ZBQURDRk5ZY219f4GNlJCNlavLz87DwsHAwMTJxsHAwL+4sqKXpKiqqqqssLO4vMbJyMnMzsrFxcTFxsfP0c6xoZ2Xlo+JgHx7dmxZTUlERUpKREVFSlJTVk5GSFd/laOstsLGztDS1NHNy8nGwr6wj29TUFBha1xOU0hERkVIRklJSk9TXWRtbnFzfYmKi5GardDNysLAv7++w8jGwb++vruypJimqaqura+xsri+x8jHyszNysXFys/Y09DR07WnnJeVhnh6eHx9cGxiW09SSkhGSUZJT0pSVU1HVH6VpbK+xMbO0NLU0c3LycfFu7aad1tZU1lZY0lKQ0VIRUVLSlBWX2BjZmZobGhmg4iNlKC8zs3EwMC+vr7Cx8bCwL29vLOkmKaprK2vsbO2ucDGxsfKzc7JxMXNxMTFz9LTxKqdmZeJcm50c3Jra2hpZl1WTk1ISUtGR0pOTE9biJyrtr/DxMvP0tPQy8nIxsG6sKSGaWthXVdjTElBRkpOU1pXV11fXVxiYVtZXGJ6ho2ZsMXLysC/v76+vMDGxsPBvr28taSXp6msrrCytbm8wsTExsvOzcjExMzCwcLK0NDQtaCakIZzb2liaWhna2deYFpdZ2JjYVZUX2pmZ22Inam0vb/DytDT08/MysfGwrmroot8fG5paG1sYVhSUFJVXFtXWlxcVFJPU1Zfa3iHk6m7xMvEvr69vb27vsbHw8G+vby3o5ilqKutsLK2ub3DxMPGy83Nx8TCzcrOxs/H0M7CsJuLhnlsa2JeXF5iZWJjW1pbXltaVlZebmpkaHiNoKu3vcPIzNDQy8TExcbAu6eeiXqFd29tbXRrX1dTUFBUYltWT05NS0xTWV9vgZSlsLjExsG8w83Qx7q+xsfEwL++vLaklKGkp6yws7W3vcLExcjLzc3GwsLBx8zIxMbMzsK3q5aHfW9oYmBfWFVSV1tXVFJaVlJXV11pZmh1c3SUoK+yvcXJztDLwcDCwr6yn5iLfoWEc2NiX15eXFpWU01JSUdJSkxNU1ZaZoGToqWtt8PFvsHBvL66xb3GycXCwL68uKiUoKOnq66ws7e9wcPGx8rOzsXCwMHAwL/CxMrLw7eoppeDb2VoZ19ZVUxJRkZKTlJRT1paZHN2a2BiYG6JnK2+xMnOz8rCwcLBv6yZjoZ4dnR4bmRbVFhQR0RBQEBDRUpLTU9WW2l/kJWeo6q1xMS8xLm3t7fFvsXIx8K9u7q4qqCioqaqra+yur/CxcfJy83OxcC/v7+/v8HDycrBtaiknJeDdXBoYFlUTURAQ0hDRUNCRVBcaF9TVFtjZHqTrr3DyM3PysPBwMC+o5aJd25dXGBlY1lOSkpBOz5AQERFRUxSWmlzeoKLk5ifo7nFxLu8wsDCv7+/xcfEvru/wL6ws7yuqK2vsri7vL/CxszLy83Fv728vb2+wMHIycSup6Sak4+LgW9eV05NSURGREFHQ0NHWmh4X1VVWWtqf56wvsbJzczGwb/AwbugmY5/c19aWVxmZV1QS0dAOz0/QktNV2VrcXF3fYSJjJiqwcXEure6wsO7uMLFxr+9wb67uqumtsLFwLy4u7u9v7/Ex8vLy8a/vLu8u7y9v8bIybGnnpaTk4qCenZoWFBJRURFQkNBQEZYYmVfXl9ieX6arbTDyMnLycPAv8HGuqumlYh/Y15ZYmRnZmdaU0VDRktQWFtbXmRlbnZ7eoKNmqvHx8O6tre3uLi7w8XEv8O9uri4qaGys7S4ubq+vsHEw8DDx8rKxr67u7y7u7q9w8jKuaqbkZCPiH5xaWlmYlxUUlNJSUhMWmJhYmZvc3+IjJ2qsr/FycrGwb28wMO4r6yqmJB3b2JdYWZrcG9dVU5SUlFTVVdWWGFlb3l+gpCgtMTEwb+7ubm7u8HIxsTCxLy5t7SopqiprrKys7e7vcHGxMLGycvGwLq7vLu7uru+yMfFrZ6XjoZ+dGlkZF5cWVVZWFNZZWpvcnVvbW53g46VnqmvvsjKzcjDwr/Aw7WsqKqflYl8cWxqdXh0cl5VTExPUU9QTElNUV9seoSNlqrDwcG6uL3Av76+xsfDw8bHura0sKifp6apsLGxtri7vsPHxcXIzMvBu7q6urm5ub3CyMe3pZ2RhXprW1ZWV1lZWF9UUVRbamxxbWppYXeFiIeQpbO9w8bGv7m7vb7DsqqjoqCflH5wamlzdGxsXFdRTElGRENFSEtUXGyAipejv8LCvr/Av8HExsjLyMbFycu3srGyppmkqKmsr7C0uLm9wMPNx8jJzMi+u7i4t7i7vbu/wsSyoJKIemRcVlFPTE5PVVFSV19kZ3BpaGBmen9/g4uXobjAxcK6tbW3uruspZqXlpmci3xsamx0bmFZUVBFRENFRUZKTFNYcIaRprvBwLu5ubq9xMfL0dDMyMfHybyusKyimKGkpqutrLO0trm9v9DLy8fHyMG8ubq9vLe0tLa/wcGwmIt2ZVxVUE9PTExNTUlOVVddYl1gaHFveH+DiJSkt7/GxMO9uLq7uqOXl4+KhIV+fndoaGVhV09KTElFRUdIS01RVlxxk6W3wL23srGwrqyptcS+vMHGxMPFwbOpp5qTn6KjpamrsLKztbjDzsrJyczO0czJxsG6trW1tbS+wLqqlnNjXVhVUk5MTVBPTk9QVVlYYGtqcWtscniCmai4vcPCwcC5t7m4oZiRjIJ6cm1qZmZubWhhVlFNSkdGSEtOU1Vdb4eer769trGuqqimn562trOytL3CwMDCu6yilJKcn6CkpKaurrCxt8jKw8DBwsTKzr+7vcG8ure2tLG8vbOfh3BhWFhUUldTUlJPUFVWZnBnYmRiZGVsdH+gsrzAw8C/v7a2ubumoJqKeXZwaWFfXmFyeXdsYFZPTUVITVVeaHN6iaS7vLewraqnoZqcsrm3sa+usrnBv7y7tbCkjZmcn6Gip6amrbK+xsO9u7y+w8fIxLCpoqKjpauurLO3uauMdnFqYVlUVVdVVVNXanl9bGBgYWJkaGt0ka25vcHCvb+/tLW8v66rqI17dW5oYVxeXmZzfYB6cmhaU1VeZm1udHuSrrq2s6qpppyUlqaurauzr62tsbnBurTBsZaJk5aZnqKipKOnuMC/vbm4uMDBvbm+rpuVmZqboKWprbCwt5p+cWhpamVkW1hjc4CCfHFiXl1eZWx2fIycrLi7wcG8vb6zsrq4rq6rn457bWhkW1tdYG56g4WEhod+bmZobHJ3gpm3tLKrpKGZj42Sqqyxra6wqaqtsLi5ssG/roOPkpecnJ2goa65u725tbW5vb+5uLSmn42Nj5KZn6Kmrq+wqol5bWhkZWx8jI+Oh4KCdG5ub292eYaOkZqsuLnBwb6+vLi2u7esqaminpmPhoR7dnZzeH+FjYyLjY+NgndubniNrLGwraCalJCKiIqhqa+0sK2fmZ+lqbezu6+qfIiOk5SXmZuqtbS2ubGysra3vr23rKaeiYmKiouUmpyirKyumHxxbHCAjpGNioaDgXxycW5xd3uEj4+Mlqq1trm6raqrqa6zt7GknJuUi3lubmBhaHJ7hYyNjIqMjY+SlJCFh6SurauclY2MhoSDhIyepK+klJCQkZuhprK+uaF3fIGKlJuirK+vsLawrKqrqKant6+qooqDgoKChYmPl5mirKeklICIkpOPioeKiYuIfXl2c3FqY2NiaXGLnai3ubmwrrCur7K0sKGSjIN9cmZhWFNSUlZld4WPj46Mj4+Vn6m2s66ml5KMiYd/fn1/g4iJi4iIiomJiZWcnKGknHKAh5CYoKSnqauvsaioqKWilpKUmJSLgX17e3yAhoiMk5ekqqq0sKOXko6Li4qGgnRgWFROUFRQUWBmd5Weq7y6urO8t7Cwsbavo52OfXFmamRYUEpISElVX2d1h5abmJiktrm9u6+jlYqFfXp4enl9gIKCgICDg4KCgIuWl5SGX32IkJqbnqSoqayjo6GhnJGOi4qKiYR8d3Z2d3p/hIaNm6u5vLi2qJuanJeLfG1eSkhFRUNERUdPXWuBnqSvvru8uLu6s7KxubCkoJSEa2FZVk9JSElIS1RnaGpqcX+VqrS2tK6xr7CxsauimI+Oh356ent6eXt7eXZ1cnmNjoJebnyKk5idoaKfm5qanJOMiYaDhISCf3l2dXRzeIaWpq+xsLGws7S2rZuOfnFuaVpJRkRGRkVJUFlkdZGfqbW+vbm7trqwsLa/t6ygl4NzaF5WUE5QT09OWGxqanB8gYyapaeoqaqopaKfoJ+go6KfnI+Ce3Zyc3R1dHNxa26CfF9ocnmBhoqMj5GVlop+fn59fHx8fXt8hY6XoaWqqaano6Kmq6erraSeloyCeXN0X1BOTU1RUFNYYnmQnKSrs7q+uLWytayuury2s6ynmoR0ZFlRUFFXWFhkd3R6hoaNmZaLhYWKkpujoZ6al5OTmZmZnJyXkYyKhYB5cWtlYGZvW2NscHd8f4WOioB3c3VycnF1dXd/jJifo6CamJeWl5uho6CXjIWIlZWVm5uMf3xrVlVWW1pda32LkJafoKeyvb+5trmxrrC6wLetr6mlnpN+alpaXGFobISJhYuUk5SKgX57enl1bWdweYWPlpOPkJCSlJGPioaDe3NtZWJfXVZDWV9kbXR3e3hjaW93go2TlpiXmp2ZlZORkJCPkZaVkIJ6c3Z7e32BjZCQmZuYlIxxbG9yenh3gZCVlZmmq7S1trGmr6WkrbO9vbStqKmloJOHgoB+enWAk5GVnp2MgHx7eHZ1b2ZdWFZVVVZbZ3J6gYiPkZGOh3luaWRhW1ZUTC0/UFNWXGFiYV1nbG51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\";\r\n            } else {\r\n                this.getImageFromService(this._image);\r\n            }\r\n\r\n\r\n        }\r\n    }\r\n\r\n    createImageFromBlob(image: Blob) {\r\n        const reader = new FileReader();\r\n        reader.addEventListener(\"load\",\r\n            () => {\r\n                this.thumbnailToShow = reader.result;\r\n            },\r\n            false);\r\n\r\n        if (image) {\r\n            reader.readAsDataURL(image);\r\n        }\r\n    }\r\n\r\n    getImageFromService(image: Image) {\r\n\r\n        if (image === null) {\r\n            return;\r\n        }\r\n\r\n        this.isImageLoading = true;\r\n\r\n\r\n        this.dicomImageService.getThumbnailFile(image).subscribe(data => {\r\n                this.createImageFromBlob(data);\r\n                this.isImageLoading = false;\r\n            },\r\n            error => {\r\n                this.isImageLoading = false;\r\n                console.log(error);\r\n            });\r\n    }\r\n\r\n}\r\n","module.exports = \".saveImage {\\r\\n    border: none;\\r\\n    height: 40px;\\r\\n    outline: none;\\r\\n    width: 60px;\\r\\n}\\r\\n\\r\\n.saveImage { background: url('Save_60_40_All.png') no-repeat left top; }\\r\\n\\r\\n.saveImage:hover { background: url('Save_60_40_All.png') no-repeat right top; }\\r\\n\\r\\n.saveImage:active { background: url('Save_60_40_All.png') no-repeat left bottom; }\\r\\n\\r\\n.saveImage:disabled { background: url('Save_60_40_All.png') no-repeat right bottom; }\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy92aWV3ZXItc2hlbGwvdmlld2VyLWJvdHRvbWJhci92aWV3ZXItYm90dG9tYmFyLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxZQUFZO0lBQ1osWUFBWTtJQUNaLGFBQWE7SUFDYixXQUFXO0FBQ2Y7O0FBRUEsYUFBYSx3REFBb0YsRUFBRTs7QUFFbkcsbUJBQW1CLHlEQUFxRixFQUFFOztBQUUxRyxvQkFBb0IsMkRBQXVGLEVBQUU7O0FBRTdHLHNCQUFzQiw0REFBd0YsRUFBRSIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvdmlld2VyLXNoZWxsL3ZpZXdlci1ib3R0b21iYXIvdmlld2VyLWJvdHRvbWJhci5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnNhdmVJbWFnZSB7XHJcbiAgICBib3JkZXI6IG5vbmU7XHJcbiAgICBoZWlnaHQ6IDQwcHg7XHJcbiAgICBvdXRsaW5lOiBub25lO1xyXG4gICAgd2lkdGg6IDYwcHg7XHJcbn1cclxuXHJcbi5zYXZlSW1hZ2UgeyBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vU2F2ZV82MF80MF9BbGwucG5nKSBuby1yZXBlYXQgbGVmdCB0b3A7IH1cclxuXHJcbi5zYXZlSW1hZ2U6aG92ZXIgeyBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vU2F2ZV82MF80MF9BbGwucG5nKSBuby1yZXBlYXQgcmlnaHQgdG9wOyB9XHJcblxyXG4uc2F2ZUltYWdlOmFjdGl2ZSB7IGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL2J1dHRvbi9TYXZlXzYwXzQwX0FsbC5wbmcpIG5vLXJlcGVhdCBsZWZ0IGJvdHRvbTsgfVxyXG5cclxuLnNhdmVJbWFnZTpkaXNhYmxlZCB7IGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL2J1dHRvbi9TYXZlXzYwXzQwX0FsbC5wbmcpIG5vLXJlcGVhdCByaWdodCBib3R0b207IH0iXX0= */\"","module.exports = \"<table>\\r\\n    <tr>\\r\\n        <td>\\r\\n            <button class=\\\"saveImage\\\" role=\\\"button\\\" title=\\\"Save Image\\\" (click)=\\\"onSaveImage()\\\"></button>\\r\\n        </td>\\r\\n    </tr>\\r\\n</table>\"","import { Component, OnInit, EventEmitter, Output } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-viewer-bottombar',\r\n  templateUrl: './viewer-bottombar.component.html',\r\n  styleUrls: ['./viewer-bottombar.component.css']\r\n})\r\nexport class ViewerBottombarComponent implements OnInit {\r\n\r\n    @Output()\r\n    save = new EventEmitter<number>();\r\n\r\n    constructor() { }\r\n\r\n    ngOnInit() {\r\n    }\r\n\r\n    onSaveImage() {\r\n        this.save.emit(0);\r\n    }\r\n}\r\n","module.exports = \".DivToolbar {\\r\\n    background-color: black;\\r\\n    color: #F5F5F5;\\r\\n    display: block;\\r\\n    height: 40px;\\r\\n    margin: 0 auto;\\r\\n    padding: 12px 12px 12px 12px;\\r\\n    width: 100%;\\r\\n}\\r\\n\\r\\n.DivViewerBack {\\r\\n    background-color: black;\\r\\n    color: #F5F5F5;\\r\\n    display: flex;\\r\\n    height: 100%;\\r\\n    margin: 0 auto;\\r\\n    padding: 1px;\\r\\n    width: 100%;\\r\\n}\\r\\n\\r\\n.DivOperationBar {\\r\\n    background-color: black;\\r\\n   \\r\\n    bottom: 0;\\r\\n    color: #F5F5F5;\\r\\n    display: block;\\r\\n    height: 40px;\\r\\n    margin: 2px auto;\\r\\n    position: fixed;\\r\\n    width: 100%;\\r\\n}\\r\\n\\r\\n/*#DivLeft\\r\\n{\\r\\n  display:block;\\r\\n  float:left;\\r\\n  width:200px;\\r\\n  margin:0 auto;\\r\\n  height: 650px;\\r\\n  padding: 12px 12px 12px 16px;\\r\\n  border-bottom: solid 4px #FFFFFF;\\r\\n  border-right: solid 4px #FFFFFF;\\r\\n  background-color: #000000;\\r\\n  color: #F5F5F5;\\r\\n}\\r\\n\\r\\n#DivRight\\r\\n{\\r\\n  display:block;\\r\\n  float:left;\\r\\n  width:744px;\\r\\n  margin:0 auto;\\r\\n  height: 650px;\\r\\n  padding: 12px 12px 12px 16px;\\r\\n  border-bottom: solid 4px #FFFFFF;\\r\\n  background-color: #000000;\\r\\n  color: #F5F5F5;\\r\\n}*/\\r\\n\\r\\n#divContainer {\\r\\n    bottom: 0px;\\r\\n    left: 0px;\\r\\n    position: absolute;\\r\\n    right: 0px;\\r\\n    top: 40px;\\r\\n    border-bottom: 2px solid #666;\\r\\n}\\r\\n\\r\\n#panelStudyDash {\\r\\n    background-color: #808080;\\r\\n    border: none;\\r\\n    margin: 0px;\\r\\n    padding: 5px 10px;\\r\\n    visibility: visible;\\r\\n}\\r\\n\\r\\n#panelStudyDash button {\\r\\n    border: none;\\r\\n    height: 30px;\\r\\n    outline: none;\\r\\n    width: 100px;\\r\\n}\\r\\n\\r\\n#panelStudyDash .save-query {\\r\\n    cursor: pointer;\\r\\n    float: right;\\r\\n}\\r\\n\\r\\n#panelStudyDash .checkbox {\\r\\n    margin-left: 5px;\\r\\n    margin-right: 5px;\\r\\n}\\r\\n\\r\\n#panelStudyDash #statusLabel { margin: 0px; }\\r\\n\\r\\n#divStudies {\\r\\n    margin-bottom: 0px;\\r\\n    min-height: 200px;\\r\\n    position: static;\\r\\n    width: 100%;\\r\\n}\\r\\n\\r\\n/*#divStudies::-webkit-scrollbar{\\r\\n    width:16px;\\r\\n    background-color:black;\\r\\n}\\r\\n\\r\\n#divStudies::-webkit-scrollbar-thumb{\\r\\n    background-color:#535353;\\r\\n    border-radius: 10px;\\r\\n}*/\\r\\n\\r\\n@media (min-width: 768px) {    \\r\\n    #panelStudyDash .checkbox { top: -2px; }\\r\\n\\r\\n    #panelStudyDash .checkbox label input { top: 2px; }\\r\\n}\\r\\n\\r\\n@media (max-width: 768px) {\\r\\n    #divStudies {\\r\\n        border: none;\\r\\n        left: 1px;\\r\\n        position: absolute;\\r\\n        right: 1px;\\r\\n        top: 42px;\\r\\n        visibility: visible;\\r\\n    }\\r\\n\\r\\n    #panelStudyDash {\\r\\n        left: 1px;\\r\\n        padding: 5px 2px;\\r\\n        position: absolute;\\r\\n        right: 1px;\\r\\n        visibility: visible;\\r\\n    }\\r\\n\\r\\n    #panelStudyDash .form-group, .checkbox, button {\\r\\n        display: inline-block;\\r\\n        margin: 0px;\\r\\n    }\\r\\n\\r\\n    #panelStudyDash #statusLabel { display: none; }\\r\\n\\r\\n    #panelStudyDash .save-query { display: none; }\\r\\n\\r\\n    #panelStudyDash .checkbox {\\r\\n        margin-left: 5px;\\r\\n        margin-right: 5px;\\r\\n        top: -10px;\\r\\n    }\\r\\n\\r\\n    .sp_panel-container, .sp_panel-left, .sp_panel-right {\\r\\n        visibility: hidden;\\r\\n        z-index: 0;\\r\\n    }\\r\\n}\\r\\n\\r\\n#queryTree .node-queryTree { padding: 2px 2px; }\\r\\n\\r\\n.query { background: url('Query_All.png') no-repeat left top; }\\r\\n\\r\\n.query:active { background: url('Query_All.png') no-repeat right top; }\\r\\n\\r\\n.queryClear { background: url('ClearCondition_All.png') no-repeat left top; }\\r\\n\\r\\n.queryClear:active { background: url('ClearCondition_All.png') no-repeat right top; }\\r\\n\\r\\n/* horizontal panel*/\\r\\n\\r\\n.sp_panel-container {\\r\\n    display: flex;\\r\\n    flex-direction: row;\\r\\n    overflow: hidden;\\r\\n    /* avoid browser level touch actions */\\r\\n    /*xtouch-action: none;*/\\r\\n}\\r\\n\\r\\n.sp_panel-left {\\r\\n    -ms-overflow-style: none;\\r\\n    /*min-width: 1px;*/\\r\\n    /*white-space: nowrap;*/\\r\\n    background: #07090c;\\r\\n    display: flex;\\r\\n    flex: 0 0 auto;\\r\\n    flex-direction: column;\\r\\n    min-height: 200px;\\r\\n    overflow: -moz-hidden-unscrollable;\\r\\n    overflow-x: hidden;\\r\\n    overflow-y: auto;\\r\\n    /* only manually resize */\\r\\n    padding: 6px;\\r\\n    width: 200px;\\r\\n    /*color: white;*/\\r\\n}\\r\\n\\r\\n.sp_panel-left::-webkit-scrollbar { display: none; }\\r\\n\\r\\n.sp_splitter {\\r\\n    background: url('split_vertical_collapse.jpg') center center no-repeat #535353;\\r\\n    cursor: pointer;\\r\\n    flex: 0 0 auto;\\r\\n    min-height: 200px;\\r\\n    width: 8px;\\r\\n}\\r\\n\\r\\n.sp_panel-right {\\r\\n    background: black;\\r\\n    flex: 1 1 auto;\\r\\n    min-height: 200px;\\r\\n    min-width: 200px;\\r\\n    /* resizable */\\r\\n    padding-bottom: 80px;\\r\\n    width: 100%;\\r\\n}\\r\\n\\r\\n/* vertical panel */\\r\\n\\r\\n.sp_panel-container-vertical {\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    overflow: hidden;\\r\\n}\\r\\n\\r\\n.sp_panel-top {\\r\\n    flex: 0 0 auto;\\r\\n    /* only manually resize */\\r\\n    /*padding: 10px;*/\\r\\n    height: 70%;\\r\\n    min-height: 300px;\\r\\n    overflow-y: auto;\\r\\n    width: 100%;\\r\\n    /*white-space: nowrap;\\r\\n  background: #838383;\\r\\n  color: white;*/\\r\\n    z-index: 0;\\r\\n}\\r\\n\\r\\n.sp_splitter-horizontal {\\r\\n    background: url('split_horizontal_collapse.jpg') center center no-repeat #535353;\\r\\n    cursor: pointer;\\r\\n    flex: 0 0 auto;\\r\\n    height: 8px;\\r\\n    z-index: 2;\\r\\n}\\r\\n\\r\\n.sp_panel-bottom {\\r\\n    flex: 1 1 auto;\\r\\n    /* resizable */\\r\\n    /*padding: 10px;*/\\r\\n    min-height: 200px;\\r\\n    overflow-y: auto;\\r\\n    /*background: #eee;*/\\r\\n    z-index: 1;\\r\\n}\\r\\n\\r\\n.navbar-right { padding-right: 10px; }\\r\\n\\r\\n.sp_panel-right .table { white-space: nowrap; }\\r\\n\\r\\n#trStudiesHeader a { color: black; }\\r\\n\\r\\n#trSeriesHeader a { color: black; }\\r\\n\\r\\n#trStudiesQuery input[type=text] {\\r\\n    vertical-align: middle;\\r\\n    width: 100%;\\r\\n}\\r\\n\\r\\n#trStudiesQuery select { width: 100%; }\\r\\n\\r\\n#trStudiesQuery td:nth-child(n + 2) {\\r\\n    margin: 0px;\\r\\n    padding: 1px;\\r\\n    vertical-align: middle;\\r\\n}\\r\\n\\r\\n#trStudiesQuery .dropdown .btn {\\r\\n    min-width: 70px;\\r\\n    padding: 1px 6px;\\r\\n}\\r\\n\\r\\n#leftPanelTop { flex: 1 1 auto; }\\r\\n\\r\\n#leftPanelBottom {\\r\\n    flex: 0 0 auto;\\r\\n    height: 20%;\\r\\n}\\r\\n\\r\\n#formUploadImage input[type=file] { width: 600px; }\\r\\n\\r\\n#tblSeries td:nth-child(1) { text-align: center; }\\r\\n\\r\\n#tblSeries img {\\r\\n    height: 50px;\\r\\n    margin: auto;\\r\\n    width: 50px;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy92aWV3ZXItc2hlbGwvdmlld2VyLXNoZWxsLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSx1QkFBdUI7SUFDdkIsY0FBYztJQUNkLGNBQWM7SUFDZCxZQUFZO0lBQ1osY0FBYztJQUNkLDRCQUE0QjtJQUM1QixXQUFXO0FBQ2Y7O0FBRUE7SUFDSSx1QkFBdUI7SUFDdkIsY0FBYztJQUNkLGFBQWE7SUFDYixZQUFZO0lBQ1osY0FBYztJQUNkLFlBQVk7SUFDWixXQUFXO0FBQ2Y7O0FBRUE7SUFDSSx1QkFBdUI7O0lBRXZCLFNBQVM7SUFDVCxjQUFjO0lBQ2QsY0FBYztJQUNkLFlBQVk7SUFDWixnQkFBZ0I7SUFDaEIsZUFBZTtJQUNmLFdBQVc7QUFDZjs7QUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFQXlCRTs7QUFHRjtJQUNJLFdBQVc7SUFDWCxTQUFTO0lBQ1Qsa0JBQWtCO0lBQ2xCLFVBQVU7SUFDVixTQUFTO0lBQ1QsNkJBQTZCO0FBQ2pDOztBQUVBO0lBQ0kseUJBQXlCO0lBQ3pCLFlBQVk7SUFDWixXQUFXO0lBQ1gsaUJBQWlCO0lBQ2pCLG1CQUFtQjtBQUN2Qjs7QUFFQTtJQUNJLFlBQVk7SUFDWixZQUFZO0lBQ1osYUFBYTtJQUNiLFlBQVk7QUFDaEI7O0FBRUE7SUFDSSxlQUFlO0lBQ2YsWUFBWTtBQUNoQjs7QUFFQTtJQUNJLGdCQUFnQjtJQUNoQixpQkFBaUI7QUFDckI7O0FBRUEsK0JBQStCLFdBQVcsRUFBRTs7QUFFNUM7SUFDSSxrQkFBa0I7SUFDbEIsaUJBQWlCO0lBQ2pCLGdCQUFnQjtJQUNoQixXQUFXO0FBQ2Y7O0FBRUE7Ozs7Ozs7O0VBUUU7O0FBRUY7SUFDSSw0QkFBNEIsU0FBUyxFQUFFOztJQUV2Qyx3Q0FBd0MsUUFBUSxFQUFFO0FBQ3REOztBQUVBO0lBQ0k7UUFDSSxZQUFZO1FBQ1osU0FBUztRQUNULGtCQUFrQjtRQUNsQixVQUFVO1FBQ1YsU0FBUztRQUNULG1CQUFtQjtJQUN2Qjs7SUFFQTtRQUNJLFNBQVM7UUFDVCxnQkFBZ0I7UUFDaEIsa0JBQWtCO1FBQ2xCLFVBQVU7UUFDVixtQkFBbUI7SUFDdkI7O0lBRUE7UUFDSSxxQkFBcUI7UUFDckIsV0FBVztJQUNmOztJQUVBLCtCQUErQixhQUFhLEVBQUU7O0lBRTlDLDhCQUE4QixhQUFhLEVBQUU7O0lBRTdDO1FBQ0ksZ0JBQWdCO1FBQ2hCLGlCQUFpQjtRQUNqQixVQUFVO0lBQ2Q7O0lBRUE7UUFDSSxrQkFBa0I7UUFDbEIsVUFBVTtJQUNkO0FBQ0o7O0FBRUEsNkJBQTZCLGdCQUFnQixFQUFFOztBQUUvQyxTQUFTLG1EQUE0RSxFQUFFOztBQUV2RixnQkFBZ0Isb0RBQTZFLEVBQUU7O0FBRS9GLGNBQWMsNERBQXFGLEVBQUU7O0FBRXJHLHFCQUFxQiw2REFBc0YsRUFBRTs7QUFFN0csb0JBQW9COztBQUVwQjtJQUNJLGFBQWE7SUFDYixtQkFBbUI7SUFDbkIsZ0JBQWdCO0lBQ2hCLHNDQUFzQztJQUN0Qyx1QkFBdUI7QUFDM0I7O0FBRUE7SUFDSSx3QkFBd0I7SUFDeEIsa0JBQWtCO0lBQ2xCLHVCQUF1QjtJQUN2QixtQkFBbUI7SUFDbkIsYUFBYTtJQUNiLGNBQWM7SUFDZCxzQkFBc0I7SUFDdEIsaUJBQWlCO0lBQ2pCLGtDQUFrQztJQUNsQyxrQkFBa0I7SUFDbEIsZ0JBQWdCO0lBQ2hCLHlCQUF5QjtJQUN6QixZQUFZO0lBQ1osWUFBWTtJQUNaLGdCQUFnQjtBQUNwQjs7QUFFQSxvQ0FBb0MsYUFBYSxFQUFFOztBQUVuRDtJQUNJLDhFQUF1RztJQUN2RyxlQUFlO0lBQ2YsY0FBYztJQUNkLGlCQUFpQjtJQUNqQixVQUFVO0FBQ2Q7O0FBRUE7SUFDSSxpQkFBaUI7SUFDakIsY0FBYztJQUNkLGlCQUFpQjtJQUNqQixnQkFBZ0I7SUFDaEIsY0FBYztJQUNkLG9CQUFvQjtJQUNwQixXQUFXO0FBQ2Y7O0FBR0EsbUJBQW1COztBQUVuQjtJQUNJLGFBQWE7SUFDYixzQkFBc0I7SUFDdEIsZ0JBQWdCO0FBQ3BCOztBQUVBO0lBQ0ksY0FBYztJQUNkLHlCQUF5QjtJQUN6QixpQkFBaUI7SUFDakIsV0FBVztJQUNYLGlCQUFpQjtJQUNqQixnQkFBZ0I7SUFDaEIsV0FBVztJQUNYOztnQkFFWTtJQUNaLFVBQVU7QUFDZDs7QUFFQTtJQUNJLGdGQUF5RztJQUN6RyxlQUFlO0lBQ2YsY0FBYztJQUNkLFdBQVc7SUFDWCxVQUFVO0FBQ2Q7O0FBRUE7SUFDSSxjQUFjO0lBQ2QsY0FBYztJQUNkLGlCQUFpQjtJQUNqQixpQkFBaUI7SUFDakIsZ0JBQWdCO0lBQ2hCLG9CQUFvQjtJQUNwQixVQUFVO0FBQ2Q7O0FBRUEsZ0JBQWdCLG1CQUFtQixFQUFFOztBQUVyQyx5QkFBeUIsbUJBQW1CLEVBQUU7O0FBRTlDLHFCQUFxQixZQUFZLEVBQUU7O0FBRW5DLG9CQUFvQixZQUFZLEVBQUU7O0FBRWxDO0lBQ0ksc0JBQXNCO0lBQ3RCLFdBQVc7QUFDZjs7QUFFQSx5QkFBeUIsV0FBVyxFQUFFOztBQUV0QztJQUNJLFdBQVc7SUFDWCxZQUFZO0lBQ1osc0JBQXNCO0FBQzFCOztBQUVBO0lBQ0ksZUFBZTtJQUNmLGdCQUFnQjtBQUNwQjs7QUFFQSxnQkFBZ0IsY0FBYyxFQUFFOztBQUVoQztJQUNJLGNBQWM7SUFDZCxXQUFXO0FBQ2Y7O0FBRUEsb0NBQW9DLFlBQVksRUFBRTs7QUFFbEQsNkJBQTZCLGtCQUFrQixFQUFFOztBQUVqRDtJQUNJLFlBQVk7SUFDWixZQUFZO0lBQ1osV0FBVztBQUNmIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50cy92aWV3ZXItc2hlbGwvdmlld2VyLXNoZWxsLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuRGl2VG9vbGJhciB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjaztcclxuICAgIGNvbG9yOiAjRjVGNUY1O1xyXG4gICAgZGlzcGxheTogYmxvY2s7XHJcbiAgICBoZWlnaHQ6IDQwcHg7XHJcbiAgICBtYXJnaW46IDAgYXV0bztcclxuICAgIHBhZGRpbmc6IDEycHggMTJweCAxMnB4IDEycHg7XHJcbiAgICB3aWR0aDogMTAwJTtcclxufVxyXG5cclxuLkRpdlZpZXdlckJhY2sge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7XHJcbiAgICBjb2xvcjogI0Y1RjVGNTtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICBtYXJnaW46IDAgYXV0bztcclxuICAgIHBhZGRpbmc6IDFweDtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG59XHJcblxyXG4uRGl2T3BlcmF0aW9uQmFyIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IGJsYWNrO1xyXG4gICBcclxuICAgIGJvdHRvbTogMDtcclxuICAgIGNvbG9yOiAjRjVGNUY1O1xyXG4gICAgZGlzcGxheTogYmxvY2s7XHJcbiAgICBoZWlnaHQ6IDQwcHg7XHJcbiAgICBtYXJnaW46IDJweCBhdXRvO1xyXG4gICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbn1cclxuXHJcbi8qI0RpdkxlZnRcclxue1xyXG4gIGRpc3BsYXk6YmxvY2s7XHJcbiAgZmxvYXQ6bGVmdDtcclxuICB3aWR0aDoyMDBweDtcclxuICBtYXJnaW46MCBhdXRvO1xyXG4gIGhlaWdodDogNjUwcHg7XHJcbiAgcGFkZGluZzogMTJweCAxMnB4IDEycHggMTZweDtcclxuICBib3JkZXItYm90dG9tOiBzb2xpZCA0cHggI0ZGRkZGRjtcclxuICBib3JkZXItcmlnaHQ6IHNvbGlkIDRweCAjRkZGRkZGO1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICMwMDAwMDA7XHJcbiAgY29sb3I6ICNGNUY1RjU7XHJcbn1cclxuXHJcbiNEaXZSaWdodFxyXG57XHJcbiAgZGlzcGxheTpibG9jaztcclxuICBmbG9hdDpsZWZ0O1xyXG4gIHdpZHRoOjc0NHB4O1xyXG4gIG1hcmdpbjowIGF1dG87XHJcbiAgaGVpZ2h0OiA2NTBweDtcclxuICBwYWRkaW5nOiAxMnB4IDEycHggMTJweCAxNnB4O1xyXG4gIGJvcmRlci1ib3R0b206IHNvbGlkIDRweCAjRkZGRkZGO1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICMwMDAwMDA7XHJcbiAgY29sb3I6ICNGNUY1RjU7XHJcbn0qL1xyXG5cclxuXHJcbiNkaXZDb250YWluZXIge1xyXG4gICAgYm90dG9tOiAwcHg7XHJcbiAgICBsZWZ0OiAwcHg7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICByaWdodDogMHB4O1xyXG4gICAgdG9wOiA0MHB4O1xyXG4gICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICM2NjY7XHJcbn1cclxuXHJcbiNwYW5lbFN0dWR5RGFzaCB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjODA4MDgwO1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgbWFyZ2luOiAwcHg7XHJcbiAgICBwYWRkaW5nOiA1cHggMTBweDtcclxuICAgIHZpc2liaWxpdHk6IHZpc2libGU7XHJcbn1cclxuXHJcbiNwYW5lbFN0dWR5RGFzaCBidXR0b24ge1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgaGVpZ2h0OiAzMHB4O1xyXG4gICAgb3V0bGluZTogbm9uZTtcclxuICAgIHdpZHRoOiAxMDBweDtcclxufVxyXG5cclxuI3BhbmVsU3R1ZHlEYXNoIC5zYXZlLXF1ZXJ5IHtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgIGZsb2F0OiByaWdodDtcclxufVxyXG5cclxuI3BhbmVsU3R1ZHlEYXNoIC5jaGVja2JveCB7XHJcbiAgICBtYXJnaW4tbGVmdDogNXB4O1xyXG4gICAgbWFyZ2luLXJpZ2h0OiA1cHg7XHJcbn1cclxuXHJcbiNwYW5lbFN0dWR5RGFzaCAjc3RhdHVzTGFiZWwgeyBtYXJnaW46IDBweDsgfVxyXG5cclxuI2RpdlN0dWRpZXMge1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMHB4O1xyXG4gICAgbWluLWhlaWdodDogMjAwcHg7XHJcbiAgICBwb3NpdGlvbjogc3RhdGljO1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbn1cclxuXHJcbi8qI2RpdlN0dWRpZXM6Oi13ZWJraXQtc2Nyb2xsYmFye1xyXG4gICAgd2lkdGg6MTZweDtcclxuICAgIGJhY2tncm91bmQtY29sb3I6YmxhY2s7XHJcbn1cclxuXHJcbiNkaXZTdHVkaWVzOjotd2Via2l0LXNjcm9sbGJhci10aHVtYntcclxuICAgIGJhY2tncm91bmQtY29sb3I6IzUzNTM1MztcclxuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XHJcbn0qL1xyXG5cclxuQG1lZGlhIChtaW4td2lkdGg6IDc2OHB4KSB7ICAgIFxyXG4gICAgI3BhbmVsU3R1ZHlEYXNoIC5jaGVja2JveCB7IHRvcDogLTJweDsgfVxyXG5cclxuICAgICNwYW5lbFN0dWR5RGFzaCAuY2hlY2tib3ggbGFiZWwgaW5wdXQgeyB0b3A6IDJweDsgfVxyXG59XHJcblxyXG5AbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHtcclxuICAgICNkaXZTdHVkaWVzIHtcclxuICAgICAgICBib3JkZXI6IG5vbmU7XHJcbiAgICAgICAgbGVmdDogMXB4O1xyXG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgICAgICByaWdodDogMXB4O1xyXG4gICAgICAgIHRvcDogNDJweDtcclxuICAgICAgICB2aXNpYmlsaXR5OiB2aXNpYmxlO1xyXG4gICAgfVxyXG5cclxuICAgICNwYW5lbFN0dWR5RGFzaCB7XHJcbiAgICAgICAgbGVmdDogMXB4O1xyXG4gICAgICAgIHBhZGRpbmc6IDVweCAycHg7XHJcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgIHJpZ2h0OiAxcHg7XHJcbiAgICAgICAgdmlzaWJpbGl0eTogdmlzaWJsZTtcclxuICAgIH1cclxuXHJcbiAgICAjcGFuZWxTdHVkeURhc2ggLmZvcm0tZ3JvdXAsIC5jaGVja2JveCwgYnV0dG9uIHtcclxuICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICAgICAgbWFyZ2luOiAwcHg7XHJcbiAgICB9XHJcblxyXG4gICAgI3BhbmVsU3R1ZHlEYXNoICNzdGF0dXNMYWJlbCB7IGRpc3BsYXk6IG5vbmU7IH1cclxuXHJcbiAgICAjcGFuZWxTdHVkeURhc2ggLnNhdmUtcXVlcnkgeyBkaXNwbGF5OiBub25lOyB9XHJcblxyXG4gICAgI3BhbmVsU3R1ZHlEYXNoIC5jaGVja2JveCB7XHJcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDVweDtcclxuICAgICAgICBtYXJnaW4tcmlnaHQ6IDVweDtcclxuICAgICAgICB0b3A6IC0xMHB4O1xyXG4gICAgfVxyXG5cclxuICAgIC5zcF9wYW5lbC1jb250YWluZXIsIC5zcF9wYW5lbC1sZWZ0LCAuc3BfcGFuZWwtcmlnaHQge1xyXG4gICAgICAgIHZpc2liaWxpdHk6IGhpZGRlbjtcclxuICAgICAgICB6LWluZGV4OiAwO1xyXG4gICAgfVxyXG59XHJcblxyXG4jcXVlcnlUcmVlIC5ub2RlLXF1ZXJ5VHJlZSB7IHBhZGRpbmc6IDJweCAycHg7IH1cclxuXHJcbi5xdWVyeSB7IGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi9hc3NldHMvaW1nL2J1dHRvbi9RdWVyeV9BbGwucG5nKSBuby1yZXBlYXQgbGVmdCB0b3A7IH1cclxuXHJcbi5xdWVyeTphY3RpdmUgeyBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vUXVlcnlfQWxsLnBuZykgbm8tcmVwZWF0IHJpZ2h0IHRvcDsgfVxyXG5cclxuLnF1ZXJ5Q2xlYXIgeyBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vQ2xlYXJDb25kaXRpb25fQWxsLnBuZykgbm8tcmVwZWF0IGxlZnQgdG9wOyB9XHJcblxyXG4ucXVlcnlDbGVhcjphY3RpdmUgeyBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vQ2xlYXJDb25kaXRpb25fQWxsLnBuZykgbm8tcmVwZWF0IHJpZ2h0IHRvcDsgfVxyXG5cclxuLyogaG9yaXpvbnRhbCBwYW5lbCovXHJcblxyXG4uc3BfcGFuZWwtY29udGFpbmVyIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xyXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgIC8qIGF2b2lkIGJyb3dzZXIgbGV2ZWwgdG91Y2ggYWN0aW9ucyAqL1xyXG4gICAgLyp4dG91Y2gtYWN0aW9uOiBub25lOyovXHJcbn1cclxuXHJcbi5zcF9wYW5lbC1sZWZ0IHtcclxuICAgIC1tcy1vdmVyZmxvdy1zdHlsZTogbm9uZTtcclxuICAgIC8qbWluLXdpZHRoOiAxcHg7Ki9cclxuICAgIC8qd2hpdGUtc3BhY2U6IG5vd3JhcDsqL1xyXG4gICAgYmFja2dyb3VuZDogIzA3MDkwYztcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4OiAwIDAgYXV0bztcclxuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICBtaW4taGVpZ2h0OiAyMDBweDtcclxuICAgIG92ZXJmbG93OiAtbW96LWhpZGRlbi11bnNjcm9sbGFibGU7XHJcbiAgICBvdmVyZmxvdy14OiBoaWRkZW47XHJcbiAgICBvdmVyZmxvdy15OiBhdXRvO1xyXG4gICAgLyogb25seSBtYW51YWxseSByZXNpemUgKi9cclxuICAgIHBhZGRpbmc6IDZweDtcclxuICAgIHdpZHRoOiAyMDBweDtcclxuICAgIC8qY29sb3I6IHdoaXRlOyovXHJcbn1cclxuXHJcbi5zcF9wYW5lbC1sZWZ0Ojotd2Via2l0LXNjcm9sbGJhciB7IGRpc3BsYXk6IG5vbmU7IH1cclxuXHJcbi5zcF9zcGxpdHRlciB7XHJcbiAgICBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vc3BsaXRfdmVydGljYWxfY29sbGFwc2UuanBnKSBjZW50ZXIgY2VudGVyIG5vLXJlcGVhdCAjNTM1MzUzO1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAgZmxleDogMCAwIGF1dG87XHJcbiAgICBtaW4taGVpZ2h0OiAyMDBweDtcclxuICAgIHdpZHRoOiA4cHg7XHJcbn1cclxuXHJcbi5zcF9wYW5lbC1yaWdodCB7XHJcbiAgICBiYWNrZ3JvdW5kOiBibGFjaztcclxuICAgIGZsZXg6IDEgMSBhdXRvO1xyXG4gICAgbWluLWhlaWdodDogMjAwcHg7XHJcbiAgICBtaW4td2lkdGg6IDIwMHB4O1xyXG4gICAgLyogcmVzaXphYmxlICovXHJcbiAgICBwYWRkaW5nLWJvdHRvbTogODBweDtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG59XHJcblxyXG5cclxuLyogdmVydGljYWwgcGFuZWwgKi9cclxuXHJcbi5zcF9wYW5lbC1jb250YWluZXItdmVydGljYWwge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xyXG59XHJcblxyXG4uc3BfcGFuZWwtdG9wIHtcclxuICAgIGZsZXg6IDAgMCBhdXRvO1xyXG4gICAgLyogb25seSBtYW51YWxseSByZXNpemUgKi9cclxuICAgIC8qcGFkZGluZzogMTBweDsqL1xyXG4gICAgaGVpZ2h0OiA3MCU7XHJcbiAgICBtaW4taGVpZ2h0OiAzMDBweDtcclxuICAgIG92ZXJmbG93LXk6IGF1dG87XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIC8qd2hpdGUtc3BhY2U6IG5vd3JhcDtcclxuICBiYWNrZ3JvdW5kOiAjODM4MzgzO1xyXG4gIGNvbG9yOiB3aGl0ZTsqL1xyXG4gICAgei1pbmRleDogMDtcclxufVxyXG5cclxuLnNwX3NwbGl0dGVyLWhvcml6b250YWwge1xyXG4gICAgYmFja2dyb3VuZDogdXJsKC4uLy4uLy4uL2Fzc2V0cy9pbWcvYnV0dG9uL3NwbGl0X2hvcml6b250YWxfY29sbGFwc2UuanBnKSBjZW50ZXIgY2VudGVyIG5vLXJlcGVhdCAjNTM1MzUzO1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAgZmxleDogMCAwIGF1dG87XHJcbiAgICBoZWlnaHQ6IDhweDtcclxuICAgIHotaW5kZXg6IDI7XHJcbn1cclxuXHJcbi5zcF9wYW5lbC1ib3R0b20ge1xyXG4gICAgZmxleDogMSAxIGF1dG87XHJcbiAgICAvKiByZXNpemFibGUgKi9cclxuICAgIC8qcGFkZGluZzogMTBweDsqL1xyXG4gICAgbWluLWhlaWdodDogMjAwcHg7XHJcbiAgICBvdmVyZmxvdy15OiBhdXRvO1xyXG4gICAgLypiYWNrZ3JvdW5kOiAjZWVlOyovXHJcbiAgICB6LWluZGV4OiAxO1xyXG59XHJcblxyXG4ubmF2YmFyLXJpZ2h0IHsgcGFkZGluZy1yaWdodDogMTBweDsgfVxyXG5cclxuLnNwX3BhbmVsLXJpZ2h0IC50YWJsZSB7IHdoaXRlLXNwYWNlOiBub3dyYXA7IH1cclxuXHJcbiN0clN0dWRpZXNIZWFkZXIgYSB7IGNvbG9yOiBibGFjazsgfVxyXG5cclxuI3RyU2VyaWVzSGVhZGVyIGEgeyBjb2xvcjogYmxhY2s7IH1cclxuXHJcbiN0clN0dWRpZXNRdWVyeSBpbnB1dFt0eXBlPXRleHRdIHtcclxuICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XHJcbiAgICB3aWR0aDogMTAwJTtcclxufVxyXG5cclxuI3RyU3R1ZGllc1F1ZXJ5IHNlbGVjdCB7IHdpZHRoOiAxMDAlOyB9XHJcblxyXG4jdHJTdHVkaWVzUXVlcnkgdGQ6bnRoLWNoaWxkKG4gKyAyKSB7XHJcbiAgICBtYXJnaW46IDBweDtcclxuICAgIHBhZGRpbmc6IDFweDtcclxuICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XHJcbn1cclxuXHJcbiN0clN0dWRpZXNRdWVyeSAuZHJvcGRvd24gLmJ0biB7XHJcbiAgICBtaW4td2lkdGg6IDcwcHg7XHJcbiAgICBwYWRkaW5nOiAxcHggNnB4O1xyXG59XHJcblxyXG4jbGVmdFBhbmVsVG9wIHsgZmxleDogMSAxIGF1dG87IH1cclxuXHJcbiNsZWZ0UGFuZWxCb3R0b20ge1xyXG4gICAgZmxleDogMCAwIGF1dG87XHJcbiAgICBoZWlnaHQ6IDIwJTtcclxufVxyXG5cclxuI2Zvcm1VcGxvYWRJbWFnZSBpbnB1dFt0eXBlPWZpbGVdIHsgd2lkdGg6IDYwMHB4OyB9XHJcblxyXG4jdGJsU2VyaWVzIHRkOm50aC1jaGlsZCgxKSB7IHRleHQtYWxpZ246IGNlbnRlcjsgfVxyXG5cclxuI3RibFNlcmllcyBpbWcge1xyXG4gICAgaGVpZ2h0OiA1MHB4O1xyXG4gICAgbWFyZ2luOiBhdXRvO1xyXG4gICAgd2lkdGg6IDUwcHg7XHJcbn1cclxuIl19 */\"","module.exports = \"<div [style.visibility]=\\\"viewerShellData.hide? 'hidden' : 'visible'\\\" id=\\\"divContainer\\\" class=\\\"sp_panel-container\\\">\\r\\n    <div class=\\\"sp_panel-left\\\">\\r\\n        <app-navigation [viewerShellData]=\\\"viewerShellData\\\" (layout)=\\\"onChangeGroupLayout($event)\\\"></app-navigation>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"sp_splitter\\\">\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"sp_panel-right\\\">\\r\\n        <div class=\\\"DivToolbar\\\">\\r\\n            <app-viewer-toolbar></app-viewer-toolbar>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"DivViewerBack\\\">\\r\\n            <div class=\\\"div-flex-column\\\" *ngFor=\\\"let b of Arr(viewerShellData.groupMatrix.colCount).fill(1); let colIndex = index\\\">\\r\\n                <div class=\\\"div-flex-row\\\" *ngFor=\\\"let a of Arr(viewerShellData.groupMatrix.rowCount).fill(1); let rowIndex = index\\\">\\r\\n                    <app-group-viewer [groupData]=\\\"getGroupData(rowIndex, colIndex)\\\" class=\\\"div-flex-row\\\">\\r\\n                    </app-group-viewer>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n        \\r\\n        <div class=\\\"DivOperationBar\\\">\\r\\n            <app-viewer-bottombar (save)=\\\"onSaveImage($event)\\\"></app-viewer-bottombar>\\r\\n        </div>\\r\\n\\r\\n    </div>\\r\\n</div>\\r\\n\"","import { Component, OnInit, ViewChildren, QueryList, AfterViewInit } from \"@angular/core\";\r\nimport { GroupViewerComponent } from \"./group-viewer/group-viewer.component\";\r\nimport { ShellNavigatorService } from \"../../services/shell-navigator.service\";\r\nimport { HangingProtocolService } from \"../../services/hanging-protocol.service\";\r\nimport { Subscription } from \"rxjs\";\r\nimport { ViewerShellData } from \"../../models/viewer-shell-data\";\r\nimport { ViewerGroupData } from \"../../models/viewer-group-data\";\r\nimport { LogService } from \"../../services/log.service\";\r\n\r\n\r\n@Component({\r\n    selector: \"app-viewer-shell\",\r\n    templateUrl: \"./viewer-shell.component.html\",\r\n    styleUrls: [\"./viewer-shell.component.css\"]\r\n})\r\nexport class ViewerShellComponent implements OnInit, AfterViewInit {\r\n    Arr = Array; //Array type captured in a variable\r\n\r\n    viewerShellData: ViewerShellData;\r\n    groupDataList: ViewerGroupData[];\r\n\r\n    subscriptionShellNavigated: Subscription;\r\n\r\n    viewerGroupData: ViewerGroupData;\r\n\r\n    @ViewChildren(GroupViewerComponent)\r\n    childGroups: QueryList<GroupViewerComponent>;\r\n\r\n    constructor(private shellNavigatorService: ShellNavigatorService,\r\n        private hangingProtocolService: HangingProtocolService,\r\n        private logService: LogService) {\r\n        this.subscriptionShellNavigated = shellNavigatorService.shellSelected$.subscribe(\r\n            viewerShellData => {\r\n                this.viewerShellData.hide =\r\n                    (viewerShellData === null || viewerShellData.getId() !== this.viewerShellData.getId());\r\n            });\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.onChangeGroupLayout(this.viewerShellData.defaultGroupHangingProtocol);\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        const self = this;\r\n        $(\".sp_panel-left\").spResizable({\r\n            handleSelector: \".sp_splitter\",\r\n            resizeHeight: false\r\n        });\r\n\r\n        $(window).resize(function() {\r\n            self.onResize();\r\n        });\r\n\r\n        this.onResize();\r\n    }\r\n\r\n    onChangeGroupLayout(groupHangingProtocolNumber: number): void {\r\n        if (this.childGroups) {\r\n            this.childGroups.forEach(child => child.setHeight(0));\r\n        }\r\n\r\n        this.hangingProtocolService.applyGroupHangingProtocol(this.viewerShellData, groupHangingProtocolNumber);\r\n        this.groupDataList = this.viewerShellData.groupDataList;\r\n        this.onResize();\r\n    }\r\n\r\n    onResize(): void {\r\n        //if (this.viewerShellData.hide)\r\n        //    return;\r\n\r\n        if (!this.childGroups)\r\n            return;\r\n\r\n        if (this.childGroups) {\r\n            this.childGroups.forEach(child => child.setHeight(0));\r\n        }\r\n\r\n        this.logService.debug(\"Viewer: onResize()\");\r\n\r\n        this.childGroups.forEach((groupViewer) => {\r\n            groupViewer.onResize();\r\n        });\r\n    }\r\n\r\n    getGroupData(rowIndex: number, colIndex: number): ViewerGroupData {\r\n        const groupIndex = rowIndex * this.viewerShellData.groupMatrix.colCount + colIndex;\r\n        return this.groupDataList[groupIndex];\r\n        //return this.viewerShellData.getGroup(rowIndex, colIndex);\r\n    }\r\n\r\n    onSaveImage(event) {\r\n        this.childGroups.forEach(groupViewer => {\r\n            if (groupViewer.selected) {\r\n                groupViewer.saveSelectedImage();\r\n            }\r\n        });\r\n    }\r\n}\r\n","module.exports = \".imageOperate-div {\\r\\n    height: 44px;\\r\\n    margin-left: -20px;\\r\\n    margin-top: -10px;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy92aWV3ZXItc2hlbGwvdmlld2VyLXRvb2xiYXIvdmlld2VyLXRvb2xiYXIuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLFlBQVk7SUFDWixrQkFBa0I7SUFDbEIsaUJBQWlCO0FBQ3JCIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50cy92aWV3ZXItc2hlbGwvdmlld2VyLXRvb2xiYXIvdmlld2VyLXRvb2xiYXIuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5pbWFnZU9wZXJhdGUtZGl2IHtcclxuICAgIGhlaWdodDogNDRweDtcclxuICAgIG1hcmdpbi1sZWZ0OiAtMjBweDtcclxuICAgIG1hcmdpbi10b3A6IC0xMHB4O1xyXG59XHJcbiJdfQ== */\"","module.exports = \"<!--<button class=\\\"image-button\\\" (click)=\\\"onRotate(30)\\\">Rotate</button>\\r\\n<button class=\\\"image-button\\\" (click)=\\\"onAddRuler()\\\">Ruler</button>\\r\\n-->\\r\\n\\r\\n<div class=\\\"container-fluid\\\">\\r\\n    <div class=\\\"row imageOperate-div\\\">\\r\\n        <table>\\r\\n            <tr>\\r\\n                <td>\\r\\n                    <app-dropdown-button-menu [menuButtonList]=\\\"selectPanButtonMenuList\\\"></app-dropdown-button-menu>\\r\\n                </td>\\r\\n                <td>\\r\\n                    <app-dropdown-button-menu [menuButtonList]=\\\"zoomButtonMenuList\\\"></app-dropdown-button-menu>\\r\\n                </td>\\r\\n                <td>\\r\\n                    <app-dropdown-button-menu [menuButtonList]=\\\"magnifyButtonMenuList\\\"></app-dropdown-button-menu>\\r\\n                </td>\\r\\n                <td>\\r\\n                    <app-dropdown-button-menu [menuButtonList]=\\\"wlButtonMenuList\\\"></app-dropdown-button-menu>\\r\\n                </td>\\r\\n                <td>\\r\\n                    <app-dropdown-button-menu-button [buttonData]=\\\"selectAnnotationButtonMenu\\\" [isTopButton]=\\\"true\\\" [showArrow]=\\\"false\\\"></app-dropdown-button-menu-button>\\r\\n                </td>\\r\\n                <td>\\r\\n                    <img [src]=\\\"getButtonDivideSrc()\\\" style=\\\"margin-top: -24px\\\"/>\\r\\n                </td>\\r\\n                <td>\\r\\n                    <app-dropdown-button-menu [menuButtonList]=\\\"fitButtonMenuList\\\"></app-dropdown-button-menu>\\r\\n                </td>\\r\\n                <td>\\r\\n                    <app-dropdown-button-menu [menuButtonList]=\\\"rotateFlipButtonMenuList\\\"></app-dropdown-button-menu>\\r\\n                </td>\\r\\n                <td>\\r\\n                    <img [src]=\\\"getButtonDivideSrc()\\\" style=\\\"margin-top: -24px\\\"/>\\r\\n                </td>\\r\\n                <td>\\r\\n                    <app-dropdown-button-menu-button [buttonData]=\\\"resetButtonMenu\\\" [isTopButton]=\\\"true\\\" [showArrow]=\\\"false\\\"></app-dropdown-button-menu-button>\\r\\n                </td>\\r\\n                <td>\\r\\n                    <app-dropdown-button-menu-button [buttonData]=\\\"keyImageButtonMenu\\\" [isTopButton]=\\\"true\\\" [showArrow]=\\\"false\\\"></app-dropdown-button-menu-button>\\r\\n                </td>\\r\\n                <td>\\r\\n                    <img [src]=\\\"getButtonDivideSrc()\\\" style=\\\"margin-top: -24px\\\"/>\\r\\n                </td>\\r\\n                <td>\\r\\n                    <app-dropdown-button-menu-button [buttonData]=\\\"markerButtonMenu\\\" [isTopButton]=\\\"true\\\" [showArrow]=\\\"false\\\"></app-dropdown-button-menu-button>\\r\\n                </td>\\r\\n                <td>\\r\\n                    <app-dropdown-button-menu [menuButtonList]=\\\"simpleAnnotation1ButtonMenu\\\"></app-dropdown-button-menu>\\r\\n                </td>\\r\\n                <td>\\r\\n                    <app-dropdown-button-menu [menuButtonList]=\\\"simpleAnnotation2ButtonMenu\\\"></app-dropdown-button-menu>\\r\\n                </td>\\r\\n                <td>\\r\\n                    <app-dropdown-button-menu [menuButtonList]=\\\"extendAnnotation1ButtonMenu\\\"></app-dropdown-button-menu>\\r\\n                </td>\\r\\n                <td>\\r\\n                    <app-dropdown-button-menu [menuButtonList]=\\\"extendAnnotation2ButtonMenu\\\"></app-dropdown-button-menu>\\r\\n                </td>\\r\\n                <td>\\r\\n                    <img [src]=\\\"getButtonDivideSrc()\\\" style=\\\"margin-top: -24px\\\" />\\r\\n                </td>\\r\\n                <td>\\r\\n                    <app-dropdown-button-menu-button [buttonData]=\\\"showAnnotationButtonMenu\\\" [isTopButton]=\\\"true\\\" [showArrow]=\\\"false\\\"></app-dropdown-button-menu-button>\\r\\n                </td>\\r\\n                <td>\\r\\n                    <app-dropdown-button-menu-button [buttonData]=\\\"showOverlayButtonMenu\\\" [isTopButton]=\\\"true\\\" [showArrow]=\\\"false\\\"></app-dropdown-button-menu-button>\\r\\n                </td>\\r\\n                <td>\\r\\n                    <app-dropdown-button-menu-button [buttonData]=\\\"showRulerButtonMenu\\\" [isTopButton]=\\\"true\\\" [showArrow]=\\\"false\\\"></app-dropdown-button-menu-button>\\r\\n                </td>\\r\\n                <td>\\r\\n                    <app-dropdown-button-menu-button [buttonData]=\\\"showGraphicOverlayButtonMenu\\\" [isTopButton]=\\\"true\\\" [showArrow]=\\\"false\\\"></app-dropdown-button-menu-button>\\r\\n                </td>\\r\\n                <td>\\r\\n                    <img [src]=\\\"getButtonDivideSrc()\\\" style=\\\"margin-top: -24px\\\"/>\\r\\n                </td>\\r\\n            </tr>\\r\\n        </table>\\r\\n    </div>\\r\\n</div>\\r\\n<!--\\r\\n<div class=\\\"collapse navbar-collapse\\\" id=\\\"navTopToggle\\\">\\r\\n    <ul id=\\\"navBarGroup\\\" class=\\\"nav navbar-nav\\\">\\r\\n        <li class=\\\"\\\">\\r\\n            <a href=\\\"#\\\" class=\\\"nav\\\">\\r\\n                <img class=\\\"btnSelect\\\" alt=\\\"Select\\\" title=\\\"Select\\\" src=\\\"../../../../assets/img/Toolbar/selection/normal/bitmap.gif\\\" />\\r\\n            </a>\\r\\n        </li>\\r\\n        <li>\\r\\n            <a href=\\\"#\\\" class=\\\"nav\\\">\\r\\n                <img class=\\\"btnPan\\\" alt=\\\"Pan\\\" title=\\\"Pan\\\" src=\\\"../../../../assets/img/Toolbar/Pan/normal/bitmap.gif\\\" />\\r\\n            </a>\\r\\n        </li>\\r\\n        <li class=\\\"dropdown\\\">\\r\\n            <a class=\\\"dropdown-toggle nav navbar-collapse\\\" data-toggle=\\\"dropdown\\\" href=\\\"#\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\">\\r\\n                <img class=\\\"btnRotate\\\" alt=\\\"RotateCCW\\\" title=\\\"RotateCCW\\\" src=\\\"../../../../assets/img/Toolbar/Rotateccw/normal/bitmap_h.gif\\\" />\\r\\n            </a>\\r\\n            <ul class=\\\"dropdown-menu swith-menu\\\">\\r\\n                <li>\\r\\n                    <img class=\\\"btnRotate\\\" alt=\\\"RotateCCW\\\" title=\\\"RotateCCW\\\" src=\\\"../../../../assets/img/Toolbar/Rotateccw/normal/bitmap_h.gif\\\" />\\r\\n                </li>\\r\\n                <li>\\r\\n                    <img class=\\\"btnRotate\\\" alt=\\\"RotateCW\\\" title=\\\"RotateCW\\\" src=\\\"../../../../assets/img/Toolbar/Rotatecw/normal/bitmap_h.gif\\\" />\\r\\n                </li>\\r\\n                <li>\\r\\n                    <img class=\\\"btnRotate\\\" alt=\\\"VFlip\\\" title=\\\"VFlip\\\" src=\\\"../../../../assets/img/Toolbar/FlipV/normal/bitmap_h.gif\\\" />\\r\\n                </li>\\r\\n                <li>\\r\\n                    <img class=\\\"btnRotate\\\" alt=\\\"HFlip\\\" title=\\\"HFlip\\\" src=\\\"../../../../assets/img/Toolbar/FlipH/normal/bitmap_h.gif\\\" />\\r\\n                </li>\\r\\n            </ul>\\r\\n        </li>\\r\\n        <li class=\\\"dropdown\\\">\\r\\n            <a class=\\\"dropdown-toggle nav navbar-collapse\\\" data-toggle=\\\"dropdown\\\" href=\\\"#\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\">\\r\\n                <img class=\\\"btnZoom\\\" alt=\\\"Zoom\\\" title=\\\"Zoom\\\" src=\\\"../../../../assets/img/Toolbar/Zoom/normal/bitmap_h.gif\\\" />\\r\\n            </a>\\r\\n            <ul class=\\\"dropdown-menu swith-menu\\\">\\r\\n                <li>\\r\\n                    <img class=\\\"btnZoom\\\" alt=\\\"Zoom\\\" title=\\\"Zoom\\\" src=\\\"../../../../assets/img/Toolbar/Zoom/normal/bitmap_h.gif\\\" />\\r\\n                </li>\\r\\n                <li>\\r\\n                    <img class=\\\"btnZoom\\\" alt=\\\"MagnifyX2\\\" title=\\\"MagnifyX2\\\" src=\\\"../../../../assets/img/Toolbar/magnify2/normal/bitmap_h.gif\\\" />\\r\\n                </li>\\r\\n                <li>\\r\\n                    <img class=\\\"btnZoom\\\" alt=\\\"MagnifyX4\\\" title=\\\"MagnifyX4\\\" src=\\\"../../../../assets/img/Toolbar/magnify4/normal/bitmap_h.gif\\\" />\\r\\n                </li>\\r\\n                <li>\\r\\n                    <img class=\\\"btnZoom\\\" alt=\\\"ROIZoom\\\" title=\\\"ROI Zoom\\\" src=\\\"../../../../assets/img/Toolbar/rectzoom/normal/bitmap_h.gif\\\" />\\r\\n                </li>\\r\\n            </ul>\\r\\n        </li>\\r\\n        <li class=\\\"dropdown\\\">\\r\\n            <a class=\\\"dropdown-toggle nav navbar-collapse\\\" data-toggle=\\\"dropdown\\\" href=\\\"#\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\">\\r\\n                <img class=\\\"btnScoutLine\\\" alt=\\\"ScoutLine\\\" title=\\\"ScoutLine\\\" src=\\\"../../../../assets/img/Toolbar/scoutline_set/normal/bitmap_h.gif\\\" />\\r\\n            </a>\\r\\n            <ul class=\\\"dropdown-menu swith-menu\\\">\\r\\n                <li>\\r\\n                    <img class=\\\"btnScoutLine\\\" alt=\\\"ScoutLine\\\" title=\\\"Set ScoutLine\\\" src=\\\"../../../../assets/img/Toolbar/scoutline_set/normal/bitmap_h.gif\\\" />\\r\\n                </li>\\r\\n                <li>\\r\\n                    <img class=\\\"btnScoutLine\\\" alt=\\\"ScoutLineAll\\\" title=\\\"Set ScoutLine All\\\" src=\\\"../../../../assets/img/Toolbar/scoutline_set_all/normal/bitmap_h.gif\\\" />\\r\\n                </li>\\r\\n                <li>\\r\\n                    <img class=\\\"btnScoutLine\\\" alt=\\\"ScoutLineSrc\\\" title=\\\"Set ScoutLine Source\\\" src=\\\"../../../../assets/img/Toolbar/scoutline_src_set/normal/bitmap_h.gif\\\" />\\r\\n                </li>\\r\\n                <li>\\r\\n                    <img class=\\\"btnScoutLine\\\" alt=\\\"ScoutLineDest\\\" title=\\\"Set ScoutLine Destination\\\" src=\\\"../../../../assets/img/Toolbar/scoutline_dst_set/normal/bitmap_h.gif\\\" />\\r\\n                </li>\\r\\n            </ul>\\r\\n        </li>\\r\\n        <li>\\r\\n            <a href=\\\"#\\\" class=\\\"nav\\\">\\r\\n                <img class=\\\"btnWL\\\" alt=\\\"W/L\\\" title=\\\"W/L\\\" src=\\\"../../../../assets/img/Toolbar/WL/normal/bitmap.gif\\\" />\\r\\n            </a>\\r\\n        </li>\\r\\n        <li>\\r\\n            <a href=\\\"#\\\" class=\\\"nav\\\">\\r\\n                <img class=\\\"btnInvert\\\" alt=\\\"Invert\\\" title=\\\"Invert\\\" src=\\\"../../../../assets/img/Toolbar/Invert/normal/bitmap.gif\\\" />\\r\\n            </a>\\r\\n        </li>\\r\\n        <li>\\r\\n            <a href=\\\"#\\\" class=\\\"nav\\\">\\r\\n                <img class=\\\"btnReset\\\" alt=\\\"TrueSize\\\" title=\\\"TrueSize\\\" src=\\\"../../../../assets/img/Toolbar/Reset/normal/bitmap.gif\\\" />\\r\\n            </a>\\r\\n        </li>\\r\\n        <li class=\\\"dropdown\\\">\\r\\n            <a class=\\\"nav\\\">\\r\\n                <img title=\\\"Markers\\\" src=\\\"../../../../assets/img/Toolbar/ann_stamp/normal/bitmap.gif\\\" />\\r\\n            </a>\\r\\n            <ul class=\\\"dropdown-menu\\\">\\r\\n                <li id=\\\"liMarkerTab\\\">\\r\\n                    <ul class=\\\"nav nav-tabs nav-justified\\\">\\r\\n                        <li class=\\\"active\\\"><a id=\\\"tabMarkerPanel1\\\" data-toggle=\\\"tab\\\" href=\\\"#divMarkerPanel1\\\">Favorites</a></li>\\r\\n                        <li><a id=\\\"tabMarkerPanel2\\\" data-toggle=\\\"tab\\\" href=\\\"#divMarkerPanel2\\\">Panel 2</a></li>\\r\\n                        <li><a id=\\\"tabMarkerPanel3\\\" data-toggle=\\\"tab\\\" href=\\\"#divMarkerPanel3\\\">Panel 3</a></li>\\r\\n                    </ul>\\r\\n                    <div class=\\\"tab-content\\\">\\r\\n                        <div id=\\\"divMarkerPanel1\\\" class=\\\"tab-pane in active\\\">\\r\\n                            <div>\\r\\n                                <table class=\\\"table table-bordered table-marker\\\">\\r\\n                                    <tbody id=\\\"tblMarkerTable1\\\"></tbody>\\r\\n                                </table>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <div id=\\\"divMarkerPanel2\\\" class=\\\"tab-pane\\\">\\r\\n                            <table class=\\\"table table-bordered table-marker\\\">\\r\\n                                <tbody id=\\\"tblMarkerTable2\\\"></tbody>\\r\\n                            </table>\\r\\n                        </div>\\r\\n                        <div id=\\\"divMarkerPanel3\\\" class=\\\"tab-pane\\\">\\r\\n                            <table class=\\\"table table-bordered table-marker\\\">\\r\\n                                <tbody id=\\\"tblMarkerTable3\\\"></tbody>\\r\\n                            </table>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </li>\\r\\n            </ul>\\r\\n        </li>\\r\\n        <li>\\r\\n            <a href=\\\"#\\\" class=\\\"nav\\\">\\r\\n                <img class=\\\"btnBestFit\\\" alt=\\\"BestFit\\\" title=\\\"BestFit\\\" src=\\\"../../../../assets/img/Toolbar/fitwindow/normal/bitmap.gif\\\" />\\r\\n            </a>\\r\\n        </li>\\r\\n        <li>\\r\\n            <a href=\\\"#\\\" class=\\\"nav\\\">\\r\\n                <img class=\\\"btnAddRect\\\" alt=\\\"annRect\\\" title=\\\"Rect\\\" src=\\\"../../../../assets/img/Toolbar/ann_rectangle/normal/bitmap.gif\\\" />\\r\\n            </a>\\r\\n        </li>\\r\\n        <li>\\r\\n            <a href=\\\"#\\\" class=\\\"nav\\\">\\r\\n                <img class=\\\"btnAddRuler\\\" alt=\\\"annLine\\\" title=\\\"Ruler\\\" src=\\\"../../../../assets/img/Toolbar/Ruler/normal/bitmap.gif\\\" />\\r\\n            </a>\\r\\n        </li>\\r\\n        <li>\\r\\n            <a href=\\\"#\\\" class=\\\"nav\\\">\\r\\n                <img class=\\\"btnAddCurve\\\" alt=\\\"annCurve\\\" title=\\\"Curve\\\" src=\\\"../../../../assets/img/Toolbar/ann_cervicalcurve/normal/bitmap.gif\\\" />\\r\\n            </a>\\r\\n        </li>\\r\\n        <li>\\r\\n            <a href=\\\"#\\\" class=\\\"nav\\\">\\r\\n                <img class=\\\"btnAddAngle\\\" alt=\\\"annAngle\\\" title=\\\"Angle\\\" src=\\\"../../../../assets/img/Toolbar/ann_angle/normal/bitmap.gif\\\" />\\r\\n            </a>\\r\\n        </li>\\r\\n        <li>\\r\\n            <a href=\\\"#\\\" class=\\\"nav\\\">\\r\\n                <img class=\\\"btnShowOverlay\\\" alt=\\\"ShowOverlay\\\" title=\\\"Show Overlay\\\" src=\\\"../../../../assets/img/Toolbar/showoverlay/down/bitmap.gif\\\" />\\r\\n            </a>\\r\\n        </li>\\r\\n        <li>\\r\\n            <a href=\\\"#\\\" class=\\\"nav\\\">\\r\\n                <img class=\\\"btnShowAnnotation\\\" alt=\\\"ShowAnnotation\\\" title=\\\"Show Annotation\\\" src=\\\"../../../../assets/img/Toolbar/showannotation/down/bitmap.gif\\\" />\\r\\n            </a>\\r\\n        </li>\\r\\n        <li>\\r\\n            <a href=\\\"#\\\" class=\\\"nav\\\">\\r\\n                <img class=\\\"btnShowRuler\\\" alt=\\\"ShowRuler\\\" title=\\\"Show Ruler\\\" src=\\\"../../../../assets/img/Toolbar/showruler/down/bitmap.gif\\\" />\\r\\n            </a>\\r\\n        </li>\\r\\n    </ul>\\r\\n    <ul class=\\\"nav navbar-nav\\\">\\r\\n        <li>\\r\\n            <a href=\\\"#\\\" class=\\\"nav\\\">\\r\\n                <img class=\\\"btnDelete\\\" alt=\\\"Delete\\\" title=\\\"Delete\\\" src=\\\"../../../../assets/img/Toolbar/Delete.png\\\" />\\r\\n            </a>\\r\\n        </li>\\r\\n        <li>\\r\\n            <a href=\\\"#\\\" class=\\\"nav\\\">\\r\\n                <img class=\\\"btnSave\\\" alt=\\\"Save\\\" title=\\\"Save\\\" src=\\\"../../../../assets/img/Toolbar/Save.png\\\" />\\r\\n            </a>\\r\\n        </li>\\r\\n    </ul>\\r\\n</div>\\r\\n-->\\r\\n\"","import { Component, OnInit, EventEmitter, Output } from \"@angular/core\";\r\nimport { ImageSelectorService } from \"../../../services/image-selector.service\";\r\nimport { OperationEnum, ViewContextEnum, ViewContext, ViewContextService } from \"../../../services/view-context.service\";\r\nimport { SelectedButtonData } from \"../../../models/dropdown-button-menu-data\";\r\nimport { ConfigurationService } from \"../../../services/configuration.service\";\r\nimport { AnnType } from \"../../../models/annotation\";\r\n\r\n\r\n@Component({\r\n    selector: \"app-viewer-toolbar\",\r\n    templateUrl: \"./viewer-toolbar.component.html\",\r\n    styleUrls: [\"./viewer-toolbar.component.css\"]\r\n})\r\nexport class ViewerToolbarComponent implements OnInit {\r\n    buttonDivideSrc: string;\r\n\r\n    selectPanButtonMenuList: SelectedButtonData[] = [\r\n        { name: \"selection\", tip: \"Select\", operationData: { type: OperationEnum.SetContext, data: ViewContextEnum.Select } },\r\n        { name: \"Pan\", tip: \"Pan\", operationData: { type: OperationEnum.SetContext, data: ViewContextEnum.Pan } }\r\n    ];\r\n\r\n    rotateFlipButtonMenuList: SelectedButtonData[] = [\r\n        { name: \"FlipH\", tip: \"Flip Horizontal\", operationData: { type: OperationEnum.Flip, data: false } },\r\n        { name: \"FlipV\", tip: \"Flip Vertical\", operationData: { type: OperationEnum.Flip, data: true } },\r\n        { name: \"Rotatecw\", tip: \"Rotate CW\", operationData: { type: OperationEnum.Rotate, data: { angle: 90 } } },\r\n        { name: \"Rotateccw\", tip: \"Rotate CCW\", operationData: { type: OperationEnum.Rotate, data: { angle: -90 } } }\r\n    ];\r\n\r\n    zoomButtonMenuList: SelectedButtonData[] = [\r\n        { name: \"Zoom\", tip: \"Zoom\", operationData: { type: OperationEnum.SetContext, data: ViewContextEnum.Zoom } },\r\n        { name: \"rectzoom\", tip: \"ROI Zoom\", operationData: { type: OperationEnum.SetContext, data: ViewContextEnum.ROIZoom } }\r\n    ];\r\n\r\n    magnifyButtonMenuList: SelectedButtonData[] = [\r\n        { name: \"magnify2\", tip: \"Magnify X 2\", operationData: { type: OperationEnum.SetContext, data: new ViewContext(ViewContextEnum.Magnify, 2) } },\r\n        { name: \"magnify4\", tip: \"Magnify X 4\", operationData: { type: OperationEnum.SetContext, data: new ViewContext(ViewContextEnum.Magnify, 4) } },\r\n        { name: \"magnify8\", tip: \"Magnify X 8\", operationData: { type: OperationEnum.SetContext, data: new ViewContext(ViewContextEnum.Magnify, 8) } }\r\n    ];\r\n\r\n    fitButtonMenuList: SelectedButtonData[] = [\r\n        { name: \"fitheight\", tip: \"Fit Height\", operationData: { type: OperationEnum.FitHeight, data: null } },\r\n        { name: \"fitoriginal\", tip: \"Fit Original\", operationData: { type: OperationEnum.FitOriginal, data: null } },\r\n        { name: \"fitwidth\", tip: \"Fit Width\", operationData: { type: OperationEnum.FitWidth, data: null } },\r\n        { name: \"fitwindow\", tip: \"Scale to Fit\", operationData: { type: OperationEnum.FitWindow, data: null } }\r\n    ];\r\n\r\n    wlButtonMenuList: SelectedButtonData[] = [\r\n        { name: \"WL\", tip: \"W/L\", operationData: { type: OperationEnum.SetContext, data: ViewContextEnum.WL } },\r\n        { name: \"ROI\", tip: \"ROI W/L\", operationData: { type: OperationEnum.SetContext, data: ViewContextEnum.ROIWL } },\r\n        { name: \"ManualWL\", tip: \"Manual W/L\", operationData: { type: OperationEnum.ManualWL, data: null } },\r\n        { name: \"Invert\", tip: \"Invert\", operationData: { type: OperationEnum.Invert, data: null } }\r\n    ];\r\n\r\n    keyImageButtonMenu: SelectedButtonData = {\r\n        name: \"SetKeyImage\", tip: \"Key Image\", operationData: { type: OperationEnum.ToggleKeyImage, data: null }\r\n    };\r\n\r\n    resetButtonMenu: SelectedButtonData = {\r\n         name: \"Reset\", tip: \"Reset\", operationData: { type: OperationEnum.Reset, data: null }\r\n    };\r\n\r\n    showAnnotationButtonMenu: SelectedButtonData = {\r\n        name: \"showannotation\", tip: \"Show Annotation\", operationData: { type: OperationEnum.ShowAnnotation, data: null }\r\n    };\r\n\r\n    showOverlayButtonMenu: SelectedButtonData = {\r\n        name: \"showoverlay\", tip: \"Show Overlay\", operationData: { type: OperationEnum.ShowOverlay, data: null }\r\n    };\r\n\r\n    showRulerButtonMenu: SelectedButtonData = {\r\n        name: \"showruler\", tip: \"Show Ruler\", operationData: { type: OperationEnum.ShowRuler, data: null }\r\n    };\r\n\r\n    showGraphicOverlayButtonMenu: SelectedButtonData = {\r\n        name: \"showgraphicoverlay\", tip: \"Show Graphic Overlay\", operationData: { type: OperationEnum.ShowGraphicOverlay, data: null }\r\n    };\r\n\r\n    selectAnnotationButtonMenu: SelectedButtonData = {\r\n        name: \"ann_selection\", tip: \"Select Annotation\", operationData: { type: OperationEnum.SetContext, data: ViewContextEnum.SelectAnn }\r\n    };\r\n\r\n    simpleAnnotation1ButtonMenu: SelectedButtonData[] = [\r\n        { name: \"ann_line\", tip: \"Line\", operationData: { type: OperationEnum.SetContext, data: new ViewContext(ViewContextEnum.CreateAnn, AnnType.LineExt)}},\r\n        { name: \"ann_angle\", tip: \"Angle\", operationData: { type: OperationEnum.SetContext, data: new ViewContext(ViewContextEnum.CreateAnn, AnnType.Protractor)}},\r\n        { name: \"ann_arrow\", tip: \"Arrow\", operationData: { type: OperationEnum.SetContext, data: new ViewContext(ViewContextEnum.CreateAnn, AnnType.Arrow)}},\r\n        { name: \"ann_vaxis\", tip: \"Vertical Axis\", operationData: { type: OperationEnum.SetContext, data: new ViewContext(ViewContextEnum.CreateAnn, AnnType.Vaxis)}},\r\n        { name: \"ann_humanmarkspot\", tip: \"Mark Spot\", operationData: { type: OperationEnum.SetContext, data: new ViewContext(ViewContextEnum.CreateAnn, AnnType.MarkSpot)}},\r\n        { name: \"ann_freearea\", tip: \"Free Area\", operationData: { type: OperationEnum.SetContext, data: new ViewContext(ViewContextEnum.CreateAnn, AnnType.FreeArea) } },\r\n        { name: \"ann_text\", tip: \"Text\", operationData: { type: OperationEnum.SetContext, data: new ViewContext(ViewContextEnum.CreateAnn, AnnType.Text) } }\r\n    ];\r\n\r\n    simpleAnnotation2ButtonMenu: SelectedButtonData[] = [\r\n        { name: \"ann_ellipse\", tip: \"Eclipse\", operationData: { type: OperationEnum.SetContext, data: new ViewContext(ViewContextEnum.CreateAnn, AnnType.Ellipse)}},\r\n        { name: \"ann_polygon\", tip: \"Polygon\", operationData: { type: OperationEnum.SetContext, data: new ViewContext(ViewContextEnum.CreateAnn, AnnType.Polygon)}},\r\n        { name: \"ann_rectangle\", tip: \"Rectangle\", operationData: { type: OperationEnum.SetContext, data: new ViewContext(ViewContextEnum.CreateAnn, AnnType.Rect)}},\r\n        { name: \"ann_ruler\", tip: \"Ruler\", operationData: { type: OperationEnum.SetContext, data: new ViewContext(ViewContextEnum.CreateAnn, AnnType.Ruler)}}\r\n    ];\r\n\r\n    extendAnnotation1ButtonMenu: SelectedButtonData[] = [\r\n        { name: \"ann_cervicalcurve\", tip: \"Cervical Curve\", operationData: { type: OperationEnum.SetContext, data: new ViewContext(ViewContextEnum.CreateAnn, AnnType.CervicalCurve)}},\r\n        { name: \"ann_lumbarcurve\", tip: \"Lumbar Curve\", operationData: { type: OperationEnum.SetContext, data: new ViewContext(ViewContextEnum.CreateAnn, AnnType.LumbarCurve)}}\r\n    ];\r\n\r\n    extendAnnotation2ButtonMenu: SelectedButtonData[] = [\r\n        { name: \"ann_heartchestratio\", tip: \"Cardiothoracic Ratio\", operationData: { type: OperationEnum.SetContext, data: new ViewContext(ViewContextEnum.CreateAnn, AnnType.HeartChestRatio)}}\r\n    ];\r\n\r\n    markerButtonMenu: SelectedButtonData = {\r\n        name: \"ann_stamp\", tip: \"Markers\", operationData: { type: OperationEnum.SetContext, data: new ViewContext(ViewContextEnum.CreateAnn, AnnType.Stamp) }\r\n    };\r\n\r\n    private baseUrl: string;\r\n\r\n\r\n    constructor(private imageSelectorService: ImageSelectorService,\r\n        private viewContext: ViewContextService,\r\n        private configurationService: ConfigurationService) {\r\n        this.buttonDivideSrc = this.configurationService.getBaseUrl() + \"assets/img/DicomViewer/fenge2.png\";\r\n    }\r\n\r\n    ngOnInit() {\r\n    }\r\n\r\n    getButtonDivideSrc(): string {\r\n        return this.buttonDivideSrc;\r\n    }\r\n}\r\n","module.exports = \".loadImage, .loadKeyImage, .setRead, .setUnread, .changeImageSeriesOrder, .reassign, .transfer, .tagEdit, .deletePrevent, .deleteAllow, .delete, .import {\\r\\n    border: none;\\r\\n    height: 40px;\\r\\n    outline: none;\\r\\n    width: 40px;\\r\\n}\\r\\n\\r\\n.loadImage { background: url('LoadImage_40_40_All.png') no-repeat left top; }\\r\\n\\r\\n.loadImage:hover { background: url('LoadImage_40_40_All.png') no-repeat right top; }\\r\\n\\r\\n.loadImage:active { background: url('LoadImage_40_40_All.png') no-repeat left bottom; }\\r\\n\\r\\n.loadImage:disabled { background: url('LoadImage_40_40_All.png') no-repeat right bottom; }\\r\\n\\r\\n.loadKeyImage { background: url('loadKeyImage_40_40_All.png') no-repeat left top; }\\r\\n\\r\\n.loadKeyImage:hover { background: url('loadKeyImage_40_40_All.png') no-repeat right top; }\\r\\n\\r\\n.loadKeyImage:active { background: url('loadKeyImage_40_40_All.png') no-repeat left bottom; }\\r\\n\\r\\n.loadKeyImage:disabled { background: url('loadKeyImage_40_40_All.png') no-repeat right bottom; }\\r\\n\\r\\n.setRead { background: url('setRead_40_40_All.png') no-repeat left top; }\\r\\n\\r\\n.setRead:hover { background: url('setRead_40_40_All.png') no-repeat right top; }\\r\\n\\r\\n.setRead:active { background: url('setRead_40_40_All.png') no-repeat left bottom; }\\r\\n\\r\\n.setRead:disabled { background: url('setRead_40_40_All.png') no-repeat right bottom; }\\r\\n\\r\\n.setUnread { background: url('setUnread_40_40_All.png') no-repeat left top; }\\r\\n\\r\\n.setUnread:hover { background: url('setUnread_40_40_All.png') no-repeat right top; }\\r\\n\\r\\n.setUnread:active { background: url('setUnread_40_40_All.png') no-repeat left bottom; }\\r\\n\\r\\n.setUnread:disabled { background: url('setUnread_40_40_All.png') no-repeat right bottom; }\\r\\n\\r\\n.changeImageSeriesOrder { background: url('changeImageSeriesOrder_40_40_All.png') no-repeat left top; }\\r\\n\\r\\n.changeImageSeriesOrder:hover { background: url('changeImageSeriesOrder_40_40_All.png') no-repeat right top; }\\r\\n\\r\\n.changeImageSeriesOrder:active { background: url('changeImageSeriesOrder_40_40_All.png') no-repeat left bottom; }\\r\\n\\r\\n.changeImageSeriesOrder:disabled { background: url('changeImageSeriesOrder_40_40_All.png') no-repeat right bottom; }\\r\\n\\r\\n.reassign { background: url('reassign_40_40_All.png') no-repeat left top; }\\r\\n\\r\\n.reassign:hover { background: url('reassign_40_40_All.png') no-repeat right top; }\\r\\n\\r\\n.reassign:active { background: url('reassign_40_40_All.png') no-repeat left bottom; }\\r\\n\\r\\n.reassign:disabled { background: url('reassign_40_40_All.png') no-repeat right bottom; }\\r\\n\\r\\n.transfer { background: url('transferImage_40_40_All.png') no-repeat left top; }\\r\\n\\r\\n.transfer:hover { background: url('transferImage_40_40_All.png') no-repeat right top; }\\r\\n\\r\\n.transfer:active { background: url('transferImage_40_40_All.png') no-repeat left bottom; }\\r\\n\\r\\n.transfer:disabled { background: url('transferImage_40_40_All.png') no-repeat right bottom; }\\r\\n\\r\\n.tagEdit { background: url('tagEdit_40_40_All.png') no-repeat left top; }\\r\\n\\r\\n.tagEdit:hover { background: url('tagEdit_40_40_All.png') no-repeat right top; }\\r\\n\\r\\n.tagEdit:active { background: url('tagEdit_40_40_All.png') no-repeat left bottom; }\\r\\n\\r\\n.tagEdit:disabled { background: url('tagEdit_40_40_All.png') no-repeat right bottom; }\\r\\n\\r\\n.deletePrevent { background: url('deletePrevent_40_40_All.png') no-repeat left top; }\\r\\n\\r\\n.deletePrevent:hover { background: url('deletePrevent_40_40_All.png') no-repeat right top; }\\r\\n\\r\\n.deletePrevent:active { background: url('deletePrevent_40_40_All.png') no-repeat left bottom; }\\r\\n\\r\\n.deletePrevent:disabled { background: url('deletePrevent_40_40_All.png') no-repeat right bottom; }\\r\\n\\r\\n.deleteAllow { background: url('deleteAllow_40_40_All.png') no-repeat left top; }\\r\\n\\r\\n.deleteAllow:hover { background: url('deleteAllow_40_40_All.png') no-repeat right top; }\\r\\n\\r\\n.deleteAllow:active { background: url('deleteAllow_40_40_All.png') no-repeat left bottom; }\\r\\n\\r\\n.deleteAllow:disabled { background: url('deleteAllow_40_40_All.png') no-repeat right bottom; }\\r\\n\\r\\n.delete { background: url('delete_40_40_All.png') no-repeat left top; }\\r\\n\\r\\n.delete:hover { background: url('delete_40_40_All.png') no-repeat right top; }\\r\\n\\r\\n.delete:active { background: url('delete_40_40_All.png') no-repeat left bottom; }\\r\\n\\r\\n.delete:disabled { background: url('delete_40_40_All.png') no-repeat right bottom; }\\r\\n\\r\\n.import { background: url('import_40_40_All.png') no-repeat left top; }\\r\\n\\r\\n.import:hover { background: url('import_40_40_All.png') no-repeat right top; }\\r\\n\\r\\n.import:active { background: url('import_40_40_All.png') no-repeat left bottom; }\\r\\n\\r\\n.import:disabled { background: url('import_40_40_All.png') no-repeat right bottom; }\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy93b3JrbGlzdC1zaGVsbC9vcGVyYXRlLXRvb2xiYXIvb3BlcmF0ZS10b29sYmFyLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxZQUFZO0lBQ1osWUFBWTtJQUNaLGFBQWE7SUFDYixXQUFXO0FBQ2Y7O0FBRUEsYUFBYSw2REFBeUYsRUFBRTs7QUFFeEcsbUJBQW1CLDhEQUEwRixFQUFFOztBQUUvRyxvQkFBb0IsZ0VBQTRGLEVBQUU7O0FBRWxILHNCQUFzQixpRUFBNkYsRUFBRTs7QUFFckgsZ0JBQWdCLGdFQUE0RixFQUFFOztBQUU5RyxzQkFBc0IsaUVBQTZGLEVBQUU7O0FBRXJILHVCQUF1QixtRUFBK0YsRUFBRTs7QUFFeEgseUJBQXlCLG9FQUFnRyxFQUFFOztBQUUzSCxXQUFXLDJEQUF1RixFQUFFOztBQUVwRyxpQkFBaUIsNERBQXdGLEVBQUU7O0FBRTNHLGtCQUFrQiw4REFBMEYsRUFBRTs7QUFFOUcsb0JBQW9CLCtEQUEyRixFQUFFOztBQUVqSCxhQUFhLDZEQUF5RixFQUFFOztBQUV4RyxtQkFBbUIsOERBQTBGLEVBQUU7O0FBRS9HLG9CQUFvQixnRUFBNEYsRUFBRTs7QUFFbEgsc0JBQXNCLGlFQUE2RixFQUFFOztBQUVySCwwQkFBMEIsMEVBQXNHLEVBQUU7O0FBRWxJLGdDQUFnQywyRUFBdUcsRUFBRTs7QUFFekksaUNBQWlDLDZFQUF5RyxFQUFFOztBQUU1SSxtQ0FBbUMsOEVBQTBHLEVBQUU7O0FBRS9JLFlBQVksNERBQXdGLEVBQUU7O0FBRXRHLGtCQUFrQiw2REFBeUYsRUFBRTs7QUFFN0csbUJBQW1CLCtEQUEyRixFQUFFOztBQUVoSCxxQkFBcUIsZ0VBQTRGLEVBQUU7O0FBRW5ILFlBQVksaUVBQTZGLEVBQUU7O0FBRTNHLGtCQUFrQixrRUFBOEYsRUFBRTs7QUFFbEgsbUJBQW1CLG9FQUFnRyxFQUFFOztBQUVySCxxQkFBcUIscUVBQWlHLEVBQUU7O0FBRXhILFdBQVcsMkRBQXVGLEVBQUU7O0FBRXBHLGlCQUFpQiw0REFBd0YsRUFBRTs7QUFFM0csa0JBQWtCLDhEQUEwRixFQUFFOztBQUU5RyxvQkFBb0IsK0RBQTJGLEVBQUU7O0FBRWpILGlCQUFpQixpRUFBNkYsRUFBRTs7QUFFaEgsdUJBQXVCLGtFQUE4RixFQUFFOztBQUV2SCx3QkFBd0Isb0VBQWdHLEVBQUU7O0FBRTFILDBCQUEwQixxRUFBaUcsRUFBRTs7QUFFN0gsZUFBZSwrREFBMkYsRUFBRTs7QUFFNUcscUJBQXFCLGdFQUE0RixFQUFFOztBQUVuSCxzQkFBc0Isa0VBQThGLEVBQUU7O0FBRXRILHdCQUF3QixtRUFBK0YsRUFBRTs7QUFFekgsVUFBVSwwREFBc0YsRUFBRTs7QUFFbEcsZ0JBQWdCLDJEQUF1RixFQUFFOztBQUV6RyxpQkFBaUIsNkRBQXlGLEVBQUU7O0FBRTVHLG1CQUFtQiw4REFBMEYsRUFBRTs7QUFFL0csVUFBVSwwREFBc0YsRUFBRTs7QUFFbEcsZ0JBQWdCLDJEQUF1RixFQUFFOztBQUV6RyxpQkFBaUIsNkRBQXlGLEVBQUU7O0FBRTVHLG1CQUFtQiw4REFBMEYsRUFBRSIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvd29ya2xpc3Qtc2hlbGwvb3BlcmF0ZS10b29sYmFyL29wZXJhdGUtdG9vbGJhci5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmxvYWRJbWFnZSwgLmxvYWRLZXlJbWFnZSwgLnNldFJlYWQsIC5zZXRVbnJlYWQsIC5jaGFuZ2VJbWFnZVNlcmllc09yZGVyLCAucmVhc3NpZ24sIC50cmFuc2ZlciwgLnRhZ0VkaXQsIC5kZWxldGVQcmV2ZW50LCAuZGVsZXRlQWxsb3csIC5kZWxldGUsIC5pbXBvcnQge1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgaGVpZ2h0OiA0MHB4O1xyXG4gICAgb3V0bGluZTogbm9uZTtcclxuICAgIHdpZHRoOiA0MHB4O1xyXG59XHJcblxyXG4ubG9hZEltYWdlIHsgYmFja2dyb3VuZDogdXJsKC4uLy4uLy4uLy4uL2Fzc2V0cy9pbWcvYnV0dG9uL0xvYWRJbWFnZV80MF80MF9BbGwucG5nKSBuby1yZXBlYXQgbGVmdCB0b3A7IH1cclxuXHJcbi5sb2FkSW1hZ2U6aG92ZXIgeyBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vTG9hZEltYWdlXzQwXzQwX0FsbC5wbmcpIG5vLXJlcGVhdCByaWdodCB0b3A7IH1cclxuXHJcbi5sb2FkSW1hZ2U6YWN0aXZlIHsgYmFja2dyb3VuZDogdXJsKC4uLy4uLy4uLy4uL2Fzc2V0cy9pbWcvYnV0dG9uL0xvYWRJbWFnZV80MF80MF9BbGwucG5nKSBuby1yZXBlYXQgbGVmdCBib3R0b207IH1cclxuXHJcbi5sb2FkSW1hZ2U6ZGlzYWJsZWQgeyBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vTG9hZEltYWdlXzQwXzQwX0FsbC5wbmcpIG5vLXJlcGVhdCByaWdodCBib3R0b207IH1cclxuXHJcbi5sb2FkS2V5SW1hZ2UgeyBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vbG9hZEtleUltYWdlXzQwXzQwX0FsbC5wbmcpIG5vLXJlcGVhdCBsZWZ0IHRvcDsgfVxyXG5cclxuLmxvYWRLZXlJbWFnZTpob3ZlciB7IGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL2J1dHRvbi9sb2FkS2V5SW1hZ2VfNDBfNDBfQWxsLnBuZykgbm8tcmVwZWF0IHJpZ2h0IHRvcDsgfVxyXG5cclxuLmxvYWRLZXlJbWFnZTphY3RpdmUgeyBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vbG9hZEtleUltYWdlXzQwXzQwX0FsbC5wbmcpIG5vLXJlcGVhdCBsZWZ0IGJvdHRvbTsgfVxyXG5cclxuLmxvYWRLZXlJbWFnZTpkaXNhYmxlZCB7IGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL2J1dHRvbi9sb2FkS2V5SW1hZ2VfNDBfNDBfQWxsLnBuZykgbm8tcmVwZWF0IHJpZ2h0IGJvdHRvbTsgfVxyXG5cclxuLnNldFJlYWQgeyBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vc2V0UmVhZF80MF80MF9BbGwucG5nKSBuby1yZXBlYXQgbGVmdCB0b3A7IH1cclxuXHJcbi5zZXRSZWFkOmhvdmVyIHsgYmFja2dyb3VuZDogdXJsKC4uLy4uLy4uLy4uL2Fzc2V0cy9pbWcvYnV0dG9uL3NldFJlYWRfNDBfNDBfQWxsLnBuZykgbm8tcmVwZWF0IHJpZ2h0IHRvcDsgfVxyXG5cclxuLnNldFJlYWQ6YWN0aXZlIHsgYmFja2dyb3VuZDogdXJsKC4uLy4uLy4uLy4uL2Fzc2V0cy9pbWcvYnV0dG9uL3NldFJlYWRfNDBfNDBfQWxsLnBuZykgbm8tcmVwZWF0IGxlZnQgYm90dG9tOyB9XHJcblxyXG4uc2V0UmVhZDpkaXNhYmxlZCB7IGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL2J1dHRvbi9zZXRSZWFkXzQwXzQwX0FsbC5wbmcpIG5vLXJlcGVhdCByaWdodCBib3R0b207IH1cclxuXHJcbi5zZXRVbnJlYWQgeyBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vc2V0VW5yZWFkXzQwXzQwX0FsbC5wbmcpIG5vLXJlcGVhdCBsZWZ0IHRvcDsgfVxyXG5cclxuLnNldFVucmVhZDpob3ZlciB7IGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL2J1dHRvbi9zZXRVbnJlYWRfNDBfNDBfQWxsLnBuZykgbm8tcmVwZWF0IHJpZ2h0IHRvcDsgfVxyXG5cclxuLnNldFVucmVhZDphY3RpdmUgeyBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vc2V0VW5yZWFkXzQwXzQwX0FsbC5wbmcpIG5vLXJlcGVhdCBsZWZ0IGJvdHRvbTsgfVxyXG5cclxuLnNldFVucmVhZDpkaXNhYmxlZCB7IGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL2J1dHRvbi9zZXRVbnJlYWRfNDBfNDBfQWxsLnBuZykgbm8tcmVwZWF0IHJpZ2h0IGJvdHRvbTsgfVxyXG5cclxuLmNoYW5nZUltYWdlU2VyaWVzT3JkZXIgeyBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vY2hhbmdlSW1hZ2VTZXJpZXNPcmRlcl80MF80MF9BbGwucG5nKSBuby1yZXBlYXQgbGVmdCB0b3A7IH1cclxuXHJcbi5jaGFuZ2VJbWFnZVNlcmllc09yZGVyOmhvdmVyIHsgYmFja2dyb3VuZDogdXJsKC4uLy4uLy4uLy4uL2Fzc2V0cy9pbWcvYnV0dG9uL2NoYW5nZUltYWdlU2VyaWVzT3JkZXJfNDBfNDBfQWxsLnBuZykgbm8tcmVwZWF0IHJpZ2h0IHRvcDsgfVxyXG5cclxuLmNoYW5nZUltYWdlU2VyaWVzT3JkZXI6YWN0aXZlIHsgYmFja2dyb3VuZDogdXJsKC4uLy4uLy4uLy4uL2Fzc2V0cy9pbWcvYnV0dG9uL2NoYW5nZUltYWdlU2VyaWVzT3JkZXJfNDBfNDBfQWxsLnBuZykgbm8tcmVwZWF0IGxlZnQgYm90dG9tOyB9XHJcblxyXG4uY2hhbmdlSW1hZ2VTZXJpZXNPcmRlcjpkaXNhYmxlZCB7IGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL2J1dHRvbi9jaGFuZ2VJbWFnZVNlcmllc09yZGVyXzQwXzQwX0FsbC5wbmcpIG5vLXJlcGVhdCByaWdodCBib3R0b207IH1cclxuXHJcbi5yZWFzc2lnbiB7IGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL2J1dHRvbi9yZWFzc2lnbl80MF80MF9BbGwucG5nKSBuby1yZXBlYXQgbGVmdCB0b3A7IH1cclxuXHJcbi5yZWFzc2lnbjpob3ZlciB7IGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL2J1dHRvbi9yZWFzc2lnbl80MF80MF9BbGwucG5nKSBuby1yZXBlYXQgcmlnaHQgdG9wOyB9XHJcblxyXG4ucmVhc3NpZ246YWN0aXZlIHsgYmFja2dyb3VuZDogdXJsKC4uLy4uLy4uLy4uL2Fzc2V0cy9pbWcvYnV0dG9uL3JlYXNzaWduXzQwXzQwX0FsbC5wbmcpIG5vLXJlcGVhdCBsZWZ0IGJvdHRvbTsgfVxyXG5cclxuLnJlYXNzaWduOmRpc2FibGVkIHsgYmFja2dyb3VuZDogdXJsKC4uLy4uLy4uLy4uL2Fzc2V0cy9pbWcvYnV0dG9uL3JlYXNzaWduXzQwXzQwX0FsbC5wbmcpIG5vLXJlcGVhdCByaWdodCBib3R0b207IH1cclxuXHJcbi50cmFuc2ZlciB7IGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL2J1dHRvbi90cmFuc2ZlckltYWdlXzQwXzQwX0FsbC5wbmcpIG5vLXJlcGVhdCBsZWZ0IHRvcDsgfVxyXG5cclxuLnRyYW5zZmVyOmhvdmVyIHsgYmFja2dyb3VuZDogdXJsKC4uLy4uLy4uLy4uL2Fzc2V0cy9pbWcvYnV0dG9uL3RyYW5zZmVySW1hZ2VfNDBfNDBfQWxsLnBuZykgbm8tcmVwZWF0IHJpZ2h0IHRvcDsgfVxyXG5cclxuLnRyYW5zZmVyOmFjdGl2ZSB7IGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL2J1dHRvbi90cmFuc2ZlckltYWdlXzQwXzQwX0FsbC5wbmcpIG5vLXJlcGVhdCBsZWZ0IGJvdHRvbTsgfVxyXG5cclxuLnRyYW5zZmVyOmRpc2FibGVkIHsgYmFja2dyb3VuZDogdXJsKC4uLy4uLy4uLy4uL2Fzc2V0cy9pbWcvYnV0dG9uL3RyYW5zZmVySW1hZ2VfNDBfNDBfQWxsLnBuZykgbm8tcmVwZWF0IHJpZ2h0IGJvdHRvbTsgfVxyXG5cclxuLnRhZ0VkaXQgeyBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vdGFnRWRpdF80MF80MF9BbGwucG5nKSBuby1yZXBlYXQgbGVmdCB0b3A7IH1cclxuXHJcbi50YWdFZGl0OmhvdmVyIHsgYmFja2dyb3VuZDogdXJsKC4uLy4uLy4uLy4uL2Fzc2V0cy9pbWcvYnV0dG9uL3RhZ0VkaXRfNDBfNDBfQWxsLnBuZykgbm8tcmVwZWF0IHJpZ2h0IHRvcDsgfVxyXG5cclxuLnRhZ0VkaXQ6YWN0aXZlIHsgYmFja2dyb3VuZDogdXJsKC4uLy4uLy4uLy4uL2Fzc2V0cy9pbWcvYnV0dG9uL3RhZ0VkaXRfNDBfNDBfQWxsLnBuZykgbm8tcmVwZWF0IGxlZnQgYm90dG9tOyB9XHJcblxyXG4udGFnRWRpdDpkaXNhYmxlZCB7IGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL2J1dHRvbi90YWdFZGl0XzQwXzQwX0FsbC5wbmcpIG5vLXJlcGVhdCByaWdodCBib3R0b207IH1cclxuXHJcbi5kZWxldGVQcmV2ZW50IHsgYmFja2dyb3VuZDogdXJsKC4uLy4uLy4uLy4uL2Fzc2V0cy9pbWcvYnV0dG9uL2RlbGV0ZVByZXZlbnRfNDBfNDBfQWxsLnBuZykgbm8tcmVwZWF0IGxlZnQgdG9wOyB9XHJcblxyXG4uZGVsZXRlUHJldmVudDpob3ZlciB7IGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL2J1dHRvbi9kZWxldGVQcmV2ZW50XzQwXzQwX0FsbC5wbmcpIG5vLXJlcGVhdCByaWdodCB0b3A7IH1cclxuXHJcbi5kZWxldGVQcmV2ZW50OmFjdGl2ZSB7IGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL2J1dHRvbi9kZWxldGVQcmV2ZW50XzQwXzQwX0FsbC5wbmcpIG5vLXJlcGVhdCBsZWZ0IGJvdHRvbTsgfVxyXG5cclxuLmRlbGV0ZVByZXZlbnQ6ZGlzYWJsZWQgeyBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vZGVsZXRlUHJldmVudF80MF80MF9BbGwucG5nKSBuby1yZXBlYXQgcmlnaHQgYm90dG9tOyB9XHJcblxyXG4uZGVsZXRlQWxsb3cgeyBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vZGVsZXRlQWxsb3dfNDBfNDBfQWxsLnBuZykgbm8tcmVwZWF0IGxlZnQgdG9wOyB9XHJcblxyXG4uZGVsZXRlQWxsb3c6aG92ZXIgeyBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vZGVsZXRlQWxsb3dfNDBfNDBfQWxsLnBuZykgbm8tcmVwZWF0IHJpZ2h0IHRvcDsgfVxyXG5cclxuLmRlbGV0ZUFsbG93OmFjdGl2ZSB7IGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL2J1dHRvbi9kZWxldGVBbGxvd180MF80MF9BbGwucG5nKSBuby1yZXBlYXQgbGVmdCBib3R0b207IH1cclxuXHJcbi5kZWxldGVBbGxvdzpkaXNhYmxlZCB7IGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL2J1dHRvbi9kZWxldGVBbGxvd180MF80MF9BbGwucG5nKSBuby1yZXBlYXQgcmlnaHQgYm90dG9tOyB9XHJcblxyXG4uZGVsZXRlIHsgYmFja2dyb3VuZDogdXJsKC4uLy4uLy4uLy4uL2Fzc2V0cy9pbWcvYnV0dG9uL2RlbGV0ZV80MF80MF9BbGwucG5nKSBuby1yZXBlYXQgbGVmdCB0b3A7IH1cclxuXHJcbi5kZWxldGU6aG92ZXIgeyBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vZGVsZXRlXzQwXzQwX0FsbC5wbmcpIG5vLXJlcGVhdCByaWdodCB0b3A7IH1cclxuXHJcbi5kZWxldGU6YWN0aXZlIHsgYmFja2dyb3VuZDogdXJsKC4uLy4uLy4uLy4uL2Fzc2V0cy9pbWcvYnV0dG9uL2RlbGV0ZV80MF80MF9BbGwucG5nKSBuby1yZXBlYXQgbGVmdCBib3R0b207IH1cclxuXHJcbi5kZWxldGU6ZGlzYWJsZWQgeyBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vZGVsZXRlXzQwXzQwX0FsbC5wbmcpIG5vLXJlcGVhdCByaWdodCBib3R0b207IH1cclxuXHJcbi5pbXBvcnQgeyBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vaW1wb3J0XzQwXzQwX0FsbC5wbmcpIG5vLXJlcGVhdCBsZWZ0IHRvcDsgfVxyXG5cclxuLmltcG9ydDpob3ZlciB7IGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL2J1dHRvbi9pbXBvcnRfNDBfNDBfQWxsLnBuZykgbm8tcmVwZWF0IHJpZ2h0IHRvcDsgfVxyXG5cclxuLmltcG9ydDphY3RpdmUgeyBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vaW1wb3J0XzQwXzQwX0FsbC5wbmcpIG5vLXJlcGVhdCBsZWZ0IGJvdHRvbTsgfVxyXG5cclxuLmltcG9ydDpkaXNhYmxlZCB7IGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL2J1dHRvbi9pbXBvcnRfNDBfNDBfQWxsLnBuZykgbm8tcmVwZWF0IHJpZ2h0IGJvdHRvbTsgfVxyXG4iXX0= */\"","module.exports = \"<table>\\r\\n    <tr>\\r\\n        <td>\\r\\n            <button class=\\\"loadImage\\\" role=\\\"button\\\" title=\\\"Load Image\\\" (click)=\\\"onLoadImage()\\\" [disabled]=\\\"worklistService.bDisableLoadImageButton\\\"></button>\\r\\n        </td>\\r\\n        <td>\\r\\n            <button class=\\\"loadKeyImage\\\" role=\\\"button\\\" title=\\\"Load Key Image\\\" (click)=\\\"onLoadKeyImage()\\\" [disabled]=\\\"worklistService.bDisableLoadKeyImage\\\"></button>\\r\\n        </td>\\r\\n        <td>\\r\\n            <button class=\\\"setRead\\\" role=\\\"button\\\" title=\\\"Set Read\\\" (click)=\\\"onSetRead()\\\" [disabled]=\\\"worklistService.bDisableSetReadBtn\\\"></button>\\r\\n        </td>\\r\\n        <td>\\r\\n            <button class=\\\"setUnread\\\" role=\\\"button\\\" title=\\\"Set Unread\\\" (click)=\\\"onSetUnread()\\\" [disabled]=\\\"worklistService.bDisableSetUnreadBtn\\\"></button>\\r\\n        </td>\\r\\n        <td>\\r\\n            <button class=\\\"changeImageSeriesOrder\\\" role=\\\"button\\\" title=\\\"Change Image Series Order\\\" (click)=\\\"onChangeImageSeriesOrder()\\\" [disabled]=\\\"worklistService.bDisableChangeImageSeriesOrder\\\"></button>\\r\\n        </td>\\r\\n        <td>\\r\\n            <button class=\\\"reassign\\\" role=\\\"button\\\" title=\\\"Reassign\\\" (click)=\\\"onReassign()\\\" [disabled]=\\\"worklistService.bDisableReassign\\\"></button>\\r\\n        </td>\\r\\n        <td>\\r\\n            <button class=\\\"transfer\\\" role=\\\"button\\\" title=\\\"Export/Transfer\\\" (click)=\\\"onTransfer()\\\" [disabled]=\\\"worklistService.bDisableTransfer\\\"></button>\\r\\n        </td>\\r\\n        <td>\\r\\n            <button class=\\\"tagEdit\\\" role=\\\"button\\\" title=\\\"Patient Edit\\\" (click)=\\\"onTagEdit()\\\" [disabled]=\\\"worklistService.bDisableTagEdit\\\"></button>\\r\\n        </td>\\r\\n        <td>\\r\\n            <button class=\\\"deletePrevent\\\" role=\\\"button\\\" title=\\\"Prevent Delete Study\\\" (click)=\\\"onDeletePrevent()\\\" [disabled]=\\\"worklistService.bDisableDeletePreventBtn\\\"></button>\\r\\n        </td>\\r\\n        <td>\\r\\n            <button class=\\\"deleteAllow\\\" role=\\\"button\\\" title=\\\"Allow Delete Study\\\" (click)=\\\"onDeleteAllow()\\\" [disabled]=\\\"worklistService.bDisableDeleteAllowBtn\\\"></button>\\r\\n        </td>\\r\\n        <td>\\r\\n            <button class=\\\"delete\\\" role=\\\"button\\\" title=\\\"Delete Study\\\" (click)=\\\"onDeleteStudy()\\\" [disabled]=\\\"worklistService.bDisableDeleteStudy\\\"></button>\\r\\n        </td>\\r\\n        <td>\\r\\n            <button class=\\\"import\\\" role=\\\"button\\\" title=\\\"Import\\\" (click)=\\\"onImport()\\\"></button>\\r\\n        </td>\\r\\n    </tr>\\r\\n</table>\\r\\n\"","import { Component, OnInit } from \"@angular/core\";\r\nimport { WorklistService } from \"../../../services/worklist.service\";\r\nimport { DialogService } from \"../../../services/dialog.service\";\r\nimport { MessageBoxType, MessageBoxContent, DialogResult } from \"../../../models/messageBox\";\r\nimport { PatientEditComponent } from \"../worklist/patient-edit/patient-edit.component\";\r\nimport { ExportStudyComponent } from \"../worklist/export-study/export-study.component\";\r\n\r\n@Component({\r\n    selector: \"app-operate-toolbar\",\r\n    templateUrl: \"./operate-toolbar.component.html\",\r\n    styleUrls: [\"./operate-toolbar.component.css\"]\r\n})\r\nexport class OperateToolbarComponent implements OnInit {\r\n\r\n    disableLoadImageButton: boolean;\r\n\r\n    constructor(private worklistService: WorklistService, public dialogService: DialogService) {\r\n        this.disableLoadImageButton = false;\r\n    }\r\n\r\n    ngOnInit() {\r\n    }\r\n\r\n    onLoadImage() {\r\n        this.worklistService.onShowAllCheckedStudy();\r\n    }\r\n\r\n    onLoadKeyImage() {\r\n        this.worklistService.onLoadKeyImage();\r\n    }\r\n\r\n    onSetRead() {\r\n        this.worklistService.onSetRead();\r\n    }\r\n\r\n    onSetUnread() {\r\n        this.worklistService.onSetUnread();\r\n    }\r\n\r\n    onChangeImageSeriesOrder() {\r\n\r\n    }\r\n\r\n    onReassign() {\r\n\r\n    }\r\n\r\n    onTransfer() {\r\n        this.dialogService.showDialog(ExportStudyComponent, this.worklistService.checkedStudies).subscribe(\r\n            val => {\r\n                //this.getStudyDate(val);\r\n            }\r\n        );\r\n    }\r\n\r\n    onTagEdit() {\r\n        this.dialogService.showDialog(PatientEditComponent, this.worklistService.checkedSingleStudy).subscribe(\r\n            val => {\r\n                //this.getStudyDate(val);\r\n            }\r\n        );\r\n    }\r\n\r\n    onDeletePrevent() {\r\n        this.worklistService.onDeletePrevent();\r\n    }\r\n\r\n    onDeleteAllow() {\r\n        this.worklistService.onDeleteAllow();\r\n    }\r\n\r\n    onDeleteStudy() {\r\n\r\n        const content = new MessageBoxContent();\r\n        content.title = \"Deletion Reason\";\r\n        content.messageText = \"WARNING:The report of the deleted study cannot be restored.\";\r\n        content.messageType = MessageBoxType.Input;\r\n\r\n        this.dialogService.showMessageBox(content).subscribe(\r\n            val => this.getMessageBoxValue(val));\r\n    }\r\n\r\n    getMessageBoxValue(val) {\r\n        if (val.dialogResult == DialogResult.Ok) {\r\n            this.worklistService.onDeleteStudy(val.valueInput);\r\n        }\r\n    }\r\n\r\n    onImport() {\r\n\r\n    }\r\n}\r\n","module.exports = \".mat-dialog-container {\\r\\n    background-color: #555;\\r\\n    height: 250px;\\r\\n    padding: 2px 2px;\\r\\n    width: 250px;\\r\\n}\\r\\n\\r\\n.shortcut-header {\\r\\n    background-color: #555555;\\r\\n    border-radius: 3px;\\r\\n    color: white;\\r\\n    padding: 4px;\\r\\n    width: 100%;\\r\\n}\\r\\n\\r\\n.shortcut-header-button {\\r\\n    background-color: transparent;\\r\\n    border: none;\\r\\n    color: transparent;\\r\\n    outline: none;\\r\\n    padding: 4px;\\r\\n}\\r\\n\\r\\n.shortcut-header:hover { color: #F90; }\\r\\n\\r\\n.shortcut-header:hover .shortcut-header-button {\\r\\n    background-color: #444;\\r\\n    border: solid 1px #888;\\r\\n    border-radius: 2px;\\r\\n    color: #F90;\\r\\n    margin-top: -2px;\\r\\n}\\r\\n\\r\\n.shortcut-header:hover .shortcut-header-button:active { color: red; }\\r\\n\\r\\n.shortcut-item {\\r\\n    background-color: inherit;\\r\\n    border-radius: 3px;\\r\\n    color: white;\\r\\n    padding-bottom: 3px;\\r\\n    padding-left: 24px;\\r\\n    padding-top: 3px;\\r\\n    width: 100%;\\r\\n}\\r\\n\\r\\n.shortcut-name-button {\\r\\n    background-color: transparent;\\r\\n    border: none;\\r\\n    border-width: 0px;\\r\\n    color: inherit;\\r\\n    outline: none;\\r\\n}\\r\\n\\r\\n.shortcut-item:hover {\\r\\n    background-color: #999;\\r\\n    color: #ff9900;\\r\\n}\\r\\n\\r\\n.shortcut-item:hover .shortcut-close-button {\\r\\n    background-color: #666;\\r\\n    border: solid 1px #aaa;\\r\\n    border-radius: 2px;\\r\\n    color: #F90;\\r\\n    margin-right: 2px;\\r\\n    margin-top: -1px;\\r\\n}\\r\\n\\r\\n.shortcut-item:hover .shortcut-name-button:hover { color: red; }\\r\\n\\r\\n.shortcut-item:hover .shortcut-close-button:active { color: red; }\\r\\n\\r\\n.shortcut-close-button {\\r\\n    background-color: transparent;\\r\\n    border: none;\\r\\n    color: transparent;\\r\\n    outline: none;\\r\\n    padding: 4px;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy93b3JrbGlzdC1zaGVsbC9xdWVyeS1zaG9ydGN1dC9xdWVyeS1zaG9ydGN1dC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksc0JBQXNCO0lBQ3RCLGFBQWE7SUFDYixnQkFBZ0I7SUFDaEIsWUFBWTtBQUNoQjs7QUFFQTtJQUNJLHlCQUF5QjtJQUN6QixrQkFBa0I7SUFDbEIsWUFBWTtJQUNaLFlBQVk7SUFDWixXQUFXO0FBQ2Y7O0FBRUE7SUFDSSw2QkFBNkI7SUFDN0IsWUFBWTtJQUNaLGtCQUFrQjtJQUNsQixhQUFhO0lBQ2IsWUFBWTtBQUNoQjs7QUFFQSx5QkFBeUIsV0FBVyxFQUFFOztBQUV0QztJQUNJLHNCQUFzQjtJQUN0QixzQkFBc0I7SUFDdEIsa0JBQWtCO0lBQ2xCLFdBQVc7SUFDWCxnQkFBZ0I7QUFDcEI7O0FBRUEsd0RBQXdELFVBQVUsRUFBRTs7QUFFcEU7SUFDSSx5QkFBeUI7SUFDekIsa0JBQWtCO0lBQ2xCLFlBQVk7SUFDWixtQkFBbUI7SUFDbkIsa0JBQWtCO0lBQ2xCLGdCQUFnQjtJQUNoQixXQUFXO0FBQ2Y7O0FBRUE7SUFDSSw2QkFBNkI7SUFDN0IsWUFBWTtJQUNaLGlCQUFpQjtJQUNqQixjQUFjO0lBQ2QsYUFBYTtBQUNqQjs7QUFFQTtJQUNJLHNCQUFzQjtJQUN0QixjQUFjO0FBQ2xCOztBQUVBO0lBQ0ksc0JBQXNCO0lBQ3RCLHNCQUFzQjtJQUN0QixrQkFBa0I7SUFDbEIsV0FBVztJQUNYLGlCQUFpQjtJQUNqQixnQkFBZ0I7QUFDcEI7O0FBRUEsbURBQW1ELFVBQVUsRUFBRTs7QUFFL0QscURBQXFELFVBQVUsRUFBRTs7QUFFakU7SUFDSSw2QkFBNkI7SUFDN0IsWUFBWTtJQUNaLGtCQUFrQjtJQUNsQixhQUFhO0lBQ2IsWUFBWTtBQUNoQiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvd29ya2xpc3Qtc2hlbGwvcXVlcnktc2hvcnRjdXQvcXVlcnktc2hvcnRjdXQuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5tYXQtZGlhbG9nLWNvbnRhaW5lciB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNTU1O1xyXG4gICAgaGVpZ2h0OiAyNTBweDtcclxuICAgIHBhZGRpbmc6IDJweCAycHg7XHJcbiAgICB3aWR0aDogMjUwcHg7XHJcbn1cclxuXHJcbi5zaG9ydGN1dC1oZWFkZXIge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzU1NTU1NTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDNweDtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIHBhZGRpbmc6IDRweDtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG59XHJcblxyXG4uc2hvcnRjdXQtaGVhZGVyLWJ1dHRvbiB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcclxuICAgIGJvcmRlcjogbm9uZTtcclxuICAgIGNvbG9yOiB0cmFuc3BhcmVudDtcclxuICAgIG91dGxpbmU6IG5vbmU7XHJcbiAgICBwYWRkaW5nOiA0cHg7XHJcbn1cclxuXHJcbi5zaG9ydGN1dC1oZWFkZXI6aG92ZXIgeyBjb2xvcjogI0Y5MDsgfVxyXG5cclxuLnNob3J0Y3V0LWhlYWRlcjpob3ZlciAuc2hvcnRjdXQtaGVhZGVyLWJ1dHRvbiB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDQ0O1xyXG4gICAgYm9yZGVyOiBzb2xpZCAxcHggIzg4ODtcclxuICAgIGJvcmRlci1yYWRpdXM6IDJweDtcclxuICAgIGNvbG9yOiAjRjkwO1xyXG4gICAgbWFyZ2luLXRvcDogLTJweDtcclxufVxyXG5cclxuLnNob3J0Y3V0LWhlYWRlcjpob3ZlciAuc2hvcnRjdXQtaGVhZGVyLWJ1dHRvbjphY3RpdmUgeyBjb2xvcjogcmVkOyB9XHJcblxyXG4uc2hvcnRjdXQtaXRlbSB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBpbmhlcml0O1xyXG4gICAgYm9yZGVyLXJhZGl1czogM3B4O1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gICAgcGFkZGluZy1ib3R0b206IDNweDtcclxuICAgIHBhZGRpbmctbGVmdDogMjRweDtcclxuICAgIHBhZGRpbmctdG9wOiAzcHg7XHJcbiAgICB3aWR0aDogMTAwJTtcclxufVxyXG5cclxuLnNob3J0Y3V0LW5hbWUtYnV0dG9uIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgYm9yZGVyLXdpZHRoOiAwcHg7XHJcbiAgICBjb2xvcjogaW5oZXJpdDtcclxuICAgIG91dGxpbmU6IG5vbmU7XHJcbn1cclxuXHJcbi5zaG9ydGN1dC1pdGVtOmhvdmVyIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICM5OTk7XHJcbiAgICBjb2xvcjogI2ZmOTkwMDtcclxufVxyXG5cclxuLnNob3J0Y3V0LWl0ZW06aG92ZXIgLnNob3J0Y3V0LWNsb3NlLWJ1dHRvbiB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNjY2O1xyXG4gICAgYm9yZGVyOiBzb2xpZCAxcHggI2FhYTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDJweDtcclxuICAgIGNvbG9yOiAjRjkwO1xyXG4gICAgbWFyZ2luLXJpZ2h0OiAycHg7XHJcbiAgICBtYXJnaW4tdG9wOiAtMXB4O1xyXG59XHJcblxyXG4uc2hvcnRjdXQtaXRlbTpob3ZlciAuc2hvcnRjdXQtbmFtZS1idXR0b246aG92ZXIgeyBjb2xvcjogcmVkOyB9XHJcblxyXG4uc2hvcnRjdXQtaXRlbTpob3ZlciAuc2hvcnRjdXQtY2xvc2UtYnV0dG9uOmFjdGl2ZSB7IGNvbG9yOiByZWQ7IH1cclxuXHJcbi5zaG9ydGN1dC1jbG9zZS1idXR0b24ge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XHJcbiAgICBib3JkZXI6IG5vbmU7XHJcbiAgICBjb2xvcjogdHJhbnNwYXJlbnQ7XHJcbiAgICBvdXRsaW5lOiBub25lO1xyXG4gICAgcGFkZGluZzogNHB4O1xyXG59XHJcbiJdfQ== */\"","module.exports = \"<div class=\\\"container-fluid\\\">\\r\\n    <div class=\\\"row\\\">\\r\\n        <div class=\\\"shortcut-header\\\">\\r\\n            <i class=\\\"glyphicon glyphicon-hdd\\\"></i>\\r\\n            <button class=\\\"shortcut-name-button\\\" style=\\\"cursor: default\\\">Local Data Source</button>\\r\\n            <button class=\\\"pull-right glyphicon glyphicon-refresh shortcut-header-button\\\"\\r\\n                    title=\\\"Refresh shortcut\\\" (click)=\\\"onRefreshShortcut()\\\">\\r\\n            </button>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"row\\\">\\r\\n        <div class=\\\"shortcut-item\\\">\\r\\n            <i class=\\\"glyphicon glyphicon-list-alt\\\"></i>\\r\\n            <button class=\\\"shortcut-name-button\\\" (click)=\\\"onQueryAllStudies()\\\">All</button>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"row\\\">\\r\\n        <div class=\\\"shortcut-item\\\">\\r\\n            <i class=\\\"glyphicon glyphicon-star-empty\\\"></i>\\r\\n            <button class=\\\"shortcut-name-button\\\" (click)=\\\"onQueryTodayStudy()\\\">Today</button>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div *ngFor=\\\"let shortcut of allShortcuts\\\" class=\\\"row\\\">\\r\\n        <div class=\\\"shortcut-item\\\">\\r\\n            <i class=\\\"glyphicon glyphicon-search\\\"></i>\\r\\n            <button class=\\\"shortcut-name-button\\\" (click)=\\\"onQuery(shortcut)\\\">{{shortcut.name}}</button>\\r\\n            <button class=\\\"pull-right glyphicon glyphicon-remove shortcut-close-button\\\"\\r\\n                    title=\\\"Delete shortcut\\\" (click)=\\\"onDeleteShortcut(shortcut)\\\">\\r\\n            </button>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div *ngFor=\\\"let shortcut of worklistService.shortcuts\\\" class=\\\"row\\\">\\r\\n        <div class=\\\"shortcut-item\\\">\\r\\n            <i class=\\\"glyphicon glyphicon-search\\\"></i>\\r\\n            <button class=\\\"shortcut-name-button\\\" (click)=\\\"onQuery(shortcut)\\\">{{shortcut.name}}</button>\\r\\n            <button class=\\\"pull-right glyphicon glyphicon-remove shortcut-close-button\\\"\\r\\n                    title=\\\"Delete shortcut\\\" (click)=\\\"onDeleteShortcut(shortcut)\\\">\\r\\n            </button>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"row\\\">\\r\\n        <div class=\\\"shortcut-header\\\">\\r\\n            <i class=\\\"glyphicon glyphicon-cloud\\\"></i>\\r\\n            <button class=\\\"shortcut-name-button\\\" style=\\\"cursor: default\\\">Third-Party Pacs</button>\\r\\n            <button class=\\\"pull-right glyphicon glyphicon-refresh shortcut-header-button\\\"\\r\\n                    title=\\\"Refresh third-party Pacs\\\" (click)=\\\"onRefreshThirdpartyPacs()\\\">\\r\\n            </button>\\r\\n            <button class=\\\"pull-right glyphicon glyphicon-plus shortcut-header-button\\\"\\r\\n                    title=\\\"Register a new third-party Pacs\\\" (click)=\\\"onRefreshThirdpartyPacs()\\\">\\r\\n            </button>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\"","import { Component, OnInit } from \"@angular/core\";\r\n\r\n\r\nimport { Shortcut } from \"../../../models/shortcut\";\r\nimport { WorklistService } from \"../../../services/worklist.service\";\r\nimport { DialogService } from \"../../../services/dialog.service\";\r\nimport { MessageBoxType, MessageBoxContent, DialogResult } from \"../../../models/messageBox\";\r\n\r\n@Component({\r\n    selector: \"app-query-shortcut\",\r\n    templateUrl: \"./query-shortcut.component.html\",\r\n    styleUrls: [\"./query-shortcut.component.css\"]\r\n})\r\nexport class QueryShortcutComponent implements OnInit {\r\n\r\n    allShortcuts: Shortcut[] = [];\r\n\r\n    constructor(private worklistService: WorklistService, private dialogService: DialogService) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.onRefreshShortcut();\r\n    }\r\n\r\n    onQuery(shortcut: Shortcut): void {\r\n        this.worklistService.onQueryStudyByShortcut(shortcut);\r\n    }\r\n\r\n    onQueryTodayStudy(): void {\r\n        this.worklistService.onQueryTodayStudy();\r\n    }\r\n\r\n    onQueryAllStudies(): void {\r\n        this.worklistService.onQueryAllStudies();\r\n    }\r\n\r\n    onDeleteShortcut(shortcut: Shortcut): void {\r\n\r\n        const content = new MessageBoxContent();\r\n        content.title = \"Confirm Delete\";\r\n        content.messageText = \"Are you sure to delete this shortcut?\";\r\n        content.messageType = MessageBoxType.Question;\r\n\r\n        this.dialogService.showMessageBox(content).subscribe(\r\n            val => this.onConfirmDeleteCallback(val, shortcut));\r\n    }\r\n\r\n    onConfirmDeleteCallback(val: any, shortcut: Shortcut) {\r\n        if (val.dialogResult === DialogResult.Yes) {\r\n            this.worklistService.onDeleteShortcut(shortcut);\r\n\r\n            //alert('delete shortcut ' + shortcut.name);\r\n        }\r\n    }\r\n\r\n    onRefreshShortcut() {\r\n        // this.databaseService.getShortcuts().subscribe(shortcuts => this.allShortcuts = shortcuts);\r\n    }\r\n        \r\n    onRefreshThirdpartyPacs() {\r\n\r\n    }\r\n}\r\n","module.exports = \".query, .queryClear, .querySave {\\r\\n    border: none;\\r\\n    height: 30px;\\r\\n    outline: none;\\r\\n    width: 100px;\\r\\n}\\r\\n\\r\\n.query { background: url('Query_All.png') no-repeat left top; }\\r\\n\\r\\n.query:hover { background: url('Query_All.png') no-repeat right top; }\\r\\n\\r\\n.query:active { background: url('Query_All.png') no-repeat right bottom; }\\r\\n\\r\\n.queryClear { background: url('ClearCondition_All.png') no-repeat left top; }\\r\\n\\r\\n.queryClear:hover { background: url('ClearCondition_All.png') no-repeat right top; }\\r\\n\\r\\n.queryClear:active { background: url('ClearCondition_All.png') no-repeat right bottom; }\\r\\n\\r\\n.querySave { background: url('Query_Save.png') no-repeat left top; }\\r\\n\\r\\n.querySave:hover { background: url('Query_Save.png') no-repeat right top; }\\r\\n\\r\\n.querySave:active { background: url('Query_Save.png') no-repeat right bottom; }\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy93b3JrbGlzdC1zaGVsbC9xdWVyeS10b29sYmFyL3F1ZXJ5LXRvb2xiYXIuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLFlBQVk7SUFDWixZQUFZO0lBQ1osYUFBYTtJQUNiLFlBQVk7QUFDaEI7O0FBRUEsU0FBUyxtREFBK0UsRUFBRTs7QUFFMUYsZUFBZSxvREFBZ0YsRUFBRTs7QUFFakcsZ0JBQWdCLHVEQUFtRixFQUFFOztBQUVyRyxjQUFjLDREQUF3RixFQUFFOztBQUV4RyxvQkFBb0IsNkRBQXlGLEVBQUU7O0FBRS9HLHFCQUFxQixnRUFBNEYsRUFBRTs7QUFFbkgsYUFBYSxvREFBZ0YsRUFBRTs7QUFFL0YsbUJBQW1CLHFEQUFpRixFQUFFOztBQUV0RyxvQkFBb0Isd0RBQW9GLEVBQUUiLCJmaWxlIjoic3JjL2FwcC9jb21wb25lbnRzL3dvcmtsaXN0LXNoZWxsL3F1ZXJ5LXRvb2xiYXIvcXVlcnktdG9vbGJhci5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnF1ZXJ5LCAucXVlcnlDbGVhciwgLnF1ZXJ5U2F2ZSB7XHJcbiAgICBib3JkZXI6IG5vbmU7XHJcbiAgICBoZWlnaHQ6IDMwcHg7XHJcbiAgICBvdXRsaW5lOiBub25lO1xyXG4gICAgd2lkdGg6IDEwMHB4O1xyXG59XHJcblxyXG4ucXVlcnkgeyBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vUXVlcnlfQWxsLnBuZykgbm8tcmVwZWF0IGxlZnQgdG9wOyB9XHJcblxyXG4ucXVlcnk6aG92ZXIgeyBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vUXVlcnlfQWxsLnBuZykgbm8tcmVwZWF0IHJpZ2h0IHRvcDsgfVxyXG5cclxuLnF1ZXJ5OmFjdGl2ZSB7IGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL2J1dHRvbi9RdWVyeV9BbGwucG5nKSBuby1yZXBlYXQgcmlnaHQgYm90dG9tOyB9XHJcblxyXG4ucXVlcnlDbGVhciB7IGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL2J1dHRvbi9DbGVhckNvbmRpdGlvbl9BbGwucG5nKSBuby1yZXBlYXQgbGVmdCB0b3A7IH1cclxuXHJcbi5xdWVyeUNsZWFyOmhvdmVyIHsgYmFja2dyb3VuZDogdXJsKC4uLy4uLy4uLy4uL2Fzc2V0cy9pbWcvYnV0dG9uL0NsZWFyQ29uZGl0aW9uX0FsbC5wbmcpIG5vLXJlcGVhdCByaWdodCB0b3A7IH1cclxuXHJcbi5xdWVyeUNsZWFyOmFjdGl2ZSB7IGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL2J1dHRvbi9DbGVhckNvbmRpdGlvbl9BbGwucG5nKSBuby1yZXBlYXQgcmlnaHQgYm90dG9tOyB9XHJcblxyXG4ucXVlcnlTYXZlIHsgYmFja2dyb3VuZDogdXJsKC4uLy4uLy4uLy4uL2Fzc2V0cy9pbWcvYnV0dG9uL1F1ZXJ5X1NhdmUucG5nKSBuby1yZXBlYXQgbGVmdCB0b3A7IH1cclxuXHJcbi5xdWVyeVNhdmU6aG92ZXIgeyBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vUXVlcnlfU2F2ZS5wbmcpIG5vLXJlcGVhdCByaWdodCB0b3A7IH1cclxuXHJcbi5xdWVyeVNhdmU6YWN0aXZlIHsgYmFja2dyb3VuZDogdXJsKC4uLy4uLy4uLy4uL2Fzc2V0cy9pbWcvYnV0dG9uL1F1ZXJ5X1NhdmUucG5nKSBuby1yZXBlYXQgcmlnaHQgYm90dG9tOyB9Il19 */\"","module.exports = \"<table>\\r\\n    <tr>\\r\\n        <td>\\r\\n            <button class=\\\"query\\\" role=\\\"button\\\" title=\\\"Query\\\" (click)=\\\"onQuery()\\\"></button>\\r\\n        </td>\\r\\n        <td>\\r\\n            <button class=\\\"queryClear\\\" role=\\\"button\\\" title=\\\"Clear Condition\\\" (click)=\\\"onClearCondition()\\\"></button>\\r\\n        </td>\\r\\n        <td>\\r\\n            <button class=\\\"querySave\\\" role=\\\"button\\\" title=\\\"Save Shortcut\\\" (click)=\\\"onSaveShortcut()\\\"></button>\\r\\n        </td>\\r\\n\\r\\n        <td style=\\\"padding-left: 6px\\\">\\r\\n            <div class=\\\"checkbox\\\">\\r\\n                <label>\\r\\n                    <input type=\\\"checkbox\\\" [(ngModel)]=\\\"worklistService.showHistoryStudies\\\"/>Show History Study\\r\\n                </label>\\r\\n            </div>\\r\\n        </td>\\r\\n        <td style=\\\"padding-left: 6px\\\">\\r\\n            <div class=\\\"checkbox\\\">\\r\\n                <label>\\r\\n                    <input type=\\\"checkbox\\\" [ngModel]=\\\"worklistService.isUsingLocalTestData()\\\"(click)=\\\"onChangeDataSource($event)\\\"/>Using Local Test Data\\r\\n                </label>\\r\\n            </div>\\r\\n        </td>\\r\\n    </tr>\\r\\n</table>\\r\\n\"","import { Component, OnInit } from \"@angular/core\";\r\nimport { WorklistService } from \"../../../services/worklist.service\";\r\nimport { DataSource } from \"../../../models/shortcut\";\r\nimport { DialogService } from \"../../../services/dialog.service\";\r\nimport { MessageBoxType, MessageBoxContent, DialogResult } from \"../../../models/messageBox\";\r\n\r\n@Component({\r\n    selector: \"app-query-toolbar\",\r\n    templateUrl: \"./query-toolbar.component.html\",\r\n    styleUrls: [\"./query-toolbar.component.css\"]\r\n})\r\nexport class QueryToolbarComponent implements OnInit {\r\n\r\n    constructor(public worklistService: WorklistService, private dialogService: DialogService) {}\r\n\r\n    ngOnInit() {\r\n    }\r\n\r\n    onChangeDataSource(event) {\r\n        this.worklistService.setDataSource(event.target.checked ? DataSource.LocalTestData : DataSource.MiniPacs);\r\n    }\r\n\r\n  onQuery() {\r\n    this.worklistService.onQueryStudies(1);\r\n  }\r\n\r\n    onClearCondition() {\r\n        this.worklistService.onCleanCondition();\r\n    }\r\n\r\n    onSaveShortcut() {\r\n        const content = new MessageBoxContent();\r\n        content.title = \"Add Shortcut\";\r\n        content.messageText = \"Please input the name of the shortcut:\";\r\n        content.messageType = MessageBoxType.Input;\r\n\r\n        this.dialogService.showMessageBox(content).subscribe(\r\n            val => this.onSaveShortcutCallback(val));\r\n    }\r\n\r\n    onSaveShortcutCallback(val: any) {\r\n        if (val.dialogResult === DialogResult.Ok) {\r\n            //const shortcut = new Shortcut();\r\n            //shortcut.name = \"test\";\r\n            this.worklistService.onSaveShortcut(val.valueInput);\r\n        }\r\n    }\r\n}\r\n","module.exports = \"<div [style.visibility]=\\\"hideMe? 'hidden' : 'visible'\\\" id=\\\"divContainer\\\" class=\\\"sp_panel-container\\\">\\r\\n\\r\\n    <div class=\\\"sp_panel-left\\\">\\r\\n        <app-query-shortcut></app-query-shortcut>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"sp_splitter\\\">\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"sp_panel-right\\\">\\r\\n        <div class=\\\"studyQueryToolbar\\\">\\r\\n            <app-query-toolbar></app-query-toolbar>\\r\\n        </div>\\r\\n\\r\\n        <div id=\\\"div-scroll\\\">\\r\\n            <app-worklist></app-worklist>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"studyOpertionToolbar\\\">\\r\\n            <app-operate-toolbar></app-operate-toolbar>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\"","module.exports = \"/*@black: #000;\\n@orange: orange;\\n@gray: #555;\\n@silver: #aaa;\\n@white: #fff;*/\\n/*.theme-dark {\\n    @background-color : @black;\\n    @underline-color : @orange;\\n    @border-color : @silver;\\n    @container-background-color : @gray;\\n    @disable-color : @gray;\\n    @font-color : @white;\\n    .change-dark(@background-color);\\n}\\n\\n\\n.theme-light {\\n    @background-color : @white;\\n    @underline-color : @orange;\\n    @border-color : @white;\\n    @disable-color : @white;\\n    @container-background-color : @white;\\n    @font-color: @black;\\n    .change-dark(@background-color);\\n}*/\\n#div-scroll {\\n  height: 100%;\\n  overflow: auto;\\n  width: 100%;\\n}\\n#div-scroll::-webkit-scrollbar {\\n  background-color: #333;\\n  width: 12px;\\n}\\n#div-scroll::-webkit-scrollbar-thumb {\\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\\n  background-color: #555;\\n  border-radius: 10px;\\n}\\n#div-scroll::-webkit-scrollbar-corner {\\n  background-color: dimgray;\\n}\\n#divContainer {\\n  border-bottom: 2px solid #666;\\n  bottom: 0px;\\n  left: 0px;\\n  position: absolute;\\n  right: 0px;\\n  top: 40px;\\n}\\n.studyQueryToolbar {\\n  background-color: #000;\\n  /*color: #F5F5F5;*/\\n  display: block;\\n  height: 40px;\\n  margin: 0 auto;\\n  padding: 3px;\\n  width: 100%;\\n}\\n.studyOpertionToolbar {\\n  background-color: #000;\\n  border-bottom: 2px solid #333;\\n  border-top: 1px solid #555;\\n  bottom: 0;\\n  /*color: #F5F5F5;*/\\n  display: block;\\n  height: 48px;\\n  margin: 0 auto;\\n  padding: 4px;\\n  position: fixed;\\n  width: 100%;\\n}\\n#panelStudyDash {\\n  background-color: #000;\\n  border: none;\\n  margin: 0px;\\n  padding: 5px 10px;\\n  visibility: visible;\\n}\\n#panelStudyDash button {\\n  border: none;\\n  height: 30px;\\n  outline: none;\\n  width: 100px;\\n}\\n#panelStudyDash .save-query {\\n  cursor: pointer;\\n  float: right;\\n}\\n#panelStudyDash .checkbox {\\n  margin-left: 5px;\\n  margin-right: 5px;\\n}\\n#panelStudyDash #statusLabel {\\n  margin: 0px;\\n}\\n#divStudies {\\n  margin-bottom: 0px;\\n  min-height: 200px;\\n  position: static;\\n  width: 100%;\\n}\\n/*#divStudies::-webkit-scrollbar{\\n    width:16px;\\n    background-color:black;\\n}\\n\\n#divStudies::-webkit-scrollbar-thumb{\\n    background-color:#535353;\\n    border-radius: 10px;\\n}*/\\n@media (min-width: 768px) {\\n  #panelStudyDash .checkbox {\\n    top: -2px;\\n  }\\n  #panelStudyDash .checkbox label input {\\n    top: 2px;\\n  }\\n}\\n@media (max-width: 768px) {\\n  #divStudies {\\n    border: none;\\n    left: 1px;\\n    position: absolute;\\n    right: 1px;\\n    top: 42px;\\n    visibility: visible;\\n  }\\n  #panelStudyDash {\\n    left: 1px;\\n    padding: 5px 2px;\\n    position: absolute;\\n    right: 1px;\\n    visibility: visible;\\n  }\\n  #panelStudyDash .form-group,\\n  .checkbox,\\n  button {\\n    display: inline-block;\\n    margin: 0px;\\n  }\\n  #panelStudyDash #statusLabel {\\n    display: none;\\n  }\\n  #panelStudyDash .save-query {\\n    display: none;\\n  }\\n  #panelStudyDash .checkbox {\\n    margin-left: 5px;\\n    margin-right: 5px;\\n    top: -10px;\\n  }\\n  .sp_panel-container,\\n  .sp_panel-left,\\n  .sp_panel-right {\\n    visibility: hidden;\\n    z-index: 0;\\n  }\\n}\\n/* horizontal panel*/\\n.sp_panel-container {\\n  display: flex;\\n  flex-direction: row;\\n  overflow: hidden;\\n  /* avoid browser level touch actions */\\n  /*xtouch-action: none;*/\\n}\\n.sp_panel-left {\\n  /*min-width: 1px;*/\\n  /*white-space: nowrap;*/\\n  background: #000;\\n  display: flex;\\n  flex: 0 0 auto;\\n  flex-direction: column;\\n  min-height: 200px;\\n  overflow: hidden;\\n  /* only manually resize */\\n  padding: 4px;\\n  width: 200px;\\n  /*color: white;*/\\n}\\n.sp_splitter {\\n  background: url('split_vertical_collapse.jpg') center center no-repeat #555;\\n  cursor: pointer;\\n  flex: 0 0 auto;\\n  min-height: 200px;\\n  width: 8px;\\n}\\n.sp_panel-right {\\n  background: #000;\\n  color: #fff;\\n  min-height: 200px;\\n  min-width: 200px;\\n  padding-bottom: 100px;\\n  width: 100%;\\n}\\n/* vertical panel */\\n.sp_panel-container-vertical {\\n  display: flex;\\n  flex-direction: column;\\n  overflow: hidden;\\n}\\n.sp_panel-top {\\n  flex: 0 0 auto;\\n  /* only manually resize */\\n  /*padding: 10px;*/\\n  height: 70%;\\n  min-height: 300px;\\n  overflow-y: auto;\\n  width: 100%;\\n  /*white-space: nowrap;\\n    background: #838383;\\n    color: white;*/\\n  z-index: 0;\\n}\\n.sp_splitter-horizontal {\\n  background: url('split_horizontal_collapse.jpg') center center no-repeat #555;\\n  cursor: pointer;\\n  flex: 0 0 auto;\\n  height: 8px;\\n  z-index: 2;\\n}\\n.sp_panel-bottom {\\n  flex: 1 1 auto;\\n  /* resizable */\\n  /*padding: 10px;*/\\n  min-height: 200px;\\n  overflow-y: auto;\\n  /*background: #eee;*/\\n  z-index: 1;\\n}\\n.navbar-right {\\n  padding-right: 10px;\\n}\\n.sp_panel-right .table {\\n  white-space: nowrap;\\n}\\n#trStudiesHeader a {\\n  color: #000;\\n}\\n#trSeriesHeader a {\\n  color: #000;\\n}\\n#leftPanelTop {\\n  flex: 1 1 auto;\\n}\\n#leftPanelBottom {\\n  flex: 0 0 auto;\\n  height: 20%;\\n}\\n#formUploadImage input[type=file] {\\n  width: 600px;\\n}\\n#tblSeries td:nth-child(1) {\\n  text-align: center;\\n}\\n#tblSeries img {\\n  height: 50px;\\n  margin: auto;\\n  width: 50px;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy93b3JrbGlzdC1zaGVsbC93b3JrbGlzdC1zaGVsbC5jb21wb25lbnQubGVzcyIsInNyYy9hcHAvY29tcG9uZW50cy93b3JrbGlzdC1zaGVsbC9EOi9Xb3JrL0dpdC9JU0dpdFNlcnZlci9JbWFnZVZpZXdQYWNzL0NzaC5JbWFnZVN1aXRlLldlYkNsaWVudC9zcmMvYXBwL2NvbXBvbmVudHMvd29ya2xpc3Qtc2hlbGwvd29ya2xpc3Qtc2hlbGwuY29tcG9uZW50Lmxlc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Y0FJYztBQUNkOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0VBbUJFO0FDdEJGO0VBQ0ksWUFBQTtFQUNBLGNBQUE7RUFDQSxXQUFBO0FEd0JKO0FDckJBO0VBQ0ksc0JBQUE7RUFDQSxXQUFBO0FEdUJKO0FDcEJBO0VBQ0ksb0RBQUE7RUFDQSxzQkFBQTtFQUNBLG1CQUFBO0FEc0JKO0FDbkJBO0VBQXdDLHlCQUFBO0FEc0J4QztBQ3BCQTtFQUNJLDZCQUFBO0VBQ0EsV0FBQTtFQUNBLFNBQUE7RUFDQSxrQkFBQTtFQUNBLFVBQUE7RUFDQSxTQUFBO0FEc0JKO0FDbkJBO0VBQ0ksc0JBQUE7RURxQkYsa0JBQWtCO0VDbkJoQixjQUFBO0VBQ0EsWUFBQTtFQUNBLGNBQUE7RUFDQSxZQUFBO0VBQ0EsV0FBQTtBRHFCSjtBQ2xCQTtFQUNJLHNCQUFBO0VBQ0EsNkJBQUE7RUFDQSwwQkFBQTtFQUNBLFNBQUE7RURvQkYsa0JBQWtCO0VDbEJoQixjQUFBO0VBQ0EsWUFBQTtFQUNBLGNBQUE7RUFDQSxZQUFBO0VBQ0EsZUFBQTtFQUNBLFdBQUE7QURvQko7QUNqQkE7RUFDSSxzQkFBQTtFQUNBLFlBQUE7RUFDQSxXQUFBO0VBQ0EsaUJBQUE7RUFDQSxtQkFBQTtBRG1CSjtBQ2hCQTtFQUNJLFlBQUE7RUFDQSxZQUFBO0VBQ0EsYUFBQTtFQUNBLFlBQUE7QURrQko7QUNmQTtFQUNJLGVBQUE7RUFDQSxZQUFBO0FEaUJKO0FDZEE7RUFDSSxnQkFBQTtFQUNBLGlCQUFBO0FEZ0JKO0FDYkE7RUFBK0IsV0FBQTtBRGdCL0I7QUNkQTtFQUNJLGtCQUFBO0VBQ0EsaUJBQUE7RUFDQSxnQkFBQTtFQUNBLFdBQUE7QURnQko7QUFDQTs7Ozs7Ozs7RUFRRTtBQ1pGO0VBQ0k7SUFBNEIsU0FBQTtFRGU5QjtFQ2JFO0lBQXdDLFFBQUE7RURnQjFDO0FBQ0Y7QUNkQTtFQUNJO0lBQ0ksWUFBQTtJQUNBLFNBQUE7SUFDQSxrQkFBQTtJQUNBLFVBQUE7SUFDQSxTQUFBO0lBQ0EsbUJBQUE7RURnQk47RUNiRTtJQUNJLFNBQUE7SUFDQSxnQkFBQTtJQUNBLGtCQUFBO0lBQ0EsVUFBQTtJQUNBLG1CQUFBO0VEZU47RUNaRTs7O0lBQ0kscUJBQUE7SUFDQSxXQUFBO0VEZ0JOO0VDYkU7SUFBK0IsYUFBQTtFRGdCakM7RUNkRTtJQUE4QixhQUFBO0VEaUJoQztFQ2ZFO0lBQ0ksZ0JBQUE7SUFDQSxpQkFBQTtJQUNBLFVBQUE7RURpQk47RUNkRTs7O0lBQ0ksa0JBQUE7SUFDQSxVQUFBO0VEa0JOO0FBQ0Y7QUFDQSxvQkFBb0I7QUNkcEI7RUFDSSxhQUFBO0VBQ0EsbUJBQUE7RUFDQSxnQkFBQTtFRGdCRixzQ0FBc0M7RUFDdEMsdUJBQXVCO0FBQ3pCO0FDYkE7RURlRSxrQkFBa0I7RUFDbEIsdUJBQXVCO0VDYnJCLGdCQUFBO0VBQ0EsYUFBQTtFQUNBLGNBQUE7RUFDQSxzQkFBQTtFQUNBLGlCQUFBO0VBQ0EsZ0JBQUE7RURlRix5QkFBeUI7RUNidkIsWUFBQTtFQUNBLFlBQUE7RURlRixnQkFBZ0I7QUFDbEI7QUNaQTtFQUNJLDJFQUFBO0VBQ0EsZUFBQTtFQUNBLGNBQUE7RUFDQSxpQkFBQTtFQUNBLFVBQUE7QURjSjtBQ1hBO0VBQ0ksZ0JBQUE7RUFDQSxXQUFBO0VBQ0EsaUJBQUE7RUFDQSxnQkFBQTtFQUNBLHFCQUFBO0VBQ0EsV0FBQTtBRGFKO0FBQ0EsbUJBQW1CO0FDUm5CO0VBQ0ksYUFBQTtFQUNBLHNCQUFBO0VBQ0EsZ0JBQUE7QURVSjtBQ1BBO0VBQ0ksY0FBQTtFRFNGLHlCQUF5QjtFQUN6QixpQkFBaUI7RUNQZixXQUFBO0VBQ0EsaUJBQUE7RUFDQSxnQkFBQTtFQUNBLFdBQUE7RURTRjs7a0JBRWdCO0VDUGQsVUFBQTtBRFNKO0FDTkE7RUFDSSw2RUFBQTtFQUNBLGVBQUE7RUFDQSxjQUFBO0VBQ0EsV0FBQTtFQUNBLFVBQUE7QURRSjtBQ0xBO0VBQ0ksY0FBQTtFRE9GLGNBQWM7RUFDZCxpQkFBaUI7RUNMZixpQkFBQTtFQUNBLGdCQUFBO0VET0Ysb0JBQW9CO0VDTGxCLFVBQUE7QURPSjtBQ0pBO0VBQWdCLG1CQUFBO0FET2hCO0FDTEE7RUFBeUIsbUJBQUE7QURRekI7QUNOQTtFQUFxQixXQUFBO0FEU3JCO0FDUEE7RUFBb0IsV0FBQTtBRFVwQjtBQ1BBO0VBQWdCLGNBQUE7QURVaEI7QUNSQTtFQUNJLGNBQUE7RUFDQSxXQUFBO0FEVUo7QUNQQTtFQUFvQyxZQUFBO0FEVXBDO0FDUkE7RUFBNkIsa0JBQUE7QURXN0I7QUNUQTtFQUNJLFlBQUE7RUFDQSxZQUFBO0VBQ0EsV0FBQTtBRFdKIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50cy93b3JrbGlzdC1zaGVsbC93b3JrbGlzdC1zaGVsbC5jb21wb25lbnQubGVzcyIsInNvdXJjZXNDb250ZW50IjpbIi8qQGJsYWNrOiAjMDAwO1xuQG9yYW5nZTogb3JhbmdlO1xuQGdyYXk6ICM1NTU7XG5Ac2lsdmVyOiAjYWFhO1xuQHdoaXRlOiAjZmZmOyovXG4vKi50aGVtZS1kYXJrIHtcbiAgICBAYmFja2dyb3VuZC1jb2xvciA6IEBibGFjaztcbiAgICBAdW5kZXJsaW5lLWNvbG9yIDogQG9yYW5nZTtcbiAgICBAYm9yZGVyLWNvbG9yIDogQHNpbHZlcjtcbiAgICBAY29udGFpbmVyLWJhY2tncm91bmQtY29sb3IgOiBAZ3JheTtcbiAgICBAZGlzYWJsZS1jb2xvciA6IEBncmF5O1xuICAgIEBmb250LWNvbG9yIDogQHdoaXRlO1xuICAgIC5jaGFuZ2UtZGFyayhAYmFja2dyb3VuZC1jb2xvcik7XG59XG5cblxuLnRoZW1lLWxpZ2h0IHtcbiAgICBAYmFja2dyb3VuZC1jb2xvciA6IEB3aGl0ZTtcbiAgICBAdW5kZXJsaW5lLWNvbG9yIDogQG9yYW5nZTtcbiAgICBAYm9yZGVyLWNvbG9yIDogQHdoaXRlO1xuICAgIEBkaXNhYmxlLWNvbG9yIDogQHdoaXRlO1xuICAgIEBjb250YWluZXItYmFja2dyb3VuZC1jb2xvciA6IEB3aGl0ZTtcbiAgICBAZm9udC1jb2xvcjogQGJsYWNrO1xuICAgIC5jaGFuZ2UtZGFyayhAYmFja2dyb3VuZC1jb2xvcik7XG59Ki9cbiNkaXYtc2Nyb2xsIHtcbiAgaGVpZ2h0OiAxMDAlO1xuICBvdmVyZmxvdzogYXV0bztcbiAgd2lkdGg6IDEwMCU7XG59XG4jZGl2LXNjcm9sbDo6LXdlYmtpdC1zY3JvbGxiYXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzO1xuICB3aWR0aDogMTJweDtcbn1cbiNkaXYtc2Nyb2xsOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7XG4gIC13ZWJraXQtYm94LXNoYWRvdzogaW5zZXQgMCAwIDZweCByZ2JhKDAsIDAsIDAsIDAuMyk7XG4gIGJhY2tncm91bmQtY29sb3I6ICM1NTU7XG4gIGJvcmRlci1yYWRpdXM6IDEwcHg7XG59XG4jZGl2LXNjcm9sbDo6LXdlYmtpdC1zY3JvbGxiYXItY29ybmVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogZGltZ3JheTtcbn1cbiNkaXZDb250YWluZXIge1xuICBib3JkZXItYm90dG9tOiAycHggc29saWQgIzY2NjtcbiAgYm90dG9tOiAwcHg7XG4gIGxlZnQ6IDBweDtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICByaWdodDogMHB4O1xuICB0b3A6IDQwcHg7XG59XG4uc3R1ZHlRdWVyeVRvb2xiYXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwO1xuICAvKmNvbG9yOiAjRjVGNUY1OyovXG4gIGRpc3BsYXk6IGJsb2NrO1xuICBoZWlnaHQ6IDQwcHg7XG4gIG1hcmdpbjogMCBhdXRvO1xuICBwYWRkaW5nOiAzcHg7XG4gIHdpZHRoOiAxMDAlO1xufVxuLnN0dWR5T3BlcnRpb25Ub29sYmFyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDtcbiAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICMzMzM7XG4gIGJvcmRlci10b3A6IDFweCBzb2xpZCAjNTU1O1xuICBib3R0b206IDA7XG4gIC8qY29sb3I6ICNGNUY1RjU7Ki9cbiAgZGlzcGxheTogYmxvY2s7XG4gIGhlaWdodDogNDhweDtcbiAgbWFyZ2luOiAwIGF1dG87XG4gIHBhZGRpbmc6IDRweDtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB3aWR0aDogMTAwJTtcbn1cbiNwYW5lbFN0dWR5RGFzaCB7XG4gIGJhY2tncm91bmQtY29sb3I6ICMwMDA7XG4gIGJvcmRlcjogbm9uZTtcbiAgbWFyZ2luOiAwcHg7XG4gIHBhZGRpbmc6IDVweCAxMHB4O1xuICB2aXNpYmlsaXR5OiB2aXNpYmxlO1xufVxuI3BhbmVsU3R1ZHlEYXNoIGJ1dHRvbiB7XG4gIGJvcmRlcjogbm9uZTtcbiAgaGVpZ2h0OiAzMHB4O1xuICBvdXRsaW5lOiBub25lO1xuICB3aWR0aDogMTAwcHg7XG59XG4jcGFuZWxTdHVkeURhc2ggLnNhdmUtcXVlcnkge1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGZsb2F0OiByaWdodDtcbn1cbiNwYW5lbFN0dWR5RGFzaCAuY2hlY2tib3gge1xuICBtYXJnaW4tbGVmdDogNXB4O1xuICBtYXJnaW4tcmlnaHQ6IDVweDtcbn1cbiNwYW5lbFN0dWR5RGFzaCAjc3RhdHVzTGFiZWwge1xuICBtYXJnaW46IDBweDtcbn1cbiNkaXZTdHVkaWVzIHtcbiAgbWFyZ2luLWJvdHRvbTogMHB4O1xuICBtaW4taGVpZ2h0OiAyMDBweDtcbiAgcG9zaXRpb246IHN0YXRpYztcbiAgd2lkdGg6IDEwMCU7XG59XG4vKiNkaXZTdHVkaWVzOjotd2Via2l0LXNjcm9sbGJhcntcbiAgICB3aWR0aDoxNnB4O1xuICAgIGJhY2tncm91bmQtY29sb3I6YmxhY2s7XG59XG5cbiNkaXZTdHVkaWVzOjotd2Via2l0LXNjcm9sbGJhci10aHVtYntcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiM1MzUzNTM7XG4gICAgYm9yZGVyLXJhZGl1czogMTBweDtcbn0qL1xuQG1lZGlhIChtaW4td2lkdGg6IDc2OHB4KSB7XG4gICNwYW5lbFN0dWR5RGFzaCAuY2hlY2tib3gge1xuICAgIHRvcDogLTJweDtcbiAgfVxuICAjcGFuZWxTdHVkeURhc2ggLmNoZWNrYm94IGxhYmVsIGlucHV0IHtcbiAgICB0b3A6IDJweDtcbiAgfVxufVxuQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7XG4gICNkaXZTdHVkaWVzIHtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgbGVmdDogMXB4O1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICByaWdodDogMXB4O1xuICAgIHRvcDogNDJweDtcbiAgICB2aXNpYmlsaXR5OiB2aXNpYmxlO1xuICB9XG4gICNwYW5lbFN0dWR5RGFzaCB7XG4gICAgbGVmdDogMXB4O1xuICAgIHBhZGRpbmc6IDVweCAycHg7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHJpZ2h0OiAxcHg7XG4gICAgdmlzaWJpbGl0eTogdmlzaWJsZTtcbiAgfVxuICAjcGFuZWxTdHVkeURhc2ggLmZvcm0tZ3JvdXAsXG4gIC5jaGVja2JveCxcbiAgYnV0dG9uIHtcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgbWFyZ2luOiAwcHg7XG4gIH1cbiAgI3BhbmVsU3R1ZHlEYXNoICNzdGF0dXNMYWJlbCB7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgfVxuICAjcGFuZWxTdHVkeURhc2ggLnNhdmUtcXVlcnkge1xuICAgIGRpc3BsYXk6IG5vbmU7XG4gIH1cbiAgI3BhbmVsU3R1ZHlEYXNoIC5jaGVja2JveCB7XG4gICAgbWFyZ2luLWxlZnQ6IDVweDtcbiAgICBtYXJnaW4tcmlnaHQ6IDVweDtcbiAgICB0b3A6IC0xMHB4O1xuICB9XG4gIC5zcF9wYW5lbC1jb250YWluZXIsXG4gIC5zcF9wYW5lbC1sZWZ0LFxuICAuc3BfcGFuZWwtcmlnaHQge1xuICAgIHZpc2liaWxpdHk6IGhpZGRlbjtcbiAgICB6LWluZGV4OiAwO1xuICB9XG59XG4vKiBob3Jpem9udGFsIHBhbmVsKi9cbi5zcF9wYW5lbC1jb250YWluZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICAvKiBhdm9pZCBicm93c2VyIGxldmVsIHRvdWNoIGFjdGlvbnMgKi9cbiAgLyp4dG91Y2gtYWN0aW9uOiBub25lOyovXG59XG4uc3BfcGFuZWwtbGVmdCB7XG4gIC8qbWluLXdpZHRoOiAxcHg7Ki9cbiAgLyp3aGl0ZS1zcGFjZTogbm93cmFwOyovXG4gIGJhY2tncm91bmQ6ICMwMDA7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXg6IDAgMCBhdXRvO1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBtaW4taGVpZ2h0OiAyMDBweDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgLyogb25seSBtYW51YWxseSByZXNpemUgKi9cbiAgcGFkZGluZzogNHB4O1xuICB3aWR0aDogMjAwcHg7XG4gIC8qY29sb3I6IHdoaXRlOyovXG59XG4uc3Bfc3BsaXR0ZXIge1xuICBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vc3BsaXRfdmVydGljYWxfY29sbGFwc2UuanBnKSBjZW50ZXIgY2VudGVyIG5vLXJlcGVhdCAjNTU1O1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGZsZXg6IDAgMCBhdXRvO1xuICBtaW4taGVpZ2h0OiAyMDBweDtcbiAgd2lkdGg6IDhweDtcbn1cbi5zcF9wYW5lbC1yaWdodCB7XG4gIGJhY2tncm91bmQ6ICMwMDA7XG4gIGNvbG9yOiAjZmZmO1xuICBtaW4taGVpZ2h0OiAyMDBweDtcbiAgbWluLXdpZHRoOiAyMDBweDtcbiAgcGFkZGluZy1ib3R0b206IDEwMHB4O1xuICB3aWR0aDogMTAwJTtcbn1cbi8qIHZlcnRpY2FsIHBhbmVsICovXG4uc3BfcGFuZWwtY29udGFpbmVyLXZlcnRpY2FsIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbn1cbi5zcF9wYW5lbC10b3Age1xuICBmbGV4OiAwIDAgYXV0bztcbiAgLyogb25seSBtYW51YWxseSByZXNpemUgKi9cbiAgLypwYWRkaW5nOiAxMHB4OyovXG4gIGhlaWdodDogNzAlO1xuICBtaW4taGVpZ2h0OiAzMDBweDtcbiAgb3ZlcmZsb3cteTogYXV0bztcbiAgd2lkdGg6IDEwMCU7XG4gIC8qd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICBiYWNrZ3JvdW5kOiAjODM4MzgzO1xuICAgIGNvbG9yOiB3aGl0ZTsqL1xuICB6LWluZGV4OiAwO1xufVxuLnNwX3NwbGl0dGVyLWhvcml6b250YWwge1xuICBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vc3BsaXRfaG9yaXpvbnRhbF9jb2xsYXBzZS5qcGcpIGNlbnRlciBjZW50ZXIgbm8tcmVwZWF0ICM1NTU7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgZmxleDogMCAwIGF1dG87XG4gIGhlaWdodDogOHB4O1xuICB6LWluZGV4OiAyO1xufVxuLnNwX3BhbmVsLWJvdHRvbSB7XG4gIGZsZXg6IDEgMSBhdXRvO1xuICAvKiByZXNpemFibGUgKi9cbiAgLypwYWRkaW5nOiAxMHB4OyovXG4gIG1pbi1oZWlnaHQ6IDIwMHB4O1xuICBvdmVyZmxvdy15OiBhdXRvO1xuICAvKmJhY2tncm91bmQ6ICNlZWU7Ki9cbiAgei1pbmRleDogMTtcbn1cbi5uYXZiYXItcmlnaHQge1xuICBwYWRkaW5nLXJpZ2h0OiAxMHB4O1xufVxuLnNwX3BhbmVsLXJpZ2h0IC50YWJsZSB7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG59XG4jdHJTdHVkaWVzSGVhZGVyIGEge1xuICBjb2xvcjogIzAwMDtcbn1cbiN0clNlcmllc0hlYWRlciBhIHtcbiAgY29sb3I6ICMwMDA7XG59XG4jbGVmdFBhbmVsVG9wIHtcbiAgZmxleDogMSAxIGF1dG87XG59XG4jbGVmdFBhbmVsQm90dG9tIHtcbiAgZmxleDogMCAwIGF1dG87XG4gIGhlaWdodDogMjAlO1xufVxuI2Zvcm1VcGxvYWRJbWFnZSBpbnB1dFt0eXBlPWZpbGVdIHtcbiAgd2lkdGg6IDYwMHB4O1xufVxuI3RibFNlcmllcyB0ZDpudGgtY2hpbGQoMSkge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG4jdGJsU2VyaWVzIGltZyB7XG4gIGhlaWdodDogNTBweDtcbiAgbWFyZ2luOiBhdXRvO1xuICB3aWR0aDogNTBweDtcbn1cbiIsIkBpbXBvcnQgJy4uLy4uLy4uL3RoZW1lcy5sZXNzJztcblxuI2Rpdi1zY3JvbGwge1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBvdmVyZmxvdzogYXV0bztcbiAgICB3aWR0aDogMTAwJTtcbn1cblxuI2Rpdi1zY3JvbGw6Oi13ZWJraXQtc2Nyb2xsYmFyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBAYm9yZGVyLWNvbG9yO1xuICAgIHdpZHRoOiAxMnB4O1xufVxuXG4jZGl2LXNjcm9sbDo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWIge1xuICAgIC13ZWJraXQtYm94LXNoYWRvdzogaW5zZXQgMCAwIDZweCByZ2JhKDAsIDAsIDAsIC4zKTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBAY29udGFpbmVyLWJhY2tncm91bmQtY29sb3I7XG4gICAgYm9yZGVyLXJhZGl1czogMTBweDtcbn1cblxuI2Rpdi1zY3JvbGw6Oi13ZWJraXQtc2Nyb2xsYmFyLWNvcm5lciB7IGJhY2tncm91bmQtY29sb3I6IGRpbWdyYXk7IH1cblxuI2RpdkNvbnRhaW5lciB7XG4gICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICM2NjY7XG4gICAgYm90dG9tOiAwcHg7XG4gICAgbGVmdDogMHB4O1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICByaWdodDogMHB4O1xuICAgIHRvcDogNDBweDtcbn1cblxuLnN0dWR5UXVlcnlUb29sYmFyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBAYmFja2dyb3VuZC1jb2xvcjtcbiAgICAvKmNvbG9yOiAjRjVGNUY1OyovXG4gICAgZGlzcGxheTogYmxvY2s7XG4gICAgaGVpZ2h0OiA0MHB4O1xuICAgIG1hcmdpbjogMCBhdXRvO1xuICAgIHBhZGRpbmc6IDNweDtcbiAgICB3aWR0aDogMTAwJTtcbn1cblxuLnN0dWR5T3BlcnRpb25Ub29sYmFyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBAYmFja2dyb3VuZC1jb2xvcjtcbiAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgQGJvcmRlci1jb2xvcjtcbiAgICBib3JkZXItdG9wOiAxcHggc29saWQgQGNvbnRhaW5lci1iYWNrZ3JvdW5kLWNvbG9yO1xuICAgIGJvdHRvbTogMDtcbiAgICAvKmNvbG9yOiAjRjVGNUY1OyovXG4gICAgZGlzcGxheTogYmxvY2s7XG4gICAgaGVpZ2h0OiA0OHB4O1xuICAgIG1hcmdpbjogMCBhdXRvO1xuICAgIHBhZGRpbmc6IDRweDtcbiAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgd2lkdGg6IDEwMCU7XG59XG5cbiNwYW5lbFN0dWR5RGFzaCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogQGJhY2tncm91bmQtY29sb3I7XG4gICAgYm9yZGVyOiBub25lO1xuICAgIG1hcmdpbjogMHB4O1xuICAgIHBhZGRpbmc6IDVweCAxMHB4O1xuICAgIHZpc2liaWxpdHk6IHZpc2libGU7XG59XG5cbiNwYW5lbFN0dWR5RGFzaCBidXR0b24ge1xuICAgIGJvcmRlcjogbm9uZTtcbiAgICBoZWlnaHQ6IDMwcHg7XG4gICAgb3V0bGluZTogbm9uZTtcbiAgICB3aWR0aDogMTAwcHg7XG59XG5cbiNwYW5lbFN0dWR5RGFzaCAuc2F2ZS1xdWVyeSB7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIGZsb2F0OiByaWdodDtcbn1cblxuI3BhbmVsU3R1ZHlEYXNoIC5jaGVja2JveCB7XG4gICAgbWFyZ2luLWxlZnQ6IDVweDtcbiAgICBtYXJnaW4tcmlnaHQ6IDVweDtcbn1cblxuI3BhbmVsU3R1ZHlEYXNoICNzdGF0dXNMYWJlbCB7IG1hcmdpbjogMHB4OyB9XG5cbiNkaXZTdHVkaWVzIHtcbiAgICBtYXJnaW4tYm90dG9tOiAwcHg7XG4gICAgbWluLWhlaWdodDogMjAwcHg7XG4gICAgcG9zaXRpb246IHN0YXRpYztcbiAgICB3aWR0aDogMTAwJTtcbn1cblxuLyojZGl2U3R1ZGllczo6LXdlYmtpdC1zY3JvbGxiYXJ7XG4gICAgd2lkdGg6MTZweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOmJsYWNrO1xufVxuXG4jZGl2U3R1ZGllczo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWJ7XG4gICAgYmFja2dyb3VuZC1jb2xvcjojNTM1MzUzO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG59Ki9cblxuQG1lZGlhIChtaW4td2lkdGg6IDc2OHB4KSB7ICAgIFxuICAgICNwYW5lbFN0dWR5RGFzaCAuY2hlY2tib3ggeyB0b3A6IC0ycHg7IH1cblxuICAgICNwYW5lbFN0dWR5RGFzaCAuY2hlY2tib3ggbGFiZWwgaW5wdXQgeyB0b3A6IDJweDsgfVxufVxuXG5AbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHtcbiAgICAjZGl2U3R1ZGllcyB7XG4gICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgbGVmdDogMXB4O1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHJpZ2h0OiAxcHg7XG4gICAgICAgIHRvcDogNDJweDtcbiAgICAgICAgdmlzaWJpbGl0eTogdmlzaWJsZTtcbiAgICB9XG5cbiAgICAjcGFuZWxTdHVkeURhc2gge1xuICAgICAgICBsZWZ0OiAxcHg7XG4gICAgICAgIHBhZGRpbmc6IDVweCAycHg7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgcmlnaHQ6IDFweDtcbiAgICAgICAgdmlzaWJpbGl0eTogdmlzaWJsZTtcbiAgICB9XG5cbiAgICAjcGFuZWxTdHVkeURhc2ggLmZvcm0tZ3JvdXAsIC5jaGVja2JveCwgYnV0dG9uIHtcbiAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICBtYXJnaW46IDBweDtcbiAgICB9XG5cbiAgICAjcGFuZWxTdHVkeURhc2ggI3N0YXR1c0xhYmVsIHsgZGlzcGxheTogbm9uZTsgfVxuXG4gICAgI3BhbmVsU3R1ZHlEYXNoIC5zYXZlLXF1ZXJ5IHsgZGlzcGxheTogbm9uZTsgfVxuXG4gICAgI3BhbmVsU3R1ZHlEYXNoIC5jaGVja2JveCB7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiA1cHg7XG4gICAgICAgIG1hcmdpbi1yaWdodDogNXB4O1xuICAgICAgICB0b3A6IC0xMHB4O1xuICAgIH1cblxuICAgIC5zcF9wYW5lbC1jb250YWluZXIsIC5zcF9wYW5lbC1sZWZ0LCAuc3BfcGFuZWwtcmlnaHQge1xuICAgICAgICB2aXNpYmlsaXR5OiBoaWRkZW47XG4gICAgICAgIHotaW5kZXg6IDA7XG4gICAgfVxufVxuXG4vKiBob3Jpem9udGFsIHBhbmVsKi9cblxuLnNwX3BhbmVsLWNvbnRhaW5lciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgLyogYXZvaWQgYnJvd3NlciBsZXZlbCB0b3VjaCBhY3Rpb25zICovXG4gICAgLyp4dG91Y2gtYWN0aW9uOiBub25lOyovXG59XG5cbi5zcF9wYW5lbC1sZWZ0IHtcbiAgICAvKm1pbi13aWR0aDogMXB4OyovXG4gICAgLyp3aGl0ZS1zcGFjZTogbm93cmFwOyovXG4gICAgYmFja2dyb3VuZDogQGJhY2tncm91bmQtY29sb3I7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4OiAwIDAgYXV0bztcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIG1pbi1oZWlnaHQ6IDIwMHB4O1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgLyogb25seSBtYW51YWxseSByZXNpemUgKi9cbiAgICBwYWRkaW5nOiA0cHg7XG4gICAgd2lkdGg6IDIwMHB4O1xuICAgIC8qY29sb3I6IHdoaXRlOyovXG59XG5cbi5zcF9zcGxpdHRlciB7XG4gICAgYmFja2dyb3VuZDogdXJsKC4uLy4uLy4uL2Fzc2V0cy9pbWcvYnV0dG9uL3NwbGl0X3ZlcnRpY2FsX2NvbGxhcHNlLmpwZykgY2VudGVyIGNlbnRlciBuby1yZXBlYXQgQGNvbnRhaW5lci1iYWNrZ3JvdW5kLWNvbG9yO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBmbGV4OiAwIDAgYXV0bztcbiAgICBtaW4taGVpZ2h0OiAyMDBweDtcbiAgICB3aWR0aDogOHB4O1xufVxuXG4uc3BfcGFuZWwtcmlnaHQge1xuICAgIGJhY2tncm91bmQ6IEBiYWNrZ3JvdW5kLWNvbG9yO1xuICAgIGNvbG9yOiBAZm9udC1jb2xvcjtcbiAgICBtaW4taGVpZ2h0OiAyMDBweDtcbiAgICBtaW4td2lkdGg6IDIwMHB4O1xuICAgIHBhZGRpbmctYm90dG9tOiAxMDBweDtcbiAgICB3aWR0aDogMTAwJTtcbn1cblxuXG4vKiB2ZXJ0aWNhbCBwYW5lbCAqL1xuXG4uc3BfcGFuZWwtY29udGFpbmVyLXZlcnRpY2FsIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbn1cblxuLnNwX3BhbmVsLXRvcCB7XG4gICAgZmxleDogMCAwIGF1dG87XG4gICAgLyogb25seSBtYW51YWxseSByZXNpemUgKi9cbiAgICAvKnBhZGRpbmc6IDEwcHg7Ki9cbiAgICBoZWlnaHQ6IDcwJTtcbiAgICBtaW4taGVpZ2h0OiAzMDBweDtcbiAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIC8qd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICBiYWNrZ3JvdW5kOiAjODM4MzgzO1xuICAgIGNvbG9yOiB3aGl0ZTsqL1xuICAgIHotaW5kZXg6IDA7XG59XG5cbi5zcF9zcGxpdHRlci1ob3Jpem9udGFsIHtcbiAgICBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vc3BsaXRfaG9yaXpvbnRhbF9jb2xsYXBzZS5qcGcpIGNlbnRlciBjZW50ZXIgbm8tcmVwZWF0IEBjb250YWluZXItYmFja2dyb3VuZC1jb2xvcjtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgZmxleDogMCAwIGF1dG87XG4gICAgaGVpZ2h0OiA4cHg7XG4gICAgei1pbmRleDogMjtcbn1cblxuLnNwX3BhbmVsLWJvdHRvbSB7XG4gICAgZmxleDogMSAxIGF1dG87XG4gICAgLyogcmVzaXphYmxlICovXG4gICAgLypwYWRkaW5nOiAxMHB4OyovXG4gICAgbWluLWhlaWdodDogMjAwcHg7XG4gICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAvKmJhY2tncm91bmQ6ICNlZWU7Ki9cbiAgICB6LWluZGV4OiAxO1xufVxuXG4ubmF2YmFyLXJpZ2h0IHsgcGFkZGluZy1yaWdodDogMTBweDsgfVxuXG4uc3BfcGFuZWwtcmlnaHQgLnRhYmxlIHsgd2hpdGUtc3BhY2U6IG5vd3JhcDsgfVxuXG4jdHJTdHVkaWVzSGVhZGVyIGEgeyBjb2xvcjogQGJhY2tncm91bmQtY29sb3I7IH1cblxuI3RyU2VyaWVzSGVhZGVyIGEgeyBjb2xvcjogQGJhY2tncm91bmQtY29sb3I7IH1cblxuXG4jbGVmdFBhbmVsVG9wIHsgZmxleDogMSAxIGF1dG87IH1cblxuI2xlZnRQYW5lbEJvdHRvbSB7XG4gICAgZmxleDogMCAwIGF1dG87XG4gICAgaGVpZ2h0OiAyMCU7XG59XG5cbiNmb3JtVXBsb2FkSW1hZ2UgaW5wdXRbdHlwZT1maWxlXSB7IHdpZHRoOiA2MDBweDsgfVxuXG4jdGJsU2VyaWVzIHRkOm50aC1jaGlsZCgxKSB7IHRleHQtYWxpZ246IGNlbnRlcjsgfVxuXG4jdGJsU2VyaWVzIGltZyB7XG4gICAgaGVpZ2h0OiA1MHB4O1xuICAgIG1hcmdpbjogYXV0bztcbiAgICB3aWR0aDogNTBweDtcbn1cbiJdfQ== */\"","import { Component, OnInit } from \"@angular/core\";\r\nimport { ShellNavigatorService } from \"../../services/shell-navigator.service\";\r\nimport { Subscription } from \"rxjs\";\r\n\r\n@Component({\r\n    selector: \"app-worklist-shell\",\r\n    templateUrl: \"./worklist-shell.component.html\",\r\n    styleUrls: [\"./worklist-shell.component.less\"]\r\n})\r\nexport class WorklistShellComponent implements OnInit {\r\n    subscriptionShellNavigated: Subscription;\r\n    hideMe = false;\r\n\r\n    constructor(private shellNavigatorService: ShellNavigatorService) {\r\n        this.subscriptionShellNavigated = shellNavigatorService.shellSelected$.subscribe(\r\n            viewerShellData => {\r\n                this.hideMe = viewerShellData !== null;\r\n            });\r\n    }\r\n\r\n    ngOnInit() {\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        $(\".sp_panel-left\").spResizable({\r\n            handleSelector: \".sp_splitter\",\r\n            resizeHeight: false\r\n        });\r\n    }\r\n}\r\n","module.exports = \"<h1 mat-dialog-title\\r\\n    cdkDrag\\r\\n    cdkDragRootElement=\\\".cdk-overlay-pane\\\"\\r\\n    cdkDragHandle>\\r\\n    Export Study\\r\\n</h1>\\r\\n<mat-dialog-content>\\r\\n    <div id=\\\"body-content\\\">\\r\\n\\r\\n        <div id=\\\"multi-study-instance\\\" [hidden]=\\\"studyNumber==1\\\">\\r\\n            <div>\\r\\n                <table>\\r\\n                    <tr>\\r\\n                        <th id=\\\"checkbox-row\\\">\\r\\n                            <input type=\\\"checkbox\\\" (click)=\\\"onAllStudyChecked($event)\\\" />\\r\\n                        </th>\\r\\n                        <th>\\r\\n                            Patient ID\\r\\n                        </th>\\r\\n                        <th>\\r\\n                            Patient Name\\r\\n                        </th>\\r\\n                        <th>\\r\\n                            Exam Type\\r\\n                        </th>\\r\\n                        <th>\\r\\n                            Accession No\\r\\n                        </th>\\r\\n                        <th>\\r\\n                            Study Date Time\\r\\n                        </th>\\r\\n                        <th>\\r\\n                            Image Count\\r\\n                        </th>\\r\\n\\r\\n                    </tr>\\r\\n                    <tr *ngFor=\\\"let study of studies\\\">\\r\\n                        <td>\\r\\n                            <input type=\\\"checkbox\\\"/>\\r\\n                        </td>\\r\\n                        <td>{{study.patient.patientId}}</td>\\r\\n\\r\\n                        <td>{{study.patient.patientName}}</td>\\r\\n\\r\\n                        <td></td>\\r\\n\\r\\n                        <td>{{study.accessionNo}}</td>\\r\\n\\r\\n                        <td>{{study.studyDate}}</td>\\r\\n                        \\r\\n                        <td>{{study.studyTime}}</td>\\r\\n\\r\\n\\r\\n                    </tr>\\r\\n                </table>\\r\\n            </div>\\r\\n        </div>\\r\\n        <div id=\\\"single-study-instance\\\" [hidden]=\\\"studyNumber!=1\\\">\\r\\n\\r\\n        </div>\\r\\n\\r\\n        <!--<div id=\\\"multi-study-instance\\\" [style.visibility]=\\\"studyNumber!=1 ? 'visible' : 'hidden'\\\">\\r\\n\\r\\n        </div>\\r\\n        <div id=\\\"single-study-instance\\\" [style.visibility]=\\\"studyNumber==1 ? 'visible' : 'hidden'\\\">\\r\\n\\r\\n        </div>-->\\r\\n    </div>\\r\\n    <div>\\r\\n\\r\\n    </div>\\r\\n\\r\\n\\r\\n</mat-dialog-content>\\r\\n<mat-dialog-actions>\\r\\n    <button class=\\\"mat-raised-button\\\" (click)=\\\"onCancelClick()\\\">\\r\\n        <i class=\\\"glyphicon glyphicon-remove-circle\\\" style=\\\"padding-right: 8px\\\"></i>Cancel\\r\\n    </button>\\r\\n    <button class=\\\"mat-raised-button\\\" (click)=\\\"onOkClick()\\\">\\r\\n        <i class=\\\"glyphicon glyphicon-ok-circle\\\" style=\\\"padding-right: 8px\\\"></i>Ok\\r\\n    </button>\\r\\n</mat-dialog-actions>\\r\\n\"","module.exports = \"/*@black: #000;\\n@orange: orange;\\n@gray: #555;\\n@silver: #aaa;\\n@white: #fff;*/\\n/*.theme-dark {\\n    @background-color : @black;\\n    @underline-color : @orange;\\n    @border-color : @silver;\\n    @container-background-color : @gray;\\n    @disable-color : @gray;\\n    @font-color : @white;\\n    .change-dark(@background-color);\\n}\\n\\n\\n.theme-light {\\n    @background-color : @white;\\n    @underline-color : @orange;\\n    @border-color : @white;\\n    @disable-color : @white;\\n    @container-background-color : @white;\\n    @font-color: @black;\\n    .change-dark(@background-color);\\n}*/\\n#body-content {\\n  width: 800px;\\n  height: 800px;\\n}\\n#multi-study-instance {\\n  width: 700px;\\n  height: 200px;\\n  /*border:1px solid @border-color;*/\\n}\\n#single-study-instance {\\n  width: 700px;\\n  height: 200px;\\n  /*border:1px solid @border-color;*/\\n}\\n.mat-dialog-title {\\n  border-bottom: 1px solid orange;\\n  color: orange;\\n  font-size: 15px;\\n  margin: -24px -24px 0px -24px;\\n  min-width: 200px;\\n  padding: 1px 10px;\\n}\\n.mat-dialog-content {\\n  color: #fff;\\n  font-size: 15px;\\n  height: 800px;\\n  min-width: 650px;\\n  padding: 10px 10px;\\n}\\n.mat-dialog-actions {\\n  margin-right: -12px;\\n}\\n.mat-form-field {\\n  width: 100%;\\n}\\n.mat-raised-button {\\n  background-color: #555;\\n  border: 1px solid #777;\\n  border-radius: 3px;\\n  color: #fff;\\n  font-size: 13px;\\n  margin-left: 6px;\\n  padding: 1px;\\n  width: 100px;\\n}\\n.mat-raised-button:disabled:hover {\\n  color: #555;\\n}\\n.mat-raised-button:hover {\\n  color: orange;\\n}\\n.mat-dialog-actions {\\n  flex-direction: row-reverse;\\n}\\n.matInput {\\n  caret-color: orange;\\n  color: green;\\n}\\n.mat-input-element {\\n  width: 100%;\\n  caret-color: orange;\\n}\\nth {\\n  padding: 3px;\\n  border: 1px solid #333;\\n  min-width: 100px;\\n  background: #444;\\n  /*color: @container-background-color;*/\\n}\\ntd {\\n  padding: 3px;\\n  border: 1px solid #333;\\n  min-width: 100px;\\n  /*color: @container-background-color;*/\\n}\\nth,\\ntd:first-child {\\n  min-width: 20px;\\n}\\n/*#checkbox-row {\\n    width: 50px;\\n}*/\\ntr:nth-child(odd) {\\n  background-color: #181818;\\n}\\ntr:nth-child(even) {\\n  background-color: #000;\\n}\\ninput {\\n  background: #000;\\n  caret-color: orange;\\n  border: 1px solid #000;\\n}\\ninput:focus {\\n  outline: none !important;\\n  border-bottom: 1px solid orange;\\n}\\ninput:disabled {\\n  color: #555;\\n}\\n::-webkit-inner-spin-button {\\n  display: none;\\n}\\nselect {\\n  background-color: #000;\\n  border: 1px solid #333;\\n  width: 100%;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy93b3JrbGlzdC1zaGVsbC93b3JrbGlzdC9leHBvcnQtc3R1ZHkvZXhwb3J0LXN0dWR5LmNvbXBvbmVudC5sZXNzIiwic3JjL2FwcC9jb21wb25lbnRzL3dvcmtsaXN0LXNoZWxsL3dvcmtsaXN0L2V4cG9ydC1zdHVkeS9EOi9Xb3JrL0dpdC9JU0dpdFNlcnZlci9JbWFnZVZpZXdQYWNzL0NzaC5JbWFnZVN1aXRlLldlYkNsaWVudC9zcmMvYXBwL2NvbXBvbmVudHMvd29ya2xpc3Qtc2hlbGwvd29ya2xpc3QvZXhwb3J0LXN0dWR5L2V4cG9ydC1zdHVkeS5jb21wb25lbnQubGVzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztjQUljO0FBQ2Q7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7RUFtQkU7QUN0QkY7RUFDSSxZQUFBO0VBQ0EsYUFBQTtBRHdCSjtBQ3JCQTtFQUNJLFlBQUE7RUFDQSxhQUFBO0VEdUJGLGtDQUFrQztBQUNwQztBQ3BCQTtFQUNJLFlBQUE7RUFDQSxhQUFBO0VEc0JGLGtDQUFrQztBQUNwQztBQ2pCQTtFQUNJLCtCQUFBO0VBQ0EsYUFBQTtFQUNBLGVBQUE7RUFDQSw2QkFBQTtFQUNBLGdCQUFBO0VBQ0EsaUJBQUE7QURtQko7QUNoQkE7RUFDSSxXQUFBO0VBQ0EsZUFBQTtFQUNBLGFBQUE7RUFDQSxnQkFBQTtFQUNBLGtCQUFBO0FEa0JKO0FDZkE7RUFBc0IsbUJBQUE7QURrQnRCO0FDaEJBO0VBQ0ksV0FBQTtBRGtCSjtBQ2ZBO0VBQ0ksc0JBQUE7RUFDQSxzQkFBQTtFQUNBLGtCQUFBO0VBQ0EsV0FBQTtFQUNBLGVBQUE7RUFDQSxnQkFBQTtFQUNBLFlBQUE7RUFDQSxZQUFBO0FEaUJKO0FDZEE7RUFBb0MsV0FBQTtBRGlCcEM7QUNmQTtFQUEyQixhQUFBO0FEa0IzQjtBQ2hCQTtFQUFzQiwyQkFBQTtBRG1CdEI7QUNqQkE7RUFDSSxtQkFBQTtFQUNBLFlBQUE7QURtQko7QUNoQkE7RUFDSSxXQUFBO0VBQ0EsbUJBQUE7QURrQko7QUNYQTtFQUNJLFlBQUE7RUFDQSxzQkFBQTtFQUNBLGdCQUFBO0VBQ0EsZ0JBQUE7RURhRixzQ0FBc0M7QUFDeEM7QUNWQTtFQUNJLFlBQUE7RUFDQSxzQkFBQTtFQUNBLGdCQUFBO0VEWUYsc0NBQXNDO0FBQ3hDO0FDUkE7O0VBQ0ksZUFBQTtBRFdKO0FBQ0E7O0VBRUU7QUNQRjtFQUNFLHlCQUFBO0FEU0Y7QUNOQTtFQUNFLHNCQUFBO0FEUUY7QUNMQTtFQUNJLGdCQUFBO0VBQ0EsbUJBQUE7RUFDQSxzQkFBQTtBRE9KO0FDSkE7RUFDSSx3QkFBQTtFQUNBLCtCQUFBO0FETUo7QUNIQTtFQUNJLFdBQUE7QURLSjtBQ0ZBO0VBQThCLGFBQUE7QURLOUI7QUNIQTtFQUNJLHNCQUFBO0VBQ0Esc0JBQUE7RUFDQSxXQUFBO0FES0oiLCJmaWxlIjoic3JjL2FwcC9jb21wb25lbnRzL3dvcmtsaXN0LXNoZWxsL3dvcmtsaXN0L2V4cG9ydC1zdHVkeS9leHBvcnQtc3R1ZHkuY29tcG9uZW50Lmxlc3MiLCJzb3VyY2VzQ29udGVudCI6WyIvKkBibGFjazogIzAwMDtcbkBvcmFuZ2U6IG9yYW5nZTtcbkBncmF5OiAjNTU1O1xuQHNpbHZlcjogI2FhYTtcbkB3aGl0ZTogI2ZmZjsqL1xuLyoudGhlbWUtZGFyayB7XG4gICAgQGJhY2tncm91bmQtY29sb3IgOiBAYmxhY2s7XG4gICAgQHVuZGVybGluZS1jb2xvciA6IEBvcmFuZ2U7XG4gICAgQGJvcmRlci1jb2xvciA6IEBzaWx2ZXI7XG4gICAgQGNvbnRhaW5lci1iYWNrZ3JvdW5kLWNvbG9yIDogQGdyYXk7XG4gICAgQGRpc2FibGUtY29sb3IgOiBAZ3JheTtcbiAgICBAZm9udC1jb2xvciA6IEB3aGl0ZTtcbiAgICAuY2hhbmdlLWRhcmsoQGJhY2tncm91bmQtY29sb3IpO1xufVxuXG5cbi50aGVtZS1saWdodCB7XG4gICAgQGJhY2tncm91bmQtY29sb3IgOiBAd2hpdGU7XG4gICAgQHVuZGVybGluZS1jb2xvciA6IEBvcmFuZ2U7XG4gICAgQGJvcmRlci1jb2xvciA6IEB3aGl0ZTtcbiAgICBAZGlzYWJsZS1jb2xvciA6IEB3aGl0ZTtcbiAgICBAY29udGFpbmVyLWJhY2tncm91bmQtY29sb3IgOiBAd2hpdGU7XG4gICAgQGZvbnQtY29sb3I6IEBibGFjaztcbiAgICAuY2hhbmdlLWRhcmsoQGJhY2tncm91bmQtY29sb3IpO1xufSovXG4jYm9keS1jb250ZW50IHtcbiAgd2lkdGg6IDgwMHB4O1xuICBoZWlnaHQ6IDgwMHB4O1xufVxuI211bHRpLXN0dWR5LWluc3RhbmNlIHtcbiAgd2lkdGg6IDcwMHB4O1xuICBoZWlnaHQ6IDIwMHB4O1xuICAvKmJvcmRlcjoxcHggc29saWQgQGJvcmRlci1jb2xvcjsqL1xufVxuI3NpbmdsZS1zdHVkeS1pbnN0YW5jZSB7XG4gIHdpZHRoOiA3MDBweDtcbiAgaGVpZ2h0OiAyMDBweDtcbiAgLypib3JkZXI6MXB4IHNvbGlkIEBib3JkZXItY29sb3I7Ki9cbn1cbi5tYXQtZGlhbG9nLXRpdGxlIHtcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIG9yYW5nZTtcbiAgY29sb3I6IG9yYW5nZTtcbiAgZm9udC1zaXplOiAxNXB4O1xuICBtYXJnaW46IC0yNHB4IC0yNHB4IDBweCAtMjRweDtcbiAgbWluLXdpZHRoOiAyMDBweDtcbiAgcGFkZGluZzogMXB4IDEwcHg7XG59XG4ubWF0LWRpYWxvZy1jb250ZW50IHtcbiAgY29sb3I6ICNmZmY7XG4gIGZvbnQtc2l6ZTogMTVweDtcbiAgaGVpZ2h0OiA4MDBweDtcbiAgbWluLXdpZHRoOiA2NTBweDtcbiAgcGFkZGluZzogMTBweCAxMHB4O1xufVxuLm1hdC1kaWFsb2ctYWN0aW9ucyB7XG4gIG1hcmdpbi1yaWdodDogLTEycHg7XG59XG4ubWF0LWZvcm0tZmllbGQge1xuICB3aWR0aDogMTAwJTtcbn1cbi5tYXQtcmFpc2VkLWJ1dHRvbiB7XG4gIGJhY2tncm91bmQtY29sb3I6ICM1NTU7XG4gIGJvcmRlcjogMXB4IHNvbGlkICM3Nzc7XG4gIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgY29sb3I6ICNmZmY7XG4gIGZvbnQtc2l6ZTogMTNweDtcbiAgbWFyZ2luLWxlZnQ6IDZweDtcbiAgcGFkZGluZzogMXB4O1xuICB3aWR0aDogMTAwcHg7XG59XG4ubWF0LXJhaXNlZC1idXR0b246ZGlzYWJsZWQ6aG92ZXIge1xuICBjb2xvcjogIzU1NTtcbn1cbi5tYXQtcmFpc2VkLWJ1dHRvbjpob3ZlciB7XG4gIGNvbG9yOiBvcmFuZ2U7XG59XG4ubWF0LWRpYWxvZy1hY3Rpb25zIHtcbiAgZmxleC1kaXJlY3Rpb246IHJvdy1yZXZlcnNlO1xufVxuLm1hdElucHV0IHtcbiAgY2FyZXQtY29sb3I6IG9yYW5nZTtcbiAgY29sb3I6IGdyZWVuO1xufVxuLm1hdC1pbnB1dC1lbGVtZW50IHtcbiAgd2lkdGg6IDEwMCU7XG4gIGNhcmV0LWNvbG9yOiBvcmFuZ2U7XG59XG50aCB7XG4gIHBhZGRpbmc6IDNweDtcbiAgYm9yZGVyOiAxcHggc29saWQgIzMzMztcbiAgbWluLXdpZHRoOiAxMDBweDtcbiAgYmFja2dyb3VuZDogIzQ0NDtcbiAgLypjb2xvcjogQGNvbnRhaW5lci1iYWNrZ3JvdW5kLWNvbG9yOyovXG59XG50ZCB7XG4gIHBhZGRpbmc6IDNweDtcbiAgYm9yZGVyOiAxcHggc29saWQgIzMzMztcbiAgbWluLXdpZHRoOiAxMDBweDtcbiAgLypjb2xvcjogQGNvbnRhaW5lci1iYWNrZ3JvdW5kLWNvbG9yOyovXG59XG50aCxcbnRkOmZpcnN0LWNoaWxkIHtcbiAgbWluLXdpZHRoOiAyMHB4O1xufVxuLyojY2hlY2tib3gtcm93IHtcbiAgICB3aWR0aDogNTBweDtcbn0qL1xudHI6bnRoLWNoaWxkKG9kZCkge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMTgxODE4O1xufVxudHI6bnRoLWNoaWxkKGV2ZW4pIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDtcbn1cbmlucHV0IHtcbiAgYmFja2dyb3VuZDogIzAwMDtcbiAgY2FyZXQtY29sb3I6IG9yYW5nZTtcbiAgYm9yZGVyOiAxcHggc29saWQgIzAwMDtcbn1cbmlucHV0OmZvY3VzIHtcbiAgb3V0bGluZTogbm9uZSAhaW1wb3J0YW50O1xuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgb3JhbmdlO1xufVxuaW5wdXQ6ZGlzYWJsZWQge1xuICBjb2xvcjogIzU1NTtcbn1cbjo6LXdlYmtpdC1pbm5lci1zcGluLWJ1dHRvbiB7XG4gIGRpc3BsYXk6IG5vbmU7XG59XG5zZWxlY3Qge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwO1xuICBib3JkZXI6IDFweCBzb2xpZCAjMzMzO1xuICB3aWR0aDogMTAwJTtcbn1cbiIsIkBpbXBvcnQgXCIuLi8uLi8uLi8uLi8uLi90aGVtZXMubGVzc1wiO1xuXG4jYm9keS1jb250ZW50IHtcbiAgICB3aWR0aDogODAwcHg7XG4gICAgaGVpZ2h0OiA4MDBweDtcbn1cblxuI211bHRpLXN0dWR5LWluc3RhbmNlIHtcbiAgICB3aWR0aDogNzAwcHg7XG4gICAgaGVpZ2h0OiAyMDBweDtcbiAgICAvKmJvcmRlcjoxcHggc29saWQgQGJvcmRlci1jb2xvcjsqL1xufVxuXG4jc2luZ2xlLXN0dWR5LWluc3RhbmNlIHtcbiAgICB3aWR0aDogNzAwcHg7XG4gICAgaGVpZ2h0OiAyMDBweDtcbiAgICAvKmJvcmRlcjoxcHggc29saWQgQGJvcmRlci1jb2xvcjsqL1xufSAgIFxuXG5cblxuLm1hdC1kaWFsb2ctdGl0bGUge1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCBAdW5kZXJsaW5lLWNvbG9yO1xuICAgIGNvbG9yOiBAdW5kZXJsaW5lLWNvbG9yO1xuICAgIGZvbnQtc2l6ZTogMTVweDtcbiAgICBtYXJnaW46IC0yNHB4IC0yNHB4IDBweCAtMjRweDtcbiAgICBtaW4td2lkdGg6IDIwMHB4O1xuICAgIHBhZGRpbmc6IDFweCAxMHB4O1xufVxuXG4ubWF0LWRpYWxvZy1jb250ZW50IHtcbiAgICBjb2xvcjogQGZvbnQtY29sb3I7XG4gICAgZm9udC1zaXplOiAxNXB4O1xuICAgIGhlaWdodDogODAwcHg7XG4gICAgbWluLXdpZHRoOiA2NTBweDtcbiAgICBwYWRkaW5nOiAxMHB4IDEwcHg7XG59XG5cbi5tYXQtZGlhbG9nLWFjdGlvbnMgeyBtYXJnaW4tcmlnaHQ6IC0xMnB4OyB9XG5cbi5tYXQtZm9ybS1maWVsZCB7XG4gICAgd2lkdGg6IDEwMCU7XG59XG5cbi5tYXQtcmFpc2VkLWJ1dHRvbiB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogQGNvbnRhaW5lci1iYWNrZ3JvdW5kLWNvbG9yO1xuICAgIGJvcmRlcjogMXB4IHNvbGlkICM3Nzc7XG4gICAgYm9yZGVyLXJhZGl1czogM3B4O1xuICAgIGNvbG9yOiBAZm9udC1jb2xvcjtcbiAgICBmb250LXNpemU6IDEzcHg7XG4gICAgbWFyZ2luLWxlZnQ6IDZweDtcbiAgICBwYWRkaW5nOiAxcHg7XG4gICAgd2lkdGg6IDEwMHB4O1xufVxuXG4ubWF0LXJhaXNlZC1idXR0b246ZGlzYWJsZWQ6aG92ZXIgeyBjb2xvcjogQGRpc2FibGUtY29sb3I7IH1cblxuLm1hdC1yYWlzZWQtYnV0dG9uOmhvdmVyIHsgY29sb3I6IEB1bmRlcmxpbmUtY29sb3I7IH1cblxuLm1hdC1kaWFsb2ctYWN0aW9ucyB7IGZsZXgtZGlyZWN0aW9uOiByb3ctcmV2ZXJzZTsgfVxuXG4ubWF0SW5wdXQge1xuICAgIGNhcmV0LWNvbG9yOiBAdW5kZXJsaW5lLWNvbG9yO1xuICAgIGNvbG9yOiBncmVlbjtcbn1cblxuLm1hdC1pbnB1dC1lbGVtZW50IHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBjYXJldC1jb2xvcjogQHVuZGVybGluZS1jb2xvcjtcbn1cblxudGFibGUge1xuXG59XG5cbnRoe1xuICAgIHBhZGRpbmc6IDNweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCBAYm9yZGVyLWNvbG9yO1xuICAgIG1pbi13aWR0aDogMTAwcHg7XG4gICAgYmFja2dyb3VuZDogQGhlYWRlci1iYWNrZ3JvdW5kLWNvbG9yO1xuICAgIC8qY29sb3I6IEBjb250YWluZXItYmFja2dyb3VuZC1jb2xvcjsqL1xufVxuXG50ZCB7XG4gICAgcGFkZGluZzogM3B4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIEBib3JkZXItY29sb3I7XG4gICAgbWluLXdpZHRoOiAxMDBweDtcbiAgICAvKmNvbG9yOiBAY29udGFpbmVyLWJhY2tncm91bmQtY29sb3I7Ki9cbn1cblxuXG50aCwgdGQ6Zmlyc3QtY2hpbGQge1xuICAgIG1pbi13aWR0aDogMjBweDtcbn1cblxuLyojY2hlY2tib3gtcm93IHtcbiAgICB3aWR0aDogNTBweDtcbn0qL1xuXG50cjpudGgtY2hpbGQob2RkKXtcbiAgYmFja2dyb3VuZC1jb2xvcjogQG9kZC10ci1jb2xvcjtcbn1cblxudHI6bnRoLWNoaWxkKGV2ZW4pe1xuICBiYWNrZ3JvdW5kLWNvbG9yOiBAYmFja2dyb3VuZC1jb2xvcjtcbn1cblxuaW5wdXQge1xuICAgIGJhY2tncm91bmQ6IEBiYWNrZ3JvdW5kLWNvbG9yO1xuICAgIGNhcmV0LWNvbG9yOkB1bmRlcmxpbmUtY29sb3I7XG4gICAgYm9yZGVyOiAxcHggc29saWQgQGJhY2tncm91bmQtY29sb3I7XG59XG5cbmlucHV0OmZvY3Vze1xuICAgIG91dGxpbmU6IG5vbmUgIWltcG9ydGFudDtcbiAgICBib3JkZXItYm90dG9tOjFweCBzb2xpZCBAdW5kZXJsaW5lLWNvbG9yO1xufVxuXG5pbnB1dDpkaXNhYmxlZHtcbiAgICBjb2xvcjogQGRpc2FibGUtY29sb3I7XG59XG5cbjo6LXdlYmtpdC1pbm5lci1zcGluLWJ1dHRvbiB7IGRpc3BsYXk6IG5vbmU7IH1cblxuc2VsZWN0IHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBAYmFja2dyb3VuZC1jb2xvcjtcbiAgICBib3JkZXI6IDFweCBzb2xpZCBAYm9yZGVyLWNvbG9yO1xuICAgIHdpZHRoOiAxMDAlO1xufSJdfQ== */\"","import { Component, OnInit, Inject } from '@angular/core';\r\nimport { DialogService } from \"../../../../services/dialog.service\";\r\nimport { MAT_DIALOG_DATA, MatDialogRef, MatDatepickerInputEvent } from \"@angular/material\";\r\nimport { MessageBoxType, MessageBoxContent } from \"../../../../models/messageBox\";\r\nimport { Study, Series, StudyTemp, WorklistColumn } from \"../../../../models/pssi\";\r\nimport { WorklistService } from \"../../../../services/worklist.service\";\r\n\r\n@Component({\r\n  selector: 'app-export-study',\r\n  templateUrl: './export-study.component.html',\r\n  styleUrls: ['./export-study.component.less']\r\n})\r\nexport class ExportStudyComponent {\r\n    studyNumber: number = 0;\r\n    studies: Study[];\r\n\r\n\r\n    constructor(\r\n        public worklistService: WorklistService,\r\n        public dialogRef: MatDialogRef<ExportStudyComponent>,\r\n        @Inject(MAT_DIALOG_DATA) studies: Study[],\r\n        private dialogService: DialogService) {\r\n        this.studyNumber = studies.length;\r\n        this.studies = new Array<Study>();\r\n        this.studies = studies;\r\n    }\r\n\r\n    ngOnInit() {\r\n    }\r\n\r\n    onCancelClick(): void {\r\n        this.dialogRef.close();\r\n    }\r\n\r\n    onOkClick(): void {\r\n        \r\n        this.dialogRef.close();\r\n    }\r\n\r\n}\r\n","module.exports = \"<h1 mat-dialog-title\\r\\n    cdkDrag\\r\\n    cdkDragRootElement=\\\".cdk-overlay-pane\\\"\\r\\n    cdkDragHandle>\\r\\n    Patient Edit\\r\\n</h1>\\r\\n<mat-dialog-content>\\r\\n    <mat-list>\\r\\n        <table>\\r\\n            <tr>\\r\\n                <td>Family Name</td>\\r\\n                <td>Given Name</td>\\r\\n                <td>Middle Name</td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td style=\\\"width: 200px\\\">\\r\\n                    <input [(ngModel)]=\\\"study.patient.lastName\\\"/>\\r\\n                </td>\\r\\n                <td style=\\\"width: 200px\\\">\\r\\n                    <input [(ngModel)]=\\\"study.patient.firstName\\\" />\\r\\n                </td>\\r\\n                <td style=\\\"width: 200px\\\">\\r\\n                    <input [(ngModel)]=\\\"study.patient.middleName\\\" />\\r\\n                </td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td>Patient ID</td>\\r\\n                <td>Date of Birth</td>\\r\\n                <td>Gender</td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td style=\\\"width: 200px\\\">\\r\\n                    <input [(ngModel)]=\\\"patientId\\\"/>\\r\\n                </td>\\r\\n                <td style=\\\"width: 200px\\\">\\r\\n                    <mat-form-field>\\r\\n                        <input matInput [matDatepicker]=\\\"picker1\\\" [(ngModel)]=\\\"patientBirthDate\\\"/>\\r\\n                        <mat-datepicker-toggle matSuffix [for]=\\\"picker1\\\"></mat-datepicker-toggle>\\r\\n                        <mat-datepicker #picker1></mat-datepicker>\\r\\n                    </mat-form-field>\\r\\n                </td>\\r\\n                <td style=\\\"width: 200px\\\">\\r\\n                    <select [(ngModel)]=\\\"study.patient.patientSex\\\">\\r\\n                        <option *ngFor=\\\"let val of patientSexColumn.valueList | keyvalue\\\" [ngValue]=\\\"val.key.toUpperCase()\\\">{{val.value}}</option>\\r\\n                    </select>\\r\\n                </td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td colspan=\\\"4\\\">Patient Comments</td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td colspan=\\\"4\\\" style=\\\"width: 600px\\\">\\r\\n                    <input [(ngModel)]=\\\"study.patient.patientComments\\\" />\\r\\n                </td>\\r\\n            </tr>\\r\\n        </table>\\r\\n        <br>\\r\\n        <mat-divider></mat-divider><br>\\r\\n        <table>\\r\\n            <tr>\\r\\n                <td>Accession Number</td>\\r\\n                <td>Referring Physician</td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td style=\\\"width: 300px\\\">\\r\\n                    <input [(ngModel)]=\\\"study.accessionNo\\\"/>\\r\\n                </td>\\r\\n                <td style=\\\"width: 300px\\\">\\r\\n                    <input [(ngModel)]=\\\"study.referPhysician\\\" />\\r\\n                </td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td>Study Description</td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td colspan=\\\"4\\\" style=\\\"width: 600px\\\">\\r\\n                    <input [(ngModel)]=\\\"study.studyDescription\\\" />\\r\\n                </td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td>Symptoms/Notes</td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td colspan=\\\"4\\\" style=\\\"width: 600px\\\">\\r\\n                    <input [(ngModel)]=\\\"study.additionalPatientHistory\\\" />\\r\\n                </td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td>Study Date</td>\\r\\n                <td>Study Time</td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td style=\\\"width: 300px\\\">\\r\\n                    <input [(ngModel)]=\\\"study.studyDate\\\" [disabled]=\\\"true\\\"/>\\r\\n                </td>\\r\\n                <td style=\\\"width: 300px\\\">\\r\\n                    <input [(ngModel)]=\\\"study.studyTime\\\" [disabled]=\\\"true\\\"/>\\r\\n                </td>\\r\\n            </tr>\\r\\n        </table>\\r\\n        <br>\\r\\n        <mat-divider></mat-divider><br>\\r\\n        <table>\\r\\n            <tr>\\r\\n                <td>Series</td>\\r\\n                <td>Body Part Examined</td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td style=\\\"width: 300px\\\">\\r\\n                    <select (change)=\\\"onSeriesChanged($event.target.selectedIndex)\\\">\\r\\n                        <option *ngFor=\\\"let val of study.seriesList\\\" [ngValue]=\\\"val.seriesNo\\\">Series {{val.seriesNo}}</option>\\r\\n                    </select>\\r\\n                </td>\\r\\n                <td style=\\\"width: 300px\\\">\\r\\n                    <input [(ngModel)]=\\\"series.bodyPart\\\" [disabled]=\\\"true\\\"/>\\r\\n                </td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td>Modality</td>\\r\\n                <td>View Position</td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td style=\\\"width: 300px\\\">\\r\\n                    <input [(ngModel)]=\\\"series.modality\\\" />\\r\\n                </td>\\r\\n                <td style=\\\"width: 300px\\\">\\r\\n                    <input [(ngModel)]=\\\"series.viewPosition\\\" [disabled]=\\\"true\\\"/>\\r\\n                </td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td>Series Description</td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td colspan=\\\"2\\\" style=\\\"width: 600px\\\">\\r\\n                    <input [(ngModel)]=\\\"series.seriesDescription\\\" />\\r\\n                </td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td>Series Date</td>\\r\\n                <td>Series Time</td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td style=\\\"width: 300px\\\">\\r\\n                    <input [(ngModel)]=\\\"series.seriesDateString\\\" [disabled]=\\\"true\\\"/>\\r\\n                </td>\\r\\n                <td style=\\\"width: 300px\\\">\\r\\n                    <input [(ngModel)]=\\\"series.seriesTimeString\\\" [disabled]=\\\"true\\\"/>\\r\\n                </td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td>Patient Position</td>\\r\\n                <td>Series Number</td>\\r\\n            </tr>\\r\\n            <tr>\\r\\n                <td style=\\\"width: 300px\\\">\\r\\n                    <input [(ngModel)]=\\\"series.patientPosition\\\" />\\r\\n                </td>\\r\\n                <td style=\\\"width: 300px\\\">\\r\\n                    <input [(ngModel)]=\\\"series.seriesNumber\\\" [disabled]=\\\"true\\\"/>\\r\\n                </td>\\r\\n            </tr>\\r\\n        </table>\\r\\n    </mat-list>\\r\\n\\r\\n</mat-dialog-content>\\r\\n<mat-dialog-actions>\\r\\n    <button class=\\\"mat-raised-button\\\" (click)=\\\"onCancelClick()\\\">\\r\\n        <i class=\\\"glyphicon glyphicon-remove-circle\\\" style=\\\"padding-right: 8px\\\"></i>Cancel\\r\\n    </button>\\r\\n    <button class=\\\"mat-raised-button\\\" (click)=\\\"onOkClick()\\\">\\r\\n        <i class=\\\"glyphicon glyphicon-ok-circle\\\" style=\\\"padding-right: 8px\\\"></i>Ok\\r\\n    </button>\\r\\n</mat-dialog-actions>\\r\\n\"","module.exports = \"/*@black: #000;\\n@orange: orange;\\n@gray: #555;\\n@silver: #aaa;\\n@white: #fff;*/\\n/*.theme-dark {\\n    @background-color : @black;\\n    @underline-color : @orange;\\n    @border-color : @silver;\\n    @container-background-color : @gray;\\n    @disable-color : @gray;\\n    @font-color : @white;\\n    .change-dark(@background-color);\\n}\\n\\n\\n.theme-light {\\n    @background-color : @white;\\n    @underline-color : @orange;\\n    @border-color : @white;\\n    @disable-color : @white;\\n    @container-background-color : @white;\\n    @font-color: @black;\\n    .change-dark(@background-color);\\n}*/\\n.mat-dialog-title {\\n  border-bottom: 1px solid orange;\\n  color: orange;\\n  font-size: 15px;\\n  margin: -24px -24px 0px -24px;\\n  min-width: 200px;\\n  padding: 1px 10px;\\n}\\n.mat-dialog-content {\\n  color: #fff;\\n  font-size: 15px;\\n  height: 800px;\\n  min-width: 650px;\\n  padding: 10px 10px;\\n}\\n.mat-dialog-actions {\\n  margin-right: -12px;\\n}\\n.mat-form-field {\\n  width: 100%;\\n}\\n.mat-raised-button {\\n  background-color: #555;\\n  border: 1px solid #777;\\n  border-radius: 3px;\\n  color: #fff;\\n  font-size: 13px;\\n  margin-left: 6px;\\n  padding: 1px;\\n  width: 100px;\\n}\\n.mat-raised-button:disabled:hover {\\n  color: #555;\\n}\\n.mat-raised-button:hover {\\n  color: orange;\\n}\\n.mat-dialog-actions {\\n  flex-direction: row-reverse;\\n}\\n.matInput {\\n  caret-color: orange;\\n  color: green;\\n}\\n.mat-input-element {\\n  width: 100%;\\n  caret-color: orange;\\n}\\ntd {\\n  padding: 3px;\\n}\\ninput {\\n  background: #000000;\\n  caret-color: orange;\\n  border: 1px solid #000000;\\n  width: 100%;\\n}\\ninput:focus {\\n  outline: none !important;\\n  border-bottom: 1px solid orange;\\n}\\ninput:disabled {\\n  color: #555;\\n}\\n::-webkit-inner-spin-button {\\n  display: none;\\n}\\nselect {\\n  background-color: #000;\\n  border: 1px solid #333;\\n  width: 100%;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy93b3JrbGlzdC1zaGVsbC93b3JrbGlzdC9wYXRpZW50LWVkaXQvcGF0aWVudC1lZGl0LmNvbXBvbmVudC5sZXNzIiwic3JjL2FwcC9jb21wb25lbnRzL3dvcmtsaXN0LXNoZWxsL3dvcmtsaXN0L3BhdGllbnQtZWRpdC9EOi9Xb3JrL0dpdC9JU0dpdFNlcnZlci9JbWFnZVZpZXdQYWNzL0NzaC5JbWFnZVN1aXRlLldlYkNsaWVudC9zcmMvYXBwL2NvbXBvbmVudHMvd29ya2xpc3Qtc2hlbGwvd29ya2xpc3QvcGF0aWVudC1lZGl0L3BhdGllbnQtZWRpdC5jb21wb25lbnQubGVzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztjQUljO0FBQ2Q7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7RUFtQkU7QUN0QkY7RUFDSSwrQkFBQTtFQUNBLGFBQUE7RUFDQSxlQUFBO0VBQ0EsNkJBQUE7RUFDQSxnQkFBQTtFQUNBLGlCQUFBO0FEd0JKO0FDckJBO0VBQ0ksV0FBQTtFQUNBLGVBQUE7RUFDQSxhQUFBO0VBQ0EsZ0JBQUE7RUFDQSxrQkFBQTtBRHVCSjtBQ3BCQTtFQUFzQixtQkFBQTtBRHVCdEI7QUNyQkE7RUFDSSxXQUFBO0FEdUJKO0FDcEJBO0VBQ0ksc0JBQUE7RUFDQSxzQkFBQTtFQUNBLGtCQUFBO0VBQ0EsV0FBQTtFQUNBLGVBQUE7RUFDQSxnQkFBQTtFQUNBLFlBQUE7RUFDQSxZQUFBO0FEc0JKO0FDbkJBO0VBQW9DLFdBQUE7QURzQnBDO0FDcEJBO0VBQTJCLGFBQUE7QUR1QjNCO0FDckJBO0VBQXNCLDJCQUFBO0FEd0J0QjtBQ3RCQTtFQUNJLG1CQUFBO0VBQ0EsWUFBQTtBRHdCSjtBQ3JCQTtFQUNJLFdBQUE7RUFDQSxtQkFBQTtBRHVCSjtBQ3BCQTtFQUNJLFlBQUE7QURzQko7QUNuQkE7RUFDSSxtQkFBQTtFQUNBLG1CQUFBO0VBQ0EseUJBQUE7RUFDQSxXQUFBO0FEcUJKO0FDbEJBO0VBQ0ksd0JBQUE7RUFDQSwrQkFBQTtBRG9CSjtBQ2pCQTtFQUNJLFdBQUE7QURtQko7QUNoQkE7RUFBOEIsYUFBQTtBRG1COUI7QUNqQkE7RUFDSSxzQkFBQTtFQUNBLHNCQUFBO0VBQ0EsV0FBQTtBRG1CSiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvd29ya2xpc3Qtc2hlbGwvd29ya2xpc3QvcGF0aWVudC1lZGl0L3BhdGllbnQtZWRpdC5jb21wb25lbnQubGVzcyIsInNvdXJjZXNDb250ZW50IjpbIi8qQGJsYWNrOiAjMDAwO1xuQG9yYW5nZTogb3JhbmdlO1xuQGdyYXk6ICM1NTU7XG5Ac2lsdmVyOiAjYWFhO1xuQHdoaXRlOiAjZmZmOyovXG4vKi50aGVtZS1kYXJrIHtcbiAgICBAYmFja2dyb3VuZC1jb2xvciA6IEBibGFjaztcbiAgICBAdW5kZXJsaW5lLWNvbG9yIDogQG9yYW5nZTtcbiAgICBAYm9yZGVyLWNvbG9yIDogQHNpbHZlcjtcbiAgICBAY29udGFpbmVyLWJhY2tncm91bmQtY29sb3IgOiBAZ3JheTtcbiAgICBAZGlzYWJsZS1jb2xvciA6IEBncmF5O1xuICAgIEBmb250LWNvbG9yIDogQHdoaXRlO1xuICAgIC5jaGFuZ2UtZGFyayhAYmFja2dyb3VuZC1jb2xvcik7XG59XG5cblxuLnRoZW1lLWxpZ2h0IHtcbiAgICBAYmFja2dyb3VuZC1jb2xvciA6IEB3aGl0ZTtcbiAgICBAdW5kZXJsaW5lLWNvbG9yIDogQG9yYW5nZTtcbiAgICBAYm9yZGVyLWNvbG9yIDogQHdoaXRlO1xuICAgIEBkaXNhYmxlLWNvbG9yIDogQHdoaXRlO1xuICAgIEBjb250YWluZXItYmFja2dyb3VuZC1jb2xvciA6IEB3aGl0ZTtcbiAgICBAZm9udC1jb2xvcjogQGJsYWNrO1xuICAgIC5jaGFuZ2UtZGFyayhAYmFja2dyb3VuZC1jb2xvcik7XG59Ki9cbi5tYXQtZGlhbG9nLXRpdGxlIHtcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIG9yYW5nZTtcbiAgY29sb3I6IG9yYW5nZTtcbiAgZm9udC1zaXplOiAxNXB4O1xuICBtYXJnaW46IC0yNHB4IC0yNHB4IDBweCAtMjRweDtcbiAgbWluLXdpZHRoOiAyMDBweDtcbiAgcGFkZGluZzogMXB4IDEwcHg7XG59XG4ubWF0LWRpYWxvZy1jb250ZW50IHtcbiAgY29sb3I6ICNmZmY7XG4gIGZvbnQtc2l6ZTogMTVweDtcbiAgaGVpZ2h0OiA4MDBweDtcbiAgbWluLXdpZHRoOiA2NTBweDtcbiAgcGFkZGluZzogMTBweCAxMHB4O1xufVxuLm1hdC1kaWFsb2ctYWN0aW9ucyB7XG4gIG1hcmdpbi1yaWdodDogLTEycHg7XG59XG4ubWF0LWZvcm0tZmllbGQge1xuICB3aWR0aDogMTAwJTtcbn1cbi5tYXQtcmFpc2VkLWJ1dHRvbiB7XG4gIGJhY2tncm91bmQtY29sb3I6ICM1NTU7XG4gIGJvcmRlcjogMXB4IHNvbGlkICM3Nzc7XG4gIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgY29sb3I6ICNmZmY7XG4gIGZvbnQtc2l6ZTogMTNweDtcbiAgbWFyZ2luLWxlZnQ6IDZweDtcbiAgcGFkZGluZzogMXB4O1xuICB3aWR0aDogMTAwcHg7XG59XG4ubWF0LXJhaXNlZC1idXR0b246ZGlzYWJsZWQ6aG92ZXIge1xuICBjb2xvcjogIzU1NTtcbn1cbi5tYXQtcmFpc2VkLWJ1dHRvbjpob3ZlciB7XG4gIGNvbG9yOiBvcmFuZ2U7XG59XG4ubWF0LWRpYWxvZy1hY3Rpb25zIHtcbiAgZmxleC1kaXJlY3Rpb246IHJvdy1yZXZlcnNlO1xufVxuLm1hdElucHV0IHtcbiAgY2FyZXQtY29sb3I6IG9yYW5nZTtcbiAgY29sb3I6IGdyZWVuO1xufVxuLm1hdC1pbnB1dC1lbGVtZW50IHtcbiAgd2lkdGg6IDEwMCU7XG4gIGNhcmV0LWNvbG9yOiBvcmFuZ2U7XG59XG50ZCB7XG4gIHBhZGRpbmc6IDNweDtcbn1cbmlucHV0IHtcbiAgYmFja2dyb3VuZDogIzAwMDAwMDtcbiAgY2FyZXQtY29sb3I6IG9yYW5nZTtcbiAgYm9yZGVyOiAxcHggc29saWQgIzAwMDAwMDtcbiAgd2lkdGg6IDEwMCU7XG59XG5pbnB1dDpmb2N1cyB7XG4gIG91dGxpbmU6IG5vbmUgIWltcG9ydGFudDtcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIG9yYW5nZTtcbn1cbmlucHV0OmRpc2FibGVkIHtcbiAgY29sb3I6ICM1NTU7XG59XG46Oi13ZWJraXQtaW5uZXItc3Bpbi1idXR0b24ge1xuICBkaXNwbGF5OiBub25lO1xufVxuc2VsZWN0IHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDtcbiAgYm9yZGVyOiAxcHggc29saWQgIzMzMztcbiAgd2lkdGg6IDEwMCU7XG59XG4iLCJAaW1wb3J0IFwiLi4vLi4vLi4vLi4vLi4vdGhlbWVzLmxlc3NcIjtcblxuLm1hdC1kaWFsb2ctdGl0bGUge1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCBAdW5kZXJsaW5lLWNvbG9yO1xuICAgIGNvbG9yOiBAdW5kZXJsaW5lLWNvbG9yO1xuICAgIGZvbnQtc2l6ZTogMTVweDtcbiAgICBtYXJnaW46IC0yNHB4IC0yNHB4IDBweCAtMjRweDtcbiAgICBtaW4td2lkdGg6IDIwMHB4O1xuICAgIHBhZGRpbmc6IDFweCAxMHB4O1xufVxuXG4ubWF0LWRpYWxvZy1jb250ZW50IHtcbiAgICBjb2xvcjogQGZvbnQtY29sb3I7XG4gICAgZm9udC1zaXplOiAxNXB4O1xuICAgIGhlaWdodDogODAwcHg7XG4gICAgbWluLXdpZHRoOiA2NTBweDtcbiAgICBwYWRkaW5nOiAxMHB4IDEwcHg7XG59XG5cbi5tYXQtZGlhbG9nLWFjdGlvbnMgeyBtYXJnaW4tcmlnaHQ6IC0xMnB4OyB9XG5cbi5tYXQtZm9ybS1maWVsZCB7XG4gICAgd2lkdGg6IDEwMCU7XG59XG5cbi5tYXQtcmFpc2VkLWJ1dHRvbiB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogQGNvbnRhaW5lci1iYWNrZ3JvdW5kLWNvbG9yO1xuICAgIGJvcmRlcjogMXB4IHNvbGlkICM3Nzc7XG4gICAgYm9yZGVyLXJhZGl1czogM3B4O1xuICAgIGNvbG9yOiBAZm9udC1jb2xvcjtcbiAgICBmb250LXNpemU6IDEzcHg7XG4gICAgbWFyZ2luLWxlZnQ6IDZweDtcbiAgICBwYWRkaW5nOiAxcHg7XG4gICAgd2lkdGg6IDEwMHB4O1xufVxuXG4ubWF0LXJhaXNlZC1idXR0b246ZGlzYWJsZWQ6aG92ZXIgeyBjb2xvcjogQGRpc2FibGUtY29sb3I7IH1cblxuLm1hdC1yYWlzZWQtYnV0dG9uOmhvdmVyIHsgY29sb3I6IEB1bmRlcmxpbmUtY29sb3I7IH1cblxuLm1hdC1kaWFsb2ctYWN0aW9ucyB7IGZsZXgtZGlyZWN0aW9uOiByb3ctcmV2ZXJzZTsgfVxuXG4ubWF0SW5wdXQge1xuICAgIGNhcmV0LWNvbG9yOiBAdW5kZXJsaW5lLWNvbG9yO1xuICAgIGNvbG9yOiBncmVlbjtcbn1cblxuLm1hdC1pbnB1dC1lbGVtZW50IHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBjYXJldC1jb2xvcjogQHVuZGVybGluZS1jb2xvcjtcbn1cblxudGQge1xuICAgIHBhZGRpbmc6IDNweDtcbn1cblxuaW5wdXQge1xuICAgIGJhY2tncm91bmQ6ICMwMDAwMDA7XG4gICAgY2FyZXQtY29sb3I6QHVuZGVybGluZS1jb2xvcjtcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjMDAwMDAwO1xuICAgIHdpZHRoOiAxMDAlO1xufVxuXG5pbnB1dDpmb2N1c3tcbiAgICBvdXRsaW5lOiBub25lICFpbXBvcnRhbnQ7XG4gICAgYm9yZGVyLWJvdHRvbToxcHggc29saWQgQHVuZGVybGluZS1jb2xvcjtcbn1cblxuaW5wdXQ6ZGlzYWJsZWR7XG4gICAgY29sb3I6IEBkaXNhYmxlLWNvbG9yO1xufVxuXG46Oi13ZWJraXQtaW5uZXItc3Bpbi1idXR0b24geyBkaXNwbGF5OiBub25lOyB9XG5cbnNlbGVjdCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogQGJhY2tncm91bmQtY29sb3I7XG4gICAgYm9yZGVyOiAxcHggc29saWQgQGJvcmRlci1jb2xvcjtcbiAgICB3aWR0aDogMTAwJTtcbn0iXX0= */\"","import { Component, OnInit, Inject } from '@angular/core';\r\nimport { DialogService } from \"../../../../services/dialog.service\";\r\nimport { MAT_DIALOG_DATA, MatDialogRef, MatDatepickerInputEvent } from \"@angular/material\";\r\nimport { MessageBoxType, MessageBoxContent } from \"../../../../models/messageBox\";\r\nimport { Study, Series, StudyTemp, WorklistColumn } from \"../../../../models/pssi\";\r\nimport { WorklistService } from \"../../../../services/worklist.service\";\r\n\r\n// Import DatePicker format\r\nimport { MomentDateAdapter } from \"@angular/material-moment-adapter\";\r\nimport { DateAdapter, MAT_DATE_FORMATS, MAT_DATE_LOCALE } from \"@angular/material/core\";\r\n\r\nimport * as moment from 'moment';\r\n\r\nexport const MY_FORMATS = {\r\n    parse: {\r\n        dateInput: \"LL\",\r\n    },\r\n    display: {\r\n        dateInput: \"LL\",\r\n        monthYearLabel: \"MMM YYYY\",\r\n        dateA11yLabel: \"LL\",\r\n        monthYearA11yLabel: \"MMMM YYYY\",\r\n    },\r\n};\r\n\r\n@Component({\r\n  selector: 'app-patient-edit',\r\n  templateUrl: './patient-edit.component.html',\r\n  styleUrls: ['./patient-edit.component.less'],\r\n})\r\n\r\nexport class PatientEditComponent {\r\n    study: Study = new Study();\r\n    series: Series = new Series();\r\n    seriesNum: number = 0;\r\n    patientBirthDate: Date;\r\n    patientSexColumn: WorklistColumn = new WorklistColumn();\r\n\r\n    constructor(\r\n        public worklistService: WorklistService,\r\n        public dialogRef: MatDialogRef<PatientEditComponent>,\r\n        @Inject(MAT_DIALOG_DATA) study: Study,\r\n        private dialogService: DialogService) {\r\n\r\n        this.study = study;\r\n        this.patientBirthDate = new Date(this.study.patient.patientBirthDate);\r\n        this.patientSexColumn = worklistService.worklistColumns[2];\r\n\r\n        this.getSeriesValue(0);\r\n    }\r\n\r\n    onCancelClick(): void {\r\n        this.dialogRef.close();\r\n    }\r\n\r\n    onOkClick(): void {\r\n        this.study.patient.patientBirthDate = moment(this.patientBirthDate).format('MM/DD/YYYY');\r\n        this.worklistService.onUpdateStudy(this.study);\r\n        this.dialogRef.close();\r\n    }\r\n\r\n    getSeriesValue(seriesNum: number): void {\r\n        // Remove Study in Series for circular json issue\r\n        for (let i = 0; i < this.study.seriesList.length; i++) {\r\n            let seriesTemp = this.study.seriesList[i];\r\n            seriesTemp.study = new Study();\r\n            this.study.seriesList[i] = seriesTemp;\r\n        }\r\n\r\n        this.series = this.study.seriesList[seriesNum];\r\n\r\n        if (this.series.seriesNo == null) {\r\n            this.series.seriesNo = 1;\r\n        }\r\n    }\r\n\r\n    onSeriesChanged(optionValue) {\r\n        this.series = this.study.seriesList[optionValue];\r\n    }\r\n\r\n    onPatientSexChanged(optionValue) {\r\n        this.study.patient.patientSex = optionValue;\r\n    }\r\n}\r\n\r\n","module.exports = \"<div>\\r\\n    <table id=\\\"tblStudies\\\" class=\\\"table table-bordered table-condensed\\\">\\r\\n        <thead>\\r\\n            <tr id=\\\"trStudiesHeader\\\">\\r\\n                <th>\\r\\n                </th>\\r\\n                <th>\\r\\n                </th>\\r\\n                <th *ngFor=\\\"let col of worklistService.worklistColumns \\\" nowrap>\\r\\n                    <div id=\\\"headContent\\\" class=\\\"worklistHeader\\\">\\r\\n                        <table>\\r\\n                            <tr>\\r\\n                                <td>\\r\\n                                    <div (click)=\\\"onWorklistHeaderClicked(col.columnId)\\\">{{col.columnText}}</div>\\r\\n                                </td>\\r\\n                                <td>\\r\\n                                    <i id=\\\"orderIcon\\\" *ngIf=\\\"col.columnId == orderHeader\\\" [className]=\\\"isDesc ? 'glyphicon glyphicon-collapse-down' : 'glyphicon glyphicon-collapse-up'\\\"></i>\\r\\n                                </td>\\r\\n                            </tr>\\r\\n                        </table>\\r\\n                    </div>\\r\\n                </th>\\r\\n            </tr>\\r\\n            <tr id=\\\"trStudiesQuery\\\">\\r\\n                <td>\\r\\n                    <input type=\\\"checkbox\\\" (click)=\\\"onAllStudyChecked($event)\\\" (change)=\\\"onCheckStudyChanged()\\\" />\\r\\n                </td>\\r\\n                <td></td>\\r\\n                <td *ngFor=\\\"let col of worklistService.worklistColumns\\\">\\r\\n                    <div *ngIf=\\\"col.controlType == 'TextBox'\\\">\\r\\n                        <input type=\\\"text\\\" [(ngModel)]=\\\"col.shortcutType[col.columnId]\\\" />\\r\\n                    </div>\\r\\n                    <div *ngIf=\\\"col.controlType == 'DropDownList'\\\">\\r\\n                        <div *ngIf=\\\"col.columnId == 'studyDate'; else notStudyDate\\\">\\r\\n                            <div>\\r\\n                                <select *ngIf=\\\"!initStudyDate; else showStudyDateRange\\\" [(ngModel)]=\\\"col.shortcutType[col.columnId]\\\" (change)=\\\"onStudyDateChangeSelect($event.target.selectedIndex)\\\">\\r\\n                                    <option *ngFor=\\\"let value of col.valueList | keyvalue\\\" [ngValue]=\\\"value.key\\\">{{value.value}}</option>\\r\\n                                </select>\\r\\n                                <ng-template #showStudyDateRange>\\r\\n                                    <table (click)=\\\"onStudyDateRangeTableClicked()\\\">\\r\\n                                        <tr>\\r\\n                                            <td>\\r\\n                                                <mat-form-field>\\r\\n                                                    <input matInput [matDatepicker]=\\\"picker1\\\" [min]=\\\"fromMinDate\\\" [max]=\\\"fromMaxDate\\\" [(ngModel)]=\\\"worklistService.shortcut.studyDateFrom\\\"/>\\r\\n                                                    <mat-datepicker-toggle matSuffix [for]=\\\"picker1\\\"></mat-datepicker-toggle>\\r\\n                                                    <mat-datepicker #picker1></mat-datepicker>\\r\\n                                                </mat-form-field>\\r\\n                                            </td>\\r\\n                                            <td id=\\\"tdStudyDateFrom\\\">\\r\\n                                                <mat-form-field>\\r\\n                                                    <input matInput [matDatepicker]=\\\"picker2\\\" [min]=\\\"fromMinDate\\\" [max]=\\\"fromMaxDate\\\" placeholder=\\\"To\\\" [(ngModel)]=\\\"worklistService.shortcut.studyDateTo\\\" />\\r\\n                                                    <mat-datepicker-toggle matSuffix [for]=\\\"picker2\\\"></mat-datepicker-toggle>\\r\\n                                                    <mat-datepicker #picker2></mat-datepicker>\\r\\n                                                </mat-form-field>\\r\\n                                            </td>\\r\\n                                        </tr>\\r\\n                                    </table>\\r\\n                                </ng-template>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <ng-template #notStudyDate>\\r\\n                            <select [(ngModel)]=\\\"col.shortcutType[col.columnId]\\\">\\r\\n                                <option value=\\\"\\\">All</option>\\r\\n                                <option *ngFor=\\\"let value of col.valueList | keyvalue\\\" [ngValue]=\\\"value.key\\\">{{value.value}}</option>\\r\\n                            </select>\\r\\n                        </ng-template>\\r\\n                    </div>\\r\\n                    <div *ngIf=\\\"col.controlType == 'Calendar'\\\">\\r\\n                        <table>\\r\\n                            <tr>\\r\\n                                <td id=\\\"no-border\\\">\\r\\n                                    <mat-form-field>\\r\\n                                        <input matInput [matDatepicker]=\\\"picker1\\\" [min]=\\\"fromMinDate\\\" [max]=\\\"fromMaxDate\\\" placeholder=\\\"From\\\" (dateChange)=\\\"fromDateChanged('change', $event)\\\" [(ngModel)]=\\\"worklistService.shortcut.patientBirthDateFrom\\\" />\\r\\n                                        <mat-datepicker-toggle matSuffix [for]=\\\"picker1\\\"></mat-datepicker-toggle>\\r\\n                                        <mat-datepicker #picker1></mat-datepicker>\\r\\n                                    </mat-form-field>\\r\\n                                </td>\\r\\n                                <td>\\r\\n                                    <mat-form-field>\\r\\n                                        <input matInput [matDatepicker]=\\\"picker2\\\" [min]=\\\"toMinDate\\\" [max]=\\\"toMaxDate\\\" placeholder=\\\"To\\\" (dateChange)=\\\"toDateChanged('change', $event)\\\" [(ngModel)]=\\\"worklistService.shortcut.patientBirthDateTo\\\" />\\r\\n                                        <mat-datepicker-toggle matSuffix [for]=\\\"picker2\\\"></mat-datepicker-toggle>\\r\\n                                        <mat-datepicker #picker2></mat-datepicker>\\r\\n                                    </mat-form-field>\\r\\n                                </td>\\r\\n                            </tr>\\r\\n                        </table>\\r\\n                    </div>\\r\\n                </td>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n            <tr *ngFor=\\\"let study of worklistService.studies\\\">\\r\\n                <td>\\r\\n                    <input type=\\\"checkbox\\\" [(ngModel)]=\\\"study.studyChecked\\\" (change)=\\\"onCheckStudyChanged()\\\" />\\r\\n                </td>\\r\\n                <td>\\r\\n                    <div *ngIf=\\\"study.scanStatus == 'Ended'; else scanStatusCompleted\\\" class=\\\"setReadCover\\\">\\r\\n                        <button class=\\\"setRead\\\" role=\\\"button\\\" title=\\\"Set Read\\\" (click)=\\\"onSetRead(study)\\\"></button>\\r\\n                    </div>\\r\\n                    <ng-template #scanStatusCompleted>\\r\\n                        <div class=\\\"setUnreadCover\\\">\\r\\n                            <button class=\\\"setUnread\\\" role=\\\"button\\\" title=\\\"Set Unread\\\" (click)=\\\"onSetUnread(study)\\\"></button>\\r\\n                        </div>\\r\\n                    </ng-template>\\r\\n                </td>\\r\\n                <td *ngFor=\\\"let col of worklistService.worklistColumns\\\" (click)=\\\"onStudyChecked(study)\\\" nowrap>\\r\\n                    <div class=\\\"patientIdCol\\\" *ngIf=\\\"col.columnId == 'patientId'; else notPatientId\\\">\\r\\n                        <div *ngIf=\\\"study['instanceAvailability'] === 'Online'; else offlineStudy\\\" class=\\\"onlineStudy\\\" (click)=\\\"doShowStudy(study)\\\">\\r\\n                            {{study.patient[col.columnId]}}\\r\\n                        </div>\\r\\n                        <ng-template #offlineStudy>\\r\\n                            <div class=\\\"offlineStudy\\\">\\r\\n                                {{study.patient[col.columnId]}}\\r\\n                            </div>\\r\\n                        </ng-template>\\r\\n                    </div>\\r\\n                    <ng-template #notPatientId>\\r\\n                        <div *ngIf=\\\"study.patient[col.columnId]; else onlyStudy\\\">{{study.patient[col.columnId]}}</div>\\r\\n                        <ng-template #onlyStudy>\\r\\n                            <div *ngIf=\\\"col.columnId != 'bodyPartExamined'; else bodyPart\\\">{{study[col.columnId]}}</div>\\r\\n                            <ng-template #bodyPart>\\r\\n                                <span *ngFor=\\\"let bodyPart of study.bodyPartList; let i = index\\\">\\r\\n                                    <span *ngIf=\\\"i != 0\\\">\\r\\n                                        ,\\r\\n                                    </span>\\r\\n                                    {{bodyPart}}\\r\\n                                </span>\\r\\n                            </ng-template>\\r\\n                        </ng-template>\\r\\n                    </ng-template>\\r\\n                </td>\\r\\n            </tr>\\r\\n        </tbody>\\r\\n        <tfoot>\\r\\n            <tr id=\\\"trFoot\\\">\\r\\n                <td colspan=\\\"5\\\">\\r\\n                    <ul>\\r\\n                        <li>\\r\\n                            <div>Pages:{{currentPage}}/{{worklistService.pageCount}}</div>\\r\\n                        </li>\\r\\n                        <li>\\r\\n                            <button class=\\\"shortcut-name-button\\\" (click)=\\\"onCurrentPageClicked(1)\\\" [disabled]=\\\"worklistService.pageCount == 1 || currentPage == 1\\\">First</button>\\r\\n                        </li>\\r\\n                        <li>\\r\\n                            <button class=\\\"shortcut-name-button\\\" (click)=\\\"onPrevPageClicked()\\\" [disabled]=\\\"worklistService.pageCount == 1 || currentPage == 1\\\">Prev</button>\\r\\n                        </li>\\r\\n                        <li>\\r\\n                            <button class=\\\"shortcut-name-button\\\" (click)=\\\"onNextPageClicked()\\\" [disabled]=\\\"worklistService.pageCount == 1 || currentPage == worklistService.pageCount\\\">Next</button>\\r\\n                        </li>\\r\\n                        <li>\\r\\n                            <button class=\\\"shortcut-name-button\\\" (click)=\\\"onCurrentPageClicked(worklistService.pageCount)\\\" [disabled]=\\\"worklistService.pageCount == 1 || currentPage == worklistService.pageCount\\\">Last</button>\\r\\n                        </li>\\r\\n                        <li>\\r\\n                            <select id=\\\"ddlPageIndex\\\" [(ngModel)]=\\\"currentPage\\\">\\r\\n                                <option *ngFor=\\\"let page of worklistService.pages;\\\">{{page+1}}</option>\\r\\n                            </select>\\r\\n                        </li>\\r\\n                        <li>\\r\\n                            <button class=\\\"shortcut-name-button\\\" (click)=\\\"onCurrentPageClicked(currentPage)\\\" [disabled]=\\\"worklistService.pageCount == 1\\\">Goto</button>\\r\\n                        </li>\\r\\n                    </ul>\\r\\n                </td>\\r\\n            </tr>\\r\\n        </tfoot>\\r\\n    </table>\\r\\n</div>\\r\\n\\r\\n<mat-progress-spinner [style.visibility]=\\\"worklistService.querying? 'visible' : 'hidden'\\\" class=\\\"loading-shade\\\"\\r\\n                      [color]=\\\"color\\\"\\r\\n                      [mode]=\\\"mode\\\"\\r\\n                      [value]=\\\"value\\\">\\r\\n</mat-progress-spinner>\\r\\n\"","module.exports = \"/*@black: #000;\\n@orange: orange;\\n@gray: #555;\\n@silver: #aaa;\\n@white: #fff;*/\\n/*.theme-dark {\\n    @background-color : @black;\\n    @underline-color : @orange;\\n    @border-color : @silver;\\n    @container-background-color : @gray;\\n    @disable-color : @gray;\\n    @font-color : @white;\\n    .change-dark(@background-color);\\n}\\n\\n\\n.theme-light {\\n    @background-color : @white;\\n    @underline-color : @orange;\\n    @border-color : @white;\\n    @disable-color : @white;\\n    @container-background-color : @white;\\n    @font-color: @black;\\n    .change-dark(@background-color);\\n}*/\\n#tblStudies a {\\n  color: #fff;\\n}\\nul {\\n  list-style: none;\\n  -webkit-padding-start: 0px;\\n          padding-inline-start: 0px;\\n}\\nli {\\n  float: left;\\n  padding: 2px;\\n}\\nli button {\\n  cursor: pointer;\\n}\\nthead {\\n  background: #555;\\n}\\nthead tr {\\n  background-color: #555;\\n}\\nthead td {\\n  background-color: #555;\\n}\\nthead div {\\n  font-weight: normal;\\n}\\n.worklistHeader {\\n  cursor: pointer;\\n  min-width: 50px;\\n}\\n#headContent td tr {\\n  border: 0px;\\n}\\n#tblStudies td {\\n  border: 1px solid #333;\\n  color: #ccc;\\n}\\n#tblStudies td td {\\n  border: none;\\n}\\n#tblStudies th {\\n  border: 1px solid #333;\\n}\\n#tblStudies tr.cust-info td {\\n  background-color: #000;\\n}\\n#trStudiesHeader a {\\n  color: #ccc;\\n}\\n#trSeriesHeader a {\\n  color: #fff;\\n}\\n#trStudiesHeader tr td {\\n  border: hidden;\\n  padding-right: 5px;\\n}\\n#trStudiesQuery input[type=text] {\\n  background-color: #000;\\n  border: 1px solid #333;\\n  vertical-align: middle;\\n  width: 100%;\\n}\\n#trStudiesQuery input[type=checkbox] {\\n  background-color: #000;\\n  border: 1px solid #333;\\n  vertical-align: middle;\\n  width: 100%;\\n}\\nselect {\\n  background-color: #000;\\n  border: 1px solid #333;\\n  width: 100%;\\n}\\n#trStudiesQuery td:nth-child(n) {\\n  margin: 0px;\\n  padding: 1px;\\n  vertical-align: middle;\\n}\\n#tblStudies tbody tr:nth-child(2n) {\\n  background-color: #181818;\\n}\\n#tblStudies tbody tr:hover {\\n  background-color: #555;\\n  color: orange;\\n}\\n#trStudiesQuery .dropdown {\\n  background-color: #555;\\n  color: red;\\n}\\n#trStudiesQuery .dropdown .btn {\\n  background-color: #555;\\n  min-width: 70px;\\n  padding: 1px 6px;\\n}\\n.loading-shade {\\n  align-items: center;\\n  background: #000;\\n  bottom: 0px;\\n  display: flex;\\n  justify-content: center;\\n  left: 0px;\\n  margin: auto;\\n  position: fixed;\\n  right: 0px;\\n  top: 0px;\\n  z-index: 1;\\n}\\n.shortcut-name-button {\\n  background-color: transparent;\\n  border: none;\\n  border-width: 0px;\\n  color: inherit;\\n  outline: none;\\n}\\n.shortcut-name-button:disabled {\\n  color: #555;\\n}\\n.setRead,\\n.setUnread {\\n  border: none;\\n  height: 40px;\\n  outline: none;\\n  width: 40px;\\n}\\n.setRead {\\n  background: url('setRead_40_40_All.png') no-repeat left top;\\n  background-size: cover;\\n}\\n.setRead:hover {\\n  background: url('setRead_40_40_All.png') no-repeat right top;\\n  background-size: cover;\\n}\\n.setRead:active {\\n  background: url('setRead_40_40_All.png') no-repeat left bottom;\\n  background-size: cover;\\n}\\n.setRead:disabled {\\n  background: url('setRead_40_40_All.png') no-repeat right bottom;\\n  background-size: cover;\\n}\\n.setReadCover {\\n  height: 20px;\\n  width: 20px;\\n  overflow: hidden;\\n}\\n.setUnread {\\n  background: url('setUnread_40_40_All.png') no-repeat left top;\\n  background-size: cover;\\n}\\n.setUnread:hover {\\n  background: url('setUnread_40_40_All.png') no-repeat right top;\\n  background-size: cover;\\n}\\n.setUnread:active {\\n  background: url('setUnread_40_40_All.png') no-repeat left bottom;\\n  background-size: cover;\\n}\\n.setUnread:disabled {\\n  background: url('setUnread_40_40_All.png') no-repeat right bottom;\\n  background-size: cover;\\n}\\n.setUnreadCover {\\n  height: 20px;\\n  width: 20px;\\n  overflow: hidden;\\n}\\n.onlineStudy {\\n  color: #fff;\\n  text-decoration: underline;\\n  cursor: pointer;\\n}\\n.offlineStudy {\\n  color: #555;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy93b3JrbGlzdC1zaGVsbC93b3JrbGlzdC93b3JrbGlzdC5jb21wb25lbnQubGVzcyIsInNyYy9hcHAvY29tcG9uZW50cy93b3JrbGlzdC1zaGVsbC93b3JrbGlzdC9EOi9Xb3JrL0dpdC9JU0dpdFNlcnZlci9JbWFnZVZpZXdQYWNzL0NzaC5JbWFnZVN1aXRlLldlYkNsaWVudC9zcmMvYXBwL2NvbXBvbmVudHMvd29ya2xpc3Qtc2hlbGwvd29ya2xpc3Qvd29ya2xpc3QuY29tcG9uZW50Lmxlc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Y0FJYztBQUNkOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0VBbUJFO0FDdEJGO0VBQ0ksV0FBQTtBRHdCSjtBQ3JCQTtFQUNJLGdCQUFBO0VBQ0EsMEJBQUE7VUFBQSx5QkFBQTtBRHVCSjtBQ3BCQTtFQUNJLFdBQUE7RUFDQSxZQUFBO0FEc0JKO0FDbkJJO0VBQ0ksZUFBQTtBRHFCUjtBQ2xCQTtFQUNJLGdCQUFBO0FEb0JKO0FDakJBO0VBQ0ksc0JBQUE7QURtQko7QUNoQkE7RUFDSSxzQkFBQTtBRGtCSjtBQ2ZBO0VBQ0ksbUJBQUE7QURpQko7QUNkQTtFQUNJLGVBQUE7RUFDQSxlQUFBO0FEZ0JKO0FDYkE7RUFDSSxXQUFBO0FEZUo7QUNaQTtFQUNJLHNCQUFBO0VBQ0EsV0FBQTtBRGNKO0FDWEE7RUFDSSxZQUFBO0FEYUo7QUNUQTtFQUNJLHNCQUFBO0FEV0o7QUNSQTtFQUNJLHNCQUFBO0FEVUo7QUNQQTtFQUNJLFdBQUE7QURTSjtBQ05BO0VBQ0ksV0FBQTtBRFFKO0FDTEE7RUFDSSxjQUFBO0VBQ0Esa0JBQUE7QURPSjtBQ0pBO0VBQ0ksc0JBQUE7RUFDQSxzQkFBQTtFQUNBLHNCQUFBO0VBQ0EsV0FBQTtBRE1KO0FDSEE7RUFDSSxzQkFBQTtFQUNBLHNCQUFBO0VBQ0Esc0JBQUE7RUFDQSxXQUFBO0FES0o7QUNGQTtFQUNJLHNCQUFBO0VBQ0Esc0JBQUE7RUFDQSxXQUFBO0FESUo7QUNEQTtFQUNJLFdBQUE7RUFDQSxZQUFBO0VBQ0Esc0JBQUE7QURHSjtBQ0FBO0VBQ0kseUJBQUE7QURFSjtBQ0NBO0VBQ0ksc0JBQUE7RUFDQSxhQUFBO0FEQ0o7QUNHQTtFQUNJLHNCQUFBO0VBQ0EsVUFBQTtBRERKO0FDSUk7RUFDSSxzQkFBQTtFQUNBLGVBQUE7RUFDQSxnQkFBQTtBREZSO0FDS0E7RUFDSSxtQkFBQTtFQUNBLGdCQUFBO0VBQ0EsV0FBQTtFQUNBLGFBQUE7RUFDQSx1QkFBQTtFQUNBLFNBQUE7RUFDQSxZQUFBO0VBQ0EsZUFBQTtFQUNBLFVBQUE7RUFDQSxRQUFBO0VBQ0EsVUFBQTtBREhKO0FDTUE7RUFDSSw2QkFBQTtFQUNBLFlBQUE7RUFDQSxpQkFBQTtFQUNBLGNBQUE7RUFDQSxhQUFBO0FESko7QUNPQTtFQUNJLFdBQUE7QURMSjtBQ1FBOztFQUNJLFlBQUE7RUFDQSxZQUFBO0VBQ0EsYUFBQTtFQUNBLFdBQUE7QURMSjtBQ1FBO0VBQ0ksMkRBQUE7RUFDQSxzQkFBQTtBRE5KO0FDVUE7RUFBaUIsNERBQUE7RUFBMEYsc0JBQUE7QUROM0c7QUNRQTtFQUFrQiw4REFBQTtFQUE0RixzQkFBQTtBREo5RztBQ01BO0VBQW9CLCtEQUFBO0VBQTZGLHNCQUFBO0FERmpIO0FDSUE7RUFDSSxZQUFBO0VBQ0EsV0FBQTtFQUNBLGdCQUFBO0FERko7QUNLQTtFQUFhLDZEQUFBO0VBQTJGLHNCQUFBO0FERHhHO0FDR0E7RUFBbUIsOERBQUE7RUFBNEYsc0JBQUE7QURDL0c7QUNDQTtFQUFvQixnRUFBQTtFQUE4RixzQkFBQTtBREdsSDtBQ0RBO0VBQXNCLGlFQUFBO0VBQStGLHNCQUFBO0FES3JIO0FDSEE7RUFDSSxZQUFBO0VBQ0EsV0FBQTtFQUNBLGdCQUFBO0FES0o7QUNGQTtFQUNJLFdBQUE7RUFDQSwwQkFBQTtFQUNBLGVBQUE7QURJSjtBQ0RBO0VBQ0ksV0FBQTtBREdKIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50cy93b3JrbGlzdC1zaGVsbC93b3JrbGlzdC93b3JrbGlzdC5jb21wb25lbnQubGVzcyIsInNvdXJjZXNDb250ZW50IjpbIi8qQGJsYWNrOiAjMDAwO1xuQG9yYW5nZTogb3JhbmdlO1xuQGdyYXk6ICM1NTU7XG5Ac2lsdmVyOiAjYWFhO1xuQHdoaXRlOiAjZmZmOyovXG4vKi50aGVtZS1kYXJrIHtcbiAgICBAYmFja2dyb3VuZC1jb2xvciA6IEBibGFjaztcbiAgICBAdW5kZXJsaW5lLWNvbG9yIDogQG9yYW5nZTtcbiAgICBAYm9yZGVyLWNvbG9yIDogQHNpbHZlcjtcbiAgICBAY29udGFpbmVyLWJhY2tncm91bmQtY29sb3IgOiBAZ3JheTtcbiAgICBAZGlzYWJsZS1jb2xvciA6IEBncmF5O1xuICAgIEBmb250LWNvbG9yIDogQHdoaXRlO1xuICAgIC5jaGFuZ2UtZGFyayhAYmFja2dyb3VuZC1jb2xvcik7XG59XG5cblxuLnRoZW1lLWxpZ2h0IHtcbiAgICBAYmFja2dyb3VuZC1jb2xvciA6IEB3aGl0ZTtcbiAgICBAdW5kZXJsaW5lLWNvbG9yIDogQG9yYW5nZTtcbiAgICBAYm9yZGVyLWNvbG9yIDogQHdoaXRlO1xuICAgIEBkaXNhYmxlLWNvbG9yIDogQHdoaXRlO1xuICAgIEBjb250YWluZXItYmFja2dyb3VuZC1jb2xvciA6IEB3aGl0ZTtcbiAgICBAZm9udC1jb2xvcjogQGJsYWNrO1xuICAgIC5jaGFuZ2UtZGFyayhAYmFja2dyb3VuZC1jb2xvcik7XG59Ki9cbiN0YmxTdHVkaWVzIGEge1xuICBjb2xvcjogI2ZmZjtcbn1cbnVsIHtcbiAgbGlzdC1zdHlsZTogbm9uZTtcbiAgcGFkZGluZy1pbmxpbmUtc3RhcnQ6IDBweDtcbn1cbmxpIHtcbiAgZmxvYXQ6IGxlZnQ7XG4gIHBhZGRpbmc6IDJweDtcbn1cbmxpIGJ1dHRvbiB7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cbnRoZWFkIHtcbiAgYmFja2dyb3VuZDogIzU1NTtcbn1cbnRoZWFkIHRyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzU1NTtcbn1cbnRoZWFkIHRkIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzU1NTtcbn1cbnRoZWFkIGRpdiB7XG4gIGZvbnQtd2VpZ2h0OiBub3JtYWw7XG59XG4ud29ya2xpc3RIZWFkZXIge1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIG1pbi13aWR0aDogNTBweDtcbn1cbiNoZWFkQ29udGVudCB0ZCB0ciB7XG4gIGJvcmRlcjogMHB4O1xufVxuI3RibFN0dWRpZXMgdGQge1xuICBib3JkZXI6IDFweCBzb2xpZCAjMzMzO1xuICBjb2xvcjogI2NjYztcbn1cbiN0YmxTdHVkaWVzIHRkIHRkIHtcbiAgYm9yZGVyOiBub25lO1xufVxuI3RibFN0dWRpZXMgdGgge1xuICBib3JkZXI6IDFweCBzb2xpZCAjMzMzO1xufVxuI3RibFN0dWRpZXMgdHIuY3VzdC1pbmZvIHRkIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDtcbn1cbiN0clN0dWRpZXNIZWFkZXIgYSB7XG4gIGNvbG9yOiAjY2NjO1xufVxuI3RyU2VyaWVzSGVhZGVyIGEge1xuICBjb2xvcjogI2ZmZjtcbn1cbiN0clN0dWRpZXNIZWFkZXIgdHIgdGQge1xuICBib3JkZXI6IGhpZGRlbjtcbiAgcGFkZGluZy1yaWdodDogNXB4O1xufVxuI3RyU3R1ZGllc1F1ZXJ5IGlucHV0W3R5cGU9dGV4dF0ge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwO1xuICBib3JkZXI6IDFweCBzb2xpZCAjMzMzO1xuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xuICB3aWR0aDogMTAwJTtcbn1cbiN0clN0dWRpZXNRdWVyeSBpbnB1dFt0eXBlPWNoZWNrYm94XSB7XG4gIGJhY2tncm91bmQtY29sb3I6ICMwMDA7XG4gIGJvcmRlcjogMXB4IHNvbGlkICMzMzM7XG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XG4gIHdpZHRoOiAxMDAlO1xufVxuc2VsZWN0IHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDtcbiAgYm9yZGVyOiAxcHggc29saWQgIzMzMztcbiAgd2lkdGg6IDEwMCU7XG59XG4jdHJTdHVkaWVzUXVlcnkgdGQ6bnRoLWNoaWxkKG4pIHtcbiAgbWFyZ2luOiAwcHg7XG4gIHBhZGRpbmc6IDFweDtcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcbn1cbiN0YmxTdHVkaWVzIHRib2R5IHRyOm50aC1jaGlsZCgybikge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMTgxODE4O1xufVxuI3RibFN0dWRpZXMgdGJvZHkgdHI6aG92ZXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNTU1O1xuICBjb2xvcjogb3JhbmdlO1xufVxuI3RyU3R1ZGllc1F1ZXJ5IC5kcm9wZG93biB7XG4gIGJhY2tncm91bmQtY29sb3I6ICM1NTU7XG4gIGNvbG9yOiByZWQ7XG59XG4jdHJTdHVkaWVzUXVlcnkgLmRyb3Bkb3duIC5idG4ge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNTU1O1xuICBtaW4td2lkdGg6IDcwcHg7XG4gIHBhZGRpbmc6IDFweCA2cHg7XG59XG4ubG9hZGluZy1zaGFkZSB7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGJhY2tncm91bmQ6ICMwMDA7XG4gIGJvdHRvbTogMHB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgbGVmdDogMHB4O1xuICBtYXJnaW46IGF1dG87XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgcmlnaHQ6IDBweDtcbiAgdG9wOiAwcHg7XG4gIHotaW5kZXg6IDE7XG59XG4uc2hvcnRjdXQtbmFtZS1idXR0b24ge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgYm9yZGVyOiBub25lO1xuICBib3JkZXItd2lkdGg6IDBweDtcbiAgY29sb3I6IGluaGVyaXQ7XG4gIG91dGxpbmU6IG5vbmU7XG59XG4uc2hvcnRjdXQtbmFtZS1idXR0b246ZGlzYWJsZWQge1xuICBjb2xvcjogIzU1NTtcbn1cbi5zZXRSZWFkLFxuLnNldFVucmVhZCB7XG4gIGJvcmRlcjogbm9uZTtcbiAgaGVpZ2h0OiA0MHB4O1xuICBvdXRsaW5lOiBub25lO1xuICB3aWR0aDogNDBweDtcbn1cbi5zZXRSZWFkIHtcbiAgYmFja2dyb3VuZDogdXJsKC4uLy4uLy4uLy4uL2Fzc2V0cy9pbWcvYnV0dG9uL3NldFJlYWRfNDBfNDBfQWxsLnBuZykgbm8tcmVwZWF0IGxlZnQgdG9wO1xuICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xufVxuLnNldFJlYWQ6aG92ZXIge1xuICBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vc2V0UmVhZF80MF80MF9BbGwucG5nKSBuby1yZXBlYXQgcmlnaHQgdG9wO1xuICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xufVxuLnNldFJlYWQ6YWN0aXZlIHtcbiAgYmFja2dyb3VuZDogdXJsKC4uLy4uLy4uLy4uL2Fzc2V0cy9pbWcvYnV0dG9uL3NldFJlYWRfNDBfNDBfQWxsLnBuZykgbm8tcmVwZWF0IGxlZnQgYm90dG9tO1xuICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xufVxuLnNldFJlYWQ6ZGlzYWJsZWQge1xuICBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vc2V0UmVhZF80MF80MF9BbGwucG5nKSBuby1yZXBlYXQgcmlnaHQgYm90dG9tO1xuICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xufVxuLnNldFJlYWRDb3ZlciB7XG4gIGhlaWdodDogMjBweDtcbiAgd2lkdGg6IDIwcHg7XG4gIG92ZXJmbG93OiBoaWRkZW47XG59XG4uc2V0VW5yZWFkIHtcbiAgYmFja2dyb3VuZDogdXJsKC4uLy4uLy4uLy4uL2Fzc2V0cy9pbWcvYnV0dG9uL3NldFVucmVhZF80MF80MF9BbGwucG5nKSBuby1yZXBlYXQgbGVmdCB0b3A7XG4gIGJhY2tncm91bmQtc2l6ZTogY292ZXI7XG59XG4uc2V0VW5yZWFkOmhvdmVyIHtcbiAgYmFja2dyb3VuZDogdXJsKC4uLy4uLy4uLy4uL2Fzc2V0cy9pbWcvYnV0dG9uL3NldFVucmVhZF80MF80MF9BbGwucG5nKSBuby1yZXBlYXQgcmlnaHQgdG9wO1xuICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xufVxuLnNldFVucmVhZDphY3RpdmUge1xuICBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vc2V0VW5yZWFkXzQwXzQwX0FsbC5wbmcpIG5vLXJlcGVhdCBsZWZ0IGJvdHRvbTtcbiAgYmFja2dyb3VuZC1zaXplOiBjb3Zlcjtcbn1cbi5zZXRVbnJlYWQ6ZGlzYWJsZWQge1xuICBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vc2V0VW5yZWFkXzQwXzQwX0FsbC5wbmcpIG5vLXJlcGVhdCByaWdodCBib3R0b207XG4gIGJhY2tncm91bmQtc2l6ZTogY292ZXI7XG59XG4uc2V0VW5yZWFkQ292ZXIge1xuICBoZWlnaHQ6IDIwcHg7XG4gIHdpZHRoOiAyMHB4O1xuICBvdmVyZmxvdzogaGlkZGVuO1xufVxuLm9ubGluZVN0dWR5IHtcbiAgY29sb3I6ICNmZmY7XG4gIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG4ub2ZmbGluZVN0dWR5IHtcbiAgY29sb3I6ICM1NTU7XG59XG4iLCJAaW1wb3J0ICcuLi8uLi8uLi8uLi90aGVtZXMubGVzcyc7XG5cbiN0YmxTdHVkaWVzIGEge1xuICAgIGNvbG9yOiBAZm9udC1jb2xvcjtcbn1cblxudWwge1xuICAgIGxpc3Qtc3R5bGU6IG5vbmU7XG4gICAgcGFkZGluZy1pbmxpbmUtc3RhcnQ6IDBweDtcbn1cblxubGkge1xuICAgIGZsb2F0OiBsZWZ0O1xuICAgIHBhZGRpbmc6IDJweDtcbn1cblxuICAgIGxpIGJ1dHRvbiB7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICB9XG5cbnRoZWFkIHtcbiAgICBiYWNrZ3JvdW5kOiBAY29udGFpbmVyLWJhY2tncm91bmQtY29sb3I7XG59XG5cbnRoZWFkIHRyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBAY29udGFpbmVyLWJhY2tncm91bmQtY29sb3I7XG59XG5cbnRoZWFkIHRkIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBAY29udGFpbmVyLWJhY2tncm91bmQtY29sb3I7XG59XG5cbnRoZWFkIGRpdiB7XG4gICAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcbn1cblxuLndvcmtsaXN0SGVhZGVyIHtcbiAgICBjdXJzb3I6cG9pbnRlcjtcbiAgICBtaW4td2lkdGg6NTBweDtcbn1cblxuI2hlYWRDb250ZW50IHRkIHRye1xuICAgIGJvcmRlcjogMHB4O1xufVxuXG4jdGJsU3R1ZGllcyB0ZCB7XG4gICAgYm9yZGVyOiAxcHggc29saWQgQGJvcmRlci1jb2xvcjtcbiAgICBjb2xvcjogQGZvbnQtc2Vjb25kLWNvbG9yO1xufVxuXG4jdGJsU3R1ZGllcyB0ZCB0ZCB7XG4gICAgYm9yZGVyIDogbm9uZTtcbn1cblxuXG4jdGJsU3R1ZGllcyB0aCB7XG4gICAgYm9yZGVyOiAxcHggc29saWQgQGJvcmRlci1jb2xvcjtcbn1cblxuI3RibFN0dWRpZXMgdHIuY3VzdC1pbmZvIHRkIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBAYmFja2dyb3VuZC1jb2xvcjtcbn1cblxuI3RyU3R1ZGllc0hlYWRlciBhIHtcbiAgICBjb2xvcjogQGZvbnQtc2Vjb25kLWNvbG9yO1xufVxuXG4jdHJTZXJpZXNIZWFkZXIgYSB7XG4gICAgY29sb3I6IEBmb250LWNvbG9yO1xufVxuXG4jdHJTdHVkaWVzSGVhZGVyIHRyIHRkIHtcbiAgICBib3JkZXI6aGlkZGVuO1xuICAgIHBhZGRpbmctcmlnaHQ6NXB4O1xufVxuXG4jdHJTdHVkaWVzUXVlcnkgaW5wdXRbdHlwZT10ZXh0XSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogQGJhY2tncm91bmQtY29sb3I7XG4gICAgYm9yZGVyOiAxcHggc29saWQgQGJvcmRlci1jb2xvcjtcbiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xuICAgIHdpZHRoOiAxMDAlO1xufVxuXG4jdHJTdHVkaWVzUXVlcnkgaW5wdXRbdHlwZT1jaGVja2JveF0ge1xuICAgIGJhY2tncm91bmQtY29sb3I6IEBiYWNrZ3JvdW5kLWNvbG9yO1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIEBib3JkZXItY29sb3I7XG4gICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcbiAgICB3aWR0aDogMTAwJTtcbn1cblxuc2VsZWN0IHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBAYmFja2dyb3VuZC1jb2xvcjtcbiAgICBib3JkZXI6IDFweCBzb2xpZCBAYm9yZGVyLWNvbG9yO1xuICAgIHdpZHRoOiAxMDAlO1xufVxuXG4jdHJTdHVkaWVzUXVlcnkgdGQ6bnRoLWNoaWxkKG4pIHtcbiAgICBtYXJnaW46IDBweDtcbiAgICBwYWRkaW5nOiAxcHg7XG4gICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcbn1cblxuI3RibFN0dWRpZXMgdGJvZHkgdHI6bnRoLWNoaWxkKDJuKSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogQG9kZC10ci1jb2xvcjtcbn1cblxuI3RibFN0dWRpZXMgdGJvZHkgdHI6aG92ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6IEBjb250YWluZXItYmFja2dyb3VuZC1jb2xvcjtcbiAgICBjb2xvcjogQHVuZGVybGluZS1jb2xvcjtcbn1cblxuXG4jdHJTdHVkaWVzUXVlcnkgLmRyb3Bkb3duIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBAY29udGFpbmVyLWJhY2tncm91bmQtY29sb3I7XG4gICAgY29sb3I6IEBlcnJvci1jb2xvcjtcbn1cblxuICAgICN0clN0dWRpZXNRdWVyeSAuZHJvcGRvd24gLmJ0biB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IEBjb250YWluZXItYmFja2dyb3VuZC1jb2xvcjtcbiAgICAgICAgbWluLXdpZHRoOiA3MHB4O1xuICAgICAgICBwYWRkaW5nOiAxcHggNnB4O1xuICAgIH1cblxuLmxvYWRpbmctc2hhZGUge1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgYmFja2dyb3VuZDogQGJhY2tncm91bmQtY29sb3I7XG4gICAgYm90dG9tOiAwcHg7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBsZWZ0OiAwcHg7XG4gICAgbWFyZ2luOiBhdXRvO1xuICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICByaWdodDogMHB4O1xuICAgIHRvcDogMHB4O1xuICAgIHotaW5kZXg6IDE7XG59XG5cbi5zaG9ydGN1dC1uYW1lLWJ1dHRvbiB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgYm9yZGVyOiBub25lO1xuICAgIGJvcmRlci13aWR0aDogMHB4O1xuICAgIGNvbG9yOiBpbmhlcml0O1xuICAgIG91dGxpbmU6IG5vbmU7XG59XG5cbi5zaG9ydGN1dC1uYW1lLWJ1dHRvbjpkaXNhYmxlZCB7XG4gICAgY29sb3I6IEBkaXNhYmxlLWNvbG9yO1xufVxuXG4uc2V0UmVhZCwgLnNldFVucmVhZCB7XG4gICAgYm9yZGVyOiBub25lO1xuICAgIGhlaWdodDogNDBweDtcbiAgICBvdXRsaW5lOiBub25lO1xuICAgIHdpZHRoOiA0MHB4O1xufVxuXG4uc2V0UmVhZCB7IFxuICAgIGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL2J1dHRvbi9zZXRSZWFkXzQwXzQwX0FsbC5wbmcpIG5vLXJlcGVhdCBsZWZ0IHRvcCA7XG4gICAgYmFja2dyb3VuZC1zaXplOiBjb3Zlcjtcbn1cblxuXG4uc2V0UmVhZDpob3ZlciB7IGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL2J1dHRvbi9zZXRSZWFkXzQwXzQwX0FsbC5wbmcpIG5vLXJlcGVhdCByaWdodCB0b3A7IGJhY2tncm91bmQtc2l6ZTogY292ZXI7fVxuXG4uc2V0UmVhZDphY3RpdmUgeyBiYWNrZ3JvdW5kOiB1cmwoLi4vLi4vLi4vLi4vYXNzZXRzL2ltZy9idXR0b24vc2V0UmVhZF80MF80MF9BbGwucG5nKSBuby1yZXBlYXQgbGVmdCBib3R0b207IGJhY2tncm91bmQtc2l6ZTogY292ZXI7fVxuXG4uc2V0UmVhZDpkaXNhYmxlZCB7IGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL2J1dHRvbi9zZXRSZWFkXzQwXzQwX0FsbC5wbmcpIG5vLXJlcGVhdCByaWdodCBib3R0b207IGJhY2tncm91bmQtc2l6ZTogY292ZXI7fVxuXG4uc2V0UmVhZENvdmVyIHtcbiAgICBoZWlnaHQ6IDIwcHg7XG4gICAgd2lkdGg6IDIwcHg7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbn1cblxuLnNldFVucmVhZCB7IGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL2J1dHRvbi9zZXRVbnJlYWRfNDBfNDBfQWxsLnBuZykgbm8tcmVwZWF0IGxlZnQgdG9wOyBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO31cblxuLnNldFVucmVhZDpob3ZlciB7IGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi8uLi9hc3NldHMvaW1nL2J1dHRvbi9zZXRVbnJlYWRfNDBfNDBfQWxsLnBuZykgbm8tcmVwZWF0IHJpZ2h0IHRvcDsgYmFja2dyb3VuZC1zaXplOiBjb3Zlcjt9XG5cbi5zZXRVbnJlYWQ6YWN0aXZlIHsgYmFja2dyb3VuZDogdXJsKC4uLy4uLy4uLy4uL2Fzc2V0cy9pbWcvYnV0dG9uL3NldFVucmVhZF80MF80MF9BbGwucG5nKSBuby1yZXBlYXQgbGVmdCBib3R0b207IGJhY2tncm91bmQtc2l6ZTogY292ZXI7fVxuXG4uc2V0VW5yZWFkOmRpc2FibGVkIHsgYmFja2dyb3VuZDogdXJsKC4uLy4uLy4uLy4uL2Fzc2V0cy9pbWcvYnV0dG9uL3NldFVucmVhZF80MF80MF9BbGwucG5nKSBuby1yZXBlYXQgcmlnaHQgYm90dG9tOyBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO31cblxuLnNldFVucmVhZENvdmVyIHtcbiAgICBoZWlnaHQ6IDIwcHg7XG4gICAgd2lkdGg6IDIwcHg7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbn1cblxuLm9ubGluZVN0dWR5IHtcbiAgICBjb2xvcjogQGZvbnQtY29sb3I7XG4gICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4ub2ZmbGluZVN0dWR5IHtcbiAgICBjb2xvcjpAY29udGFpbmVyLWJhY2tncm91bmQtY29sb3I7XG59XG5cbiJdfQ== */\"","import { Component, OnInit, SimpleChange } from \"@angular/core\";\r\nimport { Shortcut } from \"../../../models/shortcut\";\r\nimport { Subscription } from \"rxjs\";\r\nimport { Study, WorklistColumn } from \"../../../models/pssi\";\r\nimport { WorklistService } from \"../../../services/worklist.service\";\r\nimport {\r\n    MatDatepickerInputEvent, MatButton\r\n} from \"@angular/material\";\r\nimport { DialogService } from \"../../../services/dialog.service\";\r\nimport { SelectStudydateDialogComponent } from \"../../../components/dialog/select-studydate-dialog/select-studydate-dialog.component\";\r\n// Import DatePicker format\r\nimport { MomentDateAdapter } from \"@angular/material-moment-adapter\";\r\nimport { DateAdapter, MAT_DATE_FORMATS, MAT_DATE_LOCALE } from \"@angular/material/core\";\r\nimport { DateRange } from \"../../../models/dailog-data/date-range\";\r\n\r\nexport const MY_FORMATS = {\r\n    parse: {\r\n        dateInput: \"LL\",\r\n    },\r\n    display: {\r\n        dateInput: \"LL\",\r\n        monthYearLabel: \"MMM YYYY\",\r\n        dateA11yLabel: \"LL\",\r\n        monthYearA11yLabel: \"MMMM YYYY\",\r\n    },\r\n};\r\n\r\nexport interface PeriodicElement {\r\n    name: string;\r\n    position: number;\r\n    weight: number;\r\n    symbol: string;\r\n}\r\n\r\n\r\n@Component({\r\n    selector: \"app-worklist\",\r\n    templateUrl: \"./worklist.component.html\",\r\n    styleUrls: [\"./worklist.component.less\"],\r\n    providers: [\r\n        // i18n\r\n        { provide: MAT_DATE_LOCALE, useValue: \"zh-CN\" },\r\n        { provide: DateAdapter, useClass: MomentDateAdapter, deps: [MAT_DATE_LOCALE] },\r\n        { provide: MAT_DATE_FORMATS, useValue: MY_FORMATS },\r\n    ],\r\n})\r\nexport class WorklistComponent implements OnInit {\r\n    color = \"#primary\";\r\n    mode = \"indeterminate\";\r\n    value = 50;\r\n\r\n    shortcutSelected: Subscription;\r\n\r\n    events: string[] = [];\r\n\r\n    fromMinDate = new Date(1900, 1, 1);\r\n    fromMaxDate = new Date();\r\n\r\n    toMinDate = new Date();\r\n    toMaxDate = new Date();\r\n\r\n    currentPage = 1;\r\n\r\n    isDesc = false;\r\n    orderHeader = \"\"; \r\n\r\n    initStudyDate: DateRange;\r\n\r\n    myplaceHolder: string = 'Enter Name';\r\n\r\n\r\n    fromDateChanged(type: string, event: MatDatepickerInputEvent<Date>) {\r\n        this.toMinDate = event.value;\r\n    }\r\n\r\n    toDateChanged(type: string, event: MatDatepickerInputEvent<Date>) {\r\n        this.fromMaxDate = event.value;\r\n    }\r\n\r\n    constructor(public worklistService: WorklistService, public dialogService: DialogService) {\r\n        this.shortcutSelected = this.worklistService.shortcutSelected$.subscribe(\r\n            shortcut => this.onShortcutSelected(shortcut));\r\n\r\n        \r\n    }\r\n\r\n    onShortcutSelected(shortcut: Shortcut) {\r\n        this.worklistService.shortcut = shortcut;\r\n    }\r\n\r\n    worklistColumnsTemp: string[] = [\r\n        \"PatientID\",\r\n        \"PatientName\",\r\n        \"Gender\",\r\n        \"BirthDate\",\r\n        \"AccessionNo\",\r\n        \"Modality\",\r\n        \"StudyDate\",\r\n        \"StudyTime\",\r\n        \"SeriesCount\",\r\n        \"ImageCount\",\r\n        \"StudyID\"\r\n    ];\r\n\r\n    ngOnChanges(changes: { [propKey: string]: SimpleChange }) {\r\n        //alert('aa');\r\n    }\r\n\r\n\r\n    ngOnInit() {\r\n        this.worklistService.onQueryStudies(1);\r\n        this.worklistService.onQueryShortcuts();\r\n        this.worklistService.onQueryWorklistCol();\r\n    }\r\n\r\n    onStudyChecked(study: Study) {\r\n        study.studyChecked = !study.studyChecked;\r\n        this.onCheckStudyChanged();\r\n    }\r\n\r\n    onAllStudyChecked(event) {\r\n        this.worklistService.studies.forEach(study => study.studyChecked = event.target.studyChecked);\r\n    }\r\n\r\n    doShowStudy(study: Study) {\r\n        study.studyChecked = true;\r\n        this.worklistService.onShowSingleStudy(study);\r\n    }\r\n\r\n    onStudyDateChangeSelect(optionValue) {\r\n        if (optionValue == \"7\") {\r\n            let studyDate = new DateRange;\r\n            this.dialogService.showDialog(SelectStudydateDialogComponent, studyDate).subscribe(\r\n                val => {\r\n                    this.getStudyDate(val);\r\n                }\r\n            );\r\n        }\r\n    }\r\n\r\n    getStudyDate(studyDate: DateRange) {\r\n        this.initStudyDate = studyDate;\r\n        this.worklistService.shortcut.studyDateFrom = studyDate.dateFrom;\r\n        this.worklistService.shortcut.studyDateTo = studyDate.dateTo;\r\n    }\r\n\r\n    onPrevPageClicked() {\r\n        this.currentPage = this.currentPage - 1;\r\n        this.worklistService.onQueryStudies(this.currentPage);\r\n    }\r\n\r\n    onNextPageClicked() {\r\n        this.currentPage = this.currentPage + 1;\r\n        this.worklistService.onQueryStudies(this.currentPage);\r\n    }\r\n\r\n    onCurrentPageClicked(i) {\r\n        this.currentPage = +i;\r\n        this.worklistService.onQueryStudies(this.currentPage);\r\n    }\r\n\r\n    onWorklistHeaderClicked(clickedHeader) {\r\n        this.orderHeader = clickedHeader;\r\n\r\n        if (!this.isDesc) {\r\n            this.isDesc = true;\r\n            this.worklistService.onQueryStudies(this.currentPage, clickedHeader + \"|Desc\");\r\n        }\r\n        else {\r\n            this.isDesc = false;\r\n            this.worklistService.onQueryStudies(this.currentPage, clickedHeader + \"|\");\r\n        }\r\n    }\r\n\r\n    onStudyDateRangeTableClicked() {\r\n        this.initStudyDate = null;\r\n    }\r\n\r\n    onSetRead(study: Study) {\r\n        this.worklistService.onSetRead(study);\r\n    }\r\n\r\n    onSetUnread(study: Study) {\r\n        this.worklistService.onSetUnread(study);\r\n    }\r\n\r\n    onCheckStudyChanged() {\r\n        this.worklistService.onCheckStudyChanged();\r\n    }\r\n\r\n    checkPlaceHolder() {\r\n        if (this.myplaceHolder) {\r\n            this.myplaceHolder = null;\r\n            return;\r\n        } else {\r\n            this.myplaceHolder = 'Enter Name';\r\n            return;\r\n        }\r\n    }\r\n}\r\n","﻿export enum PositionInRectangle {\r\n    Top,\r\n    TopLeft,\r\n    TopRight,\r\n    Left,\r\n    Right,\r\n    Bottom,\r\n    BottomLeft,\r\n    BottomRight\r\n}\r\n\r\n\r\n// Annotation type, copied from ImageSuite Acq.\r\n// The annotation type in Web and Acq is different. Not sure why.\r\nexport enum AnnType {\r\n    None = 0,\r\n    Select,\r\n    Rect,\r\n    RectEx,\r\n    Ellipse,\r\n    Pointer,\r\n    FreeArea,\r\n    Text,\r\n    Ruler,\r\n    Protractor,\r\n    Arrow,\r\n    Stamp,\r\n    Multiline,\r\n    HeartChestRatio,\r\n    CobbAngle,\r\n    LipmanCobbAngle,\r\n    Coxometry,\r\n    Goniometry,\r\n    Gd,\r\n    Vd,\r\n    Vhs,\r\n    Tta,\r\n    Tplo,\r\n    Laminitis,\r\n    Polygon,\r\n    Blade,\r\n    Chiro,\r\n    Gonstead,\r\n    Vaxis,\r\n    VlineDistance,\r\n    LineExt,\r\n    CervicalCurve,\r\n    LumbarCurve,\r\n    GeorgeLine,\r\n    LineEx1,\r\n    OffsetCobbAngle,\r\n    ExtendedCobbAngle,\r\n    MarkSpot,\r\n    LineRatio,\r\n    VerticalDeflection,\r\n    HorizontalDeflection,\r\n    GeorgesLineNew,\r\n    Ara,\r\n    VertebralCompression,\r\n    Cmap,\r\n    LoganBasicMarking\r\n}\r\n\r\nexport enum MouseEventType {\r\n    Click = 1,\r\n    MouseDown = 2,\r\n    MouseMove = 3,\r\n    MouseUp = 4,\r\n    MouseOver = 5,\r\n    MouseOut = 6,\r\n    RightClick = 7,\r\n    DblClick = 8,\r\n    MouseWheel = 9\r\n}\r\n\r\nexport class Point {\r\n    x: number;\r\n    y: number;\r\n\r\n    constructor(x: number, y: number) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n}\r\n\r\nexport class Size {\r\n    cx: number;\r\n    cy: number;\r\n\r\n    constructor(cx: number, cy: number) {\r\n        this.cx = cx;\r\n        this.cy = cy;\r\n    }\r\n}\r\n\r\nexport class Rectangle {\r\n    x: number;\r\n    y: number;\r\n    width: number;\r\n    height: number;\r\n\r\n    constructor(x: number, y: number, width: number, height: number) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.width = width;\r\n        this.height = height;\r\n    }\r\n}\r\n\r\nexport class AnnotationDefinitionData {\r\n    classType: any;\r\n    cursorName: string;\r\n    needGuide: boolean;\r\n    imageSuiteAnnName: string;\r\n    imageSuiteAnnType: AnnType;\r\n\r\n    className: string;\r\n\r\n    constructor(classType: any, cursorName: string, needGuide: boolean, imageSuiteAnnName: string, imageSuiteAnnType: AnnType) {\r\n        this.classType = classType;\r\n        this.cursorName = cursorName;\r\n        this.needGuide = needGuide;\r\n        this.imageSuiteAnnName = imageSuiteAnnName;\r\n        this.imageSuiteAnnType = imageSuiteAnnType;\r\n\r\n        this.className = classType.name;\r\n    }\r\n}\r\n\r\n// The configuration data for each step of the annotation\r\nexport class AnnGuideStepConfig {\r\n    // The name of the guide picture\r\n    imageName: string;\r\n\r\n    // The tip text for creating annotation\r\n    tipTextCreating: string;\r\n\r\n    // The tip text for viewing annotation\r\n    tipTextCreated: string;\r\n\r\n    constructor(imageName: string, tipTextCreating: string, tipTextCreated: string = undefined) {\r\n        this.imageName = imageName;\r\n        this.tipTextCreating = tipTextCreating;\r\n        this.tipTextCreated = tipTextCreated ? tipTextCreated : tipTextCreating;\r\n    }\r\n}\r\n\r\n// The running data for each step\r\nexport class AnnGuideStepData {\r\n    // The config data\r\n    annGuideStepConfig: AnnGuideStepConfig\r\n\r\n    // The image source string of the tutor image\r\n    imageSrc: string;\r\n\r\n    // The image data of the tutor image\r\n    imageData = new Image();\r\n\r\n    // The jc object for the step button background \r\n    jcBackground: any;\r\n\r\n    // The jc object for the step button background border\r\n    jcBackgroundBorder: any;\r\n\r\n    // The jc object for the tip text\r\n    jcText: any;\r\n\r\n    // The index for the step\r\n    stepIndex: number;\r\n\r\n    constructor(stepIndex: number, baseUrl: string, annGuideStepConfig: AnnGuideStepConfig) {\r\n        this.annGuideStepConfig = annGuideStepConfig;\r\n        this.stepIndex = stepIndex;\r\n        this.imageSrc = baseUrl + \"assets/img/TutorImage/\" + annGuideStepConfig.imageName;\r\n    }\r\n\r\n    loadImage() {\r\n        this.imageData.src = this.imageSrc;\r\n    }\r\n\r\n    getTipText(annCreated: boolean): string {\r\n        return annCreated ? this.annGuideStepConfig.tipTextCreated : this.annGuideStepConfig.tipTextCreating;\r\n    }\r\n\r\n    del() {\r\n        if (this.jcBackground) this.jcBackground.del();\r\n        if (this.jcBackgroundBorder) this.jcBackgroundBorder.del();\r\n        if (this.jcText) this.jcText.del();\r\n    }\r\n}\r\n\r\n// The action button of the guide\r\nexport class AnnGuideActionButton {\r\n    // If the button is disabled\r\n    disabled = false;\r\n\r\n    // There are four states for a button\r\n    imageTypeList = [\"disabled\", \"hover\", \"select\", \"up\"];\r\n\r\n    // The image source string for the four states\r\n    imageSrcList = [];\r\n\r\n    // The image data for the four states\r\n    imageDataList = [];\r\n\r\n    // The jc object for the image\r\n    jcImage: any;\r\n\r\n    // Callback for button click\r\n    onButtonClick: any;\r\n\r\n    constructor(baseUrl: string, buttonName: string, onButtonClick: any) {\r\n        baseUrl += \"assets/img/TutorImage/\";\r\n        this.onButtonClick = onButtonClick;\r\n\r\n        this.imageTypeList.forEach(type => {\r\n            this.imageSrcList.push(baseUrl + buttonName + \"_\" + type + \".png\");\r\n            this.imageDataList.push(new Image());\r\n        });\r\n    }\r\n\r\n    loadImage() {\r\n        for (let i = 0; i < this.imageDataList.length; i ++) {\r\n            this.imageDataList[i].src = this.imageSrcList[i];\r\n        }\r\n    }\r\n\r\n    del() {\r\n        if (this.jcImage) this.jcImage.del();\r\n    }\r\n\r\n    visible(visible: boolean) {\r\n        if (this.jcImage) {\r\n            this.jcImage.visible(visible);\r\n        }\r\n    }\r\n\r\n    onDisabled() {\r\n        this.jcImage._img = this.imageDataList[0];\r\n        this.disabled = true;\r\n    }\r\n\r\n    onHover() {\r\n        this.jcImage._img = this.imageDataList[1];\r\n        this.disabled = false;\r\n    }\r\n\r\n    onSelect() {\r\n        this.jcImage._img = this.imageDataList[2];\r\n        this.disabled = false;\r\n    }\r\n\r\n    onUp() {\r\n        this.jcImage._img = this.imageDataList[3];\r\n        this.disabled = false;\r\n    }\r\n\r\n    getUpImage(): any {\r\n        return this.imageDataList[3];\r\n    }\r\n\r\n    getDisabledImage(): any {\r\n        return this.imageDataList[0];\r\n    }\r\n\r\n    isDisabled(): boolean {\r\n        return this.disabled;\r\n    }\r\n}\r\n\r\n\r\nexport class AnnGuideData {\r\n    annName: string;\r\n\r\n    guideStepConfigList: Array<AnnGuideStepConfig> = [];\r\n    guideStepImageList = [];\r\n\r\n    constructor(annName: string) {\r\n        this.annName = annName;\r\n    }\r\n\r\n    addStepConfig(annGuideStepConfig: AnnGuideStepConfig) {\r\n        this.guideStepConfigList.push(annGuideStepConfig);\r\n    }\r\n\r\n    addStepImage(stepImage: any) {\r\n        this.guideStepImageList.push(stepImage);\r\n    }\r\n}\r\n\r\n\r\n","﻿export class DateRange {\r\n    dateFrom: Date;\r\n    dateTo: Date;\r\n}\r\n","﻿export class WindowLevelData {\r\n    windowCenter: number;\r\n    windowWidth: number;\r\n}\r\n","﻿import { OperationData } from \"../services/view-context.service\";\r\n\r\nexport class SelectedButtonData {\r\n    name: string;       // Button's image name\r\n    tip: string;        // Button's tip\r\n    operationData: OperationData;\r\n}\r\n\r\nexport class ButtonStyleToken {\r\n    normal: string;\r\n    over: string;\r\n    down: string;\r\n    disable: string;\r\n}\r\n","﻿export enum GroupHangingProtocol {\r\n    ByPatent = 1,\r\n    ByStudy = 2,\r\n    BySeries = 3,\r\n    FreeHang = 10,\r\n    FreeHang_1X1 = 11,\r\n    FreeHang_1X2 = 12,\r\n    FreeHang_2X1 = 21,\r\n    FreeHang_2X2 = 22,\r\n    FreeHang_3X3 = 33\r\n}\r\n\r\nexport enum ImageHangingProtocol {\r\n    Auto = 1, // the layout will be determined by it modality.\r\n    FreeHang = 10,\r\n    FreeHang_1X1 = 11,\r\n    FreeHang_1X2 = 12,\r\n    FreeHang_2X1 = 21,\r\n    FreeHang_2X2 = 22,\r\n    FreeHang_3X3 = 33,\r\n    FreeHang_4X3 = 43,\r\n    FreeHang_6X5 = 65\r\n}\r\n\r\nexport class GroupHangingData {\r\n    groupHangingProtocol: GroupHangingProtocol;\r\n    name: string;\r\n    tip: string;\r\n}\r\n\r\nexport class ImageHangingData {\r\n    imageHangingProtocol: ImageHangingProtocol;\r\n    name: string;\r\n    tip: string;\r\n}\r\n","﻿export enum LayoutContent {\r\n    Patient,\r\n    Study,\r\n    Series,\r\n    Image\r\n}\r\n\r\nexport class LayoutPosition {\r\n    rowIndex: number;\r\n    colIndex: number;\r\n\r\n    constructor(rowIndex: number, colIndex: number) {\r\n        this.rowIndex = rowIndex;\r\n        this.colIndex = colIndex;\r\n    }\r\n\r\n    getId(): string {\r\n        return `${this.rowIndex}${this.colIndex}`;\r\n    }\r\n\r\n    static fromNumber(positionNumber: number, colCount: number): LayoutPosition {\r\n        const layoutPosition = new LayoutPosition(0, 0);\r\n        layoutPosition.rowIndex = Math.trunc(positionNumber / colCount);\r\n        layoutPosition.colIndex = positionNumber % colCount;\r\n        return layoutPosition;\r\n    }\r\n\r\n    equal(layoutPosition: LayoutPosition): boolean {\r\n        return this.rowIndex === layoutPosition.rowIndex && this.colIndex === layoutPosition.colIndex;\r\n    }\r\n}\r\n\r\nexport class LayoutMatrix {\r\n    rowCount: number;\r\n    colCount: number;\r\n\r\n    constructor(rowCount: number, colCount: number) {\r\n        this.rowCount = rowCount;\r\n        this.colCount = colCount;\r\n    }\r\n\r\n    static fromNumber(matrixNumber: number): LayoutMatrix {\r\n        const layoutMatrix = new LayoutMatrix(1, 1);\r\n        layoutMatrix.rowCount = Math.trunc(matrixNumber / 10);\r\n        layoutMatrix.colCount = matrixNumber % 10;\r\n        return layoutMatrix;\r\n    }\r\n\r\n    equal(layoutMatrix: LayoutMatrix): boolean {\r\n        return this.rowCount === layoutMatrix.rowCount && this.colCount === layoutMatrix.colCount;\r\n    }\r\n}\r\n","﻿\r\nexport enum MessageBoxType {\r\n    Info,\r\n    Question,\r\n    Warning,\r\n    Error,\r\n    Input,\r\n    InfoCancel\r\n}\r\n\r\nexport enum DialogResult {\r\n    Ok,\r\n    Cancel,\r\n    Yes,\r\n    No\r\n}\r\n\r\nexport class MessageBoxContent {\r\n    title: string;\r\n    messageText: string;\r\n    messageType: MessageBoxType;\r\n    callbackOwner: any;\r\n    callbackFunction: any;\r\n    callbackArg: any;\r\n}\r\n","﻿export class FontData {\r\n    name: string;\r\n    color: string;\r\n    size: number;\r\n\r\n    constructor(name: string, color: string, size: number) {\r\n        this.name = name;\r\n        this.color = color;\r\n        this.size = size;\r\n    }\r\n\r\n    getCanvasFontString(): string {\r\n        return \"{0}px {1}\".format(this.size, this.name);\r\n    }\r\n} \r\n\r\nexport class MarkerData {\r\n    displayText: string;\r\n    imageName: string;\r\n}\r\n\r\nexport class MarkerGroupData {\r\n    groupName: string;\r\n    markerDataTable: MarkerData[][];\r\n}","﻿export class TextOverlayData {\r\n    gridX: number;\r\n    gridY: number;\r\n    offsetX: number;\r\n    offsetY: number;\r\n    prefix: string;\r\n    suffix: string;\r\n    overlayId: string;\r\n    overlayUid: string;\r\n    overlayName: string;\r\n    modality: string;\r\n    localName: string;\r\n    dicomName: string;\r\n    tableName: string;\r\n    fieldName: string;\r\n    groupNumber: number;\r\n    elementNumber: number;\r\n}\r\n\r\nexport class TextOverlayDisplayGroup {\r\n    gridX: number;\r\n    gridY: number;\r\n    modality: string;\r\n\r\n    itemListAlignLeft: TextOverlayData[];\r\n    itemListAlignRight: TextOverlayData[];\r\n\r\n    constructor(overlay: TextOverlayData) {\r\n        this.gridX = overlay.gridX;\r\n        this.gridY = overlay.gridY;\r\n        this.modality = overlay.modality;\r\n        this.itemListAlignLeft = [];\r\n        this.itemListAlignRight = [];\r\n    }\r\n\r\n    match(overlay: TextOverlayData): boolean {\r\n        return this.gridX === overlay.gridX && this.gridY === overlay.gridY && this.modality === overlay.modality;\r\n    }\r\n\r\n    add(overlay: TextOverlayData) {\r\n        overlay.offsetX > 0 ? this.itemListAlignLeft.push(overlay) : this.itemListAlignRight.push(overlay);\r\n    }\r\n}\r\n\r\nexport class TextOverlayDisplayItem {\r\n    id: string;\r\n    posX: number;\r\n    posY: number;\r\n    text: string;\r\n    align: string;\r\n}\r\n\r\nexport class GraphicOverlayData {\r\n    rows: number;\r\n    cols: number;\r\n    startX: number;\r\n    startY: number;\r\n\r\n    type: string;\r\n    label: string;\r\n    desc: string;\r\n    dataList = [];\r\n}","﻿import { Shortcut } from \"../models/shortcut\";\r\nimport { Size } from \"../models/annotation\";\r\n\r\nexport abstract class Pssi {\r\n    id: number;\r\n    hide: boolean;\r\n\r\n    abstract setHide(hide: boolean): void;\r\n}\r\n\r\nexport class Patient extends Pssi {\r\n\r\n    patientId: string;\r\n    patientName: string;\r\n    firstName: string;\r\n    middleName: string;\r\n    lastName: string;\r\n    patientBirthDate: string;\r\n    patientSex: string;\r\n    patientAge: string;\r\n    breed: string;\r\n    species: string;\r\n    patientComments: string;\r\n\r\n    studyList: Array<Study>;\r\n\r\n    setHide(hide: boolean) {\r\n        this.hide = hide;\r\n        this.studyList.forEach(study => study.setHide(hide));\r\n    }\r\n\r\n    static clone(patient: Patient, cloneChild: boolean): Patient {\r\n        const clonedPatient = new Patient();\r\n\r\n        clonedPatient.id = patient.id;\r\n        clonedPatient.patientId = patient.patientId;\r\n        clonedPatient.patientName = patient.patientName;\r\n        clonedPatient.firstName = patient.firstName;\r\n        clonedPatient.middleName = patient.middleName;\r\n        clonedPatient.lastName = patient.lastName;\r\n        clonedPatient.patientBirthDate = patient.patientBirthDate;\r\n        clonedPatient.patientSex = patient.patientSex;\r\n        clonedPatient.patientAge = patient.patientAge;\r\n        clonedPatient.breed = patient.breed;\r\n        clonedPatient.species = patient.species;\r\n        clonedPatient.patientComments = patient.patientComments;\r\n\r\n        clonedPatient.studyList = new Array<Study>();\r\n        if (cloneChild) {\r\n            patient.studyList.forEach(study => {\r\n                const clonedStudy = Study.clone(study, cloneChild);\r\n                clonedStudy.patient = clonedPatient;\r\n                clonedPatient.studyList.push(clonedStudy);\r\n            });\r\n        }\r\n\r\n        return clonedPatient;\r\n    }\r\n}\r\n\r\nexport class Study extends Pssi {\r\n\r\n    studyChecked: boolean;\r\n    detailsLoaded: boolean;\r\n\r\n    studyInstanceUid: string;\r\n    studyId: string;\r\n    studyDate: string;\r\n    studyTime: string;\r\n    accessionNo: string;\r\n    seriesCount: number;\r\n    imageCount: number;\r\n    modality: string;\r\n    studyDescription: string;\r\n    referPhysician: string;\r\n    tokenId: string;\r\n    additionalPatientHistory: string;\r\n    veterinarian: string;\r\n    requestedProcPriority: string;\r\n\r\n    instanceAvailability: string;\r\n    printed: string;\r\n    reserved: string;\r\n    readed: string;\r\n    scanStatus: string;\r\n\r\n    accessGroups: string;\r\n    send: number;\r\n\r\n    patient: Patient;\r\n    seriesList: Array<Series>;\r\n    bodyPartList: Array<string>;\r\n\r\n    setHide(hide: boolean) {\r\n        this.hide = hide;\r\n        this.seriesList.forEach(series => series.setHide(hide));\r\n    }\r\n\r\n    static clone(study: Study, cloneChild: boolean): Study {\r\n        const clonedStudy = new Study();\r\n\r\n        clonedStudy.studyChecked = study.studyChecked;\r\n        clonedStudy.detailsLoaded = study.detailsLoaded;\r\n\r\n        clonedStudy.id = study.id;\r\n        clonedStudy.studyId = study.studyId;\r\n        clonedStudy.studyInstanceUid = study.studyInstanceUid;\r\n        clonedStudy.studyDate = study.studyDate;\r\n        clonedStudy.studyTime = study.studyTime;\r\n        clonedStudy.accessionNo = study.accessionNo;\r\n        clonedStudy.seriesCount = study.seriesCount;\r\n        clonedStudy.imageCount = study.imageCount;\r\n        clonedStudy.modality = study.modality;\r\n        clonedStudy.studyDescription = study.studyDescription;\r\n        clonedStudy.referPhysician = study.referPhysician;\r\n        clonedStudy.tokenId = study.tokenId;\r\n        clonedStudy.additionalPatientHistory = study.additionalPatientHistory;\r\n        clonedStudy.veterinarian = study.veterinarian;\r\n        clonedStudy.requestedProcPriority = study.requestedProcPriority;\r\n\r\n        clonedStudy.seriesList = new Array<Series>();\r\n        if (cloneChild) {\r\n            study.seriesList.forEach(series => {\r\n                const clonedSeries = Series.clone(series, cloneChild);\r\n                clonedSeries.study = clonedStudy;\r\n                clonedStudy.seriesList.push(clonedSeries);\r\n            });\r\n        }\r\n\r\n        return clonedStudy;\r\n    }\r\n}\r\n\r\n\r\nexport class Series extends Pssi {\r\n\r\n    seriesInstanceUid: string;\r\n    modality: string;\r\n    seriesDateString: string;\r\n    seriesTimeString: string;\r\n    bodyPart: string;\r\n    viewPosition: string;\r\n    seriesNo: number;\r\n    imageCount: number;\r\n    contrastBolus: string;\r\n    localBodyPart: string;\r\n    seriesDescription: string;\r\n    operatorName: string;\r\n    referHospital: string;\r\n    patientPosition: string;\r\n    localViewPosition: string;\r\n\r\n    study: Study;\r\n    imageList: Array<Image>;\r\n\r\n    setHide(hide: boolean) {\r\n        this.hide = hide;\r\n        this.imageList.forEach(image => image.setHide(hide));\r\n    }\r\n\r\n    static clone(series: Series, cloneChild: boolean): Series {\r\n        const clonedSeries = new Series();\r\n\r\n        clonedSeries.id = series.id;\r\n        clonedSeries.seriesInstanceUid = series.seriesInstanceUid;\r\n        clonedSeries.modality = series.modality;\r\n        clonedSeries.seriesDateString = series.seriesDateString;\r\n        clonedSeries.seriesTimeString = series.seriesTimeString;\r\n        clonedSeries.bodyPart = series.bodyPart;\r\n        clonedSeries.viewPosition = series.viewPosition;\r\n        clonedSeries.seriesNo = series.seriesNo;\r\n        clonedSeries.imageCount = series.imageCount;\r\n        clonedSeries.contrastBolus = series.contrastBolus;\r\n        clonedSeries.localBodyPart = series.localBodyPart;\r\n        clonedSeries.seriesDescription = series.seriesDescription;\r\n        clonedSeries.operatorName = series.operatorName;\r\n        clonedSeries.referHospital = series.referHospital;\r\n        clonedSeries.patientPosition = series.patientPosition;\r\n        clonedSeries.localViewPosition = series.localViewPosition;\r\n\r\n        clonedSeries.imageList = new Array<Image>();\r\n        if (cloneChild) {\r\n            series.imageList.forEach(image => {\r\n                const clonedImage = Image.clone(image, cloneChild);\r\n                clonedImage.series = clonedSeries;\r\n                clonedSeries.imageList.push(clonedImage);\r\n            });\r\n        }\r\n\r\n        return clonedSeries;\r\n    }\r\n}\r\n\r\nexport class Image extends Pssi {\r\n\r\n    series: Series;\r\n    objectFile: string;\r\n    imageColumns: number;\r\n    imageRows: number;\r\n    keyImage: string;\r\n    imageNo: string;\r\n    bitsAllocated: number;\r\n    acquisitionTime: string;\r\n    imageTime: string;\r\n    acquisitionDate: string;\r\n    imageDate: string;\r\n\r\n    annObjList = [];\r\n    graphicOverlayDataList = [];\r\n\r\n    cornerStoneImage: any;\r\n    annData: Uint8Array;\r\n    serializeJson: string;\r\n    transformMatrix: any;\r\n    windowCenter: number;\r\n    windowWidth: number;\r\n\r\n    static clone(image: Image, cloneChild: boolean): Image {\r\n        const clonedImage = new Image();\r\n\r\n        clonedImage.id = image.id;\r\n        clonedImage.objectFile = image.objectFile;\r\n        clonedImage.imageColumns = image.imageColumns;\r\n        clonedImage.imageRows = image.imageRows;\r\n        clonedImage.keyImage = image.keyImage;\r\n        clonedImage.imageNo = image.imageNo;\r\n        clonedImage.bitsAllocated = image.bitsAllocated;\r\n        clonedImage.acquisitionTime = image.acquisitionTime;\r\n        clonedImage.acquisitionDate = image.acquisitionDate;\r\n        clonedImage.imageTime = image.imageTime;\r\n        clonedImage.imageDate = image.imageDate;\r\n\r\n        return clonedImage;\r\n    }\r\n\r\n    setHide(hide: boolean) {\r\n        this.hide = hide;\r\n    }\r\n\r\n    width() {\r\n        return this.imageColumns;\r\n    }\r\n\r\n    height() {\r\n        return this.imageRows;\r\n    }\r\n\r\n    getRotateAngle(): number {\r\n        if (!this.transformMatrix)\r\n            return 0;\r\n\r\n        const transImg = this.transformMatrix;\r\n        const n1 = transImg[0][0];\r\n        const n3 = transImg[0][1];\r\n        const n5 = transImg[0][2];\r\n        const n2 = transImg[1][0];\r\n        const n4 = transImg[1][1];\r\n        const n6 = transImg[1][2]; //transform dy\r\n\r\n        const a = n1;\r\n        const b = n3;\r\n        const c = n2;\r\n        const d = n4;\r\n\r\n        const scale = Math.sqrt(a * a + b * b);\r\n\r\n        // arc sin, convert from radians to degrees, round\r\n        const sin = b / scale;\r\n        // next line works for 30deg but not 130deg (returns 50);\r\n        // var angle = Math.round(Math.asin(sin) * (180/Math.PI));\r\n        const angle = Math.round(Math.atan2(b, a) * (180 / Math.PI));\r\n\r\n        return angle;\r\n    }\r\n\r\n    getScaleValue(): number {\r\n        if (!this.transformMatrix)\r\n            return 1;\r\n\r\n        const transImg = this.transformMatrix;\r\n        const n1 = transImg[0][0];\r\n        const n3 = transImg[0][1];\r\n        const n5 = transImg[0][2];\r\n        const n2 = transImg[1][0];\r\n        const n4 = transImg[1][1];\r\n        const n6 = transImg[1][2]; //transform dy\r\n\r\n        const a = n1;\r\n        const b = n3;\r\n        const c = n2;\r\n        const d = n4;\r\n\r\n        const scale = Math.sqrt(a * a + b * b);\r\n        return scale;\r\n    }\r\n\r\n    getPixelSpacing(): Size {\r\n        let tagValue = this.cornerStoneImage.data.string(\"x00280030\");\r\n        if (!tagValue) {\r\n            tagValue = this.cornerStoneImage.data.string(\"x00181164\");\r\n        }\r\n        if (!tagValue) {\r\n            return null;\r\n        }\r\n\r\n        const valueList = tagValue.split(\"\\\\\");\r\n        if (valueList.length !== 2) {\r\n            return null;\r\n        }\r\n\r\n        const pixelSpacing = new Size(0, 0);\r\n        pixelSpacing.cx = Number(valueList[0]);\r\n        pixelSpacing.cy = Number(valueList[1]);\r\n\r\n        return pixelSpacing;\r\n    }\r\n\r\n    setCornerStoneImage(ctImage: any) {\r\n        let annData = undefined;\r\n\r\n        const element = ctImage.data.elements[\"x0011101d\"];\r\n        if (element) {\r\n            annData = new Uint8Array(element.length);\r\n            for (let i = 0; i < element.length; i++) {\r\n                annData[i] = ctImage.data.byteArray[element.dataOffset + i];\r\n            }\r\n        }\r\n\r\n        this.annData = annData;\r\n        this.cornerStoneImage = ctImage;\r\n    }\r\n}\r\n\r\nexport class MultiframeImage extends Image {\r\n\r\n}\r\n\r\nexport class WorklistColumn {\r\n    columnId: string;\r\n    columnText: string;\r\n    sortDirection: string;\r\n    controlType: string;\r\n    valueList: Array<string>;\r\n    columnSequence: number;\r\n    visible: boolean;\r\n    shortcutType: Shortcut;\r\n    studyCol: Study;\r\n}\r\n\r\nexport class RecWorklistData {\r\n    public studies: Study[];\r\n    public pageCount: number;\r\n    public worklistColumns: WorklistColumn[];\r\n}\r\n\r\nexport class RecOfflineImageInfo {\r\n    public isOffline: boolean;\r\n    public studyOfflineUidUSBList: string[];\r\n    public popUpStudyOfflineMessage: string;\r\n\r\n}\r\n\r\nexport class StudyTemp extends Pssi {\r\n\r\n    studyChecked: boolean;\r\n    detailsLoaded: boolean;\r\n\r\n    studyInstanceUid: string;\r\n    studyId: string;\r\n    studyDate: string;\r\n    studyTime: string;\r\n    accessionNo: string;\r\n    seriesCount: number;\r\n    imageCount: number;\r\n    modality: string;\r\n    studyDescription: string;\r\n    referPhysician: string;\r\n    tokenId: string;\r\n    additionalPatientHistory: string;\r\n    veterinarian: string;\r\n    requestedProcPriority: string;\r\n\r\n    instanceAvailability: string;\r\n    printed: string;\r\n    reserved: string;\r\n    readed: string;\r\n    scanStatus: string;\r\n\r\n    accessGroups: string;\r\n    send: number;\r\n\r\n    patient: PatientTemp;\r\n    seriesList: Array<Series>;\r\n    bodyPartList: Array<string>;\r\n\r\n    setHide(hide: boolean) {\r\n        this.hide = hide;\r\n        this.seriesList.forEach(series => series.setHide(hide));\r\n    }\r\n\r\n    static clone(study: Study, cloneChild: boolean): Study {\r\n        const clonedStudy = new Study();\r\n\r\n        clonedStudy.studyChecked = study.studyChecked;\r\n        clonedStudy.detailsLoaded = study.detailsLoaded;\r\n\r\n        clonedStudy.id = study.id;\r\n        clonedStudy.studyId = study.studyId;\r\n        clonedStudy.studyInstanceUid = study.studyInstanceUid;\r\n        clonedStudy.studyDate = study.studyDate;\r\n        clonedStudy.studyTime = study.studyTime;\r\n        clonedStudy.accessionNo = study.accessionNo;\r\n        clonedStudy.seriesCount = study.seriesCount;\r\n        clonedStudy.imageCount = study.imageCount;\r\n        clonedStudy.modality = study.modality;\r\n        clonedStudy.studyDescription = study.studyDescription;\r\n        clonedStudy.referPhysician = study.referPhysician;\r\n        clonedStudy.tokenId = study.tokenId;\r\n        clonedStudy.additionalPatientHistory = study.additionalPatientHistory;\r\n        clonedStudy.veterinarian = study.veterinarian;\r\n        clonedStudy.requestedProcPriority = study.requestedProcPriority;\r\n\r\n        clonedStudy.seriesList = new Array<Series>();\r\n        if (cloneChild) {\r\n            study.seriesList.forEach(series => {\r\n                const clonedSeries = Series.clone(series, cloneChild);\r\n                clonedSeries.study = clonedStudy;\r\n                clonedStudy.seriesList.push(clonedSeries);\r\n            });\r\n        }\r\n\r\n        return clonedStudy;\r\n    }\r\n}\r\n\r\nclass PatientTemp {\r\n\r\n}","﻿export enum DataSource {\r\n    LocalTestData = 1,\r\n    MiniPacs = 2,\r\n    OtherPacs = 3\r\n}\r\n\r\nexport class Shortcut {\r\n    id: number;\r\n    name: string;\r\n    dataSource: DataSource;\r\n\r\n    patientId: string;\r\n    patientName: string;\r\n    gender: string;\r\n    modality: string;\r\n    studyDate: string;\r\n    studyDateFrom: Date;\r\n    studyDateTo: Date;\r\n    patientBirthDateFrom: Date;\r\n    patientBirthDateTo: Date;\r\n    studyId: string;\r\n    accessionNo: string;\r\n    instanceAvailability: string;\r\n    bodyPartExamined: string;\r\n    scanStatus: string;\r\n    studyDescription: string;\r\n    reserved: string;\r\n    readed: string;\r\n    printed: string;\r\n\r\n    constructor() {\r\n        this.id = -1;\r\n        this.name = \"\";\r\n        this.dataSource = DataSource.LocalTestData;\r\n\r\n        this.clearCondition();\r\n    }\r\n\r\n    static createDefaultShortcut(name: string): Shortcut {\r\n        const shortcut = new Shortcut();\r\n        shortcut.id = 0;\r\n        shortcut.name = name;\r\n        shortcut.dataSource = DataSource.MiniPacs;\r\n        shortcut.studyDate = name;\r\n\r\n        return shortcut;\r\n    }\r\n\r\n    clearCondition() {\r\n        this.patientId = \"\";\r\n        this.patientName = \"\";\r\n        this.gender = \"\";\r\n        this.modality = \"\";\r\n        this.studyDate = \"\";\r\n        this.patientBirthDateFrom = null;\r\n        this.patientBirthDateTo = null;\r\n        this.studyDateFrom = null;\r\n        this.studyDateTo = null;\r\n        this.studyId = \"\";\r\n        this.accessionNo = \"\";\r\n        this.instanceAvailability = \"\";\r\n        this.bodyPartExamined = \"\";\r\n        this.studyDescription = \"\";\r\n        this.reserved = \"\";\r\n        this.readed = \"\";\r\n        this.printed = \"\";\r\n    }\r\n\r\n    copyConditionFrom(shortcut: Shortcut) {\r\n        this.patientId = shortcut.patientId;\r\n        this.patientName = shortcut.patientName;\r\n        this.gender = shortcut.gender;\r\n        this.modality = shortcut.modality;\r\n        this.studyDate = shortcut.studyDate;\r\n        this.patientBirthDateFrom = shortcut.patientBirthDateFrom;\r\n        this.patientBirthDateTo = shortcut.patientBirthDateTo;\r\n        this.studyDateFrom = shortcut.studyDateFrom;\r\n        this.studyDateTo = shortcut.studyDateTo;\r\n        this.studyId = shortcut.studyId;\r\n        this.accessionNo = shortcut.accessionNo;\r\n        this.instanceAvailability = shortcut.instanceAvailability;\r\n        this.bodyPartExamined = shortcut.bodyPartExamined;\r\n        this.studyDescription = shortcut.studyDescription;\r\n        this.reserved = shortcut.reserved;\r\n        this.readed = shortcut.readed;\r\n        this.printed = shortcut.printed;\r\n    }\r\n\r\n    clone(theObj) {\r\n        const obj = {};\r\n        for (let key in theObj) {\r\n            obj[key] = theObj[key];\r\n        }\r\n        return obj;\r\n    }\r\n}\r\n","﻿import { ImageHangingProtocol } from \"../models/hanging-protocol\";\r\nimport { ViewerShellData } from \"../models/viewer-shell-data\";\r\nimport { LayoutPosition, LayoutMatrix } from \"../models/layout\";\r\nimport { ViewerImageData } from \"../models/viewer-image-data\";\r\nimport { Image } from \"../models/pssi\";\r\nimport { LogService } from \"../services/log.service\";\r\n\r\nexport class ViewerGroupData {\r\n    static logService: LogService;\r\n    viewerShellData: ViewerShellData;\r\n    imageHangingProtocol: ImageHangingProtocol;\r\n    position: LayoutPosition;\r\n\r\n    imageCount = 0;\r\n    imageMatrix: LayoutMatrix;\r\n    imageDataList = new Array<ViewerImageData>();\r\n\r\n    constructor(viewerShellData: ViewerShellData,\r\n        imageHangingProtocol: ImageHangingProtocol,\r\n        position: LayoutPosition) {\r\n        this.viewerShellData = viewerShellData;\r\n        this.imageHangingProtocol = imageHangingProtocol;\r\n        this.position = position;\r\n\r\n        ViewerGroupData.logService.debug(\"ViewerGroupData \" + this.getId() + \" created!\");\r\n    }\r\n\r\n    getId(): string {\r\n        return this.viewerShellData.getId() + \"_\" + this.position.getId();\r\n    }\r\n\r\n    getIndex(): number {\r\n        return this.position.rowIndex * this.viewerShellData.groupMatrix.colCount + this.position.colIndex;\r\n    }\r\n\r\n    setPosition(position: LayoutPosition) {\r\n        this.position = position;\r\n    }\r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Image Operation\r\n    cleanImage() {\r\n        this.imageDataList.length = 0;\r\n        this.imageCount = 0;\r\n    }\r\n\r\n    getImage(rowIndex: number, colIndex: number): ViewerImageData {\r\n        if (this.imageDataList.length === 0) {\r\n            return null;\r\n        }\r\n\r\n        const imageIndex = rowIndex * this.imageMatrix.colCount + colIndex;\r\n        if (imageIndex >= this.imageDataList.length) {\r\n            alert(`getImage() => Invalid image index : ${imageIndex}`);\r\n            return null;\r\n        }\r\n\r\n        return this.imageDataList[imageIndex];\r\n    }\r\n\r\n    addImage(imageIndex: number, image: Image) {\r\n        const imageData = new ViewerImageData(this, LayoutPosition.fromNumber(imageIndex, this.imageMatrix.colCount));\r\n        imageData.setImage(image);\r\n        this.imageDataList.push(imageData);\r\n    }\r\n\r\n    updateImagePositionFromIndex(imageIndex: number) {\r\n        if (imageIndex < 0 || imageIndex >= this.imageDataList.length) {\r\n            alert(`updateImagePositionFromIndex() => Invalid image index : ${imageIndex}`);\r\n            return;\r\n        }\r\n\r\n        this.imageDataList[imageIndex].setPosition(LayoutPosition.fromNumber(imageIndex, this.imageMatrix.colCount));\r\n    }\r\n\r\n    setEmpty() {\r\n        this.imageCount = 1;\r\n        this.imageMatrix = new LayoutMatrix(1, 1);\r\n        this.imageDataList = new Array<ViewerImageData>();\r\n        this.addImage(0, null);\r\n    }\r\n}\r\n","﻿import { Image } from \"../models/pssi\";\r\nimport { LayoutPosition } from \"../models/layout\";\r\nimport { ViewerGroupData } from \"../models/viewer-group-data\";\r\nimport { LogService } from \"../services/log.service\";\r\n\r\nexport class ViewerImageData {\r\n    static logService: LogService;\r\n    groupData: ViewerGroupData;\r\n    position: LayoutPosition;\r\n\r\n    image: Image;\r\n\r\n    constructor(viewerGroupData: ViewerGroupData, position: LayoutPosition) {\r\n        this.groupData = viewerGroupData;\r\n        this.position = position;\r\n\r\n        ViewerImageData.logService.debug(\"ViewerImageData \" + this.getId() + \" created!\");\r\n    }\r\n\r\n    getId(): string {\r\n        return this.groupData.getId() + this.position.getId();\r\n    }\r\n\r\n    setPosition(position: LayoutPosition) {\r\n        this.position = position;\r\n    }\r\n\r\n    setImage(image: Image) {\r\n        this.image = image;\r\n    }\r\n}\r\n","﻿import { Patient, Study, Series, Image } from \"../models/pssi\";\r\nimport { ViewerGroupData } from \"../models/viewer-group-data\";\r\nimport { GroupHangingProtocol, ImageHangingProtocol } from \"../models/hanging-protocol\";\r\nimport { LayoutPosition, LayoutMatrix } from \"../models/layout\";\r\nimport { LogService } from \"../services/log.service\";\r\n\r\nexport class ViewerShellData {\r\n    static logService: LogService;\r\n    hide: boolean;\r\n    patientList = new Array<Patient>();\r\n\r\n    groupCount = 0; // The count of groups that contain image\r\n    groupMatrix = new LayoutMatrix(1, 1);\r\n    groupDataList = new Array<ViewerGroupData>(); // Must contains all group even if its an empty group\r\n\r\n    groupHangingProtocol: GroupHangingProtocol;\r\n    defaultGroupHangingProtocol: GroupHangingProtocol;\r\n    defaultImageHangingProtocol: ImageHangingProtocol;\r\n\r\n    constructor(defaultGroupHangingProtocol: GroupHangingProtocol, defaultImageHangingProtocol: ImageHangingProtocol) {\r\n        this.defaultGroupHangingProtocol = defaultGroupHangingProtocol;\r\n        this.defaultImageHangingProtocol = defaultImageHangingProtocol;\r\n        this.hide = false;\r\n\r\n        ViewerShellData.logService.debug(\"ViewerShellData \" + this.getId() + \" created!\");\r\n    }\r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Public functions\r\n    addStudy(studyInWorklist: Study) {\r\n\r\n\r\n        const study = Study.clone(studyInWorklist, true);\r\n        study.hide = false;\r\n        // Set parent for all series and all images, since they are NOT set in JSON string returned from server\r\n        for (let i = 0; i < study.seriesList.length; i++) {\r\n            const series = study.seriesList[i];\r\n            series.study = study;\r\n            series.hide = false;\r\n            for (let j = 0; j < series.imageList.length; j++) {\r\n                series.imageList[j].hide = false;\r\n                series.imageList[j].series = series;\r\n            }\r\n        }\r\n\r\n\r\n        let index = -1;\r\n        for (let i = 0; i < this.patientList.length; i++) {\r\n            if (this.patientList[i].id === studyInWorklist.patient.id) {\r\n                index = i;\r\n                break;\r\n            }\r\n        }\r\n\r\n        let patient = null;\r\n        if (index === -1) {\r\n            // Clone a patient and added to the list\r\n            patient = Patient.clone(studyInWorklist.patient, false);\r\n            this.patientList.push(patient);\r\n        } else {\r\n            patient = this.patientList[index];\r\n        }\r\n\r\n        study.patient = patient;\r\n        patient.hide = false;\r\n        patient.studyList.push(study);\r\n    }\r\n\r\n    getId(): string {\r\n        let id = \"\";\r\n        this.patientList.forEach(patient => id += this.getIdFromPatient(patient));\r\n        return id;\r\n    }\r\n\r\n    getName(): string {\r\n        let name = \"\";\r\n        this.patientList.forEach(patient => name += patient.patientId + \"_\" + patient.patientName + \" | \");\r\n        return name.substr(0, name.length - 3);\r\n    }\r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Get count\r\n    getTotalPatientCount(): number {\r\n        return this.patientList.length;\r\n    }\r\n\r\n    getTotalStudyCount(): number {\r\n        let count = 0;\r\n        this.patientList.forEach(patient => count += patient.studyList.length);\r\n        return count;\r\n    }\r\n\r\n    getTotalSeriesCount(): number {\r\n        let count = 0;\r\n        this.patientList.forEach(patient => {\r\n            patient.studyList.forEach(study => count += study.seriesList.length);\r\n        });\r\n        return count;\r\n    }\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Group Operation\r\n    cleanGroup() {\r\n        this.groupDataList.length = 0;\r\n        this.groupCount = 0;\r\n    }\r\n\r\n    getGroup(rowIndex: number, colIndex: number): ViewerGroupData {\r\n        const groupIndex = rowIndex * this.groupMatrix.colCount + colIndex;\r\n        if (groupIndex >= this.groupDataList.length) {\r\n            alert(`Invalid group index : ${groupIndex}`);\r\n            return null;\r\n        }\r\n\r\n        ViewerShellData.logService.debug(\"ViewData: Get group for \" + this.getId() + rowIndex + colIndex);\r\n        return this.groupDataList[groupIndex];\r\n    }\r\n\r\n    addGroup(groupIndex: number) {\r\n        const groupData = new ViewerGroupData(this,\r\n            this.defaultImageHangingProtocol,\r\n            LayoutPosition.fromNumber(groupIndex, this.groupMatrix.colCount));\r\n        this.groupDataList.push(groupData);\r\n    }\r\n\r\n    addEmptyGroup(groupIndex: number) {\r\n        const groupData = new ViewerGroupData(this,\r\n            this.defaultImageHangingProtocol,\r\n            LayoutPosition.fromNumber(groupIndex, this.groupMatrix.colCount));\r\n        groupData.setEmpty();\r\n        this.groupDataList.push(groupData);\r\n    }\r\n\r\n    updateGroupPositionFromIndex(groupIndex: number) {\r\n        if (groupIndex < 0 || groupIndex >= this.groupDataList.length) {\r\n            alert(`updateGroupPositionFromIndex() => Invalid group index : ${groupIndex}`);\r\n            return;\r\n        }\r\n\r\n        this.groupDataList[groupIndex].setPosition(LayoutPosition.fromNumber(groupIndex, this.groupMatrix.colCount));\r\n    }\r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Get image\r\n    getAllImageOfPatient(patient: Patient): Array<Image> {\r\n        let images = new Array<Image>();\r\n        patient.studyList.forEach(study => {\r\n            study.seriesList.forEach(series => images = images.concat(series.imageList));\r\n        });\r\n\r\n        return images;\r\n    }\r\n\r\n    getAllImageOfStudy(study: Study): Array<Image> {\r\n        let images = new Array<Image>();\r\n        study.seriesList.forEach(series => images = images.concat(series.imageList));\r\n        return images;\r\n    }\r\n\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Get object by index\r\n    getPatientByIndex(patientIndex: number): Patient {\r\n        if (patientIndex >= this.patientList.length) {\r\n            return null;\r\n        }\r\n\r\n        return this.patientList[patientIndex];\r\n    }\r\n\r\n    getStudyByIndex(studyIndex: number): Study {\r\n        const studyList = this.getAllStudyList();\r\n        if (studyIndex >= studyList.length) {\r\n            //alert('Error get study by index : ' + studyIndex + ', total study count is ' + studyList.length);\r\n            return null;\r\n        }\r\n\r\n        return studyList[studyIndex];\r\n    }\r\n\r\n    getSeriesByIndex(seriesIndex: number): Series {\r\n        const seriesList = this.getAllSeriesList();\r\n        if (seriesIndex >= seriesList.length) {\r\n            //alert('Error get series by index : ' + seriesIndex + ', total series count is ' + seriesList.length);\r\n            return null;\r\n        }\r\n\r\n        return seriesList[seriesIndex];\r\n    }\r\n    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Private functions\r\n    private getIdFromPatient(patient: Patient): string {\r\n        let id = \"\";\r\n        patient.studyList.forEach(value => id += `_${value.id}`);\r\n        return id;\r\n    }\r\n\r\n    private getAllStudyList(): Array<Study> {\r\n        let studies = new Array<Study>();\r\n        this.patientList.forEach(patient => studies = studies.concat(patient.studyList));\r\n        return studies;\r\n    }\r\n\r\n    private getAllSeriesList(): Array<Series> {\r\n        const studyList = this.getAllStudyList();\r\n\r\n        let series = new Array<Series>();\r\n        studyList.forEach(study => series = series.concat(study.seriesList));\r\n        return series;\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { AnnotationDefinitionData, AnnType } from \"../models/annotation\";\r\nimport { AnnLine } from \"../annotation/extend-object/ann-line\";\r\nimport { AnnEllipse } from \"../annotation/extend-object/ann-ellipse\";\r\nimport { AnnRectangle } from \"../annotation/extend-object/ann-rectangle\";\r\nimport { AnnArrow } from \"../annotation/extend-object/ann-arrow\";\r\nimport { AnnRuler } from \"../annotation/extend-object/ann-ruler\";\r\nimport { AnnCardiothoracicRatio } from \"../annotation/extend-object/ann-cardiothoracic-ratio\";\r\nimport { AnnVerticalAxis } from \"../annotation/extend-object/ann-vertical-axis\";\r\nimport { AnnMarkSpot } from \"../annotation/extend-object/ann-mark-spot\";\r\nimport { AnnImage } from \"../annotation/extend-object/ann-image\";\r\nimport { AnnPolygon } from \"../annotation/extend-object/ann-polygon\";\r\nimport { AnnAngle } from \"../annotation/extend-object/ann-angle\";\r\nimport { AnnCervicalCurve } from \"../annotation/extend-object/ann-cervical-curve\";\r\nimport { AnnLumbarCurve } from \"../annotation/extend-object/ann-lumbar-curve\";\r\nimport { AnnFreeArea } from \"../annotation/extend-object/ann-free-area\";\r\nimport { AnnPoint } from \"../annotation/extend-object/ann-point\";\r\nimport { AnnText } from \"../annotation/extend-object/ann-text\";\r\nimport { AnnTextIndicator } from \"../annotation/extend-object/ann-text-indicator\";\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class AnnotationService {\r\n\r\n    private annDefinitionList: AnnotationDefinitionData[] = [];\r\n\r\n    constructor() {\r\n        this.annDefinitionList.push(new AnnotationDefinitionData(AnnLine, \"ann_line\", false, \"CGXAnnLineEx\", AnnType.LineExt));\r\n        this.annDefinitionList.push(new AnnotationDefinitionData(AnnEllipse, \"ellipse\", false, \"CGXAnnEllipse\", AnnType.Ellipse));\r\n        this.annDefinitionList.push(new AnnotationDefinitionData(AnnRectangle, \"rect\", false, \"CGXAnnSquare\", AnnType.Rect));\r\n        this.annDefinitionList.push(new AnnotationDefinitionData(AnnArrow, \"ann_line\", false, \"CGXAnnArrowMark\", AnnType.Arrow));\r\n        this.annDefinitionList.push(new AnnotationDefinitionData(AnnRuler, \"ann_line\", false, \"CGXAnnRuler\", AnnType.Ruler));\r\n        this.annDefinitionList.push(new AnnotationDefinitionData(AnnVerticalAxis, \"ann_cervicalcurve\", false, \"CGXAnnVAxis\", AnnType.Vaxis));\r\n        this.annDefinitionList.push(new AnnotationDefinitionData(AnnImage, \"ann_stamp\", false, \"CGXAnnStamp\", AnnType.Stamp));\r\n        this.annDefinitionList.push(new AnnotationDefinitionData(AnnPolygon, \"polygon\", false, \"CGXAnnPolygon\", AnnType.Polygon));\r\n        this.annDefinitionList.push(new AnnotationDefinitionData(AnnAngle, \"ann_angle\", false, \"CGXAnnProtractor\", AnnType.Protractor));\r\n        this.annDefinitionList.push(new AnnotationDefinitionData(AnnFreeArea, \"ann_freearea\", false, \"CGXAnnFreeArea\", AnnType.FreeArea));\r\n        this.annDefinitionList.push(new AnnotationDefinitionData(AnnText, \"ann_text\", false, \"CGXAnnTextMark\", AnnType.Text));\r\n\r\n        this.annDefinitionList.push(new AnnotationDefinitionData(AnnCardiothoracicRatio, \"ann_cervicalcurve\", true, \"CGXAnnHCRatio\", AnnType.HeartChestRatio));\r\n        this.annDefinitionList.push(new AnnotationDefinitionData(AnnMarkSpot, \"ann_line\", true, \"CGXAnnMarkSpot\", AnnType.MarkSpot));\r\n        this.annDefinitionList.push(new AnnotationDefinitionData(AnnCervicalCurve, \"ann_cervicalcurve\", true, \"CGXAnnCervicalCurve\", AnnType.CervicalCurve));\r\n        this.annDefinitionList.push(new AnnotationDefinitionData(AnnLumbarCurve, \"ann_cervicalcurve\", true, \"CGXAnnLumbarCurve\", AnnType.LumbarCurve));\r\n\r\n        this.annDefinitionList.push(new AnnotationDefinitionData(AnnPoint, \"none\", false, \"\", AnnType.None));\r\n        this.annDefinitionList.push(new AnnotationDefinitionData(AnnTextIndicator, \"none\", false, \"\", AnnType.None));\r\n    }\r\n\r\n    getAnnDefDataByType(annType: AnnType): AnnotationDefinitionData {\r\n        const result = this.annDefinitionList.filter(annData => annData.imageSuiteAnnType === annType);\r\n        return this.getSafeResult(\"getAnnDefDataByType\", annType, result);\r\n    }\r\n\r\n    getAnnDefDataByIsName(annIsName: string): AnnotationDefinitionData {\r\n        const result = this.annDefinitionList.filter(annData => annData.imageSuiteAnnName === annIsName);\r\n        return this.getSafeResult(\"getAnnDefDataByIsName\", annIsName, result);\r\n    }\r\n\r\n    getAnnDefDataByClassName(annClassName: string): AnnotationDefinitionData {\r\n        const result = this.annDefinitionList.filter(annData => annData.className === annClassName);\r\n        return this.getSafeResult(\"getAnnDefDataByClassName\", annClassName, result);\r\n    }\r\n\r\n    getCursorNameByType(annType: AnnType): string {\r\n        const annDefData = this.getAnnDefDataByType(annType);\r\n        return annDefData ? annDefData.cursorName : \"default\";\r\n    }\r\n\r\n    private getSafeResult(funName: string, getBy: any, result: AnnotationDefinitionData[]): AnnotationDefinitionData {\r\n        if (result.length === 0) {\r\n            alert(`AnnotationService.${funName}() - Can not find Annotation data for annotation ${getBy} in the list`);\r\n            return undefined;\r\n        }\r\n\r\n        if (result.length > 1) {\r\n            alert(`AnnotationService.${funName}() - There are more than one Annotation data for annotation ${getBy} in the list`);\r\n        }\r\n\r\n        return result[0];\r\n    }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { LocationStrategy } from \"@angular/common\";\r\nimport { DatabaseService } from \"./database.service\";\r\nimport { TextOverlayData, TextOverlayDisplayGroup } from '../models/overlay';\r\nimport { LogService } from \"../services/log.service\";\r\nimport { FontData, MarkerGroupData } from '../models/misc-data';\r\nimport { AnnGuide } from \"../annotation/layer-object/ann-guide\";\r\n\r\n@Injectable({\r\n    providedIn: \"root\"\r\n})\r\nexport class ConfigurationService {\r\n\r\n    private baseUrl: string;\r\n    private textOverlayList: TextOverlayData[] = [];\r\n    private markerConfig: MarkerGroupData[] = [];\r\n    private textOverlayFont: FontData;\r\n    private marked: boolean;\r\n    \r\n    constructor(private databaseService: DatabaseService, private locationStrategy: LocationStrategy,\r\n        private logService: LogService) {\r\n\r\n        this.baseUrl = window.location.origin + this.locationStrategy.getBaseHref();\r\n        this.logService.info(`Config: Base url is ${this.baseUrl}`);\r\n\r\n        this.databaseService.getTextOverlays().subscribe(overlayList => {\r\n            this.textOverlayList = overlayList;\r\n        });\r\n\r\n        this.databaseService.getMarkerConfig().subscribe(markerConfig => {\r\n            this.markerConfig = markerConfig;\r\n        });\r\n        //this.databaseService.getOverFont().subscribe(fontData => {\r\n        //    this.textOverlayFont = fontData;\r\n        //});\r\n\r\n        AnnGuide.createAnnGuideDataList();\r\n    }\r\n\r\n    getBaseUrl(): string {\r\n        return this.baseUrl;\r\n    }\r\n\r\n    getTextOverlayConfigList(): TextOverlayData[] {\r\n        return this.textOverlayList;\r\n    }\r\n\r\n    getTextOverlayFont(): FontData {\r\n        this.textOverlayFont = new FontData(\"Times New Roman\", \"#FFF\", 15);\r\n        return this.textOverlayFont;\r\n    }\r\n\r\n    getMarkerConfig(): MarkerGroupData[] {\r\n        return this.markerConfig;\r\n    }\r\n\r\n    setKeyImage(id, marked) {\r\n        this.databaseService.setKeyImage(id, marked).subscribe(value => this.marked = value);\r\n    }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { HttpClient, HttpHeaders } from \"@angular/common/http\";\r\nimport { Observable, of } from \"rxjs\";\r\nimport { catchError, tap } from \"rxjs/operators\";\r\n\r\nimport { Shortcut } from '../models/shortcut';\r\nimport { Patient, Study, Series, Image, RecWorklistData, RecOfflineImageInfo, StudyTemp } from '../models/pssi';\r\nimport { TextOverlayData } from '../models/overlay';\r\nimport { FontData, MarkerGroupData } from '../models/misc-data';\r\n\r\nconst httpOptions = {\r\n    headers: new HttpHeaders({ 'Content-Type': \"application/json\"})\r\n};\r\n\r\n@Injectable({\r\n    providedIn: \"root\"\r\n})\r\n\r\n\r\n\r\nexport class DatabaseService {\r\n\r\n    private configUrl = \"config\";\r\n    private shortcutUrl = \"shortcut\"; // URL to web api\r\n    private pssiUrl = \"pssi\";\r\n    private overlayUrl = \"overlay\";\r\n    private id_patient = 1;\r\n    private id_study = 1;\r\n    private id_series = 1;\r\n    private id_image = 1;\r\n\r\n    private localTestData: Study[];\r\n    private revStudies: Study[];\r\n\r\n    constructor(private http: HttpClient) {\r\n        this.localTestData = this.createStudiesTest();\r\n    }\r\n\r\n    getMarkerConfig(): Observable<MarkerGroupData[]> {\r\n        const url = `${this.configUrl}/markerconfig/`;\r\n        return this.http.get<MarkerGroupData[]>(url)\r\n            .pipe(\r\n            tap(MarkerGroupData => this.log(\"fetched marker config\")),\r\n            catchError(this.handleError(\"getMarkerConfig\", []))\r\n            );\r\n    }\r\n\r\n    getShortcut(id: number): Observable<Shortcut> {\r\n        const url = `${this.shortcutUrl}/details/${id}`;\r\n        return this.http.get<Shortcut>(url);\r\n    }\r\n\r\n    getOverFont(): Observable<FontData> {\r\n        const url = `${this.overlayUrl}/font/`;\r\n        return this.http.get<FontData>(url);\r\n    }\r\n\r\n    getTextOverlays(): Observable<TextOverlayData[]> {\r\n        const url = `${this.overlayUrl}/`;\r\n        return this.http.get<TextOverlayData[]>(url)\r\n            .pipe(\r\n                tap(Overlay => this.log(\"fetched Overlay\")),\r\n                catchError(this.handleError(\"getOverlays\", []))\r\n            );\r\n    }\r\n\r\n    /** GET shortcut from the server */\r\n    getShortcuts(): Observable<Shortcut[]> {\r\n        const url = `${this.shortcutUrl}/search/`;\r\n        return this.http.get<Shortcut[]>(url)\r\n            .pipe(\r\n                tap(shortcuts => this.log(\"fetched shortcuts\")),\r\n                catchError(this.handleError(\"getShortcuts\", []))\r\n            );\r\n    }\r\n\r\n    getWorklistCol(): Observable<Shortcut[]> {\r\n        const url = `${this.shortcutUrl}/search/`;\r\n        return this.http.get<Shortcut[]>(url)\r\n            .pipe(\r\n                tap(shortcuts => this.log(\"fetched shortcuts\")),\r\n                catchError(this.handleError(\"getShortcuts\", []))\r\n            );\r\n    }\r\n\r\n    /** Save shortcut to the server */\r\n    saveShortcut(shortcut: Shortcut): Observable<Shortcut[]> {\r\n        const url = `${this.shortcutUrl}/create/`;\r\n        return this.http.post<Shortcut[]>(url, shortcut, httpOptions)\r\n            .pipe(\r\n                tap(shortcut => this.log(\"save shortcut\")),\r\n                catchError(this.handleError(\"saveShortcut\", []))\r\n            );\r\n    }\r\n\r\n    /** Save study to the server */\r\n    updateStudy(study: Study): Observable<boolean> {\r\n        const url = `${this.pssiUrl}/updateStudy/`;\r\n        //let jsonId = { study: study };\r\n        return this.http.post<boolean>(url, study, httpOptions)\r\n            .pipe(\r\n                tap(study => this.log(\"udpate study\")),\r\n                catchError(this.handleError<boolean>(\"updateStudy\"))\r\n            );\r\n    }\r\n\r\n    setRead(id: string): Observable<boolean> {\r\n        const url = `${this.pssiUrl}/setread/`;\r\n        let jsonId = { id: id };\r\n        return this.http.post<boolean>(url, jsonId, httpOptions)\r\n            .pipe(\r\n                tap(shortcut => this.log(\"setRead\")),\r\n            catchError(this.handleError<boolean>(\"setRead\"))\r\n            );\r\n    }\r\n\r\n    setUnread(id: string): Observable<boolean> {\r\n        const url = `${this.pssiUrl}/setunread/`;\r\n        let jsonId = { id: id };\r\n        return this.http.post<boolean>(url, jsonId, httpOptions)\r\n            .pipe(\r\n            tap(shortcut => this.log(\"setUnread\")),\r\n            catchError(this.handleError<boolean>(\"setUnread\"))\r\n            );\r\n    }\r\n\r\n    setDeletePrevent(id: string): Observable<boolean> {\r\n        const url = `${this.pssiUrl}/setdeleteprevent/`;\r\n        let jsonId = { id: id };\r\n        return this.http.post<boolean>(url, jsonId, httpOptions)\r\n            .pipe(\r\n                tap(shortcut => this.log(\"set delete prevent\")),\r\n            catchError(this.handleError<boolean>(\"setDeletePrevent\"))\r\n            );\r\n    }\r\n\r\n    setDeleteAllow(id: string): Observable<boolean> {\r\n        const url = `${this.pssiUrl}/setdeleteallow/`;\r\n        let jsonId = { id: id };\r\n        return this.http.post<boolean>(url, jsonId, httpOptions)\r\n            .pipe(\r\n                tap(shortcut => this.log(\"set delete prevent\")),\r\n                catchError(this.handleError<boolean>(\"setDeleteAllow\"))\r\n            );\r\n    }\r\n\r\n    deleteStudy(id: string, deletionReason): Observable<boolean> {\r\n        const url = `${this.pssiUrl}/deletestudy/`;\r\n        let jsonId = { id: id, deletionReason: deletionReason };\r\n        return this.http.post<boolean>(url, jsonId, httpOptions)\r\n            .pipe(\r\n                tap(shortcut => this.log(\"delete study\")),\r\n                catchError(this.handleError<boolean>(\"deleteStudy\"))\r\n            );\r\n    }\r\n\r\n    /** Delete shortcut to the server */\r\n    deleteShortcut(shortcut: Shortcut): Observable<Shortcut[]> {\r\n        const url = `${this.shortcutUrl}/delete`;\r\n        return this.http.post<Shortcut[]>(url, shortcut, httpOptions)\r\n            .pipe(\r\n                tap(shortcut => this.log(\"delete shortcut\")),\r\n                catchError(this.handleError(\"deleteShortcut\", []))\r\n            );\r\n    }\r\n\r\n    /** Get Offline Studies in Checked Studies to the server */\r\n    checkStudiesIncludeOffline(studyInstanceUIDList): Observable<RecOfflineImageInfo> {\r\n        const url = `${this.pssiUrl}/checkstudiesincludeoffline/`;\r\n        let data = { studyInstanceUIDList: studyInstanceUIDList, StudyOfflineMessage: \"\"};\r\n        return this.http.post<RecOfflineImageInfo>(url, data, httpOptions)\r\n            .pipe(\r\n            tap(shortcut => this.log(\"check Studies Include Offline\")),\r\n            catchError(this.handleError<RecOfflineImageInfo>(\"setDeleteAllow\"))\r\n            );\r\n    }\r\n\r\n    /** Get Offline Studies in Checked Studies to the server */\r\n    studyOfflineInsertCDJobList(studyInstanceUIDList): Observable<string> {\r\n        const url = `${this.pssiUrl}/studyOfflineInsertCDJobList/`;\r\n        let data = { studyInstanceUIDList: studyInstanceUIDList};\r\n        return this.http.post<string>(url, data, httpOptions)\r\n            .pipe(\r\n                tap(shortcut => this.log(\"check Studies Include Offline\")),\r\n                catchError(this.handleError<string>(\"setDeleteAllow\"))\r\n            );\r\n    }\r\n\r\n    /** GET studies from the server */\r\n    getStudies(shortcut: Shortcut, pageIndex: number, sortItem: String): Observable<RecWorklistData> {\r\n        const url = `${this.pssiUrl}/search/`;\r\n        let data = { shortcut: shortcut, pageIndex: pageIndex, sortItem: sortItem };\r\n        return this.http.post<RecWorklistData>(url, data, httpOptions)\r\n            .pipe(\r\n            tap(recWorklistData => this.log('fetched recWorklistData')),\r\n            catchError(this.handleError<RecWorklistData>('getRecWorklistData'))\r\n            );\r\n    }\r\n\r\n    /** Set Key Image */\r\n    setKeyImage(id, marked): Observable<boolean> {\r\n        const url = `${this.pssiUrl}/setkeyimage/`;\r\n        let data = { id: id, marked: marked };\r\n\r\n        return this.http.post<boolean>(url, data, httpOptions)\r\n            .pipe(\r\n            catchError(this.handleError<boolean>('setKeyImage'))\r\n            );\r\n    }\r\n\r\n  /** GET study from the server */\r\n    getStudiesForDcmViewer(ids: number[], showHistoryStudies, showKeyImage): Observable<Study[]> {\r\n        const url = `${this.pssiUrl}/GetStudiesForDcmViewer/`;\r\n        let data = { ids: ids, showHistoryStudies: showHistoryStudies, showKeyImage: showKeyImage};\r\n\r\n        return this.http.post<Study[]>(url, data, httpOptions)\r\n            .pipe(\r\n                tap(recWorklistData => this.log('fetched recWorklistData')),\r\n            catchError(this.handleError<Study[]>('getRecWorklistData'))\r\n            );\r\n    }\r\n\r\n    getStudiesTest(): Study[] {\r\n        const aa = this.localTestData.sort(this.compareStudy);\r\n        return aa;\r\n    }\r\n\r\n    compareStudy(study1: Study, study2: Study): number {\r\n        return study1.patient.patientName > study2.patient.patientName ? 1 : -1;\r\n    }\r\n\r\n    private createStudiesTest(): Study[] {\r\n        const studies = new Array<Study>();\r\n        const patient1 = this.createPatient(\"PID001\", \"Tom\", \"M\");\r\n        const patient2 = this.createPatient(\"PID002\", \"Jerry\", \"M\");\r\n        const patient3 = this.createPatient(\"PID003\", \"Mark\", \"M\");\r\n\r\n        let study = this.createStudy(patient1, 1);\r\n        studies.push(study);\r\n\r\n        study = this.createStudy(patient2, 2);\r\n        studies.push(study);\r\n\r\n        study = this.createStudy(patient2, 3);\r\n        studies.push(study);\r\n\r\n        study = this.createStudy(patient3, 1);\r\n        studies.push(study);\r\n\r\n        study = this.createStudy(patient3, 2);\r\n        studies.push(study);\r\n\r\n        study = this.createStudy(patient3, 5);\r\n        studies.push(study);\r\n\r\n        return studies;\r\n    }\r\n\r\n    private createPatient(patientId: string, patientName: string, gender: string): Patient {\r\n\r\n        const patient = new Patient();\r\n\r\n        patient.id = this.id_patient++;\r\n        patient.patientId = patientId;\r\n        patient.patientName = patientName;\r\n        patient.patientSex = gender;\r\n        patient.studyList = new Array<Study>();\r\n\r\n        return patient;\r\n    }\r\n\r\n    private createStudy(patient: Patient, seriesCount: number): Study {\r\n\r\n        const study = new Study();\r\n\r\n        study.id = this.id_study++;\r\n        study.studyInstanceUid = study.id + \".\" + study.id;\r\n        study.seriesCount = seriesCount;\r\n        study.imageCount = seriesCount * seriesCount;\r\n        study.studyId = `${study.id}`;\r\n        study.accessionNo = study.studyId;\r\n        study.studyDate = \"2018-11-11\";\r\n        study.studyTime = \"12:11:12\";\r\n        study.modality = \"DX\";\r\n        study.studyChecked = false;\r\n        study.studyDescription = \"Study Desc\";\r\n\r\n        study.seriesList = new Array<Series>();\r\n        for (let i = 0; i < seriesCount; i++) {\r\n            study.seriesList.push(this.createSeries(study, seriesCount));\r\n        }\r\n\r\n        study.patient = patient;\r\n        patient.studyList.push(study);\r\n        return study;\r\n    }\r\n\r\n    private createSeries(study: Study, imageCount: number): Series {\r\n        const series = new Series();\r\n\r\n        series.id = this.id_series++;\r\n        series.study = study;\r\n        series.modality = \"CR\";\r\n        series.imageCount = imageCount;\r\n\r\n        series.imageList = new Array<Image>();\r\n        for (let i = 0; i < imageCount; i++) {\r\n            series.imageList.push(this.createImage(series));\r\n        }\r\n\r\n        return series;\r\n    }\r\n\r\n    private createImage(series: Series): Image {\r\n        const image = new Image();\r\n\r\n        image.id = this.id_image++;\r\n        image.series = series;\r\n        image.imageColumns = 1;\r\n        image.imageRows = 1;\r\n\r\n        return image;\r\n    }\r\n\r\n    /**\r\n    * Handle Http operation that failed.\r\n    * Let the app continue.\r\n    * @param operation - name of the operation that failed\r\n    * @param result - optional value to return as the observable result\r\n    */\r\n    private handleError<T>(operation = \"operation\", result?: T) {\r\n        return (error: any): Observable<T> => {\r\n\r\n            // TODO: send the error to remote logging infrastructure\r\n            console.error(error); // log to console instead\r\n\r\n            // TODO: better job of transforming error for user consumption\r\n            this.log(`${operation} failed: ${error.message}`);\r\n\r\n            // Let the app keep running by returning an empty result.\r\n            return of(result as T);\r\n        };\r\n    }\r\n\r\n    /** Log a HeroService message with the MessageService */\r\n    private log(message: string) {\r\n        //alert(`HeroService: ${message}`);\r\n    }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { MatDialog, MatDialogConfig } from \"@angular/material\";\r\nimport { MessageBoxComponent } from \"../components/common/message-box/message-box.component\";\r\nimport { Observable } from \"rxjs\";\r\nimport { MessageBoxType, MessageBoxContent } from \"../models/messageBox\";\r\n\r\n@Injectable({\r\n    providedIn: \"root\"\r\n})\r\nexport class DialogService {\r\n\r\n    constructor(private dialog: MatDialog) {}\r\n\r\n    showMessageBox(messageBoxContent: MessageBoxContent): Observable<any> {\r\n        const dialogConfig = new MatDialogConfig();\r\n\r\n        dialogConfig.disableClose = true;\r\n        dialogConfig.autoFocus = messageBoxContent.messageType === MessageBoxType.Input;\r\n        dialogConfig.data = messageBoxContent;\r\n\r\n        const dialogRef = this.dialog.open(MessageBoxComponent, dialogConfig);\r\n        return dialogRef.afterClosed();\r\n    }\r\n\r\n    showDialog(dialogComponent: any, dialogData: any): Observable<any> {\r\n        const dialogRef = this.dialog.open(dialogComponent,\r\n            {\r\n                autoFocus: true,\r\n                data: dialogData\r\n            });\r\n\r\n        return dialogRef.afterClosed();\r\n    }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { Observable } from \"rxjs\";\r\nimport { HttpClient, HttpHeaders } from \"@angular/common/http\";\r\n\r\nimport { Image } from \"../models/pssi\";\r\nimport { ConfigurationService } from \"../services/configuration.service\";\r\nimport { TextOverlayData, TextOverlayDisplayGroup, TextOverlayDisplayItem, GraphicOverlayData } from '../models/overlay';\r\nimport { LogService } from \"../services/log.service\";\r\nimport { FontData } from \"../models/misc-data\";\r\n\r\nconst httpOptions = {\r\n    headers: new HttpHeaders({ 'Content-Type': \"application/json\" })\r\n};\r\n\r\n@Injectable({\r\n    providedIn: \"root\"\r\n})\r\nexport class DicomImageService {\r\n    private logPrefix = \"DicomImageService: \";\r\n    private dicomImageUrl = \"dicomImage\";\r\n    private baseUrl;\r\n    private textOverlayDisplayGroupList: TextOverlayDisplayGroup[] = [];\r\n\r\n\r\n    constructor(private http: HttpClient, private configurationService: ConfigurationService,\r\n        private logService: LogService) {\r\n        this.baseUrl = this.configurationService.getBaseUrl();\r\n    }\r\n\r\n    /** Save Image annotation */\r\n    saveImageAnn(id, annString): Observable<string> {\r\n        const url = `${this.dicomImageUrl}/saveAnnotation/`;\r\n        let data = { id: id, annString: annString };\r\n\r\n        return this.http.post<string>(url, data, httpOptions);\r\n    }\r\n\r\n    getDicomFile(image: Image): Observable<Blob> {\r\n        const imageUrl = `${this.dicomImageUrl}/dicom/${image.id}`;\r\n        return this.http.get(imageUrl, { responseType: \"blob\" });\r\n    }\r\n\r\n    getThumbnailFile(image: Image): Observable<Blob> {\r\n        const imageUrl = `${this.dicomImageUrl}/thumbnail/${image.id}`;\r\n        return this.http.get(imageUrl, { responseType: \"blob\" });\r\n    }\r\n\r\n\r\n    getCornerStoneImage(image: Image) {\r\n        const imageUri = \"wadouri:{0}/wado?requestType=WADO&studyUID={studyUID}&seriesUID={serieUID}&objectUID={1}&frameIndex={2}&contentType=application%2Fdicom\".format(this.baseUrl, image.id, 0);\r\n        this.logService.info(\"Dicom Image Service : Downloading dicom image, url is \" + imageUri);\r\n        return cornerstone.loadImage(imageUri);\r\n    }\r\n\r\n    getOverlayDisplayList(image: Image, canvas: any, font: FontData): TextOverlayDisplayItem[] {\r\n        if (this.textOverlayDisplayGroupList.length === 0) {\r\n            const overlayList = this.configurationService.getTextOverlayConfigList();\r\n            this.formatOverlayList(overlayList);\r\n        }\r\n\r\n        const canvasContext = canvas.getContext(\"2d\");\r\n        canvasContext.font = font.getCanvasFontString();\r\n\r\n        var overlayDisplayList: TextOverlayDisplayItem[] = [];\r\n\r\n        const groupList = this.getOverlayDisplayGroup(image.series.modality);\r\n        groupList.forEach(group => {\r\n\r\n            this.addOverlayDisplayList(overlayDisplayList, group.itemListAlignLeft, true, image, canvas.width, canvas.height, canvasContext, font.size);\r\n            this.addOverlayDisplayList(overlayDisplayList, group.itemListAlignRight, false, image, canvas.width, canvas.height, canvasContext, font.size);\r\n        });\r\n\r\n        return overlayDisplayList;\r\n    }\r\n\r\n    getGraphicOverlayList(image: Image): GraphicOverlayData[] {\r\n        const graphicOverlayList = [];\r\n\r\n        // There are max 16 graphic overlays in a image\r\n        const groupNumber = 24576; // Hex 0x6000\r\n        for (let i = 0; i < 16; i++) {\r\n            const groupString = this.decimalToHexString(groupNumber + i * 2, 2);\r\n            const graphicOverlayData = this.getGraphicOverlayData(image, \"x\" + groupString);\r\n            if (graphicOverlayData) {\r\n                graphicOverlayList.push(graphicOverlayData);\r\n            }\r\n        }\r\n\r\n        return graphicOverlayList;\r\n    }\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Text overlay functions\r\n    private formatOverlayList(overlayList: TextOverlayData[]) {\r\n\r\n        overlayList.forEach(overlay => {\r\n            this.addOverlayToGroup(overlay);\r\n        });\r\n\r\n        this.textOverlayDisplayGroupList.forEach(group => {\r\n\r\n            group.itemListAlignLeft = group.itemListAlignLeft.sort((n1, n2) => {\r\n                return (n1.offsetX < n2.offsetX) ? -1 : 1;\r\n            });\r\n\r\n            group.itemListAlignRight = group.itemListAlignRight.sort((n1, n2) => {\r\n                return (n1.offsetX < n2.offsetX) ? 1 : -1;\r\n            });\r\n        });\r\n    }\r\n\r\n    private addOverlayToGroup(overlay: TextOverlayData) {\r\n        const filtered = this.textOverlayDisplayGroupList.filter(value => value.match(overlay));\r\n\r\n        let overlayGroup = null;\r\n        if (filtered.length === 0) {\r\n            overlayGroup = new TextOverlayDisplayGroup(overlay);\r\n            this.textOverlayDisplayGroupList.push(overlayGroup);\r\n        } else {\r\n            overlayGroup = filtered[0];\r\n        }\r\n\r\n        overlayGroup.add(overlay);\r\n    }\r\n\r\n    private getOverlayDisplayGroup(modality: string): TextOverlayDisplayGroup[] {\r\n        return this.textOverlayDisplayGroupList.filter(group => group.modality === modality);\r\n    }\r\n\r\n    private getTextOverlayValue(image: Image, overlay: TextOverlayData): string {\r\n\r\n        let tagValue: string;\r\n        if (overlay.overlayId === \"9003\") {\r\n            tagValue = \"W: {0}, L: {1}\";\r\n        } else if (overlay.overlayId === \"9004\") {\r\n            tagValue = \"{0}\";\r\n        }else if (overlay.tableName && overlay.fieldName) {\r\n\r\n            var obj: any;\r\n            switch (overlay.tableName) {\r\n            case 'image':\r\n                obj = image;\r\n                break;\r\n            case 'series':\r\n                obj = image.series;\r\n                break;\r\n            case 'study':\r\n                obj = image.series.study;\r\n                break;\r\n            case 'patient':\r\n                obj = image.series.study.patient;\r\n                break;\r\n            default:\r\n                this.logService.error(this.logPrefix + \"Invalid table name \" + overlay.tableName);\r\n                return \"Error!\";\r\n            }\r\n\r\n            tagValue = obj[overlay.fieldName];\r\n        } else {\r\n            const tagString = this.getTagString(overlay.groupNumber, overlay.elementNumber);\r\n            if (tagString === \"x0011101c\") {\r\n                tagValue = \"Measure at anatomy\";\r\n            } else {\r\n                tagValue = image.cornerStoneImage.data.string(tagString);\r\n            }\r\n        }\r\n\r\n        return tagValue === undefined ? \"\" : tagValue;\r\n    }\r\n\r\n    private decimalToHexString(decimal: number, padding: number): string {\r\n        let hex = Number(decimal).toString(16);\r\n        padding = typeof (padding) === \"undefined\" || padding === null ? 2 : padding;\r\n\r\n        while (hex.length < padding) {\r\n            hex = \"0\" + hex;\r\n        }\r\n\r\n        return hex;\r\n    }\r\n\r\n    private getTagString(group: number, element: number): string {\r\n        return 'x' + this.decimalToHexString(group, 4) + this.decimalToHexString(element, 4);\r\n    }\r\n\r\n    private addOverlayDisplayList(overlayDisplayList: TextOverlayDisplayItem[], overlayList: TextOverlayData[],\r\n        alignLeft: boolean, image: Image, canvasWidth: number, canvasHeight: number, canvasContext: any, fontHeight: number) {\r\n\r\n        const lineWidth = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\r\n\r\n        overlayList.forEach(overlayConfig => {\r\n            const displayItem = new TextOverlayDisplayItem();\r\n            displayItem.align = alignLeft ? \"left\" : \"right\";\r\n\r\n            let posX = overlayConfig.gridX / 2 * canvasWidth;\r\n            if (overlayConfig.gridX === 0) {\r\n                posX += 5;\r\n            } else if (overlayConfig.gridX === 2) {\r\n                posX -= 5;\r\n            } else if (overlayConfig.gridX === 1) {\r\n                alignLeft? posX += 5 : posX -= 5;\r\n            }\r\n\r\n            let posY = overlayConfig.gridY / 2 * canvasHeight;\r\n            if (overlayConfig.gridY === 0) {\r\n                posY += fontHeight + 3;\r\n            } else if (overlayConfig.gridY === 2) {\r\n                posY += fontHeight; // ? why\r\n            }\r\n\r\n            const height = fontHeight + 4;\r\n            if (overlayConfig.offsetY > 0) {\r\n                posY += height * (overlayConfig.offsetY - 1);\r\n            } else {\r\n                posY += height * overlayConfig.offsetY;\r\n            }\r\n\r\n            displayItem.id = overlayConfig.overlayId;\r\n            displayItem.text = overlayConfig.prefix + this.getTextOverlayValue(image, overlayConfig) + overlayConfig.suffix;\r\n\r\n            const offSetY = overlayConfig.offsetY + 6;\r\n            \r\n            displayItem.posX = posX;\r\n            displayItem.posX += alignLeft ? lineWidth[offSetY] : -lineWidth[offSetY];\r\n            displayItem.posY = posY;\r\n\r\n            lineWidth[offSetY] += canvasContext.measureText(displayItem.text).width + 10;\r\n\r\n            overlayDisplayList.push(displayItem);\r\n        });\r\n    }\r\n\r\n    private getGraphicOverlayData(image: Image, groupString: string): GraphicOverlayData {\r\n\r\n        const element = image.cornerStoneImage.data.elements[groupString + \"3000\"];\r\n        const rows = image.cornerStoneImage.data.uint16(groupString + \"0010\");\r\n        const cols = image.cornerStoneImage.data.uint16(groupString + \"0011\");\r\n        const type = image.cornerStoneImage.data.string(groupString + \"0040\");\r\n        const startX = image.cornerStoneImage.data.uint16(groupString + \"0050\", 0);\r\n        const startY = image.cornerStoneImage.data.uint16(groupString + \"0050\", 1);\r\n\r\n        if (!element || !rows || !cols || !type || !startX || !startY) {\r\n            return undefined;\r\n        }\r\n\r\n        const graphicOverlayData = new GraphicOverlayData;\r\n        graphicOverlayData.rows = rows;\r\n        graphicOverlayData.cols = cols;\r\n        graphicOverlayData.type = type;\r\n        graphicOverlayData.startX = startX;\r\n        graphicOverlayData.startY = startY;\r\n\r\n        const imageWidth = image.width();\r\n        const imageHeight = image.height();\r\n\r\n        for (let i = 0; i < element.length; i++) {\r\n            const byte = image.cornerStoneImage.data.byteArray[element.dataOffset + i];\r\n            if (byte === 0) {\r\n                continue;\r\n            }\r\n\r\n            const y = Math.floor(i * 8 / cols);\r\n            const x = i * 8 % cols;\r\n            let flag = 128;\r\n            for (let j = 0; j < 8; j++) {\r\n                if (byte & flag) {\r\n                    const px = x - j + startX - 1;\r\n                    const py = y + startY - 1;\r\n                    if (px >= 0 && px < imageWidth && py >= 0 && py < imageHeight) {\r\n                        graphicOverlayData.dataList.push({ x: px, y: py });\r\n                    }\r\n                }\r\n                flag = flag >> 1;\r\n            }\r\n        }\r\n\r\n        graphicOverlayData.desc = image.cornerStoneImage.data.string(groupString + \"0022\");\r\n        graphicOverlayData.label = image.cornerStoneImage.data.string(groupString + \"1500\");\r\n\r\n        return graphicOverlayData;\r\n    }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { ViewerShellData } from \"../models/viewer-shell-data\";\r\nimport { LayoutMatrix } from \"../models/layout\";\r\nimport { GroupHangingProtocol, ImageHangingProtocol, GroupHangingData, ImageHangingData } from\r\n    \"../models/hanging-protocol\";\r\nimport { Image } from \"../models/pssi\";\r\nimport { ViewerGroupData } from \"../models/viewer-group-data\";\r\nimport { ViewerImageData } from \"../models/viewer-image-data\";\r\nimport { LogService } from \"./log.service\";\r\n\r\n@Injectable({\r\n    providedIn: \"root\"\r\n})\r\nexport class HangingProtocolService {\r\n    defaultGroupHangingProtocol = GroupHangingProtocol.ByStudy;\r\n    defaultImageHangingPrococal = ImageHangingProtocol.Auto;\r\n\r\n    groupLayoutNumberList = [11, 11, 12, 22, 22];\r\n    imageLayoutNumberList = [11, 11, 12, 22, 22, 23, 23, 33];\r\n\r\n    groupHangingDataList: GroupHangingData[] = [\r\n        { groupHangingProtocol: GroupHangingProtocol.ByPatent, name: \"Patient\", tip: \"Group Image by Paitient\" },\r\n        { groupHangingProtocol: GroupHangingProtocol.ByStudy, name: \"Study\", tip: \"Group Image by Study\" },\r\n        { groupHangingProtocol: GroupHangingProtocol.BySeries, name: \"Series\", tip: \"Group Image by Series\" },\r\n        { groupHangingProtocol: GroupHangingProtocol.FreeHang, name: \"FreeHang\", tip: \"Free Hang\" }\r\n    ];\r\n\r\n    groupLayoutDataList: GroupHangingData[] = [\r\n        { groupHangingProtocol: GroupHangingProtocol.FreeHang_1X1, name: \"Layout_1X1\", tip: \"Layout Group by 1X1\" },\r\n        { groupHangingProtocol: GroupHangingProtocol.FreeHang_2X1, name: \"Layout_1X2\", tip: \"Layout Group by 1X2\" },\r\n        { groupHangingProtocol: GroupHangingProtocol.FreeHang_1X2, name: \"Layout_2X1\", tip: \"Layout Group by 2X1\" },\r\n        { groupHangingProtocol: GroupHangingProtocol.FreeHang_2X2, name: \"Layout_2X2\", tip: \"Layout Group by 2X2\" },\r\n        { groupHangingProtocol: GroupHangingProtocol.FreeHang_3X3, name: \"Layout_3X3\", tip: \"Layout Group by 3X3\" }\r\n    ];\r\n\r\n    imageLayoutDataList: ImageHangingData[] = [\r\n        { imageHangingProtocol: ImageHangingProtocol.Auto, name: \"tile\", tip: \"Layout Image by Modality\" },\r\n        { imageHangingProtocol: ImageHangingProtocol.FreeHang_1X1, name: \"SubLayout_1X1\", tip: \"Layout Image by 1X1\" },\r\n        { imageHangingProtocol: ImageHangingProtocol.FreeHang_2X1, name: \"SubLayout_1X2\", tip: \"Layout Image by 1X2\" },\r\n        { imageHangingProtocol: ImageHangingProtocol.FreeHang_1X2, name: \"SubLayout_2X1\", tip: \"Layout Image by 2X1\" },\r\n        { imageHangingProtocol: ImageHangingProtocol.FreeHang_2X2, name: \"SubLayout_2X2\", tip: \"Layout Image by 2X2\" },\r\n        { imageHangingProtocol: ImageHangingProtocol.FreeHang_3X3, name: \"SubLayout_3X3\", tip: \"Layout Image by 3X3\" },\r\n        { imageHangingProtocol: ImageHangingProtocol.FreeHang_4X3, name: \"SubLayout_3X4\", tip: \"Layout Image by 3X4\" },\r\n        { imageHangingProtocol: ImageHangingProtocol.FreeHang_6X5, name: \"SubLayout_5X6\", tip: \"Layout Image by 5X6\" }\r\n    ];\r\n\r\n    constructor(private logService: LogService) {}\r\n\r\n    getDefaultGroupHangingProtocol(): GroupHangingProtocol {\r\n        return this.defaultGroupHangingProtocol;\r\n    }\r\n\r\n    getDefaultImageHangingPrococal(): ImageHangingProtocol {\r\n        return this.defaultImageHangingPrococal;\r\n    }\r\n\r\n    getGroupHangingDataList(): GroupHangingData[] {\r\n        return this.groupHangingDataList;\r\n    }\r\n\r\n    getDefaultGroupHangingData(): GroupHangingData {\r\n        return this.groupHangingDataList[1];\r\n    }\r\n\r\n    getGroupLayoutDataList(): GroupHangingData[] {\r\n        return this.groupLayoutDataList;\r\n    }\r\n\r\n    getDefaultGroupLayoutData(): GroupHangingData {\r\n        return this.groupLayoutDataList[0];\r\n    }\r\n\r\n    getImageLayoutDataList(): ImageHangingData[] {\r\n        return this.imageLayoutDataList;\r\n    }\r\n\r\n    getDefaultImageLayoutData(): ImageHangingData {\r\n        return this.imageLayoutDataList[0];\r\n    }\r\n\r\n    applyGroupHangingProtocol(viewerShellData: ViewerShellData, groupHangingProtocol: GroupHangingProtocol) {\r\n\r\n        this.logService.info(\"HP service: applyGroupHangingProtocol to viewer \" + viewerShellData.getName() + \", protocol is \" + GroupHangingProtocol[groupHangingProtocol]);\r\n        if (groupHangingProtocol >= GroupHangingProtocol.FreeHang) {\r\n            const groupMatrix = LayoutMatrix.fromNumber(groupHangingProtocol);\r\n            if (!groupMatrix.equal(viewerShellData.groupMatrix)) {\r\n                const oldMatrixSize = viewerShellData.groupMatrix.rowCount * viewerShellData.groupMatrix.colCount;\r\n                viewerShellData.groupMatrix = groupMatrix;\r\n\r\n                // For the exsiting group, only change its position\r\n                for (let i = 0; i < viewerShellData.groupDataList.length; i++) {\r\n                    viewerShellData.updateGroupPositionFromIndex(i);\r\n                }\r\n\r\n                // Add empty group if matrix size becomes bigger\r\n                const matrixSize = viewerShellData.groupMatrix.rowCount * viewerShellData.groupMatrix.colCount;\r\n                for (let i = viewerShellData.groupDataList.length; i < matrixSize; i++) {\r\n                    viewerShellData.addEmptyGroup(i);\r\n                }\r\n            }\r\n        } else {\r\n\r\n            let groupCount: number;\r\n\r\n            if (groupHangingProtocol === GroupHangingProtocol.ByPatent) {\r\n                groupCount = viewerShellData.getTotalPatientCount();\r\n            } else if (groupHangingProtocol === GroupHangingProtocol.ByStudy) {\r\n                groupCount = viewerShellData.getTotalStudyCount();\r\n            } else if (groupHangingProtocol === GroupHangingProtocol.BySeries) {\r\n                groupCount = viewerShellData.getTotalSeriesCount();\r\n            } else {\r\n                alert(`applyGroupHangingProtocol() => Invalid Group Hanging Protocol : ${groupHangingProtocol}`);\r\n                return;\r\n            }\r\n\r\n            viewerShellData.groupHangingProtocol = groupHangingProtocol;\r\n\r\n            if (groupCount !== viewerShellData.groupCount) {\r\n                viewerShellData.cleanGroup();\r\n\r\n                viewerShellData.groupCount = groupCount;\r\n                viewerShellData.groupMatrix = this.getGroupLayoutMatrixFromCount(groupCount);\r\n\r\n                const matrixSize = viewerShellData.groupMatrix.rowCount * viewerShellData.groupMatrix.colCount;\r\n                for (let i = 0; i < matrixSize; i++) {\r\n                    viewerShellData.addGroup(i);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    applyImageHangingProtocol(groupData: ViewerGroupData, imageHangingProtocol: ImageHangingProtocol) {\r\n\r\n        this.logService.info(\"HP service: applyImageHangingProtocol to Group\" + groupData.getId() + \", protocol is \" + ImageHangingProtocol[imageHangingProtocol]);\r\n\r\n        if (groupData.imageCount === 0) {\r\n            // This is the first time to apply \r\n            groupData.imageHangingProtocol = imageHangingProtocol;\r\n            this.createImageDataListOfGroup(groupData);\r\n            return;\r\n        }\r\n\r\n        groupData.imageHangingProtocol = imageHangingProtocol;\r\n\r\n        if (imageHangingProtocol >= ImageHangingProtocol.FreeHang) {\r\n            const imageMatrix = LayoutMatrix.fromNumber(imageHangingProtocol);\r\n            if (!imageMatrix.equal(groupData.imageMatrix)) {\r\n                groupData.imageMatrix = imageMatrix;\r\n\r\n                // For the image cell that contains image, only change its position\r\n                for (let i = 0; i < groupData.imageDataList.length; i++) {\r\n                    groupData.updateImagePositionFromIndex(i);\r\n                }\r\n\r\n                // Add empty image if matrix size becomes bigger\r\n                const matrixSize = groupData.imageMatrix.rowCount * groupData.imageMatrix.colCount;\r\n                for (let i = groupData.imageDataList.length; i < matrixSize; i++) {\r\n                    groupData.addImage(i, null);\r\n                }\r\n            }\r\n        } else {\r\n\r\n            if (imageHangingProtocol !== ImageHangingProtocol.Auto) {\r\n                alert(`applyImageHangingProtocol() => Invalid Image Hanging Protocol : ${imageHangingProtocol}`);\r\n                return;\r\n            }\r\n\r\n\r\n            groupData.imageMatrix = this.getImageLayoutMatrixFromCount(groupData.imageCount);\r\n\r\n            // For the image cell that contains image, only change its position\r\n            for (let i = 0; i < groupData.imageDataList.length; i++) {\r\n                groupData.updateImagePositionFromIndex(i);\r\n            }\r\n        }\r\n    }\r\n\r\n    createImageDataListOfGroup(groupData: ViewerGroupData) {\r\n\r\n        const groupIndex = groupData.getIndex();\r\n        const groupHangingProtocol = groupData.viewerShellData.groupHangingProtocol;\r\n\r\n        let ret = false;\r\n        if (groupHangingProtocol === GroupHangingProtocol.ByPatent) {\r\n            // GroupIndex is the patient index\r\n            ret = this.createImageDataListByPatient(groupData, groupIndex);\r\n        } else if (groupHangingProtocol === GroupHangingProtocol.ByStudy) {\r\n            ret = this.createImageDataListByStudy(groupData, groupIndex);\r\n        } else if (groupHangingProtocol === GroupHangingProtocol.BySeries) {\r\n            ret = this.createImageDataListBySeries(groupData, groupIndex);\r\n        } else {\r\n            alert(`createImageListOfGroup() => Invalid Group Hanging Protocol : ${groupHangingProtocol}`);\r\n        }\r\n\r\n        if (!ret) {\r\n            groupData.setEmpty();\r\n        }\r\n    }\r\n\r\n    private createImageDataListByPatient(groupData: ViewerGroupData, patientIndex: number): boolean {\r\n\r\n        const patient = groupData.viewerShellData.getPatientByIndex(patientIndex);\r\n        if (patient === null || patient === undefined) {\r\n            // This is an empty group\r\n            return false;\r\n        }\r\n\r\n        const imageList = groupData.viewerShellData.getAllImageOfPatient(patient);\r\n        return this.createImageDataListFromImageList(groupData, imageList);\r\n    }\r\n\r\n    private createImageDataListByStudy(groupData: ViewerGroupData, studyIndex: number): boolean {\r\n\r\n        const study = groupData.viewerShellData.getStudyByIndex(studyIndex);\r\n        if (study === null || study === undefined) {\r\n            // This is an empty group\r\n            return false;\r\n        }\r\n\r\n        const imageList = groupData.viewerShellData.getAllImageOfStudy(study);\r\n        return this.createImageDataListFromImageList(groupData, imageList);\r\n    }\r\n\r\n    private createImageDataListBySeries(groupData: ViewerGroupData, seriesIndex: number): boolean {\r\n\r\n        const series = groupData.viewerShellData.getSeriesByIndex(seriesIndex);\r\n        if (series === null || series === undefined) {\r\n            // This is an empty group\r\n            return false;\r\n        }\r\n\r\n        return this.createImageDataListFromImageList(groupData, series.imageList);\r\n    }\r\n\r\n    private createImageDataListFromImageList(groupData: ViewerGroupData, imageList: Array<Image>): boolean {\r\n\r\n        groupData.imageDataList = new Array<ViewerImageData>();\r\n        groupData.imageCount = imageList.length;\r\n        groupData.imageMatrix = this.getImageLayoutMatrixFromCount(groupData.imageCount);\r\n\r\n        const matrixSize = groupData.imageMatrix.rowCount * groupData.imageMatrix.colCount;\r\n        for (let i = 0; i < matrixSize; i++) {\r\n            const image = i < groupData.imageCount ? imageList[i] : null;\r\n            groupData.addImage(i, image);\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    private getGroupLayoutMatrixFromCount(count: number): LayoutMatrix {\r\n        return this.getLayoutMatrixFromCount(count, this.groupLayoutNumberList);\r\n    }\r\n\r\n    private getImageLayoutMatrixFromCount(count: number): LayoutMatrix {\r\n        return this.getLayoutMatrixFromCount(count, this.imageLayoutNumberList);\r\n    }\r\n\r\n    private getLayoutMatrixFromCount(count: number, layoutNumberList: number[]): LayoutMatrix {\r\n        let matrixNumber = 33;\r\n        if (count < layoutNumberList.length) {\r\n            matrixNumber = layoutNumberList[count];\r\n        }\r\n\r\n        return LayoutMatrix.fromNumber(matrixNumber);\r\n    }\r\n\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { Subject } from \"rxjs\";\r\nimport { ViewerImageData } from \"../models/viewer-image-data\";\r\nimport { Image } from \"../models/pssi\";\r\n\r\n@Injectable({\r\n    providedIn: \"root\"\r\n})\r\nexport class ImageSelectorService {\r\n\r\n    // Observable string sources\r\n    private imageSelectedSource = new Subject<ViewerImageData>();\r\n\r\n    // Observable number sources\r\n    private imageLayoutChangedSource = new Subject<number>();\r\n\r\n    // Observable string sources\r\n    private thumbnailSelectedSource = new Subject<Image>();\r\n\r\n    // Observable string streams\r\n    imageSelected$ = this.imageSelectedSource.asObservable();\r\n\r\n    // Observable number streams\r\n    imageLayoutChanged$ = this.imageLayoutChangedSource.asObservable();\r\n\r\n    thumbnailSelected$ = this.thumbnailSelectedSource.asObservable();\r\n\r\n    // Service string commands\r\n    selectImage(viewerImageData: ViewerImageData) {\r\n        this.imageSelectedSource.next(viewerImageData);\r\n    }\r\n\r\n    // Service number commands\r\n    changeImageLayout(imageLayoutStyle: number) {\r\n        this.imageLayoutChangedSource.next(imageLayoutStyle);\r\n    }\r\n\r\n    selectThumbnail(image: Image) {\r\n        this.thumbnailSelectedSource.next(image);\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class LogService {\r\n\r\n  constructor() { }\r\n\r\n    error(log: string) {\r\n        this.logInternal(log, 'E');\r\n    }\r\n\r\n    warning(log: string) {\r\n        this.logInternal(log, 'W');\r\n    }\r\n\r\n    info(log: string) {\r\n        this.logInternal(log, 'I');\r\n    }\r\n\r\n    debug(log: string) {\r\n        this.logInternal(log, 'D');\r\n    }\r\n\r\n    seperator() {\r\n        console.log('');\r\n    }\r\n\r\n    private formatNumberToString(num: number, maxLen: number = 2): string {\r\n        if (maxLen == 2) {\r\n            return num < 10 ? '0' + num : '' + num;\r\n        } else {\r\n            return num < 10 ? '00' + num : num < 100 ? '0' + num  : '' + num;\r\n        }\r\n        \r\n    }\r\n\r\n    private logInternal(log: string, level: string) {\r\n        const cur = new Date();\r\n        const timeStamp = cur.getFullYear() + '-' + this.formatNumberToString(cur.getMonth() + 1) + '-' + this.formatNumberToString(cur.getDate())\r\n            + ' ' + this.formatNumberToString(cur.getHours()) + ':' + this.formatNumberToString(cur.getMinutes())\r\n            + ':' + this.formatNumberToString(cur.getSeconds()) + '.' + this.formatNumberToString(cur.getMilliseconds(), 3);\r\n\r\n        const content = timeStamp + ' ' + level + ' ' + log;\r\n        console.log(content);\r\n    }\r\n\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { Subject } from \"rxjs\";\r\nimport { ViewerShellData } from \"../models/viewer-shell-data\";\r\n\r\n@Injectable({\r\n    providedIn: \"root\"\r\n})\r\nexport class ShellNavigatorService {\r\n\r\n    viewerShellDataList = new Array<ViewerShellData>();\r\n    viewerShellDataHighlighted: ViewerShellData; // The shell current highlighted\r\n\r\n    // Observable string sources\r\n    private shellSelectedSource = new Subject<ViewerShellData>();\r\n\r\n    // Observable string streams\r\n    shellSelected$ = this.shellSelectedSource.asObservable();\r\n\r\n    // Observable string sources\r\n    private shellCreatedSource = new Subject<ViewerShellData>();\r\n\r\n    // Observable string streams\r\n    shellCreated$ = this.shellCreatedSource.asObservable();\r\n\r\n    // Observable string sources\r\n    private shellDeletedSource = new Subject<ViewerShellData>();\r\n\r\n    // Observable string streams\r\n    shellDeleted$ = this.shellDeletedSource.asObservable();\r\n\r\n    constructor() {\r\n    }\r\n\r\n    // Service string commands\r\n    private shellCreated(viewerShellData: ViewerShellData) {\r\n        this.shellCreatedSource.next(viewerShellData);\r\n    }\r\n\r\n    // Service string commands\r\n    private shellSelected(viewerShellData: ViewerShellData) {\r\n        this.shellSelectedSource.next(viewerShellData);\r\n    }\r\n\r\n    shellNavigate(viewerShellData: ViewerShellData) {\r\n        if (!this.isViewerShellOpened(viewerShellData)) {\r\n            this.viewerShellDataList.push(viewerShellData);\r\n            this.shellCreated(viewerShellData);\r\n        } else {\r\n            this.shellSelected(viewerShellData);\r\n        }\r\n\r\n        this.viewerShellDataHighlighted = viewerShellData;\r\n    }\r\n\r\n    shellDelete(viewerShellData: ViewerShellData): ViewerShellData {\r\n        if (this.isViewerShellOpened(viewerShellData)) {\r\n            let index = this.viewerShellDataList.indexOf(viewerShellData);\r\n            this.viewerShellDataList =\r\n                this.viewerShellDataList.filter((value, index, array) => value.getId() !== viewerShellData.getId());\r\n            if (index >= this.viewerShellDataList.length) {\r\n                index--;\r\n            }\r\n\r\n            if (this.viewerShellDataHighlighted === viewerShellData) {\r\n                if (index >= 0) {\r\n                    this.viewerShellDataHighlighted = this.viewerShellDataList[index];\r\n                } else {\r\n                    this.viewerShellDataHighlighted = null;\r\n                }\r\n                this.shellNavigate(this.viewerShellDataHighlighted);\r\n                this.shellDeletedSource.next(viewerShellData);\r\n\r\n            }\r\n            return this.viewerShellDataHighlighted;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    private isViewerShellOpened(viewerShellData: ViewerShellData): boolean {\r\n        if (viewerShellData === null)\r\n            return true;\r\n\r\n        return this.viewerShellDataList.some((value, index, array) => value.getId() === viewerShellData.getId());\r\n    }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { Subject } from \"rxjs\";\r\nimport { SelectedButtonData } from \"../models/dropdown-button-menu-data\";\r\n\r\nexport enum ViewContextEnum {\r\n    Select = 1,\r\n    Pan = 2,\r\n    WL = 3,\r\n    Zoom = 4,\r\n    Magnify = 5,\r\n    ROIZoom = 6,\r\n    CreateAnn = 7,\r\n    ROIWL = 8,\r\n    SelectAnn\r\n}\r\n\r\nexport enum OperationEnum {\r\n    Rotate = 1,\r\n    Flip = 2,\r\n    Invert = 3,\r\n    ShowAnnotation = 4,\r\n    ShowOverlay = 5,\r\n    ShowRuler = 6,\r\n    DeleteAnnotation = 7,\r\n    Save = 8,\r\n    SetContext = 9,\r\n    ManualWL = 10,\r\n    FitHeight,\r\n    FitWidth,\r\n    FitWindow,\r\n    FitOriginal,\r\n    Reset,\r\n    ShowGraphicOverlay,\r\n    ToggleKeyImage,\r\n    Marker\r\n}\r\n\r\nexport class OperationData {\r\n    type: OperationEnum;\r\n    data: any;\r\n\r\n    constructor(type: OperationEnum, data: any) {\r\n        this.type = type;\r\n        this.data = data;\r\n    }\r\n}\r\n\r\nexport class ViewContext {\r\n    private _action = ViewContextEnum.Pan;\r\n    private _data: any;\r\n\r\n    constructor(action: ViewContextEnum, data: any = undefined) {\r\n        this._action = action;\r\n        this._data = data;\r\n    }\r\n\r\n    get action(): ViewContextEnum {\r\n        return this._action;\r\n    }\r\n\r\n    get data(): any {\r\n        return this._data;\r\n    }\r\n}\r\n\r\n@Injectable({\r\n    providedIn: \"root\"\r\n})\r\nexport class ViewContextService {\r\n\r\n    private _curContext: ViewContext;\r\n    private _previousContext: ViewContext;\r\n\r\n    private _showAnnotation = true;\r\n    private _showOverlay = true;\r\n    private _showRuler = true;\r\n    private _showGraphicOverlay = true;\r\n    public _keyImage = false;\r\n\r\n    private viewContextChangedSource = new Subject<ViewContext>();\r\n    viewContextChanged$ = this.viewContextChangedSource.asObservable();\r\n\r\n    private operationSource = new Subject<OperationData>();\r\n    onOperation$ = this.operationSource.asObservable();\r\n\r\n    constructor() {\r\n        this._curContext = new ViewContext(ViewContextEnum.Select);\r\n    }\r\n\r\n    get curContext(): ViewContext {\r\n        return this._curContext;\r\n    }\r\n\r\n    get previousContext(): ViewContext {\r\n        return this._previousContext;\r\n    }\r\n\r\n    set showAnnotation(bShow: boolean) {\r\n        this._showAnnotation = bShow;\r\n        const data = new OperationData(OperationEnum.ShowAnnotation, { show: bShow });\r\n\r\n        this.operationSource.next(data);\r\n    }\r\n\r\n    get showAnnotation(): boolean {\r\n        return this._showAnnotation;\r\n    }\r\n\r\n    set showOverlay(bShow: boolean) {\r\n        this._showOverlay = bShow;\r\n        const data = new OperationData(OperationEnum.ShowOverlay, { show: bShow });\r\n\r\n        this.operationSource.next(data);\r\n    }\r\n\r\n    get showOverlay(): boolean {\r\n        return this._showOverlay;\r\n    }\r\n\r\n    set showRuler(bShow: boolean) {\r\n        this._showRuler = bShow;\r\n        const data = new OperationData(OperationEnum.ShowRuler, { show: bShow });\r\n\r\n        this.operationSource.next(data);\r\n    }\r\n\r\n    get showRuler(): boolean {\r\n        return this._showRuler;\r\n    }\r\n\r\n    set showGraphicOverlay(bShow: boolean) {\r\n        this._showGraphicOverlay = bShow;\r\n        const data = new OperationData(OperationEnum.ShowGraphicOverlay, { show: bShow });\r\n\r\n        this.operationSource.next(data);\r\n    }\r\n\r\n    get showGraphicOverlay(): boolean {\r\n        return this._showGraphicOverlay;\r\n    }\r\n\r\n    onOperation(data: OperationData) {\r\n        switch (data.type) {\r\n            case OperationEnum.ShowAnnotation:{\r\n                this.showAnnotation = !this.showAnnotation;\r\n                break;\r\n            }\r\n            case OperationEnum.ShowOverlay:{\r\n                this.showOverlay = !this.showOverlay;\r\n                break;\r\n            }\r\n\r\n            case OperationEnum.ShowRuler:{\r\n                this.showRuler = !this.showRuler;\r\n                break;\r\n            }\r\n\r\n            case OperationEnum.ShowGraphicOverlay:{\r\n                this.showGraphicOverlay = !this.showGraphicOverlay;\r\n                break;\r\n            }\r\n\r\n            default:\r\n                this.operationSource.next(data);\r\n        }\r\n\r\n    }\r\n\r\n    setContext(context: ViewContextEnum, data: any = undefined) {\r\n        const curContext = new ViewContext(context, data);\r\n        this._previousContext = this._curContext;\r\n        this._curContext = curContext;\r\n\r\n        if (this._curContext.action !== this._previousContext.action) {\r\n            this.viewContextChangedSource.next(this._curContext);\r\n        } else if (this._curContext.action === ViewContextEnum.CreateAnn) {\r\n            //if want to create the same object even if current object is not finished yet, we still change context to delete it. \r\n            this.viewContextChangedSource.next(this._curContext);\r\n        }\r\n    }\r\n\r\n    isImageToolBarButtonChecked(buttonData: SelectedButtonData): boolean {\r\n        switch (buttonData.operationData.type) {\r\n            case OperationEnum.ShowAnnotation:\r\n                return this._showAnnotation;\r\n            case OperationEnum.ShowOverlay:\r\n                return this._showOverlay;\r\n            case OperationEnum.ShowRuler:\r\n                return this._showRuler;\r\n            case OperationEnum.ShowGraphicOverlay:\r\n                return this._showGraphicOverlay;\r\n            case OperationEnum.ToggleKeyImage:\r\n                return this._keyImage;\r\n\r\n            default:\r\n                return buttonData.operationData.data === this._curContext.action;\r\n        }\r\n    }\r\n\r\n    isImageToolBarButtonCheckStyle(buttonData: SelectedButtonData): boolean {\r\n        switch (buttonData.operationData.type) {\r\n            case OperationEnum.ShowAnnotation:\r\n            case OperationEnum.ShowOverlay:\r\n            case OperationEnum.ShowRuler:\r\n            case OperationEnum.ShowGraphicOverlay:\r\n            case OperationEnum.SetContext:\r\n            case OperationEnum.ToggleKeyImage:\r\n                return true;\r\n            default:\r\n                return false;\r\n        }\r\n    }\r\n\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { Subject } from \"rxjs\";\r\nimport { Shortcut } from \"../models/shortcut\";\r\nimport { DatabaseService } from \"./database.service\"\r\nimport { ViewerShellData } from \"../models/viewer-shell-data\";\r\nimport { HangingProtocolService } from \"./hanging-protocol.service\";\r\nimport { ShellNavigatorService } from \"./shell-navigator.service\";\r\nimport { Study, RecWorklistData, WorklistColumn, StudyTemp } from \"../models/pssi\";\r\nimport { DataSource } from \"../models/shortcut\";\r\nimport { MessageBoxType, MessageBoxContent, DialogResult } from \"../models/messageBox\";\r\nimport { DialogService } from \"./dialog.service\";\r\n\r\n@Injectable({\r\n    providedIn: \"root\"\r\n})\r\nexport class WorklistService {\r\n    studies: Study[];\r\n    shortcuts: Shortcut[];\r\n    worklistColumns: WorklistColumn[];\r\n    recWorklistData: RecWorklistData;\r\n    pageCount: number;\r\n    pages: number[];\r\n    querying = false;\r\n    bDisableLoadImageButton = true;\r\n    bDisableLoadKeyImage = true;\r\n    bDisableChangeImageSeriesOrder = true;\r\n    bDisableReassign = true;\r\n    bDisableTransfer = true;\r\n    bDisableTagEdit = true;\r\n    bDisableDeleteStudy = true;\r\n    bDisableSetReadBtn = true;\r\n    bDisableSetUnreadBtn = true;\r\n    bDisableDeletePreventBtn = true;\r\n    bDisableDeleteAllowBtn = true;\r\n\r\n    loadedStudyCount = 0;\r\n    loadedStudy: Study[];\r\n    studyUSBOfflineList: string[];\r\n    popUpStudyOfflineMessage: string;\r\n    isOffline = false;\r\n    checkedSingleStudy: Study;\r\n    checkedStudies: Study[];\r\n    checkedStudiesUids: number[];\r\n    checkedStudiesInstanceUids: string[];\r\n    checkedStudiesCount = 0;\r\n    getStudies: Study[];\r\n\r\n    studyOnlineReadyTicketCountMax = 0;\r\n    studyOnlineReadyTicketCount = 0;\r\n    maxStudyOnlineReadyTicketCount = 300;\r\n    checkStudyOnlineReadyStatusInterval = 500;\r\n    sumMaxCheckStudyOnlineReadyCount = 10;\r\n\r\n    private _shortcut: Shortcut;\r\n    set shortcut(value: Shortcut) {\r\n        this._shortcut.copyConditionFrom(value);\r\n        this.studies = this.onQueryStudies(1);\r\n    }\r\n    get shortcut(): Shortcut {\r\n        return this._shortcut;\r\n    }\r\n\r\n\r\n    private _showHistoryStudies = true;\r\n\r\n    set showHistoryStudies(value: boolean) {\r\n        this._showHistoryStudies = value;\r\n    }\r\n\r\n    get showHistoryStudies(): boolean {\r\n        return this._showHistoryStudies;\r\n    }\r\n\r\n    // Observable Shortcut sources\r\n    private shortcutSelectedSource = new Subject<Shortcut>();\r\n\r\n    // Observable Shortcut streams\r\n    shortcutSelected$ = this.shortcutSelectedSource.asObservable();\r\n\r\n    // Service Shortcut commands\r\n    shortcutSelected(shortcut: Shortcut) {\r\n        this.shortcutSelectedSource.next(shortcut);\r\n    }\r\n\r\n    constructor(private databaseService: DatabaseService,\r\n        private shellNavigatorService: ShellNavigatorService,\r\n        private hangingProtocolService: HangingProtocolService,\r\n        private dialogService: DialogService) {\r\n\r\n        this._shortcut = new Shortcut();\r\n        this._shortcut.dataSource = DataSource.MiniPacs;\r\n        this.loadedStudy = new Array<Study>();\r\n    }\r\n\r\n    onQueryStudies(pageIndex: number, sortItem: String = \"\"): Study[] {\r\n\r\n        this.querying = true;\r\n        if (this.isUsingLocalTestData()) {\r\n            this.studies = this.databaseService.getStudiesTest();\r\n            this.querying = false;\r\n        } else {\r\n            this.databaseService.getStudies(this._shortcut, pageIndex, sortItem).subscribe(recWorklistData => this.formatStudies(recWorklistData));\r\n        }\r\n\r\n        return this.studies;\r\n    }\r\n\r\n    onQueryShortcuts(): Shortcut[] {\r\n\r\n        this.querying = true;\r\n        if (this.isUsingLocalTestData()) {\r\n            //this.shortcuts = this.databaseService.getShortcuts();\r\n            this.querying = false;\r\n        } else {\r\n            this.databaseService.getShortcuts().subscribe(shortcuts => this.formatShortcuts(shortcuts));\r\n        }\r\n\r\n        return this.shortcuts;\r\n    }\r\n\r\n    onQueryWorklistCol(): Shortcut[] {\r\n\r\n        this.querying = true;\r\n        if (this.isUsingLocalTestData()) {\r\n            //this.shortcuts = this.databaseService.getShortcuts();\r\n            this.querying = false;\r\n        } else {\r\n            this.databaseService.getWorklistCol().subscribe(shortcuts => this.formatShortcuts(shortcuts));\r\n        }\r\n\r\n        return this.shortcuts;\r\n    }\r\n\r\n    onSaveShortcut(name: string) {\r\n        if (this.isUsingLocalTestData()) {\r\n            //this.studies = this.databaseService.getStudiesTest();\r\n            //this.querying = false;\r\n        } else {\r\n            this._shortcut.name = name;\r\n            this.databaseService.saveShortcut(this._shortcut).subscribe(shortcuts => this.refreshShortcuts());\r\n        }\r\n    }\r\n\r\n    onDeleteShortcut(shortcut: Shortcut) {\r\n        if (this.isUsingLocalTestData()) {\r\n            //this.studies = this.databaseService.getStudiesTest();\r\n            //this.querying = false;\r\n        } else {\r\n            //this._shortcut.name = name;\r\n            this.databaseService.deleteShortcut(shortcut).subscribe(shortcuts => this.refreshShortcuts());\r\n        }\r\n    }\r\n\r\n    onShowSingleStudy(study: Study) {\r\n        const viewerShellData = new ViewerShellData(this.hangingProtocolService.getDefaultGroupHangingProtocol(),\r\n            this.hangingProtocolService.getDefaultImageHangingPrococal());\r\n\r\n        if (this.isUsingLocalTestData()) {\r\n            viewerShellData.addStudy(study);\r\n            this.shellNavigatorService.shellNavigate(viewerShellData);\r\n        } else {\r\n            this.checkedStudiesUids = new Array<number>();\r\n            this.checkedStudiesUids.push(study.id);\r\n            this.databaseService.getStudiesForDcmViewer(this.checkedStudiesUids, this.showHistoryStudies, false).subscribe(value => this.checkOfflineBeforeLoadImage(1, value));\r\n        }\r\n    }\r\n\r\n    onShowAllCheckedStudy() {\r\n        if (this.isUsingLocalTestData()) {\r\n            const viewerShellData = new ViewerShellData(this.hangingProtocolService.getDefaultGroupHangingProtocol(),\r\n                this.hangingProtocolService.getDefaultImageHangingPrococal());\r\n            this.studies.forEach(study => {\r\n                if (study.studyChecked) {\r\n                    viewerShellData.addStudy(study);\r\n                }\r\n            });\r\n\r\n            this.shellNavigatorService.shellNavigate(viewerShellData);\r\n        } else {\r\n\r\n            this.databaseService.getStudiesForDcmViewer(this.checkedStudiesUids, this.showHistoryStudies, false)\r\n                .subscribe(value => this.checkOfflineBeforeLoadImage(this.checkedStudiesCount, value));\r\n        }\r\n    }\r\n\r\n    onLoadKeyImage() {\r\n        let checkedCount = 0;\r\n        this.studies.forEach(study => {\r\n            if (study.studyChecked) {\r\n                checkedCount++;\r\n            }\r\n        });\r\n\r\n        this.studies.forEach(study => {\r\n            if (study.studyChecked) {\r\n                this.databaseService.getStudiesForDcmViewer(this.checkedStudiesUids, this.showHistoryStudies, true)\r\n                    .subscribe(value => this.studyDetailsLoaded(checkedCount, value));\r\n            }\r\n        });\r\n    }\r\n\r\n    onSetRead(study: Study = null) {\r\n        if (study == null) {\r\n            this.studies.forEach(study => {\r\n                if (study.studyChecked) {\r\n                    this.databaseService.setRead(study.studyInstanceUid)\r\n                        .subscribe(() => this.refreshShortcuts());\r\n                }\r\n            });\r\n        } else {\r\n            this.databaseService.setRead(study.studyInstanceUid)\r\n                .subscribe(() => this.refreshShortcuts());\r\n        }\r\n    }\r\n\r\n    onSetUnread(study: Study = null) {\r\n        if (study == null) {\r\n            this.studies.forEach(study => {\r\n                if (study.studyChecked) {\r\n                    this.databaseService.setUnread(study.studyInstanceUid)\r\n                        .subscribe(() => this.refreshShortcuts());\r\n                }\r\n            });\r\n        } else {\r\n            this.databaseService.setUnread(study.studyInstanceUid)\r\n                .subscribe(() => this.refreshShortcuts());\r\n        }\r\n    }\r\n\r\n    onCheckStudyChanged(study: Study = null) {\r\n        let scanStatusCompletedCount = 0;\r\n        let scanStatusEndedCount = 0;\r\n        let deletePreventCount = 0;\r\n        let deleteAllowCount = 0;\r\n        let checkedStudyCount = 0;\r\n        let onlineStudiesCount = 0;\r\n        let offlineStudiesCount = 0;\r\n        this.checkedStudies = new Array<Study>();\r\n        this.checkedStudiesUids = new Array<number>();\r\n        this.checkedStudiesInstanceUids = new Array<string>();\r\n        this.checkedStudiesCount = 0;\r\n       \r\n        this.studies.forEach(study => {\r\n            if (study.studyChecked) {\r\n                this.checkedStudies.push(study);\r\n                this.checkedStudiesUids.push(study.id);\r\n                this.checkedStudiesInstanceUids.push(study.studyInstanceUid);\r\n                this.checkedStudiesCount++;\r\n                this.checkedSingleStudy = study;\r\n\r\n                checkedStudyCount++;\r\n\r\n                if (study.scanStatus === \"Completed\") {\r\n                    scanStatusCompletedCount++;\r\n                }\r\n                else if ((study.scanStatus === \"Ended\")) {\r\n                    scanStatusEndedCount++;\r\n                }\r\n\r\n                if (study.reserved === \"N\") {\r\n                    deletePreventCount++;\r\n                }\r\n                else if ((study.reserved === \"Y\")) {\r\n                    deleteAllowCount++;\r\n                }\r\n\r\n                if (study.instanceAvailability === \"Online\") {\r\n                    onlineStudiesCount++;\r\n                }\r\n                else if (study.instanceAvailability === \"Offline\") {\r\n                    offlineStudiesCount++;\r\n                }\r\n            }\r\n        });\r\n\r\n        if (checkedStudyCount === 0) {\r\n            this.initAllButton();\r\n        }\r\n        else {\r\n            // Check Offline Image\r\n            this.checkStudiesIncludeOffline(this.checkedStudiesInstanceUids);\r\n\r\n            this.bDisableLoadImageButton = false;\r\n            this.bDisableLoadKeyImage = false;\r\n            this.bDisableChangeImageSeriesOrder = false;\r\n            this.bDisableReassign = false;\r\n            this.bDisableTransfer = false;\r\n            this.bDisableTagEdit = false;\r\n            this.bDisableDeleteStudy = false;\r\n\r\n            // Scan Status\r\n            if (scanStatusCompletedCount === 0) {\r\n                this.bDisableSetUnreadBtn = true;\r\n            } else {\r\n                this.bDisableSetUnreadBtn = false;\r\n            }\r\n\r\n            if (scanStatusEndedCount === 0) {\r\n                this.bDisableSetReadBtn = true;\r\n            } else {\r\n                this.bDisableSetReadBtn = false;\r\n            }\r\n\r\n            if (scanStatusCompletedCount !== 0 && scanStatusEndedCount !== 0) {\r\n                this.bDisableSetReadBtn = true;\r\n                this.bDisableSetUnreadBtn = true;\r\n            }\r\n\r\n            // reserved\r\n            if (deletePreventCount === 0) {\r\n                this.bDisableDeletePreventBtn = true;\r\n            } else {\r\n                this.bDisableDeletePreventBtn = false;\r\n            }\r\n\r\n            if (deleteAllowCount === 0) {\r\n                this.bDisableDeleteAllowBtn = true;\r\n            } else {\r\n                this.bDisableDeleteAllowBtn = false;\r\n            }\r\n\r\n            if (deletePreventCount !== 0 && deleteAllowCount !== 0) {\r\n                this.bDisableDeletePreventBtn = true;\r\n                this.bDisableDeleteAllowBtn = true;\r\n            }\r\n\r\n            if (offlineStudiesCount !== 0) {\r\n                this.bDisableDeleteAllowBtn = true;\r\n                this.bDisableDeletePreventBtn = true;\r\n                this.bDisableDeleteStudy = true;\r\n                this.bDisableLoadKeyImage = true;\r\n                this.bDisableReassign = true;\r\n                this.bDisableSetReadBtn = true;\r\n                this.bDisableSetUnreadBtn = true;\r\n                this.bDisableTagEdit = true;\r\n                this.bDisableTransfer = true;\r\n                this.bDisableChangeImageSeriesOrder = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    checkStudiesIncludeOffline(checkedStudiesUid) {\r\n        this.databaseService.checkStudiesIncludeOffline(checkedStudiesUid).subscribe(offlineStudiesInfo => this.collectOfflineStudiesInfo(offlineStudiesInfo));;\r\n    }\r\n\r\n    collectOfflineStudiesInfo(offlineStudiesInfo) {\r\n        if (offlineStudiesInfo) {\r\n            this.studyUSBOfflineList = offlineStudiesInfo.studyUSBOfflineList;\r\n            this.popUpStudyOfflineMessage = offlineStudiesInfo.popUpStudyOfflineMessage;\r\n            this.isOffline = offlineStudiesInfo.isOffline;\r\n        }\r\n        return offlineStudiesInfo.isOffline;\r\n    }\r\n\r\n    onDeletePrevent() {\r\n        this.studies.forEach(study => {\r\n            if (study.studyChecked) {\r\n                this.databaseService.setDeletePrevent(study.studyInstanceUid)\r\n                    .subscribe(() => this.refreshShortcuts());\r\n            }\r\n        });\r\n    }\r\n\r\n    onDeleteAllow() {\r\n        this.studies.forEach(study => {\r\n            if (study.studyChecked) {\r\n                this.databaseService.setDeleteAllow(study.studyInstanceUid)\r\n                    .subscribe(() => this.refreshShortcuts());\r\n            }\r\n        });\r\n    }\r\n\r\n    onDeleteStudy(deletionReason) {\r\n        this.studies.forEach(study => {\r\n            if (study.studyChecked) {\r\n                this.databaseService.deleteStudy(study.studyInstanceUid, deletionReason)\r\n                    .subscribe(() => this.refreshShortcuts());\r\n            }\r\n        });\r\n    }\r\n\r\n    isUsingLocalTestData(): boolean {\r\n        return this._shortcut.dataSource === DataSource.LocalTestData;\r\n    }\r\n\r\n    setDataSource(dataSource: DataSource) {\r\n        this._shortcut.dataSource = dataSource;\r\n        this.studies = this.onQueryStudies(1);\r\n        this.shortcuts = this.onQueryShortcuts();\r\n    }\r\n\r\n    onCleanCondition() {\r\n        this.shortcut.clearCondition();\r\n    }\r\n\r\n    onQueryAllStudies() {\r\n        this.shortcut.clearCondition();\r\n        this.onQueryStudies(1);\r\n        this.onQueryShortcuts();\r\n    }\r\n\r\n    onQueryTodayStudy() {\r\n        this.shortcut.clearCondition();\r\n        this.shortcut.studyDate = '1';\r\n        this.onQueryStudies(1);\r\n    }\r\n\r\n    onQueryStudyByShortcut(shortcut: Shortcut) {\r\n        this.shortcut = shortcut;\r\n    }\r\n\r\n    onUpdateStudy(study: Study) {\r\n        this.databaseService.updateStudy(study).subscribe(\r\n            value => {\r\n                if (value) {\r\n                    const content = new MessageBoxContent();\r\n                    content.title = \"Successful\";\r\n                    content.messageText = \"Update Patient Information Successfully.\";\r\n                    content.messageType = MessageBoxType.Info;\r\n\r\n                    this.dialogService.showMessageBox(content).subscribe();\r\n                    this.refreshShortcuts();\r\n                } else {\r\n                    const content = new MessageBoxContent();\r\n                    content.title = \"Failed\";\r\n                    content.messageText = \"Update Patient Information failed.\";\r\n                    content.messageType = MessageBoxType.Error;\r\n\r\n                    this.dialogService.showMessageBox(content).subscribe();\r\n                }\r\n\r\n            }\r\n        );\r\n    }\r\n\r\n    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    // Private functions\r\n    private formatStudies(recWorklistData) {\r\n\r\n        var studiesList = recWorklistData.studyList;\r\n\r\n        for (let i = 0; i < studiesList.length; i++) {\r\n            studiesList[i].studyChecked = false;\r\n            studiesList[i].detailsLoaded = false;\r\n            studiesList[i].bodyPartList = new Array<string>();\r\n            for (let j = 0; j < studiesList[i].seriesList.length; j++) {\r\n                studiesList[i].seriesList[j].study = studiesList[i];\r\n                if (!studiesList[i].bodyPartList.includes(studiesList[i].seriesList[j].localBodyPart)) {\r\n                    studiesList[i].bodyPartList.push(studiesList[i].seriesList[j].localBodyPart);\r\n                }\r\n            }\r\n        }\r\n\r\n        this.studies = studiesList;\r\n        this.pageCount = recWorklistData.pageCount;\r\n        this.worklistColumns = recWorklistData.worklistColumns;\r\n\r\n\r\n        for (let worklistColumn of recWorklistData.worklistColumns) {\r\n            worklistColumn.shortcutType = this.shortcut;\r\n        }\r\n\r\n        for (let study of studiesList) {\r\n            for (let worklistColumn of recWorklistData.worklistColumns) {\r\n                worklistColumn.studyCol = study;\r\n            }\r\n        }\r\n\r\n        this.pages = Array.from(Array(this.pageCount), (x, i) => i);\r\n        this.querying = false;\r\n    }\r\n\r\n    private formatShortcuts(shortcuts) {\r\n        this.shortcuts = shortcuts;\r\n    }\r\n\r\n    private refreshShortcuts() {\r\n        this.onQueryStudies(1);\r\n        this.onQueryShortcuts();\r\n        this.initAllButton();\r\n    }\r\n\r\n    private studyDetailsLoaded(allCheckedStudyCount: number, getStudies: Study[]) {\r\n        getStudies.forEach(value => {\r\n            if (value) {\r\n                this.loadedStudy.push(value);\r\n            }\r\n        });\r\n\r\n        if (this.loadedStudy.length === 0) {\r\n            const content = new MessageBoxContent();\r\n            content.title = \"No Key Image\";\r\n            content.messageText = \"There is no key image!\";\r\n            content.messageType = MessageBoxType.Error;\r\n\r\n            this.dialogService.showMessageBox(content).subscribe();\r\n            this.loadedStudyCount = 0;\r\n\r\n            return;\r\n        }\r\n\r\n        const viewerShellData = new ViewerShellData(this.hangingProtocolService.getDefaultGroupHangingProtocol(),\r\n            this.hangingProtocolService.getDefaultImageHangingPrococal());\r\n        this.loadedStudy.forEach(value => {\r\n            value.detailsLoaded = true;\r\n            value.studyChecked = true;\r\n            viewerShellData.addStudy(value);\r\n        });\r\n\r\n        this.shellNavigatorService.shellNavigate(viewerShellData);\r\n\r\n        this.loadedStudy = new Array<Study>();\r\n        this.loadedStudyCount = 0;\r\n\r\n        this.refreshShortcuts();\r\n\r\n        //}\r\n    }\r\n\r\n    private checkOfflineBeforeLoadImage(allCheckedStudyCount: number, getStudies: Study[]) {\r\n        this.getStudies = getStudies;\r\n        this.checkedStudiesCount = this.checkedStudiesCount;\r\n        if (this.isOffline) {\r\n            const content = new MessageBoxContent();\r\n            content.title = \"Restore Offline Image\";\r\n            content.messageText = this.popUpStudyOfflineMessage;\r\n            content.messageType = MessageBoxType.InfoCancel;\r\n            content.callbackFunction = this.databaseService.studyOfflineInsertCDJobList;\r\n            content.callbackOwner = this.databaseService;\r\n            content.callbackArg = this.checkedStudiesInstanceUids;\r\n\r\n            this.dialogService.showMessageBox(content).subscribe(\r\n                val => {\r\n                    if (val.dialogResult === DialogResult.Ok) {\r\n                        this.studyDetailsLoaded(this.checkedStudiesCount, this.getStudies);\r\n                    }\r\n                });\r\n        } else {\r\n            this.studyDetailsLoaded(this.checkedStudiesCount, this.getStudies);\r\n        }\r\n    }\r\n\r\n    private initAllButton() {\r\n        this.bDisableLoadImageButton = true;\r\n        this.bDisableLoadKeyImage = true;\r\n        this.bDisableChangeImageSeriesOrder = true;\r\n        this.bDisableReassign = true;\r\n        this.bDisableTransfer = true;\r\n        this.bDisableTagEdit = true;\r\n        this.bDisableDeleteStudy = true;\r\n        this.bDisableSetReadBtn = true;\r\n        this.bDisableSetUnreadBtn = true;\r\n        this.bDisableDeletePreventBtn = true;\r\n        this.bDisableDeleteAllowBtn = true;\r\n    }\r\n\r\n}\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n"],"sourceRoot":""}