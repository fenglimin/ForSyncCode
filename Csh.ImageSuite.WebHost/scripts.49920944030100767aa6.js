if(function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";var n=[],r=e.document,a=Object.getPrototypeOf,i=n.slice,o=n.concat,s=n.push,l=n.indexOf,u={},d=u.toString,c=u.hasOwnProperty,f=c.toString,h=f.call(Object),p={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},g=function(e){return null!=e&&e===e.window},v={type:!0,src:!0,noModule:!0};function y(e,t,n){var a,i=(t=t||r).createElement("script");if(i.text=e,n)for(a in v)n[a]&&(i[a]=n[a]);t.head.appendChild(i).parentNode.removeChild(i)}function b(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?u[d.call(e)]||"object":typeof e}var w=function(e,t){return new w.fn.init(e,t)},x=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function _(e){var t=!!e&&"length"in e&&e.length,n=b(e);return!m(e)&&!g(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}w.fn=w.prototype={jquery:"3.3.1",constructor:w,length:0,toArray:function(){return i.call(this)},get:function(e){return null==e?i.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return w.each(this,e)},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},w.extend=w.fn.extend=function(){var e,t,n,r,a,i,o=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[s]||{},s++),"object"==typeof o||m(o)||(o={}),s===l&&(o=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=o[t],o!==(r=e[t])&&(u&&r&&(w.isPlainObject(r)||(a=Array.isArray(r)))?(a?(a=!1,i=n&&Array.isArray(n)?n:[]):i=n&&w.isPlainObject(n)?n:{},o[t]=w.extend(u,i,r)):void 0!==r&&(o[t]=r));return o},w.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==d.call(e)||(t=a(e))&&("function"!=typeof(n=c.call(t,"constructor")&&t.constructor)||f.call(n)!==h))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){y(e)},each:function(e,t){var n,r=0;if(_(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(x,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(_(Object(e))?w.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:l.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,a=e.length;r<n;r++)e[a++]=t[r];return e.length=a,e},grep:function(e,t,n){for(var r=[],a=0,i=e.length,o=!n;a<i;a++)!t(e[a],a)!==o&&r.push(e[a]);return r},map:function(e,t,n){var r,a,i=0,s=[];if(_(e))for(r=e.length;i<r;i++)null!=(a=t(e[i],i,n))&&s.push(a);else for(i in e)null!=(a=t(e[i],i,n))&&s.push(a);return o.apply([],s)},guid:1,support:p}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=n[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){u["[object "+t+"]"]=t.toLowerCase()});var E=function(e){var t,n,r,a,i,o,s,l,u,d,c,f,h,p,m,g,v,y,b,w="sizzle"+1*new Date,x=e.document,_=0,E=0,T=oe(),j=oe(),S=oe(),C=function(e,t){return e===t&&(c=!0),0},O={}.hasOwnProperty,P=[],I=P.pop,M=P.push,D=P.push,L=P.slice,A=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},k="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",U="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",N="\\["+R+"*("+U+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+U+"))|)"+R+"*\\]",B=":("+U+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|.*)\\)|)",H=new RegExp(R+"+","g"),F=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g"),V=new RegExp("^"+R+"*,"+R+"*"),z=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),W=new RegExp("="+R+"*([^\\]'\"]*?)"+R+"*\\]","g"),q=new RegExp(B),G=new RegExp("^"+U+"$"),Y={ID:new RegExp("^#("+U+")"),CLASS:new RegExp("^\\.("+U+")"),TAG:new RegExp("^("+U+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+k+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},$=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,Q=new RegExp("\\\\([\\da-f]{1,6}"+R+"?|("+R+")|.)","ig"),ee=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=function(){f()},ae=ye(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{D.apply(P=L.call(x.childNodes),x.childNodes)}catch(e){D={apply:P.length?function(e,t){M.apply(e,L.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function ie(e,t,r,a){var i,s,u,d,c,p,v,y=t&&t.ownerDocument,_=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==_&&9!==_&&11!==_)return r;if(!a&&((t?t.ownerDocument||t:x)!==h&&f(t),t=t||h,m)){if(11!==_&&(c=K.exec(e)))if(i=c[1]){if(9===_){if(!(u=t.getElementById(i)))return r;if(u.id===i)return r.push(u),r}else if(y&&(u=y.getElementById(i))&&b(t,u)&&u.id===i)return r.push(u),r}else{if(c[2])return D.apply(r,t.getElementsByTagName(e)),r;if((i=c[3])&&n.getElementsByClassName&&t.getElementsByClassName)return D.apply(r,t.getElementsByClassName(i)),r}if(n.qsa&&!S[e+" "]&&(!g||!g.test(e))){if(1!==_)y=t,v=e;else if("object"!==t.nodeName.toLowerCase()){for((d=t.getAttribute("id"))?d=d.replace(te,ne):t.setAttribute("id",d=w),s=(p=o(e)).length;s--;)p[s]="#"+d+" "+ve(p[s]);v=p.join(","),y=J.test(e)&&me(t.parentNode)||t}if(v)try{return D.apply(r,y.querySelectorAll(v)),r}catch(e){}finally{d===w&&t.removeAttribute("id")}}}return l(e.replace(F,"$1"),t,r,a)}function oe(){var e=[];return function t(n,a){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=a}}function se(e){return e[w]=!0,e}function le(e){var t=h.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ue(e,t){for(var n=e.split("|"),a=n.length;a--;)r.attrHandle[n[a]]=t}function de(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function ce(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function fe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function he(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ae(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function pe(e){return se(function(t){return t=+t,se(function(n,r){for(var a,i=e([],n.length,t),o=i.length;o--;)n[a=i[o]]&&(n[a]=!(r[a]=n[a]))})})}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=ie.support={},i=ie.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},f=ie.setDocument=function(e){var t,a,o=e?e.ownerDocument||e:x;return o!==h&&9===o.nodeType&&o.documentElement?(p=(h=o).documentElement,m=!i(h),x!==h&&(a=h.defaultView)&&a.top!==a&&(a.addEventListener?a.addEventListener("unload",re,!1):a.attachEvent&&a.attachEvent("onunload",re)),n.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=le(function(e){return e.appendChild(h.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Z.test(h.getElementsByClassName),n.getById=le(function(e){return p.appendChild(e).id=w,!h.getElementsByName||!h.getElementsByName(w).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(Q,ee);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(Q,ee);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n,r,a,i=t.getElementById(e);if(i){if((n=i.getAttributeNode("id"))&&n.value===e)return[i];for(a=t.getElementsByName(e),r=0;i=a[r++];)if((n=i.getAttributeNode("id"))&&n.value===e)return[i]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],a=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[a++];)1===n.nodeType&&r.push(n);return r}return i},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},v=[],g=[],(n.qsa=Z.test(h.querySelectorAll))&&(le(function(e){p.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+R+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+R+"*(?:value|"+k+")"),e.querySelectorAll("[id~="+w+"-]").length||g.push("~="),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||g.push(".#.+[+~]")}),le(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=h.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+R+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),p.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(n.matchesSelector=Z.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&le(function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),v.push("!=",B)}),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),t=Z.test(p.compareDocumentPosition),b=t||Z.test(p.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},C=t?function(e,t){if(e===t)return c=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===h||e.ownerDocument===x&&b(x,e)?-1:t===h||t.ownerDocument===x&&b(x,t)?1:d?A(d,e)-A(d,t):0:4&r?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,r=0,a=e.parentNode,i=t.parentNode,o=[e],s=[t];if(!a||!i)return e===h?-1:t===h?1:a?-1:i?1:d?A(d,e)-A(d,t):0;if(a===i)return de(e,t);for(n=e;n=n.parentNode;)o.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;o[r]===s[r];)r++;return r?de(o[r],s[r]):o[r]===x?-1:s[r]===x?1:0},h):h},ie.matches=function(e,t){return ie(e,null,null,t)},ie.matchesSelector=function(e,t){if((e.ownerDocument||e)!==h&&f(e),t=t.replace(W,"='$1']"),n.matchesSelector&&m&&!S[t+" "]&&(!v||!v.test(t))&&(!g||!g.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return ie(t,h,null,[e]).length>0},ie.contains=function(e,t){return(e.ownerDocument||e)!==h&&f(e),b(e,t)},ie.attr=function(e,t){(e.ownerDocument||e)!==h&&f(e);var a=r.attrHandle[t.toLowerCase()],i=a&&O.call(r.attrHandle,t.toLowerCase())?a(e,t,!m):void 0;return void 0!==i?i:n.attributes||!m?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},ie.escape=function(e){return(e+"").replace(te,ne)},ie.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ie.uniqueSort=function(e){var t,r=[],a=0,i=0;if(c=!n.detectDuplicates,d=!n.sortStable&&e.slice(0),e.sort(C),c){for(;t=e[i++];)t===e[i]&&(a=r.push(i));for(;a--;)e.splice(r[a],1)}return d=null,e},a=ie.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=a(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=a(t);return n},(r=ie.selectors={cacheLength:50,createPseudo:se,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Q,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(Q,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ie.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ie.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Y.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&q.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Q,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+R+")"+e+"("+R+"|$)"))&&T(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var a=ie.attr(r,e);return null==a?"!="===t:!t||(a+="","="===t?a===n:"!="===t?a!==n:"^="===t?n&&0===a.indexOf(n):"*="===t?n&&a.indexOf(n)>-1:"$="===t?n&&a.slice(-n.length)===n:"~="===t?(" "+a.replace(H," ")+" ").indexOf(n)>-1:"|="===t&&(a===n||a.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,a){var i="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===a?function(e){return!!e.parentNode}:function(t,n,l){var u,d,c,f,h,p,m=i!==o?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s,b=!1;if(g){if(i){for(;m;){for(f=t;f=f[m];)if(s?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[o?g.firstChild:g.lastChild],o&&y){for(b=(h=(u=(d=(c=(f=g)[w]||(f[w]={}))[f.uniqueID]||(c[f.uniqueID]={}))[e]||[])[0]===_&&u[1])&&u[2],f=h&&g.childNodes[h];f=++h&&f&&f[m]||(b=h=0)||p.pop();)if(1===f.nodeType&&++b&&f===t){d[e]=[_,h,b];break}}else if(y&&(b=h=(u=(d=(c=(f=t)[w]||(f[w]={}))[f.uniqueID]||(c[f.uniqueID]={}))[e]||[])[0]===_&&u[1]),!1===b)for(;(f=++h&&f&&f[m]||(b=h=0)||p.pop())&&((s?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++b||(y&&((d=(c=f[w]||(f[w]={}))[f.uniqueID]||(c[f.uniqueID]={}))[e]=[_,b]),f!==t)););return(b-=a)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,t){var n,a=r.pseudos[e]||r.setFilters[e.toLowerCase()]||ie.error("unsupported pseudo: "+e);return a[w]?a(t):a.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,n){for(var r,i=a(e,t),o=i.length;o--;)e[r=A(e,i[o])]=!(n[r]=i[o])}):function(e){return a(e,0,n)}):a}},pseudos:{not:se(function(e){var t=[],n=[],r=s(e.replace(F,"$1"));return r[w]?se(function(e,t,n,a){for(var i,o=r(e,null,a,[]),s=e.length;s--;)(i=o[s])&&(e[s]=!(t[s]=i))}):function(e,a,i){return t[0]=e,r(t,null,i,n),t[0]=null,!n.pop()}}),has:se(function(e){return function(t){return ie(e,t).length>0}}),contains:se(function(e){return e=e.replace(Q,ee),function(t){return(t.textContent||t.innerText||a(t)).indexOf(e)>-1}}),lang:se(function(e){return G.test(e||"")||ie.error("unsupported lang: "+e),e=e.replace(Q,ee).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:he(!1),disabled:he(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return $.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:pe(function(){return[0]}),last:pe(function(e,t){return[t-1]}),eq:pe(function(e,t,n){return[n<0?n+t:n]}),even:pe(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:pe(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:pe(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:pe(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=ce(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=fe(t);function ge(){}function ve(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function ye(e,t,n){var r=t.dir,a=t.next,i=a||r,o=n&&"parentNode"===i,s=E++;return t.first?function(t,n,a){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,a);return!1}:function(t,n,l){var u,d,c,f=[_,s];if(l){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,l))return!0}else for(;t=t[r];)if(1===t.nodeType||o)if(d=(c=t[w]||(t[w]={}))[t.uniqueID]||(c[t.uniqueID]={}),a&&a===t.nodeName.toLowerCase())t=t[r]||t;else{if((u=d[i])&&u[0]===_&&u[1]===s)return f[2]=u[2];if(d[i]=f,f[2]=e(t,n,l))return!0}return!1}}function be(e){return e.length>1?function(t,n,r){for(var a=e.length;a--;)if(!e[a](t,n,r))return!1;return!0}:e[0]}function we(e,t,n,r,a){for(var i,o=[],s=0,l=e.length,u=null!=t;s<l;s++)(i=e[s])&&(n&&!n(i,r,a)||(o.push(i),u&&t.push(s)));return o}function xe(e,t,n,r,a,i){return r&&!r[w]&&(r=xe(r)),a&&!a[w]&&(a=xe(a,i)),se(function(i,o,s,l){var u,d,c,f=[],h=[],p=o.length,m=i||function(e,t,n){for(var r=0,a=t.length;r<a;r++)ie(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),g=!e||!i&&t?m:we(m,f,e,s,l),v=n?a||(i?e:p||r)?[]:o:g;if(n&&n(g,v,s,l),r)for(u=we(v,h),r(u,[],s,l),d=u.length;d--;)(c=u[d])&&(v[h[d]]=!(g[h[d]]=c));if(i){if(a||e){if(a){for(u=[],d=v.length;d--;)(c=v[d])&&u.push(g[d]=c);a(null,v=[],u,l)}for(d=v.length;d--;)(c=v[d])&&(u=a?A(i,c):f[d])>-1&&(i[u]=!(o[u]=c))}}else v=we(v===o?v.splice(p,v.length):v),a?a(null,o,v,l):D.apply(o,v)})}function _e(e){for(var t,n,a,i=e.length,o=r.relative[e[0].type],s=o||r.relative[" "],l=o?1:0,d=ye(function(e){return e===t},s,!0),c=ye(function(e){return A(t,e)>-1},s,!0),f=[function(e,n,r){var a=!o&&(r||n!==u)||((t=n).nodeType?d(e,n,r):c(e,n,r));return t=null,a}];l<i;l++)if(n=r.relative[e[l].type])f=[ye(be(f),n)];else{if((n=r.filter[e[l].type].apply(null,e[l].matches))[w]){for(a=++l;a<i&&!r.relative[e[a].type];a++);return xe(l>1&&be(f),l>1&&ve(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(F,"$1"),n,l<a&&_e(e.slice(l,a)),a<i&&_e(e=e.slice(a)),a<i&&ve(e))}f.push(n)}return be(f)}function Ee(e,t){var n=t.length>0,a=e.length>0,i=function(i,o,s,l,d){var c,p,g,v=0,y="0",b=i&&[],w=[],x=u,E=i||a&&r.find.TAG("*",d),T=_+=null==x?1:Math.random()||.1,j=E.length;for(d&&(u=o===h||o||d);y!==j&&null!=(c=E[y]);y++){if(a&&c){for(p=0,o||c.ownerDocument===h||(f(c),s=!m);g=e[p++];)if(g(c,o||h,s)){l.push(c);break}d&&(_=T)}n&&((c=!g&&c)&&v--,i&&b.push(c))}if(v+=y,n&&y!==v){for(p=0;g=t[p++];)g(b,w,o,s);if(i){if(v>0)for(;y--;)b[y]||w[y]||(w[y]=I.call(l));w=we(w)}D.apply(l,w),d&&!i&&w.length>0&&v+t.length>1&&ie.uniqueSort(l)}return d&&(_=T,u=x),b};return n?se(i):i}return ge.prototype=r.filters=r.pseudos,r.setFilters=new ge,o=ie.tokenize=function(e,t){var n,a,i,o,s,l,u,d=j[e+" "];if(d)return t?0:d.slice(0);for(s=e,l=[],u=r.preFilter;s;){for(o in n&&!(a=V.exec(s))||(a&&(s=s.slice(a[0].length)||s),l.push(i=[])),n=!1,(a=z.exec(s))&&(n=a.shift(),i.push({value:n,type:a[0].replace(F," ")}),s=s.slice(n.length)),r.filter)!(a=Y[o].exec(s))||u[o]&&!(a=u[o](a))||(n=a.shift(),i.push({value:n,type:o,matches:a}),s=s.slice(n.length));if(!n)break}return t?s.length:s?ie.error(e):j(e,l).slice(0)},s=ie.compile=function(e,t){var n,r=[],a=[],i=S[e+" "];if(!i){for(t||(t=o(e)),n=t.length;n--;)(i=_e(t[n]))[w]?r.push(i):a.push(i);(i=S(e,Ee(a,r))).selector=e}return i},l=ie.select=function(e,t,n,a){var i,l,u,d,c,f="function"==typeof e&&e,h=!a&&o(e=f.selector||e);if(n=n||[],1===h.length){if((l=h[0]=h[0].slice(0)).length>2&&"ID"===(u=l[0]).type&&9===t.nodeType&&m&&r.relative[l[1].type]){if(!(t=(r.find.ID(u.matches[0].replace(Q,ee),t)||[])[0]))return n;f&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(i=Y.needsContext.test(e)?0:l.length;i--&&!r.relative[d=(u=l[i]).type];)if((c=r.find[d])&&(a=c(u.matches[0].replace(Q,ee),J.test(l[0].type)&&me(t.parentNode)||t))){if(l.splice(i,1),!(e=a.length&&ve(l)))return D.apply(n,a),n;break}}return(f||s(e,h))(a,t,!m,n,!t||J.test(e)&&me(t.parentNode)||t),n},n.sortStable=w.split("").sort(C).join("")===w,n.detectDuplicates=!!c,f(),n.sortDetached=le(function(e){return 1&e.compareDocumentPosition(h.createElement("fieldset"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ue("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ue("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||ue(k,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),ie}(e);w.find=E,w.expr=E.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=E.uniqueSort,w.text=E.getText,w.isXMLDoc=E.isXML,w.contains=E.contains,w.escapeSelector=E.escape;var T=function(e,t,n){for(var r=[],a=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&w(e).is(n))break;r.push(e)}return r},j=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},S=w.expr.match.needsContext;function C(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var O=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function P(e,t,n){return m(t)?w.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?w.grep(e,function(e){return e===t!==n}):"string"!=typeof t?w.grep(e,function(e){return l.call(t,e)>-1!==n}):w.filter(t,e,n)}w.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},w.fn.extend({find:function(e){var t,n,r=this.length,a=this;if("string"!=typeof e)return this.pushStack(w(e).filter(function(){for(t=0;t<r;t++)if(w.contains(a[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)w.find(e,a[t],n);return r>1?w.uniqueSort(n):n},filter:function(e){return this.pushStack(P(this,e||[],!1))},not:function(e){return this.pushStack(P(this,e||[],!0))},is:function(e){return!!P(this,"string"==typeof e&&S.test(e)?w(e):e||[],!1).length}});var I,M=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(e,t,n){var a,i;if(!e)return this;if(n=n||I,"string"==typeof e){if(!(a="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:M.exec(e))||!a[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(a[1]){if(w.merge(this,w.parseHTML(a[1],(t=t instanceof w?t[0]:t)&&t.nodeType?t.ownerDocument||t:r,!0)),O.test(a[1])&&w.isPlainObject(t))for(a in t)m(this[a])?this[a](t[a]):this.attr(a,t[a]);return this}return(i=r.getElementById(a[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(w):w.makeArray(e,this)}).prototype=w.fn,I=w(r);var D=/^(?:parents|prev(?:Until|All))/,L={children:!0,contents:!0,next:!0,prev:!0};function A(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}w.fn.extend({has:function(e){var t=w(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(w.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,a=this.length,i=[],o="string"!=typeof e&&w(e);if(!S.test(e))for(;r<a;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,e))){i.push(n);break}return this.pushStack(i.length>1?w.uniqueSort(i):i)},index:function(e){return e?"string"==typeof e?l.call(w(e),this[0]):l.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return T(e,"parentNode")},parentsUntil:function(e,t,n){return T(e,"parentNode",n)},next:function(e){return A(e,"nextSibling")},prev:function(e){return A(e,"previousSibling")},nextAll:function(e){return T(e,"nextSibling")},prevAll:function(e){return T(e,"previousSibling")},nextUntil:function(e,t,n){return T(e,"nextSibling",n)},prevUntil:function(e,t,n){return T(e,"previousSibling",n)},siblings:function(e){return j((e.parentNode||{}).firstChild,e)},children:function(e){return j(e.firstChild)},contents:function(e){return C(e,"iframe")?e.contentDocument:(C(e,"template")&&(e=e.content||e),w.merge([],e.childNodes))}},function(e,t){w.fn[e]=function(n,r){var a=w.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(a=w.filter(r,a)),this.length>1&&(L[e]||w.uniqueSort(a),D.test(e)&&a.reverse()),this.pushStack(a)}});var k=/[^\x20\t\r\n\f]+/g;function R(e){return e}function U(e){throw e}function N(e,t,n,r){var a;try{e&&m(a=e.promise)?a.call(e).done(t).fail(n):e&&m(a=e.then)?a.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}w.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return w.each(e.match(k)||[],function(e,n){t[n]=!0}),t}(e):w.extend({},e);var t,n,r,a,i=[],o=[],s=-1,l=function(){for(a=a||e.once,r=t=!0;o.length;s=-1)for(n=o.shift();++s<i.length;)!1===i[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=i.length,n=!1);e.memory||(n=!1),t=!1,a&&(i=n?[]:"")},u={add:function(){return i&&(n&&!t&&(s=i.length-1,o.push(n)),function t(n){w.each(n,function(n,r){m(r)?e.unique&&u.has(r)||i.push(r):r&&r.length&&"string"!==b(r)&&t(r)})}(arguments),n&&!t&&l()),this},remove:function(){return w.each(arguments,function(e,t){for(var n;(n=w.inArray(t,i,n))>-1;)i.splice(n,1),n<=s&&s--}),this},has:function(e){return e?w.inArray(e,i)>-1:i.length>0},empty:function(){return i&&(i=[]),this},disable:function(){return a=o=[],i=n="",this},disabled:function(){return!i},lock:function(){return a=o=[],n||t||(i=n=""),this},locked:function(){return!!a},fireWith:function(e,n){return a||(n=[e,(n=n||[]).slice?n.slice():n],o.push(n),t||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},w.extend({Deferred:function(t){var n=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],r="pending",a={state:function(){return r},always:function(){return i.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var e=arguments;return w.Deferred(function(t){w.each(n,function(n,r){var a=m(e[r[4]])&&e[r[4]];i[r[1]](function(){var e=a&&a.apply(this,arguments);e&&m(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,a?[e]:arguments)})}),e=null}).promise()},then:function(t,r,a){var i=0;function o(t,n,r,a){return function(){var s=this,l=arguments,u=function(){var e,u;if(!(t<i)){if((e=r.apply(s,l))===n.promise())throw new TypeError("Thenable self-resolution");m(u=e&&("object"==typeof e||"function"==typeof e)&&e.then)?a?u.call(e,o(i,n,R,a),o(i,n,U,a)):u.call(e,o(++i,n,R,a),o(i,n,U,a),o(i,n,R,n.notifyWith)):(r!==R&&(s=void 0,l=[e]),(a||n.resolveWith)(s,l))}},d=a?u:function(){try{u()}catch(e){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(e,d.stackTrace),t+1>=i&&(r!==U&&(s=void 0,l=[e]),n.rejectWith(s,l))}};t?d():(w.Deferred.getStackHook&&(d.stackTrace=w.Deferred.getStackHook()),e.setTimeout(d))}}return w.Deferred(function(e){n[0][3].add(o(0,e,m(a)?a:R,e.notifyWith)),n[1][3].add(o(0,e,m(t)?t:R)),n[2][3].add(o(0,e,m(r)?r:U))}).promise()},promise:function(e){return null!=e?w.extend(e,a):a}},i={};return w.each(n,function(e,t){var o=t[2],s=t[5];a[t[1]]=o.add,s&&o.add(function(){r=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),o.add(t[3].fire),i[t[0]]=function(){return i[t[0]+"With"](this===i?void 0:this,arguments),this},i[t[0]+"With"]=o.fireWith}),a.promise(i),t&&t.call(i,i),i},when:function(e){var t=arguments.length,n=t,r=Array(n),a=i.call(arguments),o=w.Deferred(),s=function(e){return function(n){r[e]=this,a[e]=arguments.length>1?i.call(arguments):n,--t||o.resolveWith(r,a)}};if(t<=1&&(N(e,o.done(s(n)).resolve,o.reject,!t),"pending"===o.state()||m(a[n]&&a[n].then)))return o.then();for(;n--;)N(a[n],s(n),o.reject);return o.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&B.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},w.readyException=function(t){e.setTimeout(function(){throw t})};var H=w.Deferred();function F(){r.removeEventListener("DOMContentLoaded",F),e.removeEventListener("load",F),w.ready()}w.fn.ready=function(e){return H.then(e).catch(function(e){w.readyException(e)}),this},w.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==e&&--w.readyWait>0||H.resolveWith(r,[w]))}}),w.ready.then=H.then,"complete"===r.readyState||"loading"!==r.readyState&&!r.documentElement.doScroll?e.setTimeout(w.ready):(r.addEventListener("DOMContentLoaded",F),e.addEventListener("load",F));var V=function(e,t,n,r,a,i,o){var s=0,l=e.length,u=null==n;if("object"===b(n))for(s in a=!0,n)V(e,t,s,n[s],!0,i,o);else if(void 0!==r&&(a=!0,m(r)||(o=!0),u&&(o?(t.call(e,r),t=null):(u=t,t=function(e,t,n){return u.call(w(e),n)})),t))for(;s<l;s++)t(e[s],n,o?r:r.call(e[s],s,t(e[s],n)));return a?e:u?t.call(e):l?t(e[0],n):i},z=/^-ms-/,W=/-([a-z])/g;function q(e,t){return t.toUpperCase()}function G(e){return e.replace(z,"ms-").replace(W,q)}var Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function $(){this.expando=w.expando+$.uid++}$.uid=1,$.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,a=this.cache(e);if("string"==typeof t)a[G(t)]=n;else for(r in t)a[G(r)]=t[r];return a},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][G(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(G):(t=G(t))in r?[t]:t.match(k)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||w.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!w.isEmptyObject(t)}};var X=new $,Z=new $,K=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function Q(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(J,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:K.test(e)?JSON.parse(e):e)}(n)}catch(e){}Z.set(e,t,n)}else n=void 0;return n}w.extend({hasData:function(e){return Z.hasData(e)||X.hasData(e)},data:function(e,t,n){return Z.access(e,t,n)},removeData:function(e,t){Z.remove(e,t)},_data:function(e,t,n){return X.access(e,t,n)},_removeData:function(e,t){X.remove(e,t)}}),w.fn.extend({data:function(e,t){var n,r,a,i=this[0],o=i&&i.attributes;if(void 0===e){if(this.length&&(a=Z.get(i),1===i.nodeType&&!X.get(i,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(r=o[n].name).indexOf("data-")&&(r=G(r.slice(5)),Q(i,r,a[r]));X.set(i,"hasDataAttrs",!0)}return a}return"object"==typeof e?this.each(function(){Z.set(this,e)}):V(this,function(t){var n;if(i&&void 0===t){if(void 0!==(n=Z.get(i,e)))return n;if(void 0!==(n=Q(i,e)))return n}else this.each(function(){Z.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Z.remove(this,e)})}}),w.extend({queue:function(e,t,n){var r;if(e)return r=X.get(e,t=(t||"fx")+"queue"),n&&(!r||Array.isArray(n)?r=X.access(e,t,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){var n=w.queue(e,t=t||"fx"),r=n.length,a=n.shift(),i=w._queueHooks(e,t);"inprogress"===a&&(a=n.shift(),r--),a&&("fx"===t&&n.unshift("inprogress"),delete i.stop,a.call(e,function(){w.dequeue(e,t)},i)),!r&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return X.get(e,n)||X.access(e,n,{empty:w.Callbacks("once memory").add(function(){X.remove(e,[t+"queue",n])})})}}),w.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?w.queue(this[0],e):void 0===t?this:this.each(function(){var n=w.queue(this,e,t);w._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,a=w.Deferred(),i=this,o=this.length,s=function(){--r||a.resolveWith(i,[i])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=X.get(i[o],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),a.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],re=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&w.contains(e.ownerDocument,e)&&"none"===w.css(e,"display")},ae=function(e,t,n,r){var a,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in a=n.apply(e,r||[]),t)e.style[i]=o[i];return a};function ie(e,t,n,r){var a,i,o=20,s=r?function(){return r.cur()}:function(){return w.css(e,t,"")},l=s(),u=n&&n[3]||(w.cssNumber[t]?"":"px"),d=(w.cssNumber[t]||"px"!==u&&+l)&&te.exec(w.css(e,t));if(d&&d[3]!==u){for(u=u||d[3],d=+(l/=2)||1;o--;)w.style(e,t,d+u),(1-i)*(1-(i=s()/l||.5))<=0&&(o=0),d/=i;w.style(e,t,(d*=2)+u),n=n||[]}return n&&(d=+d||+l||0,a=n[1]?d+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=d,r.end=a)),a}var oe={};function se(e){var t,n=e.ownerDocument,r=e.nodeName,a=oe[r];return a||(t=n.body.appendChild(n.createElement(r)),a=w.css(t,"display"),t.parentNode.removeChild(t),"none"===a&&(a="block"),oe[r]=a,a)}function le(e,t){for(var n,r,a=[],i=0,o=e.length;i<o;i++)(r=e[i]).style&&(n=r.style.display,t?("none"===n&&(a[i]=X.get(r,"display")||null,a[i]||(r.style.display="")),""===r.style.display&&re(r)&&(a[i]=se(r))):"none"!==n&&(a[i]="none",X.set(r,"display",n)));for(i=0;i<o;i++)null!=a[i]&&(e[i].style.display=a[i]);return e}w.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){re(this)?w(this).show():w(this).hide()})}});var ue=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ce=/^$|^module$|\/(?:java|ecma)script/i,fe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function he(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&C(e,t)?w.merge([e],n):n}function pe(e,t){for(var n=0,r=e.length;n<r;n++)X.set(e[n],"globalEval",!t||X.get(t[n],"globalEval"))}fe.optgroup=fe.option,fe.tbody=fe.tfoot=fe.colgroup=fe.caption=fe.thead,fe.th=fe.td;var me=/<|&#?\w+;/;function ge(e,t,n,r,a){for(var i,o,s,l,u,d,c=t.createDocumentFragment(),f=[],h=0,p=e.length;h<p;h++)if((i=e[h])||0===i)if("object"===b(i))w.merge(f,i.nodeType?[i]:i);else if(me.test(i)){for(o=o||c.appendChild(t.createElement("div")),s=(de.exec(i)||["",""])[1].toLowerCase(),o.innerHTML=(l=fe[s]||fe._default)[1]+w.htmlPrefilter(i)+l[2],d=l[0];d--;)o=o.lastChild;w.merge(f,o.childNodes),(o=c.firstChild).textContent=""}else f.push(t.createTextNode(i));for(c.textContent="",h=0;i=f[h++];)if(r&&w.inArray(i,r)>-1)a&&a.push(i);else if(u=w.contains(i.ownerDocument,i),o=he(c.appendChild(i),"script"),u&&pe(o),n)for(d=0;i=o[d++];)ce.test(i.type||"")&&n.push(i);return c}!function(){var e=r.createDocumentFragment().appendChild(r.createElement("div")),t=r.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),p.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var ve=r.documentElement,ye=/^key/,be=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,we=/^([^.]*)(?:\.(.+)|)/;function xe(){return!0}function _e(){return!1}function Ee(){try{return r.activeElement}catch(e){}}function Te(e,t,n,r,a,i){var o,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Te(e,s,n,r,t[s],i);return e}if(null==r&&null==a?(a=n,r=n=void 0):null==a&&("string"==typeof n?(a=r,r=void 0):(a=r,r=n,n=void 0)),!1===a)a=_e;else if(!a)return e;return 1===i&&(o=a,(a=function(e){return w().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=w.guid++)),e.each(function(){w.event.add(this,t,a,r,n)})}w.event={global:{},add:function(e,t,n,r,a){var i,o,s,l,u,d,c,f,h,p,m,g=X.get(e);if(g)for(n.handler&&(n=(i=n).handler,a=i.selector),a&&w.find.matchesSelector(ve,a),n.guid||(n.guid=w.guid++),(l=g.events)||(l=g.events={}),(o=g.handle)||(o=g.handle=function(t){return void 0!==w&&w.event.triggered!==t.type?w.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(k)||[""]).length;u--;)h=m=(s=we.exec(t[u])||[])[1],p=(s[2]||"").split(".").sort(),h&&(c=w.event.special[h]||{},c=w.event.special[h=(a?c.delegateType:c.bindType)||h]||{},d=w.extend({type:h,origType:m,data:r,handler:n,guid:n.guid,selector:a,needsContext:a&&w.expr.match.needsContext.test(a),namespace:p.join(".")},i),(f=l[h])||((f=l[h]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(e,r,p,o)||e.addEventListener&&e.addEventListener(h,o)),c.add&&(c.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),a?f.splice(f.delegateCount++,0,d):f.push(d),w.event.global[h]=!0)},remove:function(e,t,n,r,a){var i,o,s,l,u,d,c,f,h,p,m,g=X.hasData(e)&&X.get(e);if(g&&(l=g.events)){for(u=(t=(t||"").match(k)||[""]).length;u--;)if(h=m=(s=we.exec(t[u])||[])[1],p=(s[2]||"").split(".").sort(),h){for(c=w.event.special[h]||{},f=l[h=(r?c.delegateType:c.bindType)||h]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=i=f.length;i--;)d=f[i],!a&&m!==d.origType||n&&n.guid!==d.guid||s&&!s.test(d.namespace)||r&&r!==d.selector&&("**"!==r||!d.selector)||(f.splice(i,1),d.selector&&f.delegateCount--,c.remove&&c.remove.call(e,d));o&&!f.length&&(c.teardown&&!1!==c.teardown.call(e,p,g.handle)||w.removeEvent(e,h,g.handle),delete l[h])}else for(h in l)w.event.remove(e,h+t[u],n,r,!0);w.isEmptyObject(l)&&X.remove(e,"handle events")}},dispatch:function(e){var t,n,r,a,i,o,s=w.event.fix(e),l=new Array(arguments.length),u=(X.get(this,"events")||{})[s.type]||[],d=w.event.special[s.type]||{};for(l[0]=s,t=1;t<arguments.length;t++)l[t]=arguments[t];if(s.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,s)){for(o=w.event.handlers.call(this,s,u),t=0;(a=o[t++])&&!s.isPropagationStopped();)for(s.currentTarget=a.elem,n=0;(i=a.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(i.namespace)||(s.handleObj=i,s.data=i.data,void 0!==(r=((w.event.special[i.origType]||{}).handle||i.handler).apply(a.elem,l))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,a,i,o,s=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(i=[],o={},n=0;n<l;n++)void 0===o[a=(r=t[n]).selector+" "]&&(o[a]=r.needsContext?w(a,this).index(u)>-1:w.find(a,this,null,[u]).length),o[a]&&i.push(r);i.length&&s.push({elem:u,handlers:i})}return u=this,l<t.length&&s.push({elem:u,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(w.Event.prototype,e,{enumerable:!0,configurable:!0,get:m(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[w.expando]?e:new w.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Ee()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Ee()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&C(this,"input"))return this.click(),!1},_default:function(e){return C(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},w.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?xe:_e,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:_e,isPropagationStopped:_e,isImmediatePropagationStopped:_e,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=xe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=xe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=xe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&ye.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&be.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},w.event.addProp),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,a=e.handleObj;return r&&(r===this||w.contains(this,r))||(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}}),w.fn.extend({on:function(e,t,n,r){return Te(this,e,t,n,r)},one:function(e,t,n,r){return Te(this,e,t,n,r,1)},off:function(e,t,n){var r,a;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,w(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(a in e)this.off(a,t,e[a]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=_e),this.each(function(){w.event.remove(this,e,n,t)})}});var je=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Se=/<script|<style|<link/i,Ce=/checked\s*(?:[^=]|=\s*.checked.)/i,Oe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Pe(e,t){return C(e,"table")&&C(11!==t.nodeType?t:t.firstChild,"tr")&&w(e).children("tbody")[0]||e}function Ie(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Me(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function De(e,t){var n,r,a,i,o,s,l,u;if(1===t.nodeType){if(X.hasData(e)&&(i=X.access(e),o=X.set(t,i),u=i.events))for(a in delete o.handle,o.events={},u)for(n=0,r=u[a].length;n<r;n++)w.event.add(t,a,u[a][n]);Z.hasData(e)&&(s=Z.access(e),l=w.extend({},s),Z.set(t,l))}}function Le(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ue.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Ae(e,t,n,r){t=o.apply([],t);var a,i,s,l,u,d,c=0,f=e.length,h=f-1,g=t[0],v=m(g);if(v||f>1&&"string"==typeof g&&!p.checkClone&&Ce.test(g))return e.each(function(a){var i=e.eq(a);v&&(t[0]=g.call(this,a,i.html())),Ae(i,t,n,r)});if(f&&(i=(a=ge(t,e[0].ownerDocument,!1,e,r)).firstChild,1===a.childNodes.length&&(a=i),i||r)){for(l=(s=w.map(he(a,"script"),Ie)).length;c<f;c++)u=a,c!==h&&(u=w.clone(u,!0,!0),l&&w.merge(s,he(u,"script"))),n.call(e[c],u,c);if(l)for(d=s[s.length-1].ownerDocument,w.map(s,Me),c=0;c<l;c++)ce.test((u=s[c]).type||"")&&!X.access(u,"globalEval")&&w.contains(d,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?w._evalUrl&&w._evalUrl(u.src):y(u.textContent.replace(Oe,""),d,u))}return e}function ke(e,t,n){for(var r,a=t?w.filter(t,e):e,i=0;null!=(r=a[i]);i++)n||1!==r.nodeType||w.cleanData(he(r)),r.parentNode&&(n&&w.contains(r.ownerDocument,r)&&pe(he(r,"script")),r.parentNode.removeChild(r));return e}w.extend({htmlPrefilter:function(e){return e.replace(je,"<$1></$2>")},clone:function(e,t,n){var r,a,i,o,s=e.cloneNode(!0),l=w.contains(e.ownerDocument,e);if(!(p.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(o=he(s),r=0,a=(i=he(e)).length;r<a;r++)Le(i[r],o[r]);if(t)if(n)for(i=i||he(e),o=o||he(s),r=0,a=i.length;r<a;r++)De(i[r],o[r]);else De(e,s);return(o=he(s,"script")).length>0&&pe(o,!l&&he(e,"script")),s},cleanData:function(e){for(var t,n,r,a=w.event.special,i=0;void 0!==(n=e[i]);i++)if(Y(n)){if(t=n[X.expando]){if(t.events)for(r in t.events)a[r]?w.event.remove(n,r):w.removeEvent(n,r,t.handle);n[X.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),w.fn.extend({detach:function(e){return ke(this,e,!0)},remove:function(e){return ke(this,e)},text:function(e){return V(this,function(e){return void 0===e?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ae(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Pe(this,e).appendChild(e)})},prepend:function(){return Ae(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Pe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Ae(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ae(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(w.cleanData(he(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return V(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Se.test(e)&&!fe[(de.exec(e)||["",""])[1].toLowerCase()]){e=w.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(w.cleanData(he(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Ae(this,arguments,function(t){var n=this.parentNode;w.inArray(this,e)<0&&(w.cleanData(he(this)),n&&n.replaceChild(t,this))},e)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){for(var n,r=[],a=w(e),i=a.length-1,o=0;o<=i;o++)n=o===i?this:this.clone(!0),w(a[o])[t](n),s.apply(r,n.get());return this.pushStack(r)}});var Re=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Ue=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Ne=new RegExp(ne.join("|"),"i");function Be(e,t,n){var r,a,i,o,s=e.style;return(n=n||Ue(e))&&(""!==(o=n.getPropertyValue(t)||n[t])||w.contains(e.ownerDocument,e)||(o=w.style(e,t)),!p.pixelBoxStyles()&&Re.test(o)&&Ne.test(t)&&(r=s.width,a=s.minWidth,i=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=r,s.minWidth=a,s.maxWidth=i)),void 0!==o?o+"":o}function He(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(d){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",d.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ve.appendChild(u).appendChild(d);var t=e.getComputedStyle(d);a="1%"!==t.top,l=12===n(t.marginLeft),d.style.right="60%",s=36===n(t.right),i=36===n(t.width),d.style.position="absolute",o=36===d.offsetWidth||"absolute",ve.removeChild(u),d=null}}function n(e){return Math.round(parseFloat(e))}var a,i,o,s,l,u=r.createElement("div"),d=r.createElement("div");d.style&&(d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===d.style.backgroundClip,w.extend(p,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),a},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),o}}))}();var Fe=/^(none|table(?!-c[ea]).+)/,Ve=/^--/,ze={position:"absolute",visibility:"hidden",display:"block"},We={letterSpacing:"0",fontWeight:"400"},qe=["Webkit","Moz","ms"],Ge=r.createElement("div").style;function Ye(e){var t=w.cssProps[e];return t||(t=w.cssProps[e]=function(e){if(e in Ge)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=qe.length;n--;)if((e=qe[n]+t)in Ge)return e}(e)||e),t}function $e(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Xe(e,t,n,r,a,i){var o="width"===t?1:0,s=0,l=0;if(n===(r?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(l+=w.css(e,n+ne[o],!0,a)),r?("content"===n&&(l-=w.css(e,"padding"+ne[o],!0,a)),"margin"!==n&&(l-=w.css(e,"border"+ne[o]+"Width",!0,a))):(l+=w.css(e,"padding"+ne[o],!0,a),"padding"!==n?l+=w.css(e,"border"+ne[o]+"Width",!0,a):s+=w.css(e,"border"+ne[o]+"Width",!0,a));return!r&&i>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-i-l-s-.5))),l}function Ze(e,t,n){var r=Ue(e),a=Be(e,t,r),i="border-box"===w.css(e,"boxSizing",!1,r),o=i;if(Re.test(a)){if(!n)return a;a="auto"}return o=o&&(p.boxSizingReliable()||a===e.style[t]),("auto"===a||!parseFloat(a)&&"inline"===w.css(e,"display",!1,r))&&(a=e["offset"+t[0].toUpperCase()+t.slice(1)],o=!0),(a=parseFloat(a)||0)+Xe(e,t,n||(i?"border":"content"),o,r,a)+"px"}function Ke(e,t,n,r,a){return new Ke.prototype.init(e,t,n,r,a)}w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Be(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,i,o,s=G(t),l=Ve.test(t),u=e.style;if(l||(t=Ye(s)),o=w.cssHooks[t]||w.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(a=o.get(e,!1,r))?a:u[t];"string"==(i=typeof n)&&(a=te.exec(n))&&a[1]&&(n=ie(e,t,a),i="number"),null!=n&&n==n&&("number"===i&&(n+=a&&a[3]||(w.cssNumber[s]?"":"px")),p.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,r))||(l?u.setProperty(t,n):u[t]=n))}},css:function(e,t,n,r){var a,i,o,s=G(t);return Ve.test(t)||(t=Ye(s)),(o=w.cssHooks[t]||w.cssHooks[s])&&"get"in o&&(a=o.get(e,!0,n)),void 0===a&&(a=Be(e,t,r)),"normal"===a&&t in We&&(a=We[t]),""===n||n?(i=parseFloat(a),!0===n||isFinite(i)?i||0:a):a}}),w.each(["height","width"],function(e,t){w.cssHooks[t]={get:function(e,n,r){if(n)return!Fe.test(w.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ze(e,t,r):ae(e,ze,function(){return Ze(e,t,r)})},set:function(e,n,r){var a,i=Ue(e),o="border-box"===w.css(e,"boxSizing",!1,i),s=r&&Xe(e,t,r,o,i);return o&&p.scrollboxSize()===i.position&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(i[t])-Xe(e,t,"border",!1,i)-.5)),s&&(a=te.exec(n))&&"px"!==(a[3]||"px")&&(e.style[t]=n,n=w.css(e,t)),$e(0,n,s)}}}),w.cssHooks.marginLeft=He(p.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Be(e,"marginLeft"))||e.getBoundingClientRect().left-ae(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(n){for(var r=0,a={},i="string"==typeof n?n.split(" "):[n];r<4;r++)a[e+ne[r]+t]=i[r]||i[r-2]||i[0];return a}},"margin"!==e&&(w.cssHooks[e+t].set=$e)}),w.fn.extend({css:function(e,t){return V(this,function(e,t,n){var r,a,i={},o=0;if(Array.isArray(t)){for(r=Ue(e),a=t.length;o<a;o++)i[t[o]]=w.css(e,t[o],!1,r);return i}return void 0!==n?w.style(e,t,n):w.css(e,t)},e,t,arguments.length>1)}}),w.Tween=Ke,(Ke.prototype={constructor:Ke,init:function(e,t,n,r,a,i){this.elem=e,this.prop=n,this.easing=a||w.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=i||(w.cssNumber[n]?"":"px")},cur:function(){var e=Ke.propHooks[this.prop];return e&&e.get?e.get(this):Ke.propHooks._default.get(this)},run:function(e){var t,n=Ke.propHooks[this.prop];return this.pos=t=this.options.duration?w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ke.propHooks._default.set(this),this}}).init.prototype=Ke.prototype,(Ke.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=w.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[w.cssProps[e.prop]]&&!w.cssHooks[e.prop]?e.elem[e.prop]=e.now:w.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Ke.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},w.fx=Ke.prototype.init,w.fx.step={};var Je,Qe,et=/^(?:toggle|show|hide)$/,tt=/queueHooks$/;function nt(){Qe&&(!1===r.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(nt):e.setTimeout(nt,w.fx.interval),w.fx.tick())}function rt(){return e.setTimeout(function(){Je=void 0}),Je=Date.now()}function at(e,t){var n,r=0,a={height:e};for(t=t?1:0;r<4;r+=2-t)a["margin"+(n=ne[r])]=a["padding"+n]=e;return t&&(a.opacity=a.width=e),a}function it(e,t,n){for(var r,a=(ot.tweeners[t]||[]).concat(ot.tweeners["*"]),i=0,o=a.length;i<o;i++)if(r=a[i].call(n,t,e))return r}function ot(e,t,n){var r,a,i=0,o=ot.prefilters.length,s=w.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var t=Je||rt(),n=Math.max(0,u.startTime+u.duration-t),r=1-(n/u.duration||0),i=0,o=u.tweens.length;i<o;i++)u.tweens[i].run(r);return s.notifyWith(e,[u,r,n]),r<1&&o?n:(o||s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},n),originalProperties:t,originalOptions:n,startTime:Je||rt(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(a)return this;for(a=!0;n<r;n++)u.tweens[n].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),d=u.props;for(function(e,t){var n,r,a,i,o;for(n in e)if(a=t[r=G(n)],i=e[n],Array.isArray(i)&&(a=i[1],i=e[n]=i[0]),n!==r&&(e[r]=i,delete e[n]),(o=w.cssHooks[r])&&"expand"in o)for(n in i=o.expand(i),delete e[r],i)n in e||(e[n]=i[n],t[n]=a);else t[r]=a}(d,u.opts.specialEasing);i<o;i++)if(r=ot.prefilters[i].call(u,e,d,u.opts))return m(r.stop)&&(w._queueHooks(u.elem,u.opts.queue).stop=r.stop.bind(r)),r;return w.map(d,it,u),m(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),w.fx.timer(w.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u}w.Animation=w.extend(ot,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ie(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(k);for(var n,r=0,a=e.length;r<a;r++)(ot.tweeners[n=e[r]]=ot.tweeners[n]||[]).unshift(t)},prefilters:[function(e,t,n){var r,a,i,o,s,l,u,d,c="width"in t||"height"in t,f=this,h={},p=e.style,m=e.nodeType&&re(e),g=X.get(e,"fxshow");for(r in n.queue||(null==(o=w._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,f.always(function(){f.always(function(){o.unqueued--,w.queue(e,"fx").length||o.empty.fire()})})),t)if(et.test(a=t[r])){if(delete t[r],i=i||"toggle"===a,a===(m?"hide":"show")){if("show"!==a||!g||void 0===g[r])continue;m=!0}h[r]=g&&g[r]||w.style(e,r)}if((l=!w.isEmptyObject(t))||!w.isEmptyObject(h))for(r in c&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(u=g&&g.display)&&(u=X.get(e,"display")),"none"===(d=w.css(e,"display"))&&(u?d=u:(le([e],!0),u=e.style.display||u,d=w.css(e,"display"),le([e]))),("inline"===d||"inline-block"===d&&null!=u)&&"none"===w.css(e,"float")&&(l||(f.done(function(){p.display=u}),null==u&&(u="none"===(d=p.display)?"":d)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",f.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1,h)l||(g?"hidden"in g&&(m=g.hidden):g=X.access(e,"fxshow",{display:u}),i&&(g.hidden=!m),m&&le([e],!0),f.done(function(){for(r in m||le([e]),X.remove(e,"fxshow"),h)w.style(e,r,h[r])})),l=it(m?g[r]:0,r,f),r in g||(g[r]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?ot.prefilters.unshift(e):ot.prefilters.push(e)}}),w.speed=function(e,t,n){var r=e&&"object"==typeof e?w.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return w.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration=r.duration in w.fx.speeds?w.fx.speeds[r.duration]:w.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(re).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var a=w.isEmptyObject(e),i=w.speed(t,n,r),o=function(){var t=ot(this,w.extend({},e),i);(a||X.get(this,"finish"))&&t.stop(!0)};return o.finish=o,a||!1===i.queue?this.each(o):this.queue(i.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,a=null!=e&&e+"queueHooks",i=w.timers,o=X.get(this);if(a)o[a]&&o[a].stop&&r(o[a]);else for(a in o)o[a]&&o[a].stop&&tt.test(a)&&r(o[a]);for(a=i.length;a--;)i[a].elem!==this||null!=e&&i[a].queue!==e||(i[a].anim.stop(n),t=!1,i.splice(a,1));!t&&n||w.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=X.get(this),r=n[e+"queue"],a=n[e+"queueHooks"],i=w.timers,o=r?r.length:0;for(n.finish=!0,w.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===e&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),w.each(["toggle","show","hide"],function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,a){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(at(t,!0),e,r,a)}}),w.each({slideDown:at("show"),slideUp:at("hide"),slideToggle:at("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),w.timers=[],w.fx.tick=function(){var e,t=0,n=w.timers;for(Je=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||w.fx.stop(),Je=void 0},w.fx.timer=function(e){w.timers.push(e),w.fx.start()},w.fx.interval=13,w.fx.start=function(){Qe||(Qe=!0,nt())},w.fx.stop=function(){Qe=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(t,n){return t=w.fx&&w.fx.speeds[t]||t,this.queue(n=n||"fx",function(n,r){var a=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(a)}})},function(){var e=r.createElement("input"),t=r.createElement("select").appendChild(r.createElement("option"));e.type="checkbox",p.checkOn=""!==e.value,p.optSelected=t.selected,(e=r.createElement("input")).value="t",e.type="radio",p.radioValue="t"===e.value}();var st,lt=w.expr.attrHandle;w.fn.extend({attr:function(e,t){return V(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})}}),w.extend({attr:function(e,t,n){var r,a,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===e.getAttribute?w.prop(e,t,n):(1===i&&w.isXMLDoc(e)||(a=w.attrHooks[t.toLowerCase()]||(w.expr.match.bool.test(t)?st:void 0)),void 0!==n?null===n?void w.removeAttr(e,t):a&&"set"in a&&void 0!==(r=a.set(e,n,t))?r:(e.setAttribute(t,n+""),n):a&&"get"in a&&null!==(r=a.get(e,t))?r:null==(r=w.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!p.radioValue&&"radio"===t&&C(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,a=t&&t.match(k);if(a&&1===e.nodeType)for(;n=a[r++];)e.removeAttribute(n)}}),st={set:function(e,t,n){return!1===t?w.removeAttr(e,n):e.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,t){var n=lt[t]||w.find.attr;lt[t]=function(e,t,r){var a,i,o=t.toLowerCase();return r||(i=lt[o],lt[o]=a,a=null!=n(e,t,r)?o:null,lt[o]=i),a}});var ut=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;function ct(e){return(e.match(k)||[]).join(" ")}function ft(e){return e.getAttribute&&e.getAttribute("class")||""}function ht(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(k)||[]}w.fn.extend({prop:function(e,t){return V(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[w.propFix[e]||e]})}}),w.extend({prop:function(e,t,n){var r,a,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&w.isXMLDoc(e)||(a=w.propHooks[t=w.propFix[t]||t]),void 0!==n?a&&"set"in a&&void 0!==(r=a.set(e,n,t))?r:e[t]=n:a&&"get"in a&&null!==(r=a.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):ut.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),p.optSelected||(w.propHooks.selected={get:function(e){return null},set:function(e){}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.fn.extend({addClass:function(e){var t,n,r,a,i,o,s,l=0;if(m(e))return this.each(function(t){w(this).addClass(e.call(this,t,ft(this)))});if((t=ht(e)).length)for(;n=this[l++];)if(a=ft(n),r=1===n.nodeType&&" "+ct(a)+" "){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");a!==(s=ct(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,a,i,o,s,l=0;if(m(e))return this.each(function(t){w(this).removeClass(e.call(this,t,ft(this)))});if(!arguments.length)return this.attr("class","");if((t=ht(e)).length)for(;n=this[l++];)if(a=ft(n),r=1===n.nodeType&&" "+ct(a)+" "){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>-1;)r=r.replace(" "+i+" "," ");a!==(s=ct(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):m(e)?this.each(function(n){w(this).toggleClass(e.call(this,n,ft(this),t),t)}):this.each(function(){var t,a,i,o;if(r)for(a=0,i=w(this),o=ht(e);t=o[a++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==e&&"boolean"!==n||((t=ft(this))&&X.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":X.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+ct(ft(n))+" ").indexOf(t)>-1)return!0;return!1}});var pt=/\r/g;w.fn.extend({val:function(e){var t,n,r,a=this[0];return arguments.length?(r=m(e),this.each(function(n){var a;1===this.nodeType&&(null==(a=r?e.call(this,n,w(this).val()):e)?a="":"number"==typeof a?a+="":Array.isArray(a)&&(a=w.map(a,function(e){return null==e?"":e+""})),(t=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))})):a?(t=w.valHooks[a.type]||w.valHooks[a.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(a,"value"))?n:"string"==typeof(n=a.value)?n.replace(pt,""):null==n?"":n:void 0}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:ct(w.text(e))}},select:{get:function(e){var t,n,r,a=e.options,i=e.selectedIndex,o="select-one"===e.type,s=o?null:[],l=o?i+1:a.length;for(r=i<0?l:o?i:0;r<l;r++)if(((n=a[r]).selected||r===i)&&!n.disabled&&(!n.parentNode.disabled||!C(n.parentNode,"optgroup"))){if(t=w(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,a=e.options,i=w.makeArray(t),o=a.length;o--;)((r=a[o]).selected=w.inArray(w.valHooks.option.get(r),i)>-1)&&(n=!0);return n||(e.selectedIndex=-1),i}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=w.inArray(w(e).val(),t)>-1}},p.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),p.focusin="onfocusin"in e;var mt=/^(?:focusinfocus|focusoutblur)$/,gt=function(e){e.stopPropagation()};w.extend(w.event,{trigger:function(t,n,a,i){var o,s,l,u,d,f,h,p,v=[a||r],y=c.call(t,"type")?t.type:t,b=c.call(t,"namespace")?t.namespace.split("."):[];if(s=p=l=a=a||r,3!==a.nodeType&&8!==a.nodeType&&!mt.test(y+w.event.triggered)&&(y.indexOf(".")>-1&&(y=(b=y.split(".")).shift(),b.sort()),d=y.indexOf(":")<0&&"on"+y,(t=t[w.expando]?t:new w.Event(y,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=b.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=a),n=null==n?[t]:w.makeArray(n,[t]),h=w.event.special[y]||{},i||!h.trigger||!1!==h.trigger.apply(a,n))){if(!i&&!h.noBubble&&!g(a)){for(mt.test((u=h.delegateType||y)+y)||(s=s.parentNode);s;s=s.parentNode)v.push(s),l=s;l===(a.ownerDocument||r)&&v.push(l.defaultView||l.parentWindow||e)}for(o=0;(s=v[o++])&&!t.isPropagationStopped();)p=s,t.type=o>1?u:h.bindType||y,(f=(X.get(s,"events")||{})[t.type]&&X.get(s,"handle"))&&f.apply(s,n),(f=d&&s[d])&&f.apply&&Y(s)&&(t.result=f.apply(s,n),!1===t.result&&t.preventDefault());return t.type=y,i||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(v.pop(),n)||!Y(a)||d&&m(a[y])&&!g(a)&&((l=a[d])&&(a[d]=null),w.event.triggered=y,t.isPropagationStopped()&&p.addEventListener(y,gt),a[y](),t.isPropagationStopped()&&p.removeEventListener(y,gt),w.event.triggered=void 0,l&&(a[d]=l)),t.result}},simulate:function(e,t,n){var r=w.extend(new w.Event,n,{type:e,isSimulated:!0});w.event.trigger(r,null,t)}}),w.fn.extend({trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return w.event.trigger(e,t,n,!0)}}),p.focusin||w.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){w.event.simulate(t,e.target,w.event.fix(e))};w.event.special[t]={setup:function(){var r=this.ownerDocument||this,a=X.access(r,t);a||r.addEventListener(e,n,!0),X.access(r,t,(a||0)+1)},teardown:function(){var r=this.ownerDocument||this,a=X.access(r,t)-1;a?X.access(r,t,a):(r.removeEventListener(e,n,!0),X.remove(r,t))}}});var vt=e.location,yt=Date.now(),bt=/\?/;w.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+t),n};var wt=/\[\]$/,xt=/\r?\n/g,_t=/^(?:submit|button|image|reset|file)$/i,Et=/^(?:input|select|textarea|keygen)/i;function Tt(e,t,n,r){var a;if(Array.isArray(t))w.each(t,function(t,a){n||wt.test(e)?r(e,a):Tt(e+"["+("object"==typeof a&&null!=a?t:"")+"]",a,n,r)});else if(n||"object"!==b(t))r(e,t);else for(a in t)Tt(e+"["+a+"]",t[a],n,r)}w.param=function(e,t){var n,r=[],a=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){a(this.name,this.value)});else for(n in e)Tt(n,e[n],t,a);return r.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&Et.test(this.nodeName)&&!_t.test(e)&&(this.checked||!ue.test(e))}).map(function(e,t){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(xt,"\r\n")}}):{name:t.name,value:n.replace(xt,"\r\n")}}).get()}});var jt=/%20/g,St=/#.*$/,Ct=/([?&])_=[^&]*/,Ot=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pt=/^(?:GET|HEAD)$/,It=/^\/\//,Mt={},Dt={},Lt="*/".concat("*"),At=r.createElement("a");function kt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,a=0,i=t.toLowerCase().match(k)||[];if(m(n))for(;r=i[a++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Rt(e,t,n,r){var a={},i=e===Dt;function o(s){var l;return a[s]=!0,w.each(e[s]||[],function(e,s){var u=s(t,n,r);return"string"!=typeof u||i||a[u]?i?!(l=u):void 0:(t.dataTypes.unshift(u),o(u),!1)}),l}return o(t.dataTypes[0])||!a["*"]&&o("*")}function Ut(e,t){var n,r,a=w.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((a[n]?e:r||(r={}))[n]=t[n]);return r&&w.extend(!0,e,r),e}At.href=vt.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:vt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(vt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Lt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ut(Ut(e,w.ajaxSettings),t):Ut(w.ajaxSettings,e)},ajaxPrefilter:kt(Mt),ajaxTransport:kt(Dt),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0);var a,i,o,s,l,u,d,c,f,h,p=w.ajaxSetup({},n=n||{}),m=p.context||p,g=p.context&&(m.nodeType||m.jquery)?w(m):w.event,v=w.Deferred(),y=w.Callbacks("once memory"),b=p.statusCode||{},x={},_={},E="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(d){if(!s)for(s={};t=Ot.exec(o);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return d?o:null},setRequestHeader:function(e,t){return null==d&&(e=_[e.toLowerCase()]=_[e.toLowerCase()]||e,x[e]=t),this},overrideMimeType:function(e){return null==d&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(d)T.always(e[T.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||E;return a&&a.abort(t),j(0,t),this}};if(v.promise(T),p.url=((t||p.url||vt.href)+"").replace(It,vt.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(k)||[""],null==p.crossDomain){u=r.createElement("a");try{u.href=p.url,u.href=u.href,p.crossDomain=At.protocol+"//"+At.host!=u.protocol+"//"+u.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=w.param(p.data,p.traditional)),Rt(Mt,p,n,T),d)return T;for(f in(c=w.event&&p.global)&&0==w.active++&&w.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Pt.test(p.type),i=p.url.replace(St,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(jt,"+")):(h=p.url.slice(i.length),p.data&&(p.processData||"string"==typeof p.data)&&(i+=(bt.test(i)?"&":"?")+p.data,delete p.data),!1===p.cache&&(i=i.replace(Ct,"$1"),h=(bt.test(i)?"&":"?")+"_="+yt+++h),p.url=i+h),p.ifModified&&(w.lastModified[i]&&T.setRequestHeader("If-Modified-Since",w.lastModified[i]),w.etag[i]&&T.setRequestHeader("If-None-Match",w.etag[i])),(p.data&&p.hasContent&&!1!==p.contentType||n.contentType)&&T.setRequestHeader("Content-Type",p.contentType),T.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Lt+"; q=0.01":""):p.accepts["*"]),p.headers)T.setRequestHeader(f,p.headers[f]);if(p.beforeSend&&(!1===p.beforeSend.call(m,T,p)||d))return T.abort();if(E="abort",y.add(p.complete),T.done(p.success),T.fail(p.error),a=Rt(Dt,p,n,T)){if(T.readyState=1,c&&g.trigger("ajaxSend",[T,p]),d)return T;p.async&&p.timeout>0&&(l=e.setTimeout(function(){T.abort("timeout")},p.timeout));try{d=!1,a.send(x,j)}catch(e){if(d)throw e;j(-1,e)}}else j(-1,"No Transport");function j(t,n,r,s){var u,f,h,x,_,E=n;d||(d=!0,l&&e.clearTimeout(l),a=void 0,o=s||"",T.readyState=t>0?4:0,u=t>=200&&t<300||304===t,r&&(x=function(e,t,n){for(var r,a,i,o,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(a in s)if(s[a]&&s[a].test(r)){l.unshift(a);break}if(l[0]in n)i=l[0];else{for(a in n){if(!l[0]||e.converters[a+" "+l[0]]){i=a;break}o||(o=a)}i=i||o}if(i)return i!==l[0]&&l.unshift(i),n[i]}(p,T,r)),x=function(e,t,n,r){var a,i,o,s,l,u={},d=e.dataTypes.slice();if(d[1])for(o in e.converters)u[o.toLowerCase()]=e.converters[o];for(i=d.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=i,i=d.shift())if("*"===i)i=l;else if("*"!==l&&l!==i){if(!(o=u[l+" "+i]||u["* "+i]))for(a in u)if((s=a.split(" "))[1]===i&&(o=u[l+" "+s[0]]||u["* "+s[0]])){!0===o?o=u[a]:!0!==u[a]&&(i=s[0],d.unshift(s[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+i}}}return{state:"success",data:t}}(p,x,T,u),u?(p.ifModified&&((_=T.getResponseHeader("Last-Modified"))&&(w.lastModified[i]=_),(_=T.getResponseHeader("etag"))&&(w.etag[i]=_)),204===t||"HEAD"===p.type?E="nocontent":304===t?E="notmodified":(E=x.state,f=x.data,u=!(h=x.error))):(h=E,!t&&E||(E="error",t<0&&(t=0))),T.status=t,T.statusText=(n||E)+"",u?v.resolveWith(m,[f,E,T]):v.rejectWith(m,[T,E,h]),T.statusCode(b),b=void 0,c&&g.trigger(u?"ajaxSuccess":"ajaxError",[T,p,u?f:h]),y.fireWith(m,[T,E]),c&&(g.trigger("ajaxComplete",[T,p]),--w.active||w.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,t){return w.get(e,void 0,t,"script")}}),w.each(["get","post"],function(e,t){w[t]=function(e,n,r,a){return m(n)&&(a=a||r,r=n,n=void 0),w.ajax(w.extend({url:e,type:t,dataType:a,data:n,success:r},w.isPlainObject(e)&&e))}}),w._evalUrl=function(e){return w.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},w.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=w(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return m(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=m(e);return this.each(function(n){w(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(e){return!w.expr.pseudos.visible(e)},w.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Nt={0:200,1223:204},Bt=w.ajaxSettings.xhr();p.cors=!!Bt&&"withCredentials"in Bt,p.ajax=Bt=!!Bt,w.ajaxTransport(function(t){var n,r;if(p.cors||Bt&&!t.crossDomain)return{send:function(a,i){var o,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)s[o]=t.xhrFields[o];for(o in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest"),a)s.setRequestHeader(o,a[o]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?i(0,"error"):i(s.status,s.statusText):i(Nt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),w.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),w.ajaxTransport("script",function(e){var t,n;if(e.crossDomain)return{send:function(a,i){t=w("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),r.head.appendChild(t[0])},abort:function(){n&&n()}}});var Ht=[],Ft=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ht.pop()||w.expando+"_"+yt++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(t,n,r){var a,i,o,s=!1!==t.jsonp&&(Ft.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ft.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return a=t.jsonpCallback=m(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Ft,"$1"+a):!1!==t.jsonp&&(t.url+=(bt.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return o||w.error(a+" was not called"),o[0]},t.dataTypes[0]="json",i=e[a],e[a]=function(){o=arguments},r.always(function(){void 0===i?w(e).removeProp(a):e[a]=i,t[a]&&(t.jsonpCallback=n.jsonpCallback,Ht.push(a)),o&&m(i)&&i(o[0]),o=i=void 0}),"script"}),p.createHTMLDocument=function(){var e=r.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),w.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(p.createHTMLDocument?((a=(t=r.implementation.createHTMLDocument("")).createElement("base")).href=r.location.href,t.head.appendChild(a)):t=r),o=!n&&[],(i=O.exec(e))?[t.createElement(i[1])]:(i=ge([e],t,o),o&&o.length&&w(o).remove(),w.merge([],i.childNodes)));var a,i,o},w.fn.load=function(e,t,n){var r,a,i,o=this,s=e.indexOf(" ");return s>-1&&(r=ct(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(a="POST"),o.length>0&&w.ajax({url:e,type:a||"GET",dataType:"html",data:t}).done(function(e){i=arguments,o.html(r?w("<div>").append(w.parseHTML(e)).find(r):e)}).always(n&&function(e,t){o.each(function(){n.apply(this,i||[e.responseText,t,e])})}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.expr.pseudos.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length},w.offset={setOffset:function(e,t,n){var r,a,i,o,s,l,u=w.css(e,"position"),d=w(e),c={};"static"===u&&(e.style.position="relative"),s=d.offset(),i=w.css(e,"top"),l=w.css(e,"left"),("absolute"===u||"fixed"===u)&&(i+l).indexOf("auto")>-1?(o=(r=d.position()).top,a=r.left):(o=parseFloat(i)||0,a=parseFloat(l)||0),m(t)&&(t=t.call(e,n,w.extend({},s))),null!=t.top&&(c.top=t.top-s.top+o),null!=t.left&&(c.left=t.left-s.left+a),"using"in t?t.using.call(e,c):d.css(c)}},w.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){w.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?{top:(t=r.getBoundingClientRect()).top+(n=r.ownerDocument.defaultView).pageYOffset,left:t.left+n.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],a={top:0,left:0};if("fixed"===w.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===w.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((a=w(e).offset()).top+=w.css(e,"borderTopWidth",!0),a.left+=w.css(e,"borderLeftWidth",!0))}return{top:t.top-a.top-w.css(r,"marginTop",!0),left:t.left-a.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===w.css(e,"position");)e=e.offsetParent;return e||ve})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;w.fn[e]=function(r){return V(this,function(e,r,a){var i;if(g(e)?i=e:9===e.nodeType&&(i=e.defaultView),void 0===a)return i?i[t]:e[r];i?i.scrollTo(n?i.pageXOffset:a,n?a:i.pageYOffset):e[r]=a},e,r,arguments.length)}}),w.each(["top","left"],function(e,t){w.cssHooks[t]=He(p.pixelPosition,function(e,n){if(n)return n=Be(e,t),Re.test(n)?w(e).position()[t]+"px":n})}),w.each({Height:"height",Width:"width"},function(e,t){w.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){w.fn[r]=function(a,i){var o=arguments.length&&(n||"boolean"!=typeof a),s=n||(!0===a||!0===i?"margin":"border");return V(this,function(t,n,a){var i;return g(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===a?w.css(t,n,s):w.style(t,n,a,s)},t,o?a:void 0,o)}})}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),w.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),w.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),w.proxy=function(e,t){var n,r,a;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=i.call(arguments,2),(a=function(){return e.apply(t||this,r.concat(i.call(arguments)))}).guid=e.guid=e.guid||w.guid++,a},w.holdReady=function(e){e?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=C,w.isFunction=m,w.isWindow=g,w.camelCase=G,w.type=b,w.now=Date.now,w.isNumeric=function(e){var t=w.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return w});var Vt=e.jQuery,zt=e.$;return w.noConflict=function(t){return e.$===w&&(e.$=zt),t&&e.jQuery===w&&(e.jQuery=Vt),w},t||(e.jQuery=e.$=w),w}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");!function(e){"use strict";var t=jQuery.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1||t[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(),function(e){"use strict";e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;return e(this).one("bsTransitionEnd",function(){n=!0}),setTimeout(function(){n||e(r).trigger(e.support.transition.end)},t),this},e(function(){e.support.transition=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(e){"use strict";var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.VERSION="3.3.7",n.TRANSITION_DURATION=150,n.prototype.close=function(t){function r(){o.detach().trigger("closed.bs.alert").remove()}var a=e(this),i=a.attr("data-target");i||(i=(i=a.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,""));var o=e("#"===i?[]:i);t&&t.preventDefault(),o.length||(o=a.closest(".alert")),o.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r())};var r=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var r=e(this),a=r.data("bs.alert");a||r.data("bs.alert",a=new n(this)),"string"==typeof t&&a[t].call(r)})},e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=r,this},e(document).on("click.bs.alert.data-api",t,n.prototype.close)}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var r=e(this),a=r.data("bs.button");a||r.data("bs.button",a=new n(this,"object"==typeof t&&t)),"toggle"==t?a.toggle():t&&a.setState(t)})}var n=function(t,r){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,r),this.isLoading=!1};n.VERSION="3.3.7",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var n="disabled",r=this.$element,a=r.is("input")?"val":"html",i=r.data();t+="Text",null==i.resetText&&r.data("resetText",r[a]()),setTimeout(e.proxy(function(){r[a](null==i[t]?this.options[t]:i[t]),"loadingText"==t?(this.isLoading=!0,r.addClass(n).attr(n,n).prop(n,!0)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n).prop(n,!1))},this),0)},n.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),e&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var r=e.fn.button;e.fn.button=t,e.fn.button.Constructor=n,e.fn.button.noConflict=function(){return e.fn.button=r,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var r=e(n.target).closest(".btn");t.call(r,"toggle"),e(n.target).is('input[type="radio"], input[type="checkbox"]')||(n.preventDefault(),r.is("input,button")?r.trigger("focus"):r.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var r=e(this),a=r.data("bs.carousel"),i=e.extend({},n.DEFAULTS,r.data(),"object"==typeof t&&t),o="string"==typeof t?t:i.slide;a||r.data("bs.carousel",a=new n(this,i)),"number"==typeof t?a.to(t):o?a[o]():i.interval&&a.pause().cycle()})}var n=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};n.VERSION="3.3.7",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},n.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},n.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t);return("prev"==e&&0===n||"next"==e&&n==this.$items.length-1)&&!this.options.wrap?t:this.$items.eq((n+("prev"==e?-1:1))%this.$items.length)},n.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(e>this.$items.length-1||e<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},n.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){if(!this.sliding)return this.slide("next")},n.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},n.prototype.slide=function(t,r){var a=this.$element.find(".item.active"),i=r||this.getItemForDirection(t,a),o=this.interval,s="next"==t?"left":"right",l=this;if(i.hasClass("active"))return this.sliding=!1;var u=i[0],d=e.Event("slide.bs.carousel",{relatedTarget:u,direction:s});if(this.$element.trigger(d),!d.isDefaultPrevented()){if(this.sliding=!0,o&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var c=e(this.$indicators.children()[this.getItemIndex(i)]);c&&c.addClass("active")}var f=e.Event("slid.bs.carousel",{relatedTarget:u,direction:s});return e.support.transition&&this.$element.hasClass("slide")?(i.addClass(t),a.addClass(s),i.addClass(s),a.one("bsTransitionEnd",function(){i.removeClass([t,s].join(" ")).addClass("active"),a.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(f)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(a.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger(f)),o&&this.cycle(),this}};var r=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=n,e.fn.carousel.noConflict=function(){return e.fn.carousel=r,this};var a=function(n){var r,a=e(this),i=e(a.attr("data-target")||(r=a.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""));if(i.hasClass("carousel")){var o=e.extend({},i.data(),a.data()),s=a.attr("data-slide-to");s&&(o.interval=!1),t.call(i,o),s&&i.data("bs.carousel").to(s),n.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",a).on("click.bs.carousel.data-api","[data-slide-to]",a),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var n=e(this);t.call(n,n.data())})})}(jQuery),function(e){"use strict";function t(t){var n,r=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(r)}function n(t){return this.each(function(){var n=e(this),a=n.data("bs.collapse"),i=e.extend({},r.DEFAULTS,n.data(),"object"==typeof t&&t);!a&&i.toggle&&/show|hide/.test(t)&&(i.toggle=!1),a||n.data("bs.collapse",a=new r(this,i)),"string"==typeof t&&a[t]()})}var r=function(t,n){this.$element=e(t),this.options=e.extend({},r.DEFAULTS,n),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};r.VERSION="3.3.7",r.TRANSITION_DURATION=350,r.DEFAULTS={toggle:!0},r.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},r.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,a=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(a&&a.length&&(t=a.data("bs.collapse"),t&&t.transitioning))){var i=e.Event("show.bs.collapse");if(this.$element.trigger(i),!i.isDefaultPrevented()){a&&a.length&&(n.call(a,"hide"),t||a.data("bs.collapse",null));var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var l=e.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(r.TRANSITION_DURATION)[o](this.$element[0][l])}}}},r.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]()),this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var a=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(a,this)).emulateTransitionEnd(r.TRANSITION_DURATION):a.call(this)}}},r.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},r.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(n,r){var a=e(r);this.addAriaAndCollapsedClass(t(a),a)},this)).end()},r.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var a=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=r,e.fn.collapse.noConflict=function(){return e.fn.collapse=a,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(r){var a=e(this);a.attr("data-target")||r.preventDefault();var i=t(a),o=i.data("bs.collapse")?"toggle":a.data();n.call(i,o)})}(jQuery),function(e){"use strict";function t(t){var n=t.attr("data-target");n||(n=(n=t.attr("href"))&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}function n(n){n&&3===n.which||(e(r).remove(),e(a).each(function(){var r=e(this),a=t(r),i={relatedTarget:this};a.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&e.contains(a[0],n.target)||(a.trigger(n=e.Event("hide.bs.dropdown",i)),n.isDefaultPrevented()||(r.attr("aria-expanded","false"),a.removeClass("open").trigger(e.Event("hidden.bs.dropdown",i)))))}))}var r=".dropdown-backdrop",a='[data-toggle="dropdown"]',i=function(t){e(t).on("click.bs.dropdown",this.toggle)};i.VERSION="3.3.7",i.prototype.toggle=function(r){var a=e(this);if(!a.is(".disabled, :disabled")){var i=t(a),o=i.hasClass("open");if(n(),!o){"ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",n);var s={relatedTarget:this};if(i.trigger(r=e.Event("show.bs.dropdown",s)),r.isDefaultPrevented())return;a.trigger("focus").attr("aria-expanded","true"),i.toggleClass("open").trigger(e.Event("shown.bs.dropdown",s))}return!1}},i.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var r=e(this);if(n.preventDefault(),n.stopPropagation(),!r.is(".disabled, :disabled")){var i=t(r),o=i.hasClass("open");if(!o&&27!=n.which||o&&27==n.which)return 27==n.which&&i.find(a).trigger("focus"),r.trigger("click");var s=i.find(".dropdown-menu li:not(.disabled):visible a");if(s.length){var l=s.index(n.target);38==n.which&&l>0&&l--,40==n.which&&l<s.length-1&&l++,~l||(l=0),s.eq(l).trigger("focus")}}}};var o=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new i(this)),"string"==typeof t&&r[t].call(n)})},e.fn.dropdown.Constructor=i,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=o,this},e(document).on("click.bs.dropdown.data-api",n).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",a,i.prototype.toggle).on("keydown.bs.dropdown.data-api",a,i.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",i.prototype.keydown)}(jQuery),function(e){"use strict";function t(t,r){return this.each(function(){var a=e(this),i=a.data("bs.modal"),o=e.extend({},n.DEFAULTS,a.data(),"object"==typeof t&&t);i||a.data("bs.modal",i=new n(this,o)),"string"==typeof t?i[t](r):o.show&&i.show(r)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.7",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var r=this,a=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(a),this.isShown||a.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var a=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),r.$element.addClass("in"),r.enforceFocus();var i=e.Event("shown.bs.modal",{relatedTarget:t});a?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(i)}).emulateTransitionEnd(n.TRANSITION_DURATION):r.$element.trigger("focus").trigger(i)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){document===e.target||this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var r=this,a=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&a;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+a).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){r.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):o()}else t&&t()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var r=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var r=e(this),a=r.attr("href"),i=e(r.attr("data-target")||a&&a.replace(/.*(?=#[^\s]+$)/,"")),o=i.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(a)&&a},i.data(),r.data());r.is("a")&&n.preventDefault(),i.one("show.bs.modal",function(e){e.isDefaultPrevented()||i.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),t.call(i,o,this)})}(jQuery),function(e){"use strict";var t=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};t.VERSION="3.3.7",t.TRANSITION_DURATION=150,t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},t.prototype.init=function(t,n,r){if(this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var a=this.options.trigger.split(" "),i=a.length;i--;){var o=a[i];if("click"==o)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=o){var s="hover"==o?"mouseleave":"focusout";this.$element.on(("hover"==o?"mouseenter":"focusin")+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return(t=e.extend({},this.getDefaults(),this.$element.data(),t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusin"==t.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState?void(n.hoverState="in"):(clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},t.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusout"==t.type?"focus":"hover"]=!1),!n.isInStateTrue())return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},t.prototype.show=function(){var n=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(n);var r=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(n.isDefaultPrevented()||!r)return;var a=this,i=this.tip(),o=this.getUID(this.type);this.setContent(),i.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&i.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,u=l.test(s);u&&(s=s.replace(l,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var d=this.getPosition(),c=i[0].offsetWidth,f=i[0].offsetHeight;if(u){var h=s,p=this.getPosition(this.$viewport);s="bottom"==s&&d.bottom+f>p.bottom?"top":"top"==s&&d.top-f<p.top?"bottom":"right"==s&&d.right+c>p.width?"left":"left"==s&&d.left-c<p.left?"right":s,i.removeClass(h).addClass(s)}var m=this.getCalculatedOffset(s,d,c,f);this.applyPlacement(m,s);var g=function(){var e=a.hoverState;a.$element.trigger("shown.bs."+a.type),a.hoverState=null,"out"==e&&a.leave(a)};e.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",g).emulateTransitionEnd(t.TRANSITION_DURATION):g()}},t.prototype.applyPlacement=function(t,n){var r=this.tip(),a=r[0].offsetWidth,i=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(s)&&(s=0),t.top+=o,t.left+=s,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var l=r[0].offsetWidth,u=r[0].offsetHeight;"top"==n&&u!=i&&(t.top=t.top+i-u);var d=this.getViewportAdjustedDelta(n,t,l,u);d.left?t.left+=d.left:t.top+=d.top;var c=/top|bottom/.test(n),f=c?2*d.left-a+l:2*d.top-i+u,h=c?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(f,r[0][h],c)},t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(n){function r(){"in"!=a.hoverState&&i.detach(),a.$element&&a.$element.removeAttr("aria-describedby").trigger("hidden.bs."+a.type),n&&n()}var a=this,i=e(this.$tip),o=e.Event("hide.bs."+this.type);if(this.$element.trigger(o),!o.isDefaultPrevented())return i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",r).emulateTransitionEnd(t.TRANSITION_DURATION):r(),this.hoverState=null,this},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(t){var n=(t=t||this.$element)[0],r="BODY"==n.tagName,a=n.getBoundingClientRect();null==a.width&&(a=e.extend({},a,{width:a.right-a.left,height:a.bottom-a.top}));var i=window.SVGElement&&n instanceof window.SVGElement,o=r?{top:0,left:0}:i?null:t.offset(),s={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},l=r?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},a,s,l,o)},t.prototype.getCalculatedOffset=function(e,t,n,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},t.prototype.getViewportAdjustedDelta=function(e,t,n,r){var a={top:0,left:0};if(!this.$viewport)return a;var i=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-i-o.scroll,l=t.top+i-o.scroll+r;s<o.top?a.top=o.top-s:l>o.top+o.height&&(a.top=o.top+o.height-l)}else{var u=t.left-i,d=t.left+i+n;u<o.left?a.left=o.left-u:d>o.right&&(a.left=o.left+o.width-d)}return a},t.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},t.prototype.getUID=function(e){do{e+=~~(1e6*Math.random())}while(document.getElementById(e));return e},t.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var n=this;t&&((n=e(t.currentTarget).data("bs."+this.type))||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),t?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},t.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null,e.$element=null})};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var r=e(this),a=r.data("bs.tooltip"),i="object"==typeof n&&n;!a&&/destroy|hide/.test(n)||(a||r.data("bs.tooltip",a=new t(this,i)),"string"==typeof n&&a[n]())})},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(jQuery),function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.3.7",t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),(t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype)).constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var r=e(this),a=r.data("bs.popover"),i="object"==typeof n&&n;!a&&/destroy|hide/.test(n)||(a||r.data("bs.popover",a=new t(this,i)),"string"==typeof n&&a[n]())})},e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(jQuery),function(e){"use strict";function t(n,r){this.$body=e(document.body),this.$scrollElement=e(e(n).is(document.body)?window:n),this.options=e.extend({},t.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var r=e(this),a=r.data("bs.scrollspy");a||r.data("bs.scrollspy",a=new t(this,"object"==typeof n&&n)),"string"==typeof n&&a[n]()})}t.VERSION="3.3.7",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,n="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(n="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),a=t.data("target")||t.attr("href"),i=/^#./.test(a)&&e(a);return i&&i.length&&i.is(":visible")&&[[i[n]().top+r,a]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),r=this.options.offset+n-this.$scrollElement.height(),a=this.offsets,i=this.targets,o=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=r)return o!=(e=i[i.length-1])&&this.activate(e);if(o&&t<a[0])return this.activeTarget=null,this.clear();for(e=a.length;e--;)o!=i[e]&&t>=a[e]&&(void 0===a[e+1]||t<a[e+1])&&this.activate(i[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=e(this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]').parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=r,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var r=e(this),a=r.data("bs.tab");a||r.data("bs.tab",a=new n(this)),"string"==typeof t&&a[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.3.7",n.TRANSITION_DURATION=150,n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");if(r||(r=(r=t.attr("href"))&&r.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var a=n.find(".active:last a"),i=e.Event("hide.bs.tab",{relatedTarget:t[0]}),o=e.Event("show.bs.tab",{relatedTarget:a[0]});if(a.trigger(i),t.trigger(o),!o.isDefaultPrevented()&&!i.isDefaultPrevented()){var s=e(r);this.activate(t.closest("li"),n),this.activate(s,s.parent(),function(){a.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:a[0]})})}}},n.prototype.activate=function(t,r,a){function i(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?t.addClass("in"):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),a&&a()}var o=r.find("> .active"),s=a&&e.support.transition&&(o.length&&o.hasClass("fade")||!!r.find("> .fade").length);o.length&&s?o.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),o.removeClass("in")};var r=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=r,this};var a=function(n){n.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',a).on("click.bs.tab.data-api",'[data-toggle="pill"]',a)}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var r=e(this),a=r.data("bs.affix");a||r.data("bs.affix",a=new n(this,"object"==typeof t&&t)),"string"==typeof t&&a[t]()})}var n=function(t,r){this.options=e.extend({},n.DEFAULTS,r),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.7",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(e,t,n,r){var a=this.$target.scrollTop(),i=this.$element.offset(),o=this.$target.height();if(null!=n&&"top"==this.affixed)return a<n&&"top";if("bottom"==this.affixed)return null!=n?!(a+this.unpin<=i.top)&&"bottom":!(a+o<=e-r)&&"bottom";var s=null==this.affixed;return null!=n&&a<=n?"top":null!=r&&(s?a:i.top)+(s?o:t)>=e-r&&"bottom"},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},n.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),r=this.options.offset,a=r.top,i=r.bottom,o=Math.max(e(document).height(),e(document.body).height());"object"!=typeof r&&(i=a=r),"function"==typeof a&&(a=r.top(this.$element)),"function"==typeof i&&(i=r.bottom(this.$element));var s=this.getState(o,t,a,i);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var l="affix"+(s?"-"+s:""),u=e.Event(l+".bs.affix");if(this.$element.trigger(u),u.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:o-t-i})}};var r=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=n,e.fn.affix.noConflict=function(){return e.fn.affix=r,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var n=e(this),r=n.data();r.offset=r.offset||{},null!=r.offsetBottom&&(r.offset.bottom=r.offsetBottom),null!=r.offsetTop&&(r.offset.top=r.offsetTop),t.call(n,r)})})}(jQuery),function(e,t){var n=[],r=Math,a=r.PI,i=2*a,o=0,s=!1,l=!1,u=/[A-z]+?/,d=/\d.\w\w/,c=e.navigator.userAgent.match(/Firefox\/\w+\.\w+/i),f=180/a,h=r.max,p=r.min,m=r.cos,g=r.sin,v=r.floor,y=r.round,b=r.abs,w=r.pow,x=r.sqrt,_=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e,t){return setTimeout(e,1e3/60)};if(e.cancelAnimationFrame||e.webkitCancelRequestAnimationFrame||e.mozCancelRequestAnimationFrame||e.oCancelRequestAnimationFrame||e.msCancelRequestAnimationFrame||clearTimeout,""!=c&&null!==c)var E=parseInt(c[0].split(/[ \/\.]/i)[1])<7;function T(e,t,r){var a=n[e].layers[t].objs,i=n[e].layers[t].grdntsnptrns,o=a.length,s=i.length;r=r.slice(1);for(var l=0;l<o;l++)if(a[l].optns.id==r)return a[l];for(l=0;l<s;l++)if(i[l].optns.id==r)return i[l];return!1}function j(e,t,r,a){var i=n[e].layers[t].objs,o=n[e].layers[t].grdntsnptrns,s=a.slice(1).split(".");return l(r,s,i),l(r,s,o),r;function l(e,t,n){var r,a,i,o,s=n.length;for(i=0;i<s;i++)if(r=n[i]._name.split(" "),!(t.length>r.length)){var l=t.concat();for(a=0;a<r.length;a++){for(o=0;o<l.length;o++)r[a]!==l[o]||(l.splice(o,1),o--);if(!l.length){e.elements.push(n[i]);break}}}}}function S(e,t,r){for(var a=n[e].layers[t].objs,i=n[e].layers[t].grdntsnptrns,o=a.length,s=i.length,l=0;l<o;l++)r.elements.push(a[l]);for(l=0;l<s;l++)r.elements.push(i[l]);return r}var C=function(e,r){if(e===t)return this;"object"==typeof e&&(r=e,e=t);var a,i,o,s,l,u,d,c=-1,f=-1,h=n.length,p=re();if(r===t){if("#"===e.charAt(0))for(a=0;a<h;a++)for(d=n[a].layers.length,i=0;i<d;i++)if(u=T(a,i,e))return u;if("."===e.charAt(0))for(a=0;a<h;a++)for(d=n[a].layers.length,i=0;i<d;i++)p=j(a,i,p,e)}else{if(r.canvas!==t)for(a=0;a<h;a++)if(n[a].optns.id==r.canvas){c=a,o=n[a];break}if(r.layer!==t)if(-1!=c){for(d=o.layers.length,a=0;a<d;a++)if(o.layers[a].optns.id==r.layer){f=a,s=o.layers[a];break}}else for(a=0;a<h;a++){for(d=(l=n[a].layers).length,i=0;i<d;i++)if(l[i].optns.id==r.layer){c=a,f=i,s=(o=n[a]).layers[i];break}if(s>-1)break}if(f<0&&c<0)return re();if(f<0){if(d=(l=o.layers).length,e===t)for(i=0;i<d;i++)p=S(c,i,p);else if("#"===e.charAt(0)){for(i=0;i<d;i++)if(u=T(c,i,e))return u}else if("."===e.charAt(0))for(i=0;i<d;i++)p=j(c,i,p,e)}else{if(e===t&&(p=S(c,f,p)),"#"===e.charAt(0))return T(c,f,e);"."===e.charAt(0)&&(p=j(c,f,p,e))}}return r===t||r.attrs===t&&r.fns===t?p.elements.length?p:re():p.find(r)};function O(e){var t=e.optns;e.matrix(B(B(B(t.transformMatrix,t.translateMatrix),t.scaleMatrix),t.rotateMatrix)),I(e)}function P(e,n){for(var r in n)e[r]===t&&(e[r]=n[r]);return e}function I(e){$(e).optns.redraw=1}function M(e){for(var n=e.timeDiff,r=1,a=0;a<this.animateQueue.length;a++){var i=this.animateQueue[a],o=i.duration,s=i.easing,l=i.step,u=i.onstep,d="in"==s.type||"inOut"==s.type&&r<.5,c="out"==s.type||"inOut"==s.type&&r>.5;for(var f in i.step+=n,r=l/o,i)if(this[f]!==t&&i[f]){var h=i[f],p=h.to,m=h.from;D(f,this,i),d&&(this[f]=(p-m)*U[s.fn](r,s)+m),c&&(this[f]=(p-m)*(1-U[s.fn](1-r,s))+m),u&&u.fn.call(this,u),l>=o&&(this[f]=p,D(f,this,i),i[f]=!1,i.animateKeyCount--,i.animateKeyCount||(i.animateFn&&i.animateFn.apply(this),this.animateQueue.splice(a,1),a--))}}return this.animateQueue.length?I(this):this.optns.animated=!1,this}function D(e,n,r){var a=n[e],i=r[e].prev;switch(e){case"_rotateAngle":n.rotate(a-i,n._rotateX,n._rotateY);break;case"_translateX":n.translate(a-i,0);break;case"_translateY":n.translate(0,a-i);break;case"_translateToX":n.translateTo(a,t);break;case"_translateToY":n.translateTo(t,a);break;case"_scaleX":i||(i=1),n.scale(a/i,1);break;case"_scaleY":i||(i=1),n.scale(1,a/i);break;default:return}r[e].prev=a}function L(t,n,r){r[n].event=t=t||e.event,r[n].code=t.charCode||t.keyCode,r[n].val=!0,r.redraw=1}function A(t,n,r){if(r[n].val){var a=(t=t||e.event).pageX||t.clientX,i=t.pageY||t.clientY;r[n].event=t,r[n].x=a-r.x,r[n].y=i-r.y,r.redraw=1}}function k(e,n){return e===t?this["on"+n]():this["on"+n]=e,"mouseover"!=n&&"mouseout"!=n||(n="mousemove"),$(this).optns[n].val=!0,this}function R(e,n){return e===t?this[n]():this[n]=e,this}var U={linear:function(e,t){return e},exp:function(e,t){return w(e,t.n||2)},circ:function(e,t){return 1-x(1-e*e)},sine:function(e,t){return 1-g((1-e)*a/2)},back:function(e,t){var n=t.x||1.5;return w(e,t.n||2)*((n+1)*e-n)},elastic:function(e,t){var n=t.m||20,r=t.k||3,i=t.x||1.5;return w(t.n||2,10*(e-1))*m(n*e*a*i/r)},bounce:function(e,t){for(var n=t.n||4,r=t.b||.25,a=[1],i=1;i<n;i++)a[i]=a[i-1]+w(r,i/2);var o=2*a[n-1]-1;for(i=0;i<n;i++)if(o*e>=(i>0?2*a[i-1]-1:0)&&o*e<=2*a[i]-1)return w(o*(e-(2*a[i]-1-w(r,i/2))/o),2)+1-w(r,i);return 1}},N={color:{fn:function(e,t,n,r){var a,i,o;for(n=n[r],i=0;i<e;i++)for(o=0;o<t;o++)(a=this.getPixel(i,o))[n[0]]=2*a[n[0]]-a[n[1]]-a[n[2]],a[n[1]]=0,a[n[2]]=0,a[n[0]]=a[n[0]]>255?255:a[n[0]],this.setPixel(i,o,a)},matrix:{red:[0,1,2],green:[1,0,2],blue:[2,0,1]}},linear:{fn:function(e,t,n,r){var a,i,o,s,l,u,d=[];for(l=(n=n[r]).length,u=n[0].length,i=0;i<e;i++)for(d[i]=[],o=0;o<t;o++)for(d[i][o]=[0,0,0,1],l=0;l<3;l++)for(u=0;u<3;u++)for(a=this.getPixel(i-parseInt(l/2),o-parseInt(u/2)),s=0;s<3;s++)d[i][o][s]+=a[s]*n[l][u];for(i=0;i<e;i++)for(o=0;o<t;o++)this.setPixel(i,o,d[i][o])},matrix:{sharp:[[-.375,-.375,-.375],[-.375,4,-.375],[-.375,-.375,-.375]],blur:[[.111,.111,.111],[.111,.111,.111],[.111,.111,.111]]}}};function B(e,t){return[[e[0][0]*t[0][0]+e[0][1]*t[1][0],e[0][0]*t[0][1]+e[0][1]*t[1][1],e[0][0]*t[0][2]+e[0][1]*t[1][2]+e[0][2]],[e[1][0]*t[0][0]+e[1][1]*t[1][0],e[1][0]*t[0][1]+e[1][1]*t[1][1],e[1][0]*t[0][2]+e[1][1]*t[1][2]+e[1][2]]]}function H(e,t,n){return{x:e*n[0][0]+t*n[0][1]+n[0][2],y:e*n[1][0]+t*n[1][1]+n[1][2]}}function F(e,t,n){return{x:(e*n[1][1]-t*n[0][1]+n[0][1]*n[1][2]-n[1][1]*n[0][2])/(n[0][0]*n[1][1]-n[1][0]*n[0][1]),y:(-e*n[1][0]+t*n[0][0]-n[0][0]*n[1][2]+n[1][0]*n[0][2])/(n[0][0]*n[1][1]-n[1][0]*n[0][1])}}function V(e,t,n){if("poor"==n)return t;var r={x:t.x,y:t.y},a={x:t.x+t.width,y:t.y+t.height},i=B(e.matrix(),Y(e).matrix()),o=H(r.x,r.y,i),s=H(a.x,r.y,i),l=H(r.x,a.y,i),u=H(a.x,a.y,i),d=[[o.x,o.y],[s.x,s.y],[l.x,l.y],[u.x,u.y]];if("coords"==n)return d;for(var c,f,h=c=o.x,p=f=o.y,m=0;m<4;m++)h<d[m][0]&&(h=d[m][0]),p<d[m][1]&&(p=d[m][1]),c>d[m][0]&&(c=d[m][0]),f>d[m][1]&&(f=d[m][1]);return{x:c,y:f,width:h-c,height:p-f}}function z(e,t,n){return"poor"==n?t:H(t.x,t.y,B(e.matrix(),Y(e).matrix()))}function W(e){var n={color:{val:e,notColor:t},r:0,g:0,b:0,a:1};if(e.id!==t)return n.color.notColor={level:e._level,canvas:e.optns.canvas.number,layer:e.optns.layer.number},n;if(e.r!==t)return(n=P(e,{r:0,g:0,b:0,a:1})).color={val:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",notColor:t},n;if("#"==e.charAt(0))if(e.length>4)n.r=parseInt(e.substr(1,2),16),n.g=parseInt(e.substr(3,2),16),n.b=parseInt(e.substr(5,2),16);else{var r=e.charAt(1),a=e.charAt(2),i=e.charAt(3);n.r=parseInt(r+r,16),n.g=parseInt(a+a,16),n.b=parseInt(i+i,16)}else{var o=e.split(",");if(4==o.length){var s=o[0].split("("),l=o[3].split(")");n.r=parseInt(s[1]),n.g=parseInt(o[1]),n.b=parseInt(o[2]),n.a=parseFloat(l[0])}if(3==o.length){s=o[0].split("(");var u=o[2].split(")");n.r=parseInt(s[1]),n.g=parseInt(o[1]),n.b=parseInt(u[0])}}return n.color.notColor=t,n}function q(e,t){var n=Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2);return Math.sqrt(n)}function G(e,n,r){var a={},i=$(e),o=i.optns.ctx,s=i.layers[e.optns.layer.number];if(a.x=n,a.y=r,E&&(a=F(n,r,s.matrix()),a=F(a.x,a.y,e.matrix())),o.isPointInPath===t||e._img!==t||e._imgData!==t||"text"==e._proto){var l=e.getRect("poor"),u=F(n,r,B(e.matrix(),s.matrix()));if(l.x<=u.x&&l.y<=u.y&&l.x+l.width>=u.x&&l.y+l.height>=u.y)return a}else if("line"==e._proto){if(u=F(n,r,B(e.matrix(),s.matrix())),function(e,t,n){var r,a,i;if(r=q(e,t),a=q(e,n),(i=q(t,n))+a==r)return 0;if(r<=1e-5)return a;if(i*i>=r*r+a*a)return a;if(a*a>=r*r+i*i)return i;var o=(r+a+i)/2;return 2*Math.sqrt(o*(o-r)*(o-a)*(o-i))/r}({x:e._x0,y:e._y0},{x:e._x1,y:e._y1},u)<=3)return a}else if(o.isPointInPath(a.x,a.y))return a;return!1}function Y(e){return $(e).layers[e.optns.layer.number]}function $(e){return n[e.optns.canvas.number]}function X(e,r,a){I(r);var i=r.optns.canvas,o=r.optns.layer;if(e===t)return o.id;if(o.id==e)return r;var s=i.number,l=o.number;o.id=e;var u=C.layer(e),d={i:u.optns.canvas.number,j:u.optns.number},c=n[d.i].layers[d.j][a];return n[s].layers[l][a].splice(r.optns.number,1),r._level=r.optns.number=c.length,c[r._level]=r,o.number=d.j,i.number=d.i,i.id=u.optns.canvas.id,I(r),r}function Z(e,n){for(var r in n)switch(typeof n[r]){case"function":if("on"==r.substr(0,2))break;e[r]===t&&(e[r]=n[r]);break;case"object":if("optns"==r||"animateQueue"==r)break;if("objs"==r||"grdntsnptrns"==r){for(var a in n[r])n[r].hasOwnProperty(a)&&n[r][a].clone().layer(e.optns.id);break}if(!n[r]||"ctx"===r)continue;e[r]="function"==typeof n[r].pop?[]:{},Z(e[r],n[r]);break;default:if("_level"==r)break;e[r]=n[r]}}function K(e,r,a){I(r);var i=r.optns.canvas,o=r.optns.layer;if(e===t)return n[i.number].optns.id;if(n[i.number].optns.id==e)return r;var s=i.number,l=o.number;C.canvas(e);for(var u=0;u<n.length;u++){var d=n[u];if(d.optns.id==e){var c=n[s].layers[l][a],f=d.layers[0][a];c.splice(r.optns.number,1),J(c),r._level=r.optns.number=f.length,f[r._level]=r,o.number=0,i.number=u,i.id=d.optns.id,o.id=d.layers[0].optns.id}}return I(r),r}function J(e){for(var t=0;t<e.length;t++)e[t].optns.number=t}function Q(e,t,n,r,a){for(var i,o,s,l=e.length,u=0;u<l;u++)s=(i=e[u].optns).layer,(o=i.canvas).id=r,o.number=a,s.id=t,s.number=n}function ee(e){return e.sort(function(e,t){return e._level>t._level?1:e._level<t._level?-1:0}),J(e),e.length}function te(e){var t;do{t=!1;for(var n=0;n<e.length;n++)e[n].optns.deleted&&(e.splice(n,1),t=!0)}while(t);return J(e),e.length}var ne={};function re(){return(new ne.group).base()}function ae(e){return n.forEach(function(t){t.isPaused||t.frame(e)}),_(ae)}function ie(e,t,n){var r=n.drag;return!(!n.drag.init||!n.drag.object)&&(1==e.optns.drop.val?(r.init==r.object&&r.init.visible(!0),"function"==typeof e.optns.drop.fn&&e.optns.drop.fn.call(e,r.init)):(r.object.visible(!1),r.init.visible(!0),r.init.optns.translateMatrix[0][2]=r.object.optns.translateMatrix[0][2],r.init.optns.translateMatrix[1][2]=r.object.optns.translateMatrix[1][2],O(r.init),r.object!=r.init&&r.object.visible(!1),"function"==typeof r.init.optns.drag.stop&&r.init.optns.drag.stop.call(r.init,{x:t.x,y:t.y})),r.x!=r.startX||r.y!==r.startY)}ne.object=function(){this.getCenter=function(e){var t=this.getRect("poor");return z(this,{x:(2*t.x+t.width)/2,y:(2*t.y+t.height)/2},e)},this.position=function(){return H(this._x,this._y,B(this.matrix(),Y(this).matrix()))},this.buffer=function(e){var n=this.optns.buffer;if(e===t)return!!n.val&&n.cnv;if(n.val===e)return this;if(e){var r=n.cnv=document.createElement("canvas"),a=n.ctx=r.getContext("2d"),i=n.rect=this.getRect(),o=this.transform();r.setAttribute("width",i.width),r.setAttribute("height",i.height),n.x=this._x,n.y=this._y,n.dx=this._transformdx,n.dy=this._transformdy,this._x=this._y=0,this.transform(1,0,0,1,-i.x+n.dx,-i.y+n.dy,!0),this.setOptns(a),Z(n.optns={},$(this).optns),n.optns.ctx=a,this.draw(n.optns),this._x=n.x,this._y=n.y,this.transform(o[0][0],o[1][0],o[0][1],o[1][1],i.x,i.y,!0),n.val=!0}else this.translate(-n.rect.x+n.dx,-n.rect.y+n.dy),this.optns.buffer={val:!1};return this},this.clone=function(e){var n=new ne[this._proto];return ne[this._proto].prototype.base.call(n),Z(n,this),n.layer(Y(this).optns.id),Z(n.optns.transformMatrix,this.optns.transformMatrix),Z(n.optns.translateMatrix,this.optns.translateMatrix),Z(n.optns.scaleMatrix,this.optns.scaleMatrix),Z(n.optns.rotateMatrix,this.optns.rotateMatrix),e===t?n:n.animate(e)},this.shadow=function(e){for(var t in e)switch(t){case"x":this._shadowX=e.x;break;case"y":this._shadowY=e.y;break;case"blur":this._shadowBlur=e.blur;break;case"color":var n=W(e.color);this._shadowColor=e.color.val,this._shadowColorR=n.r,this._shadowColorG=n.g,this._shadowColorB=n.b,this._shadowColorA=n.a}return I(this),this},this.setOptns=function(e){e.globalAlpha=this._opacity,e.shadowOffsetX=this._shadowX,e.shadowOffsetY=this._shadowY,e.shadowBlur=this._shadowBlur,e.globalCompositeOperation=this._composite;var t=parseInt(this._shadowColorR),n=parseInt(this._shadowColorG),r=parseInt(this._shadowColorB),a=parseInt(100*this._shadowColorA)/100;return this._shadowColorRPrev!==t||this._shadowColorGPrev!==n||this._shadowColorBPrev!==r||this._shadowColorAPrev!==a?(e.shadowColor=this._shadowColor="rgba("+t+", "+n+", "+r+", "+a+")",this._shadowColorRPrev=t,this._shadowColorGPrev=n,this._shadowColorBPrev=r,this._shadowColorAPrev=a):e.shadowColor=this._shadowColor,e.transform(this._transform11,this._transform12,this._transform21,this._transform22,this._transformdx,this._transformdy),this},this.up=function(e){if(e===t&&(e=1),"top"==e)this.level(e);else{var n=Y(this).objs[this.optns.number+e];n!==t&&(e=n._level+1-this._level),this.level(this._level+e)}return this},this.down=function(e){if(e==t&&(e=1),"bottom"==e)this.level(e);else{var n=Y(this).objs[this.optns.number-e];n!==t&&(e=this._level-(n._level-1)),this.level(this._level-e)}return this},this.level=function(e){if(e==t)return this._level;var n=Y(this);return"bottom"==e&&(e=0==this.optns.number?this._level:n.objs[0]._level-1),"top"==e&&(e=this.optns.number==n.objs.length?this._level:n.objs[n.objs.length-1]._level+1),this._level=e,n.optns.anyObjLevelChanged=!0,I(this),this},this.del=function(){this.optns.deleted=!0,Y(this).optns.anyObjDeleted=!0,I(this)},this.focus=function(e){return e===t?(this.optns.focused=!0,"function"==typeof this.onfocus&&this.onfocus()):this.onfocus=e,this},this.blur=function(e){return e===t?(this.optns.focused=!1,"function"==typeof this.onblur&&this.onblur()):this.onblur=e,this},this.click=function(e){return k.call(this,e,"click")},this.dblclick=function(e){return k.call(this,e,"dblclick")},this.keypress=function(e){return R.call(this,e,"onkeypress")},this.keydown=function(e){return R.call(this,e,"onkeydown")},this.keyup=function(e){return R.call(this,e,"onkeyup")},this.mousedown=function(e){return k.call(this,e,"mousedown")},this.mouseup=function(e){return k.call(this,e,"mouseup")},this.mousemove=function(e){return k.call(this,e,"mousemove")},this.mouseover=function(e){return k.call(this,e,"mouseover")},this.mouseout=function(e){return k.call(this,e,"mouseout")},this.attr=function(e,n){if("object"==typeof e)var r=e;else{if(n===t)return this["_"+e];(r={})[e]=n}return this.animate(r)},this.queue=function(){var e,n,r,a,i=this.animateQueue.length,o=0,s=0,l=arguments;for(n=0;n<l.length;n++)if("function"==typeof l[n]&&(l[n].apply(this),l[n]=!1,n++,this.animateQueue.length>i)){for(r=i;r<this.animateQueue.length;r++)if((e=this.animateQueue[r]).duration!==t){e.duration>o&&(o=e.duration,s=r);break}if(o){(e=this.animateQueue[s]).animateFn?(a=e.animateFn,e.animateFn=function(){a.apply(this),this.queue.apply(this,l)}):e.animateFn=function(){this.queue.apply(this,l)};break}}},this.stop=function(e,n){this.optns.animated=!1,n===t&&(n=!1),e===t&&(e=!1);for(var r=0;r<this.animateQueue.length;r++){var a=this.animateQueue[r];if(n&&a.animateFn.call(this),e)for(var i in a)a[i].from!==t&&(this[i]=a[i].to,D(i,this,a))}return this.animateQueue=[],this},this.animate=function(e,n,r,a,i){if(n===t?n=1:("function"==typeof n&&(i=n,n=1),"object"==typeof n&&(r=n,n=1)),r===t?r={fn:"linear",type:"in"}:("function"==typeof r&&(i=r,r={fn:"linear",type:"in"}),r.type===t&&(r.type="in")),a===t?a=!1:"function"==typeof a&&(i=a,a=!1),e.scale!==t&&(this._scaleX=this._scaleY=1,"object"!=typeof e.scale?e.scaleX=e.scaleY=e.scale:(e.scaleX=e.scale.x||1,e.scaleY=e.scale.y||1)),e.translate!==t&&(this._translateX=this._translateY=0,"object"!=typeof e.translate?e.translateX=e.translateY=e.translate:(e.translateX=e.translate.x||0,e.translateY=e.translate.y||0),e.translate=t),e.translateTo!==t){var o=this.position();this._translateToX=o.x,this._translateToY=o.y,"object"!=typeof e.translateTo?e.translateToX=e.translateToY=e.translateTo:(e.translateToX=e.translateTo.x||0,e.translateToY=e.translateTo.y||0),e.translateTo=t}if(e.rotate!==t&&(e.rotateAngle=e.rotate.angle,this._rotateAngle=0,this._rotateX=e.rotate.x||0,this._rotateY=e.rotate.y||0,e.rotate=t),e.color!==t){var s=W(e.color);s.color.notColor?this.optns.color.notColor=s.color.notColor:(e.colorR=s.r,e.colorG=s.g,e.colorB=s.b,e.alpha=s.a),e.color=t}if(e.shadowColor!==t&&(s=W(e.shadowColor),e.shadowColorR=s.r,e.shadowColorG=s.g,e.shadowColorB=s.b,e.shadowColorA=s.a,e.shadowColor=t),n>1){var l=this.animateQueue[this.animateQueue.length]={animateKeyCount:0};l.animateFn=i||!1,this.optns.animated=!0,l.duration=n,l.step=0,l.easing=r,l.onstep=a}for(var d in e)if(this["_"+d]!==t&&e[d]!==t){var c=e[d],f="_"+d;c!=this[f]&&(c.charAt&&("string"==d?this._string=c:"="==c.charAt(1)?c=this[f]+parseInt(c.charAt(0)+"1")*parseInt(c.substr(2)):u.test(c)?this[f]=c:c=parseInt(c)),1==n?this[f]=c:(l[f]={from:this[f],to:c,prev:0},l.animateKeyCount++))}return 1==n&&(e.rotateAngle&&this.rotate(this._rotateAngle,this._rotateX,this._rotateY),(e.translateX||e.translateY)&&this.translate(this._translateX,this._translateY),(e.translateToX||e.translateToY)&&this.translate(this._translateToX,this._translateToY),(e.scaleX||e.scaleY)&&this.scale(this._scaleX,this._scaleY)),I(this),this},this.matrix=function(e){return e===t?[[this._transform11,this._transform21,this._transformdx],[this._transform12,this._transform22,this._transformdy]]:(this._transform11=e[0][0],this._transform21=e[0][1],this._transform12=e[1][0],this._transform22=e[1][1],this._transformdx=e[0][2],this._transformdy=e[1][2],this)},this.translateTo=function(e,n,r,a,i,o){if(r!==t)return this.animate({translateTo:{x:e,y:n}},r,a,i,o);var s=this.position(),l=0,u=0;return e!==t&&(l=e-s.x),n!==t&&(u=n-s.y),this.translate(l,u)},this.translate=function(e,n,r,a,i,o){return r!==t?this.animate({translate:{x:e,y:n}},r,a,i,o):(this.optns.translateMatrix=B(this.optns.translateMatrix,[[1,0,e],[0,1,n]]),O(this),this)},this.scale=function(e,n,r,a,i,o){return r!==t?this.animate({scale:{x:e,y:n}},r,a,i,o):(n===t&&(n=e),this.optns.scaleMatrix=B(this.optns.scaleMatrix,[[e,0,this._x*(1-e)],[0,n,this._y*(1-n)]]),O(this),this)},this.rotate=function(e,n,r,a,i,o,s){if(a!==t)return this.animate({rotate:{angle:e,x:n,y:r}},a,i,o,s);var l=m(e/=f),u=g(e),d=0,c=0;if(n!==t){if("center"==n){var h=this.getCenter("poor");r===t?(n=h.x,r=h.y):(n=h.x+r.x,r=h.y+r.y)}d=-n*(l-1)+r*u,c=-r*(l-1)-n*u}return this.optns.rotateMatrix=B(this.optns.rotateMatrix,[[l,-u,d],[u,l,c]]),O(this),this},this.transform=function(e,n,r,a,i,o,s){if(e===t)return this.matrix();var l=this.optns;return s!==t?(l.transformMatrix=[[e,r,i],[n,a,o]],l.rotateMatrix=[[1,0,0],[0,1,0]],l.scaleMatrix=[[1,0,0],[0,1,0]],l.translateMatrix=[[1,0,0],[0,1,0]]):l.transformMatrix=B(l.transformMatrix,[[e,r,i],[n,a,o]]),O(this),this},this.beforeDraw=function(e){if(!this._visible)return!1;"function"==typeof this.onBeforeDraw&&this.onBeforeDraw();var t=e.ctx;if(t.save(),this.optns.clipObject){var n=this.optns.clipObject;n._visible=!0,n.optns.animated&&M.call(n,e),n.setOptns(t),t.beginPath(),n.draw(t),t.clip()}return this.setOptns(t),this.optns.animated&&M.call(this,e),t.beginPath(),!0},this.clip=function(e){return e===t?this.optns.clipObject:(Y(this).objs.splice(e.optns.number,1),this.optns.clipObject=e,this)},this.afterDraw=function(e){e.ctx.closePath(),function(e,t){!function(e,t){var n=!1,r=t.mousemove,a=t.mousedown,i=t.mouseup,o=t.click,s=t.dblclick,l=r.x||a.x||i.x||s.x||o.x;0!=l&&(n=G(e,l,r.y||a.y||i.y||s.y||o.y)),n&&(0!=r.x&&(r.object=e),0!=a.x&&(a.objects[a.objects.length]=e),0!=o.x&&(o.objects[o.objects.length]=e),0!=s.x&&(s.objects[s.objects.length]=e),0!=i.x&&(i.objects[i.objects.length]=e),t.point=n)}(e,t),function(e,t){e.optns.focused&&(0!=t.keyDown.val&&"function"==typeof e.onkeydown&&e.onkeydown(t.keyDown),0!=t.keyUp.val&&"function"==typeof e.onkeyup&&e.onkeyup(t.keyUp),0!=t.keyPress.val&&"function"==typeof e.onkeypress&&e.onkeypress(t.keyPress))}(e,t)}(this,e),e.ctx.restore(),this.optns.clipObject&&ne.shape.prototype.afterDraw.call(this.optns.clipObject,e)},this.isPointIn=function(e,n,r){var a=$(this).optns,i=a.ctx,o=!1,s=this.optns,l=!1;if(r!==t&&(e-=a.x,n-=a.y),s.animated&&(o=!0),s.animated=!1,s.clipObject){var u=s.clipObject.optns;u.animated&&(l=!0,u.animated=!1)}Y(this).setOptns(i),this.beforeDraw(a),this.draw(i);var d=G(this,e,n);return i.closePath(),i.restore(),i.setTransform(1,0,0,1,0,0),s.animated=o,l&&(u.animated=l),d},this.layer=function(e){return X(e,this,"objs")},this.canvas=function(e){return K(e,this,"objs")},this.draggable=function(e,n,r){if(n===t&&"object"==typeof e&&e.optns===t){n=e.params,r=e.drag;var a=e.start,i=e.stop,o=e.disabled;e=e.object}var s=this,l=this.optns.drag;"function"==typeof n&&(r=n,n=t),"function"==typeof e&&(r=e,e=t),l.shiftX=0,l.shiftY=0,n!==t&&(n.shiftX!==t&&(l.shiftX=n.shiftX,n.shiftX=t),n.shiftY!==t&&(l.shiftY=n.shiftY,n.shiftY=t)),e!==t&&(e.id&&(s=n===t?e.visible(!1):e.animate(n).visible(!1)),"clone"==e&&(s=this.clone(n).visible(!1),l.type="clone")),l.val=!0,l.x=this._x,l.y=this._y,l.dx=this._transformdx,l.dy=this._transformdy,l.object=s,l.params=n,l.drag=r||!1,l.start=a||!1,l.stop=i||!1,l.disabled=o||!1;var u=$(this).optns;return u.mousemove.val=!0,u.mousedown.val=!0,u.mouseup.val=!0,this},this.droppable=function(e){return this.optns.drop.val=!0,e!==t&&(this.optns.drop.fn=e),this},this.name=function(e){return this.attr("name",e)},this.hasName=function(e){for(var t=this.attr("name").split(" "),n=0;n<t.length;){if(t[n]===e)return!0;n++}return!1},this.addName=function(e){for(var t=this.attr("name").split(" "),n=0;n<t.length;){if(t[n]===e)return this;n++}return t.push(e),this.attr("name",t.join(" "))},this.removeName=function(e){for(var t=this.attr("name").split(" "),n=0;n<t.length;){if(t[n]===e)return t.splice(n,1),this.attr("name",t.join(" "));n++}return this},this.visible=function(e){return this.attr("visible",e)},this.composite=function(e){return this.attr("composite",e)},this.id=function(e){return e===t?this.optns.id:(this.optns.id=e,this)},this.opacity=function(e){return this.attr("opacity",e)},this.fadeIn=function(e,t,n,r){return this.fadeTo(1,e,t,n,r)},this.fadeOut=function(e,t,n,r){return this.fadeTo(0,e,t,n,r)},this.fadeTo=function(e,n,r,a,i){return n===t&&(n=600),this.animate({opacity:e},n,r,a,i)},this.fadeToggle=function(e,t,n,r){return this._opacity?this.fadeOut(e,t,n,r):this.fadeIn(e,t,n,r),this},this.instanceOf=function(e){return e===t?this._proto:this instanceof ne[e]},this.base=function(e,r,a){"object"==typeof e?(a=(e=P(e,{x:0,y:0,service:!1})).service,r=e.y,e=e.x):a===t&&(a=!1);var i=n[o];if(this.optns={animated:!1,clipObject:!1,drop:{val:!1,fn:function(){}},drag:{val:!1},layer:{id:i.optns.id+"Layer0",number:0},canvas:{number:0},focused:!1,buffer:{val:!1},rotateMatrix:[[1,0,0],[0,1,0]],scaleMatrix:[[1,0,0],[0,1,0]],translateMatrix:[[1,0,0],[0,1,0]],transformMatrix:[[1,0,0],[0,1,0]]},this.animateQueue=[],this._x=e,this._y=r,0==a&&i!==t&&i.layers[0]!==t){this.optns.layer.number=0,this.optns.canvas.number=o;var s=Y(this),l=s.objs.length;this.optns.number=l,this._level=l?s.objs[l-1]._level+1:0,s.objs[l]=this,this.optns.layer.id=s.optns.id,I(this)}return this},this._visible=!0,this._composite="source-over",this._name="",this._opacity=1,this._shadowX=0,this._shadowY=0,this._shadowBlur=0,this._shadowColor="rgba(0,0,0,0)",this._shadowColorR=0,this._shadowColorG=0,this._shadowColorB=0,this._shadowColorA=0,this._shadowColorRPrev=0,this._shadowColorGPrev=0,this._shadowColorBPrev=0,this._shadowColorAPrev=0,this._translateX=0,this._translateY=0,this._scaleX=1,this._scaleY=1,this._rotateAngle=0,this._rotateX=0,this._rotateY=0,this._transform11=1,this._transform12=0,this._transform21=0,this._transform22=1,this._transformdx=0,this._transformdy=0,this._matrixChanged=!1},ne.object.prototype=new ne.object,ne.shape=function(){this.color=function(e){return e===t?[this._colorR,this._colorG,this._colorB,this._alpha]:this.attr("color",e)},this.lineStyle=function(e){return this.attr(e)},this.setOptns=function(e){ne.shape.prototype.setOptns.call(this,e),e.lineWidth=this._lineWidth,e.lineCap=this._cap,e.lineJoin=this._join,e.miterLimit=this._miterLimit;var r=this.optns.color;if(r.notColor===t){var a=parseInt(this._colorR),i=parseInt(this._colorG),o=parseInt(this._colorB),s=parseInt(100*this._alpha)/100;this._colorRPrev!==a||this._colorGPrev!==i||this._colorBPrev!==o||this._alphaPrev!==s?(r.val=this._color="rgba("+a+", "+i+", "+o+", "+s+")",this._colorRPrev=a,this._colorGPrev=i,this._colorBPrev=o,this._alphaPrev=s):r.val=this._color}else{var l=r.notColor,u=n[l.canvas].layers[l.layer];u.grdntsnptrns[l.level]!==t&&(r.val=u.grdntsnptrns[l.level].val)}this._fill?e.fillStyle=r.val:e.strokeStyle=r.val},this.afterDraw=function(e){this._fill?e.ctx.fill():e.ctx.stroke(),ne.shape.prototype.afterDraw.call(this,e)},this.base=function(e){return e===t&&(e={}),e.color===t?e.color="rgba(0,0,0,1)":e.color.charAt||e.color.id!==t||e.color.r!==t||(e.fill=e.color,e.color="rgba(0,0,0,1)"),e=P(e,{color:"rgba(0,0,0,1)",fill:0}),ne.shape.prototype.base.call(this,e),this._fill=e.fill,this.optns.color={val:e.color,notColor:t},this.color(e.color)},this._colorR=0,this._colorG=0,this._colorB=0,this._alpha=0,this._colorRPrev=0,this._colorGPrev=0,this._colorBPrev=0,this._alphaPrev=0,this._color="rgba(0,0,0,0)",this._lineWidth=1,this._cap="butt",this._join="miter",this._miterLimit=1},ne.shape.prototype=new ne.object,ne.lines=function(){this.getCenter=function(e){for(var t={x:this._x0,y:this._y0},n=1;n<this.shapesCount;n++)t.x+=this["_x"+n],t.y+=this["_y"+n];return t.x=t.x/this.shapesCount,t.y=t.y/this.shapesCount,z(this,t,e)},this.position=function(){return H(this._x0,this._y0,B(this.matrix(),Y(this).matrix()))},this.getRect=function(e){for(var t,n,r=t=this._x0,a=n=this._y0,i=1;i<this.shapesCount;i++)r<this["_x"+i]&&(r=this["_x"+i]),a<this["_y"+i]&&(a=this["_y"+i]),t>this["_x"+i]&&(t=this["_x"+i]),n>this["_y"+i]&&(n=this["_y"+i]);return V(this,{x:t,y:n,width:r-t,height:a-n},e)},this.addPoint=function(){I(this);for(var e=this.pointNames,t=0;t<e.length;t++)this[e[t]+this.shapesCount]=arguments[t];return this.shapesCount++,this},this.delPoint=function(e,n,r){if(I(this),n===t){var a=this.points();a.splice(e,1),this.points(a)}else{r=r||0;for(var i=0;i<this.shapesCount;i++)this["_x"+i]<e+r&&this["_x"+i]>e-r&&this["_y"+i]<n+r&&this["_y"+i]<n+r&&(this.delPoint(i),i--)}return this},this.points=function(e){var n=this.pointNames;if(e===t){e=[];for(var r=0;r<this.shapesCount;r++){e[r]=[];for(var a=0;a<n.length;a++)e[r][a]=this[n[a]+r]}return e}I(this);var i=this.shapesCount;for(this.shapesCount=e.length,r=0;r<this.shapesCount;r++)for(a=0;a<n.length;a++)this[n[a]+r]=e[r][a];for(r=this.shapesCount;r<i;r++)for(a=0;a<n.length;a++)this[n[a]+r]=t;return this},this.base=function(e,n,r){return e!==t&&"function"==typeof e.pop&&(e={points:e,color:n,fill:r}),ne.lines.prototype.base.call(this,e),this.shapesCount=0,e!==t&&e.points!==t&&this.points(e.points),this}},ne.lines.prototype=new ne.shape,ne.line=function(){this.draw=function(e){if(this._x0!==t){e.moveTo(this._x0,this._y0);for(var n=1;n<this.shapesCount;n++)e.lineTo(this["_x"+n],this["_y"+n])}},this.base=function(e,t,n){return ne.line.prototype.base.call(this,e,t,n),this},this._proto="line",this.pointNames=["_x","_y"]},ne.line.prototype=new ne.lines,ne.qCurve=function(){this.draw=function(e){if(this._x0!==t){e.moveTo(this._x0,this._y0);for(var n=1;n<this.shapesCount;n++)e.quadraticCurveTo(this["_cp1x"+n],this["_cp1y"+n],this["_x"+n],this["_y"+n])}},this.base=function(e,t,n){return ne.qCurve.prototype.base.call(this,e,t,n),this},this._proto="qCurve",this.pointNames=["_x","_y","_cp1x","_cp1y"]},ne.qCurve.prototype=new ne.lines,ne.bCurve=function(){this.draw=function(e){if(this._x0!==t){e.moveTo(this._x0,this._y0);for(var n=1;n<this.shapesCount;n++)e.bezierCurveTo(this["_cp1x"+n],this["_cp1y"+n],this["_cp2x"+n],this["_cp2y"+n],this["_x"+n],this["_y"+n])}},this.base=function(e,t,n){return ne.bCurve.prototype.base.call(this,e,t,n),this},this._proto="bCurve",this.pointNames=["_x","_y","_cp1x","_cp1y","_cp2x","_cp2y"]},ne.bCurve.prototype=new ne.lines,ne.circle=function(){this.getCenter=function(e){return z(this,{x:this._x,y:this._y},e)},this.getRect=function(e){var t={x:Math.floor(this._x-this._radius),y:Math.floor(this._y-this._radius)};return t.width=t.height=2*Math.ceil(this._radius),V(this,t,e)},this.draw=function(e){e.arc(this._x,this._y,this._radius,0,i,!0)},this.base=function(e,t,n,r,a){return"object"!=typeof e&&(e={x:e,y:t,radius:n,color:r,fill:a}),e=P(e,{radius:0}),ne.circle.prototype.base.call(this,e),this._radius=e.radius,this},this._proto="circle"},ne.circle.prototype=new ne.shape,ne.rect=function(){this.getRect=function(e){return V(this,{x:this._x,y:this._y,width:this._width,height:this._height},e)},this.draw=function(e){e.rect(this._x,this._y,this._width,this._height)},this.base=function(e,t,n,r,a,i){return"object"!=typeof e&&(e={x:e,y:t,width:n,height:r,color:a,fill:i}),e=P(e,{width:0,height:0}),ne.rect.prototype.base.call(this,e),this._width=e.width,this._height=e.height,this},this._proto="rect"},ne.rect.prototype=new ne.shape,ne.arc=function(){this.getRect=function(e){var t={x:this._x,y:this._y},n=this._startAngle,r=this._endAngle,a=this._radius,i=v(g(n/f)*a),o=v(m(n/f)*a),s=v(g(r/f)*a),l=v(m(r/f)*a),u=o>0&&l>0,d=o<0&&l<0,c=i>0&&s>0,y=i<0&&s<0;return t.width=t.height=a,this._anticlockwise&&n<r||!this._anticlockwise&&n>r?(d||u&&(y||c)||0==o&&0==l?(t.y-=a,t.height+=a):u&&s<0&&i>0?(t.y+=s,t.height+=s):l>0&&s<0&&o<0?(t.y+=p(s,i),t.height-=p(s,i)):(t.y-=y?h(s,i):a,t.height+=h(s,i)),c||y&&(d||u)||0==i&&0==s?(t.x-=a,t.width+=a):s<0&&i>0?(t.x+=p(l,o),t.width-=p(l,o)):(t.x-=d?h(l,o):a,t.width+=h(l,o))):(u=o>=0&&l>=0,c=i>=0&&s>=0,d=o<=0&&l<=0,(y=i<=0&&s<=0)&&u?(t.x+=p(l,o),t.width-=p(l,o),t.y+=p(s,i),t.height+=h(s,i)):y&&d?(t.x+=p(l,o),t.width+=h(l,o),t.y+=p(s,i),t.height+=h(s,i)):y?(t.x+=p(l,o),t.width+=h(l,o),t.y-=a,t.height+=h(s,i)):u&&c?(t.x+=p(l,o),t.width=b(l-o),t.y+=p(s,i),t.height-=p(s,i)):c?(t.x+=p(l,o),t.width=b(l)+b(o),t.y+=p(s,i),t.height-=p(s,i)):d?(t.x-=a,t.width+=h(l,o),t.y-=a,t.height+=h(s,i)):u&&(t.x-=a,t.width+=h(l,o),t.y-=a,t.height+=a)),V(this,t,e)},this.draw=function(e){e.arc(this._x,this._y,this._radius,this._startAngle/f,this._endAngle/f,this._anticlockwise)},this.base=function(e,n,r,a,i,o,s,l){return o!==t&&(o.charAt&&(s=o),o=!!o),"object"!=typeof e&&(e={x:e,y:n,radius:r,startAngle:a,endAngle:i,anticlockwise:o,color:s,fill:l}),e=P(e,{radius:0,startAngle:0,endAngle:0,anticlockwise:!0}),ne.arc.prototype.base.call(this,e),this._radius=e.radius,this._startAngle=e.startAngle,this._endAngle=e.endAngle,this._anticlockwise=e.anticlockwise,this},this._proto="arc"},ne.arc.prototype=new ne.shape,ne.text=function(){this.font=function(e){return this._splitedLines=!1,this.attr("font",e)},this._font="10px sans-serif",this.align=function(e){return this.attr("align",e)},this._align="start",this.baseline=function(e){return this.attr("baseline",e)},this._baseline="alphabetic",this.string=function(e){return this._splitedLines=!1,this.attr("string",e)},this.position=function(){var e={x:this._x,y:this._y},t=$(this).optns.ctx;return e.height=parseInt(this._font.match(d)[0]),e.y-=e.height,t.save(),t.textBaseline=this._baseline,t.font=this._font,t.textAlign=this._align,e.width=t.measureText(this._string).width,t.restore(),V(this,e)},this.getRect=function(e){var t={x:this._x,y:this._y},n=$(this).optns.ctx;return t.height=parseInt(this._font.match(d)[0]),t.y-=t.height,n.save(),n.textBaseline=this._baseline,n.font=this._font,n.textAlign=this._align,t.width=n.measureText(this._string).width,"center"==this._align&&(t.x-=t.width/2),"right"==this._align&&(t.x-=t.width),n.restore(),V(this,t,e)},this.setOptns=function(e){ne.text.prototype.setOptns.call(this,e),e.textBaseline=this._baseline,e.font=this._font,e.textAlign=this._align},this.splitLines=function(e){var t=this._lines=[],n=this._maxWidth,r=10,a="",i="",o=0,s=this._string.split(" "),l=this._font.match(/^(?:\d+).*?/);l&&(r=parseInt(l[0]));for(var u=0,d=s.length;u<d;u++)e.measureText(a=i+s[u]+" ").width>n?(t.push({text:i,height:o=t.length*r+r}),i=s[u]+" "):i=a;i.length>0&&(o=t.length*r+r,t.push({text:i.trim(),height:o}))},this.draw=function(e){if(!1===this._maxWidth)this._fill?e.fillText(this._string,this._x,this._y):e.strokeText(this._string,this._x,this._y);else if(this._splitedLines||(this.splitLines(e),this._splitedLines=!0),this._fill)for(var t=0,n=this._lines.length;t<n;t++)e.fillText(this._lines[t].text,this._x,this._y+this._lines[t].height);else e.strokeText(this._string,this._x,this._y,this._maxWidth)},this.base=function(e,n,r,a,i,o){return a!==t&&a.charAt&&(i!==t&&(o=i),i=a,a=!1),"object"!=typeof e&&(e={string:e,x:n,y:r,maxWidth:a,color:i,fill:o}),e=P(e,{string:"",maxWidth:!1,fill:1}),ne.text.prototype.base.call(this,e),this._string=e.string,this._maxWidth=e.maxWidth,this._splitedLines=!1,this},this._proto="text"},ne.text.prototype=new ne.shape,ne.grdntsnptrn=function(){this.layer=function(e){return X(e,this,"grdntsnptrns")},this.canvas=function(e){return K(e,this,"grdntsnptrns")};var e=new ne.object;return this.animate=e.animate,this.attr=e.attr,this.id=e.id,this.name=e.name,this.level=e.level,this.base=function(){this.animateQueue=[],this.optns={animated:!1,name:"",layer:{id:n[0].optns.id+"Layer_0",number:0},canvas:{number:0},visible:!0},this.optns.layer.id=n[o].optns.id+"Layer_0",this.optns.layer.number=0,this.optns.canvas.number=o;var e=n[o].layers[0].grdntsnptrns;this._level=e.length,e[this._level]=this,I(this)},this},ne.gradients=function(){this.colorStopsCount=0,this.paramNames=["_pos","_colorR","_colorG","_colorB","_alpha"],this.addColorStop=function(e,t){I(this);var n=W(t),r=this.colorStopsCount;return this["_pos"+r]=e,this["_colorR"+r]=n.r,this["_colorG"+r]=n.g,this["_colorB"+r]=n.b,this["_alpha"+r]=n.a,this.colorStopsCount++,this},this.animate=function(e,t,n,r,a){for(var i in e)if("color"==i.substr(0,5)){var o=i.substring(5),s=W(e[i]);e["colorR"+o]=s.r,e["colorG"+o]=s.g,e["colorB"+o]=s.b,e["alpha"+o]=s.a}ne.gradients.prototype.animate.call(this,e,t,n,r,a)},this.delColorStop=function(e){I(this);var t=this.colorStops();return t.splice(e,1),t.length>0?this.colorStops(t):this.colorStopsCount=0,this},this.colorStops=function(e){var n=this.paramNames;if(e===t){e=[];for(var r=0;r<this.colorStopsCount;r++){e[r]=[];for(var a=0;a<n.length;a++)e[r][a]=this[n[a]+r]}return e}I(this);var i=this.colorStopsCount,o=e.length;if(2==e[0].length)for(r=0;r<o;r++)this.addColorStop(e[r][0],e[r][1]);else for(r=0;r<o;r++)for(a=0;a<n.length;a++)this[n[a]+r]=e[r][a];for(r=o;r<i;r++)for(a=0;a<n.length;a++)this[n[a]+r]=t;return this.colorStopsCount=o,this},this.base=function(e){return ne.gradients.prototype.base.call(this),e==t?this:this.colorStops(e)}},ne.gradients.prototype=new ne.grdntsnptrn,ne.pattern=function(){this.create=function(e){this.optns.animated&&M.call(this,e),this.val=e.ctx.createPattern(this._img,this._type)},this.base=function(e,t){return e.onload&&(e={image:e,type:t}),e=P(e,{type:"repeat"}),ne.pattern.prototype.base.call(this),this._img=e.image,this._type=e.type,this},this._proto="pattern"},ne.pattern.prototype=new ne.grdntsnptrn,ne.lGradient=function(){this.create=function(e){this.optns.animated&&M.call(this,e),this.val=e.ctx.createLinearGradient(this._x1,this._y1,this._x2,this._y2);for(var t=0;t<this.colorStopsCount;t++)this.val.addColorStop(this["_pos"+t],"rgba("+parseInt(this["_colorR"+t])+","+parseInt(this["_colorG"+t])+","+parseInt(this["_colorB"+t])+","+this["_alpha"+t]+")")},this.base=function(e,t,n,r,a){return"object"!=typeof e&&(e={x1:e,y1:t,x2:n,y2:r,colors:a}),e=P(e,{x1:0,y1:0,x2:0,y2:0}),ne.lGradient.prototype.base.call(this,e.colors),this._x1=e.x1,this._y1=e.y1,this._x2=e.x2,this._y2=e.y2,this},this._proto="lGradient"},ne.lGradient.prototype=new ne.gradients,ne.rGradient=function(){this.create=function(e){this.optns.animated&&M.call(this),this.val=e.ctx.createRadialGradient(this._x1,this._y1,this._r1,this._x2,this._y2,this._r2);for(var t=0;t<this.colorStopsCount;t++)this.val.addColorStop(this["_pos"+t],"rgba("+parseInt(this["_colorR"+t])+","+parseInt(this["_colorG"+t])+","+parseInt(this["_colorB"+t])+","+this["_alpha"+t]+")")},this.base=function(e,t,n,r,a,i,o){return"object"!=typeof e&&(e={x1:e,y1:t,r1:n,x2:r,y2:a,r2:i,colors:o}),e=P(e,{x1:0,y1:0,r1:0,x2:0,y2:0,r2:0}),ne.rGradient.prototype.base.call(this,e.colors),this._x1=e.x1,this._y1=e.y1,this._r1=e.r1,this._x2=e.x2,this._y2=e.y2,this._r2=e.r2,this},this._proto="rGradient"},ne.rGradient.prototype=new ne.gradients,ne.layer=function(){this.position=function(){var e,n,r,a=this.objs,i=a.length;for(r=0;r<i;r++)n=a[r].position(),e===t&&(e=n),e.x>n.x&&(e.x=n.x),e.y>n.y&&(e.y=n.y);return e},this.getRect=function(e){var n,r,a,i=this.objs,o=i.length;if(0==i.length)return!1;if("coords"==e){for(a=0;a<o;a++)r=i[a].getRect(e),n===t&&(n=r),n[0][0]>r[0][0]&&(n[0][0]=r[0][0]),n[0][1]>r[0][1]&&(n[0][1]=r[0][1]),n[1][0]<r[1][0]&&(n[1][0]=r[1][0]),n[1][1]>r[1][1]&&(n[1][1]=r[1][1]),n[2][0]>r[2][0]&&(n[2][0]=r[2][0]),n[2][1]<r[2][1]&&(n[2][1]=r[2][1]),n[3][0]<r[3][0]&&(n[3][0]=r[3][0]),n[3][1]<r[3][1]&&(n[3][1]=r[3][1]);return n}for(a=0;a<o;a++)(r=i[a].getRect(e)).right=r.width+r.x,r.bottom=r.height+r.y,n===t&&(n=r),n.x>r.x&&(n.x=r.x),n.y>r.y&&(n.y=r.y),n.right<r.right&&(n.right=r.right),n.bottom<r.bottom&&(n.bottom=r.bottom);return n.width=n.right-n.x,n.height=n.bottom-n.y,n},this.canvas=function(e){if(e===t)return this.idCanvas;if(this.optns.canvas.id==e)return this;for(var r=-1,a=0,i=n.length,o=0;o<i;o++){var s=n[o].optns.id;s==e&&(r=o),s==this.optns.canvas.id&&(a=o)}r<0&&(r=n.length,C.canvas(e)),this.optns.canvas.id=e,this.optns.canvas.number=r,n[a].layers.splice(this.optns.number,1);var l=n[r].layers;return this._level=this.optns.number=l.length,l[this._level]=this,Q(this.objs,this.optns.id,this._level,e,r),Q(this.grdntsnptrns,this.optns.id,this._level,e,r),n[r].optns.redraw=1,this},this.up=function(e){if(e===t&&(e=1),"top"==e)this.level(e);else{var n=$(this).layers[this.optns.number+e];n!==t&&(e=n._level+1-this._level),this.level(this._level+e)}return this},this.down=function(e){if(e==t&&(e=1),"bottom"==e)this.level(e);else{var n=$(this).layers[this.optns.number-e];n!==t&&(e=this._level-(n._level-1)),this.level(this._level-e)}return this},this.level=function(e){if(e==t)return this._level;var n=$(this),r=n.optns;return"bottom"==e&&(e=0==this.optns.number?this._level:n.layers[0]._level-1),"top"==e&&(e=this.optns.number==n.layers.length-1?this._level:n.layers[n.layers.length-1]._level+1),this._level=e,r.anyLayerLevelChanged=!0,r.redraw=1,this},this.del=function(){var e=$(this).optns;e.anyLayerDeleted=!0,this.optns.deleted=!0,this.draw=!1,e.redraw=1},this.setOptns=function(e){return e.setTransform(1,0,0,1,0,0),ne.layer.prototype.setOptns.call(this,e),this},this.afterDraw=function(e){e.ctx.closePath(),e.ctx.restore(),this.optns.clipObject&&ne.layer.prototype.afterDraw.call(this.optns.clipObject,e)},this.clone=function(e,n){var r=C.layer(e);return Z(r,this),Z(r.optns.transformMatrix,this.optns.transformMatrix),Z(r.optns.translateMatrix,this.optns.translateMatrix),Z(r.optns.scaleMatrix,this.optns.scaleMatrix),Z(r.optns.rotateMatrix,this.optns.rotateMatrix),r.canvas($(this).optns.id),n===t?r:r.animate(n)},this.isPointIn=function(e,t,n){var r,a=this.objs;for(r=0;r<a.length;r++)if(a[r].isPointIn(e,t,n))return!0;return!1},this.opacity=function(e){for(var t=this.objs,n=0;n<t.length;n++)t[n].attr("opacity",e);return this},this.fadeTo=function(e,n,r,a,i){n===t&&(n=600);for(var o=this.objs,s=0;s<o.length;s++)o[s].animate({opacity:e},n,r,a,i);return this},this.draw=function(e){var t=this.optns,n=t.buffer,r=e.ctx;if(n.val)return r.drawImage(n.cnv,n.x,n.y),this;for(var a=0;a<this.grdntsnptrns.length;a++)this.grdntsnptrns[a].create(e);for(t.anyObjLevelChanged&&(ee(this.objs),t.anyObjLevelChanged=!1),t.anyObjDeleted&&(te(this.objs),t.anyObjDeleted=!1),r.globalCompositeOperation=t.gCO,a=0;a<this.objs.length;a++){var i=this.objs[a];if("function"==typeof i.draw&&(this.setOptns(r),i.beforeDraw(e)&&"function"==typeof i.draw)){var o=i.optns.buffer;o.val?r.drawImage(o.cnv,o.x,o.y):i.draw(r),i.afterDraw(n.optns?n.optns:e)}}return this},this.objects=function(e){for(var n=re(),r=0;this.objs[r]!==t;)n.elements[r]=this.objs[r++];return e!==t?n.find(e):n},this.base=function(e){var t=n[o],r=t.layers,a=t.optns;ne.layer.prototype.base.call(this,0,0,!0);var i=r.length;r[i]=this,this.objs=[],this.grdntsnptrns=[],this._level=i?r[i-1]._level+1:0,this.optns.number=i,this.optns.id=e;var s=this.optns;return s.anyObjDeleted=!1,s.anyObjLevelChanged=!1,s.gCO=a.gCO,s.canvas.id=a.id,s.canvas.number=o,this},this._proto="layer"},ne.layer.prototype=new ne.object,ne.imageData=function(){this.filter=function(e,t){var n=N[e];return n.fn.call(this,this._width,this._height,n.matrix,t),this},this.getRect=function(e){return V(this,{x:this._x,y:this._y,width:this._width,height:this._height},e)},this.setPixel=function(e,n,r){var a,i=4*(e+n*this._width);return r.r!==t?a=r:r[0]!==t&&(a=r.charAt?W(r):{r:r[0],g:r[1],b:r[2],a:r[3]}),this._data[i+0]=a.r,this._data[i+1]=a.g,this._data[i+2]=a.b,this._data[i+3]=255*a.a,I(this),this},this.getPixel=function(e,t){var n=4*(e+t*this._width);return[this._data[n+0],this._data[n+1],this._data[n+2],this._data[n+3]/255]},this._getX=0,this._getY=0,this.getData=function(e,t,n,r){this._getX=e,this._getY=t,this._width=n,this._height=r;var a=$(this).optns.ctx;try{this._imgData=a.getImageData(this._getX,this._getY,this._width,this._height)}catch(i){netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),this._imgData=a.getImageData(this._getX,this._getY,this._width,this._height)}return this._data=this._imgData.data,I(this),this},this.putData=function(e,n){return e!==t&&(this._x=e),n!==t&&(this._y=n),this._putData=!0,I(this),this},this.clone=function(){var e=ne.imageData.prototype.clone.call(this);return e._imgData=t,e},this.draw=function(e){if(this._imgData===t){this._imgData=e.createImageData(this._width,this._height);for(var n=0;n<this._width*this._height*4;n++)this._imgData.data[n]=this._data[n];this._data=this._imgData.data}this._putData&&e.putImageData(this._imgData,this._x,this._y)},this.base=function(e,n){if(ne.imageData.prototype.base.call(this),n===t){var r=e;r._width!==t?(e=r._width,n=r._height):(n=(e=P(e,{width:0,height:0})).height,e=e.width)}this._width=e,this._height=n,this._data=[];for(var a=0;a<this._width;a++)for(var i=0;i<this._height;i++){var o=4*(a+i*this._width);this._data[o+0]=0,this._data[o+1]=0,this._data[o+2]=0,this._data[o+3]=0}return this},this._putData=!1,this._proto="imageData"},ne.imageData.prototype=new ne.object,ne.image=function(){this.getRect=function(e){return V(this,{x:this._x,y:this._y,width:this._width,height:this._height},e)},this.draw=function(e){e.drawImage(this._img,this._sx,this._sy,this._swidth,this._sheight,this._x,this._y,this._width,this._height)},this.base=function(e,n,r,a,i,o,s,l,u){return"object"==typeof e&&e.src===t&&e.nodeName===t||(e={image:e,x:n,y:r,width:a,height:i,sx:o,sy:s,swidth:l,sheight:u}),!1===(e=P(e,{width:!1,height:!1,sx:0,sy:0,swidth:!1,sheight:!1})).width&&(e.width=e.image.width,e.height=e.image.height),!1===e.swidth&&(e.swidth=e.image.width,e.sheight=e.image.height),ne.image.prototype.base.call(this,e),this._img=e.image,this._width=e.width,this._height=e.height,this._sx=e.sx,this._sy=e.sy,this._swidth=e.swidth,this._sheight=e.sheight,this},this._proto="image"},ne.image.prototype=new ne.object,ne.groups=function(){for(var e in ne)if("group"!=e&&"groups"!=e){var n=new ne[e];for(var r in n)"function"==typeof n[r]&&this[r]===t&&function(e,n){e[n]=function(){for(var e=[],r=[],a=0;arguments[a]!==t;)r[a]=arguments[a++];for(a=0;a<this.elements.length;a++){var i=this.elements[a];Z(e,r),"function"==typeof i[n]&&i[n].apply(i,e)}return this}}(this,r)}this.reverse=function(){var e=this.elements;return this.elements=this.unmatchedElements,this.unmatchedElements=e,this},this.end=function(e){return this.previousGroup===t||0===e?this:(e!==t&&e--,this.previousGroup.end(e))},this.find=function(e){var n,r,a,i,o,s,l,u=re(),d=e.attrs,c=e.fns||[];for(u.previousGroup=this,n=0;n<this.elements.length;n++)u.elements[n]=this.elements[n];if(d!==t)for(r in d)d.hasOwnProperty(r)&&("object"!=typeof d[r]&&(d[r]={val:d[r],rel:"=="}),c[c.length]={fn:"attr",args:[r],val:d[r].val,rel:d[r].rel});if(c.length)for(n=0;n<u.elements.length;n++)for(a=u.elements[n],r=0;r<c.length;r++){switch(l=(o=c[r]).val,i=o.rel,"function"==typeof a[o.fn]?s=a[o.fn].apply(a,o.args):i="del",i){case"!=":s==l&&(i="del");break;case"!==":s===l&&(i="del");break;case"==":s!=l&&(i="del");break;case"===":s!==l&&(i="del");break;case">=":s>=l||(i="del");break;case"<=":s<=l||(i="del");break;case">":s>l||(i="del");break;case"<":s<l||(i="del");break;case"typeof":typeof s!=l&&(i="del")}if("del"==i){u.unmatchedElements[u.unmatchedElements.length]=a,u.elements.splice(n,1),n--;break}}return u},this.base=function(){return this.elements=[],this.unmatchedElements=[],this}},ne.group=function(){this._proto="group"},ne.group.prototype=new ne.groups,C.addFunction=function(e,t,n){return ne[n||"object"].prototype[e]=t,C},C.addObject=function(e,n,r,a){ne[e]=function(e){this.draw=ne[e].draw,this.base=ne[e].base,this._proto=e};var i=ne[e];return a===t&&(a="shape"),i.prototype=new ne[a],i.draw=r,i.base=function(e,n,r){i.prototype.base.call(this,n);var a=0;for(var o in n){var s=r[a]!==t?r[a]:n[o];this["_"+o]=s,"color"==o&&this.color(s),a++}return this},function(e,t){C[e]=function(){return new ne[e](e).base(e,t,arguments)}}(e,n),C},C.addAnimateFunction=function(e,t){return U[e]=t,C},C.addImageDataFilter=function(e,n){return N[e]===t&&(N[e]={}),n.fn!==t&&(N[e].fn=n.fn),n.matrix!==t&&n.type===t&&(N[e].matrix=n.matrix),n.type!==t&&(N[e].matrix[type]=n.matrix),C},C.clear=function(e){return n[0]===t?C:e===t?(n[0].clear(),C):(C.canvas(e).clear(),C)},C.pause=function(e){return e===t?(n[0].pause(),C):(C.canvas(e).pause(),C)},C.start=function(e,t){return C.canvas(e).start(t),C},C.pattern=function(e,t){return(new ne.pattern).base(e,t)},C.lGradient=function(e,t,n,r,a){return(new ne.lGradient).base(e,t,n,r,a)},C.rGradient=function(e,t,n,r,a,i,o){return(new ne.rGradient).base(e,t,n,r,a,i,o)},C.line=function(e,t,n){return(new ne.line).base(e,t,n)},C.qCurve=function(e,t,n){return(new ne.qCurve).base(e,t,n)},C.bCurve=function(e,t,n){return(new ne.bCurve).base(e,t,n)},C.imageData=function(e,t){return(new ne.imageData).base(e,t)},C.image=function(e,t,n,r,a,i,o,s,l){return(new ne.image).base(e,t,n,r,a,i,o,s,l)},C.circle=function(e,t,n,r,a){return(new ne.circle).base(e,t,n,r,a)},C.rect=function(e,t,n,r,a,i){return(new ne.rect).base(e,t,n,r,a,i)},C.arc=function(e,t,n,r,a,i,o,s){return(new ne.arc).base(e,t,n,r,a,i,o,s)},C.text=function(e,t,n,r,a,i){return(new ne.text).base(e,t,n,r,a,i)},C.canvas=function(r){if(r===t)return n[0];for(var a=n.length,i=0;i<a;i++)if(n[i].optns&&n[i].optns.id==r)return n[i];var u={id:function(e){return e===t?this.optns.id:(this.optns.id=e,this)}};return n[a]=u,o=a,u.cnv=document.getElementById(r),u.width=function(e){return e===t?this.cnv.width:(this.optns.width=this.cnv.width=e,this.cnv.style.width=e+"px",this.optns.redraw=1,this)},u.height=function(e){return e===t?this.cnv.height:(this.optns.height=this.cnv.height=e,this.cnv.style.height=e+"px",this.optns.redraw=1,this)},u.optns={id:r,number:o,ctx:u.cnv.getContext("2d"),width:u.cnv.offsetWidth||u.cnv.width,height:u.cnv.offsetHeight||u.cnv.height,anyLayerDeleted:!1,anyLayerLevelChanged:!1,keyDown:{val:!1,code:!1},keyUp:{val:!1,code:!1},keyPress:{val:!1,code:!1},mousemove:{val:!1,x:!1,y:!1,object:!1},click:{val:!1,x:!1,y:!1,objects:[]},dblclick:{val:!1,x:!1,y:!1,objects:[]},mouseup:{val:!1,x:!1,y:!1,objects:[]},mousedown:{val:!1,x:!1,y:!1,objects:[]},drag:{object:!1,x:0,y:0},gCO:"source-over",redraw:1},u.toDataURL=function(){return u.cnv.toDataURL.apply(u.cnv,arguments)},u.layers=[],u.interval=0,C.layer(r+"Layer_0").canvas(r),u.recalculateOffset=function(){var t,n=(t=this.cnv).getBoundingClientRect?function(t){var n=t.getBoundingClientRect(),r=document.body||{},a=document.documentElement,i=n.left+(e.pageXOffset||a.scrollLeft||r.scrollLeft)-(a.clientLeft||r.clientLeft||0);return{top:y(n.top+(e.pageYOffset||a.scrollTop||r.scrollTop)-(a.clientTop||r.clientTop||0)),left:y(i)}}(t):function(e){for(var t=0,n=0;e;)t+=parseInt(e.offsetTop),n+=parseInt(e.offsetLeft),e=e.offsetParent;return{top:t,left:n}}(t);return this.optns.x=n.left+(parseInt(this.cnv.style.borderTopWidth)||0),this.optns.y=n.top+(parseInt(this.cnv.style.borderLeftWidth)||0),this},u.start=function(e){if(o=this.optns.number,!e)return this.frame();if(this.interval)return this;this.isAnimated=e,this.recalculateOffset();var t=n[this.optns.number].optns;return this.cnv.onclick=function(e){A(e,"click",t)},this.cnv.ondblclick=function(e){A(e,"dblclick",t);var n=t.mousemove.val;t.mousemove.val=!0,setTimeout(function(){t.mousemove.val=n},3e3)},this.cnv.onmousedown=function(e){A(e,"mousedown",t)},this.cnv.onmouseup=function(e){A(e,"mouseup",t)},this.cnv.onkeyup=function(e){L(e,"keyUp",t)},this.cnv.onkeydown=function(e){L(e,"keyDown",t)},this.cnv.onkeypress=function(e){L(e,"keyPress",t)},this.cnv.onmouseout=this.cnv.onmousemove=function(e){A(e,"mousemove",t)},t.timeLast=new Date,C.frameInterval?console.info("jcFrame already run"):(console.info("start jcFrame"),C.frameInterval=ae()),this.isPaused=!1,this},u.pause=function(){return this.isPaused=!0,this.interval=0,this},u.restart=function(){return this.pause().start(!0)},u.del=function(){this.layers=[],n.splice(this.optns.number,1);for(var e=0;e<n.length;e++){var t=n[e],r=t.layers,a=r.length;t.optns.number=e;for(var i=0;i<a;i++){var s=r[i];s.optns.canvas.number=e,Q(s.objs,s.optns.id,s.optns.number,t.optns.id,t.optns.number),Q(s.grdntsnptrns,s.optns.id,s.optns.number,t.optns.id,t.optns.number)}}return this.cnv.parentNode&&this.cnv.parentNode.removeChild(this.cnv),o=0,!1},u.clear=function(){return this.isPause=!0,this.interval=0,this.layers=[],C.layer(this.optns.id+"Layer_0").canvas(this.optns.id),this.optns.ctx.clearRect(0,0,this.optns.width,this.optns.height),this.optns.redraw++,this},u.frame=function(e){var n=this.optns;if(e=e||new Date,n.timeDiff=e-n.timeLast,n.timeLast=e,!n.redraw)return this;if(n.redraw--,n.ctx.clearRect(0,0,n.width,n.height),0==this.layers.length)return this;if(a=this.layers.length,n.anyLayerLevelChanged&&(a=ee(this.layers)),n.anyLayerDeleted&&(a=te(this.layers)),n.anyLayerLevelChanged||n.anyLayerDeleted){n.anyLayerLevelChanged=n.anyLayerDeleted=!1;for(var i=0;i<a;i++){var o=this.layers[i],u=o.optns;Q(o.objs,u.id,u.number,this.optns.id,this.optns.number),Q(o.grdntsnptrns,u.id,u.number,r,this.optns.number)}}for(i=0;i<a;i++){var d=this.layers[i];"function"==typeof d.draw&&d.beforeDraw(n)&&"function"==typeof d.draw&&(d.draw(n),d.afterDraw(n))}var c=n.mousemove,f=n.mousedown,h=n.mouseup,p=this.optns.click,m=this.optns.dblclick;if(0!=c.x){if(0!=n.drag.object){var g=n.drag,v=g.object,y=!1;g.drag&&(y=g.drag.call(v,{x:c.x,y:c.y})),y||(v.translate(c.x-g.x,c.y-g.y),g.x=c.x,g.y=c.y)}var b=this.optns.point||{};if(b.event=c.event,0!=c.object){var w=c.object,x=Y(w);s===w?("function"==typeof w.onmousemove&&w.onmousemove(b),x===l?"function"==typeof x.onmousemove&&x.onmousemove(b):(l&&"function"==typeof l.onmouseout&&l.onmouseout(b),"function"==typeof x._onmouseover&&x._onmouseover(b),"function"==typeof x.onmouseover&&x.onmouseover(b),l=x)):(s&&("function"==typeof s._onmouseout&&s._onmouseout(b),"function"==typeof s.onmouseout&&s.onmouseout(b)),"function"==typeof w._onmouseover&&w._onmouseover(b),"function"==typeof w.onmouseover&&w.onmouseover(b),s=w)}else s&&("function"==typeof s._onmouseout&&s._onmouseout(b),"function"==typeof s.onmouseout&&s.onmouseout(b),s=!1),l&&("function"==typeof l.onmouseout&&l.onmouseout(b),l=!1);n.mousemove.object=!1}if(f.objects.length){var _=f.objects.length-1;e:for(i=_;i>-1;i--)for(var E,T=[f.objects[i],Y(f.objects[i])],j=0;j<2;j++){if(1==(E=T[j]).optns.drag.val&&0==E.optns.drag.disabled&&i==_){v=(g=n.drag).object=E.optns.drag.object.visible(!0),g.drag=E.optns.drag.drag,g.init=E;var S=g.init.optns;S.drag.params!==t&&v.animate(S.drag.params),g.x=g.startX=f.x,g.y=g.startY=f.y,v!=g.init&&"clone"!=S.drag.type&&(b=F(f.x,f.y,v.matrix()),v.translate(b.x-v._x,b.y-v._y)),v.translate(S.drag.shiftX,S.drag.shiftY),"function"==typeof S.drag.start&&S.drag.start.call(v,{x:f.x,y:f.y})}var C=!1;if("function"==typeof E._onmousedown&&!1===E._onmousedown({x:f.x,y:f.y,event:f.event})&&(C=!0),"function"==typeof E.onmousedown&&!1===E.onmousedown({x:f.x,y:f.y,event:f.event})&&(C=!0),C)break e}f.objects=[]}if(h.objects.length){e:for(i=h.objects.length-1;i>-1;i--){var O,P=[h.objects[i],Y(h.objects[i])];for(j=0;j<2;j++)if(ie(O=P[j],h,n)&&(p.objects=[]),C=!1,"function"==typeof O._onmouseup&&!1===O._onmouseup({x:h.x,y:h.y,event:h.event})&&(C=!0),"function"==typeof O.onmouseup&&!1===O.onmouseup({x:h.x,y:h.y,event:h.event})&&(C=!0),C)break e}this.optns.drag={object:!1,x:0,y:0},h.objects=[]}if(p.objects.length){e:for(i=p.objects.length-1;i>-1;i--){var I=[p.objects[i],Y(p.objects[i])];for(j=0;j<2;j++)if(ie(M=I[j],p,n),"function"==typeof M.onclick&&!1===M.onclick({x:p.x,y:p.y,event:p.event}))break e}this.optns.drag={object:!1,x:0,y:0},p.objects=[]}if(m.objects.length){e:for(i=m.objects.length-1;i>-1;i--){var M,D=[m.objects[i],Y(m.objects[i])];for(j=0;j<2;j++)if(ie(M=D[j],m,n),"function"==typeof D[j].ondblclick&&!1===D[j].ondblclick({x:m.x,y:m.y,event:m.event}))break e}m.objects=[]}return n.keyUp.val=n.keyDown.val=n.keyPress.val=p.x=m.x=h.x=f.x=c.x=!1,this},u},C.layer=function(e){if(e===t)return n[0].layers[0];for(var r=0;r<n.length;r++)for(var a=n[r].layers,i=0;i<a.length;i++)if(a[i].optns.id==e)return a[i];return function(e){return(new ne.layer).base(e)}(e)},"function"==typeof define&&define.amd&&define("jCanvaScript",[],function(){return C}),e.jCanvaScript=e.jc=C}(window,void 0),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.indexOf(e,t=t||0)===t}),String.prototype.format||(String.prototype.format=function(e){var t=this;if(arguments.length>0)if(1==arguments.length&&"object"==typeof e){for(var n in e)if(null!=e[n]){var r=new RegExp("({"+n+"})","g");t=t.replace(r,e[n])}}else for(var a=0;a<arguments.length;a++)null!=arguments[a]&&(r=new RegExp("({)"+a+"(})","g"),t=t.replace(r,arguments[a]));return t}),Math.round2||(Math.round2=function(e){return Math.round(100*e)/100}),CanvasRenderingContext2D.prototype.clear=CanvasRenderingContext2D.prototype.clear||function(e){e&&(this.save(),this.setTransform(1,0,0,1,0,0)),this.clearRect(0,0,this.canvas.width,this.canvas.height),e&&this.restore()},function(e,t){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&"object"==typeof module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e,t){e.fn.spResizable||(e.fn.spResizable=function(t){var n={handleSelector:null,resizeWidth:!0,resizeHeight:!0,resizeWidthFrom:"right",resizeHeightFrom:"bottom",onDragStart:null,onDragEnd:null,onDrag:null,onSpliterClick:null,touchActionNone:!0,instanceId:null,spliterWidth:8};return"object"==typeof t&&(n=e.extend(n,t)),this.each(function(){var r,a,i=e.extend({},n);i.instanceId||(i.instanceId="rsz_"+(new Date).getTime());var o,s=e(this);if("destroy"===t){if(!(i=s.data("spresizable")))return;return(o=f(i.handleSelector,s)).off("mousedown."+i.instanceId+" touchstart."+i.instanceId),i.touchActionNone&&o.css("touch-action",""),void s.removeClass("resizable")}function l(e){e.stopPropagation(),e.preventDefault()}function u(e){var t,n,a=c(e),o=a.x-r.x,l=a.y-r.y;t="left"===i.resizeWidthFrom?r.width-o:r.width+o,n="top"===i.resizeHeightFrom?r.height-l:r.height+l,i._deltaX=Math.abs(o),i._deltaY=Math.abs(l),i.onDrag&&!1===i.onDrag(e,s,t,n,i)||(i.resizeHeight&&s.height(n),i.resizeWidth&&s.width(t))}function d(t){return t.stopPropagation(),t.preventDefault(),e(document).off("mousemove."+i.instanceId),e(document).off("mouseup."+i.instanceId),(window.Touch||navigator.maxTouchPoints)&&(e(document).off("touchmove."+i.instanceId),e(document).off("touchend."+i.instanceId)),e(document).off("selectstart."+i.instanceId,l),s.css("transition",a),e("iframe").css("pointer-events","auto"),i.onDragEnd&&i.onDragEnd(t,s,i),!1}function c(e){var t={x:0,y:0,width:0,height:0};if("number"==typeof e.clientX)t.x=e.clientX,t.y=e.clientY;else{if(!e.originalEvent.touches)return null;t.x=e.originalEvent.touches[0].clientX,t.y=e.originalEvent.touches[0].clientY}return t}function f(e,t){return e&&">"===e.trim()[0]?(e=e.trim().replace(/^>\s*/,""),t.find(e)):e?t.parent().find(e):t}s.data("spresizable",i),o=f(i.handleSelector,s),i.touchActionNone&&o.css("touch-action","none"),s.addClass("resizable"),o.on("mousedown."+i.instanceId+" touchstart."+i.instanceId,function(t){t.preventDefault&&t.preventDefault(),i._deltaX=0,i._deltaY=0,(r=c(t)).width=parseInt(s.width(),10),r.height=parseInt(s.height(),10),a=s.css("transition"),s.css("transition","none"),i.onDragStart&&!1===i.onDragStart(t,s,i)||(e(document).on("mousemove."+i.instanceId,u),e(document).on("mouseup."+i.instanceId,d),(window.Touch||navigator.maxTouchPoints)&&(e(document).on("touchmove."+i.instanceId,u),e(document).on("touchend."+i.instanceId,d)),e(document).on("selectstart."+i.instanceId,l),e("iframe").css("pointer-events","none"))}),o.on("click",function(e){if(i._deltaX<=1&&i._deltaY<=1){if(i.resizeWidth){var t=s.outerWidth();t>0?(s.outerWidth(0),s._previousWidth=t):s.outerWidth(s._previousWidth)}else{var n=s.outerHeight(),r=s.parent().outerHeight();r-n>i.spliterWidth+1?(s.outerHeight(r-i.spliterWidth),s._previousHeight=n):s.outerHeight(s._previousHeight)}i.onSpliterClick&&i.onSpliterClick(e)}})})})}),function(e,t,n,r){"use strict";var a,i=["","webkit","Moz","MS","ms","o"],o=t.createElement("div"),s="function",l=Math.round,u=Math.abs,d=Date.now;function c(e,t,n){return setTimeout(y(e,n),t)}function f(e,t,n){return!!Array.isArray(e)&&(h(e,n[t],n),!0)}function h(e,t,n){var a;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==r)for(a=0;a<e.length;)t.call(n,e[a],a,e),a++;else for(a in e)e.hasOwnProperty(a)&&t.call(n,e[a],a,e)}function p(t,n,r){var a="DEPRECATED METHOD: "+n+"\n"+r+" AT \n";return function(){var n=new Error("get-stack-trace"),r=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=e.console&&(e.console.warn||e.console.log);return i&&i.call(e.console,a,r),t.apply(this,arguments)}}a="function"!=typeof Object.assign?function(e){if(e===r||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var a=arguments[n];if(a!==r&&null!==a)for(var i in a)a.hasOwnProperty(i)&&(t[i]=a[i])}return t}:Object.assign;var m=p(function(e,t,n){for(var a=Object.keys(t),i=0;i<a.length;)(!n||n&&e[a[i]]===r)&&(e[a[i]]=t[a[i]]),i++;return e},"extend","Use `assign`."),g=p(function(e,t){return m(e,t,!0)},"merge","Use `assign`.");function v(e,t,n){var r,i=t.prototype;(r=e.prototype=Object.create(i)).constructor=e,r._super=i,n&&a(r,n)}function y(e,t){return function(){return e.apply(t,arguments)}}function b(e,t){return typeof e==s?e.apply(t&&t[0]||r,t):e}function w(e,t){return e===r?t:e}function x(e,t,n){h(j(t),function(t){e.addEventListener(t,n,!1)})}function _(e,t,n){h(j(t),function(t){e.removeEventListener(t,n,!1)})}function E(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function T(e,t){return e.indexOf(t)>-1}function j(e){return e.trim().split(/\s+/g)}function S(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function C(e){return Array.prototype.slice.call(e,0)}function O(e,t,n){for(var r=[],a=[],i=0;i<e.length;){var o=t?e[i][t]:e[i];S(a,o)<0&&r.push(e[i]),a[i]=o,i++}return n&&(r=t?r.sort(function(e,n){return e[t]>n[t]}):r.sort()),r}function P(e,t){for(var n,a,o=t[0].toUpperCase()+t.slice(1),s=0;s<i.length;){if((a=(n=i[s])?n+o:t)in e)return a;s++}return r}var I=1;function M(t){var n=t.ownerDocument||t;return n.defaultView||n.parentWindow||e}var D="ontouchstart"in e,L=P(e,"PointerEvent")!==r,A=D&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),k=25,R=1,U=4,N=8,B=1,H=2,F=4,V=8,z=16,W=H|F,q=V|z,G=W|q,Y=["x","y"],$=["clientX","clientY"];function X(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){b(e.options.enable,[e])&&n.handler(t)},this.init()}function Z(e,t,n){var a=n.pointers.length,i=n.changedPointers.length,o=t&R&&a-i==0,s=t&(U|N)&&a-i==0;n.isFirst=!!o,n.isFinal=!!s,o&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,a=t.pointers,i=a.length;n.firstInput||(n.firstInput=K(t)),i>1&&!n.firstMultiple?n.firstMultiple=K(t):1===i&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,l=s?s.center:o.center,c=t.center=J(a);t.timeStamp=d(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=ne(l,c),t.distance=te(l,c),function(e,t){var n=t.center,r=e.offsetDelta||{},a=e.prevDelta||{},i=e.prevInput||{};t.eventType!==R&&i.eventType!==U||(a=e.prevDelta={x:i.deltaX||0,y:i.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=a.x+(n.x-r.x),t.deltaY=a.y+(n.y-r.y)}(n,t),t.offsetDirection=ee(t.deltaX,t.deltaY);var f,h,p=Q(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=p.x,t.overallVelocityY=p.y,t.overallVelocity=u(p.x)>u(p.y)?p.x:p.y,t.scale=s?(f=s.pointers,te((h=a)[0],h[1],$)/te(f[0],f[1],$)):1,t.rotation=s?function(e,t){return ne(a[1],a[0],$)+ne(e[1],e[0],$)}(s.pointers):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,a,i,o,s=e.lastInterval||t,l=t.timeStamp-s.timeStamp;if(t.eventType!=N&&(l>k||s.velocity===r)){var d=t.deltaX-s.deltaX,c=t.deltaY-s.deltaY,f=Q(l,d,c);a=f.x,i=f.y,n=u(f.x)>u(f.y)?f.x:f.y,o=ee(d,c),e.lastInterval=t}else n=s.velocity,a=s.velocityX,i=s.velocityY,o=s.direction;t.velocity=n,t.velocityX=a,t.velocityY=i,t.direction=o}(n,t);var m=e.element;E(t.srcEvent.target,m)&&(m=t.srcEvent.target),t.target=m}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function K(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:l(e.pointers[n].clientX),clientY:l(e.pointers[n].clientY)},n++;return{timeStamp:d(),pointers:t,center:J(t),deltaX:e.deltaX,deltaY:e.deltaY}}function J(e){var t=e.length;if(1===t)return{x:l(e[0].clientX),y:l(e[0].clientY)};for(var n=0,r=0,a=0;a<t;)n+=e[a].clientX,r+=e[a].clientY,a++;return{x:l(n/t),y:l(r/t)}}function Q(e,t,n){return{x:t/e||0,y:n/e||0}}function ee(e,t){return e===t?B:u(e)>=u(t)?e<0?H:F:t<0?V:z}function te(e,t,n){n||(n=Y);var r=t[n[0]]-e[n[0]],a=t[n[1]]-e[n[1]];return Math.sqrt(r*r+a*a)}function ne(e,t,n){return n||(n=Y),180*Math.atan2(t[n[1]]-e[n[1]],t[n[0]]-e[n[0]])/Math.PI}X.prototype={handler:function(){},init:function(){this.evEl&&x(this.element,this.evEl,this.domHandler),this.evTarget&&x(this.target,this.evTarget,this.domHandler),this.evWin&&x(M(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&_(this.element,this.evEl,this.domHandler),this.evTarget&&_(this.target,this.evTarget,this.domHandler),this.evWin&&_(M(this.element),this.evWin,this.domHandler)}};var re={mousedown:R,mousemove:2,mouseup:U},ae="mousedown",ie="mousemove mouseup";function oe(){this.evEl=ae,this.evWin=ie,this.pressed=!1,X.apply(this,arguments)}v(oe,X,{handler:function(e){var t=re[e.type];t&R&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=U),this.pressed&&(t&U&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var se={pointerdown:R,pointermove:2,pointerup:U,pointercancel:N,pointerout:N},le={2:"touch",3:"pen",4:"mouse",5:"kinect"},ue="pointerdown",de="pointermove pointerup pointercancel";function ce(){this.evEl=ue,this.evWin=de,X.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}e.MSPointerEvent&&!e.PointerEvent&&(ue="MSPointerDown",de="MSPointerMove MSPointerUp MSPointerCancel"),v(ce,X,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),a=se[r],i=le[e.pointerType]||e.pointerType,o="touch"==i,s=S(t,e.pointerId,"pointerId");a&R&&(0===e.button||o)?s<0&&(t.push(e),s=t.length-1):a&(U|N)&&(n=!0),s<0||(t[s]=e,this.callback(this.manager,a,{pointers:t,changedPointers:[e],pointerType:i,srcEvent:e}),n&&t.splice(s,1))}});var fe={touchstart:R,touchmove:2,touchend:U,touchcancel:N},he="touchstart",pe="touchstart touchmove touchend touchcancel";function me(){this.evTarget=he,this.evWin=pe,this.started=!1,X.apply(this,arguments)}v(me,X,{handler:function(e){var t=fe[e.type];if(t===R&&(this.started=!0),this.started){var n=(function(e,t){var n=C(e.touches),r=C(e.changedTouches);return t&(U|N)&&(n=O(n.concat(r),"identifier",!0)),[n,r]}).call(this,e,t);t&(U|N)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}}});var ge={touchstart:R,touchmove:2,touchend:U,touchcancel:N},ve="touchstart touchmove touchend touchcancel";function ye(){this.evTarget=ve,this.targetIds={},X.apply(this,arguments)}v(ye,X,{handler:function(e){var t=ge[e.type],n=(function(e,t){var n=C(e.touches),r=this.targetIds;if(t&(2|R)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var a,i,o=C(e.changedTouches),s=[],l=this.target;if(i=n.filter(function(e){return E(e.target,l)}),t===R)for(a=0;a<i.length;)r[i[a].identifier]=!0,a++;for(a=0;a<o.length;)r[o[a].identifier]&&s.push(o[a]),t&(U|N)&&delete r[o[a].identifier],a++;return s.length?[O(i.concat(s),"identifier",!0),s]:void 0}).call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}});var be=2500;function we(){X.apply(this,arguments);var e=y(this.handler,this);this.touch=new ye(this.manager,e),this.mouse=new oe(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function xe(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout(function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)},be)}}v(we,X,{handler:function(e,t,n){var r="mouse"==n.pointerType;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if("touch"==n.pointerType)(function(e,t){e&R?(this.primaryTouch=t.changedPointers[0].identifier,xe.call(this,t)):e&(U|N)&&xe.call(this,t)}).call(this,t,n);else if(r&&(function(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var a=this.lastTouches[r],i=Math.abs(t-a.x),o=Math.abs(n-a.y);if(i<=25&&o<=25)return!0}return!1}).call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var _e=P(o.style,"touchAction"),Ee=_e!==r,Te=function(){if(!Ee)return!1;var t={},n=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){t[r]=!n||e.CSS.supports("touch-action",r)}),t}();function je(e,t){this.manager=e,this.set(t)}je.prototype={set:function(e){"compute"==e&&(e=this.compute()),Ee&&this.manager.element.style&&Te[e]&&(this.manager.element.style[_e]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return h(this.manager.recognizers,function(t){b(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),function(e){if(T(e,"none"))return"none";var t=T(e,"pan-x"),n=T(e,"pan-y");return t&&n?"none":t||n?t?"pan-x":"pan-y":T(e,"manipulation")?"manipulation":"auto"}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var r=this.actions,a=T(r,"none")&&!Te.none,i=T(r,"pan-y")&&!Te["pan-y"],o=T(r,"pan-x")&&!Te["pan-x"];if(a&&1===e.pointers.length&&e.distance<2&&e.deltaTime<250)return;if(!o||!i)return a||i&&n&W||o&&n&q?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Se=1,Ce=2,Oe=4,Pe=8,Ie=Pe,Me=16;function De(e){this.options=a({},this.defaults,e||{}),this.id=I++,this.manager=null,this.options.enable=w(this.options.enable,!0),this.state=Se,this.simultaneous={},this.requireFail=[]}function Le(e){return e&Me?"cancel":e&Pe?"end":e&Oe?"move":e&Ce?"start":""}function Ae(e){return e==z?"down":e==V?"up":e==H?"left":e==F?"right":""}function ke(e,t){var n=t.manager;return n?n.get(e):e}function Re(){De.apply(this,arguments)}function Ue(){Re.apply(this,arguments),this.pX=null,this.pY=null}function Ne(){Re.apply(this,arguments)}function Be(){De.apply(this,arguments),this._timer=null,this._input=null}function He(){Re.apply(this,arguments)}function Fe(){Re.apply(this,arguments)}function Ve(){De.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ze(e,t){return(t=t||{}).recognizers=w(t.recognizers,ze.defaults.preset),new We(e,t)}function We(e,t){var n;this.options=a({},ze.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((n=this).options.inputClass||(L?ce:A?ye:D?we:oe))(n,Z),this.touchAction=new je(this,this.options.touchAction),qe(this,!0),h(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function qe(e,t){var n,r=e.element;r.style&&(h(e.options.cssProps,function(a,i){n=P(r.style,i),t?(e.oldCssProps[n]=r.style[n],r.style[n]=a):r.style[n]=e.oldCssProps[n]||""}),t||(e.oldCssProps={}))}De.prototype={defaults:{},set:function(e){return a(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(f(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=ke(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return f(e,"dropRecognizeWith",this)?this:(e=ke(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(f(e,"requireFailure",this))return this;var t=this.requireFail;return-1===S(t,e=ke(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(f(e,"dropRequireFailure",this))return this;e=ke(e,this);var t=S(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function r(n){t.manager.emit(n,e)}n<Pe&&r(t.options.event+Le(n)),r(t.options.event),e.additionalEvent&&r(e.additionalEvent),n>=Pe&&r(t.options.event+Le(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|Se)))return!1;e++}return!0},recognize:function(e){var t=a({},e);if(!b(this.options.enable,[this,t]))return this.reset(),void(this.state=32);this.state&(Ie|Me|32)&&(this.state=Se),this.state=this.process(t),this.state&(Ce|Oe|Pe|Me)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},v(Re,De,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=t&(Ce|Oe),a=this.attrTest(e);return r&&(n&N||!a)?t|Me:r||a?n&U?t|Pe:t&Ce?t|Oe:Ce:32}}),v(Ue,Re,{defaults:{event:"pan",threshold:10,pointers:1,direction:G},getTouchAction:function(){var e=this.options.direction,t=[];return e&W&&t.push("pan-y"),e&q&&t.push("pan-x"),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,a=e.direction,i=e.deltaX,o=e.deltaY;return a&t.direction||(t.direction&W?(a=0===i?B:i<0?H:F,n=i!=this.pX,r=Math.abs(e.deltaX)):(a=0===o?B:o<0?V:z,n=o!=this.pY,r=Math.abs(e.deltaY))),e.direction=a,n&&r>t.threshold&&a&t.direction},attrTest:function(e){return Re.prototype.attrTest.call(this,e)&&(this.state&Ce||!(this.state&Ce)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Ae(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),v(Ne,Re,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&Ce)},emit:function(e){1!==e.scale&&(e.additionalEvent=this.options.event+(e.scale<1?"in":"out")),this._super.emit.call(this,e)}}),v(Be,De,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,a=e.deltaTime>t.time;if(this._input=e,!r||!n||e.eventType&(U|N)&&!a)this.reset();else if(e.eventType&R)this.reset(),this._timer=c(function(){this.state=Ie,this.tryEmit()},t.time,this);else if(e.eventType&U)return Ie;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===Ie&&(e&&e.eventType&U?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))}}),v(He,Re,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&Ce)}}),v(Fe,Re,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:W|q,pointers:1},getTouchAction:function(){return Ue.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(W|q)?t=e.overallVelocity:n&W?t=e.overallVelocityX:n&q&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&u(t)>this.options.velocity&&e.eventType&U},emit:function(e){var t=Ae(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),v(Ve,De,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,a=e.deltaTime<t.time;if(this.reset(),e.eventType&R&&0===this.count)return this.failTimeout();if(r&&a&&n){if(e.eventType!=U)return this.failTimeout();var i=!this.pTime||e.timeStamp-this.pTime<t.interval,o=!this.pCenter||te(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,o&&i?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=c(function(){this.state=Ie,this.tryEmit()},t.interval,this),Ce):Ie}return 32},failTimeout:function(){return this._timer=c(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ie&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ze.VERSION="2.0.7",ze.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[He,{enable:!1}],[Ne,{enable:!1},["rotate"]],[Fe,{direction:W}],[Ue,{direction:W},["swipe"]],[Ve],[Ve,{event:"doubletap",taps:2},["tap"]],[Be]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},We.prototype={set:function(e){return a(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var r=this.recognizers,a=t.curRecognizer;(!a||a&&a.state&Ie)&&(a=t.curRecognizer=null);for(var i=0;i<r.length;)n=r[i],2===t.stopped||a&&n!=a&&!n.canRecognizeWith(a)?n.reset():n.recognize(e),!a&&n.state&(Ce|Oe|Pe)&&(a=t.curRecognizer=n),i++}},get:function(e){if(e instanceof De)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(f(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(f(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=S(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==r&&t!==r){var n=this.handlers;return h(j(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==r){var n=this.handlers;return h(j(e),function(e){t?n[e]&&n[e].splice(S(n[e],t),1):delete n[e]}),this}},emit:function(e,n){this.options.domEvents&&function(e,n){var r=t.createEvent("Event");r.initEvent(e,!0,!0),r.gesture=n,n.target.dispatchEvent(r)}(e,n);var r=this.handlers[e]&&this.handlers[e].slice();if(r&&r.length){n.type=e,n.preventDefault=function(){n.srcEvent.preventDefault()};for(var a=0;a<r.length;)r[a](n),a++}},destroy:function(){this.element&&qe(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},a(ze,{INPUT_START:R,INPUT_MOVE:2,INPUT_END:U,INPUT_CANCEL:N,STATE_POSSIBLE:Se,STATE_BEGAN:Ce,STATE_CHANGED:Oe,STATE_ENDED:Pe,STATE_RECOGNIZED:Ie,STATE_CANCELLED:Me,STATE_FAILED:32,DIRECTION_NONE:B,DIRECTION_LEFT:H,DIRECTION_RIGHT:F,DIRECTION_UP:V,DIRECTION_DOWN:z,DIRECTION_HORIZONTAL:W,DIRECTION_VERTICAL:q,DIRECTION_ALL:G,Manager:We,Input:X,TouchAction:je,TouchInput:ye,MouseInput:oe,PointerEventInput:ce,TouchMouseInput:we,SingleTouchInput:me,Recognizer:De,AttrRecognizer:Re,Tap:Ve,Pan:Ue,Swipe:Fe,Pinch:Ne,Rotate:He,Press:Be,on:x,off:_,each:h,merge:g,extend:m,assign:a,inherit:v,bindFn:y,prefixed:P}),(void 0!==e?e:"undefined"!=typeof self?self:{}).Hammer=ze,"function"==typeof define&&define.amd?define(function(){return ze}):"undefined"!=typeof module&&module.exports?module.exports=ze:e.Hammer=ze}(window,document),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("cornerstone-core",[],t):"object"==typeof exports?exports["cornerstone-core"]=t():e.cornerstone=t()}(window,function(){return function(e){var t=window.webpackHotUpdate;window.webpackHotUpdate=function(e,n){!function(e,t){if(x[e]&&w[e]){for(var n in w[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(m[n]=t[n]);0==--v&&0===y&&j()}}(e,n),t&&t(e,n)};var n,r=!0,a="3f441cf24e13e25f005c",i=1e4,o={},s=[],l=[];function u(e){var t=C[e];if(!t)return O;var r=function(r){return t.hot.active?(C[r]?-1===C[r].parents.indexOf(e)&&C[r].parents.push(e):(s=[e],n=r),-1===t.children.indexOf(r)&&t.children.push(r)):(console.warn("[HMR] unexpected require("+r+") from disposed module "+e),s=[]),O(r)},a=function(e){return{configurable:!0,enumerable:!0,get:function(){return O[e]},set:function(t){O[e]=t}}};for(var i in O)Object.prototype.hasOwnProperty.call(O,i)&&"e"!==i&&"t"!==i&&Object.defineProperty(r,i,a(i));return r.e=function(e){return"ready"===f&&h("prepare"),y++,O.e(e).then(t,function(e){throw t(),e});function t(){y--,"prepare"===f&&(b[e]||T(e),0===y&&0===v&&j())}},r.t=function(e,t){return 1&t&&(e=r(e)),O.t(e,-2&t)},r}function d(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:n!==e,active:!0,accept:function(e,n){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._acceptedDependencies[e[r]]=n||function(){};else t._acceptedDependencies[e]=n||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:E,apply:S,status:function(e){if(!e)return f;c.push(e)},addStatusHandler:function(e){c.push(e)},removeStatusHandler:function(e){var t=c.indexOf(e);t>=0&&c.splice(t,1)},data:o[e]};return n=void 0,t}var c=[],f="idle";function h(e){f=e;for(var t=0;t<c.length;t++)c[t].call(null,e)}var p,m,g,v=0,y=0,b={},w={},x={};function _(e){return+e+""===e?+e:e}function E(e){if("idle"!==f)throw new Error("check() is only allowed in idle status");return r=e,h("check"),(t=i,t=t||1e4,new Promise(function(e,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var r=new XMLHttpRequest,i=O.p+""+a+".hot-update.json";r.open("GET",i,!0),r.timeout=t,r.send(null)}catch(o){return n(o)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)n(new Error("Manifest request to "+i+" timed out."));else if(404===r.status)e();else if(200!==r.status&&304!==r.status)n(new Error("Manifest request to "+i+" failed."));else{try{var t=JSON.parse(r.responseText)}catch(a){return void n(a)}e(t)}}})).then(function(e){if(!e)return h("idle"),null;w={},b={},x=e.c,g=e.h,h("prepare");var t=new Promise(function(e,t){p={resolve:e,reject:t}});return m={},T("cornerstone"),"prepare"===f&&0===y&&0===v&&j(),t});var t}function T(e){x[e]?(w[e]=!0,v++,function(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("script");n.charset="utf-8",n.src=O.p+""+e+"."+a+".hot-update.js",t.appendChild(n)}(e)):b[e]=!0}function j(){h("ready");var e=p;if(p=null,e)if(r)Promise.resolve().then(function(){return S(r)}).then(function(t){e.resolve(t)},function(t){e.reject(t)});else{var t=[];for(var n in m)Object.prototype.hasOwnProperty.call(m,n)&&t.push(_(n));e.resolve(t)}}function S(t){if("ready"!==f)throw new Error("apply() is only allowed in ready status");var n,r,i,l,u;function d(e){for(var t=[e],n={},r=t.slice().map(function(e){return{chain:[e],id:e}});r.length>0;){var a=r.pop(),i=a.id,o=a.chain;if((l=C[i])&&!l.hot._selfAccepted){if(l.hot._selfDeclined)return{type:"self-declined",chain:o,moduleId:i};if(l.hot._main)return{type:"unaccepted",chain:o,moduleId:i};for(var s=0;s<l.parents.length;s++){var u=l.parents[s],d=C[u];if(d){if(d.hot._declinedDependencies[i])return{type:"declined",chain:o.concat([u]),moduleId:i,parentId:u};-1===t.indexOf(u)&&(d.hot._acceptedDependencies[i]?(n[u]||(n[u]=[]),c(n[u],[i])):(delete n[u],t.push(u),r.push({chain:o.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}t=t||{};var p={},v=[],y={},b=function(){console.warn("[HMR] unexpected require("+E.moduleId+") to disposed module")};for(var w in m)if(Object.prototype.hasOwnProperty.call(m,w)){var E;u=_(w);var T=!1,j=!1,S=!1,P="";switch((E=m[w]?d(u):{type:"disposed",moduleId:w}).chain&&(P="\nUpdate propagation: "+E.chain.join(" -> ")),E.type){case"self-declined":t.onDeclined&&t.onDeclined(E),t.ignoreDeclined||(T=new Error("Aborted because of self decline: "+E.moduleId+P));break;case"declined":t.onDeclined&&t.onDeclined(E),t.ignoreDeclined||(T=new Error("Aborted because of declined dependency: "+E.moduleId+" in "+E.parentId+P));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(E),t.ignoreUnaccepted||(T=new Error("Aborted because "+u+" is not accepted"+P));break;case"accepted":t.onAccepted&&t.onAccepted(E),j=!0;break;case"disposed":t.onDisposed&&t.onDisposed(E),S=!0;break;default:throw new Error("Unexception type "+E.type)}if(T)return h("abort"),Promise.reject(T);if(j)for(u in y[u]=m[u],c(v,E.outdatedModules),E.outdatedDependencies)Object.prototype.hasOwnProperty.call(E.outdatedDependencies,u)&&(p[u]||(p[u]=[]),c(p[u],E.outdatedDependencies[u]));S&&(c(v,[E.moduleId]),y[u]=b)}var I,M=[];for(r=0;r<v.length;r++)C[u=v[r]]&&C[u].hot._selfAccepted&&M.push({module:u,errorHandler:C[u].hot._selfAccepted});h("dispose"),Object.keys(x).forEach(function(e){!1===x[e]&&function(e){delete installedChunks[e]}(e)});for(var D,L=v.slice();L.length>0;)if(u=L.pop(),l=C[u]){var A={},k=l.hot._disposeHandlers;for(i=0;i<k.length;i++)(n=k[i])(A);for(o[u]=A,l.hot.active=!1,delete C[u],delete p[u],i=0;i<l.children.length;i++){var R=C[l.children[i]];R&&(I=R.parents.indexOf(u))>=0&&R.parents.splice(I,1)}}for(u in p)if(Object.prototype.hasOwnProperty.call(p,u)&&(l=C[u]))for(D=p[u],i=0;i<D.length;i++)(I=l.children.indexOf(D[i]))>=0&&l.children.splice(I,1);for(u in h("apply"),a=g,y)Object.prototype.hasOwnProperty.call(y,u)&&(e[u]=y[u]);var U=null;for(u in p)if(Object.prototype.hasOwnProperty.call(p,u)&&(l=C[u])){D=p[u];var N=[];for(r=0;r<D.length;r++)if(n=l.hot._acceptedDependencies[D[r]]){if(-1!==N.indexOf(n))continue;N.push(n)}for(r=0;r<N.length;r++){n=N[r];try{n(D)}catch(H){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:u,dependencyId:D[r],error:H}),t.ignoreErrored||U||(U=H)}}}for(r=0;r<M.length;r++){var B=M[r];s=[u=B.module];try{O(u)}catch(H){if("function"==typeof B.errorHandler)try{B.errorHandler(H)}catch(F){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:u,error:F,originalError:H}),t.ignoreErrored||U||(U=F),U||(U=H)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:u,error:H}),t.ignoreErrored||U||(U=H)}}return U?(h("fail"),Promise.reject(U)):(h("idle"),new Promise(function(e){e(v)}))}var C={};function O(t){if(C[t])return C[t].exports;var n=C[t]={i:t,l:!1,exports:{},hot:d(t),parents:(l=s,s=[],l),children:[]};return e[t].call(n.exports,n,n.exports,u(t)),n.l=!0,n.exports}return O.m=e,O.c=C,O.d=function(e,t,n){O.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},O.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},O.t=function(e,t){if(1&t&&(e=O(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(O.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)O.d(n,r,(function(t){return e[t]}).bind(null,r));return n},O.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return O.d(t,"a",t),t},O.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},O.p="",O.h=function(){return a},u("./index.js")(O.s="./index.js")}({"./canvasToPixel.js":function(e,t,n){"use strict";n.r(t);var r=n("./enabledElements.js"),a=n("./internal/getTransform.js");t.default=function(e,t){var n=Object(r.getEnabledElement)(e),i=Object(a.default)(n);return i.invert(),i.transformPoint(t.x,t.y)}},"./colors/colormap.js":function(e,t,n){"use strict";n.r(t),n.d(t,"getColormapsList",function(){return l}),n.d(t,"getColormap",function(){return u});var r=n("./colors/lookupTable.js"),a=[0,0,0,0],i={hotIron:{name:"Hot Iron",numOfColors:256,colors:[[0,0,0,255],[2,0,0,255],[4,0,0,255],[6,0,0,255],[8,0,0,255],[10,0,0,255],[12,0,0,255],[14,0,0,255],[16,0,0,255],[18,0,0,255],[20,0,0,255],[22,0,0,255],[24,0,0,255],[26,0,0,255],[28,0,0,255],[30,0,0,255],[32,0,0,255],[34,0,0,255],[36,0,0,255],[38,0,0,255],[40,0,0,255],[42,0,0,255],[44,0,0,255],[46,0,0,255],[48,0,0,255],[50,0,0,255],[52,0,0,255],[54,0,0,255],[56,0,0,255],[58,0,0,255],[60,0,0,255],[62,0,0,255],[64,0,0,255],[66,0,0,255],[68,0,0,255],[70,0,0,255],[72,0,0,255],[74,0,0,255],[76,0,0,255],[78,0,0,255],[80,0,0,255],[82,0,0,255],[84,0,0,255],[86,0,0,255],[88,0,0,255],[90,0,0,255],[92,0,0,255],[94,0,0,255],[96,0,0,255],[98,0,0,255],[100,0,0,255],[102,0,0,255],[104,0,0,255],[106,0,0,255],[108,0,0,255],[110,0,0,255],[112,0,0,255],[114,0,0,255],[116,0,0,255],[118,0,0,255],[120,0,0,255],[122,0,0,255],[124,0,0,255],[126,0,0,255],[128,0,0,255],[130,0,0,255],[132,0,0,255],[134,0,0,255],[136,0,0,255],[138,0,0,255],[140,0,0,255],[142,0,0,255],[144,0,0,255],[146,0,0,255],[148,0,0,255],[150,0,0,255],[152,0,0,255],[154,0,0,255],[156,0,0,255],[158,0,0,255],[160,0,0,255],[162,0,0,255],[164,0,0,255],[166,0,0,255],[168,0,0,255],[170,0,0,255],[172,0,0,255],[174,0,0,255],[176,0,0,255],[178,0,0,255],[180,0,0,255],[182,0,0,255],[184,0,0,255],[186,0,0,255],[188,0,0,255],[190,0,0,255],[192,0,0,255],[194,0,0,255],[196,0,0,255],[198,0,0,255],[200,0,0,255],[202,0,0,255],[204,0,0,255],[206,0,0,255],[208,0,0,255],[210,0,0,255],[212,0,0,255],[214,0,0,255],[216,0,0,255],[218,0,0,255],[220,0,0,255],[222,0,0,255],[224,0,0,255],[226,0,0,255],[228,0,0,255],[230,0,0,255],[232,0,0,255],[234,0,0,255],[236,0,0,255],[238,0,0,255],[240,0,0,255],[242,0,0,255],[244,0,0,255],[246,0,0,255],[248,0,0,255],[250,0,0,255],[252,0,0,255],[254,0,0,255],[255,0,0,255],[255,2,0,255],[255,4,0,255],[255,6,0,255],[255,8,0,255],[255,10,0,255],[255,12,0,255],[255,14,0,255],[255,16,0,255],[255,18,0,255],[255,20,0,255],[255,22,0,255],[255,24,0,255],[255,26,0,255],[255,28,0,255],[255,30,0,255],[255,32,0,255],[255,34,0,255],[255,36,0,255],[255,38,0,255],[255,40,0,255],[255,42,0,255],[255,44,0,255],[255,46,0,255],[255,48,0,255],[255,50,0,255],[255,52,0,255],[255,54,0,255],[255,56,0,255],[255,58,0,255],[255,60,0,255],[255,62,0,255],[255,64,0,255],[255,66,0,255],[255,68,0,255],[255,70,0,255],[255,72,0,255],[255,74,0,255],[255,76,0,255],[255,78,0,255],[255,80,0,255],[255,82,0,255],[255,84,0,255],[255,86,0,255],[255,88,0,255],[255,90,0,255],[255,92,0,255],[255,94,0,255],[255,96,0,255],[255,98,0,255],[255,100,0,255],[255,102,0,255],[255,104,0,255],[255,106,0,255],[255,108,0,255],[255,110,0,255],[255,112,0,255],[255,114,0,255],[255,116,0,255],[255,118,0,255],[255,120,0,255],[255,122,0,255],[255,124,0,255],[255,126,0,255],[255,128,4,255],[255,130,8,255],[255,132,12,255],[255,134,16,255],[255,136,20,255],[255,138,24,255],[255,140,28,255],[255,142,32,255],[255,144,36,255],[255,146,40,255],[255,148,44,255],[255,150,48,255],[255,152,52,255],[255,154,56,255],[255,156,60,255],[255,158,64,255],[255,160,68,255],[255,162,72,255],[255,164,76,255],[255,166,80,255],[255,168,84,255],[255,170,88,255],[255,172,92,255],[255,174,96,255],[255,176,100,255],[255,178,104,255],[255,180,108,255],[255,182,112,255],[255,184,116,255],[255,186,120,255],[255,188,124,255],[255,190,128,255],[255,192,132,255],[255,194,136,255],[255,196,140,255],[255,198,144,255],[255,200,148,255],[255,202,152,255],[255,204,156,255],[255,206,160,255],[255,208,164,255],[255,210,168,255],[255,212,172,255],[255,214,176,255],[255,216,180,255],[255,218,184,255],[255,220,188,255],[255,222,192,255],[255,224,196,255],[255,226,200,255],[255,228,204,255],[255,230,208,255],[255,232,212,255],[255,234,216,255],[255,236,220,255],[255,238,224,255],[255,240,228,255],[255,242,232,255],[255,244,236,255],[255,246,240,255],[255,248,244,255],[255,250,248,255],[255,252,252,255],[255,255,255,255]]},pet:{name:"PET",numColors:256,colors:[[0,0,0,255],[0,2,1,255],[0,4,3,255],[0,6,5,255],[0,8,7,255],[0,10,9,255],[0,12,11,255],[0,14,13,255],[0,16,15,255],[0,18,17,255],[0,20,19,255],[0,22,21,255],[0,24,23,255],[0,26,25,255],[0,28,27,255],[0,30,29,255],[0,32,31,255],[0,34,33,255],[0,36,35,255],[0,38,37,255],[0,40,39,255],[0,42,41,255],[0,44,43,255],[0,46,45,255],[0,48,47,255],[0,50,49,255],[0,52,51,255],[0,54,53,255],[0,56,55,255],[0,58,57,255],[0,60,59,255],[0,62,61,255],[0,65,63,255],[0,67,65,255],[0,69,67,255],[0,71,69,255],[0,73,71,255],[0,75,73,255],[0,77,75,255],[0,79,77,255],[0,81,79,255],[0,83,81,255],[0,85,83,255],[0,87,85,255],[0,89,87,255],[0,91,89,255],[0,93,91,255],[0,95,93,255],[0,97,95,255],[0,99,97,255],[0,101,99,255],[0,103,101,255],[0,105,103,255],[0,107,105,255],[0,109,107,255],[0,111,109,255],[0,113,111,255],[0,115,113,255],[0,117,115,255],[0,119,117,255],[0,121,119,255],[0,123,121,255],[0,125,123,255],[0,128,125,255],[1,126,127,255],[3,124,129,255],[5,122,131,255],[7,120,133,255],[9,118,135,255],[11,116,137,255],[13,114,139,255],[15,112,141,255],[17,110,143,255],[19,108,145,255],[21,106,147,255],[23,104,149,255],[25,102,151,255],[27,100,153,255],[29,98,155,255],[31,96,157,255],[33,94,159,255],[35,92,161,255],[37,90,163,255],[39,88,165,255],[41,86,167,255],[43,84,169,255],[45,82,171,255],[47,80,173,255],[49,78,175,255],[51,76,177,255],[53,74,179,255],[55,72,181,255],[57,70,183,255],[59,68,185,255],[61,66,187,255],[63,64,189,255],[65,63,191,255],[67,61,193,255],[69,59,195,255],[71,57,197,255],[73,55,199,255],[75,53,201,255],[77,51,203,255],[79,49,205,255],[81,47,207,255],[83,45,209,255],[85,43,211,255],[86,41,213,255],[88,39,215,255],[90,37,217,255],[92,35,219,255],[94,33,221,255],[96,31,223,255],[98,29,225,255],[100,27,227,255],[102,25,229,255],[104,23,231,255],[106,21,233,255],[108,19,235,255],[110,17,237,255],[112,15,239,255],[114,13,241,255],[116,11,243,255],[118,9,245,255],[120,7,247,255],[122,5,249,255],[124,3,251,255],[126,1,253,255],[128,0,255,255],[130,2,252,255],[132,4,248,255],[134,6,244,255],[136,8,240,255],[138,10,236,255],[140,12,232,255],[142,14,228,255],[144,16,224,255],[146,18,220,255],[148,20,216,255],[150,22,212,255],[152,24,208,255],[154,26,204,255],[156,28,200,255],[158,30,196,255],[160,32,192,255],[162,34,188,255],[164,36,184,255],[166,38,180,255],[168,40,176,255],[170,42,172,255],[171,44,168,255],[173,46,164,255],[175,48,160,255],[177,50,156,255],[179,52,152,255],[181,54,148,255],[183,56,144,255],[185,58,140,255],[187,60,136,255],[189,62,132,255],[191,64,128,255],[193,66,124,255],[195,68,120,255],[197,70,116,255],[199,72,112,255],[201,74,108,255],[203,76,104,255],[205,78,100,255],[207,80,96,255],[209,82,92,255],[211,84,88,255],[213,86,84,255],[215,88,80,255],[217,90,76,255],[219,92,72,255],[221,94,68,255],[223,96,64,255],[225,98,60,255],[227,100,56,255],[229,102,52,255],[231,104,48,255],[233,106,44,255],[235,108,40,255],[237,110,36,255],[239,112,32,255],[241,114,28,255],[243,116,24,255],[245,118,20,255],[247,120,16,255],[249,122,12,255],[251,124,8,255],[253,126,4,255],[255,128,0,255],[255,130,4,255],[255,132,8,255],[255,134,12,255],[255,136,16,255],[255,138,20,255],[255,140,24,255],[255,142,28,255],[255,144,32,255],[255,146,36,255],[255,148,40,255],[255,150,44,255],[255,152,48,255],[255,154,52,255],[255,156,56,255],[255,158,60,255],[255,160,64,255],[255,162,68,255],[255,164,72,255],[255,166,76,255],[255,168,80,255],[255,170,85,255],[255,172,89,255],[255,174,93,255],[255,176,97,255],[255,178,101,255],[255,180,105,255],[255,182,109,255],[255,184,113,255],[255,186,117,255],[255,188,121,255],[255,190,125,255],[255,192,129,255],[255,194,133,255],[255,196,137,255],[255,198,141,255],[255,200,145,255],[255,202,149,255],[255,204,153,255],[255,206,157,255],[255,208,161,255],[255,210,165,255],[255,212,170,255],[255,214,174,255],[255,216,178,255],[255,218,182,255],[255,220,186,255],[255,222,190,255],[255,224,194,255],[255,226,198,255],[255,228,202,255],[255,230,206,255],[255,232,210,255],[255,234,214,255],[255,236,218,255],[255,238,222,255],[255,240,226,255],[255,242,230,255],[255,244,234,255],[255,246,238,255],[255,248,242,255],[255,250,246,255],[255,252,250,255],[255,255,255,255]]},hotMetalBlue:{name:"Hot Metal Blue",numColors:256,colors:[[0,0,0,255],[0,0,2,255],[0,0,4,255],[0,0,6,255],[0,0,8,255],[0,0,10,255],[0,0,12,255],[0,0,14,255],[0,0,16,255],[0,0,17,255],[0,0,19,255],[0,0,21,255],[0,0,23,255],[0,0,25,255],[0,0,27,255],[0,0,29,255],[0,0,31,255],[0,0,33,255],[0,0,35,255],[0,0,37,255],[0,0,39,255],[0,0,41,255],[0,0,43,255],[0,0,45,255],[0,0,47,255],[0,0,49,255],[0,0,51,255],[0,0,53,255],[0,0,55,255],[0,0,57,255],[0,0,59,255],[0,0,61,255],[0,0,63,255],[0,0,65,255],[0,0,67,255],[0,0,69,255],[0,0,71,255],[0,0,73,255],[0,0,75,255],[0,0,77,255],[0,0,79,255],[0,0,81,255],[0,0,83,255],[0,0,84,255],[0,0,86,255],[0,0,88,255],[0,0,90,255],[0,0,92,255],[0,0,94,255],[0,0,96,255],[0,0,98,255],[0,0,100,255],[0,0,102,255],[0,0,104,255],[0,0,106,255],[0,0,108,255],[0,0,110,255],[0,0,112,255],[0,0,114,255],[0,0,116,255],[0,0,117,255],[0,0,119,255],[0,0,121,255],[0,0,123,255],[0,0,125,255],[0,0,127,255],[0,0,129,255],[0,0,131,255],[0,0,133,255],[0,0,135,255],[0,0,137,255],[0,0,139,255],[0,0,141,255],[0,0,143,255],[0,0,145,255],[0,0,147,255],[0,0,149,255],[0,0,151,255],[0,0,153,255],[0,0,155,255],[0,0,157,255],[0,0,159,255],[0,0,161,255],[0,0,163,255],[0,0,165,255],[0,0,167,255],[3,0,169,255],[6,0,171,255],[9,0,173,255],[12,0,175,255],[15,0,177,255],[18,0,179,255],[21,0,181,255],[24,0,183,255],[26,0,184,255],[29,0,186,255],[32,0,188,255],[35,0,190,255],[38,0,192,255],[41,0,194,255],[44,0,196,255],[47,0,198,255],[50,0,200,255],[52,0,197,255],[55,0,194,255],[57,0,191,255],[59,0,188,255],[62,0,185,255],[64,0,182,255],[66,0,179,255],[69,0,176,255],[71,0,174,255],[74,0,171,255],[76,0,168,255],[78,0,165,255],[81,0,162,255],[83,0,159,255],[85,0,156,255],[88,0,153,255],[90,0,150,255],[93,2,144,255],[96,4,138,255],[99,6,132,255],[102,8,126,255],[105,9,121,255],[108,11,115,255],[111,13,109,255],[114,15,103,255],[116,17,97,255],[119,19,91,255],[122,21,85,255],[125,23,79,255],[128,24,74,255],[131,26,68,255],[134,28,62,255],[137,30,56,255],[140,32,50,255],[143,34,47,255],[146,36,44,255],[149,38,41,255],[152,40,38,255],[155,41,35,255],[158,43,32,255],[161,45,29,255],[164,47,26,255],[166,49,24,255],[169,51,21,255],[172,53,18,255],[175,55,15,255],[178,56,12,255],[181,58,9,255],[184,60,6,255],[187,62,3,255],[190,64,0,255],[194,66,0,255],[198,68,0,255],[201,70,0,255],[205,72,0,255],[209,73,0,255],[213,75,0,255],[217,77,0,255],[221,79,0,255],[224,81,0,255],[228,83,0,255],[232,85,0,255],[236,87,0,255],[240,88,0,255],[244,90,0,255],[247,92,0,255],[251,94,0,255],[255,96,0,255],[255,98,3,255],[255,100,6,255],[255,102,9,255],[255,104,12,255],[255,105,15,255],[255,107,18,255],[255,109,21,255],[255,111,24,255],[255,113,26,255],[255,115,29,255],[255,117,32,255],[255,119,35,255],[255,120,38,255],[255,122,41,255],[255,124,44,255],[255,126,47,255],[255,128,50,255],[255,130,53,255],[255,132,56,255],[255,134,59,255],[255,136,62,255],[255,137,65,255],[255,139,68,255],[255,141,71,255],[255,143,74,255],[255,145,76,255],[255,147,79,255],[255,149,82,255],[255,151,85,255],[255,152,88,255],[255,154,91,255],[255,156,94,255],[255,158,97,255],[255,160,100,255],[255,162,103,255],[255,164,106,255],[255,166,109,255],[255,168,112,255],[255,169,115,255],[255,171,118,255],[255,173,121,255],[255,175,124,255],[255,177,126,255],[255,179,129,255],[255,181,132,255],[255,183,135,255],[255,184,138,255],[255,186,141,255],[255,188,144,255],[255,190,147,255],[255,192,150,255],[255,194,153,255],[255,196,156,255],[255,198,159,255],[255,200,162,255],[255,201,165,255],[255,203,168,255],[255,205,171,255],[255,207,174,255],[255,209,176,255],[255,211,179,255],[255,213,182,255],[255,215,185,255],[255,216,188,255],[255,218,191,255],[255,220,194,255],[255,222,197,255],[255,224,200,255],[255,226,203,255],[255,228,206,255],[255,229,210,255],[255,231,213,255],[255,233,216,255],[255,235,219,255],[255,237,223,255],[255,239,226,255],[255,240,229,255],[255,242,232,255],[255,244,236,255],[255,246,239,255],[255,248,242,255],[255,250,245,255],[255,251,249,255],[255,253,252,255],[255,255,255,255]]},pet20Step:{name:"PET 20 Step",numColors:256,colors:[[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255]]},gray:{name:"Gray",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,1,1]],green:[[0,0,0],[1,1,1]],blue:[[0,0,0],[1,1,1]]}},jet:{name:"Jet",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.35,0,0],[.66,1,1],[.89,1,1],[1,.5,.5]],green:[[0,0,0],[.125,0,0],[.375,1,1],[.64,1,1],[.91,0,0],[1,0,0]],blue:[[0,.5,.5],[.11,1,1],[.34,1,1],[.65,0,0],[1,0,0]]}},hsv:{name:"HSV",numColors:256,gamma:1,segmentedData:{red:[[0,1,1],[.15873,1,1],[.174603,.96875,.96875],[.333333,.03125,.03125],[.349206,0,0],[.666667,0,0],[.68254,.03125,.03125],[.84127,.96875,.96875],[.857143,1,1],[1,1,1]],green:[[0,0,0],[.15873,.9375,.9375],[.174603,1,1],[.507937,1,1],[.666667,.0625,.0625],[.68254,0,0],[1,0,0]],blue:[[0,0,0],[.333333,0,0],[.349206,.0625,.0625],[.507937,1,1],[.84127,1,1],[.857143,.9375,.9375],[1,.09375,.09375]]}},hot:{name:"Hot",numColors:256,gamma:1,segmentedData:{red:[[0,.0416,.0416],[.365079,1,1],[1,1,1]],green:[[0,0,0],[.365079,0,0],[.746032,1,1],[1,1,1]],blue:[[0,0,0],[.746032,0,0],[1,1,1]]}},cool:{name:"Cool",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,1,1]],green:[[0,1,1],[1,0,0]],blue:[[0,1,1],[1,1,1]]}},spring:{name:"Spring",numColors:256,gamma:1,segmentedData:{red:[[0,1,1],[1,1,1]],green:[[0,0,0],[1,1,1]],blue:[[0,1,1],[1,0,0]]}},summer:{name:"Summer",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,1,1]],green:[[0,.5,.5],[1,1,1]],blue:[[0,.4,.4],[1,.4,.4]]}},autumn:{name:"Autumn",numColors:256,gamma:1,segmentedData:{red:[[0,1,1],[1,1,1]],green:[[0,0,0],[1,1,1]],blue:[[0,0,0],[1,0,0]]}},winter:{name:"Winter",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,0,0]],green:[[0,0,0],[1,1,1]],blue:[[0,1,1],[1,.5,.5]]}},bone:{name:"Bone",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.746032,.652778,.652778],[1,1,1]],green:[[0,0,0],[.365079,.319444,.319444],[.746032,.777778,.777778],[1,1,1]],blue:[[0,0,0],[.365079,.444444,.444444],[1,1,1]]}},copper:{name:"Copper",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.809524,1,1],[1,1,1]],green:[[0,0,0],[1,.7812,.7812]],blue:[[0,0,0],[1,.4975,.4975]]}},spectral:{name:"Spectral",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.05,.4667,.4667],[.1,.5333,.5333],[.15,0,0],[.2,0,0],[.25,0,0],[.3,0,0],[.35,0,0],[.4,0,0],[.45,0,0],[.5,0,0],[.55,0,0],[.6,0,0],[.65,.7333,.7333],[.7,.9333,.9333],[.75,1,1],[.8,1,1],[.85,1,1],[.9,.8667,.8667],[.95,.8,.8],[1,.8,.8]],green:[[0,0,0],[.05,0,0],[.1,0,0],[.15,0,0],[.2,0,0],[.25,.4667,.4667],[.3,.6,.6],[.35,.6667,.6667],[.4,.6667,.6667],[.45,.6,.6],[.5,.7333,.7333],[.55,.8667,.8667],[.6,1,1],[.65,1,1],[.7,.9333,.9333],[.75,.8,.8],[.8,.6,.6],[.85,0,0],[.9,0,0],[.95,0,0],[1,.8,.8]],blue:[[0,0,0],[.05,.5333,.5333],[.1,.6,.6],[.15,.6667,.6667],[.2,.8667,.8667],[.25,.8667,.8667],[.3,.8667,.8667],[.35,.6667,.6667],[.4,.5333,.5333],[.45,0,0],[.5,0,0],[.55,0,0],[.6,0,0],[.65,0,0],[.7,0,0],[.75,0,0],[.8,0,0],[.85,0,0],[.9,0,0],[.95,0,0],[1,.8,.8]]}},coolwarm:{name:"CoolWarm",numColors:256,gamma:1,segmentedData:{red:[[0,.2298057,.2298057],[.03125,.26623388,.26623388],[.0625,.30386891,.30386891],[.09375,.342804478,.342804478],[.125,.38301334,.38301334],[.15625,.424369608,.424369608],[.1875,.46666708,.46666708],[.21875,.509635204,.509635204],[.25,.552953156,.552953156],[.28125,.596262162,.596262162],[.3125,.639176211,.639176211],[.34375,.681291281,.681291281],[.375,.722193294,.722193294],[.40625,.761464949,.761464949],[.4375,.798691636,.798691636],[.46875,.833466556,.833466556],[.5,.865395197,.865395197],[.53125,.897787179,.897787179],[.5625,.924127593,.924127593],[.59375,.944468518,.944468518],[.625,.958852946,.958852946],[.65625,.96732803,.96732803],[.6875,.969954137,.969954137],[.71875,.966811177,.966811177],[.75,.958003065,.958003065],[.78125,.943660866,.943660866],[.8125,.923944917,.923944917],[.84375,.89904617,.89904617],[.875,.869186849,.869186849],[.90625,.834620542,.834620542],[.9375,.795631745,.795631745],[.96875,.752534934,.752534934],[1,.705673158,.705673158]],green:[[0,.298717966,.298717966],[.03125,.353094838,.353094838],[.0625,.406535296,.406535296],[.09375,.458757618,.458757618],[.125,.50941904,.50941904],[.15625,.558148092,.558148092],[.1875,.604562568,.604562568],[.21875,.648280772,.648280772],[.25,.688929332,.688929332],[.28125,.726149107,.726149107],[.3125,.759599947,.759599947],[.34375,.788964712,.788964712],[.375,.813952739,.813952739],[.40625,.834302879,.834302879],[.4375,.849786142,.849786142],[.46875,.860207984,.860207984],[.5,.86541021,.86541021],[.53125,.848937047,.848937047],[.5625,.827384882,.827384882],[.59375,.800927443,.800927443],[.625,.769767752,.769767752],[.65625,.734132809,.734132809],[.6875,.694266682,.694266682],[.71875,.650421156,.650421156],[.75,.602842431,.602842431],[.78125,.551750968,.551750968],[.8125,.49730856,.49730856],[.84375,.439559467,.439559467],[.875,.378313092,.378313092],[.90625,.312874446,.312874446],[.9375,.24128379,.24128379],[.96875,.157246067,.157246067],[1,.01555616,.01555616]],blue:[[0,.753683153,.753683153],[.03125,.801466763,.801466763],[.0625,.84495867,.84495867],[.09375,.883725899,.883725899],[.125,.917387822,.917387822],[.15625,.945619588,.945619588],[.1875,.968154911,.968154911],[.21875,.98478814,.98478814],[.25,.995375608,.995375608],[.28125,.999836203,.999836203],[.3125,.998151185,.998151185],[.34375,.990363227,.990363227],[.375,.976574709,.976574709],[.40625,.956945269,.956945269],[.4375,.931688648,.931688648],[.46875,.901068838,.901068838],[.5,.865395561,.865395561],[.53125,.820880546,.820880546],[.5625,.774508472,.774508472],[.59375,.726736146,.726736146],[.625,.678007945,.678007945],[.65625,.628751763,.628751763],[.6875,.579375448,.579375448],[.71875,.530263762,.530263762],[.75,.481775914,.481775914],[.78125,.434243684,.434243684],[.8125,.387970225,.387970225],[.84375,.343229596,.343229596],[.875,.300267182,.300267182],[.90625,.259301199,.259301199],[.9375,.220525627,.220525627],[.96875,.184115123,.184115123],[1,.150232812,.150232812]]}},blues:{name:"Blues",numColors:256,gamma:1,segmentedData:{red:[[0,.9686274528503418,.9686274528503418],[.125,.8705882430076599,.8705882430076599],[.25,.7764706015586853,.7764706015586853],[.375,.6196078658103943,.6196078658103943],[.5,.41960784792900085,.41960784792900085],[.625,.25882354378700256,.25882354378700256],[.75,.12941177189350128,.12941177189350128],[.875,.0313725508749485,.0313725508749485],[1,.0313725508749485,.0313725508749485]],green:[[0,.9843137264251709,.9843137264251709],[.125,.9215686321258545,.9215686321258545],[.25,.8588235378265381,.8588235378265381],[.375,.7921568751335144,.7921568751335144],[.5,.6823529601097107,.6823529601097107],[.625,.572549045085907,.572549045085907],[.75,.4431372582912445,.4431372582912445],[.875,.3176470696926117,.3176470696926117],[1,.1882352977991104,.1882352977991104]],blue:[[0,1,1],[.125,.9686274528503418,.9686274528503418],[.25,.9372549057006836,.9372549057006836],[.375,.8823529481887817,.8823529481887817],[.5,.8392156958580017,.8392156958580017],[.625,.7764706015586853,.7764706015586853],[.75,.7098039388656616,.7098039388656616],[.875,.6117647290229797,.6117647290229797],[1,.41960784792900085,.41960784792900085]]}}};function o(e,t){for(var n=0,r=e.length-1;n<=r;){var a=n+Math.floor((r-n)/2),i=e[a];if(i===t)return a;t<i?r=a-1:n=a+1}return n}function s(e,t,n){var r,a=[],i=[],s=[],l=[];for(n=null===n?1:n,r=0;r<t.length;r++){var u=t[r];a.push((e-1)*u[0]),i.push(u[1]),s.push(u[1])}var d=function(e,t,n){for(var r=(1-e)/((n=null===n?100:n)-1),a=[];n-- >0;)a.push(e),e+=r;return a[a.length-1]=1,a}(0,0,e);for(r=0;r<e;r++)d[r]=(e-1)*Math.pow(d[r],n);var c=function(e,t){var n,r=[],a=t.length;for(e.sort(function(e,t){return e-t}),n=0;n<a;n++)r[n]=o(e,t[n]);return r}(a,d);for(r=1;r<e-1;r++){var f=c[r];l[r]=(d[r]-a[f-1])/(a[f]-a[f-1])*(i[f]-s[f-1])+s[f-1]}return l[0]=s[0],l[e-1]=i[t.length-1],l}function l(){var e=[];return Object.keys(i).forEach(function(t){i.hasOwnProperty(t)&&e.push({id:t,name:i[t].name})}),e.sort(function(e,t){var n=e.name.toLowerCase(),r=t.name.toLowerCase();return n===r?0:n<r?-1:1}),e}function u(e,t){var n=i[e];return n||(n=i[e]=t||{name:"",colors:[]}),!n.colors&&n.segmentedData&&(n.colors=function(e,t,n){var r,a=[],i=s(t=null===t?256:t,e.red,n=null===n?1:n),o=s(t,e.green,n),l=s(t,e.blue,n);for(r=0;r<t;r++){var u=Math.round(255*i[r]),d=Math.round(255*o[r]),c=Math.round(255*l[r]);a.push([u,d,c,255])}return a}(n.segmentedData,n.numColors,n.gamma)),{getId:function(){return e},getColorSchemeName:function(){return n.name},setColorSchemeName:function(e){n.name=e},getNumberOfColors:function(){return n.colors.length},setNumberOfColors:function(e){for(;n.colors.length<e;)n.colors.push(a);n.colors.length=e},getColor:function(e){return this.isValidIndex(e)?n.colors[e]:a},getColorRepeating:function(e){var t=n.colors.length;return this.getColor(e=t?e%t:0)},setColor:function(e,t){this.isValidIndex(e)&&(n.colors[e]=t)},addColor:function(e){n.colors.push(e)},insertColor:function(e,t){this.isValidIndex(e)&&n.colors.splice(e,1,t)},removeColor:function(e){this.isValidIndex(e)&&n.colors.splice(e,1)},clearColors:function(){n.colors=[]},buildLookupTable:function(e){if(e){var t=n.colors.length;e.setNumberOfTableValues(t);for(var r=0;r<t;r++)e.setTableValue(r,n.colors[r])}},createLookupTable:function(){var e=new r.default;return this.buildLookupTable(e),e},isValidIndex:function(e){return e>=0&&e<n.colors.length}}}},"./colors/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./colors/colormap.js"),a=n("./colors/lookupTable.js");t.default={getColormap:r.getColormap,getColormapsList:r.getColormapsList,LookupTable:a.default}},"./colors/lookupTable.js":function(e,t,n){"use strict";function r(e,t,n){if(e>1)throw new Error("HSVToRGB expects hue < 1");var r=[];if(0===t)return r[0]=n,r[1]=n,r[2]=n,r;var a=Math.floor(6*e),i=6*e-a,o=n*(1-t),s=n*(1-t*i),l=n*(1-t*(1-i));switch(a){case 0:case 6:r[0]=n,r[1]=l,r[2]=o;break;case 1:r[0]=s,r[1]=n,r[2]=o;break;case 2:r[0]=o,r[1]=n,r[2]=l;break;case 3:r[0]=o,r[1]=s,r[2]=n;break;case 4:r[0]=l,r[1]=o,r[2]=n;break;case 5:r[0]=n,r[1]=o,r[2]=s}return r}n.r(t),t.default=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.NumberOfColors=256,this.Ramp="linear",this.TableRange=[0,255],this.HueRange=[0,.66667],this.SaturationRange=[1,1],this.ValueRange=[1,1],this.AlphaRange=[1,1],this.NaNColor=[128,0,0,255],this.BelowRangeColor=[0,0,0,255],this.UseBelowRangeColor=!0,this.AboveRangeColor=[255,255,255,255],this.UseAboveRangeColor=!0,this.InputRange=[0,255],this.Table=[]}var t;return(t=[{key:"setNumberOfTableValues",value:function(e){this.NumberOfColors=e}},{key:"setRamp",value:function(e){this.Ramp=e}},{key:"setTableRange",value:function(e,t){this.TableRange[0]=e,this.TableRange[1]=t}},{key:"setHueRange",value:function(e,t){this.HueRange[0]=e,this.HueRange[1]=t}},{key:"setSaturationRange",value:function(e,t){this.SaturationRange[0]=e,this.SaturationRange[1]=t}},{key:"setValueRange",value:function(e,t){this.ValueRange[0]=e,this.ValueRange[1]=t}},{key:"setRange",value:function(e,t){this.InputRange[0]=e,this.InputRange[1]=t}},{key:"setAlphaRange",value:function(e,t){this.AlphaRange[0]=e,this.AlphaRange[1]=t}},{key:"getColor",value:function(e){return this.mapValue(e)}},{key:"build",value:function(e){if(!(this.Table.length>1)||e){this.Table=[];var t,n,a,i,o=this.NumberOfColors-1;o?(t=(this.HueRange[1]-this.HueRange[0])/o,n=(this.SaturationRange[1]-this.SaturationRange[0])/o,a=(this.ValueRange[1]-this.ValueRange[0])/o,i=(this.AlphaRange[1]-this.AlphaRange[0])/o):t=n=a=i=0;for(var s=0;s<=o;s++){var l=this.AlphaRange[0]+s*i,u=r(this.HueRange[0]+s*t,this.SaturationRange[0]+s*n,this.ValueRange[0]+s*a),d=[];switch(this.Ramp){case"scurve":d[0]=Math.floor(127.5*(1+Math.cos((1-u[0])*Math.PI))),d[1]=Math.floor(127.5*(1+Math.cos((1-u[1])*Math.PI))),d[2]=Math.floor(127.5*(1+Math.cos((1-u[2])*Math.PI))),d[3]=Math.floor(255*l);break;case"linear":d[0]=Math.floor(255*u[0]+.5),d[1]=Math.floor(255*u[1]+.5),d[2]=Math.floor(255*u[2]+.5),d[3]=Math.floor(255*l+.5);break;case"sqrt":d[0]=Math.floor(255*Math.sqrt(u[0])+.5),d[1]=Math.floor(255*Math.sqrt(u[1])+.5),d[2]=Math.floor(255*Math.sqrt(u[2])+.5),d[3]=Math.floor(255*Math.sqrt(l)+.5);break;default:throw new Error("Invalid Ramp value (".concat(this.Ramp,")"))}this.Table.push(d)}this.buildSpecialColors()}}},{key:"buildSpecialColors",value:function(){var e=this.NumberOfColors,t=e+1,n=e+2;this.Table[e+0]=this.UseBelowRangeColor||0===e?this.BelowRangeColor:this.Table[0],this.Table[t]=this.UseAboveRangeColor||0===e?this.AboveRangeColor:this.Table[e-1],this.Table[n]=this.NaNColor}},{key:"mapValue",value:function(e){var t=this.getIndex(e);if(t<0)return this.NaNColor;if(0===t){if(this.UseBelowRangeColor&&e<this.TableRange[0])return this.BelowRangeColor}else if(t===this.NumberOfColors-1&&this.UseAboveRangeColor&&e>this.TableRange[1])return this.AboveRangeColor;return this.Table[t]}},{key:"getIndex",value:function(e){var t={Range:[]};if(t.MaxIndex=this.NumberOfColors-1,t.Shift=-this.TableRange[0],t.Scale=this.TableRange[1]<=this.TableRange[0]?Number.MAX_VALUE:t.MaxIndex/(this.TableRange[1]-this.TableRange[0]),t.Range[0]=this.TableRange[0],t.Range[1]=this.TableRange[1],isNaN(e))return-1;var n=function(e,t){return Math.floor(e<t.Range[0]?t.MaxIndex+0+1.5:e>t.Range[1]?t.MaxIndex+1+1.5:(e+t.Shift)*t.Scale)}(e,t);return n===this.NumberOfColors+0?n=0:n===this.NumberOfColors+1&&(n=this.NumberOfColors-1),n}},{key:"setTableValue",value:function(e,t){if(5===arguments.length&&(t=Array.prototype.slice.call(arguments,1)),e<0)throw new Error("Can't set the table value for negative index (".concat(e,")"));e>=this.NumberOfColors&&new Error("Index ".concat(e," is greater than the number of colors ").concat(this.NumberOfColors)),this.Table[e]=t,0!==e&&e!==this.NumberOfColors-1||this.buildSpecialColors()}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}()},"./disable.js":function(e,t,n){"use strict";n.r(t);var r=n("./enabledElements.js"),a=n("./triggerEvent.js"),i=n("./events.js");t.default=function(e){if(void 0===e)throw new Error("disable: element must not be undefined");for(var t=Object(r.getEnabledElements)(),n=0;n<t.length;n++)if(t[n].element===e){var o={element:e};Object(a.default)(e,i.default.ELEMENT_DISABLED,o),Object(a.default)(i.events,i.default.ELEMENT_DISABLED,o),t[n].element.removeChild(t[n].canvas),t[n].canvas=void 0,t.splice(n,1);break}}},"./displayImage.js":function(e,t,n){"use strict";n.r(t);var r=n("./enabledElements.js"),a=n("./internal/getDefaultViewport.js"),i=n("./updateImage.js"),o=n("./internal/now.js"),s=n("./layers.js"),l=n("./triggerEvent.js"),u=n("./events.js");t.default=function(e,t,n){if(void 0===e)throw new Error("displayImage: parameter element must not be undefined");if(void 0===t)throw new Error("displayImage: parameter image must not be undefined");var d,c=Object(r.getEnabledElement)(e),f=c.image;if(c.image=t,c.layers&&c.layers.length&&Object(s.setLayerImage)(e,t),void 0===c.viewport&&(c.viewport=Object(a.default)(c.canvas,t)),n)for(var h in n)null!==n[h]&&(c.viewport[h]=n[h]);void 0!==c.lastImageTimeStamp&&(d=(1e3/(Object(o.default)()-c.lastImageTimeStamp)).toFixed()),c.lastImageTimeStamp=Object(o.default)();var p={viewport:c.viewport,element:c.element,image:c.image,oldImage:f,enabledElement:c,frameRate:d};Object(l.default)(c.element,u.default.NEW_IMAGE,p),Object(i.default)(e)}},"./draw.js":function(e,t,n){"use strict";n.r(t);var r=n("./enabledElements.js"),a=n("./internal/drawImage.js");t.default=function(e){var t=Object(r.getEnabledElement)(e);if(void 0===t.image)throw new Error("draw: image has not been loaded yet");Object(a.default)(t)}},"./drawInvalidated.js":function(e,t,n){"use strict";n.r(t);var r=n("./enabledElements.js"),a=n("./internal/drawImage.js");t.default=function(){for(var e=Object(r.getEnabledElements)(),t=0;t<e.length;t++){var n=e[t];!0===n.invalid&&Object(a.default)(n,!0)}}},"./enable.js":function(e,t,n){"use strict";n.r(t);var r=n("./enabledElements.js"),a=n("./resize.js"),i=n("./internal/tryEnableWebgl.js"),o=n("./triggerEvent.js"),s=n("./generateUUID.js"),l=n("./events.js"),u=n("./internal/getCanvas.js");t.default=function(e,t){if(void 0===e)throw new Error("enable: parameter element cannot be undefined");t&&t.renderer&&"webgl"===t.renderer.toLowerCase()&&Object(i.default)(t);var n={element:e,canvas:Object(u.default)(e),image:void 0,invalid:!1,needsRedraw:!0,options:t,layers:[],data:{},renderingTools:{},uuid:Object(s.default)()};Object(r.addEnabledElement)(n),Object(o.default)(l.events,l.default.ELEMENT_ENABLED,n),Object(a.default)(e,!0)}},"./enabledElementData.js":function(e,t,n){"use strict";n.r(t),n.d(t,"getElementData",function(){return a}),n.d(t,"removeElementData",function(){return i});var r=n("./enabledElements.js");function a(e,t){var n=Object(r.getEnabledElement)(e);return!1===n.data.hasOwnProperty(t)&&(n.data[t]={}),n.data[t]}function i(e,t){delete Object(r.getEnabledElement)(e).data[t]}},"./enabledElements.js":function(e,t,n){"use strict";n.r(t),n.d(t,"getEnabledElement",function(){return d}),n.d(t,"addEnabledElement",function(){return c}),n.d(t,"getEnabledElementsByImageId",function(){return f}),n.d(t,"getEnabledElements",function(){return h});var r=n("./internal/drawImageSync.js"),a=n("./internal/requestAnimationFrame.js"),i=n("./triggerEvent.js"),o=n("./events.js"),s=[],l=void 0;function u(e){return s.forEach(function(t){if(t.canvas){var n={enabledElement:t,timestamp:e};Object(i.default)(t.element,o.default.PRE_RENDER,n),t.needsRedraw&&function(e){return void 0!==e.image||e.layers.length>0}(t)&&Object(r.default)(t,t.invalid)}}),Object(a.default)(u)}function d(e){if(void 0===e)throw new Error("getEnabledElement: parameter element must not be undefined");for(var t=0;t<s.length;t++)if(s[t].element===e)return s[t];throw new Error("element not enabled")}function c(e){if(void 0===e)throw new Error("getEnabledElement: enabledElement element must not be undefined");s.push(e),l||(l=u())}function f(e){var t=[];return s.forEach(function(n){n.image&&n.image.imageId===e&&t.push(n)}),t}function h(){return s}},"./events.js":function(e,t,n){"use strict";n.r(t),n.d(t,"events",function(){return r}),t.default={NEW_IMAGE:"cornerstonenewimage",INVALIDATED:"cornerstoneinvalidated",PRE_RENDER:"cornerstoneprerender",IMAGE_CACHE_MAXIMUM_SIZE_CHANGED:"cornerstoneimagecachemaximumsizechanged",IMAGE_CACHE_PROMISE_REMOVED:"cornerstoneimagecachepromiseremoved",IMAGE_CACHE_FULL:"cornerstoneimagecachefull",IMAGE_CACHE_CHANGED:"cornerstoneimagecachechanged",WEBGL_TEXTURE_REMOVED:"cornerstonewebgltextureremoved",WEBGL_TEXTURE_CACHE_FULL:"cornerstonewebgltexturecachefull",IMAGE_LOADED:"cornerstoneimageloaded",IMAGE_LOAD_FAILED:"cornerstoneimageloadfailed",ELEMENT_RESIZED:"cornerstoneelementresized",IMAGE_RENDERED:"cornerstoneimagerendered",LAYER_ADDED:"cornerstonelayeradded",LAYER_REMOVED:"cornerstonelayerremoved",ACTIVE_LAYER_CHANGED:"cornerstoneactivelayerchanged",ELEMENT_DISABLED:"cornerstoneelementdisabled",ELEMENT_ENABLED:"cornerstoneelementenabled"};var r=new(function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.listeners={},this.namespaces={}}var t;return(t=[{key:"addEventNamespaceListener",value:function(e,t){e.indexOf(".")<=0||(this.namespaces[e]=t,this.addEventListener(e.split(".")[0],t))}},{key:"removeEventNamespaceListener",value:function(e){e.indexOf(".")<=0||!this.namespaces[e]||(this.removeEventListener(e.split(".")[0],this.namespaces[e]),delete this.namespaces[e])}},{key:"addEventListener",value:function(e,t){e.indexOf(".")>0?this.addEventNamespaceListener(e,t):(e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t))}},{key:"removeEventListener",value:function(e,t){if(e.indexOf(".")>0)this.removeEventNamespaceListener(e);else if(e in this.listeners)for(var n=this.listeners[e],r=0,a=n.length;r<a;r++)if(n[r]===t)return void n.splice(r,1)}},{key:"dispatchEvent",value:function(e){if(!(e.type in this.listeners))return!0;for(var t=this.listeners[e.type],n=0,r=t.length;n<r;n++)t[n].call(this,e);return!e.defaultPrevented}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}())},"./falseColorMapping.js":function(e,t,n){"use strict";n.r(t),n.d(t,"convertImageToFalseColorImage",function(){return s}),n.d(t,"convertToFalseColorImage",function(){return l}),n.d(t,"restoreImage",function(){return o});var r=n("./enabledElements.js"),a=n("./pixelDataToFalseColorData.js"),i=n("./colors/colormap.js");function o(e){return!(!e.restore||"function"!=typeof e.restore||(e.restore(),0))}function s(e,t){if(e.color&&!e.falseColor)throw new Error("Color transforms are not implemented yet");var n=(t=function(e){return e&&"string"==typeof e&&(e=Object(i.getColormap)(e)),e}(t)).getId();if(e.colormapId===n)return!1;if(o(e),n){var r=e.minPixelValue||0,s=e.maxPixelValue||255;e.restore=function(e){if(e.restore)return e.restore;var t=e.color,n=e.rgba,r=e.cachedLut,a=e.slope,i=e.windowWidth,o=e.windowCenter,s=e.minPixelValue,l=e.maxPixelValue;return function(){if(e.color=t,e.rgba=n,e.cachedLut=r,e.slope=a,e.windowWidth=i,e.windowCenter=o,e.minPixelValue=s,e.maxPixelValue=l,e.origPixelData){var u=e.origPixelData;e.getPixelData=function(){return u}}e.origPixelData=void 0,e.colormapId=void 0,e.falseColor=void 0}}(e);var l=t.createLookupTable();l.setTableRange(r,s),Object(a.default)(e,l);var u=function(e){for(var t,n=Number.MAX_VALUE,r=Number.MIN_VALUE,a=e.length,i=0;i<a;i++)n=n<(t=e[i])?n:t,r=r>t?r:t;return{minPixelValue:n,maxPixelValue:r}}(e.getPixelData());e.minPixelValue=u.minPixelValue,e.maxPixelValue=u.maxPixelValue,e.windowWidth=255,e.windowCenter=128,e.colormapId=n}return!0}function l(e,t){return s(Object(r.getEnabledElement)(e).image,t)}},"./fitToWindow.js":function(e,t,n){"use strict";n.r(t);var r=n("./enabledElements.js"),a=n("./updateImage.js"),i=n("./internal/getImageFitScale.js");t.default=function(e){var t=Object(r.getEnabledElement)(e),n=t.image;t.viewport.scale=Object(i.default)(t.canvas,n,t.viewport.rotation).scaleFactor,t.viewport.translation.x=0,t.viewport.translation.y=0,Object(a.default)(e)}},"./generateUUID.js":function(e,t,n){"use strict";n.r(t),t.default=function(){var e=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"x.x.x.x.x.x.xxxx.xxx.x.x.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})}},"./getDefaultViewportForImage.js":function(e,t,n){"use strict";n.r(t);var r=n("./enabledElements.js"),a=n("./internal/getDefaultViewport.js");t.default=function(e,t){var n=Object(r.getEnabledElement)(e);return Object(a.default)(n.canvas,t)}},"./getImage.js":function(e,t,n){"use strict";n.r(t);var r=n("./enabledElements.js");t.default=function(e){return Object(r.getEnabledElement)(e).image}},"./getPixels.js":function(e,t,n){"use strict";n.r(t);var r=n("./enabledElements.js"),a=n("./getStoredPixels.js"),i=n("./internal/getModalityLUT.js");t.default=function(e,t,n,o,s){var l=Object(a.default)(e,t,n,o,s),u=Object(r.getEnabledElement)(e),d=Object(i.default)(u.image.slope,u.image.intercept,u.viewport.modalityLUT);return l.map(d)}},"./getStoredPixels.js":function(e,t,n){"use strict";n.r(t);var r=n("./enabledElements.js");t.default=function(e,t,n,a,i){if(void 0===e)throw new Error("getStoredPixels: parameter element must not be undefined");t=Math.round(t),n=Math.round(n);for(var o=Object(r.getEnabledElement)(e),s=[],l=0,u=o.image.getPixelData(),d=0;d<i;d++)for(var c=0;c<a;c++)s[l++]=u[(d+n)*o.image.columns+(c+t)];return s}},"./getViewport.js":function(e,t,n){"use strict";n.r(t);var r=n("./enabledElements.js");t.default=function(e){var t=Object(r.getEnabledElement)(e).viewport;if(void 0!==t)return Object.assign({},t)}},"./imageCache.js":function(e,t,n){"use strict";n.r(t),n.d(t,"cachedImages",function(){return l}),n.d(t,"setMaximumSizeBytes",function(){return u}),n.d(t,"putImageLoadObject",function(){return c}),n.d(t,"getImageLoadObject",function(){return f}),n.d(t,"removeImageLoadObject",function(){return h}),n.d(t,"getCacheInfo",function(){return p}),n.d(t,"purgeCache",function(){return m}),n.d(t,"changeImageIdCacheSize",function(){return g});var r=n("./events.js"),a=n("./triggerEvent.js"),i=1073741824,o=0,s={},l=[];function u(e){if(void 0===e)throw new Error("setMaximumSizeBytes: parameter numBytes must not be undefined");if(void 0===e.toFixed)throw new Error("setMaximumSizeBytes: parameter numBytes must be a number");i=e,Object(a.default)(r.events,r.default.IMAGE_CACHE_MAXIMUM_SIZE_CHANGED),d()}function d(){if(!(o<=i)){for(l.sort(function(e,t){return e.timeStamp>t.timeStamp?-1:e.timeStamp<t.timeStamp?1:0});o>i;){var e=l[l.length-1].imageId;h(e),Object(a.default)(r.events,r.default.IMAGE_CACHE_PROMISE_REMOVED,{imageId:e})}var t=p();Object(a.default)(r.events,r.default.IMAGE_CACHE_FULL,t)}}function c(e,t){if(void 0===e)throw new Error("putImageLoadObject: imageId must not be undefined");if(void 0===t.promise)throw new Error("putImageLoadObject: imageLoadObject.promise must not be undefined");if(!0===s.hasOwnProperty(e))throw new Error("putImageLoadObject: imageId already in cache");if(t.cancelFn&&"function"!=typeof t.cancelFn)throw new Error("putImageLoadObject: imageLoadObject.cancelFn must be a function");var n={loaded:!1,imageId:e,sharedCacheKey:void 0,imageLoadObject:t,timeStamp:Date.now(),sizeInBytes:0};s[e]=n,l.push(n),t.promise.then(function(e){if(-1!==l.indexOf(n)){if(n.loaded=!0,n.image=e,void 0===e.sizeInBytes)throw new Error("putImageLoadObject: image.sizeInBytes must not be undefined");if(void 0===e.sizeInBytes.toFixed)throw new Error("putImageLoadObject: image.sizeInBytes is not a number");n.sizeInBytes=e.sizeInBytes,o+=n.sizeInBytes;var t={action:"addImage",image:n};Object(a.default)(r.events,r.default.IMAGE_CACHE_CHANGED,t),n.sharedCacheKey=e.sharedCacheKey,d()}},function(){l.splice(l.indexOf(s[e]),1),delete s[e]})}function f(e){if(void 0===e)throw new Error("getImageLoadObject: imageId must not be undefined");var t=s[e];if(void 0!==t)return t.timeStamp=Date.now(),t.imageLoadObject}function h(e){if(void 0===e)throw new Error("removeImageLoadObject: imageId must not be undefined");var t=s[e];if(void 0===t)throw new Error("removeImageLoadObject: imageId was not present in imageCache");l.splice(l.indexOf(t),1),o-=t.sizeInBytes;var n,i={action:"deleteImage",image:t};Object(a.default)(r.events,r.default.IMAGE_CACHE_CHANGED,i),(n=t.imageLoadObject).promise.then(function(){n.decache&&n.decache()},function(){n.decache&&n.decache()}),delete s[e]}function p(){return{maximumSizeInBytes:i,cacheSizeInBytes:o,numberOfImagesCached:l.length}}function m(){for(;l.length>0;)h(l[0].imageId)}function g(e,t){var n=s[e];n&&n.imageLoadObject.promise.then(function(e){var i=t-e.sizeInBytes;e.sizeInBytes=t,n.sizeInBytes=t,o+=i;var s={action:"changeImageSize",image:e};Object(a.default)(r.events,r.default.IMAGE_CACHE_CHANGED,s)})}t.default={imageCache:s,cachedImages:l,setMaximumSizeBytes:u,putImageLoadObject:c,getImageLoadObject:f,removeImageLoadObject:h,getCacheInfo:p,purgeCache:m,changeImageIdCacheSize:g}},"./imageLoader.js":function(e,t,n){"use strict";n.r(t),n.d(t,"loadImage",function(){return u}),n.d(t,"loadAndCacheImage",function(){return d}),n.d(t,"registerImageLoader",function(){return c}),n.d(t,"registerUnknownImageLoader",function(){return f});var r,a=n("./imageCache.js"),i=n("./events.js"),o=n("./triggerEvent.js"),s={};function l(e,t){var n=e.indexOf(":"),a=e.substring(0,n),l=s[a];if(null==l){if(void 0!==r)return r(e);throw new Error("loadImageFromImageLoader: no image loader for imageId")}var u=l(e,t);return u.promise.then(function(e){Object(o.default)(i.events,i.default.IMAGE_LOADED,{image:e})},function(t){var n={imageId:e,error:t};Object(o.default)(i.events,i.default.IMAGE_LOAD_FAILED,n)}),u}function u(e,t){if(void 0===e)throw new Error("loadImage: parameter imageId must not be undefined");var n=Object(a.getImageLoadObject)(e);return void 0!==n?n.promise:l(e,t).promise}function d(e,t){if(void 0===e)throw new Error("loadAndCacheImage: parameter imageId must not be undefined");var n=Object(a.getImageLoadObject)(e);return void 0!==n?n.promise:(n=l(e,t),Object(a.putImageLoadObject)(e,n),n.promise)}function c(e,t){s[e]=t}function f(e){var t=r;return r=e,t}},"./index.js":function(e,t,n){"use strict";n.r(t);var r=n("./internal/drawImage.js");n.d(t,"drawImage",function(){return r.default});var a=n("./internal/generateLut.js");n.d(t,"generateLut",function(){return a.default});var i=n("./internal/getDefaultViewport.js");n.d(t,"getDefaultViewport",function(){return i.default});var o=n("./internal/requestAnimationFrame.js");n.d(t,"requestAnimationFrame",function(){return o.default});var s=n("./internal/storedPixelDataToCanvasImageData.js");n.d(t,"storedPixelDataToCanvasImageData",function(){return s.default});var l=n("./internal/storedColorPixelDataToCanvasImageData.js");n.d(t,"storedColorPixelDataToCanvasImageData",function(){return l.default});var u=n("./internal/storedPixelDataToCanvasImageDataColorLUT.js");n.d(t,"storedPixelDataToCanvasImageDataColorLUT",function(){return u.default});var d=n("./internal/storedPixelDataToCanvasImageDataPseudocolorLUT.js");n.d(t,"storedPixelDataToCanvasImageDataPseudocolorLUT",function(){return d.default});var c=n("./internal/index.js");n.d(t,"internal",function(){return c.default});var f=n("./rendering/renderLabelMapImage.js");n.d(t,"renderLabelMapImage",function(){return f.renderLabelMapImage});var h=n("./rendering/renderPseudoColorImage.js");n.d(t,"renderPseudoColorImage",function(){return h.renderPseudoColorImage});var p=n("./rendering/renderColorImage.js");n.d(t,"renderColorImage",function(){return p.renderColorImage});var m=n("./rendering/renderGrayscaleImage.js");n.d(t,"renderGrayscaleImage",function(){return m.renderGrayscaleImage});var g=n("./rendering/renderWebImage.js");n.d(t,"renderWebImage",function(){return g.renderWebImage});var v=n("./rendering/renderToCanvas.js");n.d(t,"renderToCanvas",function(){return v.default});var y=n("./canvasToPixel.js");n.d(t,"canvasToPixel",function(){return y.default});var b=n("./disable.js");n.d(t,"disable",function(){return b.default});var w=n("./displayImage.js");n.d(t,"displayImage",function(){return w.default});var x=n("./draw.js");n.d(t,"draw",function(){return x.default});var _=n("./drawInvalidated.js");n.d(t,"drawInvalidated",function(){return _.default});var E=n("./enable.js");n.d(t,"enable",function(){return E.default});var T=n("./enabledElementData.js");n.d(t,"getElementData",function(){return T.getElementData}),n.d(t,"removeElementData",function(){return T.removeElementData});var j=n("./enabledElements.js");n.d(t,"getEnabledElement",function(){return j.getEnabledElement}),n.d(t,"addEnabledElement",function(){return j.addEnabledElement}),n.d(t,"getEnabledElementsByImageId",function(){return j.getEnabledElementsByImageId}),n.d(t,"getEnabledElements",function(){return j.getEnabledElements});var S=n("./layers.js");n.d(t,"addLayer",function(){return S.addLayer}),n.d(t,"removeLayer",function(){return S.removeLayer}),n.d(t,"getLayer",function(){return S.getLayer}),n.d(t,"getLayers",function(){return S.getLayers}),n.d(t,"getVisibleLayers",function(){return S.getVisibleLayers}),n.d(t,"setActiveLayer",function(){return S.setActiveLayer}),n.d(t,"getActiveLayer",function(){return S.getActiveLayer}),n.d(t,"purgeLayers",function(){return S.purgeLayers}),n.d(t,"setLayerImage",function(){return S.setLayerImage});var C=n("./fitToWindow.js");n.d(t,"fitToWindow",function(){return C.default});var O=n("./getDefaultViewportForImage.js");n.d(t,"getDefaultViewportForImage",function(){return O.default});var P=n("./getImage.js");n.d(t,"getImage",function(){return P.default});var I=n("./getPixels.js");n.d(t,"getPixels",function(){return I.default});var M=n("./getStoredPixels.js");n.d(t,"getStoredPixels",function(){return M.default});var D=n("./getViewport.js");n.d(t,"getViewport",function(){return D.default});var L=n("./imageLoader.js");n.d(t,"loadImage",function(){return L.loadImage}),n.d(t,"loadAndCacheImage",function(){return L.loadAndCacheImage}),n.d(t,"registerImageLoader",function(){return L.registerImageLoader}),n.d(t,"registerUnknownImageLoader",function(){return L.registerUnknownImageLoader});var A=n("./invalidate.js");n.d(t,"invalidate",function(){return A.default});var k=n("./invalidateImageId.js");n.d(t,"invalidateImageId",function(){return k.default});var R=n("./pageToPixel.js");n.d(t,"pageToPixel",function(){return R.default});var U=n("./pixelToCanvas.js");n.d(t,"pixelToCanvas",function(){return U.default});var N=n("./reset.js");n.d(t,"reset",function(){return N.default});var B=n("./resize.js");n.d(t,"resize",function(){return B.default});var H=n("./setToPixelCoordinateSystem.js");n.d(t,"setToPixelCoordinateSystem",function(){return H.default});var F=n("./setViewport.js");n.d(t,"setViewport",function(){return F.default});var V=n("./updateImage.js");n.d(t,"updateImage",function(){return V.default});var z=n("./pixelDataToFalseColorData.js");n.d(t,"pixelDataToFalseColorData",function(){return z.default});var W=n("./rendering/index.js");n.d(t,"rendering",function(){return W.default});var q=n("./imageCache.js");n.d(t,"imageCache",function(){return q.default});var G=n("./metaData.js");n.d(t,"metaData",function(){return G.default});var Y=n("./webgl/index.js");n.d(t,"webGL",function(){return Y.default});var $=n("./colors/index.js");n.d(t,"colors",function(){return $.default});var X=n("./falseColorMapping.js");n.d(t,"convertImageToFalseColorImage",function(){return X.convertImageToFalseColorImage}),n.d(t,"convertToFalseColorImage",function(){return X.convertToFalseColorImage}),n.d(t,"restoreImage",function(){return X.restoreImage});var Z=n("./events.js");n.d(t,"EVENTS",function(){return Z.default}),n.d(t,"events",function(){return Z.events});var K=n("./triggerEvent.js");n.d(t,"triggerEvent",function(){return K.default}),t.default={drawImage:r.default,generateLut:a.default,getDefaultViewport:i.default,requestAnimationFrame:o.default,storedPixelDataToCanvasImageData:s.default,storedColorPixelDataToCanvasImageData:l.default,storedPixelDataToCanvasImageDataColorLUT:u.default,storedPixelDataToCanvasImageDataPseudocolorLUT:d.default,internal:c.default,renderLabelMapImage:f.renderLabelMapImage,renderPseudoColorImage:h.renderPseudoColorImage,renderColorImage:p.renderColorImage,renderGrayscaleImage:m.renderGrayscaleImage,renderWebImage:g.renderWebImage,renderToCanvas:v.default,canvasToPixel:y.default,disable:b.default,displayImage:w.default,draw:x.default,drawInvalidated:_.default,enable:E.default,getElementData:T.getElementData,removeElementData:T.removeElementData,getEnabledElement:j.getEnabledElement,addEnabledElement:j.addEnabledElement,getEnabledElementsByImageId:j.getEnabledElementsByImageId,getEnabledElements:j.getEnabledElements,addLayer:S.addLayer,removeLayer:S.removeLayer,getLayer:S.getLayer,getLayers:S.getLayers,getVisibleLayers:S.getVisibleLayers,setActiveLayer:S.setActiveLayer,getActiveLayer:S.getActiveLayer,purgeLayers:S.purgeLayers,setLayerImage:S.setLayerImage,fitToWindow:C.default,getDefaultViewportForImage:O.default,getImage:P.default,getPixels:I.default,getStoredPixels:M.default,getViewport:D.default,loadImage:L.loadImage,loadAndCacheImage:L.loadAndCacheImage,registerImageLoader:L.registerImageLoader,registerUnknownImageLoader:L.registerUnknownImageLoader,invalidate:A.default,invalidateImageId:k.default,pageToPixel:R.default,pixelToCanvas:U.default,reset:N.default,resize:B.default,setToPixelCoordinateSystem:H.default,setViewport:F.default,updateImage:V.default,pixelDataToFalseColorData:z.default,rendering:W.default,imageCache:q.default,metaData:G.default,webGL:Y.default,colors:$.default,convertImageToFalseColorImage:X.convertImageToFalseColorImage,convertToFalseColorImage:X.convertToFalseColorImage,restoreImage:X.restoreImage,EVENTS:Z.default,events:Z.events,triggerEvent:K.default}},"./internal/calculateTransform.js":function(e,t,n){"use strict";n.r(t);var r=n("./internal/transform.js");t.default=function(e,t){var n=new r.Transform;n.translate(e.canvas.width/2,e.canvas.height/2);var a=e.viewport.rotation;0!==a&&n.rotate(a*Math.PI/180);var i=e.viewport.scale,o=e.viewport.scale,s=e.viewport.displayedArea.brhc.x-(e.viewport.displayedArea.tlhc.x-1),l=e.viewport.displayedArea.brhc.y-(e.viewport.displayedArea.tlhc.y-1);return"NONE"===e.viewport.displayedArea.presentationSizeMode?e.image.rowPixelSpacing<e.image.columnPixelSpacing?i*=e.image.columnPixelSpacing/e.image.rowPixelSpacing:e.image.columnPixelSpacing<e.image.rowPixelSpacing&&(o*=e.image.rowPixelSpacing/e.image.columnPixelSpacing):(i=e.viewport.displayedArea.columnPixelSpacing,o=e.viewport.displayedArea.rowPixelSpacing,"SCALE TO FIT"===e.viewport.displayedArea.presentationSizeMode&&(i=o=Math.min(e.canvas.width/(s*i),e.canvas.height/(l*o)),e.viewport.displayedArea.rowPixelSpacing<e.viewport.displayedArea.columnPixelSpacing?i*=e.viewport.displayedArea.columnPixelSpacing/e.viewport.displayedArea.rowPixelSpacing:e.viewport.displayedArea.columnPixelSpacing<e.viewport.displayedArea.rowPixelSpacing&&(o*=e.viewport.displayedArea.rowPixelSpacing/e.viewport.displayedArea.columnPixelSpacing))),n.scale(i,o),0!==a&&n.rotate(-a*Math.PI/180),n.translate(e.viewport.translation.x,e.viewport.translation.y),0!==a&&n.rotate(a*Math.PI/180),void 0!==t&&n.scale(t,t),e.viewport.hflip&&n.scale(-1,1),e.viewport.vflip&&n.scale(1,-1),n.translate(-s/2,-l/2),n}},"./internal/computeAutoVoi.js":function(e,t,n){"use strict";function r(e,t){if(!function(e){return e.voiLUT&&e.voiLUT.lut&&e.voiLUT.lut.length>0||void 0!==e.voi.windowWidth&&void 0!==e.voi.windowCenter}(e)){var n=t.maxPixelValue*t.slope+t.intercept,r=t.minPixelValue*t.slope+t.intercept,a=n-r,i=(n+r)/2;void 0===e.voi?e.voi={windowWidth:a,windowCenter:i}:(e.voi.windowWidth=a,e.voi.windowCenter=i)}}n.r(t),n.d(t,"default",function(){return r})},"./internal/drawCompositeImage.js":function(e,t,n){"use strict";n.r(t);var r=n("./layers.js"),a=n("./rendering/renderGrayscaleImage.js"),i=n("./rendering/renderColorImage.js"),o=n("./rendering/renderPseudoColorImage.js"),s=n("./rendering/renderLabelMapImage.js"),l=n("./setToPixelCoordinateSystem.js");function u(e){var t=e.syncProps||{};t.originalScale=e.viewport.scale,e.syncProps=t}t.default=function(e,t){var n=e.element,d=Object(r.getLayers)(n),c=Object(r.getActiveLayer)(n),f=Object(r.getVisibleLayers)(n),h=!e.lastSyncViewportsState&&e.syncViewports;e.lastSyncViewportsState=e.syncViewports,h&&d.forEach(function(e){e.viewport&&u(e)}),!0===e.syncViewports&&function(e,t){f.forEach(function(e){if(e!==t&&e.viewport&&t.viewport){e.syncProps||u(e);var n,r,a=(r=e,(n=t).syncProps||u(n),r.syncProps||u(r),r.syncProps.originalScale/n.syncProps.originalScale);e.viewport.scale=t.viewport.scale*a,e.viewport.rotation=t.viewport.rotation,e.viewport.translation={x:t.viewport.translation.x/a,y:t.viewport.translation.y/a},e.viewport.hflip=t.viewport.hflip,e.viewport.vflip=t.viewport.vflip}})}(0,c);var p=e.canvas.getContext("2d");p.setTransform(1,0,0,1,0,0),p.fillStyle="black",p.fillRect(0,0,e.canvas.width,e.canvas.height),function(e,t,n){f.forEach(function(t,r){if(t.image){e.save(),t.canvas=e.canvas,Object(l.default)(t,e);var u=t.viewport.colormap||t.options.colormap,d=t.invalid||n;if(u&&""!==u&&!0===t.viewport.labelmap)Object(s.addLabelMapLayer)(t,d);else if(u&&""!==u)Object(o.addPseudoColorLayer)(t,d);else if(!0===t.image.color)Object(i.addColorLayer)(t,d);else{var c=0===r;Object(a.addGrayscaleLayer)(t,d,c)}e.globalAlpha=t.options&&t.options.opacity?t.options.opacity:1,t.options&&t.options.fillStyle&&(e.fillStyle=t.options.fillStyle),e.imageSmoothingEnabled=!t.viewport.pixelReplication,e.mozImageSmoothingEnabled=e.imageSmoothingEnabled;var f=t.viewport.displayedArea.tlhc.x-1,h=t.viewport.displayedArea.tlhc.y-1,p=t.viewport.displayedArea.brhc.x-f,m=t.viewport.displayedArea.brhc.y-h;e.drawImage(t.canvas,f,h,p,m,0,0,p,m),e.restore(),t.invalid=!1}})}(p,0,t)}},"./internal/drawImage.js":function(e,t,n){"use strict";n.r(t),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.needsRedraw=!0,t&&(e.invalid=!0)}},"./internal/drawImageSync.js":function(e,t,n){"use strict";n.r(t);var r=n("./internal/now.js"),a=n("./internal/drawCompositeImage.js"),i=n("./rendering/renderColorImage.js"),o=n("./rendering/renderGrayscaleImage.js"),s=n("./rendering/renderPseudoColorImage.js"),l=n("./rendering/renderLabelMapImage.js"),u=n("./triggerEvent.js"),d=n("./events.js");t.default=function(e,t){var n=e.image,c=e.element,f=e.layers||[];if(e.canvas&&(e.image||f.length)){var h=Object(r.default)();if(n.stats={lastGetPixelDataTime:-1,lastStoredPixelDataToCanvasImageDataTime:-1,lastPutImageDataTime:-1,lastRenderTime:-1,lastLutGenerateTime:-1},f&&f.length)Object(a.default)(e,t);else if(n){var p=n.render;p||(p=e.viewport.colormap&&""!==e.viewport.colormap&&!0===e.image.labelmap?l.renderLabelMapImage:e.viewport.colormap&&""!==e.viewport.colormap?s.renderPseudoColorImage:n.color?i.renderColorImage:o.renderGrayscaleImage),p(e,t)}var m=Object(r.default)()-h,g={viewport:e.viewport,element:c,image:n,enabledElement:e,canvasContext:e.canvas.getContext("2d"),renderTimeInMs:m};n.stats.lastRenderTime=m,e.invalid=!1,e.needsRedraw=!1,Object(u.default)(c,d.default.IMAGE_RENDERED,g)}}},"./internal/generateColorLut.js":function(e,t,n){"use strict";n.r(t);var r=n("./internal/getVOILut.js");t.default=function(e,t,n,a,i){var o=e.maxPixelValue,s=e.minPixelValue,l=Math.min(s,0);if(void 0===e.cachedLut){var u=o-l+1;e.cachedLut={},e.cachedLut.lutArray=new Uint8ClampedArray(u)}var d=e.cachedLut.lutArray,c=Object(r.default)(t,n,i);if(!0===a)for(var f=s;f<=o;f++)d[f+-l]=255-c(f);else for(var h=s;h<=o;h++)d[h+-l]=c(h);return d}},"./internal/generateLut.js":function(e,t,n){"use strict";n.r(t);var r=n("./internal/getModalityLUT.js"),a=n("./internal/getVOILut.js");t.default=function(e,t,n,i,o,s){var l=e.maxPixelValue,u=e.minPixelValue,d=Math.min(u,0);if(void 0===e.cachedLut){var c=l-d+1;e.cachedLut={},e.cachedLut.lutArray=new Uint8ClampedArray(c)}var f=e.cachedLut.lutArray,h=Object(r.default)(e.slope,e.intercept,o),p=Object(a.default)(t,n,s);if(!0===i)for(var m=u;m<=l;m++)f[m+-d]=255-p(h(m));else for(var g=u;g<=l;g++)f[g+-d]=p(h(g));return f}},"./internal/getCanvas.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return a});var r="cornerstone-canvas";function a(e){var t="canvas.".concat(r);return e.querySelector(t)||function(e){var t=document.createElement("canvas");return t.style.display="block",t.classList.add(r),e.appendChild(t),t}(e)}},"./internal/getDefaultViewport.js":function(e,t,n){"use strict";n.r(t);var r=n("./internal/getImageFitScale.js");t.default=function(e,t){if(void 0===e)throw new Error("getDefaultViewport: parameter canvas must not be undefined");return void 0===t?{scale:1,translation:{x:0,y:0},voi:{windowWidth:void 0,windowCenter:void 0},invert:!1,pixelReplication:!1,rotation:0,hflip:!1,vflip:!1,modalityLUT:void 0,voiLUT:void 0,colormap:void 0,labelmap:!1,displayedArea:{tlhc:{x:1,y:1},brhc:{x:1,y:1},rowPixelSpacing:1,columnPixelSpacing:1,presentationSizeMode:"NONE"}}:{scale:Object(r.default)(e,t,0).scaleFactor,translation:{x:0,y:0},voi:{windowWidth:t.windowWidth,windowCenter:t.windowCenter},invert:t.invert,pixelReplication:!1,rotation:0,hflip:!1,vflip:!1,modalityLUT:t.modalityLUT,voiLUT:t.voiLUT,colormap:t.colormap,labelmap:Boolean(t.labelmap),displayedArea:{tlhc:{x:1,y:1},brhc:{x:t.columns,y:t.rows},rowPixelSpacing:void 0===t.rowPixelSpacing?1:t.rowPixelSpacing,columnPixelSpacing:void 0===t.columnPixelSpacing?1:t.columnPixelSpacing,presentationSizeMode:"NONE"}}}},"./internal/getImageFitScale.js":function(e,t,n){"use strict";n.r(t);var r=n("./internal/validator.js"),a=n("./internal/getImageSize.js");t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(r.validateParameterUndefinedOrNull)(e,"getImageScale: parameter windowSize must not be undefined"),Object(r.validateParameterUndefinedOrNull)(t,"getImageScale: parameter image must not be undefined");var i=Object(a.default)(t,n),o=t.rowPixelSpacing||1,s=t.columnPixelSpacing||1,l=1,u=1;o<s?u=s/o:l=o/s;var d=e.height/i.height/l,c=e.width/i.width/u;return{verticalScale:d,horizontalScale:c,scaleFactor:Math.min(c,d)}}},"./internal/getImageSize.js":function(e,t,n){"use strict";n.r(t);var r=n("./internal/validator.js");t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(r.validateParameterUndefinedOrNull)(e,"getImageSize: parameter image must not be undefined"),Object(r.validateParameterUndefinedOrNull)(e.width,"getImageSize: parameter image must have width"),Object(r.validateParameterUndefinedOrNull)(e.height,"getImageSize: parameter image must have height"),function(e){return!(null==e||0===e||180===e)}(t)?{height:e.width,width:e.height}:{width:e.width,height:e.height}}},"./internal/getModalityLUT.js":function(e,t,n){"use strict";n.r(t),t.default=function(e,t,n){return n?function(e){var t=e.lut[0],n=e.lut[e.lut.length-1],r=e.firstValueMapped+e.lut.length;return function(a){return a<e.firstValueMapped?t:a>=r?n:e.lut[a]}}(n):function(e,t){return function(n){return n*e+t}}(e,t)}},"./internal/getTransform.js":function(e,t,n){"use strict";n.r(t);var r=n("./internal/calculateTransform.js");t.default=function(e){return Object(r.default)(e)}},"./internal/getVOILut.js":function(e,t,n){"use strict";n.r(t),t.default=function(e,t,n){return n?function(e){var t,n=Math.max.apply(Math,(t=e.lut,function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(t)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}())).toString(2).length-8,r=e.lut[0]>>n,a=e.lut[e.lut.length-1]>>n,i=e.firstValueMapped+e.lut.length-1;return function(t){return t<e.firstValueMapped?r:t>=i?a:e.lut[t-e.firstValueMapped]>>n}}(n):function(e,t){return function(n){return 255*((n-t)/e+.5)}}(e,t)}},"./internal/guid.js":function(e,t,n){"use strict";function r(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}n.r(t),t.default=function(){return"".concat(r()+r(),"-").concat(r(),"-").concat(r(),"-").concat(r(),"-").concat(r()).concat(r()).concat(r())}},"./internal/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./internal/drawImage.js"),a=n("./internal/generateLut.js"),i=n("./internal/getDefaultViewport.js"),o=n("./internal/requestAnimationFrame.js"),s=n("./internal/storedPixelDataToCanvasImageData.js"),l=n("./internal/storedPixelDataToCanvasImageDataRGBA.js"),u=n("./internal/storedColorPixelDataToCanvasImageData.js"),d=n("./internal/storedPixelDataToCanvasImageDataColorLUT.js"),c=n("./internal/storedPixelDataToCanvasImageDataPseudocolorLUT.js"),f=n("./internal/getTransform.js"),h=n("./internal/calculateTransform.js"),p=n("./internal/transform.js");t.default={drawImage:r.default,generateLut:a.default,getDefaultViewport:i.default,requestAnimationFrame:o.default,storedPixelDataToCanvasImageData:s.default,storedPixelDataToCanvasImageDataRGBA:l.default,storedPixelDataToCanvasImageDataColorLUT:d.default,storedPixelDataToCanvasImageDataPseudocolorLUT:c.default,storedColorPixelDataToCanvasImageData:u.default,getTransform:f.default,calculateTransform:h.default,Transform:p.Transform}},"./internal/now.js":function(e,t,n){"use strict";n.r(t),t.default=function(){return window.performance?performance.now():Date.now()}},"./internal/requestAnimationFrame.js":function(e,t,n){"use strict";n.r(t),t.default=function(e){return window.requestAnimationFrame(e)||window.webkitRequestAnimationFrame(e)||window.mozRequestAnimationFrame(e)||window.oRequestAnimationFrame(e)||window.msRequestAnimationFrame(e)||function(e){return window.setTimeout(e,1e3/60)}(e)}},"./internal/storedColorPixelDataToCanvasImageData.js":function(e,t,n){"use strict";n.r(t);var r=n("./internal/now.js");t.default=function(e,t,n){var a=Object(r.default)(),i=e.getPixelData();e.stats.lastGetPixelDataTime=Object(r.default)()-a;var o=e.minPixelValue,s=0,l=0,u=i.length;if(a=Object(r.default)(),o<0)for(;l<u;)n[s++]=t[i[l++]+-o],n[s++]=t[i[l++]+-o],n[s]=t[i[l]+-o],l+=2,s+=2;else for(;l<u;)n[s++]=t[i[l++]],n[s++]=t[i[l++]],n[s]=t[i[l]],l+=2,s+=2;e.stats.lastStoredPixelDataToCanvasImageDataTime=Object(r.default)()-a}},"./internal/storedPixelDataToCanvasImageData.js":function(e,t,n){"use strict";n.r(t);var r=n("./internal/now.js");t.default=function(e,t,n){var a=Object(r.default)(),i=e.getPixelData();e.stats.lastGetPixelDataTime=Object(r.default)()-a;var o=i.length,s=e.minPixelValue,l=3,u=0;if(a=Object(r.default)(),i instanceof Int16Array)if(s<0)for(;u<o;)n[l]=t[i[u++]+-s],l+=4;else for(;u<o;)n[l]=t[i[u++]],l+=4;else if(i instanceof Uint16Array)for(;u<o;)n[l]=t[i[u++]],l+=4;else if(s<0)for(;u<o;)n[l]=t[i[u++]+-s],l+=4;else for(;u<o;)n[l]=t[i[u++]],l+=4;e.stats.lastStoredPixelDataToCanvasImageDataTime=Object(r.default)()-a}},"./internal/storedPixelDataToCanvasImageDataColorLUT.js":function(e,t,n){"use strict";n.r(t);var r=n("./colors/index.js"),a=n("./internal/now.js");t.default=function(e,t,n){var i=Object(a.default)(),o=e.getPixelData();e.stats.lastGetPixelDataTime=Object(a.default)()-i;var s,l,u=o.length,d=e.minPixelValue,c=0,f=0;if(i=Object(a.default)(),l=t instanceof r.default.LookupTable?t.Table:t,d<0)for(;f<u;)s=l[o[f++]+-d],n[c++]=s[0],n[c++]=s[1],n[c++]=s[2],n[c++]=s[3];else for(;f<u;)s=l[o[f++]],n[c++]=s[0],n[c++]=s[1],n[c++]=s[2],n[c++]=s[3];e.stats.lastStoredPixelDataToCanvasImageDataTime=Object(a.default)()-i}},"./internal/storedPixelDataToCanvasImageDataPseudocolorLUT.js":function(e,t,n){"use strict";n.r(t);var r=n("./colors/index.js"),a=n("./internal/now.js");t.default=function(e,t,n,i){var o=Object(a.default)(),s=e.getPixelData();e.stats.lastGetPixelDataTime=Object(a.default)()-o;var l,u,d,c=s.length,f=e.minPixelValue,h=0,p=0;if(o=Object(a.default)(),d=n instanceof r.default.LookupTable?n.Table:n,f<0)for(;p<c;)l=t[s[p++]+-f],i[h++]=(u=d[l])[0],i[h++]=u[1],i[h++]=u[2],i[h++]=u[3];else for(;p<c;)l=t[s[p++]],i[h++]=(u=d[l])[0],i[h++]=u[1],i[h++]=u[2],i[h++]=u[3];e.stats.lastStoredPixelDataToCanvasImageDataTime=Object(a.default)()-o}},"./internal/storedPixelDataToCanvasImageDataRGBA.js":function(e,t,n){"use strict";n.r(t);var r=n("./internal/now.js");t.default=function(e,t,n){var a=Object(r.default)(),i=e.getPixelData();e.stats.lastGetPixelDataTime=Object(r.default)()-a;var o,s=i.length,l=e.minPixelValue,u=0,d=0;if(a=Object(r.default)(),i instanceof Int16Array)if(l<0)for(;d<s;)o=t[i[d++]+-l],n[u++]=o,n[u++]=o,n[u++]=o,n[u++]=255;else for(;d<s;)o=t[i[d++]],n[u++]=o,n[u++]=o,n[u++]=o,n[u++]=255;else if(i instanceof Uint16Array)for(;d<s;)o=t[i[d++]],n[u++]=o,n[u++]=o,n[u++]=o,n[u++]=255;else if(l<0)for(;d<s;)o=t[i[d++]+-l],n[u++]=o,n[u++]=o,n[u++]=o,n[u++]=255;else for(;d<s;)o=t[i[d++]],n[u++]=o,n[u++]=o,n[u++]=o,n[u++]=255;e.stats.lastStoredPixelDataToCanvasImageDataTime=Object(r.default)()-a}},"./internal/storedRGBAPixelDataToCanvasImageData.js":function(e,t,n){"use strict";n.r(t);var r=n("./internal/now.js");t.default=function(e,t,n){var a=Object(r.default)(),i=e.getPixelData();e.stats.lastGetPixelDataTime=Object(r.default)()-a;var o=e.minPixelValue,s=0,l=0,u=i.length;if(a=Object(r.default)(),o<0)for(;l<u;)n[s++]=t[i[l++]+-o],n[s++]=t[i[l++]+-o],n[s++]=t[i[l++]+-o],n[s++]=i[l++];else for(;l<u;)n[s++]=t[i[l++]],n[s++]=t[i[l++]],n[s++]=t[i[l++]],n[s++]=i[l++];e.stats.lastStoredPixelDataToCanvasImageDataTime=Object(r.default)()-a}},"./internal/transform.js":function(e,t,n){"use strict";n.r(t),n.d(t,"Transform",function(){return r});var r=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.reset()}var t;return(t=[{key:"reset",value:function(){this.m=[1,0,0,1,0,0]}},{key:"clone",value:function(){var t=new e;return t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5],t}},{key:"multiply",value:function(e){var t=this.m[1]*e.m[0]+this.m[3]*e.m[1],n=this.m[0]*e.m[2]+this.m[2]*e.m[3],r=this.m[1]*e.m[2]+this.m[3]*e.m[3],a=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],i=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];this.m[0]=this.m[0]*e.m[0]+this.m[2]*e.m[1],this.m[1]=t,this.m[2]=n,this.m[3]=r,this.m[4]=a,this.m[5]=i}},{key:"invert",value:function(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),t=-this.m[1]*e,n=-this.m[2]*e,r=this.m[0]*e,a=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),i=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);this.m[0]=this.m[3]*e,this.m[1]=t,this.m[2]=n,this.m[3]=r,this.m[4]=a,this.m[5]=i}},{key:"rotate",value:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.m[1]*t+this.m[3]*n,a=this.m[0]*-n+this.m[2]*t,i=this.m[1]*-n+this.m[3]*t;this.m[0]=this.m[0]*t+this.m[2]*n,this.m[1]=r,this.m[2]=a,this.m[3]=i}},{key:"translate",value:function(e,t){this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t}},{key:"scale",value:function(e,t){this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t}},{key:"transformPoint",value:function(e,t){var n=e;return{x:e=n*this.m[0]+t*this.m[2]+this.m[4],y:t=n*this.m[1]+t*this.m[3]+this.m[5]}}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}()},"./internal/tryEnableWebgl.js":function(e,t,n){"use strict";n.r(t);var r=n("./webgl/index.js");t.default=function(e){return r.default.renderer.isWebGLAvailable()?(r.default.renderer.initRenderer(),e.renderer="webgl",!0):(console.error("WebGL not available, falling back to Canvas renderer"),delete e.renderer,!1)}},"./internal/validator.js":function(e,t,n){"use strict";function r(e,t){if(void 0===e)throw new Error(t)}function a(e,t){if(null==e)throw new Error(t)}n.r(t),n.d(t,"validateParameterUndefined",function(){return r}),n.d(t,"validateParameterUndefinedOrNull",function(){return a})},"./invalidate.js":function(e,t,n){"use strict";n.r(t);var r=n("./enabledElements.js"),a=n("./triggerEvent.js"),i=n("./events.js");t.default=function(e){var t=Object(r.getEnabledElement)(e);t.invalid=!0,t.needsRedraw=!0;var n={element:e};Object(a.default)(e,i.default.INVALIDATED,n)}},"./invalidateImageId.js":function(e,t,n){"use strict";n.r(t);var r=n("./enabledElements.js"),a=n("./internal/drawImage.js");t.default=function(e){Object(r.getEnabledElementsByImageId)(e).forEach(function(e){Object(a.default)(e,!0)})}},"./layers.js":function(e,t,n){"use strict";n.r(t),n.d(t,"rescaleImage",function(){return d}),n.d(t,"addLayer",function(){return c}),n.d(t,"removeLayer",function(){return f}),n.d(t,"getLayer",function(){return h}),n.d(t,"getLayers",function(){return p}),n.d(t,"getVisibleLayers",function(){return m}),n.d(t,"setActiveLayer",function(){return g}),n.d(t,"setLayerImage",function(){return v}),n.d(t,"getActiveLayer",function(){return y}),n.d(t,"purgeLayers",function(){return b});var r=n("./internal/guid.js"),a=n("./enabledElements.js"),i=n("./internal/getDefaultViewport.js"),o=n("./updateImage.js"),s=n("./triggerEvent.js"),l=n("./events.js");function u(e,t,n){var r=t.element,a={viewport:t.viewport,element:t.element,image:t.image,enabledElement:t,layerId:n};Object(s.default)(r,e,a)}function d(e,t){if(e.layerId===t.layerId)throw new Error("rescaleImage: both arguments represent the same layer");var n=e.image,r=t.image;n.imageId&&r.imageId&&(t.viewport.scale=e.viewport.scale*(t.viewport.scale/e.viewport.scale*(t.viewport.displayedArea.columnPixelSpacing*r.width/(e.viewport.displayedArea.columnPixelSpacing*n.width))))}function c(e,t,n){var o,s=Object(r.default)(),c=Object(a.getEnabledElement)(e),f=c.layers;t&&(o=Object(i.default)(c.canvas,t),n&&n.viewport&&(o=Object.assign(o,n.viewport))),!1!==c.syncViewports&&(c.syncViewports=!0);var h={image:t,layerId:s,viewport:o,options:n||{},renderingTools:{}};return f.length&&t&&d(f[0],h),f.push(h),u(l.default.LAYER_ADDED,c,s),1===f.length&&t&&g(e,s),s}function f(e,t){var n=Object(a.getEnabledElement)(e),r=n.layers,i=n.layers.findIndex(function(e){return e.layerId===t});-1!==i&&(r.splice(i,1),t===n.activeLayerId&&r.length&&g(e,r[0].layerId),u(l.default.LAYER_REMOVED,n,t))}function h(e,t){return Object(a.getEnabledElement)(e).layers.find(function(e){return e.layerId===t})}function p(e){return Object(a.getEnabledElement)(e).layers}function m(e){return Object(a.getEnabledElement)(e).layers.filter(function(e){return e.options&&!1!==e.options.visible&&0!==e.options.opacity})}function g(e,t){var n=Object(a.getEnabledElement)(e);if(n.activeLayerId!==t){var r=n.layers.findIndex(function(e){return e.layerId===t});if(-1===r)throw new Error("setActiveLayer: layer not found in layers array");var i=n.layers[r];if(!i.image)throw new Error("setActiveLayer: layer with undefined image cannot be set as active.");n.activeLayerId=t,n.image=i.image,n.viewport=i.viewport,Object(o.default)(e),u(l.default.ACTIVE_LAYER_CHANGED,n,t)}}function v(e,t,n){var r,o=Object(a.getEnabledElement)(e),s=o.layers[0];if(!(r=n?h(e,n):y(e)))throw new Error("setLayerImage: Layer not found");if(r.image=t,t){if(!r.viewport){var l=Object(i.default)(o.canvas,t);r.options&&r.options.viewport&&(r.viewport=Object.assign(l,r.options.viewport)),s.layerId!==n&&d(s,r)}}else r.viewport=void 0}function y(e){var t=Object(a.getEnabledElement)(e);return t.layers.find(function(e){return e.layerId===t.activeLayerId})}function b(e){var t=Object(a.getEnabledElement)(e);t.layers=[],delete t.activeLayerId,delete t.lastSyncViewportsState}},"./metaData.js":function(e,t,n){"use strict";n.r(t),n.d(t,"addProvider",function(){return a}),n.d(t,"removeProvider",function(){return i});var r=[];function a(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(t=0;t<r.length&&!(r[t].priority<=n);t++);r.splice(t,0,{priority:n,provider:e})}function i(e){for(var t=0;t<r.length;t++)if(r[t].provider===e){r.splice(t,1);break}}t.default={addProvider:a,removeProvider:i,get:function(e,t){for(var n=0;n<r.length;n++){var a=r[n].provider(e,t);if(void 0!==a)return a}}}},"./pageToPixel.js":function(e,t,n){"use strict";n.r(t);var r=n("./enabledElements.js"),a=n("./internal/getTransform.js");t.default=function(e,t,n){var i=Object(r.getEnabledElement)(e);if(void 0===i.image)throw new Error("image has not been loaded yet");var o=e.getBoundingClientRect(),s={x:t-o.left-window.pageXOffset,y:n-o.top-window.pageYOffset},l=Object(a.default)(i);return l.invert(),l.transformPoint(s.x,s.y)}},"./pixelDataToFalseColorData.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return a});var r=n("./colors/index.js");function a(e,t){if(e.color&&!e.falseColor)throw new Error("Color transforms are not implemented yet");var n,a,i=e.minPixelValue,o=0,s=0,l=e.width*e.height,u=e.origPixelData||e.getPixelData(),d=new Uint8Array(4*l);if(e.color=!0,e.falseColor=!0,e.origPixelData=u,t instanceof r.default.LookupTable)for(t.build();s<l;)n=u[s++],a=t.mapValue(n),d[o++]=a[0],d[o++]=a[1],d[o++]=a[2],d[o++]=a[3];else if(i<0)for(;s<l;)n=u[s++],d[o++]=t[n+-i][0],d[o++]=t[n+-i][1],d[o++]=t[n+-i][2],d[o++]=t[n+-i][3];else for(;s<l;)n=u[s++],d[o++]=t[n][0],d[o++]=t[n][1],d[o++]=t[n][2],d[o++]=t[n][3];e.rgba=!0,e.cachedLut=void 0,e.render=void 0,e.slope=1,e.intercept=0,e.minPixelValue=0,e.maxPixelValue=255,e.windowWidth=255,e.windowCenter=128,e.getPixelData=function(){return d}}},"./pixelToCanvas.js":function(e,t,n){"use strict";n.r(t);var r=n("./enabledElements.js"),a=n("./internal/getTransform.js");t.default=function(e,t){var n=Object(r.getEnabledElement)(e);return Object(a.default)(n).transformPoint(t.x,t.y)}},"./rendering/doesImageNeedToBeRendered.js":function(e,t,n){"use strict";n.r(t),t.default=function(e,t){var n=e.renderingTools.lastRenderedViewport;return t.imageId!==e.renderingTools.lastRenderedImageId||!n||n.windowCenter!==e.viewport.voi.windowCenter||n.windowWidth!==e.viewport.voi.windowWidth||n.invert!==e.viewport.invert||n.rotation!==e.viewport.rotation||n.hflip!==e.viewport.hflip||n.vflip!==e.viewport.vflip||n.modalityLUT!==e.viewport.modalityLUT||n.voiLUT!==e.viewport.voiLUT||n.colormap!==e.viewport.colormap}},"./rendering/getLut.js":function(e,t,n){"use strict";n.r(t);var r=n("./internal/computeAutoVoi.js"),a=n("./rendering/lutMatches.js"),i=n("./internal/generateLut.js");t.default=function(e,t,n){return void 0!==e.cachedLut&&e.cachedLut.windowCenter===t.voi.windowCenter&&e.cachedLut.windowWidth===t.voi.windowWidth&&Object(a.default)(e.cachedLut.modalityLUT,t.modalityLUT)&&Object(a.default)(e.cachedLut.voiLUT,t.voiLUT)&&e.cachedLut.invert===t.invert&&!0!==n?e.cachedLut.lutArray:(Object(r.default)(t,e),Object(i.default)(e,t.voi.windowWidth,t.voi.windowCenter,t.invert,t.modalityLUT,t.voiLUT),e.cachedLut.windowWidth=t.voi.windowWidth,e.cachedLut.windowCenter=t.voi.windowCenter,e.cachedLut.invert=t.invert,e.cachedLut.voiLUT=t.voiLUT,e.cachedLut.modalityLUT=t.modalityLUT,e.cachedLut.lutArray)}},"./rendering/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./rendering/renderColorImage.js"),a=n("./rendering/renderGrayscaleImage.js"),i=n("./rendering/renderWebImage.js"),o=n("./rendering/renderPseudoColorImage.js"),s=n("./rendering/renderLabelMapImage.js"),l=n("./rendering/renderToCanvas.js");t.default={colorImage:r.renderColorImage,grayscaleImage:a.renderGrayscaleImage,webImage:i.renderWebImage,pseudoColorImage:o.renderPseudoColorImage,labelMapImage:s.renderLabelMapImage,toCanvas:l.default}},"./rendering/initializeRenderCanvas.js":function(e,t,n){"use strict";n.r(t),t.default=function(e,t){var n=e.renderingTools.renderCanvas;n.width=t.width,n.height=t.height;var r=n.getContext("2d");r.fillStyle="white",r.fillRect(0,0,n.width,n.height);var a=r.getImageData(0,0,t.width,t.height);e.renderingTools.renderCanvasContext=r,e.renderingTools.renderCanvasData=a}},"./rendering/lutMatches.js":function(e,t,n){"use strict";n.r(t),t.default=function(e,t){return!e&&!t||!(!e||!t)&&e.id===t.id}},"./rendering/renderColorImage.js":function(e,t,n){"use strict";n.r(t),n.d(t,"renderColorImage",function(){return h}),n.d(t,"addColorLayer",function(){return p});var r=n("./internal/now.js"),a=n("./internal/generateColorLut.js"),i=n("./internal/storedColorPixelDataToCanvasImageData.js"),o=n("./internal/storedRGBAPixelDataToCanvasImageData.js"),s=n("./setToPixelCoordinateSystem.js"),l=n("./webgl/index.js"),u=n("./rendering/doesImageNeedToBeRendered.js"),d=n("./rendering/initializeRenderCanvas.js"),c=n("./rendering/saveLastRendered.js");function f(e,t,n){e.renderingTools.renderCanvas&&!0===e.renderingTools.lastRenderedIsColor||(e.renderingTools.renderCanvas=document.createElement("canvas"));var s=e.renderingTools.renderCanvas;if(255===e.viewport.voi.windowWidth&&128===e.viewport.voi.windowCenter&&!1===e.viewport.invert&&t.getCanvas&&t.getCanvas())return t.getCanvas();if(!1===Object(u.default)(e,t)&&!0!==n)return s;s.width===t.width&&s.height===t.height||Object(d.default)(e,t);var l=Object(r.default)(),c=function(e,t){return void 0!==e.cachedLut&&e.cachedLut.windowCenter===t.voi.windowCenter&&e.cachedLut.windowWidth===t.voi.windowWidth&&e.cachedLut.invert===t.invert?e.cachedLut.lutArray:(Object(a.default)(e,t.voi.windowWidth,t.voi.windowCenter,t.invert),e.cachedLut.windowWidth=t.voi.windowWidth,e.cachedLut.windowCenter=t.voi.windowCenter,e.cachedLut.invert=t.invert,e.cachedLut.lutArray)}(t,e.viewport);t.stats=t.stats||{},t.stats.lastLutGenerateTime=Object(r.default)()-l;var f=e.renderingTools.renderCanvasData,h=e.renderingTools.renderCanvasContext;return t.rgba?Object(o.default)(t,c,f.data):Object(i.default)(t,c,f.data),l=Object(r.default)(),h.putImageData(f,0,0),t.stats.lastPutImageDataTime=Object(r.default)()-l,s}function h(e,t){if(void 0===e)throw new Error("renderColorImage: enabledElement parameter must not be undefined");var n=e.image;if(void 0===n)throw new Error("renderColorImage: image must be loaded before it can be drawn");var r,a=e.canvas.getContext("2d");a.setTransform(1,0,0,1,0,0),a.fillStyle="black",a.fillRect(0,0,e.canvas.width,e.canvas.height),a.imageSmoothingEnabled=!e.viewport.pixelReplication,a.mozImageSmoothingEnabled=a.imageSmoothingEnabled,Object(s.default)(e,a),r=e.options&&e.options.renderer&&"webgl"===e.options.renderer.toLowerCase()?l.default.renderer.render(e):f(e,n,t);var i=e.viewport.displayedArea.tlhc.x-1,o=e.viewport.displayedArea.tlhc.y-1,u=e.viewport.displayedArea.brhc.x-i,d=e.viewport.displayedArea.brhc.y-o;a.drawImage(r,i,o,u,d,0,0,u,d),e.renderingTools=Object(c.default)(e)}function p(e,t){if(void 0===e)throw new Error("addColorLayer: layer parameter must not be undefined");var n=e.image;if(void 0===n)throw new Error("addColorLayer: image must be loaded before it can be drawn");n.rgba=!0,e.canvas=f(e,n,t);var r=e.canvas.getContext("2d");r.imageSmoothingEnabled=!e.viewport.pixelReplication,r.mozImageSmoothingEnabled=r.imageSmoothingEnabled,e.renderingTools=Object(c.default)(e)}},"./rendering/renderGrayscaleImage.js":function(e,t,n){"use strict";n.r(t),n.d(t,"renderGrayscaleImage",function(){return h}),n.d(t,"addGrayscaleLayer",function(){return p});var r=n("./internal/storedPixelDataToCanvasImageData.js"),a=n("./internal/storedPixelDataToCanvasImageDataRGBA.js"),i=n("./setToPixelCoordinateSystem.js"),o=n("./internal/now.js"),s=n("./webgl/index.js"),l=n("./rendering/getLut.js"),u=n("./rendering/doesImageNeedToBeRendered.js"),d=n("./rendering/initializeRenderCanvas.js"),c=n("./rendering/saveLastRendered.js");function f(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e.renderingTools.renderCanvas&&!0!==e.renderingTools.lastRenderedIsColor||(e.renderingTools.renderCanvas=document.createElement("canvas"),Object(d.default)(e,t));var s=e.renderingTools.renderCanvas;if(!1===Object(u.default)(e,t)&&!0!==n)return s;s.width===t.width&&s.height===t.height||Object(d.default)(e,t);var c=Object(o.default)(),f=Object(l.default)(t,e.viewport,n);t.stats=t.stats||{},t.stats.lastLutGenerateTime=Object(o.default)()-c;var h=e.renderingTools.renderCanvasData,p=e.renderingTools.renderCanvasContext;return i?Object(r.default)(t,f,h.data):Object(a.default)(t,f,h.data),c=Object(o.default)(),p.putImageData(h,0,0),t.stats.lastPutImageDataTime=Object(o.default)()-c,s}function h(e,t){if(void 0===e)throw new Error("drawImage: enabledElement parameter must not be undefined");var n=e.image;if(void 0===n)throw new Error("drawImage: image must be loaded before it can be drawn");var r,a=e.canvas.getContext("2d");a.setTransform(1,0,0,1,0,0),a.fillStyle="black",a.fillRect(0,0,e.canvas.width,e.canvas.height),a.imageSmoothingEnabled=!e.viewport.pixelReplication,a.mozImageSmoothingEnabled=a.imageSmoothingEnabled,Object(i.default)(e,a),r=e.options&&e.options.renderer&&"webgl"===e.options.renderer.toLowerCase()?s.default.renderer.render(e):f(e,n,t);var o=e.viewport.displayedArea.tlhc.x-1,l=e.viewport.displayedArea.tlhc.y-1,u=e.viewport.displayedArea.brhc.x-o,d=e.viewport.displayedArea.brhc.y-l;a.drawImage(r,o,l,u,d,0,0,u,d),e.renderingTools=Object(c.default)(e)}function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0===e)throw new Error("addGrayscaleLayer: layer parameter must not be undefined");var r=e.image;if(void 0===r)throw new Error("addGrayscaleLayer: image must be loaded before it can be drawn");e.canvas=f(e,r,t,n);var a=e.canvas.getContext("2d");a.imageSmoothingEnabled=!e.viewport.pixelReplication,a.mozImageSmoothingEnabled=a.imageSmoothingEnabled,e.renderingTools=Object(c.default)(e)}},"./rendering/renderLabelMapImage.js":function(e,t,n){"use strict";n.r(t),n.d(t,"renderLabelMapImage",function(){return c}),n.d(t,"addLabelMapLayer",function(){return f});var r=n("./setToPixelCoordinateSystem.js"),a=n("./internal/now.js"),i=n("./rendering/initializeRenderCanvas.js"),o=n("./rendering/saveLastRendered.js"),s=n("./rendering/doesImageNeedToBeRendered.js"),l=n("./internal/storedPixelDataToCanvasImageDataColorLUT.js"),u=n("./colors/index.js");function d(e,t,n){e.renderingTools.renderCanvas||(e.renderingTools.renderCanvas=document.createElement("canvas"));var r=e.renderingTools.renderCanvas,o=e.viewport.colormap||e.options.colormap;if(e.options.colormap&&console.warn("enabledElement.options.colormap is deprecated. Use enabledElement.viewport.colormap instead"),o&&"string"==typeof o&&(o=u.default.getColormap(o)),!o)throw new Error("renderLabelMapImage: colormap not found.");var d=o.getId();if(!1===Object(s.default)(e,t)&&!0!==n&&e.renderingTools.colormapId===d)return r;r.width===t.width&&r.height===t.height||Object(i.default)(e,t);var c=Object(a.default)();e.renderingTools.colorLut&&!n&&e.renderingTools.colormapId===d||(e.renderingTools.colorLut=o.createLookupTable(),e.renderingTools.colormapId=d),t.stats=t.stats||{},t.stats.lastLutGenerateTime=Object(a.default)()-c;var f=e.renderingTools.colorLut,h=e.renderingTools.renderCanvasData,p=e.renderingTools.renderCanvasContext;return Object(l.default)(t,f,h.data),c=Object(a.default)(),p.putImageData(h,0,0),t.stats.lastPutImageDataTime=Object(a.default)()-c,r}function c(e,t){if(void 0===e)throw new Error("renderLabelMapImage: enabledElement parameter must not be undefined");var n=e.image;if(void 0===n)throw new Error("renderLabelMapImage: image must be loaded before it can be drawn");var a=e.canvas.getContext("2d");a.setTransform(1,0,0,1,0,0),a.fillStyle="black",a.fillRect(0,0,e.canvas.width,e.canvas.height),a.imageSmoothingEnabled=!e.viewport.pixelReplication,a.mozImageSmoothingEnabled=a.imageSmoothingEnabled,Object(r.default)(e,a);var i=d(e,n,t),s=e.viewport.displayedArea.tlhc.x-1,l=e.viewport.displayedArea.tlhc.y-1,u=e.viewport.displayedArea.brhc.x-s,c=e.viewport.displayedArea.brhc.y-l;a.drawImage(i,s,l,u,c,0,0,u,c),e.renderingTools=Object(o.default)(e)}function f(e,t){if(void 0===e)throw new Error("addLabelMapLayer: layer parameter must not be undefined");var n=e.image;if(void 0===n)throw new Error("addLabelMapLayer: image must be loaded before it can be drawn");e.canvas=d(e,n,t);var r=e.canvas.getContext("2d");r.imageSmoothingEnabled=!e.viewport.pixelReplication,r.mozImageSmoothingEnabled=r.imageSmoothingEnabled,e.renderingTools=Object(o.default)(e)}},"./rendering/renderPseudoColorImage.js":function(e,t,n){"use strict";n.r(t),n.d(t,"renderPseudoColorImage",function(){return f}),n.d(t,"addPseudoColorLayer",function(){return h});var r=n("./setToPixelCoordinateSystem.js"),a=n("./internal/now.js"),i=n("./rendering/initializeRenderCanvas.js"),o=n("./rendering/getLut.js"),s=n("./rendering/saveLastRendered.js"),l=n("./rendering/doesImageNeedToBeRendered.js"),u=n("./internal/storedPixelDataToCanvasImageDataPseudocolorLUT.js"),d=n("./colors/index.js");function c(e,t,n){e.renderingTools.renderCanvas||(e.renderingTools.renderCanvas=document.createElement("canvas"));var r=e.renderingTools.renderCanvas,s=e.viewport.colormap||e.options.colormap;if(e.options.colormap&&console.warn("enabledElement.options.colormap is deprecated. Use enabledElement.viewport.colormap instead"),s&&"string"==typeof s&&(s=d.default.getColormap(s)),!s)throw new Error("renderPseudoColorImage: colormap not found.");var c=s.getId();if(!1===Object(l.default)(e,t)&&!0!==n&&e.renderingTools.colormapId===c)return r;r.width===t.width&&r.height===t.height||Object(i.default)(e,t);var f=Object(a.default)();e.renderingTools.colorLut&&!n&&e.renderingTools.colormapId===c||(s.setNumberOfColors(256),e.renderingTools.colorLut=s.createLookupTable(),e.renderingTools.colormapId=c);var h=Object(o.default)(t,e.viewport,n);t.stats=t.stats||{},t.stats.lastLutGenerateTime=Object(a.default)()-f;var p=e.renderingTools.colorLut,m=e.renderingTools.renderCanvasData,g=e.renderingTools.renderCanvasContext;return Object(u.default)(t,h,p,m.data),f=Object(a.default)(),g.putImageData(m,0,0),t.stats.lastPutImageDataTime=Object(a.default)()-f,r}function f(e,t){if(void 0===e)throw new Error("drawImage: enabledElement parameter must not be undefined");var n=e.image;if(void 0===n)throw new Error("drawImage: image must be loaded before it can be drawn");var a=e.canvas.getContext("2d");a.setTransform(1,0,0,1,0,0),a.fillStyle="black",a.fillRect(0,0,e.canvas.width,e.canvas.height),a.imageSmoothingEnabled=!e.viewport.pixelReplication,a.mozImageSmoothingEnabled=a.imageSmoothingEnabled,Object(r.default)(e,a);var i=c(e,n,t),o=e.viewport.displayedArea.tlhc.x-1,l=e.viewport.displayedArea.tlhc.y-1,u=e.viewport.displayedArea.brhc.x-o,d=e.viewport.displayedArea.brhc.y-l;a.drawImage(i,o,l,u,d,0,0,u,d),e.renderingTools=Object(s.default)(e)}function h(e,t){if(void 0===e)throw new Error("addPseudoColorLayer: layer parameter must not be undefined");var n=e.image;if(void 0===n)throw new Error("addPseudoColorLayer: image must be loaded before it can be drawn");e.canvas=c(e,n,t);var r=e.canvas.getContext("2d");r.imageSmoothingEnabled=!e.viewport.pixelReplication,r.mozImageSmoothingEnabled=r.imageSmoothingEnabled,e.renderingTools=Object(s.default)(e)}},"./rendering/renderToCanvas.js":function(e,t,n){"use strict";n.r(t);var r=n("./triggerEvent.js"),a=n("./events.js"),i=n("./internal/drawImageSync.js"),o=n("./internal/getDefaultViewport.js"),s=n("./internal/tryEnableWebgl.js");t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(void 0===e)throw new Error("renderToCanvas: parameter canvas cannot be undefined");l&&l.renderer&&"webgl"===l.renderer.toLowerCase()&&Object(s.default)(l);var u=Object(o.default)(e,t);n&&Object.assign(u,n);var d=function(e,t,n,r){return{element:e,canvas:e,image:t,invalid:!0,needsRedraw:!0,options:n,layers:[],data:{},renderingTools:{},viewport:u}}(e,t,l),c={enabledElement:d,timestamp:Date.now()};Object(r.default)(d.element,a.default.PRE_RENDER,c),Object(i.default)(d,d.invalid)}},"./rendering/renderWebImage.js":function(e,t,n){"use strict";n.r(t),n.d(t,"renderWebImage",function(){return i});var r=n("./setToPixelCoordinateSystem.js"),a=n("./rendering/renderColorImage.js");function i(e,t){if(void 0===e)throw new Error("renderWebImage: enabledElement parameter must not be undefined");var n=e.image;if(void 0===n)throw new Error("renderWebImage: image must be loaded before it can be drawn");if(e.viewport.voi.windowWidth===e.image.windowWidth&&e.viewport.voi.windowCenter===e.image.windowCenter&&!1===e.viewport.invert){var i=e.canvas.getContext("2d");i.setTransform(1,0,0,1,0,0),i.fillStyle="black",i.fillRect(0,0,e.canvas.width,e.canvas.height),i.imageSmoothingEnabled=!e.viewport.pixelReplication,i.mozImageSmoothingEnabled=i.imageSmoothingEnabled,Object(r.default)(e,i);var o=e.viewport.displayedArea.tlhc.x-1,s=e.viewport.displayedArea.tlhc.y-1,l=e.viewport.displayedArea.brhc.x-o,u=e.viewport.displayedArea.brhc.y-s;i.drawImage(n.getImage(),o,s,l,u,0,0,l,u)}else Object(a.renderColorImage)(e,t)}},"./rendering/saveLastRendered.js":function(e,t,n){"use strict";n.r(t),t.default=function(e){var t=e.viewport,n=e.image.color;return e.renderingTools.lastRenderedImageId=e.image.imageId,e.renderingTools.lastRenderedIsColor=n,e.renderingTools.lastRenderedViewport={windowCenter:t.voi.windowCenter,windowWidth:t.voi.windowWidth,invert:t.invert,rotation:t.rotation,hflip:t.hflip,vflip:t.vflip,modalityLUT:t.modalityLUT,voiLUT:t.voiLUT,colormap:t.colormap},e.renderingTools}},"./reset.js":function(e,t,n){"use strict";n.r(t);var r=n("./enabledElements.js"),a=n("./internal/getDefaultViewport.js"),i=n("./updateImage.js");t.default=function(e){var t=Object(r.getEnabledElement)(e);t.viewport=Object(a.default)(t.canvas,t.image),Object(i.default)(e)}},"./resize.js":function(e,t,n){"use strict";n.r(t);var r=n("./enabledElements.js"),a=n("./fitToWindow.js"),i=n("./updateImage.js"),o=n("./triggerEvent.js"),s=n("./internal/getImageSize.js"),l=n("./events.js");t.default=function(e,t){var n=Object(r.getEnabledElement)(e),u=n.canvas.width,d=n.canvas.height;!function(e,t){t.width!==e.clientWidth&&(t.width=e.clientWidth,t.style.width="".concat(e.clientWidth,"px")),t.height!==e.clientHeight&&(t.height=e.clientHeight,t.style.height="".concat(e.clientHeight,"px"))}(e,n.canvas);var c={element:e};Object(o.default)(e,l.default.ELEMENT_RESIZED,c),void 0!==n.image&&(t||function(e,t,n){var r=e.viewport.scale,a=Object(s.default)(e.image,e.viewport.rotation),i=Math.round(a.width*r),o=Math.round(a.height*r);return i===t&&o<=n||i<=t&&o===n&&0===e.viewport.translation.x&&0===e.viewport.translation.y}(n,u,d)?Object(a.default)(e):(function(e,t,n){var r=e.viewport.scale,a=Math.sqrt(e.canvas.width/t*(e.canvas.height/n));e.viewport.scale=a*r}(n,u,d),Object(i.default)(e)))}},"./setToPixelCoordinateSystem.js":function(e,t,n){"use strict";n.r(t);var r=n("./internal/calculateTransform.js");t.default=function(e,t,n){if(void 0===e)throw new Error("setToPixelCoordinateSystem: parameter enabledElement must not be undefined");if(void 0===t)throw new Error("setToPixelCoordinateSystem: parameter context must not be undefined");var a=Object(r.default)(e,n);t.setTransform(a.m[0],a.m[1],a.m[2],a.m[3],a.m[4],a.m[5])}},"./setViewport.js":function(e,t,n){"use strict";n.r(t);var r=n("./internal/getDefaultViewport.js"),a=n("./enabledElements.js"),i=n("./updateImage.js");t.default=function(e,t){var n=Object(a.getEnabledElement)(e);if(void 0===n.viewport&&(n.viewport=Object(r.default)(n.canvas)),t)for(var o in t)null!==t[o]&&(n.viewport[o]=t[o]);n.viewport.voi.windowWidth&&(n.viewport.voi.windowWidth=Math.max(t.voi.windowWidth,1e-6)),n.viewport.scale&&(n.viewport.scale=Math.max(t.scale,1e-4)),n.viewport.rotation%=360,n.viewport.rotation<0&&(n.viewport.rotation+=360),n.image&&Object(i.default)(e)}},"./triggerEvent.js":function(e,t,n){"use strict";function r(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return"function"==typeof window.CustomEvent?n=new CustomEvent(t,{detail:r,cancelable:!0}):(n=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,r),e.dispatchEvent(n)}n.r(t),n.d(t,"default",function(){return r})},"./updateImage.js":function(e,t,n){"use strict";n.r(t);var r=n("./enabledElements.js"),a=n("./internal/drawImage.js");t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(r.getEnabledElement)(e);if(void 0===n.image&&!n.layers.length)throw new Error("updateImage: image has not been loaded yet");Object(a.default)(n,t)}},"./webgl/createProgramFromString.js":function(e,t,n){"use strict";function r(e,t,n){var r=e.createShader(n);if(e.shaderSource(r,t),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)&&!e.isContextLost()){var a=e.getShaderInfoLog(r);console.error("Could not compile shader:\n".concat(a))}return r}n.r(t),t.default=function(e,t,n){return function(e,t,n){var r=e.createProgram();if(e.attachShader(r,t),e.attachShader(r,n),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS)&&!e.isContextLost()){var a=e.getProgramInfoLog(r);console.error("WebGL program filed to link:\n".concat(a))}return r}(e,r(e,t,e.VERTEX_SHADER),r(e,n,e.FRAGMENT_SHADER))}},"./webgl/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./webgl/renderer.js"),a=n("./webgl/createProgramFromString.js"),i=n("./webgl/textureCache.js"),o={createProgramFromString:a.default,renderer:{render:r.render,initRenderer:r.initRenderer,getRenderCanvas:r.getRenderCanvas,isWebGLAvailable:r.isWebGLAvailable},textureCache:i.default};Object.defineProperty(o,"isWebGLInitialized",{enumerable:!0,configurable:!1,get:function(){return r.isWebGLInitialized}}),t.default=o},"./webgl/renderer.js":function(e,t,n){"use strict";n.r(t),n.d(t,"isWebGLInitialized",function(){return c}),n.d(t,"getRenderCanvas",function(){return f}),n.d(t,"initRenderer",function(){return h}),n.d(t,"render",function(){return v}),n.d(t,"isWebGLAvailable",function(){return y});var r,a,i,o=n("./webgl/shaders/index.js"),s=n("./webgl/vertexShader.js"),l=n("./webgl/textureCache.js"),u=n("./webgl/createProgramFromString.js"),d=document.createElement("canvas"),c=!1;function f(){return d}function h(){!0!==c&&function(e){r=null;try{var t={preserveDrawingBuffer:!0};r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),e.removeEventListener("webglcontextlost",p,!1),e.addEventListener("webglcontextlost",p,!1),e.removeEventListener("webglcontextrestored",m,!1),e.addEventListener("webglcontextrestored",m,!1)}catch(n){throw new Error("Error creating WebGL context")}return r||(console.error("Unable to initialize WebGL. Your browser may not support it."),r=null),r}(d)&&(i=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,i),r.bufferData(r.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,0]),r.STATIC_DRAW),a=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,a),r.bufferData(r.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,0]),r.STATIC_DRAW),function(){for(var e in o.shaders){var t=o.shaders[e];t.attributes={},t.uniforms={},t.vert=s.vertexShader,t.program=Object(u.default)(r,t.vert,t.frag),t.attributes.texCoordLocation=r.getAttribLocation(t.program,"a_texCoord"),r.enableVertexAttribArray(t.attributes.texCoordLocation),t.attributes.positionLocation=r.getAttribLocation(t.program,"a_position"),r.enableVertexAttribArray(t.attributes.positionLocation),t.uniforms.resolutionLocation=r.getUniformLocation(t.program,"u_resolution")}}(),c=!0)}function p(e){e.preventDefault(),console.warn("WebGL Context Lost!")}function m(e){e.preventDefault(),c=!1,l.default.purgeCache(),h()}function g(e){if(e.color)return"rgb";var t=e.getPixelData();return t instanceof Int16Array?"int16":t instanceof Uint16Array?"uint16":t instanceof Int8Array?"int8":"uint8"}function v(e){var t=e.image;d.width=t.width,d.height=t.height;var n=e.viewport,s=function(e){var t=g(e);return o.shaders.hasOwnProperty(t)?o.shaders[t]:o.shaders.rgb}(t),u=function(e){var t=l.default.getImageTexture(e.imageId);return t||(t=function(e){var t={uint8:r.LUMINANCE,int8:r.LUMINANCE_ALPHA,uint16:r.LUMINANCE_ALPHA,int16:r.RGB,rgb:r.RGB},n=g(e),a=t[n],i=r.createTexture();r.bindTexture(r.TEXTURE_2D,i),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.pixelStorei(r.UNPACK_ALIGNMENT,1);var s=o.dataUtilities[n].storedPixelDataToImageData(e,e.width,e.height);return r.texImage2D(r.TEXTURE_2D,0,a,e.width,e.height,0,a,r.UNSIGNED_BYTE,s),{texture:i,sizeInBytes:e.width*e.height*{int8:1,uint16:2,int16:3,rgb:3}[n]}}(e),l.default.putImageTexture(e,t)),t.texture}(t);return function(e,t,n,o,s){for(var l in r.clearColor(1,0,0,1),r.viewport(0,0,o,s),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),r.useProgram(e.program),r.bindBuffer(r.ARRAY_BUFFER,a),r.vertexAttribPointer(e.attributes.texCoordLocation,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,i),r.vertexAttribPointer(e.attributes.positionLocation,2,r.FLOAT,!1,0,0),t){var u=r.getUniformLocation(e.program,l);if(u){var d=t[l],c=d.type,f=d.value;"i"===c?r.uniform1i(u,f):"f"===c?r.uniform1f(u,f):"2f"===c&&r.uniform2f(u,f[0],f[1])}}!function(e,t,n){e.bufferData(e.ARRAY_BUFFER,new Float32Array([t,n,0,n,t,0,0,0]),e.STATIC_DRAW)}(r,o,s),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,n),r.drawArrays(r.TRIANGLE_STRIP,0,4)}(s,{u_resolution:{type:"2f",value:[t.width,t.height]},wc:{type:"f",value:n.voi.windowCenter},ww:{type:"f",value:n.voi.windowWidth},slope:{type:"f",value:t.slope},intercept:{type:"f",value:t.intercept},minPixelValue:{type:"f",value:t.minPixelValue},invert:{type:"i",value:n.invert?1:0}},u,t.width,t.height),d}function y(){var e={failIfMajorPerformanceCaveat:!0};try{var t=document.createElement("canvas");return Boolean(window.WebGLRenderingContext)&&(t.getContext("webgl",e)||t.getContext("experimental-webgl",e))}catch(n){return!1}}},"./webgl/shaders/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,"shaders",function(){return l}),n.d(t,"dataUtilities",function(){return u});var r=n("./webgl/shaders/int16.js"),a=n("./webgl/shaders/int8.js"),i=n("./webgl/shaders/rgb.js"),o=n("./webgl/shaders/uint16.js"),s=n("./webgl/shaders/uint8.js"),l={int16:r.int16Shader,int8:a.int8Shader,rgb:i.rgbShader,uint16:o.uint16Shader,uint8:s.uint8Shader},u={int16:r.int16DataUtilities,int8:a.int8DataUtilities,rgb:i.rgbDataUtilities,uint16:o.uint16DataUtilities,uint8:s.uint8DataUtilities}},"./webgl/shaders/int16.js":function(e,t,n){"use strict";n.r(t),n.d(t,"int16DataUtilities",function(){return a}),n.d(t,"int16Shader",function(){return r});var r={},a={storedPixelDataToImageData:function(e){for(var t=e.getPixelData(),n=new Uint8Array(e.width*e.height*3),r=0,a=0;a<t.length;a++){var i=Math.abs(t[a]);n[r++]=255&i,n[r++]=i>>8,n[r++]=t[a]<0?0:1}return n}};r.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.0 + color.g*65536.0;if (color.b == 0.0)intensity = -intensity;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}"},"./webgl/shaders/int8.js":function(e,t,n){"use strict";n.r(t),n.d(t,"int8DataUtilities",function(){return a}),n.d(t,"int8Shader",function(){return r});var r={},a={storedPixelDataToImageData:function(e){for(var t=e.getPixelData(),n=new Uint8Array(e.width*e.height*2),r=0,a=0;a<t.length;a++)n[r++]=t[a],n[r++]=t[a]<0?0:1;return n}};r.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.;if (color.a == 0.0)intensity = -intensity;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}"},"./webgl/shaders/rgb.js":function(e,t,n){"use strict";n.r(t),n.d(t,"rgbDataUtilities",function(){return a}),n.d(t,"rgbShader",function(){return r});var r={},a={storedPixelDataToImageData:function(e){var t=e.minPixelValue,n=0,r=0,a=e.width*e.height*4,i=e.width*e.height*3,o=e.getPixelData(),s=new Uint8Array(i);if(t<0)for(;r<a;)s[n++]=o[r++]+-t,s[n++]=o[r++]+-t,s[n++]=o[r++]+-t,r+=1;else for(;r<a;)s[n++]=o[r++],s[n++]=o[r++],s[n++]=o[r++],r+=1;return s}};r.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform float minPixelValue;uniform int invert;varying vec2 v_texCoord;void main() {vec3 color = texture2D(u_image, v_texCoord).xyz;color = color * 256.0 * slope + intercept;float center0 = wc - 0.5 - minPixelValue;float width0 = max(ww, 1.0);color = (color - center0) / width0 + 0.5;gl_FragColor = vec4(color, 1);if (invert == 1)gl_FragColor.rgb = 1. - gl_FragColor.rgb;}"},"./webgl/shaders/uint16.js":function(e,t,n){"use strict";n.r(t),n.d(t,"uint16DataUtilities",function(){return a}),n.d(t,"uint16Shader",function(){return r});var r={},a={storedPixelDataToImageData:function(e){for(var t=e.getPixelData(),n=new Uint8Array(e.width*e.height*2),r=0,a=0;a<t.length;a++){var i=t[a];n[r++]=255&i,n[r++]=i>>8}return n}};r.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.0 + color.a*65536.0;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}"},"./webgl/shaders/uint8.js":function(e,t,n){"use strict";n.r(t),n.d(t,"uint8DataUtilities",function(){return a}),n.d(t,"uint8Shader",function(){return r});var r={},a={storedPixelDataToImageData:function(e){return e.getPixelData()}};r.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.0;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}"},"./webgl/textureCache.js":function(e,t,n){"use strict";n.r(t);var r=n("./events.js"),a=n("./triggerEvent.js"),i={},o=[],s=268435456,l=0;function u(){if(!(l<=s)){for(o.sort(function(e,t){return e.timeStamp>t.timeStamp?-1:e.timeStamp<t.timeStamp?1:0});l>s;){var e=o[o.length-1];l-=e.sizeInBytes,delete i[e.imageId],o.pop(),Object(a.default)(r.events,r.default.WEBGL_TEXTURE_REMOVED,{imageId:e.imageId})}var t={maximumSizeInBytes:s,cacheSizeInBytes:l,numberOfImagesCached:o.length};Object(a.default)(r.events,r.default.WEBGL_TEXTURE_CACHE_FULL,t)}}t.default={purgeCache:function(){for(;o.length>0;){var e=o.pop();delete i[e.imageId]}l=0},getImageTexture:function(e){if(void 0===e)throw new Error("getImageTexture: imageId must not be undefined");var t=i[e];if(void 0!==t)return t.timeStamp=new Date,t.imageTexture},putImageTexture:function(e,t){var n=e.imageId;if(void 0===e)throw new Error("putImageTexture: image must not be undefined");if(void 0===n)throw new Error("putImageTexture: imageId must not be undefined");if(void 0===t)throw new Error("putImageTexture: imageTexture must not be undefined");if(!0===Object.prototype.hasOwnProperty.call(i,n))throw new Error("putImageTexture: imageId already in cache");var r={imageId:n,imageTexture:t,timeStamp:new Date,sizeInBytes:t.sizeInBytes};if(i[n]=r,o.push(r),void 0===t.sizeInBytes)throw new Error("putImageTexture: imageTexture.sizeInBytes must not be undefined");if(void 0===t.sizeInBytes.toFixed)throw new Error("putImageTexture: imageTexture.sizeInBytes is not a number");l+=r.sizeInBytes,u()},removeImageTexture:function(e){if(void 0===e)throw new Error("removeImageTexture: imageId must not be undefined");var t=i[e];if(void 0===t)throw new Error("removeImageTexture: imageId must not be undefined");return o.splice(o.indexOf(t),1),l-=t.sizeInBytes,delete i[e],t.imageTexture},setMaximumSizeBytes:function(e){if(void 0===e)throw new Error("setMaximumSizeBytes: parameter numBytes must not be undefined");if(void 0===e.toFixed)throw new Error("setMaximumSizeBytes: parameter numBytes must be a number");s=e,u()}}},"./webgl/vertexShader.js":function(e,t,n){"use strict";n.r(t),n.d(t,"vertexShader",function(){return r});var r="attribute vec2 a_position;attribute vec2 a_texCoord;uniform vec2 u_resolution;varying vec2 v_texCoord;void main() {vec2 zeroToOne = a_position / u_resolution;vec2 zeroToTwo = zeroToOne * 2.0;vec2 clipSpace = zeroToTwo - 1.0;gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);v_texCoord = a_texCoord;}"}})}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("cornerstoneTools",[],t):"object"==typeof exports?exports.cornerstoneTools=t():e.cornerstoneTools=t()}(window,function(){return function(e){var t=window.webpackHotUpdate_name_;window.webpackHotUpdate_name_=function(e,n){!function(e,t){if(x[e]&&w[e]){for(var n in w[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(m[n]=t[n]);0==--v&&0===y&&j()}}(e,n),t&&t(e,n)};var n,r=!0,a="4ae613a7a980e43aeebe",i=1e4,o={},s=[],l=[];function u(e){var t=C[e];if(!t)return O;var r=function(r){return t.hot.active?(C[r]?-1===C[r].parents.indexOf(e)&&C[r].parents.push(e):(s=[e],n=r),-1===t.children.indexOf(r)&&t.children.push(r)):(console.warn("[HMR] unexpected require("+r+") from disposed module "+e),s=[]),O(r)},a=function(e){return{configurable:!0,enumerable:!0,get:function(){return O[e]},set:function(t){O[e]=t}}};for(var i in O)Object.prototype.hasOwnProperty.call(O,i)&&"e"!==i&&Object.defineProperty(r,i,a(i));return r.e=function(e){return"ready"===f&&h("prepare"),y++,O.e(e).then(t,function(e){throw t(),e});function t(){y--,"prepare"===f&&(b[e]||T(e),0===y&&0===v&&j())}},r}function d(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:n!==e,active:!0,accept:function(e,n){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._acceptedDependencies[e[r]]=n||function(){};else t._acceptedDependencies[e]=n||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:E,apply:S,status:function(e){if(!e)return f;c.push(e)},addStatusHandler:function(e){c.push(e)},removeStatusHandler:function(e){var t=c.indexOf(e);t>=0&&c.splice(t,1)},data:o[e]};return n=void 0,t}var c=[],f="idle";function h(e){f=e;for(var t=0;t<c.length;t++)c[t].call(null,e)}var p,m,g,v=0,y=0,b={},w={},x={};function _(e){return+e+""===e?+e:e}function E(e){if("idle"!==f)throw new Error("check() is only allowed in idle status");return r=e,h("check"),(t=i,t=t||1e4,new Promise(function(e,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var r=new XMLHttpRequest,i=O.p+""+a+".hot-update.json";r.open("GET",i,!0),r.timeout=t,r.send(null)}catch(o){return n(o)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)n(new Error("Manifest request to "+i+" timed out."));else if(404===r.status)e();else if(200!==r.status&&304!==r.status)n(new Error("Manifest request to "+i+" failed."));else{try{var t=JSON.parse(r.responseText)}catch(a){return void n(a)}e(t)}}})).then(function(e){if(!e)return h("idle"),null;w={},b={},x=e.c,g=e.h,h("prepare");var t=new Promise(function(e,t){p={resolve:e,reject:t}});return m={},T("cornerstoneTools"),"prepare"===f&&0===y&&0===v&&j(),t});var t}function T(e){x[e]?(w[e]=!0,v++,function(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("script");n.charset="utf-8",n.src=O.p+""+e+"."+a+".hot-update.js",t.appendChild(n)}(e)):b[e]=!0}function j(){h("ready");var e=p;if(p=null,e)if(r)Promise.resolve().then(function(){return S(r)}).then(function(t){e.resolve(t)},function(t){e.reject(t)});else{var t=[];for(var n in m)Object.prototype.hasOwnProperty.call(m,n)&&t.push(_(n));e.resolve(t)}}function S(t){if("ready"!==f)throw new Error("apply() is only allowed in ready status");var n,r,i,l,u;function d(e){for(var t=[e],n={},r=t.slice().map(function(e){return{chain:[e],id:e}});r.length>0;){var a=r.pop(),i=a.id,o=a.chain;if((l=C[i])&&!l.hot._selfAccepted){if(l.hot._selfDeclined)return{type:"self-declined",chain:o,moduleId:i};if(l.hot._main)return{type:"unaccepted",chain:o,moduleId:i};for(var s=0;s<l.parents.length;s++){var u=l.parents[s],d=C[u];if(d){if(d.hot._declinedDependencies[i])return{type:"declined",chain:o.concat([u]),moduleId:i,parentId:u};-1===t.indexOf(u)&&(d.hot._acceptedDependencies[i]?(n[u]||(n[u]=[]),c(n[u],[i])):(delete n[u],t.push(u),r.push({chain:o.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}t=t||{};var p={},v=[],y={},b=function(){console.warn("[HMR] unexpected require("+E.moduleId+") to disposed module")};for(var w in m)if(Object.prototype.hasOwnProperty.call(m,w)){var E;u=_(w);var T=!1,j=!1,S=!1,P="";switch((E=m[w]?d(u):{type:"disposed",moduleId:w}).chain&&(P="\nUpdate propagation: "+E.chain.join(" -> ")),E.type){case"self-declined":t.onDeclined&&t.onDeclined(E),t.ignoreDeclined||(T=new Error("Aborted because of self decline: "+E.moduleId+P));break;case"declined":t.onDeclined&&t.onDeclined(E),t.ignoreDeclined||(T=new Error("Aborted because of declined dependency: "+E.moduleId+" in "+E.parentId+P));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(E),t.ignoreUnaccepted||(T=new Error("Aborted because "+u+" is not accepted"+P));break;case"accepted":t.onAccepted&&t.onAccepted(E),j=!0;break;case"disposed":t.onDisposed&&t.onDisposed(E),S=!0;break;default:throw new Error("Unexception type "+E.type)}if(T)return h("abort"),Promise.reject(T);if(j)for(u in y[u]=m[u],c(v,E.outdatedModules),E.outdatedDependencies)Object.prototype.hasOwnProperty.call(E.outdatedDependencies,u)&&(p[u]||(p[u]=[]),c(p[u],E.outdatedDependencies[u]));S&&(c(v,[E.moduleId]),y[u]=b)}var I,M=[];for(r=0;r<v.length;r++)C[u=v[r]]&&C[u].hot._selfAccepted&&M.push({module:u,errorHandler:C[u].hot._selfAccepted});h("dispose"),Object.keys(x).forEach(function(e){!1===x[e]&&function(e){delete installedChunks[e]}(e)});for(var D,L=v.slice();L.length>0;)if(u=L.pop(),l=C[u]){var A={},k=l.hot._disposeHandlers;for(i=0;i<k.length;i++)(n=k[i])(A);for(o[u]=A,l.hot.active=!1,delete C[u],delete p[u],i=0;i<l.children.length;i++){var R=C[l.children[i]];R&&(I=R.parents.indexOf(u))>=0&&R.parents.splice(I,1)}}for(u in p)if(Object.prototype.hasOwnProperty.call(p,u)&&(l=C[u]))for(D=p[u],i=0;i<D.length;i++)(I=l.children.indexOf(D[i]))>=0&&l.children.splice(I,1);for(u in h("apply"),a=g,y)Object.prototype.hasOwnProperty.call(y,u)&&(e[u]=y[u]);var U=null;for(u in p)if(Object.prototype.hasOwnProperty.call(p,u)&&(l=C[u])){D=p[u];var N=[];for(r=0;r<D.length;r++)if(n=l.hot._acceptedDependencies[D[r]]){if(-1!==N.indexOf(n))continue;N.push(n)}for(r=0;r<N.length;r++){n=N[r];try{n(D)}catch(H){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:u,dependencyId:D[r],error:H}),t.ignoreErrored||U||(U=H)}}}for(r=0;r<M.length;r++){var B=M[r];s=[u=B.module];try{O(u)}catch(H){if("function"==typeof B.errorHandler)try{B.errorHandler(H)}catch(F){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:u,error:F,originalError:H}),t.ignoreErrored||U||(U=F),U||(U=H)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:u,error:H}),t.ignoreErrored||U||(U=H)}}return U?(h("fail"),Promise.reject(U)):(h("idle"),new Promise(function(e){e(v)}))}var C={};function O(t){if(C[t])return C[t].exports;var n=C[t]={i:t,l:!1,exports:{},hot:d(t),parents:(l=s,s=[],l),children:[]};return e[t].call(n.exports,n,n.exports,u(t)),n.l=!0,n.exports}return O.m=e,O.c=C,O.d=function(e,t,n){O.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},O.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},O.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return O.d(t,"a",t),t},O.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},O.p="",O.h=function(){return a},u("./index.js")(O.s="./index.js")}({"./events.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={MOUSE_DOWN:"cornerstonetoolsmousedown",MOUSE_UP:"cornerstonetoolsmouseup",MOUSE_DOWN_ACTIVATE:"cornerstonetoolsmousedownactivate",MOUSE_DRAG:"cornerstonetoolsmousedrag",MOUSE_MOVE:"cornerstonetoolsmousemove",MOUSE_CLICK:"cornerstonetoolsmouseclick",MOUSE_DOUBLE_CLICK:"cornerstonetoolsmousedoubleclick",MOUSE_WHEEL:"cornerstonetoolsmousewheel",TOUCH_START:"cornerstonetoolstouchstart",TOUCH_START_ACTIVE:"cornerstonetoolstouchstartactive",TOUCH_END:"cornerstonetoolstouchend",TOUCH_DRAG:"cornerstonetoolstouchdrag",TOUCH_DRAG_END:"cornerstonetoolstouchdragend",TOUCH_PINCH:"cornerstonetoolstouchpinch",TOUCH_ROTATE:"cornerstonetoolstouchrotate",TOUCH_PRESS:"cornerstonetoolstouchpress",TAP:"cornerstonetoolstap",DOUBLE_TAP:"cornerstonetoolsdoubletap",MULTI_TOUCH_START:"cornerstonetoolsmultitouchstart",MULTI_TOUCH_START_ACTIVE:"cornerstonetoolsmultitouchstartactive",MULTI_TOUCH_DRAG:"cornerstonetoolsmultitouchdrag",KEY_DOWN:"cornerstonetoolskeydown",KEY_UP:"cornerstonetoolskeyup",KEY_PRESS:"cornerstonetoolskeypress",MEASUREMENT_ADDED:"cornerstonetoolsmeasurementadded",MEASUREMENT_MODIFIED:"cornerstonetoolsmeasurementmodified",MEASUREMENT_REMOVED:"cornerstonemeasurementremoved",TOOL_DEACTIVATED:"cornerstonetoolstooldeactivated",CLIP_STOPPED:"cornerstonetoolsclipstopped",STACK_SCROLL:"cornerstonestackscroll",LINE_SAMPLE_UPDATED:"cornerstonelinesampleupdated"}},"./externalModules.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=window.cornerstone,a=window.cornerstoneMath,i=window.Hammer;t.default={set cornerstone(e){r=e},get cornerstone(){return r},set cornerstoneMath(e){a=e},get cornerstoneMath(){return a},set Hammer(e){i=e},get Hammer(){return i}}},"./imageTools/angleTool.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.angleTouch=t.angle=void 0;var r=h(n("./externalModules.js")),a=h(n("./imageTools/mouseButtonTool.js")),i=h(n("./imageTools/touchTool.js")),o=h(n("./util/drawTextBox.js")),s=h(n("./util/roundToDecimal.js")),l=h(n("./stateManagement/toolColors.js")),u=h(n("./manipulators/drawHandles.js")),d=n("./stateManagement/toolState.js"),c=h(n("./util/lineSegDistance.js")),f=n("./util/drawing.js");function h(e){return e&&e.__esModule?e:{default:e}}var p="angle";function m(e){return{visible:!0,active:!0,color:void 0,handles:{start:{x:e.currentPoints.image.x-20,y:e.currentPoints.image.y+10,highlight:!0,active:!1},end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!0},start2:{x:e.currentPoints.image.x-20,y:e.currentPoints.image.y+10,highlight:!0,active:!1},end2:{x:e.currentPoints.image.x,y:e.currentPoints.image.y+20,highlight:!0,active:!1}}}}function g(e,t,n){return!1!==t.visible&&((0,c.default)(e,t.handles.start,t.handles.end,n)<5||(0,c.default)(e,t.handles.start2,t.handles.end2,n)<5)}function v(e){var t=e.detail,n=(0,d.getToolState)(e.currentTarget,p);if(void 0!==n)for(var a=(0,f.getNewContext)(t.canvasContext.canvas),i=y.getConfiguration(),c=r.default.cornerstone,h=function(e){var r=n.data[e];if(!1===r.visible)return"continue";(0,f.draw)(a,function(e){(0,f.setShadow)(e,i);var n=l.default.getColorIfActive(r);(0,f.drawJoinedLines)(e,t.element,r.handles.end,[r.handles.start,r.handles.end2],{color:n}),(0,u.default)(e,t,r.handles);var a=t.image.columnPixelSpacing||1,d=t.image.rowPixelSpacing||1,h=(Math.ceil(r.handles.start.x)-Math.ceil(r.handles.end.x))*a,p=(Math.ceil(r.handles.start.y)-Math.ceil(r.handles.end.y))*d,m=(Math.ceil(r.handles.start2.x)-Math.ceil(r.handles.end2.x))*a,g=(Math.ceil(r.handles.start2.y)-Math.ceil(r.handles.end2.y))*d,v=Math.acos(Math.abs((h*m+p*g)/(Math.sqrt(h*h+p*p)*Math.sqrt(m*m+g*g))));v*=180/Math.PI;var y=(0,s.default)(v,2).toString()+String.fromCharCode(parseInt("00B0",16)),b=c.pixelToCanvas(t.element,r.handles.start2),w=c.pixelToCanvas(t.element,r.handles.end2);(0,o.default)(e,y,(b.x+w.x)/2,(b.y+w.y)/2,n)})},m=0;m<n.data.length;m++)h(m)}var y=(0,a.default)({createNewMeasurement:m,onImageRendered:v,pointNearTool:g,toolType:p}),b=(0,i.default)({createNewMeasurement:m,onImageRendered:v,pointNearTool:g,toolType:p});t.angle=y,t.angleTouch=b},"./imageTools/arrowAnnotate.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrowAnnotateTouch=t.arrowAnnotate=void 0;var r=T(n("./events.js")),a=T(n("./externalModules.js")),i=T(n("./imageTools/mouseButtonTool.js")),o=T(n("./imageTools/touchTool.js")),s=T(n("./stateManagement/toolStyle.js")),l=T(n("./stateManagement/textStyle.js")),u=T(n("./stateManagement/toolColors.js")),d=T(n("./manipulators/drawHandles.js")),c=T(n("./util/drawArrow.js")),f=T(n("./manipulators/moveNewHandle.js")),h=T(n("./manipulators/moveNewHandleTouch.js")),p=T(n("./manipulators/anyHandlesOutsideImage.js")),m=T(n("./util/isMouseButtonEnabled.js")),g=T(n("./util/pointInsideBoundingBox.js")),v=T(n("./util/drawLinkedTextBox.js")),y=n("./stateManagement/toolState.js"),b=n("./toolOptions.js"),w=T(n("./util/lineSegDistance.js")),x=n("./util/drawing.js"),_=n("./util/drawTextBox.js"),E=T(n("./util/triggerEvent.js"));function T(e){return e&&e.__esModule?e:{default:e}}var j="arrowAnnotate",S={getTextCallback:function(e){e(prompt("Enter your annotation:"))},changeTextCallback:function(e,t,n){n(prompt("Change your annotation:"))},drawHandles:!1,drawHandlesOnHover:!0,arrowFirst:!0};function C(e){return{visible:!0,active:!0,color:void 0,handles:{start:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!1},end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!1},textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}}}function O(e,t,n){return!1!==t.visible&&(0,w.default)(e,t.handles.start,t.handles.end,n)<25}function P(e){var t=e.detail,n=(0,y.getToolState)(e.currentTarget,j);if(n)for(var r=t.enabledElement,i=a.default.cornerstone,o=(0,x.getNewContext)(t.canvasContext.canvas),f=s.default.getToolWidth(),h=I.getConfiguration(),p=function(e){var a=n.data[e];if(!1===a.visible)return"continue";(0,x.draw)(o,function(e){(0,x.setShadow)(e,h);var n=u.default.getColorIfActive(a),o=i.pixelToCanvas(t.element,a.handles.start),s=i.pixelToCanvas(t.element,a.handles.end);h.arrowFirst?(0,c.default)(e,s,o,n,f):(0,c.default)(e,o,s,n,f),h.drawHandles&&(0,d.default)(e,t,a.handles,n,{drawHandlesIfActive:h&&h.drawHandlesOnHover});var p=function(e){return e.text}(a);if(p&&""!==p){var m=(0,_.textBoxWidth)(e,p,5),y=l.default.getFontSize()+10,b=Math.max(m,y)/2+5;if(s.x<o.x&&(b=-b),!a.handles.textBox.hasMoved){var w;w=h.arrowFirst?{x:s.x-m/2+b,y:s.y-y/2}:{x:o.x-m/2-b,y:o.y-y/2};var E=i.internal.getTransform(r);E.invert();var T=E.transformPoint(w.x,w.y);a.handles.textBox.x=T.x,a.handles.textBox.y=T.y}(0,v.default)(e,t.element,a.handles.textBox,p,a.handles,g,n,f,0,!1)}})},m=0;m<n.data.length;m++)p(m);function g(e){return[e.start,{x:(e.start.x+e.end.x)/2,y:(e.start.y+e.end.y)/2},e.end]}}var I=(0,i.default)({addNewMeasurement:function(e){var t=e.element,n=C(e),i=a.default.cornerstone;function o(e){null===e?(0,y.removeToolState)(t,j,n):n.text=e,n.active=!1,i.updateImage(t),(0,E.default)(t,r.default.MEASUREMENT_MODIFIED,{toolType:j,element:t,measurementData:n}),t.addEventListener(r.default.MOUSE_MOVE,I.mouseMoveCallback),t.addEventListener(r.default.MOUSE_DOWN,I.mouseDownCallback),t.addEventListener(r.default.MOUSE_DOWN_ACTIVATE,I.mouseDownActivateCallback),t.addEventListener(r.default.MOUSE_DOUBLE_CLICK,I.mouseDoubleClickCallback)}(0,y.addToolState)(t,j,n),t.removeEventListener(r.default.MOUSE_MOVE,I.mouseMoveCallback),t.removeEventListener(r.default.MOUSE_DOWN,I.mouseDownCallback),t.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,I.mouseDownActivateCallback),t.removeEventListener(r.default.MOUSE_DOUBLE_CLICK,I.mouseDoubleClickCallback),i.updateImage(t),(0,f.default)(e,j,n,n.handles.end,function(){(0,p.default)(e,n.handles)&&(0,y.removeToolState)(t,j,n);var r=I.getConfiguration();void 0===n.text&&r.getTextCallback(o),i.updateImage(t)})},createNewMeasurement:C,onImageRendered:P,pointNearTool:O,toolType:j,mouseDoubleClickCallback:function(e){var t=e.detail,n=t.element,r=a.default.cornerstone,i=(0,b.getToolOptions)(j,n),o=void 0;if((0,m.default)(t.which,i.mouseButtonMask)){var s=I.getConfiguration(),l=t.currentPoints.canvas,u=(0,y.getToolState)(n,j);if(u)for(var d=0;d<u.data.length;d++)if(O(n,o=u.data[d],l)||(0,g.default)(o.handles.textBox,l))return o.active=!0,r.updateImage(n),s.changeTextCallback(o,t,c),e.stopImmediatePropagation(),!1}function c(e,t,a){!0===a?(0,y.removeToolState)(n,j,e):e.text=t,e.active=!1,r.updateImage(n)}}});I.setConfiguration(S);var M=(0,o.default)({addNewMeasurement:function(e){var t=e.element,n=C(e),i=a.default.cornerstone;function o(e){null===e?(0,y.removeToolState)(t,j,n):n.text=e,n.active=!1,i.updateImage(t),(0,E.default)(t,r.default.MEASUREMENT_MODIFIED,{toolType:j,element:t,measurementData:n}),t.addEventListener(r.default.TOUCH_PRESS,M.pressCallback),t.addEventListener(r.default.TOUCH_START_ACTIVE,M.touchDownActivateCallback),t.addEventListener(r.default.TAP,M.tapCallback)}(0,y.addToolState)(t,j,n),t.removeEventListener(r.default.TOUCH_PRESS,M.pressCallback),t.removeEventListener(r.default.TOUCH_START_ACTIVE,M.touchDownActivateCallback),t.removeEventListener(r.default.TAP,M.tapCallback),i.updateImage(t),(0,h.default)(e,j,n,n.handles.end,function(){i.updateImage(t),(0,p.default)(e,n.handles)&&(0,y.removeToolState)(t,j,n);var r=I.getConfiguration();void 0===n.text&&r.getTextCallback(o)})},createNewMeasurement:C,onImageRendered:P,pointNearTool:O,toolType:j,pressCallback:function(e){var t=e.detail,n=t.element,i=a.default.cornerstone,o=void 0;function s(e,t,a){console.log("pressCallback doneChangingTextCallback"),!0===a?(0,y.removeToolState)(n,j,e):e.text=t,e.active=!1,i.updateImage(n),n.addEventListener(r.default.TOUCH_START,M.touchStartCallback),n.addEventListener(r.default.TOUCH_START_ACTIVE,M.touchDownActivateCallback),n.addEventListener(r.default.TAP,M.tapCallback)}var l=I.getConfiguration(),u=t.currentPoints.canvas,d=(0,y.getToolState)(n,j);if(d){if(t.handlePressed)return n.removeEventListener(r.default.TOUCH_START,M.touchStartCallback),n.removeEventListener(r.default.TOUCH_START_ACTIVE,M.touchDownActivateCallback),n.removeEventListener(r.default.TAP,M.tapCallback),l.changeTextCallback(t.handlePressed,t,s),e.stopImmediatePropagation(),!1;for(var c=0;c<d.data.length;c++)if(O(n,o=d.data[c],u)||(0,g.default)(o.handles.textBox,u))return o.active=!0,i.updateImage(n),n.removeEventListener(r.default.TOUCH_START,M.touchStartCallback),n.removeEventListener(r.default.TOUCH_START_ACTIVE,M.touchDownActivateCallback),n.removeEventListener(r.default.TAP,M.tapCallback),l.changeTextCallback(o,t,s),e.stopImmediatePropagation(),!1;e.preventDefault(),e.stopPropagation()}}});t.arrowAnnotate=I,t.arrowAnnotateTouch=M},"./imageTools/crosshairs.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.crosshairsTouch=t.crosshairs=void 0;var r=c(n("./events.js")),a=c(n("./externalModules.js")),i=c(n("./stateManagement/loadHandlerManager.js")),o=n("./stateManagement/toolState.js"),s=c(n("./util/isMouseButtonEnabled.js")),l=n("./util/pointProjector.js"),u=c(n("./util/convertToVector3.js")),d=n("./toolOptions.js");function c(e){return e&&e.__esModule?e:{default:e}}var f="crosshairs";function h(e){var t=e.detail;e.stopImmediatePropagation();var n=(0,o.getToolState)(e.currentTarget,f);if(n){var r=a.default.cornerstone,s=e.currentTarget,d=r.getEnabledElement(s),c=r.metaData.get("imagePlaneModule",d.image.imageId);if(c){var h=(0,l.imagePointToPatientPoint)(t.currentPoints.image,c);n.data[0].synchronizationContext.getSourceElements().forEach(function(e){if(e!==s){var t=Number.MAX_VALUE,n=-1,a=(0,o.getToolState)(e,"stack");if(void 0!==a){var l=a.data[0];if(l.imageIds.forEach(function(e,a){var i=r.metaData.get("imagePlaneModule",e);if(i&&i.imagePositionPatient&&i.rowCosines&&i.columnCosines){var o=(0,u.default)(i.imagePositionPatient),s=(0,u.default)(i.rowCosines),l=(0,u.default)(i.columnCosines).clone().cross(s.clone()),d=Math.abs(l.clone().dot(o)-l.clone().dot(h));d<t&&(t=d,n=a)}}),n!==l.currentImageIdIndex&&-1!==n&&void 0!==l.imageIds[n]){var d=i.default.getStartLoadHandler(),c=i.default.getEndLoadHandler(),f=i.default.getErrorLoadingHandler();d&&d(e),(!0===l.preventCache?r.loadImage(l.imageIds[n]):r.loadAndCacheImage(l.imageIds[n])).then(function(t){var a=r.getViewport(e);l.currentImageIdIndex=n,r.displayImage(e,t,a),c&&c(e,t)},function(t){f&&f(e,l.imageIds[n],t)})}}}})}}}function p(e){var t=e.detail.element;t.removeEventListener(r.default.MOUSE_DRAG,g),t.removeEventListener(r.default.MOUSE_UP,p)}function m(e){var t=e.detail,n=t.element,a=(0,d.getToolOptions)(f,n);(0,s.default)(t.which,a.mouseButtonMask)&&(n.addEventListener(r.default.MOUSE_DRAG,g),n.addEventListener(r.default.MOUSE_UP,p),h(e),e.preventDefault(),e.stopPropagation())}function g(e){h(e),e.preventDefault(),e.stopPropagation()}function v(e,t,n){(0,d.setToolOptions)(f,e,{mouseButtonMask:t}),(0,o.clearToolState)(e,f),(0,o.addToolState)(e,f,{synchronizationContext:n}),e.removeEventListener(r.default.MOUSE_DOWN,m),e.addEventListener(r.default.MOUSE_DOWN,m)}function y(e){e.removeEventListener(r.default.MOUSE_DOWN,m)}function b(e){var t=e.detail.element;t.removeEventListener(r.default.TOUCH_DRAG,x),t.removeEventListener(r.default.TOUCH_DRAG_END,b)}function w(e){var t=e.detail.element;return t.addEventListener(r.default.TOUCH_DRAG,x),t.addEventListener(r.default.TOUCH_DRAG_END,b),h(e),!1}function x(e){h(e),e.preventDefault(),e.stopPropagation()}function _(e,t){(0,o.clearToolState)(e,f),(0,o.addToolState)(e,f,{synchronizationContext:t}),e.removeEventListener(r.default.TOUCH_START,w),e.addEventListener(r.default.TOUCH_START,w)}function E(e){e.removeEventListener(r.default.TOUCH_START,w)}var T={activate:_,deactivate:E,enable:_,disable:E};t.crosshairs={activate:v,deactivate:y,enable:v,disable:y},t.crosshairsTouch=T},"./imageTools/displayTool.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={};return{disable:function(t){t.removeEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,e)},enable:function(t){t.removeEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,e),t.addEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,e),a.default.cornerstone.updateImage(t)},getConfiguration:function(){return t},setConfiguration:function(e){t=e}}};var r,a=(r=n("./externalModules.js"))&&r.__esModule?r:{default:r}},"./imageTools/doubleTapTool.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{activate:function(t){t.removeEventListener(a.default.DOUBLE_TAP,e),t.addEventListener(a.default.DOUBLE_TAP,e)},disable:function(t){t.removeEventListener(a.default.DOUBLE_TAP,e)},enable:function(t){t.removeEventListener(a.default.DOUBLE_TAP,e)},deactivate:function(t){t.removeEventListener(a.default.DOUBLE_TAP,e)}}};var r,a=(r=n("./events.js"))&&r.__esModule?r:{default:r}},"./imageTools/doubleTapZoom.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n("./externalModules.js"));function a(e){return e&&e.__esModule?e:{default:e}}function i(e){r.default.cornerstone.fitToWindow(e.element)}var o=(0,a(n("./imageTools/doubleTapTool.js")).default)(function(e){o.strategy(e.detail),e.preventDefault(),e.stopPropagation()});o.strategies={default:i},o.strategy=i,t.default=o},"./imageTools/dragProbe.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dragProbeTouch=t.dragProbe=void 0;var r=g(n("./events.js")),a=g(n("./externalModules.js")),i=g(n("./imageTools/simpleMouseButtonTool.js")),o=g(n("./imageTools/touchDragTool.js")),s=g(n("./stateManagement/textStyle.js")),l=g(n("./stateManagement/toolColors.js")),u=n("./util/drawTextBox.js"),d=g(u),c=g(n("./util/getRGBPixels.js")),f=g(n("./util/calculateSUV.js")),h=g(n("./util/isMouseButtonEnabled.js")),p=n("./toolOptions.js"),m=n("./util/drawing.js");function g(e){return e&&e.__esModule?e:{default:e}}var v=void 0;function y(e){var t=a.default.cornerstone,n=t.getEnabledElement(e.element),r=(0,m.getNewContext)(n.canvas),i=l.default.getActiveColor(),o=s.default.getFontSize(),u=_.getConfiguration(),h=Math.round(e.currentPoints.image.x),p=Math.round(e.currentPoints.image.y);h<0||p<0||h>=e.image.columns||p>=e.image.rows||(0,m.draw)(r,function(n){(0,m.setShadow)(n,u);var r=void 0,a=void 0,s=void 0;if(e.image.color)r=(0,c.default)(e.element,h,p,1,1),a=h+", "+p,s="R: "+r[0]+" G: "+r[1]+" B: "+r[2]+" A: "+r[3];else{var l=(r=t.getStoredPixels(e.element,h,p,1,1))[0],g=l*e.image.slope+e.image.intercept,v=(0,f.default)(e.image,l);a=h+", "+p,s="SP: "+l+" MO: "+parseFloat(g.toFixed(3)),v&&(s+=" SUV: "+parseFloat(v.toFixed(3)))}var y=t.pixelToCanvas(e.element,{x:e.currentPoints.image.x+3,y:e.currentPoints.image.y-3});(0,d.default)(n,s,y.x,y.y+o+5,i),(0,d.default)(n,a,y.x,y.y,i)})}function b(e){var t=e.detail,n=t.element;n.removeEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,w),n.removeEventListener(r.default.MOUSE_DRAG,x),n.removeEventListener(r.default.MOUSE_UP,b),n.removeEventListener(r.default.MOUSE_CLICK,b),a.default.cornerstone.updateImage(t.element)}function w(){v&&(_.strategy(v),v=null)}function x(e){var t=e.detail;v=t,a.default.cornerstone.updateImage(t.element),e.preventDefault(),e.stopPropagation()}var _=(0,i.default)(function(e){var t=e.detail,n=t.element,i=(0,p.getToolOptions)("dragProbe",n);(0,h.default)(t.which,i.mouseButtonMask)&&(n.addEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,w),n.addEventListener(r.default.MOUSE_DRAG,x),n.addEventListener(r.default.MOUSE_UP,b),n.addEventListener(r.default.MOUSE_CLICK,b),_.strategy(t),e.preventDefault(),e.stopPropagation())},"dragProbe");_.strategies={default:y,minimal:function(e){var t,n=a.default.cornerstone,r=e.element,i=n.getEnabledElement(r),o=i.image,h=(0,m.getNewContext)(i.canvas),p=l.default.getActiveColor(),g=_.getConfiguration();(t=n.pageToPixel(r,e.currentPoints.page.x,!0===e.isTouchEvent?e.currentPoints.page.y-4*s.default.getFontSize():e.currentPoints.page.y-s.default.getFontSize()/2)).x<0||t.y<0||t.x>=o.columns||t.y>=o.rows||(0,m.draw)(h,function(a){(0,m.setShadow)(a,g);var i=n.metaData.get("generalSeriesModule",o.imageId),l=void 0;i&&(l=i.modality);var h=void 0,v="";if(o.color)v="R: "+(h=(0,c.default)(r,t.x,t.y,1,1))[0]+" G: "+h[1]+" B: "+h[2];else{var y=(h=n.getStoredPixels(r,t.x,t.y,1,1))[0],b=parseFloat((y*e.image.slope+e.image.intercept).toFixed(2));if("CT"===l)v+="HU: "+b;else if("PT"===l){v+=b;var w=(0,f.default)(e.image,y);w&&(v+=" SUV: "+parseFloat(w.toFixed(2)))}else v+=b}var x,_=n.pixelToCanvas(r,t),E=(0,u.textBoxWidth)(a,v,5);x=!0===e.isTouchEvent?{x:-E/2,y:-s.default.getFontSize()-10-12}:{x:12,y:-(s.default.getFontSize()+10)/2},(0,m.drawCircle)(a,r,_,6,{color:p},"canvas"),(0,d.default)(a,v,_.x+x.x,_.y+x.y,p)})}},_.strategy=y;var E=(0,o.default)(x,"dragProbe",{fireOnTouchStart:!0,touchStartCallback:function(e){e.detail.element.addEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,w)},touchEndCallback:function(e){var t=e.detail.element;t.removeEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,w),a.default.cornerstone.updateImage(t)}});t.dragProbe=_,t.dragProbeTouch=E},"./imageTools/ellipticalRoi.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ellipticalRoiTouch=t.ellipticalRoi=void 0;var r=m(n("./externalModules.js")),a=m(n("./imageTools/mouseButtonTool.js")),i=m(n("./imageTools/touchTool.js")),o=m(n("./stateManagement/toolStyle.js")),s=m(n("./stateManagement/toolColors.js")),l=m(n("./manipulators/drawHandles.js")),u=m(n("./util/pointInEllipse.js")),d=m(n("./util/calculateEllipseStatistics.js")),c=m(n("./util/calculateSUV.js")),f=m(n("./util/drawLinkedTextBox.js")),h=n("./stateManagement/toolState.js"),p=n("./util/drawing.js");function m(e){return e&&e.__esModule?e:{default:e}}var g="ellipticalRoi";function v(e){return{visible:!0,active:!0,invalidated:!0,color:void 0,handles:{start:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!1},end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!0},textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}}}function y(e,t,n,a){if(!1===t.visible)return!1;var i=r.default.cornerstone,o=i.pixelToCanvas(e,t.handles.start),s=i.pixelToCanvas(e,t.handles.end),l={left:Math.min(o.x,s.x)+a/2,top:Math.min(o.y,s.y)+a/2,width:Math.abs(o.x-s.x)-a,height:Math.abs(o.y-s.y)-a},d={left:Math.min(o.x,s.x)-a/2,top:Math.min(o.y,s.y)-a/2,width:Math.abs(o.x-s.x)+a,height:Math.abs(o.y-s.y)+a},c=(0,u.default)(l,n);return!(!(0,u.default)(d,n)||c)}function b(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function w(e){var t=e.detail,n=(0,h.getToolState)(e.currentTarget,g);if(n){var a=r.default.cornerstone,i=t.image,u=t.element,m=o.default.getToolWidth(),v=x.getConfiguration(),y=a.metaData.get("generalSeriesModule",i.imageId),w=a.metaData.get("imagePlaneModule",i.imageId),_=void 0,E=void 0,T=void 0;w?(E=w.rowPixelSpacing||w.rowImagePixelSpacing,T=w.columnPixelSpacing||w.colImagePixelSpacing):(E=i.rowPixelSpacing,T=i.columnPixelSpacing),y&&(_=y.modality);for(var j=(0,p.getNewContext)(t.canvasContext.canvas),S=function(e){var r=n.data[e];if(!1===r.visible)return"continue";(0,p.draw)(j,function(e){(0,p.setShadow)(e,v);var n=s.default.getColorIfActive(r);(0,p.drawEllipse)(e,u,r.handles.start,r.handles.end,{color:n}),v&&v.drawHandlesOnHover?!0===r.active?(0,l.default)(e,t,r.handles,n):(0,l.default)(e,t,r.handles,n,{drawHandlesIfActive:!0}):(0,l.default)(e,t,r.handles,n);var o=void 0,h=void 0,g=void 0;if(!1===r.invalidated)h=r.meanStdDev,g=r.meanStdDevSUV,o=r.area;else{var y={left:Math.round(Math.min(r.handles.start.x,r.handles.end.x)),top:Math.round(Math.min(r.handles.start.y,r.handles.end.y)),width:Math.round(Math.abs(r.handles.start.x-r.handles.end.x)),height:Math.round(Math.abs(r.handles.start.y-r.handles.end.y))};if(!i.color){var w=a.getPixels(u,y.left,y.top,y.width,y.height);h=(0,d.default)(w,y),"PT"===_&&(g={mean:(0,c.default)(i,(h.mean-i.intercept)/i.slope),stdDev:(0,c.default)(i,(h.stdDev-i.intercept)/i.slope)}),h&&!isNaN(h.mean)&&(r.meanStdDev=h,r.meanStdDevSUV=g)}o=Math.PI*(y.width*(T||1)/2)*(y.height*(E||1)/2),isNaN(o)||(r.area=o),r.invalidated=!1}r.handles.textBox.hasMoved||(r.handles.textBox.x=Math.max(r.handles.start.x,r.handles.end.x),r.handles.textBox.y=(r.handles.start.y+r.handles.end.y)/2);var x=function(e){var t=e.meanStdDev,n=e.meanStdDevSUV,r=e.area,a=[];if(t&&void 0!==t.mean){var i="";"CT"===_&&(i=" HU");var o="Mean: "+b(t.mean.toFixed(2))+i,s="StdDev: "+b(t.stdDev.toFixed(2))+i;n&&void 0!==n.mean&&(o+=" SUV: "+b(n.mean.toFixed(2)),s+=" SUV: "+b(n.stdDev.toFixed(2))),a.push(o),a.push(s)}if(r){var l=" mm"+String.fromCharCode(178);E&&T||(l=" pixels"+String.fromCharCode(178));var u="Area: "+b(r.toFixed(2))+l;a.push(u)}return a}(r);(0,f.default)(e,u,r.handles.textBox,x,r.handles,O,n,m,0,!0)})},C=0;C<n.data.length;C++)S(C)}function O(e){var t=Math.min(e.start.x,e.end.x),n=Math.min(e.start.y,e.end.y),r=Math.abs(e.start.x-e.end.x),a=Math.abs(e.start.y-e.end.y);return[{x:t+r/2,y:n},{x:t,y:n+a/2},{x:t+r/2,y:n+a},{x:t+r,y:n+a/2}]}}var x=(0,a.default)({createNewMeasurement:v,onImageRendered:w,pointNearTool:function(e,t,n){return y(e,t,n,15)},toolType:g}),_=(0,i.default)({createNewMeasurement:v,onImageRendered:w,pointNearTool:function(e,t,n){return y(e,t,n,25)},toolType:g});t.ellipticalRoi=x,t.ellipticalRoiTouch=_},"./imageTools/eraser.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.eraserTouch=t.eraser=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(l){a=!0,i=l}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("./index.js")),i=u(n("./externalModules.js")),o=u(n("./events.js")),s=n("./toolOptions.js"),l=u(n("./imageTools/simpleTouchTool.js"));function u(e){return e&&e.__esModule?e:{default:e}}var d={supportedTools:{}};function c(e){var t=e.detail.currentPoints.canvas,n=e.detail.element,o=!1,s=!1;Object.entries(d.supportedTools).forEach(function(e){var i=r(e,2),l=i[0],u=i[1],d=a.getToolState(n,l);d&&d.data.forEach(function(e){!o&&u.pointNearTool(n,e,t)&&(a.removeToolState(n,l,e),o=!0,s=!0)})}),s&&i.default.cornerstone.updateImage(n)}function f(e){var t=e.detail.currentPoints.canvas,n=e.detail.element,o=!1,s=!1;Object.entries(d.supportedTools).forEach(function(e){var i=r(e,2),l=i[1],u=a.getToolState(n,i[0]);u&&u.data.forEach(function(e){e.active&&(e.active=!1,o=!0),!s&&l.pointNearTool(n,e,t)&&(e.active=!0,o=!0,s=!0)})}),o&&i.default.cornerstone.updateImage(n)}var h={activate:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.mouseButtonMask=t,(0,s.setToolOptions)("eraser",e,n),e.removeEventListener(o.default.MOUSE_DOWN_ACTIVATE,c),e.removeEventListener(o.default.MOUSE_MOVE,f),e.addEventListener(o.default.MOUSE_DOWN_ACTIVATE,c),e.addEventListener(o.default.MOUSE_MOVE,f),d.supportedTools={},Object.keys(a).forEach(function(e){var t=a[e];"function"==typeof t.pointNearTool&&(d.supportedTools[e]=t)})},disable:function(e){e.removeEventListener(o.default.MOUSE_DOWN_ACTIVATE,c),e.removeEventListener(o.default.MOUSE_MOVE,f)},enable:function(e){e.removeEventListener(o.default.MOUSE_DOWN_ACTIVATE,c),e.removeEventListener(o.default.MOUSE_MOVE,f)},deactivate:function(e){e.removeEventListener(o.default.MOUSE_DOWN_ACTIVATE,c),e.removeEventListener(o.default.MOUSE_MOVE,f)},getConfiguration:function(){return d},setConfiguration:function(e){d=e}},p=(0,l.default)(c,"eraser");t.eraser=h,t.eraserTouch=p},"./imageTools/freehand.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.freehand=void 0;var r=S(n("./events.js")),a=S(n("./externalModules.js")),i=S(n("./stateManagement/toolStyle.js")),o=S(n("./stateManagement/toolColors.js")),s=S(n("./manipulators/drawHandles.js")),l=S(n("./manipulators/handleActivator.js")),u=S(n("./util/pointInsideBoundingBox.js")),d=S(n("./util/calculateSUV.js")),c=S(n("./util/triggerEvent.js")),f=S(n("./util/isMouseButtonEnabled.js")),h=S(n("./util/drawLinkedTextBox.js")),p=n("./stateManagement/toolState.js"),m=n("./toolOptions.js"),g=n("./util/clip.js"),v=n("./util/freehand/keysHeld.js"),y=S(n("./util/freehand/dragObject.js")),b=S(n("./util/freehand/dropObject.js")),w=S(n("./util/freehand/insertOrDelete.js")),x=S(n("./util/freehand/freeHandArea.js")),_=S(n("./util/freehand/calculateFreehandStatistics.js")),E=S(n("./util/freehand/freeHandIntersect.js")),T=n("./util/freehand/FreehandHandleData.js"),j=n("./util/drawing.js");function S(e){return e&&e.__esModule?e:{default:e}}function C(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var O="freehand",P={mouseLocation:{handles:{start:{highlight:!0,active:!0}}},keyDown:{shift:!1,ctrl:!1,alt:!1},activePencilMode:!1,spacing:5,activeHandleRadius:3,completeHandleRadius:6,alwaysShowHandles:!1,invalidColor:"crimson",modifying:!1,movingTextBox:!1,currentHandle:0,currentTool:-1};function I(e,t,n){return null!==M(e,t,n)}function M(e,t,n){var r=W.getConfiguration();if(void 0===t.handles)return null;if(!1===t.visible)return null;for(var i=0;i<t.handles.length;i++){var o=a.default.cornerstone.pixelToCanvas(e,t.handles[i]);if(a.default.cornerstoneMath.point.distance(o,n)<r.spacing)return i}return t.textBox&&(0,u.default)(t.textBox,n)?t.textBox:null}function D(e){var t=e.detail,n=t.element,a=W.getConfiguration(),i=(0,m.getToolOptions)(O,n);(0,f.default)(t.which,i.mouseButtonMask)&&(t.event.shiftKey&&(a.activePencilMode=!0),function(e){e.element.addEventListener(r.default.MOUSE_MOVE,R);var t=W.getConfiguration();t.mouseLocation.handles.start.x=e.currentPoints.image.x,t.mouseLocation.handles.start.y=e.currentPoints.image.y,(0,p.addToolState)(e.element,O,{visible:!0,active:!0,invalidated:!0,color:void 0,handles:[],textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}});var n=(0,p.getToolState)(e.element,O);t.currentTool=n.data.length-1}(t),L(t),e.preventDefault(),e.stopPropagation())}function L(e){var t=(0,p.getToolState)(e.element,O);if(void 0!==t){var n=W.getConfiguration(),r=t.data[n.currentTool];if(!r.handles.invalidHandlePlacement){var i=new T.FreehandHandleData(e.currentPoints.image);r.handles.length&&r.handles[n.currentHandle-1].lines.push(e.currentPoints.image),r.handles.push(i),n.currentHandle+=1,a.default.cornerstone.updateImage(e.element)}}}function A(e,t){var n=(0,p.getToolState)(e.element,O);if(n){var r=W.getConfiguration(),i=n.data[r.currentTool];i.active=!1,i.highlight=!1,i.handles.invalidHandlePlacement=!1,void 0!==t&&i.handles[r.currentHandle-1].lines.push(i.handles[0]),r.modifying&&(r.modifying=!1,i.invalidated=!0),r.currentHandle=0,r.currentTool=-1,r.activePencilMode=!1,i.canComplete=!1,a.default.cornerstone.updateImage(e.element)}}function k(e){var t=e.detail,n=(0,m.getToolOptions)(O,t.element);if((0,f.default)(t.which,n.mouseButtonMask)){var a=W.getConfiguration().currentTool;if(a<0)!function(e){var t=e.detail,n=function(e){var t=e.element,n=e.currentPoints.canvas,r=(0,p.getToolState)(t,O);if(r)for(var a=void 0,i=0;i<r.data.length;i++)if(null!==(a=M(t,r.data[i],n)))return{handleNearby:a,toolIndex:i}}(t);t.event.ctrlKey?(0,w.default)(e,n):void 0!==n&&function(e,t){var n=e.detail,a=n.element,i=(0,p.getToolState)(n.element,O),o=t.handleNearby;o.hasBoundingBox?function(e,t){var n=W.getConfiguration(),a=t.handleNearby,i=t.toolIndex;e.addEventListener(r.default.MOUSE_UP,N),e.addEventListener(r.default.MOUSE_DRAG,U),n.movingTextBox=!0,n.currentHandle=a,n.currentTool=i}(a,t):void 0!==o&&function(e,t,n){var a=W.getConfiguration(),i=t.handleNearby,o=t.toolIndex;e.removeEventListener(r.default.MOUSE_MOVE,R),a.dragOrigin={x:n.data[o].handles[i].x,y:n.data[o].handles[i].y},e.addEventListener(r.default.MOUSE_UP,N),e.addEventListener(r.default.MOUSE_CLICK,N),e.addEventListener(r.default.MOUSE_DRAG,U),a.modifying=!0,a.currentHandle=i,a.currentTool=o}(a,t,i),e.preventDefault(),e.stopPropagation()}(e,n)}(e);else{var i=(0,p.getToolState)(t.element,O);a>=0&&i.data[a].active&&function(e,t,n){var r=e.detail,a=W.getConfiguration(),i=t.data[n],o=M(r.element,i,r.currentPoints.canvas);!E.default.end(i.handles)&&i.canComplete?A(r,a.currentHandle):null===o&&L(r),e.preventDefault(),e.stopPropagation()}(e,i,a)}}}function R(e){var t=e.detail,n=(0,p.getToolState)(t.element,O);if(n){if(W.getConfiguration().currentTool<0){if(!function(e,t){for(var n=!1,r=0;r<t.data.length;r++){var a=e.element,i=t.data[r],o=e.currentPoints.canvas;!0===(0,l.default)(a,i.handles,o)&&(n=!0),(I(a,i,o)&&!i.active||!I(a,i,o)&&i.active)&&(i.active=!i.active,n=!0),!0===i.textBox&&(0,u.default)(i.textBox,o)&&(i.active=!i.active,i.highlight=!i.highlight,n=!0)}return n}(t,n))return}else!function(e,t){var n=W.getConfiguration(),r=e.element,i=t.data[n.currentTool],o=e.currentPoints.canvas;if(B(e),function(e){var t,n=W.getConfiguration();if(e.handles.length<2)return!0;t=n.activePencilMode?function(e){var t=W.getConfiguration().mouseLocation.handles.start,n=E.default.newHandle(t,e.handles);return!1===n&&(n=function(e,t){var n=W.getConfiguration(),r=e.handles;if(a.default.cornerstoneMath.point.distance(r[0],t)<n.spacing)return e.canComplete=!0,!1;e.canComplete=!1;for(var i=1;i<r.length-1;i++)if(a.default.cornerstoneMath.point.distance(r[i],t)<n.spacing)return!0;return!1}(e,t)),n}(e):function(e){var t=W.getConfiguration(),n=t.mouseLocation.handles.start,r=e.handles,i=!1;return e.canComplete=!1,a.default.cornerstoneMath.point.distance(r[0],n)<t.spacing&&!E.default.end(r)?(e.canComplete=!0,i=!1):i=E.default.newHandle(n,r),i}(e),e.handles.invalidHandlePlacement=t}(i),n.activePencilMode)!function(e,t){for(var n=W.getConfiguration(),r=n.mouseLocation.handles.start,i=0;i<t.length;i++)if(a.default.cornerstoneMath.point.distance(t[i],r)<n.spacing)return;L(e)}(e,i.handles);else{var s=M(r,i,o);null!==s&&!s.hasBoundingBox&&s<i.handles.length-1&&(n.mouseLocation.handles.start.x=i.handles[s].x,n.mouseLocation.handles.start.y=i.handles[s].y)}}(t,n);a.default.cornerstone.updateImage(t.element)}}function U(e){var t=e.detail,n=(0,p.getToolState)(t.element,O);if(n){var r=W.getConfiguration(),i=n.data[r.currentTool],o=r.currentHandle;B(t),r.currentTool>=0&&(0,y.default)(o,i),a.default.cornerstone.updateImage(t.element)}}function N(e){var t=e.detail,n=t.element,i=(0,p.getToolState)(t.element,O);n.removeEventListener(r.default.MOUSE_UP,N),n.removeEventListener(r.default.MOUSE_DRAG,U),n.removeEventListener(r.default.MOUSE_CLICK,N),n.addEventListener(r.default.MOUSE_MOVE,R),void 0!==i&&("handle"===(0,b.default)(e,i)&&A(t),e.preventDefault(),e.stopPropagation(),a.default.cornerstone.updateImage(t.element))}function B(e){var t=W.getConfiguration();t.mouseLocation.handles.start.x=e.currentPoints.image.x,t.mouseLocation.handles.start.y=e.currentPoints.image.y,(0,g.clipToBox)(t.mouseLocation.handles.start,e.image)}function H(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function F(e){var t=e.detail,n=(0,p.getToolState)(e.currentTarget,O);if(void 0!==n){var r=a.default.cornerstone,l=t.image,u=t.element,c=W.getConfiguration(),f=r.metaData.get("generalSeriesModule",l.imageId),m=void 0;f&&(m=f.modality);for(var g=(0,j.getNewContext)(t.canvasContext.canvas),v=i.default.getToolWidth(),y=function(e){var a=n.data[e];if(!1===a.visible)return"continue";(0,j.draw)(g,function(e){var n=o.default.getColorIfActive(a),i=void 0;if(a.active?a.handles.invalidHandlePlacement?(n=c.invalidColor,i=c.invalidColor):(n=o.default.getColorIfActive(a),i=o.default.getFillColor()):i=o.default.getToolColor(),a.handles.length)for(var f=0;f<a.handles.length;f++){var p=[].concat(C(a.handles[f].lines));f!==a.handles.length-1||a.polyBoundingBox||p.push(c.mouseLocation.handles.start),(0,j.drawJoinedLines)(e,t.element,a.handles[f],p,{color:n})}var g={fill:i};(c.alwaysShowHandles||c.keyDown.ctrl||a.active&&a.polyBoundingBox)&&(g.handleRadius=c.activeHandleRadius,(0,s.default)(e,t,a.handles,n,g)),a.canComplete&&(g.handleRadius=c.completeHandleRadius,(0,s.default)(e,t,[a.handles[0]],n,g)),a.active&&!a.polyBoundingBox&&(g.handleRadius=c.activeHandleRadius,(0,s.default)(e,t,c.mouseLocation.handles,n,g),(0,s.default)(e,t,[a.handles[0]],n,g));var y=void 0,b=void 0,E=void 0;if(!1===a.invalidated)b=a.meanStdDev,E=a.meanStdDevSUV,y=a.area;else if(!a.active){for(var T={left:a.handles[0].x,right:a.handles[0].x,bottom:a.handles[0].y,top:a.handles[0].x},S=0;S<a.handles.length;S++)T.left=Math.min(T.left,a.handles[S].x),T.right=Math.max(T.right,a.handles[S].x),T.bottom=Math.min(T.bottom,a.handles[S].y),T.top=Math.max(T.top,a.handles[S].y);var O={left:T.left,top:T.bottom,width:Math.abs(T.right-T.left),height:Math.abs(T.top-T.bottom)};if(a.polyBoundingBox=O,!l.color){var P=r.getPixels(u,O.left,O.top,O.width,O.height);b=(0,_.default)(P,O,a.handles),"PT"===m&&(E={mean:(0,d.default)(l,(b.mean-l.intercept)/l.slope),stdDev:(0,d.default)(l,(b.stdDev-l.intercept)/l.slope)}),b&&!isNaN(b.mean)&&(a.meanStdDev=b,a.meanStdDevSUV=E)}y=(0,x.default)(a.handles,(l.columnPixelSpacing||1)*(l.rowPixelSpacing||1)),isNaN(y)||(a.area=y),a.invalidated=!1}if(a.polyBoundingBox&&!a.textBox.freehand){a.textBox.hasMoved||(a.textBox.x=a.polyBoundingBox.left+a.polyBoundingBox.width,a.textBox.y=a.polyBoundingBox.top+a.polyBoundingBox.height/2);var I=function(e){var t=e.meanStdDev,n=e.meanStdDevSUV,r=e.area,a=[];if(t&&void 0!==t.mean){var i="";"CT"===m&&(i=" HU");var o="Mean: "+H(t.mean.toFixed(2))+i,s="StdDev: "+H(t.stdDev.toFixed(2))+i;n&&void 0!==n.mean&&(o+=" SUV: "+H(n.mean.toFixed(2)),s+=" SUV: "+H(n.stdDev.toFixed(2))),a.push(o),a.push(s)}if(r){var u=" mm"+String.fromCharCode(178);l.rowPixelSpacing&&l.columnPixelSpacing||(u=" pixels"+String.fromCharCode(178));var d="Area: "+H(r.toFixed(2))+u;a.push(d)}return a}(a);(0,h.default)(e,u,a.textBox,I,a.handles,w,n,v,0,!0)}})},b=0;b<n.data.length;b++)y(b)}function w(e){return e}}function V(e){e.removeEventListener(r.default.MOUSE_DOWN,k),e.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,D),e.removeEventListener(r.default.MOUSE_DRAG,U),e.removeEventListener(r.default.MOUSE_UP,N),e.removeEventListener(r.default.MOUSE_MOVE,R),e.removeEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,F),e.removeEventListener(r.default.KEY_DOWN,v.keyDownCallback),e.removeEventListener(r.default.KEY_UP,v.keyUpCallback)}function z(e){var t=W.getConfiguration();t.currentTool>=0&&A(e,t.currentHandle)}var W={enable:function(e){z(e),V(e),e.addEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,F),a.default.cornerstone.updateImage(e)},disable:function(e){z(e),V(e),a.default.cornerstone.updateImage(e)},activate:function(e,t){(0,m.setToolOptions)(O,e,{mouseButtonMask:t}),V(e),e.addEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,F),e.addEventListener(r.default.MOUSE_MOVE,R),e.addEventListener(r.default.MOUSE_DOWN,k),e.addEventListener(r.default.MOUSE_DOWN_ACTIVATE,D),e.addEventListener(r.default.KEY_DOWN,v.keyDownCallback),e.addEventListener(r.default.KEY_UP,v.keyUpCallback),a.default.cornerstone.updateImage(e)},deactivate:function(e,t){(0,m.setToolOptions)(O,e,{mouseButtonMask:t});var n=r.default.TOOL_DEACTIVATED;(0,c.default)(e,n,{mouseButtonMask:t,toolType:O,type:n}),z(e),V(e),e.addEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,F),e.addEventListener(r.default.MOUSE_MOVE,R),e.addEventListener(r.default.MOUSE_DOWN,k),e.addEventListener(r.default.KEY_DOWN,v.keyDownCallback),e.addEventListener(r.default.KEY_UP,v.keyUpCallback),a.default.cornerstone.updateImage(e)},getConfiguration:function(){return P},setConfiguration:function(e){P=e},pointNearTool:I};t.freehand=W},"./imageTools/freehandSculpter.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.freehandSculpter=void 0;var r=p(n("./events.js")),a=p(n("./externalModules.js")),i=n("./imageTools/freehand.js"),o=p(n("./stateManagement/toolColors.js")),s=p(n("./manipulators/drawHandles.js")),l=p(n("./util/isMouseButtonEnabled.js")),u=n("./stateManagement/toolState.js"),d=n("./toolOptions.js"),c=n("./util/clip.js"),f=n("./util/freehand/keysHeld.js"),h=n("./util/freehand/FreehandLineFinder.js");function p(e){return e&&e.__esModule?e:{default:e}}var m=new(n("./util/freehand/Sculpter.js").Sculpter),g="freehandSculpter",v="freehand",y={mouseLocation:{handles:{start:{highlight:!0,active:!0}}},keyDown:{shift:!1,ctrl:!1,alt:!1},active:!1,minSpacing:5,maxSpacing:20,toolSizeImage:null,toolSizeCanvas:null,currentTool:null,color:o.default.getActiveColor()};function b(e){var t=e.detail,n=(0,d.getToolOptions)(g,t.element),i=O.getConfiguration(),o=!1;if(!(0,l.default)(t.which,n.mouseButtonMask))return e.stopPropagation(),void e.preventDefault();t.event.ctrlKey?(function(e){var t=O.getConfiguration(),n=e.element,r=new h.FreehandLineFinder(e).findTool();t.currentTool=r,function(e,t){for(var n=(0,u.getToolState)(e,v),r=0;r<n.data.length;r++)n.data[r].active=r===t}(n,r)}(t),o=!0):null!==i.currentTool&&(function(e){var t=O.getConfiguration(),n=e.element;(function(e){for(var t=O.getConfiguration(),n=t.currentTool,r=(0,u.getToolState)(e.element,v).data[n].handles,i=e.currentPoints.image,o=e.currentPoints.canvas,s=1/0,l=1/0,d=0;d<r.length;d++){var c=a.default.cornerstoneMath.point.distance(r[d],i);if(c<s){s=c;var f=a.default.cornerstone.pixelToCanvas(e.element,r[d]);l=a.default.cornerstoneMath.point.distance(f,o)}}t.toolSizeImage=s,t.toolSizeCanvas=l})(e),t.active=!0,T(e),n.addEventListener(r.default.MOUSE_UP,x),n.addEventListener(r.default.MOUSE_CLICK,x),n.addEventListener(r.default.MOUSE_DRAG,w)}(t),o=!0),o&&a.default.cornerstone.updateImage(t.element)}function w(e){var t=e.detail,n=(0,u.getToolState)(t.element,v);if(n){var r=O.getConfiguration(),i=n.data[r.currentTool].handles;T(t),m.sculpt(t,i),a.default.cornerstone.updateImage(t.element)}}function x(e){var t=e.detail,n=t.element,i=O.getConfiguration();n.removeEventListener(r.default.MOUSE_UP,x),n.removeEventListener(r.default.MOUSE_DRAG,w),n.removeEventListener(r.default.MOUSE_CLICK,x),i.active=!1,e.preventDefault(),e.stopPropagation(),function(e){var t=O.getConfiguration(),n=e.element;(0,u.getToolState)(n,v).data[t.currentTool].invalidated=!0,a.default.cornerstone.updateImage(n)}(t)}function _(e){E(e.detail.element)}function E(e){var t=O.getConfiguration(),n=(0,u.getToolState)(e,v);if(t.currentTool=null,n)for(var r=0;r<n.data.length;r++)n.data[r].active=!1;a.default.cornerstone.updateImage(e)}function T(e){var t=O.getConfiguration();t.mouseLocation.handles.start.x=e.currentPoints.image.x,t.mouseLocation.handles.start.y=e.currentPoints.image.y,(0,c.clipToBox)(t.mouseLocation.handles.start,e.image)}function j(e){var t=e.detail,n=t.canvasContext.canvas.getContext("2d"),r=O.getConfiguration();r.active&&(0,s.default)(n,t,r.mouseLocation.handles,r.color,{fill:null,handleRadius:r.toolSizeCanvas})}function S(e){E(e),C(e)}function C(e){e.removeEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,j),e.removeEventListener(r.default.MOUSE_DOWN,b),e.removeEventListener(r.default.MOUSE_DRAG,w),e.removeEventListener(r.default.MOUSE_UP,x),e.removeEventListener(r.default.KEY_DOWN,f.keyDownCallback),e.removeEventListener(r.default.KEY_UP,f.keyUpCallback),e.removeEventListener(a.default.cornerstone.EVENTS.NEW_IMAGE,_)}var O={enable:function(e){S(e)},disable:S,activate:function(e,t){(0,d.setToolOptions)(g,e,{mouseButtonMask:t}),i.freehand.enable(e),C(e),e.addEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,j),e.addEventListener(r.default.MOUSE_DOWN,b),e.addEventListener(r.default.KEY_DOWN,f.keyDownCallback),e.addEventListener(r.default.KEY_UP,f.keyUpCallback),e.addEventListener(a.default.cornerstone.EVENTS.NEW_IMAGE,_),e.focus(),a.default.cornerstone.updateImage(e)},deactivate:function(e){S(e)},getConfiguration:function(){return y},setConfiguration:function(e){y=e}};t.freehandSculpter=O},"./imageTools/highlight.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.highlightTouch=t.highlight=void 0;var r=d(n("./externalModules.js")),a=d(n("./imageTools/mouseButtonRectangleTool.js")),i=d(n("./imageTools/touchTool.js")),o=d(n("./stateManagement/toolColors.js")),s=d(n("./manipulators/drawHandles.js")),l=n("./stateManagement/toolState.js"),u=n("./util/drawing.js");function d(e){return e&&e.__esModule?e:{default:e}}var c="highlight";function f(e){var t=(0,l.getToolState)(e.event.currentTarget,c);if(!(t&&t.data&&t.data.length>0))return{visible:!0,active:!0,color:void 0,handles:{start:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!1},end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!0}}}}function h(e,t,n){var a=r.default.cornerstone,i=a.pixelToCanvas(e,t.handles.start),o=a.pixelToCanvas(e,t.handles.end),s=Math.min(i.x,o.x),l=Math.min(i.y,o.y),u=Math.abs(i.x-o.x),d=Math.abs(i.y-o.y),c=!1;return n.x>=s&&n.x<=s+u&&n.y>=l&&n.y<=l+d&&(c=!0),c}function p(e,t,n){if(!1===t.visible)return!1;var a=r.default.cornerstone,i=a.pixelToCanvas(e,t.handles.start),o=a.pixelToCanvas(e,t.handles.end),s={left:Math.min(i.x,o.x),top:Math.min(i.y,o.y),width:Math.abs(i.x-o.x),height:Math.abs(i.y-o.y)};return r.default.cornerstoneMath.rect.distanceToPoint(s,n)<5}function m(e){var t=e.detail,n=(0,l.getToolState)(e.currentTarget,c);if(void 0!==n){var r=(0,u.getNewContext)(t.canvasContext.canvas),a=n.data[0];!1!==a.visible&&a&&(0,u.draw)(r,function(e){var n={color:"transparent",fillStyle:"rgba(0,0,0,0.7)"};(0,u.fillOutsideRect)(e,t.element,a.handles.start,a.handles.end,n);var r=o.default.getColorIfActive(a);(0,u.drawRect)(e,t.element,a.handles.start,a.handles.end,n={color:r,lineDash:[4]}),(0,s.default)(e,t,a.handles,r)})}}var g=(0,a.default)({createNewMeasurement:f,onImageRendered:m,pointNearTool:p,pointInsideRect:h,toolType:c},!0),v=(0,i.default)({createNewMeasurement:f,onImageRendered:m,pointNearTool:p,pointInsideRect:h,toolType:c},!0);t.highlight=g,t.highlightTouch=v},"./imageTools/imageStats.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n("./imageTools/displayTool.js")),a=o(n("./util/drawTextBox.js")),i=n("./util/drawing.js");function o(e){return e&&e.__esModule?e:{default:e}}var s=(0,r.default)(function(e){var t=e.detail,n=t.image.stats,r=(0,i.getNewContext)(t.canvasContext.canvas),o=[];Object.keys(n).forEach(function(e){o.push(e+" : "+n[e])}),(0,a.default)(r,o,0,0,"orange"),o.forEach(function(e){console.log(e)})});t.default=s},"./imageTools/keyboardTool.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={};return{activate:function(t){t.removeEventListener(a.default.KEY_DOWN,e),t.addEventListener(a.default.KEY_DOWN,e)},disable:function(t){t.removeEventListener(a.default.KEY_DOWN,e)},enable:function(t){t.removeEventListener(a.default.KEY_DOWN,e)},deactivate:function(t){t.removeEventListener(a.default.KEY_DOWN,e)},getConfiguration:function(){return t},setConfiguration:function(e){t=e}}};var r,a=(r=n("./events.js"))&&r.__esModule?r:{default:r}},"./imageTools/length.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lengthTouch=t.length=void 0;var r=h(n("./externalModules.js")),a=h(n("./imageTools/mouseButtonTool.js")),i=h(n("./imageTools/touchTool.js")),o=h(n("./util/drawLinkedTextBox.js")),s=h(n("./stateManagement/toolStyle.js")),l=h(n("./stateManagement/toolColors.js")),u=h(n("./manipulators/drawHandles.js")),d=n("./stateManagement/toolState.js"),c=h(n("./util/lineSegDistance.js")),f=n("./util/drawing.js");function h(e){return e&&e.__esModule?e:{default:e}}var p="length";function m(e){return{visible:!0,active:!0,color:void 0,handles:{start:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!1},end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!0},textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}}}function g(e,t,n){return!1!==t.visible&&(0,c.default)(e,t.handles.start,t.handles.end,n)<25}function v(e){var t=e.detail,n=(0,d.getToolState)(e.currentTarget,p);if(n){var a=r.default.cornerstone,i=(0,f.getNewContext)(t.canvasContext.canvas),c=t.image,h=t.element,m=s.default.getToolWidth(),g=y.getConfiguration(),v=a.metaData.get("imagePlaneModule",c.imageId),b=void 0,w=void 0;v?(b=v.rowPixelSpacing||v.rowImagePixelSpacing,w=v.columnPixelSpacing||v.colImagePixelSpacing):(b=c.rowPixelSpacing,w=c.columnPixelSpacing);for(var x=function(e){var r=n.data[e];if(!1===r.visible)return"continue";(0,f.draw)(i,function(e){(0,f.setShadow)(e,g);var n=l.default.getColorIfActive(r);(0,f.drawLine)(e,h,r.handles.start,r.handles.end,{color:n}),(0,u.default)(e,t,r.handles,n,{drawHandlesIfActive:g&&g.drawHandlesOnHover});var a=(r.handles.end.x-r.handles.start.x)*(w||1),i=(r.handles.end.y-r.handles.start.y)*(b||1),s=Math.sqrt(a*a+i*i);if(r.length=s,!r.handles.textBox.hasMoved){var d={x:Math.max(r.handles.start.x,r.handles.end.x)};d.y=d.x===r.handles.start.x?r.handles.start.y:r.handles.end.y,r.handles.textBox.x=d.x,r.handles.textBox.y=d.y}var c=function(e,t,n){var r=" mm";return t&&n||(r=" pixels"),""+e.length.toFixed(2)+r}(r,b,w);(0,o.default)(e,h,r.handles.textBox,c,r.handles,E,n,m,10,!0)})},_=0;_<n.data.length;_++)x(_)}function E(e){return[e.start,{x:(e.start.x+e.end.x)/2,y:(e.start.y+e.end.y)/2},e.end]}}var y=(0,a.default)({createNewMeasurement:m,onImageRendered:v,pointNearTool:g,toolType:p}),b=(0,i.default)({createNewMeasurement:m,onImageRendered:v,pointNearTool:g,toolType:p});t.length=y,t.lengthTouch=b},"./imageTools/magnify.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.magnifyTouchDrag=t.magnify=void 0;var r=d(n("./events.js")),a=d(n("./externalModules.js")),i=n("./util/getMaxSimultaneousRequests.js"),o=d(n("./util/isMouseButtonEnabled.js")),s=n("./toolOptions.js"),l=n("./util/clip.js"),u=n("./util/drawing.js");function d(e){return e&&e.__esModule?e:{default:e}}var c="magnify",f={magnifySize:300,magnificationLevel:5},h=void 0,p=void 0,m=void 0,g=void 0;function v(e){var t=e.detail,n=t.element;n.removeEventListener(r.default.MOUSE_DRAG,_),n.removeEventListener(r.default.MOUSE_UP,v),n.removeEventListener(r.default.MOUSE_CLICK,v),y(t)}function y(e){e.element.querySelector(".magnifyTool").style.display="none",document.body.style.cursor="default",j()}function b(e){var t=e.detail,n=t.element,i=(0,s.getToolOptions)(c,n);(e.isTouchEvent||(0,o.default)(t.which,i.mouseButtonMask))&&(n.addEventListener(r.default.MOUSE_DRAG,_),n.addEventListener(r.default.TOUCH_DRAG,_),n.addEventListener(r.default.MOUSE_UP,v),n.addEventListener(r.default.TOUCH_END,v),n.addEventListener(r.default.MOUSE_CLICK,v),n.addEventListener(a.default.cornerstone.EVENTS.NEW_IMAGE,w),function(e){j();var t=e.enabledElement;void 0===t&&(t=a.default.cornerstone.getEnabledElement(e.element));var n=C.getConfiguration().magnificationLevel,r=t.canvas,i=t.image;(g=document.createElement("div")).width=r.width*n,g.height=r.height*n,a.default.cornerstone.enable(g);var o=a.default.cornerstone.getEnabledElement(g),s=a.default.cornerstone.getViewport(t.element);(m=o.canvas).width=r.width*n,m.height=r.height*n,o.viewport=Object.assign({},s),s.scale*=n,a.default.cornerstone.displayImage(g,i),a.default.cornerstone.setViewport(g,s)}(t),window.requestAnimationFrame(function(){return E(t)}),e.preventDefault(),e.stopPropagation())}function w(e){var t=e.detail;t.currentPoints=p,E(t)}function x(e){var t=e.detail,n=t.element;n.removeEventListener(r.default.TOUCH_DRAG_END,x),n.removeEventListener(r.default.TOUCH_END,x),n.removeEventListener(a.default.cornerstone.EVENTS.NEW_IMAGE,w),y(t)}function _(e){var t=e.detail,n=t.element;E(t),!0===t.isTouchEvent&&(n.addEventListener(r.default.TOUCH_DRAG_END,x),n.addEventListener(r.default.TOUCH_END,x)),e.preventDefault(),e.stopPropagation()}function E(e){var t=e.element,n=t.querySelector(".magnifyTool");if(n||T(e.element),void 0!==m){var r=C.getConfiguration(),i=r.magnifySize,o=r.magnificationLevel,s=t.querySelector("canvas:not(.magnifyTool)"),d=(0,u.getNewContext)(n),c=i,f=a.default.cornerstone.pixelToCanvas(e.element,e.currentPoints.image);(0,l.clipToBox)(f,s),d.clearRect(0,0,i,i),(0,u.fillBox)(d,{left:0,top:0,width:i,height:i},"transparent");var p={x:f.x*o-.5*c,y:f.y*o-.5*c};"Safari"===h&&(p.x=Math.max(p.x,0),p.y=Math.max(p.y,0)),p.x=Math.min(p.x,m.width),p.y=Math.min(p.y,m.height),d.drawImage(m,p.x,p.y,c,c,0,0,c,c),n.style.top=f.y-.5*i+"px",n.style.left=f.x-.5*i+"px",e.isTouchEvent&&(n.style.top=f.y-.5*i-120+"px"),n.style.display="block",document.body.style.cursor="none"}}function T(e){if(null===e.querySelector(".magnifyTool")){var t=document.createElement("canvas");t.classList.add("magnifyTool");var n=C.getConfiguration();t.width=n.magnifySize,t.height=n.magnifySize,t.style.position="absolute",t.style.display="none",e.appendChild(t)}}function j(){void 0!==g&&(a.default.cornerstone.disable(g),g=void 0,m=void 0)}function S(e){e.removeEventListener(r.default.MOUSE_DOWN,b),function(e){var t=e.querySelector(".magnifyTool");t&&e.removeChild(t)}(e)}var C={enable:function(e){var t=C.getConfiguration(t);if(!h){var n=(0,i.getBrowserInfo)().split(" ");h=n[0]}T(e)},activate:function(e,t){(0,s.setToolOptions)(c,e,{mouseButtonMask:t}),e.removeEventListener(r.default.MOUSE_DOWN,b),e.addEventListener(r.default.MOUSE_DOWN,b),T(e)},deactivate:S,disable:S,getConfiguration:function(){return f},setConfiguration:function(e){f=e}};function O(e){e.removeEventListener(r.default.TOUCH_START,b),e.addEventListener(r.default.TOUCH_START,b)}function P(e){e.removeEventListener(r.default.TOUCH_START,b)}var I={activate:O,deactivate:P,enable:O,disable:P};t.magnify=C,t.magnifyTouchDrag=I},"./imageTools/mouseButtonRectangleTool.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.toolType;function p(a){var i=a.detail,o=(0,h.getToolOptions)(n,i.element);if((0,c.default)(i.which,o.mouseButtonMask))return function(a){var i=a.element,o=e.createNewMeasurement(a);o&&((0,f.addToolState)(a.element,n,o),i.removeEventListener(r.default.MOUSE_MOVE,m),(0,l.default)(a,n,o,o.handles.end,function(){o.active=!1,(0,d.default)(a,o.handles)&&(0,f.removeToolState)(a.element,n,o),i.addEventListener(r.default.MOUSE_MOVE,m)},t))}(i),!1}function m(t){var r=t.detail;i.default.setCoords(r);var o=(0,f.getToolState)(r.element,n);if(void 0!==o){for(var l=!1,u=r.currentPoints.canvas,d=0;d<o.data.length;d++){var c=o.data[d];!0===(0,s.default)(r.element,c.handles,u)&&(l=!0),(e.pointInsideRect(r.element,c,u)&&!c.active||!e.pointInsideRect(r.element,c,u)&&c.active)&&(c.active=!c.active,l=!0)}!0===l&&a.default.cornerstone.updateImage(r.element)}}function g(i){var s=i.detail,p=s.element,g=a.default.cornerstone,v=void 0,y=(0,h.getToolOptions)(n,p);if((0,c.default)(s.which,y.mouseButtonMask)){var b=s.startPoints.canvas,w=(0,f.getToolState)(i.currentTarget,n),x=void 0;if(void 0!==w)for(x=0;x<w.data.length;x++){var _=(0,o.default)(s.element,(v=w.data[x]).handles,b,25);if(void 0!==_)return p.removeEventListener(r.default.MOUSE_MOVE,m),v.active=!0,(0,l.default)(s,n,v,_,T,t),i.stopImmediatePropagation(),!1}var E={deleteIfHandleOutsideImage:!0,preventHandleOutsideImage:t};if(void 0!==w&&void 0!==e.pointInsideRect)for(x=0;x<w.data.length;x++)if(e.pointInsideRect(s.element,v=w.data[x],b))return p.removeEventListener(r.default.MOUSE_MOVE,m),(0,u.default)(i,v,w,n,E,T),p.addEventListener(r.default.MOUSE_MOVE,m),i.stopImmediatePropagation(),!1}function T(){v.active=!1,(0,d.default)(s,v.handles)&&(0,f.removeToolState)(s.element,n,v),g.updateImage(s.element),p.addEventListener(r.default.MOUSE_MOVE,m)}}return{enable:function(t){t.removeEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),t.removeEventListener(r.default.MOUSE_MOVE,m),t.removeEventListener(r.default.MOUSE_DOWN,g),t.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,p),t.addEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),a.default.cornerstone.updateImage(t)},disable:function(t){t.removeEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),t.removeEventListener(r.default.MOUSE_MOVE,m),t.removeEventListener(r.default.MOUSE_DOWN,g),t.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,p),a.default.cornerstone.updateImage(t)},activate:function(t,i){(0,h.setToolOptions)(n,t,{mouseButtonMask:i}),t.removeEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),t.removeEventListener(r.default.MOUSE_MOVE,m),t.removeEventListener(r.default.MOUSE_DOWN,g),t.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,p),t.addEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),t.addEventListener(r.default.MOUSE_MOVE,m),t.addEventListener(r.default.MOUSE_DOWN,g),t.addEventListener(r.default.MOUSE_DOWN_ACTIVATE,p),a.default.cornerstone.updateImage(t)},deactivate:function(t,i){(0,h.setToolOptions)(n,t,{mouseButtonMask:i}),t.removeEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),t.removeEventListener(r.default.MOUSE_MOVE,m),t.removeEventListener(r.default.MOUSE_DOWN,g),t.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,p),t.addEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),t.addEventListener(r.default.MOUSE_MOVE,m),t.addEventListener(r.default.MOUSE_DOWN,g),a.default.cornerstone.updateImage(t)}}};var r=p(n("./events.js")),a=p(n("./externalModules.js")),i=p(n("./stateManagement/toolCoordinates.js")),o=p(n("./manipulators/getHandleNearImagePoint.js")),s=p(n("./manipulators/handleActivator.js")),l=p(n("./manipulators/moveHandle.js")),u=p(n("./manipulators/moveAllHandles.js")),d=p(n("./manipulators/anyHandlesOutsideImage.js")),c=p(n("./util/isMouseButtonEnabled.js")),f=n("./stateManagement/toolState.js"),h=n("./toolOptions.js");function p(e){return e&&e.__esModule?e:{default:e}}},"./imageTools/mouseButtonTool.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={},n=e.toolType;function g(t){var i,o,s,d,p=t.detail,g=(0,m.getToolOptions)(n,p.element);(0,f.default)(p.which,g.mouseButtonMask)&&(e.addNewMeasurement?e.addNewMeasurement(p):(o=a.default.cornerstone,s=(i=p).element,(d=e.createNewMeasurement(i))&&((0,h.addToolState)(i.element,n,d),s.removeEventListener(r.default.MOUSE_MOVE,b),s.removeEventListener(r.default.MOUSE_DOWN,w),s.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,x),_&&s.removeEventListener(r.default.MOUSE_DOUBLE_CLICK,_),o.updateImage(s),(1===Object.keys(d.handles).length?l.default:u.default)(i,n,d,d.handles.end,function(){d.active=!1,d.invalidated=!0,(0,c.default)(i,d.handles)&&(0,h.removeToolState)(s,n,d),s.addEventListener(r.default.MOUSE_MOVE,b),s.addEventListener(r.default.MOUSE_DOWN,w),s.addEventListener(r.default.MOUSE_DOWN_ACTIVATE,x),_&&s.addEventListener(r.default.MOUSE_DOUBLE_CLICK,_),o.updateImage(s)},!(!e.options||void 0===e.options.preventHandleOutsideImage)&&e.options.preventHandleOutsideImage))),t.preventDefault(),t.stopPropagation())}function v(t){var r=t.detail;i.default.setCoords(r);var o=(0,h.getToolState)(r.element,n);if(o){for(var l=!1,u=0;u<o.data.length;u++){var d=r.currentPoints.canvas,c=o.data[u];!0===(0,s.default)(r.element,c.handles,d)&&(l=!0),(e.pointNearTool(r.element,c,d)&&!c.active||!e.pointNearTool(r.element,c,d)&&c.active)&&(c.active=!c.active,l=!0)}!0===l&&a.default.cornerstone.updateImage(r.element)}}function y(t){var i=t.detail,s=void 0,u=i.element,p=(0,m.getToolOptions)(n,u);if((0,f.default)(i.which,p.mouseButtonMask)){var g=i.startPoints.canvas,v=(0,h.getToolState)(t.currentTarget,n);if(v){var y,w=void 0;for(y=!(!e.options||void 0===e.options.preventHandleOutsideImage)&&e.options.preventHandleOutsideImage,w=0;w<v.data.length;w++){var x=(0,o.default)(u,(s=v.data[w]).handles,g,6);if(x)return u.removeEventListener(r.default.MOUSE_MOVE,b),s.active=!0,(0,l.default)(i,n,s,x,E,y),t.stopImmediatePropagation(),t.stopPropagation(),void t.preventDefault()}if(e.pointNearTool){var _=e.options||{deleteIfHandleOutsideImage:!0,preventHandleOutsideImage:!1};for(w=0;w<v.data.length;w++)if((s=v.data[w]).active=!1,e.pointNearTool(u,s,g))return s.active=!0,u.removeEventListener(r.default.MOUSE_MOVE,b),(0,d.default)(t,s,v,n,_,E),t.stopImmediatePropagation(),t.stopPropagation(),void t.preventDefault()}}}function E(){s.invalidated=!0,(0,c.default)(i,s.handles)&&(0,h.removeToolState)(u,n,s),a.default.cornerstone.updateImage(u),u.addEventListener(r.default.MOUSE_MOVE,b)}}var b=e.mouseMoveCallback||v,w=e.mouseDownCallback||y,x=e.mouseDownActivateCallback||g,_=e.mouseDoubleClickCallback,E={enable:function(t){t.removeEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),t.removeEventListener(r.default.MOUSE_MOVE,b),t.removeEventListener(r.default.MOUSE_DOWN,w),t.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,x),_&&t.removeEventListener(r.default.MOUSE_DOUBLE_CLICK,_),t.addEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),a.default.cornerstone.updateImage(t)},disable:function(t){t.removeEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),t.removeEventListener(r.default.MOUSE_MOVE,b),t.removeEventListener(r.default.MOUSE_DOWN,w),t.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,x),_&&t.removeEventListener(r.default.MOUSE_DOUBLE_CLICK,_),a.default.cornerstone.updateImage(t)},activate:function(t,i){(0,m.setToolOptions)(n,t,{mouseButtonMask:i}),t.removeEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),t.removeEventListener(r.default.MOUSE_MOVE,b),t.removeEventListener(r.default.MOUSE_DOWN,w),t.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,x),t.addEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),t.addEventListener(r.default.MOUSE_MOVE,b),t.addEventListener(r.default.MOUSE_DOWN,w),t.addEventListener(r.default.MOUSE_DOWN_ACTIVATE,x),_&&(t.removeEventListener(r.default.MOUSE_DOUBLE_CLICK,_),t.addEventListener(r.default.MOUSE_DOUBLE_CLICK,_)),a.default.cornerstone.updateImage(t)},deactivate:function(t,i){(0,m.setToolOptions)(n,t,{mouseButtonMask:i});var o=r.default.TOOL_DEACTIVATED;(0,p.default)(t,o,{mouseButtonMask:i,toolType:n,type:o}),t.removeEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),t.removeEventListener(r.default.MOUSE_MOVE,b),t.removeEventListener(r.default.MOUSE_DOWN,w),t.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,x),t.addEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),t.addEventListener(r.default.MOUSE_MOVE,b),t.addEventListener(r.default.MOUSE_DOWN,w),_&&(t.removeEventListener(r.default.MOUSE_DOUBLE_CLICK,_),t.addEventListener(r.default.MOUSE_DOUBLE_CLICK,_)),e.deactivate&&e.deactivate(t,i),a.default.cornerstone.updateImage(t)},getConfiguration:function(){return t},setConfiguration:function(e){t=e},mouseDownCallback:y,mouseMoveCallback:v,mouseDownActivateCallback:g};return e.pointNearTool&&(E.pointNearTool=e.pointNearTool),_&&(E.mouseDoubleClickCallback=_),e.addNewMeasurement&&(E.addNewMeasurement=e.addNewMeasurement),E};var r=g(n("./events.js")),a=g(n("./externalModules.js")),i=g(n("./stateManagement/toolCoordinates.js")),o=g(n("./manipulators/getHandleNearImagePoint.js")),s=g(n("./manipulators/handleActivator.js")),l=g(n("./manipulators/moveHandle.js")),u=g(n("./manipulators/moveNewHandle.js")),d=g(n("./manipulators/moveAllHandles.js")),c=g(n("./manipulators/anyHandlesOutsideImage.js")),f=g(n("./util/isMouseButtonEnabled.js")),h=n("./stateManagement/toolState.js"),p=g(n("./util/triggerEvent.js")),m=n("./toolOptions.js");function g(e){return e&&e.__esModule?e:{default:e}}},"./imageTools/mouseWheelTool.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{activate:function(t){t.removeEventListener(a.default.MOUSE_WHEEL,e),t.addEventListener(a.default.MOUSE_WHEEL,e)},disable:function(t){t.removeEventListener(a.default.MOUSE_WHEEL,e)},enable:function(t){t.removeEventListener(a.default.MOUSE_WHEEL,e)},deactivate:function(t){t.removeEventListener(a.default.MOUSE_WHEEL,e)}}};var r,a=(r=n("./events.js"))&&r.__esModule?r:{default:r}},"./imageTools/multiTouchDragTool.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n={},r=[a.default.MULTI_TOUCH_DRAG];return t&&!0===t.fireOnTouchStart&&r.push(a.default.MULTI_TOUCH_START),{activate:function(n){r.forEach(function(t){n.removeEventListener(t,e),n.addEventListener(t,e)}),t&&t.activateCallback&&t.activateCallback(n)},disable:function(n){r.forEach(function(t){n.removeEventListener(t,e)}),t&&t.disableCallback&&t.disableCallback(n)},enable:function(n){r.forEach(function(t){n.removeEventListener(t,e)}),t&&t.enableCallback&&t.enableCallback(n)},deactivate:function(n){r.forEach(function(t){n.removeEventListener(t,e)}),t&&t.deactivateCallback&&t.deactivateCallback(n)},getConfiguration:function(){return n},setConfiguration:function(e){n=e}}};var r,a=(r=n("./events.js"))&&r.__esModule?r:{default:r}},"./imageTools/orientationMarkers.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=d(n("./externalModules.js")),a=d(n("./orientation/index.js")),i=d(n("./imageTools/displayTool.js")),o=d(n("./stateManagement/toolColors.js")),s=n("./util/drawTextBox.js"),l=d(s),u=n("./util/drawing.js");function d(e){return e&&e.__esModule?e:{default:e}}var c=(0,i.default)(function(e){var t=e.detail,n=t.element,i=function(e){var t=r.default.cornerstone,n=t.getEnabledElement(e),i=t.metaData.get("imagePlaneModule",n.image.imageId);if(i&&i.rowCosines&&i.columnCosines){var o=a.default.getOrientationString(i.rowCosines),s=a.default.getOrientationString(i.columnCosines),l=a.default.invertOrientationString(o);return{top:a.default.invertOrientationString(s),bottom:s,left:l,right:o}}}(n);if(i){var d=function(e){var t=r.default.cornerstone,n=t.getEnabledElement(e);return{top:t.pixelToCanvas(e,{x:n.image.width/2,y:5}),bottom:t.pixelToCanvas(e,{x:n.image.width/2,y:n.image.height-5}),left:t.pixelToCanvas(e,{x:5,y:n.image.height/2}),right:t.pixelToCanvas(e,{x:n.image.width-10,y:n.image.height/2})}}(n),f=(0,u.getNewContext)(t.canvasContext.canvas),h=o.default.getToolColor(),p=(0,s.textBoxWidth)(f,i.top,0),m=(0,s.textBoxWidth)(f,i.left,0),g=(0,s.textBoxWidth)(f,i.right,0),v=(0,s.textBoxWidth)(f,i.bottom,0);(0,l.default)(f,i.top,d.top.x-p/2,d.top.y,h),(0,l.default)(f,i.left,d.left.x-m/2,d.left.y,h);var y=c.getConfiguration();y&&y.drawAllMarkers&&((0,l.default)(f,i.right,d.right.x-g/2,d.right.y,h),(0,l.default)(f,i.bottom,d.bottom.x-v/2,d.bottom.y,h))}});t.default=c},"./imageTools/pan.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.panTouchDrag=t.pan=void 0;var r=u(n("./events.js")),a=u(n("./externalModules.js")),i=u(n("./imageTools/simpleMouseButtonTool.js")),o=u(n("./imageTools/touchDragTool.js")),s=u(n("./util/isMouseButtonEnabled.js")),l=n("./toolOptions.js");function u(e){return e&&e.__esModule?e:{default:e}}function d(e){var t=e.detail.element;t.removeEventListener(r.default.MOUSE_DRAG,c),t.removeEventListener(r.default.MOUSE_UP,d),t.removeEventListener(r.default.MOUSE_CLICK,d)}function c(e){var t=e.detail,n=t.viewport.scale,r=t.viewport.scale,i=t.image.columnPixelSpacing||1,o=t.image.rowPixelSpacing||1;o<i?n*=i/o:i<o&&(r*=o/i),t.viewport.translation.x+=t.deltaPoints.page.x/n,t.viewport.translation.y+=t.deltaPoints.page.y/r,a.default.cornerstone.setViewport(t.element,t.viewport),e.preventDefault(),e.stopPropagation()}var f=(0,i.default)(function(e){var t=e.detail,n=t.element,a=(0,l.getToolOptions)("pan",n);(0,s.default)(t.which,a.mouseButtonMask)&&(n.addEventListener(r.default.MOUSE_DRAG,c),n.addEventListener(r.default.MOUSE_UP,d),n.addEventListener(r.default.MOUSE_CLICK,d),e.preventDefault(),e.stopPropagation())},"pan"),h=(0,o.default)(c,"pan");t.pan=f,t.panTouchDrag=h},"./imageTools/panMultiTouch.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n("./externalModules.js"));function a(e){return e&&e.__esModule?e:{default:e}}var i=(0,a(n("./imageTools/multiTouchDragTool.js")).default)(function(e){var t=e.detail,n=i.getConfiguration();n&&n.testPointers(t)&&(t.viewport.translation.x+=t.deltaPoints.page.x/t.viewport.scale,t.viewport.translation.y+=t.deltaPoints.page.y/t.viewport.scale,r.default.cornerstone.setViewport(t.element,t.viewport),e.preventDefault(),e.stopPropagation())});i.setConfiguration({testPointers:function(e){return e.numPointers>=2}}),t.default=i},"./imageTools/probe.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.probeTouch=t.probe=void 0;var r=p(n("./externalModules.js")),a=p(n("./imageTools/mouseButtonTool.js")),i=p(n("./imageTools/touchTool.js")),o=p(n("./stateManagement/toolColors.js")),s=p(n("./stateManagement/textStyle.js")),l=p(n("./manipulators/drawHandles.js")),u=p(n("./util/drawTextBox.js")),d=p(n("./util/getRGBPixels.js")),c=p(n("./util/calculateSUV.js")),f=n("./stateManagement/toolState.js"),h=n("./util/drawing.js");function p(e){return e&&e.__esModule?e:{default:e}}var m="probe";function g(e){return{visible:!0,active:!0,color:void 0,handles:{end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!0}}}}function v(e,t,n){if(!1===t.visible)return!1;var a=r.default.cornerstone.pixelToCanvas(e,t.handles.end);return r.default.cornerstoneMath.point.distance(a,n)<5}function y(e){var t=e.detail,n=(0,f.getToolState)(e.currentTarget,m);if(n)for(var a=r.default.cornerstone,i=(0,h.getNewContext)(t.canvasContext.canvas),p=s.default.getFontSize(),g=function(e){var r=n.data[e];if(!1===r.visible)return"continue";(0,h.draw)(i,function(e){var n=o.default.getColorIfActive(r);(0,l.default)(e,t,r.handles,n);var i=Math.round(r.handles.end.x),s=Math.round(r.handles.end.y),f=void 0,h=void 0,m=void 0;if(i>=0&&s>=0&&i<t.image.columns&&s<t.image.rows){if(t.image.color)h=i+", "+s,m="R: "+(f=(0,d.default)(t.element,i,s,1,1))[0]+" G: "+f[1]+" B: "+f[2];else{var g=(f=a.getStoredPixels(t.element,i,s,1,1))[0],v=g*t.image.slope+t.image.intercept,y=(0,c.default)(t.image,g);h=i+", "+s,m="SP: "+g+" MO: "+parseFloat(v.toFixed(3)),y&&(m+=" SUV: "+parseFloat(y.toFixed(3)))}var b=a.pixelToCanvas(t.element,{x:r.handles.end.x+3,y:r.handles.end.y-3});(0,u.default)(e,m,b.x,b.y+p+5,n),(0,u.default)(e,h,b.x,b.y,n)}})},v=0;v<n.data.length;v++)g(v)}var b=(0,a.default)({createNewMeasurement:g,onImageRendered:y,pointNearTool:v,toolType:m}),w=(0,i.default)({createNewMeasurement:g,onImageRendered:y,pointNearTool:v,toolType:m});t.probe=b,t.probeTouch=w},"./imageTools/rectangleRoi.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rectangleRoiTouch=t.rectangleRoi=void 0;var r=h(n("./externalModules.js")),a=h(n("./imageTools/mouseButtonTool.js")),i=h(n("./imageTools/touchTool.js")),o=h(n("./stateManagement/toolStyle.js")),s=h(n("./stateManagement/toolColors.js")),l=h(n("./manipulators/drawHandles.js")),u=h(n("./util/calculateSUV.js")),d=n("./stateManagement/toolState.js"),c=h(n("./util/drawLinkedTextBox.js")),f=n("./util/drawing.js");function h(e){return e&&e.__esModule?e:{default:e}}var p="rectangleRoi";function m(e){return{visible:!0,active:!0,invalidated:!0,color:void 0,handles:{start:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!1},end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!0},textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}}}function g(e,t,n){if(!1===t.visible)return!1;var a=r.default.cornerstone,i=a.pixelToCanvas(e,t.handles.start),o=a.pixelToCanvas(e,t.handles.end),s={left:Math.min(i.x,o.x),top:Math.min(i.y,o.y),width:Math.abs(i.x-o.x),height:Math.abs(i.y-o.y)};return r.default.cornerstoneMath.rect.distanceToPoint(s,n)<5}function v(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function y(e){var t=e.detail,n=(0,d.getToolState)(e.currentTarget,p);if(n){var a=r.default.cornerstone,i=t.image,h=t.element,m=o.default.getToolWidth(),g=b.getConfiguration(),y=a.metaData.get("generalSeriesModule",i.imageId),w=a.metaData.get("imagePlaneModule",i.imageId),x=void 0,_=void 0,E=void 0;w?(_=w.rowPixelSpacing||w.rowImagePixelSpacing,E=w.columnPixelSpacing||w.colImagePixelSpacing):(_=i.rowPixelSpacing,E=i.columnPixelSpacing),y&&(x=y.modality);for(var T=(0,f.getNewContext)(t.canvasContext.canvas),j=function(e){var r=n.data[e];if(!1===r.visible)return"continue";(0,f.draw)(T,function(e){(0,f.setShadow)(e,g);var n=s.default.getColorIfActive(r);(0,f.drawRect)(e,h,r.handles.start,r.handles.end,{color:n}),g&&g.drawHandlesOnHover?!0===r.active?(0,l.default)(e,t,r.handles,n):(0,l.default)(e,t,r.handles,n,{drawHandlesIfActive:!0}):(0,l.default)(e,t,r.handles,n);var o=void 0,d=void 0,p=void 0;if(!1===r.invalidated)d=r.meanStdDev,p=r.meanStdDevSUV,o=r.area;else{var y={left:Math.min(r.handles.start.x,r.handles.end.x),top:Math.min(r.handles.start.y,r.handles.end.y),width:Math.abs(r.handles.start.x-r.handles.end.x),height:Math.abs(r.handles.start.y-r.handles.end.y)};i.color||(d=function(e,t){for(var n=0,r=0,a=0,i=0,o=t.top;o<t.top+t.height;o++)for(var s=t.left;s<t.left+t.width;s++)n+=e[i],r+=e[i]*e[i],a++,i++;if(0===a)return{count:a,mean:0,variance:0,stdDev:0};var l=n/a,u=r/a-l*l;return{count:a,mean:l,variance:u,stdDev:Math.sqrt(u)}}(a.getPixels(h,y.left,y.top,y.width,y.height),y),"PT"===x&&(p={mean:(0,u.default)(i,(d.mean-i.intercept)/i.slope),stdDev:(0,u.default)(i,(d.stdDev-i.intercept)/i.slope)}),d&&!isNaN(d.mean)&&(r.meanStdDev=d,r.meanStdDevSUV=p)),o=y.width*(E||1)*(y.height*(_||1)),isNaN(o)||(r.area=o),r.invalidated=!1}var b=function(e){var t=e.meanStdDev,n=e.meanStdDevSUV,r=e.area,a=[];if(t&&t.mean){var i="";"CT"===x&&(i=" HU");var o="Mean: "+v(t.mean.toFixed(2))+i,s="StdDev: "+v(t.stdDev.toFixed(2))+i;n&&void 0!==n.mean&&(o+=" SUV: "+v(n.mean.toFixed(2)),s+=" SUV: "+v(n.stdDev.toFixed(2))),a.push(o),a.push(s)}if(r){var l=" mm"+String.fromCharCode(178);_&&E||(l=" pixels"+String.fromCharCode(178));var u="Area: "+v(r.toFixed(2))+l;a.push(u)}return a}(r);r.handles.textBox.hasMoved||(r.handles.textBox.x=Math.max(r.handles.start.x,r.handles.end.x),r.handles.textBox.y=(r.handles.start.y+r.handles.end.y)/2),(0,c.default)(e,h,r.handles.textBox,b,r.handles,C,n,m,0,!0)})},S=0;S<n.data.length;S++)j(S)}function C(e){var t=Math.min(e.start.x,e.end.x),n=Math.min(e.start.y,e.end.y),r=Math.abs(e.start.x-e.end.x),a=Math.abs(e.start.y-e.end.y);return[{x:t+r/2,y:n},{x:t,y:n+a/2},{x:t+r/2,y:n+a},{x:t+r,y:n+a/2}]}}var b=(0,a.default)({createNewMeasurement:m,onImageRendered:y,pointNearTool:g,toolType:p}),w=(0,i.default)({createNewMeasurement:m,onImageRendered:y,pointNearTool:g,toolType:p});t.rectangleRoi=b,t.rectangleRoiTouch=w},"./imageTools/rotate.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rotateTouchDrag=t.rotate=void 0;var r=u(n("./events.js")),a=u(n("./externalModules.js")),i=u(n("./imageTools/simpleMouseButtonTool.js")),o=u(n("./imageTools/simpleTouchTool.js")),s=u(n("./util/isMouseButtonEnabled.js")),l=n("./toolOptions.js");function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n){var r=e.element.getBoundingClientRect(e.element),i=e.viewport.scale,o=e.viewport.translation,s=r.left+e.element.clientWidth/2+o.x*i,l=r.top+e.element.clientHeight/2+o.y*i,u=t,d=e.currentPoints.client.x,c=e.currentPoints.client.y,f=Math.sqrt(Math.pow(s-u.x,2)+Math.pow(l-u.y,2)),h=Math.sqrt(Math.pow(s-d,2)+Math.pow(l-c,2)),p=Math.sqrt(Math.pow(u.x-d,2)+Math.pow(u.y-c,2)),m=180*Math.acos((Math.pow(f,2)+Math.pow(h,2)-Math.pow(p,2))/(2*f*h))/Math.PI;(u.x-s)*(c-l)-(u.y-l)*(d-s)<0&&(m=-m),e.viewport.rotation=n+m,a.default.cornerstone.setViewport(e.element,e.viewport)}function c(e,t,n){var r=n.detail;f.strategy(r,e,t),a.default.cornerstone.setViewport(r.element,r.viewport),n.preventDefault(),n.stopPropagation()}var f=(0,i.default)(function(e){var t=e.detail,n=t.element,a=(0,l.getToolOptions)("rotate",n),i={x:t.currentPoints.client.x,y:t.currentPoints.client.y},o=t.viewport.rotation;if((0,s.default)(t.which,a.mouseButtonMask)){var u=c.bind({},i,o),d=function e(t){var n=t.detail.element;n.removeEventListener(r.default.MOUSE_DRAG,u),n.removeEventListener(r.default.MOUSE_UP,e),n.removeEventListener(r.default.MOUSE_CLICK,e)};n.addEventListener(r.default.MOUSE_DRAG,u),n.addEventListener(r.default.MOUSE_UP,d),n.addEventListener(r.default.MOUSE_CLICK,d),e.preventDefault(),e.stopPropagation()}},"rotate");f.strategies={default:d,horizontal:function(e){e.viewport.rotation+=e.deltaPoints.page.x/e.viewport.scale,a.default.cornerstone.setViewport(e.element,e.viewport)},vertical:function(e){e.viewport.rotation+=e.deltaPoints.page.y/e.viewport.scale,a.default.cornerstone.setViewport(e.element,e.viewport)}},f.strategy=d;var h=(0,o.default)(function(e){var t=e.detail,n=t.element,a=c.bind({},{x:t.currentPoints.client.x,y:t.currentPoints.client.y},t.viewport.rotation);n.addEventListener(r.default.TOUCH_DRAG,a),n.addEventListener(r.default.TOUCH_END,function e(t){var n=t.detail.element;n.removeEventListener(r.default.TOUCH_DRAG,a),n.removeEventListener(r.default.TOUCH_END,e)}),e.preventDefault(),e.stopPropagation()},"rotate");t.rotate=f,t.rotateTouchDrag=h},"./imageTools/rotateTouch.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n("./events.js")),a=i(n("./externalModules.js"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.detail;return t.viewport.rotation+=t.rotation,a.default.cornerstone.setViewport(t.element,t.viewport),!1}t.default={activate:function(e){e.removeEventListener(r.default.TOUCH_ROTATE,o),e.addEventListener(r.default.TOUCH_ROTATE,o)},disable:function(e){e.removeEventListener(r.default.TOUCH_ROTATE,o)}}},"./imageTools/saveAs.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",r=e.querySelector("canvas");if(r.msToBlob){var a=r.msToBlob();return window.navigator.msSaveBlob(a,t)}var i=document.createElement("a");if(i.download=t,i.href=r.toDataURL(n,1),document.createEvent){var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(o)}else i.fireEvent&&i.fireEvent("onclick")}},"./imageTools/scaleOverlayTool.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n("./imageTools/displayTool.js")),a=o(n("./externalModules.js")),i=n("./util/drawing.js");function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,r,a){var i={left:0,top:0,width:t.width,height:t.height},o=r*Math.min(1e3,t.width),s=a*Math.min(1e3,t.height);return{topLeft:{x:(i={left:i.left+o,top:i.top+s,width:i.width-2*o,height:i.height-2*s}).left,y:i.top},bottomRight:{x:i.left+i.width,y:i.top+i.height}}}function l(e){var t=e.detail,n=(0,i.getNewContext)(t.canvasContext.canvas),r=t.image,o=t.viewport,l=a.default.cornerstone.metaData.get("imagePlaneModule",r.imageId),d=void 0,c=void 0;if(l?(d=l.rowPixelSpacing||l.rowImagePixelSpacing,c=l.columnPixelSpacing||l.colImagePixelSpacing):(d=r.rowPixelSpacing,c=r.columnPixelSpacing),d&&c){var f={width:n.canvas.width,height:n.canvas.height},h={width:r.width,height:r.height},p=10/d*o.scale,m=10/c*o.scale,g=s(0,f,0,.25,.05),v=s(0,f,0,.05,.15);if(f.width&&f.height&&h.width&&h.height&&g&&v){var y=u.getConfiguration(),b=Object.assign({},{hscaleBounds:g,vscaleBounds:v,verticalMinorTick:p,horizontalMinorTick:m,minorTickLength:12.5,majorTickLength:25,verticalLine:{start:{x:v.bottomRight.x,y:v.topLeft.y},end:{x:v.bottomRight.x,y:v.bottomRight.y}},horizontalLine:{start:{x:g.topLeft.x,y:g.bottomRight.y},end:{x:g.bottomRight.x,y:g.bottomRight.y}}},y),w={color:b.color,lineWidth:b.lineWidth},x=function(e){for(var t=0,n=[];e.verticalLine.start.y+t*e.verticalMinorTick<=e.vscaleBounds.bottomRight.y;){var r={x:e.verticalLine.start.x,y:e.verticalLine.start.y+t*e.verticalMinorTick},a={x:0,y:e.verticalLine.start.y+t*e.verticalMinorTick};a.x=t%5==0?e.verticalLine.start.x-e.majorTickLength:e.verticalLine.start.x-e.minorTickLength,n.push({start:r,end:a}),t++}return n}(b),_=function(e){for(var t=0,n=[];e.horizontalLine.start.x+t*e.horizontalMinorTick<=e.hscaleBounds.bottomRight.x;){var r={x:e.horizontalLine.start.x+t*e.horizontalMinorTick,y:e.horizontalLine.start.y},a={x:e.horizontalLine.start.x+t*e.horizontalMinorTick,y:0};a.y=t%5==0?e.horizontalLine.start.y-e.majorTickLength:e.horizontalLine.start.y-e.minorTickLength,n.push({start:r,end:a}),t++}return n}(b);(0,i.draw)(n,function(e){e.shadowColor=b.shadowColor,e.shadowBlur=b.shadowBlur,(0,i.drawLine)(e,void 0,b.verticalLine.start,b.verticalLine.end,w,"canvas"),(0,i.drawLine)(e,void 0,b.horizontalLine.start,b.horizontalLine.end,w,"canvas"),(0,i.drawLines)(e,void 0,x,w,"canvas"),(0,i.drawLines)(e,void 0,_,w,"canvas")})}}}var u=(0,r.default)(l);u.setConfiguration({color:"white",lineWidth:2,shadowColor:"black",shadowBlur:4}),u.disable=function(e){e.removeEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,l),a.default.cornerstone.updateImage(e)},t.default=u},"./imageTools/seedAnnotate.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.seedAnnotateTouch=t.seedAnnotate=void 0;var r=w(n("./events.js")),a=w(n("./externalModules.js")),i=w(n("./imageTools/mouseButtonTool.js")),o=w(n("./imageTools/touchTool.js")),s=w(n("./stateManagement/textStyle.js")),l=w(n("./stateManagement/toolStyle.js")),u=w(n("./stateManagement/toolColors.js")),d=w(n("./manipulators/anyHandlesOutsideImage.js")),c=w(n("./manipulators/moveHandle.js")),f=w(n("./manipulators/drawHandles.js")),h=w(n("./util/isMouseButtonEnabled.js")),p=w(n("./util/pointInsideBoundingBox.js")),m=w(n("./util/drawLinkedTextBox.js")),g=n("./stateManagement/toolState.js"),v=n("./toolOptions.js"),y=n("./util/drawing.js"),b=n("./util/drawTextBox.js");function w(e){return e&&e.__esModule?e:{default:e}}var x="seedAnnotate",_={getTextCallback:function(e){e(prompt("Enter your annotation:"))},changeTextCallback:function(e,t,n){n(prompt("Change your annotation:"))},drawHandles:!1,drawHandlesOnHover:!0,currentLetter:"A",currentNumber:0,showCoordinates:!0,countUp:!0};function E(e){return{visible:!0,active:!0,color:void 0,handles:{end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!1},textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}}}function T(e,t,n){if(!1===t.visible)return!1;if(t.handles.end){var r=a.default.cornerstone.pixelToCanvas(e,t.handles.end);return a.default.cornerstoneMath.point.distance(r,n)<25}}function j(e){var t=e.detail,n=(0,g.getToolState)(e.currentTarget,x);if(n)for(var r=a.default.cornerstone,i=t.enabledElement,o=(0,y.getNewContext)(t.canvasContext.canvas),d=t.canvasContext.canvas.width,c=l.default.getToolWidth(),h=S.getConfiguration(),p=function(e){var a=n.data[e];if(!1===a.visible)return"continue";(0,y.draw)(o,function(e){(0,y.setShadow)(e,h);var n=u.default.getColorIfActive(a),o=r.pixelToCanvas(t.element,a.handles.end);if((0,y.drawCircle)(e,t.element,a.handles.end,6,{color:n}),h.drawHandles&&(0,f.default)(e,t,o,n,{drawHandlesIfActive:h&&h.drawHandlesOnHover}),a.text&&""!==a.text){var l=function(e){return h.showCoordinates?e.text+" x: "+Math.round(e.handles.end.x)+" y: "+Math.round(e.handles.end.y):e.text}(a),p=(0,b.textBoxWidth)(e,l,5),g=s.default.getFontSize()+10,v=Math.max(p,g)/2+5;o.x>d/2&&(v=-v);var x=void 0;if(!a.handles.textBox.hasMoved){x={x:o.x-p/2+v,y:o.y-g/2};var _=r.internal.getTransform(i);_.invert();var E=_.transformPoint(x.x,x.y);a.handles.textBox.x=E.x,a.handles.textBox.y=E.y}(0,m.default)(e,t.element,a.handles.textBox,l,a.handles,w,n,c,0,!1)}})},v=0;v<n.data.length;v++)p(v);function w(e){return[e.end]}}var S=(0,i.default)({addNewMeasurement:function(e){var t=a.default.cornerstone,n=e.element,r=S.getConfiguration(),i=E(e);function o(e){null===e?(0,g.removeToolState)(n,x,i):i.text=e,i.active=!1,t.updateImage(n)}(0,g.addToolState)(n,x,i),t.updateImage(n),(0,c.default)(e,x,i,i.handles.end,function(){(0,d.default)(e,i.handles)&&(0,g.removeToolState)(n,x,i),void 0===i.text&&r.getTextCallback(o),t.updateImage(n)})},createNewMeasurement:E,onImageRendered:j,pointNearTool:T,toolType:x,mouseDoubleClickCallback:function(e){var t=e.detail,n=a.default.cornerstone,r=t.element,i=void 0,o=(0,v.getToolOptions)(x,r);if((0,h.default)(t.which,o.mouseButtonMask)){var s=S.getConfiguration(),l=t.currentPoints.canvas,u=(0,g.getToolState)(r,x);if(u){for(var d=0;d<u.data.length;d++)if(T(r,i=u.data[d],l)||(0,p.default)(i.handles.textBox,l))return i.active=!0,n.updateImage(r),s.changeTextCallback(i,t,c),e.stopImmediatePropagation(),!1;e.preventDefault(),e.stopPropagation()}}function c(e,t,a){!0===a?(0,g.removeToolState)(r,x,e):e.text=t,e.active=!1,n.updateImage(r)}}});S.setConfiguration(_);var C=(0,o.default)({addNewMeasurement:function(e){var t=a.default.cornerstone,n=e.element,r=S.getConfiguration(),i=E(e);function o(e){null===e?(0,g.removeToolState)(n,x,i):i.text=e,i.active=!1,t.updateImage(n)}(0,g.addToolState)(n,x,i),t.updateImage(n),(0,c.default)(e,x,i,i.handles.end,function(){(0,d.default)(e,i.handles)&&(0,g.removeToolState)(n,x,i),void 0===i.text&&r.getTextCallback(o),t.updateImage(n)})},createNewMeasurement:E,onImageRendered:j,pointNearTool:T,toolType:x,pressCallback:function(e){var t=e.detail,n=a.default.cornerstone,i=t.element,o=void 0;function s(e,t,a){console.log("pressCallback doneChangingTextCallback"),!0===a?(0,g.removeToolState)(i,x,e):e.text=t,e.active=!1,n.updateImage(i),i.addEventListener(r.default.TOUCH_START,C.touchStartCallback),i.addEventListener(r.default.TOUCH_START_ACTIVE,C.touchDownActivateCallback),i.addEventListener(r.default.TAP,C.tapCallback)}var l=S.getConfiguration(),u=t.currentPoints.canvas,d=(0,g.getToolState)(i,x);if(!d)return!1;if(t.handlePressed)return i.removeEventListener(r.default.TOUCH_START,C.touchStartCallback),i.removeEventListener(r.default.TOUCH_START_ACTIVE,C.touchDownActivateCallback),i.removeEventListener(r.default.TAP,C.tapCallback),l.changeTextCallback(t.handlePressed,t,s),e.stopImmediatePropagation(),!1;for(var c=0;c<d.data.length;c++)if(T(i,o=d.data[c],u)||(0,p.default)(o.handles.textBox,u))return o.active=!0,n.updateImage(i),i.removeEventListener(r.default.TOUCH_START,C.touchStartCallback),i.removeEventListener(r.default.TOUCH_START_ACTIVE,C.touchDownActivateCallback),i.removeEventListener(r.default.TAP,C.tapCallback),l.changeTextCallback(o,t,s),e.stopImmediatePropagation(),!1;e.preventDefault(),e.stopPropagation()}});t.seedAnnotate=S,t.seedAnnotateTouch=C},"./imageTools/simpleAngle.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.simpleAngleTouch=t.simpleAngle=void 0;var r=b(n("./events.js")),a=b(n("./externalModules.js")),i=b(n("./imageTools/mouseButtonTool.js")),o=b(n("./util/roundToDecimal.js")),s=b(n("./util/drawLinkedTextBox.js")),l=b(n("./stateManagement/toolStyle.js")),u=b(n("./stateManagement/toolColors.js")),d=b(n("./manipulators/anyHandlesOutsideImage.js")),c=b(n("./manipulators/moveNewHandle.js")),f=b(n("./manipulators/moveNewHandleTouch.js")),h=b(n("./manipulators/drawHandles.js")),p=b(n("./imageTools/touchTool.js")),m=b(n("./util/lineSegDistance.js")),g=n("./stateManagement/toolState.js"),v=n("./util/drawing.js"),y=n("./util/drawTextBox.js");function b(e){return e&&e.__esModule?e:{default:e}}var w="simpleAngle";function x(e){return{visible:!0,active:!0,color:void 0,handles:{start:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!1},middle:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!0},end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!1},textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}}}function _(e,t,n){return!1!==t.visible&&((0,m.default)(e,t.handles.start,t.handles.middle,n)<25||(0,m.default)(e,t.handles.middle,t.handles.end,n)<25)}function E(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function T(e){var t=e.detail,n=(0,g.getToolState)(e.currentTarget,w);if(n)for(var r=a.default.cornerstone,i=t.enabledElement,d=(0,v.getNewContext)(t.canvasContext.canvas),c=l.default.getToolWidth(),f=j.getConfiguration(),p=function(e){var a=n.data[e];if(!1===a.visible)return"continue";(0,v.draw)(d,function(e){(0,v.setShadow)(e,f);var n=u.default.getColorIfActive(a),l=r.pixelToCanvas(t.element,a.handles.start),d=r.pixelToCanvas(t.element,a.handles.middle);(0,v.drawJoinedLines)(e,t.element,a.handles.start,[a.handles.middle,a.handles.end],{color:n}),(0,h.default)(e,t,a.handles,n,{drawHandlesIfActive:f&&f.drawHandlesOnHover});var p=t.image.columnPixelSpacing||1,m=t.image.rowPixelSpacing||1,g={x:(Math.ceil(a.handles.middle.x)-Math.ceil(a.handles.start.x))*p,y:(Math.ceil(a.handles.middle.y)-Math.ceil(a.handles.start.y))*m},w={x:(Math.ceil(a.handles.end.x)-Math.ceil(a.handles.middle.x))*p,y:(Math.ceil(a.handles.end.y)-Math.ceil(a.handles.middle.y))*m},x={x:(Math.ceil(a.handles.end.x)-Math.ceil(a.handles.start.x))*p,y:(Math.ceil(a.handles.end.y)-Math.ceil(a.handles.start.y))*m},_=E(g),T=E(w),j=E(x),S=Math.acos((Math.pow(_,2)+Math.pow(T,2)-Math.pow(j,2))/(2*_*T));if(S*=180/Math.PI,a.rAngle=(0,o.default)(S,2),a.rAngle){var C=function(e,n,r){var a=t.image.rowPixelSpacing&&t.image.columnPixelSpacing?"":" (isotropic)";return e.rAngle.toString()+String.fromCharCode(parseInt("00B0",16))+a}(a),O=void 0;if(!a.handles.textBox.hasMoved){O={x:d.x,y:d.y};var P=(0,y.textBoxWidth)(e,C,5);d.x<l.x?O.x-=15+P:O.x+=15;var I=r.internal.getTransform(i);I.invert();var M=I.transformPoint(O.x,O.y);a.handles.textBox.x=M.x,a.handles.textBox.y=M.y}(0,s.default)(e,t.element,a.handles.textBox,C,a.handles,b,n,c,0,!0)}})},m=0;m<n.data.length;m++)p(m);function b(e){return[e.start,e.middle,e.end]}}var j=(0,i.default)({createNewMeasurement:x,addNewMeasurement:function(e){var t=a.default.cornerstone,n=x(e),i=e.element;(0,g.addToolState)(i,w,n),i.removeEventListener(r.default.MOUSE_MOVE,j.mouseMoveCallback),i.removeEventListener(r.default.MOUSE_DRAG,j.mouseMoveCallback),i.removeEventListener(r.default.MOUSE_DOWN,j.mouseDownCallback),i.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,j.mouseDownActivateCallback),t.updateImage(i),(0,c.default)(e,w,n,n.handles.middle,function(){if(n.active=!1,(0,d.default)(e,n.handles))return(0,g.removeToolState)(i,w,n),i.addEventListener(r.default.MOUSE_MOVE,j.mouseMoveCallback),i.addEventListener(r.default.MOUSE_DRAG,j.mouseMoveCallback),i.addEventListener(r.default.MOUSE_DOWN,j.mouseDownCallback),i.addEventListener(r.default.MOUSE_DOWN_ACTIVATE,j.mouseDownActivateCallback),void t.updateImage(i);n.handles.end.active=!0,t.updateImage(i),(0,c.default)(e,w,n,n.handles.end,function(){n.active=!1,(0,d.default)(e,n.handles)&&(0,g.removeToolState)(i,w,n),i.addEventListener(r.default.MOUSE_MOVE,j.mouseMoveCallback),i.addEventListener(r.default.MOUSE_DRAG,j.mouseMoveCallback),i.addEventListener(r.default.MOUSE_DOWN,j.mouseDownCallback),i.addEventListener(r.default.MOUSE_DOWN_ACTIVATE,j.mouseDownActivateCallback),t.updateImage(i)})})},onImageRendered:T,pointNearTool:_,toolType:w}),S=(0,p.default)({createNewMeasurement:x,addNewMeasurement:function(e){var t=a.default.cornerstone,n=x(e),i=e.element;(0,g.addToolState)(i,w,n),i.removeEventListener(r.default.TOUCH_DRAG,S.touchMoveCallback),i.removeEventListener(r.default.TOUCH_START_ACTIVE,S.touchDownActivateCallback),i.removeEventListener(r.default.TOUCH_START,S.touchStartCallback),i.removeEventListener(r.default.TAP,S.tapCallback),t.updateImage(i),(0,f.default)(e,w,n,n.handles.middle,function(){if((0,d.default)(e,n.handles))return(0,g.removeToolState)(i,w,n),i.addEventListener(r.default.TOUCH_DRAG,S.touchMoveCallback),i.addEventListener(r.default.TOUCH_START,S.touchStartCallback),i.addEventListener(r.default.TOUCH_START_ACTIVE,S.touchDownActivateCallback),i.addEventListener(r.default.TAP,S.tapCallback),void t.updateImage(i);(0,f.default)(e,w,n,n.handles.end,function(){(0,d.default)(e,n.handles)&&((0,g.removeToolState)(i,w,n),t.updateImage(i)),i.addEventListener(r.default.TOUCH_DRAG,S.touchMoveCallback),i.addEventListener(r.default.TOUCH_START,S.touchStartCallback),i.addEventListener(r.default.TOUCH_START_ACTIVE,S.touchDownActivateCallback),i.addEventListener(r.default.TAP,S.tapCallback)})})},onImageRendered:T,pointNearTool:_,toolType:w});t.simpleAngle=j,t.simpleAngleTouch=S},"./imageTools/simpleMouseButtonTool.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!t)throw new Error("simpleMouseButtonTool: toolType is required");var n={};return{activate:function(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o.mouseButtonMask=r,(0,i.setToolOptions)(t,n,o),n.removeEventListener(a.default.MOUSE_DOWN_ACTIVATE,e),n.addEventListener(a.default.MOUSE_DOWN_ACTIVATE,e)},disable:function(t){t.removeEventListener(a.default.MOUSE_DOWN_ACTIVATE,e)},enable:function(t){t.removeEventListener(a.default.MOUSE_DOWN_ACTIVATE,e)},deactivate:function(t){t.removeEventListener(a.default.MOUSE_DOWN_ACTIVATE,e)},getConfiguration:function(){return n},setConfiguration:function(e){n=e}}};var r,a=(r=n("./events.js"))&&r.__esModule?r:{default:r},i=n("./toolOptions.js")},"./imageTools/simpleTouchTool.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!t)throw new Error("simpleTouchTool: toolType is required");var n={};return{activate:function(n){(0,i.setToolOptions)(t,n,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),n.removeEventListener(a.default.TOUCH_START,e),n.addEventListener(a.default.TOUCH_START,e)},disable:function(t){t.removeEventListener(a.default.TOUCH_START,e)},enable:function(t){t.removeEventListener(a.default.TOUCH_START,e)},deactivate:function(t){t.removeEventListener(a.default.TOUCH_START,e)},getConfiguration:function(){return n},setConfiguration:function(e){n=e}}};var r,a=(r=n("./events.js"))&&r.__esModule?r:{default:r},i=n("./toolOptions.js")},"./imageTools/textMarker.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.textMarkerTouch=t.textMarker=void 0;var r=m(n("./events.js")),a=m(n("./externalModules.js")),i=m(n("./imageTools/mouseButtonTool.js")),o=m(n("./imageTools/touchTool.js")),s=m(n("./util/pointInsideBoundingBox.js")),l=m(n("./stateManagement/toolColors.js")),u=m(n("./util/isMouseButtonEnabled.js")),d=n("./util/drawTextBox.js"),c=m(d),f=n("./stateManagement/toolState.js"),h=n("./toolOptions.js"),p=n("./util/drawing.js");function m(e){return e&&e.__esModule?e:{default:e}}var g="textMarker";function v(e){var t=w.getConfiguration();if(t.current){var n={visible:!0,active:!0,text:t.current,color:void 0,handles:{end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!0,hasBoundingBox:!0}}};if(a.default.cornerstoneMath.point.insideRect(n.handles.end,{left:0,top:0,width:e.image.width,height:e.image.height})){var r=t.markers.indexOf(t.current);return t.ascending?(r+=1)>=t.markers.length&&(t.loop?r-=t.markers.length:r=-1):(r-=1)<0&&(t.loop?r+=t.markers.length:r=-1),t.current=t.markers[r],n}}}function y(e,t,n){if(!1===t.visible)return!1;if(t.handles.end.boundingBox){var r=a.default.cornerstoneMath.rect.distanceToPoint(t.handles.end.boundingBox,n),i=(0,s.default)(t.handles.end,n);return r<10||i}}function b(e){var t=e.detail,n=(0,f.getToolState)(t.element,g);if(n)for(var r=(0,p.getNewContext)(t.canvasContext.canvas),i=w.getConfiguration(),o=function(e){var o=n.data[e];if(!1===o.visible)return"continue";var s=l.default.getColorIfActive(o);(0,p.draw)(r,function(e){(0,p.setShadow)(e,i),o.textWidth=(0,d.textBoxWidth)(e,o.text,5);var n=a.default.cornerstone.pixelToCanvas(t.element,o.handles.end);o.handles.end.boundingBox=(0,c.default)(e,o.text,n.x,n.y-10,s,{centering:{x:!0,y:!0}})})},s=0;s<n.data.length;s++)o(s)}var w=(0,i.default)({createNewMeasurement:v,onImageRendered:b,pointNearTool:y,toolType:g,mouseDoubleClickCallback:function(e){var t=e.detail,n=a.default.cornerstone,i=t.element,o=void 0,s=(0,h.getToolOptions)(g,i);if((0,u.default)(t.which,s.mouseButtonMask)){var l=w.getConfiguration(),d=t.currentPoints.canvas,c=(0,f.getToolState)(i,g);if(c){for(var p=0;p<c.data.length;p++)if(y(0,o=c.data[p],d))return o.active=!0,n.updateImage(i),i.removeEventListener(r.default.MOUSE_MOVE,w.mouseMoveCallback),i.removeEventListener(r.default.MOUSE_DOWN,w.mouseDownCallback),i.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,w.mouseDownActivateCallback),i.removeEventListener(r.default.MOUSE_DOUBLE_CLICK,w.mouseDoubleClickCallback),l.changeTextCallback(o,t,m),e.stopImmediatePropagation(),e.preventDefault(),void e.stopPropagation();e.preventDefault(),e.stopPropagation()}}function m(e,t,a){!0===a?(0,f.removeToolState)(i,g,e):e.text=t,e.active=!1,n.updateImage(i),i.addEventListener(r.default.MOUSE_MOVE,w.mouseMoveCallback),i.addEventListener(r.default.MOUSE_DOWN,w.mouseDownCallback),i.addEventListener(r.default.MOUSE_DOWN_ACTIVATE,w.mouseDownActivateCallback),i.addEventListener(r.default.MOUSE_DOUBLE_CLICK,w.mouseDoubleClickCallback)}}}),x=(0,o.default)({createNewMeasurement:v,onImageRendered:b,pointNearTool:y,toolType:g,pressCallback:function(e){var t=e.detail,n=a.default.cornerstone,i=t.element,o=void 0;function s(e,t,a){!0===a?(0,f.removeToolState)(i,g,e):e.text=t,e.active=!1,n.updateImage(i),i.addEventListener(r.default.TOUCH_DRAG,x.touchMoveCallback),i.addEventListener(r.default.TOUCH_START_ACTIVE,x.touchDownActivateCallback),i.addEventListener(r.default.TOUCH_START,x.touchStartCallback),i.addEventListener(r.default.TAP,x.tapCallback),i.addEventListener(r.default.TOUCH_PRESS,x.pressCallback)}var l=w.getConfiguration(),u=t.currentPoints.canvas,d=(0,f.getToolState)(i,g);if(!d)return!1;if(t.handlePressed)return t.handlePressed.active=!0,n.updateImage(i),i.removeEventListener(r.default.TOUCH_DRAG,x.touchMoveCallback),i.removeEventListener(r.default.TOUCH_START_ACTIVE,x.touchDownActivateCallback),i.removeEventListener(r.default.TOUCH_START,x.touchStartCallback),i.removeEventListener(r.default.TAP,x.tapCallback),i.removeEventListener(r.default.TOUCH_PRESS,x.pressCallback),l.changeTextCallback(t.handlePressed,t,s),e.stopImmediatePropagation(),e.preventDefault(),void e.stopPropagation();for(var c=0;c<d.data.length;c++)if(y(0,o=d.data[c],u))return o.active=!0,n.updateImage(i),i.removeEventListener(r.default.TOUCH_DRAG,x.touchMoveCallback),i.removeEventListener(r.default.TOUCH_START_ACTIVE,x.touchDownActivateCallback),i.removeEventListener(r.default.TOUCH_START,x.touchStartCallback),i.removeEventListener(r.default.TAP,x.tapCallback),i.removeEventListener(r.default.TOUCH_PRESS,x.pressCallback),l.changeTextCallback(o,t,s),e.stopImmediatePropagation(),e.preventDefault(),void e.stopPropagation();e.preventDefault(),e.stopPropagation()}});t.textMarker=w,t.textMarkerTouch=x},"./imageTools/touchDragTool.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=[a.default.TOUCH_DRAG];return n&&!0===n.fireOnTouchStart&&r.push(a.default.TOUCH_START),{activate:function(o){n&&n.eventData&&(0,i.setToolOptions)(t,o,n.eventData),r.forEach(function(t){o.removeEventListener(t,e),o.addEventListener(t,e)}),n&&n.activateCallback&&n.activateCallback(o),n&&n.touchStartCallback&&o.addEventListener(a.default.TOUCH_START,n.touchStartCallback),n&&n.touchEndCallback&&o.addEventListener(a.default.TOUCH_END,n.touchEndCallback)},disable:function(t){r.forEach(function(n){t.removeEventListener(n,e)}),n&&n.disableCallback&&n.disableCallback(t),n&&n.touchStartCallback&&t.removeEventListener(a.default.TOUCH_START,n.touchStartCallback),n&&n.touchEndCallback&&t.removeEventListener(a.default.TOUCH_END,n.touchEndCallback)},enable:function(t){r.forEach(function(n){t.removeEventListener(n,e)}),n&&n.enableCallback&&n.enableCallback(t),n&&n.touchStartCallback&&t.removeEventListener(a.default.TOUCH_START,n.touchStartCallback),n&&n.touchEndCallback&&t.removeEventListener(a.default.TOUCH_END,n.touchEndCallback)},deactivate:function(t){r.forEach(function(n){t.removeEventListener(n,e)}),n&&n.deactivateCallback&&n.deactivateCallback(t),n&&n.touchStartCallback&&t.removeEventListener(a.default.TOUCH_START,n.touchStartCallback),n&&n.touchEndCallback&&t.removeEventListener(a.default.TOUCH_END,n.touchEndCallback)}}};var r,a=(r=n("./events.js"))&&r.__esModule?r:{default:r},i=n("./toolOptions.js")},"./imageTools/touchPinchTool.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{activate:function(t){t.removeEventListener(a.default.TOUCH_PINCH,e),t.addEventListener(a.default.TOUCH_PINCH,e)},disable:function(t){t.removeEventListener(a.default.TOUCH_PINCH,e)},enable:function(t){t.removeEventListener(a.default.TOUCH_PINCH,e)},deactivate:function(t){t.removeEventListener(a.default.TOUCH_PINCH,e)}}};var r,a=(r=n("./events.js"))&&r.__esModule?r:{default:r}},"./imageTools/touchTool.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n("./events.js")),a=f(n("./externalModules.js")),i=f(n("./manipulators/anyHandlesOutsideImage.js")),o=f(n("./manipulators/getHandleNearImagePoint.js")),s=f(n("./manipulators/touchMoveHandle.js")),l=f(n("./manipulators/moveNewHandleTouch.js")),u=f(n("./manipulators/touchMoveAllHandles.js")),d=n("./stateManagement/toolState.js"),c=f(n("./util/triggerEvent.js"));function f(e){return e&&e.__esModule?e:{default:e}}function h(e){Object.keys(e).forEach(function(t){e[t].active=!1})}function p(e){if(e)for(var t=0;t<e.data.length;t++){var n=e.data[t];n.active=!1,n.handles&&h(n.handles)}}t.default=function(e){function t(o){var s=o.detail;e.addNewMeasurement?e.addNewMeasurement(s):function(o){var s=a.default.cornerstone,u=o.element,c=e.createNewMeasurement(o);if(c){if((0,d.addToolState)(u,e.toolType,c),1===Object.keys(c.handles).length&&o.type===r.default.TAP)return c.active=!1,c.handles.end.active=!1,c.handles.end.highlight=!1,c.invalidated=!0,(0,i.default)(o,c.handles)&&(0,d.removeToolState)(u,e.toolType,c),void s.updateImage(u);u.removeEventListener(r.default.TOUCH_START_ACTIVE,e.touchDownActivateCallback||t),u.removeEventListener(r.default.TAP,e.tapCallback||n),u.removeEventListener(r.default.TOUCH_START,e.touchStartCallback||f),s.updateImage(u),(0,l.default)(o,e.toolType,c,c.handles.end,function(){c.active=!1,c.invalidated=!0,(0,i.default)(o,c.handles)&&(0,d.removeToolState)(u,e.toolType,c),u.addEventListener(r.default.TOUCH_START_ACTIVE,e.touchDownActivateCallback||t),u.addEventListener(r.default.TAP,e.tapCallback||n),u.addEventListener(r.default.TOUCH_START,e.touchStartCallback||f),s.updateImage(u)})}}(s),o.stopImmediatePropagation(),o.preventDefault()}function n(l){var c=l.detail,h=a.default.cornerstone,m=c.element,g=c.currentPoints.canvas,v=(0,d.getToolState)(l.currentTarget,e.toolType),y=void 0,b=void 0;function w(){p(v),(0,i.default)(c,y.handles)&&(0,d.removeToolState)(m,e.toolType,y),h.updateImage(m),m.addEventListener(r.default.TOUCH_START,e.touchStartCallback||f),m.addEventListener(r.default.TAP,e.tapCallback||n)}if(p(v),v)for(b=0;b<v.data.length;b++){var x=(0,o.default)(m,(y=v.data[b]).handles,g,25);if(x)return m.removeEventListener(r.default.TOUCH_START,e.touchStartCallback||f),m.removeEventListener(r.default.TAP,e.tapCallback||n),y.active=!0,x.active=!0,h.updateImage(m),(0,s.default)(l,e.toolType,y,x,w),l.stopImmediatePropagation(),void l.preventDefault()}if(v&&e.pointNearTool)for(b=0;b<v.data.length;b++)if(e.pointNearTool(m,y=v.data[b],g))return m.removeEventListener(r.default.TOUCH_START,e.touchStartCallback||f),m.removeEventListener(r.default.TAP,e.tapCallback||n),y.active=!0,h.updateImage(m),(0,u.default)(l,y,v,e.toolType,!0,w),l.stopImmediatePropagation(),void l.preventDefault();return e.touchDownActivateCallback?e.touchDownActivateCallback(l):t(l),!1}function f(t){var l=t.detail,h=a.default.cornerstone,p=l.element,m=l.startPoints.canvas,g=void 0,v=(0,d.getToolState)(t.currentTarget,e.toolType),y=void 0;function b(t,a){g.active=!1,g.invalidated=!0,(0,i.default)(l,g.handles)&&(0,d.removeToolState)(l.element,e.toolType,g),h.updateImage(l.element),p.addEventListener(r.default.TOUCH_START,e.touchStartCallback||f),p.addEventListener(r.default.TAP,e.tapCallback||n),e.pressCallback&&p.addEventListener(r.default.TOUCH_PRESS,e.pressCallback),t&&t.type===r.default.TOUCH_PRESS&&(0,c.default)(p,t.type,a)}if(v){for(y=0;y<v.data.length;y++){var w=(0,o.default)(l.element,(g=v.data[y]).handles,m,28);if(w)return p.removeEventListener(r.default.TOUCH_START,e.touchStartCallback||f),p.removeEventListener(r.default.TAP,e.tapCallback||n),e.pressCallback&&p.removeEventListener(r.default.TOUCH_PRESS,e.pressCallback),g.active=!0,(0,s.default)(t,e.toolType,g,w,b),t.stopImmediatePropagation(),t.preventDefault(),void t.stopPropagation()}if(e.pointNearTool)for(y=0;y<v.data.length;y++)if(e.pointNearTool(l.element,g=v.data[y],m))return p.removeEventListener(r.default.TOUCH_START,e.touchStartCallback||f),p.removeEventListener(r.default.TAP,e.tapCallback||n),e.pressCallback&&p.removeEventListener(r.default.TOUCH_PRESS,e.pressCallback),(0,u.default)(t,g,v,e.toolType,!0,b),t.stopImmediatePropagation(),t.preventDefault(),void t.stopPropagation()}}var h={enable:function(i){i.removeEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),i.removeEventListener(r.default.TOUCH_START,e.touchStartCallback||f),i.removeEventListener(r.default.TOUCH_START_ACTIVE,e.touchDownActivateCallback||t),i.removeEventListener(r.default.TAP,e.tapCallback||n),i.addEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),e.doubleTapCallback&&i.removeEventListener(r.default.DOUBLE_TAP,e.doubleTapCallback),e.pressCallback&&i.removeEventListener(r.default.TOUCH_PRESS,e.pressCallback),a.default.cornerstone.updateImage(i)},disable:function(i){i.removeEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),i.removeEventListener(r.default.TOUCH_START,e.touchStartCallback||f),i.removeEventListener(r.default.TOUCH_START_ACTIVE,e.touchDownActivateCallback||t),i.removeEventListener(r.default.TAP,e.tapCallback||n),e.doubleTapCallback&&i.removeEventListener(r.default.DOUBLE_TAP,e.doubleTapCallback),e.pressCallback&&i.removeEventListener(r.default.TOUCH_PRESS,e.pressCallback),a.default.cornerstone.updateImage(i)},activate:function(i){i.removeEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),i.removeEventListener(r.default.TOUCH_START,e.touchStartCallback||f),i.removeEventListener(r.default.TOUCH_START_ACTIVE,e.touchDownActivateCallback||t),i.removeEventListener(r.default.TAP,e.tapCallback||n),i.addEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),i.addEventListener(r.default.TOUCH_START,e.touchStartCallback||f),i.addEventListener(r.default.TOUCH_START_ACTIVE,e.touchDownActivateCallback||t),i.addEventListener(r.default.TAP,e.tapCallback||n),e.doubleTapCallback&&(i.removeEventListener(r.default.DOUBLE_TAP,e.doubleTapCallback),i.addEventListener(r.default.DOUBLE_TAP,e.doubleTapCallback)),e.pressCallback&&(i.removeEventListener(r.default.TOUCH_PRESS,e.pressCallback),i.addEventListener(r.default.TOUCH_PRESS,e.pressCallback)),a.default.cornerstone.updateImage(i)},deactivate:function(i){var o=r.default.TOOL_DEACTIVATED;(0,c.default)(i,o,{toolType:e.toolType,type:o}),i.removeEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),i.removeEventListener(r.default.TOUCH_START,e.touchStartCallback||f),i.removeEventListener(r.default.TOUCH_START_ACTIVE,e.touchDownActivateCallback||t),i.removeEventListener(r.default.TAP,e.tapCallback||n),i.addEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,e.onImageRendered),i.addEventListener(r.default.TOUCH_START,e.touchStartCallback||f),e.doubleTapCallback&&i.removeEventListener(r.default.DOUBLE_TAP,e.doubleTapCallback),e.pressCallback&&i.removeEventListener(r.default.TOUCH_PRESS,e.pressCallback),a.default.cornerstone.updateImage(i)},touchStartCallback:e.touchStartCallback||f,touchDownActivateCallback:e.touchDownActivateCallback||t,tapCallback:e.tapCallback||n};return e.pointNearTool&&(h.pointNearTool=e.pointNearTool),e.doubleTapCallback&&(h.doubleTapCallback=e.doubleTapCallback),e.pressCallback&&(h.pressCallback=e.pressCallback),e.addNewMeasurement&&(h.addNewMeasurement=e.addNewMeasurement),h}},"./imageTools/wwwc.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wwwcTouchDrag=t.wwwc=void 0;var r=u(n("./events.js")),a=u(n("./externalModules.js")),i=u(n("./imageTools/simpleMouseButtonTool.js")),o=u(n("./imageTools/touchDragTool.js")),s=u(n("./util/isMouseButtonEnabled.js")),l=n("./toolOptions.js");function u(e){return e&&e.__esModule?e:{default:e}}function d(e){var t=e.detail.element;t.removeEventListener(r.default.MOUSE_DRAG,f),t.removeEventListener(r.default.MOUSE_UP,d),t.removeEventListener(r.default.MOUSE_CLICK,d)}function c(e){var t=(e.image.maxPixelValue*e.image.slope+e.image.intercept-(e.image.minPixelValue*e.image.slope+e.image.intercept))/1024,n=e.deltaPoints.page.y*t;e.viewport.voi.windowWidth+=e.deltaPoints.page.x*t,e.viewport.voi.windowCenter+=n}function f(e){var t=e.detail;h.strategy(t),a.default.cornerstone.setViewport(t.element,t.viewport)}var h=(0,i.default)(function(e){var t=e.detail,n=t.element,a=(0,l.getToolOptions)("wwwc",n);(0,s.default)(t.which,a.mouseButtonMask)&&(n.addEventListener(r.default.MOUSE_DRAG,f),n.addEventListener(r.default.MOUSE_UP,d),n.addEventListener(r.default.MOUSE_CLICK,d),e.preventDefault(),e.stopPropagation())},"wwwc");h.strategies={default:c},h.strategy=c;var p=(0,o.default)(function(e){var t=e.detail;e.stopImmediatePropagation();var n=t,r=(n.image.maxPixelValue*n.image.slope+n.image.intercept-(n.image.minPixelValue*n.image.slope+n.image.intercept))/1024,i=n.deltaPoints.page.x*r,o=n.deltaPoints.page.y*r,s=h.getConfiguration();s.orientation?0===s.orientation?(n.viewport.voi.windowWidth+=i,n.viewport.voi.windowCenter+=o):(n.viewport.voi.windowWidth+=o,n.viewport.voi.windowCenter+=i):(n.viewport.voi.windowWidth+=i,n.viewport.voi.windowCenter+=o),a.default.cornerstone.setViewport(n.element,n.viewport)});t.wwwc=h,t.wwwcTouchDrag=p},"./imageTools/wwwcRegion.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wwwcRegionTouch=t.wwwcRegion=void 0;var r=f(n("./events.js")),a=f(n("./externalModules.js")),i=f(n("./stateManagement/toolColors.js")),o=n("./stateManagement/toolState.js"),s=f(n("./util/getLuminance.js")),l=f(n("./util/isMouseButtonEnabled.js")),u=n("./toolOptions.js"),d=f(n("./util/clip.js")),c=n("./util/drawing.js");function f(e){return e&&e.__esModule?e:{default:e}}var h="wwwcRegion",p={minWindowWidth:10};function m(e){var t=e.detail.element,n=(0,o.getToolState)(t,h);n&&n.data&&(n.data=[]),t.removeEventListener(r.default.MOUSE_MOVE,x),t.removeEventListener(r.default.MOUSE_DRAG,x),t.removeEventListener(r.default.MOUSE_UP,g),t.removeEventListener(r.default.MOUSE_CLICK,g),t.addEventListener(r.default.MOUSE_DOWN,b)}function g(e){var t=e.detail,n=t.element;n.removeEventListener(r.default.MOUSE_MOVE,x),n.removeEventListener(r.default.MOUSE_DRAG,x),n.removeEventListener(r.default.MOUSE_UP,g),n.removeEventListener(r.default.MOUSE_CLICK,g),n.addEventListener(r.default.MOUSE_DOWN,b);var a=(0,o.getToolState)(t.element,h);a&&a.data&&a.data.length&&(a.data[0].endPoint={x:t.currentPoints.image.x,y:t.currentPoints.image.y},v(t))}function v(e){var t=a.default.cornerstone,n=(0,o.getToolState)(e.element,h);if(n&&n.data&&n.data.length){var r=n.data[0].startPoint,i=n.data[0].endPoint,l=Math.abs(r.x-i.x),u=Math.abs(r.y-i.y),c=Math.min(r.x,i.x),f=Math.min(r.y,i.y);c=(0,d.default)(c,0,e.image.width),f=(0,d.default)(f,0,e.image.height),l=Math.floor(Math.min(l,Math.abs(e.image.width-c))),u=Math.floor(Math.min(u,Math.abs(e.image.height-f)));var p=function(e,t,n){var r=e.length;if(r<2)return{min:t,max:n,mean:(t+n)/2};for(var a=n,i=t,o=0,s=0;s<r;s++){var l=e[s];a=Math.min(a,l),i=Math.max(i,l),o+=l}return{min:a,max:i,mean:o/r}}((0,s.default)(e.element,c,f,l,u),e.image.minPixelValue,e.image.maxPixelValue),m=j.getConfiguration(),g=t.getViewport(e.element);void 0===m.minWindowWidth&&(m.minWindowWidth=10),g.voi.windowWidth=Math.max(Math.abs(p.max-p.min),m.minWindowWidth),g.voi.windowCenter=p.mean,t.setViewport(e.element,g),n.data=[],t.updateImage(e.element)}}function y(e){var t=e.detail.element;t.removeEventListener(r.default.MOUSE_MOVE,y),t.removeEventListener(r.default.MOUSE_DRAG,y),t.addEventListener(r.default.MOUSE_MOVE,x),t.addEventListener(r.default.MOUSE_DRAG,x),t.addEventListener(r.default.MOUSE_CLICK,g),e.type===r.default.MOUSE_DRAG&&t.addEventListener(r.default.MOUSE_UP,g)}function b(e){var t=e.detail,n=t.element,a=(0,u.getToolOptions)(h,n);if((0,l.default)(t.which,a.mouseButtonMask))return n.addEventListener(r.default.MOUSE_DRAG,y),n.addEventListener(r.default.MOUSE_MOVE,y),n.removeEventListener(r.default.MOUSE_DOWN,b),w(t),!1}function w(e){var t=(0,o.getToolState)(e.element,h);t&&t.data&&(t.data=[]),(0,o.addToolState)(e.element,h,{startPoint:{x:e.currentPoints.image.x,y:e.currentPoints.image.y}})}function x(e){var t=e.detail,n=t.element,r=(0,o.getToolState)(n,h);r&&r.data&&r.data.length&&(r.data[0].endPoint={x:t.currentPoints.image.x,y:t.currentPoints.image.y},a.default.cornerstone.updateImage(n))}function _(e){var t=e.detail,n=t.element,r=t.canvasContext,a=(0,o.getToolState)(t.element,h);if(a&&a.data&&a.data.length){var s=a.data[0].startPoint,l=a.data[0].endPoint;if(s&&l){r.setTransform(1,0,0,1,0,0);var u=i.default.getActiveColor(),d=j.getConfiguration();(0,c.draw)(r,function(e){(0,c.setShadow)(e,d),(0,c.drawRect)(e,n,s,l,{color:u})})}}}function E(e){e.removeEventListener(r.default.MOUSE_DOWN,b),e.removeEventListener(r.default.MOUSE_UP,g),e.removeEventListener(r.default.MOUSE_CLICK,g),e.removeEventListener(r.default.MOUSE_DRAG,x),e.removeEventListener(r.default.MOUSE_MOVE,x),e.removeEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,_),e.removeEventListener(a.default.cornerstone.EVENTS.NEW_IMAGE,m),a.default.cornerstone.updateImage(e)}function T(e){e.removeEventListener(r.default.TOUCH_DRAG,x),e.removeEventListener(r.default.TOUCH_START,w),e.removeEventListener(r.default.TOUCH_DRAG_END,v),e.removeEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,_)}var j={activate:function(e,t){(0,u.setToolOptions)(h,e,{mouseButtonMask:t}),(0,o.getToolState)(e,h)||(0,o.addToolState)(e,h,[]),e.removeEventListener(r.default.MOUSE_DOWN,b),e.removeEventListener(r.default.MOUSE_UP,g),e.removeEventListener(r.default.MOUSE_CLICK,g),e.removeEventListener(r.default.MOUSE_DRAG,x),e.removeEventListener(r.default.MOUSE_MOVE,x),e.removeEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,_),e.removeEventListener(a.default.cornerstone.EVENTS.NEW_IMAGE,m),e.addEventListener(r.default.MOUSE_DOWN,b),e.addEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,_),e.addEventListener(a.default.cornerstone.EVENTS.NEW_IMAGE,m),a.default.cornerstone.updateImage(e)},deactivate:E,disable:E,setConfiguration:function(e){p=e},getConfiguration:function(){return p}},S={activate:function(e){(0,o.getToolState)(e,h)||(0,o.addToolState)(e,h,[]),e.removeEventListener(r.default.TOUCH_DRAG,x),e.removeEventListener(r.default.TOUCH_START,w),e.removeEventListener(r.default.TOUCH_DRAG_END,v),e.removeEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,_),e.addEventListener(r.default.TOUCH_DRAG,x),e.addEventListener(r.default.TOUCH_START,w),e.addEventListener(r.default.TOUCH_DRAG_END,v),e.addEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,_)},deactivate:T,disable:T};t.wwwcRegion=j,t.wwwcRegionTouch=S},"./imageTools/zoom.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.zoomTouchDrag=t.zoomTouchPinch=t.zoomWheel=t.zoom=void 0;var r=f(n("./events.js")),a=f(n("./externalModules.js")),i=f(n("./imageTools/simpleMouseButtonTool.js")),o=f(n("./util/isMouseButtonEnabled.js")),s=f(n("./imageTools/mouseWheelTool.js")),l=f(n("./imageTools/touchPinchTool.js")),u=f(n("./imageTools/touchDragTool.js")),d=n("./toolOptions.js"),c=n("./util/clip.js");function f(e){return e&&e.__esModule?e:{default:e}}var h=void 0;function p(e,t){var n=b.getConfiguration(),r=Math.log(e.scale)/Math.log(1.7),a=Math.pow(1.7,r+t);return e.scale=n.maxScale&&a>n.maxScale?n.maxScale:n.minScale&&a<n.minScale?n.minScale:a,e}function m(e,t){if(t.hflip&&(e.x*=-1),t.vflip&&(e.y*=-1),0!==t.rotation){var n=t.rotation*Math.PI/180,r=Math.cos(n),a=Math.sin(n),i=e.x*a+e.y*r;e.x=e.x*r-e.y*a,e.y=i}return e}function g(e,t){var n=a.default.cornerstone,r=e.element,i=p(e.viewport,t);n.setViewport(r,i);var o=n.pageToPixel(r,e.startPoints.page.x,e.startPoints.page.y),s={x:e.startPoints.image.x-o.x,y:e.startPoints.image.y-o.y};s=m(s,i),i.translation.x-=s.x,i.translation.y-=s.y,n.setViewport(r,i)}function v(e){var t=e.detail.element;t.removeEventListener(r.default.MOUSE_DRAG,y),t.removeEventListener(r.default.MOUSE_UP,v),t.removeEventListener(r.default.MOUSE_CLICK,v)}function y(e){var t=e.detail;if(!t.deltaPoints.page.y)return!1;var n=t.deltaPoints.page.y/100,r=b.getConfiguration();r&&r.invert&&(n*=-1),b.strategy(t,n),e.preventDefault(),e.stopPropagation()}var b=(0,i.default)(function(e){var t=e.detail,n=t.element,a=(0,d.getToolOptions)("zoom",n);(0,o.default)(t.which,a.mouseButtonMask)&&(h=t.startPoints,n.addEventListener(r.default.MOUSE_DRAG,y),n.addEventListener(r.default.MOUSE_UP,v),n.addEventListener(r.default.MOUSE_CLICK,v),e.preventDefault(),e.stopPropagation())},"zoom");b.strategies={default:g,translate:function(e,t){var n=e.element,r=e.image,i=b.getConfiguration(),o=p(e.viewport,t),s={x:0,y:0};if(t<0)o.scale<3&&(Math.abs(o.translation.x)<.01?o.translation.x=0:s.x=o.translation.x/8,Math.abs(o.translation.y)<.01?o.translation.y=0:s.y=o.translation.y/8);else{i&&i.preventZoomOutsideImage&&(0,c.clipToBox)(h.image,r);var l={x:r.width/2-h.image.x,y:r.height/2-h.image.y};l=m(l,o);var u={x:o.translation.x-l.x,y:o.translation.y-l.y};Math.abs(u.x)<.01?o.translation.x=l.x:s.x=u.x/8,Math.abs(u.y)<.01?o.translation.y=l.y:s.y=u.y/8}o.translation.x-=s.x,o.translation.y-=s.y,a.default.cornerstone.setViewport(n,o)},zoomToCenter:function(e,t){var n=e.element,r=p(e.viewport,t);a.default.cornerstone.setViewport(n,r)}},b.strategy=g;var w=(0,s.default)(function(e){var t=e.detail,n=-t.direction/4,r=b.getConfiguration();r&&r.invert&&(n*=-1);var i=p(t.viewport,n);a.default.cornerstone.setViewport(t.element,i)}),x=(0,l.default)(function(e){var t=e.detail,n=a.default.cornerstone,r=b.getConfiguration(),i=t.viewport,o=t.element;i.scale+=t.scaleChange*i.scale,r.maxScale&&i.scale>r.maxScale?i.scale=r.maxScale:r.minScale&&i.scale<r.minScale&&(i.scale=r.minScale),n.setViewport(o,i);var s=n.pageToPixel(o,t.startPoints.page.x,t.startPoints.page.y),l={x:t.startPoints.image.x-s.x,y:t.startPoints.image.y-s.y};l=m(l,i),i.translation.x-=l.x,i.translation.y-=l.y,n.setViewport(o,i)}),_=(0,u.default)(y,"zoom");t.zoom=b,t.zoomWheel=w,t.zoomTouchPinch=x,t.zoomTouchDrag=_},"./index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getToolOptions=t.setToolOptions=t.version=t.adaptiveBrush=t.brush=t.zoomTouchDrag=t.zoomTouchPinch=t.zoomWheel=t.zoom=t.wwwcRegionTouch=t.wwwcRegion=t.wwwcTouchDrag=t.wwwc=t.touchTool=t.touchPinchTool=t.touchDragTool=t.textMarkerTouch=t.textMarker=t.simpleMouseButtonTool=t.simpleAngleTouch=t.simpleAngle=t.seedAnnotateTouch=t.seedAnnotate=t.scaleOverlayTool=t.saveAs=t.rotateTouch=t.rotateTouchDrag=t.rotate=t.rectangleRoiTouch=t.rectangleRoi=t.probeTouch=t.probe=t.panMultiTouch=t.panTouchDrag=t.pan=t.orientationMarkers=t.multiTouchDragTool=t.mouseWheelTool=t.mouseButtonTool=t.mouseButtonRectangleTool=t.magnifyTouchDrag=t.magnify=t.lengthTouch=t.length=t.keyboardTool=t.imageStats=t.highlightTouch=t.highlight=t.freehandSculpter=t.freehand=t.eraserTouch=t.eraser=t.ellipticalRoiTouch=t.ellipticalRoi=t.dragProbeTouch=void 0,t.dragProbe=t.doubleTapZoom=t.doubleTapTool=t.displayTool=t.crosshairsTouch=t.crosshairs=t.arrowAnnotateTouch=t.arrowAnnotate=t.angleTouch=t.angle=t.touchInput=t.preventGhostClick=t.mouseWheelInput=t.mouseInput=t.keyboardInput=t.touchMoveHandle=t.touchMoveAllHandles=t.moveNewHandleTouch=t.moveNewHandle=t.moveHandle=t.moveAllHandles=t.handleActivator=t.getHandleNearImagePoint=t.drawHandles=t.anyHandlesOutsideImage=t.stopClip=t.playClip=t.stackRenderers=t.scrollIndicator=t.stackPrefetch=t.stackScrollMultiTouch=t.stackScrollTouchDrag=t.stackScrollWheel=t.stackScroll=t.stackScrollKeyboard=t.appState=t.globalFrameOfReferenceSpecificToolStateManager=t.newFrameOfReferenceSpecificToolStateManager=t.globalImageIdSpecificToolStateManager=t.newImageIdSpecificToolStateManager=t.loadHandlerManager=t.addStackStateManager=t.newStackSpecificToolStateManager=t.stackSpecificStateManager=t.textStyle=t.newTimeSeriesSpecificToolStateManager=t.addTimeSeriesStateManager=t.toolColors=t.toolCoordinates=t.getElementToolStateManager=t.setElementToolStateManager=t.clearToolState=t.removeToolState=t.getToolState=t.addToolState=t.toolStyle=t.panZoomSynchronizer=t.stackImageIndexSynchronizer=t.stackImagePositionOffsetSynchronizer=t.stackImagePositionSynchronizer=t.stackScrollSynchronizer=t.Synchronizer=t.updateImageSynchronizer=t.wwwcSynchronizer=t.timeSeriesScrollTouchDrag=t.timeSeriesScrollWheel=t.timeSeriesScroll=t.timeSeriesPlayer=t.incrementTimePoint=t.probeTool4D=t.calculateEllipseStatistics=t.calculateSUV=t.copyPoints=t.drawArrow=t.drawCircle=t.drawEllipse=t.drawTextBox=t.getLuminance=t.isMobileDevice=t.getBrowserInfo=t.getMaxSimultaneousRequests=t.getDefaultSimultaneousRequests=t.getRGBPixels=t.isMouseButtonEnabled=t.makeUnselectable=t.pointInEllipse=t.pointInsideBoundingBox=t.planePlaneIntersection=t.imagePointToPatientPoint=t.projectPatientPointToImagePlane=t.roundToDecimal=t.scroll=t.scrollToIndex=t.setContextToDisplayFontSize=t.requestPoolManager=t.orientation=t.referenceLines=t.EVENTS=t.external=t.drawing=void 0;var r=n("./externalModules.js");Object.defineProperty(t,"external",{enumerable:!0,get:function(){return st(r).default}});var a=n("./events.js");Object.defineProperty(t,"EVENTS",{enumerable:!0,get:function(){return st(a).default}});var i=n("./referenceLines/index.js");Object.defineProperty(t,"referenceLines",{enumerable:!0,get:function(){return st(i).default}});var o=n("./orientation/index.js");Object.defineProperty(t,"orientation",{enumerable:!0,get:function(){return st(o).default}});var s=n("./requestPool/requestPoolManager.js");Object.defineProperty(t,"requestPoolManager",{enumerable:!0,get:function(){return st(s).default}});var l=n("./util/setContextToDisplayFontSize.js");Object.defineProperty(t,"setContextToDisplayFontSize",{enumerable:!0,get:function(){return st(l).default}});var u=n("./util/scrollToIndex.js");Object.defineProperty(t,"scrollToIndex",{enumerable:!0,get:function(){return st(u).default}});var d=n("./util/scroll.js");Object.defineProperty(t,"scroll",{enumerable:!0,get:function(){return st(d).default}});var c=n("./util/roundToDecimal.js");Object.defineProperty(t,"roundToDecimal",{enumerable:!0,get:function(){return st(c).default}});var f=n("./util/pointProjector.js");Object.defineProperty(t,"projectPatientPointToImagePlane",{enumerable:!0,get:function(){return f.projectPatientPointToImagePlane}}),Object.defineProperty(t,"imagePointToPatientPoint",{enumerable:!0,get:function(){return f.imagePointToPatientPoint}}),Object.defineProperty(t,"planePlaneIntersection",{enumerable:!0,get:function(){return f.planePlaneIntersection}});var h=n("./util/pointInsideBoundingBox.js");Object.defineProperty(t,"pointInsideBoundingBox",{enumerable:!0,get:function(){return st(h).default}});var p=n("./util/pointInEllipse.js");Object.defineProperty(t,"pointInEllipse",{enumerable:!0,get:function(){return st(p).default}});var m=n("./util/makeUnselectable.js");Object.defineProperty(t,"makeUnselectable",{enumerable:!0,get:function(){return st(m).default}});var g=n("./util/isMouseButtonEnabled.js");Object.defineProperty(t,"isMouseButtonEnabled",{enumerable:!0,get:function(){return st(g).default}});var v=n("./util/getRGBPixels.js");Object.defineProperty(t,"getRGBPixels",{enumerable:!0,get:function(){return st(v).default}});var y=n("./util/getMaxSimultaneousRequests.js");Object.defineProperty(t,"getDefaultSimultaneousRequests",{enumerable:!0,get:function(){return y.getDefaultSimultaneousRequests}}),Object.defineProperty(t,"getMaxSimultaneousRequests",{enumerable:!0,get:function(){return y.getMaxSimultaneousRequests}}),Object.defineProperty(t,"getBrowserInfo",{enumerable:!0,get:function(){return y.getBrowserInfo}}),Object.defineProperty(t,"isMobileDevice",{enumerable:!0,get:function(){return y.isMobileDevice}});var b=n("./util/getLuminance.js");Object.defineProperty(t,"getLuminance",{enumerable:!0,get:function(){return st(b).default}});var w=n("./util/drawTextBox.js");Object.defineProperty(t,"drawTextBox",{enumerable:!0,get:function(){return st(w).default}});var x=n("./util/drawEllipse.js");Object.defineProperty(t,"drawEllipse",{enumerable:!0,get:function(){return st(x).default}});var _=n("./util/drawCircle.js");Object.defineProperty(t,"drawCircle",{enumerable:!0,get:function(){return st(_).default}});var E=n("./util/drawArrow.js");Object.defineProperty(t,"drawArrow",{enumerable:!0,get:function(){return st(E).default}});var T=n("./util/copyPoints.js");Object.defineProperty(t,"copyPoints",{enumerable:!0,get:function(){return st(T).default}});var j=n("./util/calculateSUV.js");Object.defineProperty(t,"calculateSUV",{enumerable:!0,get:function(){return st(j).default}});var S=n("./util/calculateEllipseStatistics.js");Object.defineProperty(t,"calculateEllipseStatistics",{enumerable:!0,get:function(){return st(S).default}});var C=n("./timeSeriesTools/probeTool4D.js");Object.defineProperty(t,"probeTool4D",{enumerable:!0,get:function(){return st(C).default}});var O=n("./timeSeriesTools/incrementTimePoint.js");Object.defineProperty(t,"incrementTimePoint",{enumerable:!0,get:function(){return st(O).default}});var P=n("./timeSeriesTools/timeSeriesPlayer.js");Object.defineProperty(t,"timeSeriesPlayer",{enumerable:!0,get:function(){return st(P).default}});var I=n("./timeSeriesTools/timeSeriesScroll.js");Object.defineProperty(t,"timeSeriesScroll",{enumerable:!0,get:function(){return I.timeSeriesScroll}}),Object.defineProperty(t,"timeSeriesScrollWheel",{enumerable:!0,get:function(){return I.timeSeriesScrollWheel}}),Object.defineProperty(t,"timeSeriesScrollTouchDrag",{enumerable:!0,get:function(){return I.timeSeriesScrollTouchDrag}});var M=n("./synchronization/wwwcSynchronizer.js");Object.defineProperty(t,"wwwcSynchronizer",{enumerable:!0,get:function(){return st(M).default}});var D=n("./synchronization/updateImageSynchronizer.js");Object.defineProperty(t,"updateImageSynchronizer",{enumerable:!0,get:function(){return st(D).default}});var L=n("./synchronization/Synchronizer.js");Object.defineProperty(t,"Synchronizer",{enumerable:!0,get:function(){return st(L).default}});var A=n("./synchronization/stackScrollSynchronizer.js");Object.defineProperty(t,"stackScrollSynchronizer",{enumerable:!0,get:function(){return st(A).default}});var k=n("./synchronization/stackImagePositionSynchronizer.js");Object.defineProperty(t,"stackImagePositionSynchronizer",{enumerable:!0,get:function(){return st(k).default}});var R=n("./synchronization/stackImagePositionOffsetSynchronizer.js");Object.defineProperty(t,"stackImagePositionOffsetSynchronizer",{enumerable:!0,get:function(){return st(R).default}});var U=n("./synchronization/stackImageIndexSynchronizer.js");Object.defineProperty(t,"stackImageIndexSynchronizer",{enumerable:!0,get:function(){return st(U).default}});var N=n("./synchronization/panZoomSynchronizer.js");Object.defineProperty(t,"panZoomSynchronizer",{enumerable:!0,get:function(){return st(N).default}});var B=n("./stateManagement/toolStyle.js");Object.defineProperty(t,"toolStyle",{enumerable:!0,get:function(){return st(B).default}});var H=n("./stateManagement/toolState.js");Object.defineProperty(t,"addToolState",{enumerable:!0,get:function(){return H.addToolState}}),Object.defineProperty(t,"getToolState",{enumerable:!0,get:function(){return H.getToolState}}),Object.defineProperty(t,"removeToolState",{enumerable:!0,get:function(){return H.removeToolState}}),Object.defineProperty(t,"clearToolState",{enumerable:!0,get:function(){return H.clearToolState}}),Object.defineProperty(t,"setElementToolStateManager",{enumerable:!0,get:function(){return H.setElementToolStateManager}}),Object.defineProperty(t,"getElementToolStateManager",{enumerable:!0,get:function(){return H.getElementToolStateManager}});var F=n("./stateManagement/toolCoordinates.js");Object.defineProperty(t,"toolCoordinates",{enumerable:!0,get:function(){return st(F).default}});var V=n("./stateManagement/toolColors.js");Object.defineProperty(t,"toolColors",{enumerable:!0,get:function(){return st(V).default}});var z=n("./stateManagement/timeSeriesSpecificStateManager.js");Object.defineProperty(t,"addTimeSeriesStateManager",{enumerable:!0,get:function(){return z.addTimeSeriesStateManager}}),Object.defineProperty(t,"newTimeSeriesSpecificToolStateManager",{enumerable:!0,get:function(){return z.newTimeSeriesSpecificToolStateManager}});var W=n("./stateManagement/textStyle.js");Object.defineProperty(t,"textStyle",{enumerable:!0,get:function(){return st(W).default}});var q=n("./stateManagement/stackSpecificStateManager.js");Object.defineProperty(t,"stackSpecificStateManager",{enumerable:!0,get:function(){return q.stackSpecificStateManager}}),Object.defineProperty(t,"newStackSpecificToolStateManager",{enumerable:!0,get:function(){return q.newStackSpecificToolStateManager}}),Object.defineProperty(t,"addStackStateManager",{enumerable:!0,get:function(){return q.addStackStateManager}});var G=n("./stateManagement/loadHandlerManager.js");Object.defineProperty(t,"loadHandlerManager",{enumerable:!0,get:function(){return st(G).default}});var Y=n("./stateManagement/imageIdSpecificStateManager.js");Object.defineProperty(t,"newImageIdSpecificToolStateManager",{enumerable:!0,get:function(){return Y.newImageIdSpecificToolStateManager}}),Object.defineProperty(t,"globalImageIdSpecificToolStateManager",{enumerable:!0,get:function(){return Y.globalImageIdSpecificToolStateManager}});var $=n("./stateManagement/frameOfReferenceStateManager.js");Object.defineProperty(t,"newFrameOfReferenceSpecificToolStateManager",{enumerable:!0,get:function(){return $.newFrameOfReferenceSpecificToolStateManager}}),Object.defineProperty(t,"globalFrameOfReferenceSpecificToolStateManager",{enumerable:!0,get:function(){return $.globalFrameOfReferenceSpecificToolStateManager}});var X=n("./stateManagement/appState.js");Object.defineProperty(t,"appState",{enumerable:!0,get:function(){return st(X).default}});var Z=n("./stackTools/stackScrollKeyboard.js");Object.defineProperty(t,"stackScrollKeyboard",{enumerable:!0,get:function(){return st(Z).default}});var K=n("./stackTools/stackScroll.js");Object.defineProperty(t,"stackScroll",{enumerable:!0,get:function(){return K.stackScroll}}),Object.defineProperty(t,"stackScrollWheel",{enumerable:!0,get:function(){return K.stackScrollWheel}}),Object.defineProperty(t,"stackScrollTouchDrag",{enumerable:!0,get:function(){return K.stackScrollTouchDrag}}),Object.defineProperty(t,"stackScrollMultiTouch",{enumerable:!0,get:function(){return K.stackScrollMultiTouch}});var J=n("./stackTools/stackPrefetch.js");Object.defineProperty(t,"stackPrefetch",{enumerable:!0,get:function(){return st(J).default}});var Q=n("./stackTools/scrollIndicator.js");Object.defineProperty(t,"scrollIndicator",{enumerable:!0,get:function(){return st(Q).default}});var ee=n("./stackTools/stackRenderers.js");Object.defineProperty(t,"stackRenderers",{enumerable:!0,get:function(){return st(ee).default}});var te=n("./stackTools/playClip.js");Object.defineProperty(t,"playClip",{enumerable:!0,get:function(){return te.playClip}}),Object.defineProperty(t,"stopClip",{enumerable:!0,get:function(){return te.stopClip}});var ne=n("./manipulators/anyHandlesOutsideImage.js");Object.defineProperty(t,"anyHandlesOutsideImage",{enumerable:!0,get:function(){return st(ne).default}});var re=n("./manipulators/drawHandles.js");Object.defineProperty(t,"drawHandles",{enumerable:!0,get:function(){return st(re).default}});var ae=n("./manipulators/getHandleNearImagePoint.js");Object.defineProperty(t,"getHandleNearImagePoint",{enumerable:!0,get:function(){return st(ae).default}});var ie=n("./manipulators/handleActivator.js");Object.defineProperty(t,"handleActivator",{enumerable:!0,get:function(){return st(ie).default}});var oe=n("./manipulators/moveAllHandles.js");Object.defineProperty(t,"moveAllHandles",{enumerable:!0,get:function(){return st(oe).default}});var se=n("./manipulators/moveHandle.js");Object.defineProperty(t,"moveHandle",{enumerable:!0,get:function(){return st(se).default}});var le=n("./manipulators/moveNewHandle.js");Object.defineProperty(t,"moveNewHandle",{enumerable:!0,get:function(){return st(le).default}});var ue=n("./manipulators/moveNewHandleTouch.js");Object.defineProperty(t,"moveNewHandleTouch",{enumerable:!0,get:function(){return st(ue).default}});var de=n("./manipulators/touchMoveAllHandles.js");Object.defineProperty(t,"touchMoveAllHandles",{enumerable:!0,get:function(){return st(de).default}});var ce=n("./manipulators/touchMoveHandle.js");Object.defineProperty(t,"touchMoveHandle",{enumerable:!0,get:function(){return st(ce).default}});var fe=n("./inputSources/keyboardInput.js");Object.defineProperty(t,"keyboardInput",{enumerable:!0,get:function(){return st(fe).default}});var he=n("./inputSources/mouseInput.js");Object.defineProperty(t,"mouseInput",{enumerable:!0,get:function(){return st(he).default}});var pe=n("./inputSources/mouseWheelInput.js");Object.defineProperty(t,"mouseWheelInput",{enumerable:!0,get:function(){return st(pe).default}});var me=n("./inputSources/preventGhostClick.js");Object.defineProperty(t,"preventGhostClick",{enumerable:!0,get:function(){return st(me).default}});var ge=n("./inputSources/touchInput.js");Object.defineProperty(t,"touchInput",{enumerable:!0,get:function(){return st(ge).default}});var ve=n("./imageTools/angleTool.js");Object.defineProperty(t,"angle",{enumerable:!0,get:function(){return ve.angle}}),Object.defineProperty(t,"angleTouch",{enumerable:!0,get:function(){return ve.angleTouch}});var ye=n("./imageTools/arrowAnnotate.js");Object.defineProperty(t,"arrowAnnotate",{enumerable:!0,get:function(){return ye.arrowAnnotate}}),Object.defineProperty(t,"arrowAnnotateTouch",{enumerable:!0,get:function(){return ye.arrowAnnotateTouch}});var be=n("./imageTools/crosshairs.js");Object.defineProperty(t,"crosshairs",{enumerable:!0,get:function(){return be.crosshairs}}),Object.defineProperty(t,"crosshairsTouch",{enumerable:!0,get:function(){return be.crosshairsTouch}});var we=n("./imageTools/displayTool.js");Object.defineProperty(t,"displayTool",{enumerable:!0,get:function(){return st(we).default}});var xe=n("./imageTools/doubleTapTool.js");Object.defineProperty(t,"doubleTapTool",{enumerable:!0,get:function(){return st(xe).default}});var _e=n("./imageTools/doubleTapZoom.js");Object.defineProperty(t,"doubleTapZoom",{enumerable:!0,get:function(){return st(_e).default}});var Ee=n("./imageTools/dragProbe.js");Object.defineProperty(t,"dragProbe",{enumerable:!0,get:function(){return Ee.dragProbe}}),Object.defineProperty(t,"dragProbeTouch",{enumerable:!0,get:function(){return Ee.dragProbeTouch}});var Te=n("./imageTools/ellipticalRoi.js");Object.defineProperty(t,"ellipticalRoi",{enumerable:!0,get:function(){return Te.ellipticalRoi}}),Object.defineProperty(t,"ellipticalRoiTouch",{enumerable:!0,get:function(){return Te.ellipticalRoiTouch}});var je=n("./imageTools/eraser.js");Object.defineProperty(t,"eraser",{enumerable:!0,get:function(){return je.eraser}}),Object.defineProperty(t,"eraserTouch",{enumerable:!0,get:function(){return je.eraserTouch}});var Se=n("./imageTools/freehand.js");Object.defineProperty(t,"freehand",{enumerable:!0,get:function(){return Se.freehand}});var Ce=n("./imageTools/freehandSculpter.js");Object.defineProperty(t,"freehandSculpter",{enumerable:!0,get:function(){return Ce.freehandSculpter}});var Oe=n("./imageTools/highlight.js");Object.defineProperty(t,"highlight",{enumerable:!0,get:function(){return Oe.highlight}}),Object.defineProperty(t,"highlightTouch",{enumerable:!0,get:function(){return Oe.highlightTouch}});var Pe=n("./imageTools/imageStats.js");Object.defineProperty(t,"imageStats",{enumerable:!0,get:function(){return st(Pe).default}});var Ie=n("./imageTools/keyboardTool.js");Object.defineProperty(t,"keyboardTool",{enumerable:!0,get:function(){return st(Ie).default}});var Me=n("./imageTools/length.js");Object.defineProperty(t,"length",{enumerable:!0,get:function(){return Me.length}}),Object.defineProperty(t,"lengthTouch",{enumerable:!0,get:function(){return Me.lengthTouch}});var De=n("./imageTools/magnify.js");Object.defineProperty(t,"magnify",{enumerable:!0,get:function(){return De.magnify}}),Object.defineProperty(t,"magnifyTouchDrag",{enumerable:!0,get:function(){return De.magnifyTouchDrag}});var Le=n("./imageTools/mouseButtonRectangleTool.js");Object.defineProperty(t,"mouseButtonRectangleTool",{enumerable:!0,get:function(){return st(Le).default}});var Ae=n("./imageTools/mouseButtonTool.js");Object.defineProperty(t,"mouseButtonTool",{enumerable:!0,get:function(){return st(Ae).default}});var ke=n("./imageTools/mouseWheelTool.js");Object.defineProperty(t,"mouseWheelTool",{enumerable:!0,get:function(){return st(ke).default}});var Re=n("./imageTools/multiTouchDragTool.js");Object.defineProperty(t,"multiTouchDragTool",{enumerable:!0,get:function(){return st(Re).default}});var Ue=n("./imageTools/orientationMarkers.js");Object.defineProperty(t,"orientationMarkers",{enumerable:!0,get:function(){return st(Ue).default}});var Ne=n("./imageTools/pan.js");Object.defineProperty(t,"pan",{enumerable:!0,get:function(){return Ne.pan}}),Object.defineProperty(t,"panTouchDrag",{enumerable:!0,get:function(){return Ne.panTouchDrag}});var Be=n("./imageTools/panMultiTouch.js");Object.defineProperty(t,"panMultiTouch",{enumerable:!0,get:function(){return st(Be).default}});var He=n("./imageTools/probe.js");Object.defineProperty(t,"probe",{enumerable:!0,get:function(){return He.probe}}),Object.defineProperty(t,"probeTouch",{enumerable:!0,get:function(){return He.probeTouch}});var Fe=n("./imageTools/rectangleRoi.js");Object.defineProperty(t,"rectangleRoi",{enumerable:!0,get:function(){return Fe.rectangleRoi}}),Object.defineProperty(t,"rectangleRoiTouch",{enumerable:!0,get:function(){return Fe.rectangleRoiTouch}});var Ve=n("./imageTools/rotate.js");Object.defineProperty(t,"rotate",{enumerable:!0,get:function(){return Ve.rotate}}),Object.defineProperty(t,"rotateTouchDrag",{enumerable:!0,get:function(){return Ve.rotateTouchDrag}});var ze=n("./imageTools/rotateTouch.js");Object.defineProperty(t,"rotateTouch",{enumerable:!0,get:function(){return st(ze).default}});var We=n("./imageTools/saveAs.js");Object.defineProperty(t,"saveAs",{enumerable:!0,get:function(){return st(We).default}});var qe=n("./imageTools/scaleOverlayTool.js");Object.defineProperty(t,"scaleOverlayTool",{enumerable:!0,get:function(){return st(qe).default}});var Ge=n("./imageTools/seedAnnotate.js");Object.defineProperty(t,"seedAnnotate",{enumerable:!0,get:function(){return Ge.seedAnnotate}}),Object.defineProperty(t,"seedAnnotateTouch",{enumerable:!0,get:function(){return Ge.seedAnnotateTouch}});var Ye=n("./imageTools/simpleAngle.js");Object.defineProperty(t,"simpleAngle",{enumerable:!0,get:function(){return Ye.simpleAngle}}),Object.defineProperty(t,"simpleAngleTouch",{enumerable:!0,get:function(){return Ye.simpleAngleTouch}});var $e=n("./imageTools/simpleMouseButtonTool.js");Object.defineProperty(t,"simpleMouseButtonTool",{enumerable:!0,get:function(){return st($e).default}});var Xe=n("./imageTools/textMarker.js");Object.defineProperty(t,"textMarker",{enumerable:!0,get:function(){return Xe.textMarker}}),Object.defineProperty(t,"textMarkerTouch",{enumerable:!0,get:function(){return Xe.textMarkerTouch}});var Ze=n("./imageTools/touchDragTool.js");Object.defineProperty(t,"touchDragTool",{enumerable:!0,get:function(){return st(Ze).default}});var Ke=n("./imageTools/touchPinchTool.js");Object.defineProperty(t,"touchPinchTool",{enumerable:!0,get:function(){return st(Ke).default}});var Je=n("./imageTools/touchTool.js");Object.defineProperty(t,"touchTool",{enumerable:!0,get:function(){return st(Je).default}});var Qe=n("./imageTools/wwwc.js");Object.defineProperty(t,"wwwc",{enumerable:!0,get:function(){return Qe.wwwc}}),Object.defineProperty(t,"wwwcTouchDrag",{enumerable:!0,get:function(){return Qe.wwwcTouchDrag}});var et=n("./imageTools/wwwcRegion.js");Object.defineProperty(t,"wwwcRegion",{enumerable:!0,get:function(){return et.wwwcRegion}}),Object.defineProperty(t,"wwwcRegionTouch",{enumerable:!0,get:function(){return et.wwwcRegionTouch}});var tt=n("./imageTools/zoom.js");Object.defineProperty(t,"zoom",{enumerable:!0,get:function(){return tt.zoom}}),Object.defineProperty(t,"zoomWheel",{enumerable:!0,get:function(){return tt.zoomWheel}}),Object.defineProperty(t,"zoomTouchPinch",{enumerable:!0,get:function(){return tt.zoomTouchPinch}}),Object.defineProperty(t,"zoomTouchDrag",{enumerable:!0,get:function(){return tt.zoomTouchDrag}});var nt=n("./paintingTools/brush.js");Object.defineProperty(t,"brush",{enumerable:!0,get:function(){return nt.brush}});var rt=n("./paintingTools/adaptiveBrush.js");Object.defineProperty(t,"adaptiveBrush",{enumerable:!0,get:function(){return rt.adaptiveBrush}});var at=n("./version.js");Object.defineProperty(t,"version",{enumerable:!0,get:function(){return st(at).default}});var it=n("./toolOptions.js");Object.defineProperty(t,"setToolOptions",{enumerable:!0,get:function(){return it.setToolOptions}}),Object.defineProperty(t,"getToolOptions",{enumerable:!0,get:function(){return it.getToolOptions}});var ot=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("./util/drawing.js"));function st(e){return e&&e.__esModule?e:{default:e}}t.drawing=ot},"./inputSources/keyboardInput.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n("./events.js")),a=o(n("./externalModules.js")),i=o(n("./util/triggerEvent.js"));function o(e){return e&&e.__esModule?e:{default:e}}var s=void 0,l=void 0;function u(e){var t=a.default.cornerstone,n=e.currentTarget,o=t.getEnabledElement(n);if(o.image){var u={event:window.event||e,element:n,viewport:t.getViewport(n),image:o.image,currentPoints:{page:{x:s,y:l},image:t.pageToPixel(n,s,l)},keyCode:e.keyCode,which:e.which};u.currentPoints.canvas=t.pixelToCanvas(n,u.currentPoints.image),(0,i.default)(n,{keydown:r.default.KEY_DOWN,keypress:r.default.KEY_PRESS,keyup:r.default.KEY_UP}[e.type],u)}}function d(e){s=e.pageX,l=e.pageY}var c=["keydown","keypress","keyup"];t.default={enable:function(e){c.forEach(function(t){e.removeEventListener(t,u),e.addEventListener(t,u)}),e.removeEventListener("mousemove",d),e.addEventListener("mousemove",d)},disable:function(e){c.forEach(function(t){e.removeEventListener(t,u)}),e.removeEventListener("mousemove",d)}}},"./inputSources/mouseInput.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n("./events.js")),a=s(n("./externalModules.js")),i=s(n("./util/copyPoints.js")),o=s(n("./util/triggerEvent.js"));function s(e){return e&&e.__esModule?e:{default:e}}var l=!0,u=void 0,d=200;function c(e){return"number"!=typeof e.buttons?e.which:0===e.buttons?0:e.buttons%2==1?1:e.buttons%4==2?3:e.buttons%8==4?2:0}function f(){l=!1}function h(e){var t=a.default.cornerstone,n=e.currentTarget,s=t.getEnabledElement(n);if(s.image){var l=r.default.MOUSE_DOUBLE_CLICK,u={page:a.default.cornerstoneMath.point.pageToPoint(e),image:t.pageToPixel(n,e.pageX,e.pageY),client:{x:e.clientX,y:e.clientY}};u.canvas=t.pixelToCanvas(n,u.image);var d=(0,i.default)(u),c={event:e,which:e.which,viewport:t.getViewport(n),image:s.image,element:n,startPoints:u,lastPoints:d,currentPoints:u,deltaPoints:{x:0,y:0},type:l};(0,o.default)(n,l,c)}}function p(e){var t=a.default.cornerstone,n=e.currentTarget,s=t.getEnabledElement(n);if(s.image){u=setTimeout(f,d);var h=r.default.MOUSE_DOWN;n.removeEventListener("mousemove",m);var p={page:a.default.cornerstoneMath.point.pageToPoint(e),image:t.pageToPixel(n,e.pageX,e.pageY),client:{x:e.clientX,y:e.clientY}};p.canvas=t.pixelToCanvas(n,p.image);var g=(0,i.default)(p),v={event:e,which:c(e),viewport:t.getViewport(n),image:s.image,element:n,startPoints:p,lastPoints:g,currentPoints:p,deltaPoints:{x:0,y:0},type:h};(0,o.default)(v.element,h,v)&&(v.type=r.default.MOUSE_DOWN_ACTIVATE,(0,o.default)(v.element,r.default.MOUSE_DOWN_ACTIVATE,v));var y=c(e);document.addEventListener("mousemove",b),document.addEventListener("mouseup",function e(i){clearTimeout(u);var d=r.default.MOUSE_UP;l&&(d=r.default.MOUSE_CLICK);var c={page:a.default.cornerstoneMath.point.pageToPoint(i),image:t.pageToPixel(n,i.pageX,i.pageY),client:{x:i.clientX,y:i.clientY}};c.canvas=t.pixelToCanvas(n,c.image);var f={page:a.default.cornerstoneMath.point.subtract(c.page,g.page),image:a.default.cornerstoneMath.point.subtract(c.image,g.image),client:a.default.cornerstoneMath.point.subtract(c.client,g.client),canvas:a.default.cornerstoneMath.point.subtract(c.canvas,g.canvas)},h={event:i,which:y,viewport:t.getViewport(n),image:s.image,element:n,startPoints:p,lastPoints:g,currentPoints:c,deltaPoints:f,type:d};(0,o.default)(h.element,d,h),document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",e),n.addEventListener("mousemove",m),l=!0})}function b(e){var l=r.default.MOUSE_DRAG,u={page:a.default.cornerstoneMath.point.pageToPoint(e),image:t.pageToPixel(n,e.pageX,e.pageY),client:{x:e.clientX,y:e.clientY}};u.canvas=t.pixelToCanvas(n,u.image);var d={page:a.default.cornerstoneMath.point.subtract(u.page,g.page),image:a.default.cornerstoneMath.point.subtract(u.image,g.image),client:a.default.cornerstoneMath.point.subtract(u.client,g.client),canvas:a.default.cornerstoneMath.point.subtract(u.canvas,g.canvas)},c={which:y,viewport:t.getViewport(n),image:s.image,element:n,startPoints:p,lastPoints:g,currentPoints:u,deltaPoints:d,type:l,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey};(0,o.default)(c.element,l,c),g=(0,i.default)(u)}}function m(e){var t=a.default.cornerstone,n=e.currentTarget,s=t.getEnabledElement(n);if(s.image){var l=r.default.MOUSE_MOVE,u={page:a.default.cornerstoneMath.point.pageToPoint(e),image:t.pageToPixel(n,e.pageX,e.pageY),client:{x:e.clientX,y:e.clientY}};u.canvas=t.pixelToCanvas(n,u.image);var d=(0,i.default)(u),c={page:a.default.cornerstoneMath.point.pageToPoint(e),image:t.pageToPixel(n,e.pageX,e.pageY),client:{x:e.clientX,y:e.clientY}};c.canvas=t.pixelToCanvas(n,c.image);var f={page:a.default.cornerstoneMath.point.subtract(c.page,d.page),image:a.default.cornerstoneMath.point.subtract(c.image,d.image),client:a.default.cornerstoneMath.point.subtract(c.client,d.client),canvas:a.default.cornerstoneMath.point.subtract(c.canvas,d.canvas)},h={viewport:t.getViewport(n),image:s.image,element:n,startPoints:u,lastPoints:d,currentPoints:c,deltaPoints:f,type:l};(0,o.default)(n,l,h),d=(0,i.default)(c)}}function g(e){e.removeEventListener("mousedown",p),e.removeEventListener("mousemove",m),e.removeEventListener("dblclick",h)}t.default={enable:function(e){g(e),e.addEventListener("mousedown",p),e.addEventListener("mousemove",m),e.addEventListener("dblclick",h)},disable:g}},"./inputSources/mouseWheelInput.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n("./events.js")),a=o(n("./externalModules.js")),i=o(n("./util/triggerEvent.js"));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=a.default.cornerstone,n=e.currentTarget,o=t.getEnabledElement(n);if(o.image&&!("mousewheel"===e.type&&0===e.wheelDeltaY||"DOMMouseScroll"===e.type&&1===e.axis)){e.preventDefault();var s=void 0,l=void 0;void 0!==e.pageX&&void 0!==e.pageY?(s=e.pageX,l=e.pageY):(s=e.x,l=e.y);var u=t.pageToPixel(n,s,l),d=((e=window.event&&window.event.wheelDelta?window.event:e).wheelDelta?e.wheelDelta:e.deltaY?-e.deltaY:e.detail?-e.detail:e.wheelDelta)<0?-1:1,c={element:n,viewport:t.getViewport(n),image:o.image,direction:d,pageX:s,pageY:l,imageX:u.x,imageY:u.y};(0,i.default)(n,r.default.MOUSE_WHEEL,c)}}var l=["mousewheel","DOMMouseScroll"];function u(e){l.forEach(function(t){e.removeEventListener(t,s)})}t.default={enable:function(e){u(e),l.forEach(function(t){e.addEventListener(t,s)})},disable:u}},"./inputSources/preventGhostClick.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=2e3,a={mouse:0,touch:1},i=void 0,o=void 0;function s(e,t){var n=Date.now();if(e!==i){if(n-o<=r)return t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),!1;i=e}o=n}var l=s.bind(null,a.mouse),u=s.bind(null,a.touch);function d(e,t,n){var r=n?l:u;t.forEach(function(t){e.addEventListener(t,r)})}function c(e,t,n){var r=n?l:u;t.forEach(function(t){e.removeEventListener(t,r)})}var f=["mousedown","mouseup"],h=["touchstart","touchend"];function p(e){c(e,f,a.mouse),c(e,h,a.touch)}t.default={enable:function(e){p(e),d(e,f,a.mouse),d(e,h,a.touch)},disable:p}},"./inputSources/touchInput.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n("./events.js")),a=u(n("./externalModules.js")),i=u(n("./util/copyPoints.js")),o=u(n("./inputSources/preventGhostClick.js")),s=u(n("./util/triggerEvent.js")),l=n("./toolOptions.js");function u(e){return e&&e.__esModule?e:{default:e}}var d=void 0,c=void 0,f=void 0,h=void 0,p=void 0,m=void 0,g=void 0,v=void 0,y=1,b=0,w=!1,x=!1,_=void 0,E=700,T=5,j="touchInput";function S(e){var t=a.default.cornerstone,n=e.currentTarget||e.srcEvent.currentTarget,o=t.getEnabledElement(n);if(o.image){var l=void 0,u=void 0,j=void 0,S=void 0;switch(e.preventDefault(),(e.pointers&&e.pointers.length>1||e.touches&&e.touches.length>1)&&(x=!1,clearTimeout(g)),e.type){case"tap":x=!1,clearTimeout(g),(c={page:a.default.cornerstoneMath.point.pageToPoint(e.pointers[0]),image:t.pageToPixel(n,e.pointers[0].pageX,e.pointers[0].pageY),client:{x:e.pointers[0].clientX,y:e.pointers[0].clientY}}).canvas=t.pixelToCanvas(n,c.image),l=r.default.TAP,p={event:e,viewport:t.getViewport(n),image:o.image,element:n,currentPoints:c,type:l,isTouchEvent:!0},(0,s.default)(n,l,p);break;case"doubletap":x=!1,clearTimeout(g),(c={page:a.default.cornerstoneMath.point.pageToPoint(e.pointers[0]),image:t.pageToPixel(n,e.pointers[0].pageX,e.pointers[0].pageY),client:{x:e.pointers[0].clientX,y:e.pointers[0].clientY}}).canvas=t.pixelToCanvas(n,c.image),l=r.default.DOUBLE_TAP,p={event:e,viewport:t.getViewport(n),image:o.image,element:n,currentPoints:c,type:l,isTouchEvent:!0},(0,s.default)(n,l,p);break;case"pinchstart":x=!1,clearTimeout(g),y=1;break;case"pinchmove":if(x=!1,clearTimeout(g),!0===w){y=e.scale,w=!1;break}u=(e.scale-y)/y,(d={page:e.center,image:t.pageToPixel(n,e.center.x,e.center.y)}).canvas=t.pixelToCanvas(n,d.image),l=r.default.TOUCH_PINCH,p={event:e,startPoints:d,viewport:t.getViewport(n),image:o.image,element:n,direction:e.scale<1?1:-1,scaleChange:u,type:l,isTouchEvent:!0},(0,s.default)(n,l,p),y=e.scale;break;case"touchstart":y=1,clearTimeout(g),clearTimeout(m),m=setTimeout(function(){(d={page:a.default.cornerstoneMath.point.pageToPoint(e.touches[0]),image:t.pageToPixel(n,e.touches[0].pageX,e.touches[0].pageY),client:{x:e.touches[0].clientX,y:e.touches[0].clientY}}).canvas=t.pixelToCanvas(n,d.image),l=r.default.TOUCH_START,e.touches.length>1&&(l=r.default.MULTI_TOUCH_START),p={event:e,viewport:t.getViewport(n),image:o.image,element:n,startPoints:d,currentPoints:d,type:l,isTouchEvent:!0},!0===(0,s.default)(n,l,p)&&(l=r.default.TOUCH_START_ACTIVE,e.touches.length>1&&(l=r.default.MULTI_TOUCH_START_ACTIVE),p.type=l,(0,s.default)(n,l,p)),f=(0,i.default)(d)},50),x=!0,v=0,g=setTimeout(function(){x&&((c={page:a.default.cornerstoneMath.point.pageToPoint(e.touches[0]),image:t.pageToPixel(n,e.touches[0].pageX,e.touches[0].pageY),client:{x:e.touches[0].clientX,y:e.touches[0].clientY}}).canvas=t.pixelToCanvas(n,d.image),l=r.default.TOUCH_PRESS,p={event:e,viewport:t.getViewport(n),image:o.image,element:n,currentPoints:c,type:l,isTouchEvent:!0},(0,s.default)(n,l,p))},E);break;case"touchend":y=1,x=!1,clearTimeout(g),setTimeout(function(){(d={page:a.default.cornerstoneMath.point.pageToPoint(e.changedTouches[0]),image:t.pageToPixel(n,e.changedTouches[0].pageX,e.changedTouches[0].pageY),client:{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}}).canvas=t.pixelToCanvas(n,d.image),l=r.default.TOUCH_END,p={event:e,viewport:t.getViewport(n),image:o.image,element:n,startPoints:d,currentPoints:d,type:l,isTouchEvent:!0},(0,s.default)(n,l,p)},50);break;case"panmove":j={x:e.deltaX-_.x,y:e.deltaY-_.y},_={x:e.deltaX,y:e.deltaY},(c={page:{x:f.page.x+j.x,y:f.page.y+j.y},image:t.pageToPixel(n,f.page.x+j.x,f.page.y+j.y),client:{x:f.client.x+j.x,y:f.client.y+j.y}}).canvas=t.pixelToCanvas(n,c.image),h={page:a.default.cornerstoneMath.point.subtract(c.page,f.page),image:a.default.cornerstoneMath.point.subtract(c.image,f.image),client:a.default.cornerstoneMath.point.subtract(c.client,f.client),canvas:a.default.cornerstoneMath.point.subtract(c.canvas,f.canvas)},(v+=Math.sqrt(h.page.x*h.page.x+h.page.y*h.page.y))>T&&(x=!1,clearTimeout(g)),l=r.default.TOUCH_DRAG,e.pointers.length>1&&(l=r.default.MULTI_TOUCH_DRAG),p={viewport:t.getViewport(n),image:o.image,element:n,startPoints:d,lastPoints:f,currentPoints:c,deltaPoints:h,numPointers:e.pointers.length,type:l,isTouchEvent:!0},(0,s.default)(n,l,p),f=(0,i.default)(c);break;case"panstart":_={x:e.deltaX,y:e.deltaY},(c={page:a.default.cornerstoneMath.point.pageToPoint(e.pointers[0]),image:t.pageToPixel(n,e.pointers[0].pageX,e.pointers[0].pageY),client:{x:e.pointers[0].clientX,y:e.pointers[0].clientY}}).canvas=t.pixelToCanvas(n,c.image),f=(0,i.default)(c);break;case"panend":if(x=!1,clearTimeout(g),!f)return!1;(c={page:a.default.cornerstoneMath.point.pageToPoint(e.pointers[0]),image:t.pageToPixel(n,e.pointers[0].pageX,e.pointers[0].pageY),client:{x:e.pointers[0].clientX,y:e.pointers[0].clientY}}).canvas=t.pixelToCanvas(n,c.image),h={page:a.default.cornerstoneMath.point.subtract(c.page,f.page),image:a.default.cornerstoneMath.point.subtract(c.image,f.image),client:a.default.cornerstoneMath.point.subtract(c.client,f.client),canvas:a.default.cornerstoneMath.point.subtract(c.canvas,f.canvas)},l=r.default.TOUCH_DRAG_END,p={event:e.srcEvent,viewport:t.getViewport(n),image:o.image,element:n,startPoints:d,lastPoints:f,currentPoints:c,deltaPoints:h,type:l,isTouchEvent:!0},(0,s.default)(n,l,p),2==e.pointers.length-e.changedPointers.length&&(w=!0);break;case"rotatemove":x=!1,clearTimeout(g),S=e.rotation-b,b=e.rotation,l=r.default.TOUCH_ROTATE,p={event:e.srcEvent,viewport:t.getViewport(n),image:o.image,element:n,rotation:S,type:l},(0,s.default)(n,l,p)}return!1}}function C(e){o.default.disable(e),["touchstart","touchend"].forEach(function(t){e.removeEventListener(t,S)});var t=(0,l.getToolOptions)(j,e).hammer;t&&t.off("tap doubletap panstart panmove panend pinchstart pinchmove rotatemove",S)}t.default={enable:function(e){C(e);var t=a.default.Hammer,n=new t.Manager(e,{inputClass:t.SUPPORT_POINTER_EVENTS?t.PointerEventInput:t.TouchInput}),r=new t.Pan({pointers:0,direction:t.DIRECTION_ALL,threshold:0}),i=new t.Pinch({threshold:0}),s=new t.Rotate({threshold:0});i.recognizeWith(r),i.recognizeWith(s),s.recognizeWith(r);var u=new t.Tap({event:"doubletap",taps:2,interval:1500,threshold:50,posThreshold:50});u.recognizeWith(r),n.add([u,r,s,i]),n.on("tap doubletap panstart panmove panend pinchstart pinchmove rotatemove",S),o.default.enable(e),["touchstart","touchend"].forEach(function(t){e.addEventListener(t,S)});var d=(0,l.getToolOptions)(j,e);d.hammer=n,(0,l.setToolOptions)(j,e,d)},disable:C}},"./manipulators/anyHandlesOutsideImage.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.image,r={left:0,top:0,width:n.width,height:n.height},i=!1;return Object.keys(t).forEach(function(e){var n=t[e];!0!==n.allowedOutsideImage&&!1===a.default.cornerstoneMath.point.insideRect(n,r)&&(i=!0)}),i};var r,a=(r=n("./externalModules.js"))&&r.__esModule?r:{default:r}},"./manipulators/drawHandles.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,s){Object.keys(n).forEach(function(l){var u=n[l];if(!0!==u.drawnIndependently&&(!s||!0!==s.drawHandlesIfActive||u.active)){var d=function(e){return e&&e.handleRadius?e.handleRadius:o}(s),c={color:r,lineWidth:u.active?a.default.getActiveWidth():a.default.getToolWidth(),fillStyle:s&&s.fill};(0,i.drawCircle)(e,t.element,u,d,c)}})};var r,a=(r=n("./stateManagement/toolStyle.js"))&&r.__esModule?r:{default:r},i=n("./util/drawing.js"),o=6},"./manipulators/getHandleNearImagePoint.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i){var o=void 0;if(t)return Object.keys(t).forEach(function(s){var l=t[s];if(l.hasOwnProperty("pointNearHandle")){if(l.pointNearHandle(e,l,n))return void(o=l)}else if(!0===l.hasBoundingBox){if((0,a.default)(l,n))return void(o=l)}else{var u=r.default.cornerstone.pixelToCanvas(e,l);if(r.default.cornerstoneMath.point.distance(u,n)<=i)return void(o=l)}}),o};var r=i(n("./externalModules.js")),a=i(n("./util/pointInsideBoundingBox.js"));function i(e){return e&&e.__esModule?e:{default:e}}},"./manipulators/handleActivator.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){r||(r=6);var i=function(e){var t=void 0;return Object.keys(e).forEach(function(n){var r=e[n];!0!==r.active||(t=r)}),t}(t),o=(0,a.default)(e,t,n,r);return i!==o&&(void 0!==o&&(o.active=!0),void 0!==i&&(i.active=!1),!0)};var r,a=(r=n("./manipulators/getHandleNearImagePoint.js"))&&r.__esModule?r:{default:r}},"./manipulators/moveAllHandles.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,u,d,c){var f=a.default.cornerstone,h=e.detail.element;function p(e){var n=e.detail;t.active=!0,Object.keys(t.handles).forEach(function(e){var r=t.handles[e];!0!==r.movesIndependently&&(r.x+=n.deltaPoints.image.x,r.y+=n.deltaPoints.image.y,d.preventHandleOutsideImage&&(0,l.clipToBox)(r,n.image))}),f.updateImage(h),(0,s.default)(h,r.default.MEASUREMENT_MODIFIED,{toolType:u,element:h,measurementData:t}),e.preventDefault(),e.stopPropagation()}function m(e){var n=e.detail;t.invalidated=!0,h.removeEventListener(r.default.MOUSE_DRAG,p),h.removeEventListener(r.default.MOUSE_UP,m),h.removeEventListener(r.default.MOUSE_CLICK,m),!0===d.deleteIfHandleOutsideImage&&(0,i.default)(n,t.handles)&&(0,o.removeToolState)(h,u,t),f.updateImage(h),"function"==typeof c&&c()}return h.addEventListener(r.default.MOUSE_DRAG,p),h.addEventListener(r.default.MOUSE_UP,m),h.addEventListener(r.default.MOUSE_CLICK,m),!0};var r=u(n("./events.js")),a=u(n("./externalModules.js")),i=u(n("./manipulators/anyHandlesOutsideImage.js")),o=n("./stateManagement/toolState.js"),s=u(n("./util/triggerEvent.js")),l=n("./util/clip.js");function u(e){return e&&e.__esModule?e:{default:e}}},"./manipulators/moveHandle.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,s,l,u){var d=a.default.cornerstone,c=e.element,f={x:s.x-e.currentPoints.image.x,y:s.y-e.currentPoints.image.y};function h(e){var a=e.detail;!1===s.hasMoved&&(s.hasMoved=!0),s.active=!0,s.x=a.currentPoints.image.x+f.x,s.y=a.currentPoints.image.y+f.y,u&&(0,o.clipToBox)(s,a.image),d.updateImage(c),(0,i.default)(c,r.default.MEASUREMENT_MODIFIED,{toolType:t,element:c,measurementData:n})}function p(){s.active=!1,c.removeEventListener(r.default.MOUSE_DRAG,h),c.removeEventListener(r.default.MOUSE_UP,p),c.removeEventListener(r.default.MOUSE_CLICK,p),d.updateImage(c),"function"==typeof l&&l()}c.addEventListener(r.default.MOUSE_DRAG,h),c.addEventListener(r.default.MOUSE_UP,p),c.addEventListener(r.default.MOUSE_CLICK,p)};var r=s(n("./events.js")),a=s(n("./externalModules.js")),i=s(n("./util/triggerEvent.js")),o=n("./util/clip.js");function s(e){return e&&e.__esModule?e:{default:e}}},"./manipulators/moveNewHandle.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,s,l,u){var d=a.default.cornerstone,c=e.element;function f(e){var a=e.detail;s.active=!0,s.x=a.currentPoints.image.x,s.y=a.currentPoints.image.y,u&&(0,o.clipToBox)(s,a.image),d.updateImage(c),(0,i.default)(c,r.default.MEASUREMENT_MODIFIED,{toolType:t,element:c,measurementData:n})}function h(e){c.removeEventListener(r.default.MOUSE_MOVE,h),c.removeEventListener(r.default.MOUSE_DRAG,h),c.addEventListener(r.default.MOUSE_MOVE,f),c.addEventListener(r.default.MOUSE_DRAG,f),c.addEventListener(r.default.MOUSE_CLICK,g),e.type===r.default.MOUSE_DRAG&&c.addEventListener(r.default.MOUSE_UP,g)}function p(e){e.detail.measurementData===n&&g()}function m(e){e.detail.toolType===t&&(c.removeEventListener(r.default.MOUSE_MOVE,f),c.removeEventListener(r.default.MOUSE_DRAG,f),c.removeEventListener(r.default.MOUSE_CLICK,g),c.removeEventListener(r.default.MOUSE_UP,g),c.removeEventListener(r.default.MEASUREMENT_REMOVED,p),c.removeEventListener(r.default.TOOL_DEACTIVATED,m),s.active=!1,d.updateImage(c))}function g(){c.removeEventListener(r.default.MOUSE_MOVE,f),c.removeEventListener(r.default.MOUSE_DRAG,f),c.removeEventListener(r.default.MOUSE_CLICK,g),c.removeEventListener(r.default.MOUSE_UP,g),c.removeEventListener(r.default.MEASUREMENT_REMOVED,p),c.removeEventListener(r.default.TOOL_DEACTIVATED,m),s.active=!1,d.updateImage(c),"function"==typeof l&&l()}c.addEventListener(r.default.MOUSE_DRAG,h),c.addEventListener(r.default.MOUSE_MOVE,h),c.addEventListener(r.default.MEASUREMENT_REMOVED,p),c.addEventListener(r.default.TOOL_DEACTIVATED,m)};var r=s(n("./events.js")),a=s(n("./externalModules.js")),i=s(n("./util/triggerEvent.js")),o=n("./util/clip.js");function s(e){return e&&e.__esModule?e:{default:e}}},"./manipulators/moveNewHandleTouch.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,s,l,u){var d=a.default.cornerstone,c=e.element,f=d.pageToPixel(c,e.currentPoints.page.x,e.currentPoints.page.y+50),h={x:s.x-f.x,y:s.y-f.y};function p(e){var a=e.detail;s.x=a.currentPoints.image.x+h.x,s.y=a.currentPoints.image.y+h.y,u&&(0,o.clipToBox)(s,a.image),d.updateImage(c),(0,i.default)(c,r.default.MEASUREMENT_MODIFIED,{toolType:t,element:c,measurementData:n})}function m(e){var t=e.detail;if(c.removeEventListener(r.default.TOUCH_DRAG,p),c.removeEventListener(r.default.TOUCH_PINCH,m),c.removeEventListener(r.default.TOUCH_END,m),c.removeEventListener(r.default.TAP,m),c.removeEventListener(r.default.TOUCH_START,g),c.removeEventListener(r.default.TOOL_DEACTIVATED,v),e.type===r.default.TOUCH_PINCH||e.type===r.default.TOUCH_PRESS)return s.active=!1,d.updateImage(c),void l();s.active=!1,n.active=!1,s.x=t.currentPoints.image.x+h.x,s.y=t.currentPoints.image.y+h.y,u&&(0,o.clipToBox)(s,t.image),d.updateImage(c),"function"==typeof l&&l()}function g(e){return e.stopImmediatePropagation(),!1}function v(){c.removeEventListener(r.default.TOUCH_DRAG,p),c.removeEventListener(r.default.TOUCH_PINCH,m),c.removeEventListener(r.default.TOUCH_END,m),c.removeEventListener(r.default.TAP,m),c.removeEventListener(r.default.TOUCH_START,g),c.removeEventListener(r.default.TOOL_DEACTIVATED,v),s.active=!1,n.active=!1,s.x=e.currentPoints.image.x+h.x,s.y=e.currentPoints.image.y+h.y,u&&(0,o.clipToBox)(s,e.image),d.updateImage(c)}s.active=!0,n.active=!0,c.addEventListener(r.default.TOUCH_DRAG,p),c.addEventListener(r.default.TOUCH_PINCH,m),c.addEventListener(r.default.TOUCH_END,m),c.addEventListener(r.default.TAP,m),c.addEventListener(r.default.TOUCH_START,g),c.addEventListener(r.default.TOOL_DEACTIVATED,v)};var r=s(n("./events.js")),a=s(n("./externalModules.js")),i=s(n("./util/triggerEvent.js")),o=n("./util/clip.js");function s(e){return e&&e.__esModule?e:{default:e}}},"./manipulators/touchMoveAllHandles.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,l,u,d){var c=e.detail.element,f=a.default.cornerstone;function h(e){var n=e.detail;t.active=!0,Object.keys(t.handles).forEach(function(e){var r=t.handles[e];!0!==r.movesIndependently&&(r.x+=n.deltaPoints.image.x,r.y+=n.deltaPoints.image.y)}),f.updateImage(c),(0,s.default)(c,r.default.MEASUREMENT_MODIFIED,{toolType:l,element:c,measurementData:t}),e.preventDefault(),e.stopPropagation()}function p(e){var n=e.detail;t.active=!1,t.invalidated=!1,c.removeEventListener(r.default.TOUCH_DRAG,h),c.removeEventListener(r.default.TOUCH_PINCH,p),c.removeEventListener(r.default.TOUCH_PRESS,p),c.removeEventListener(r.default.TOUCH_END,p),c.removeEventListener(r.default.TOUCH_DRAG_END,p),c.removeEventListener(r.default.TAP,p);var a=(0,i.default)(n,t.handles);!0===u&&!0===a&&(0,o.removeToolState)(c,l,t),f.updateImage(c),"function"==typeof d&&d(e)}return c.addEventListener(r.default.TOUCH_DRAG,h),c.addEventListener(r.default.TOUCH_PINCH,p),c.addEventListener(r.default.TOUCH_PRESS,p),c.addEventListener(r.default.TOUCH_END,p),c.addEventListener(r.default.TOUCH_DRAG_END,p),c.addEventListener(r.default.TAP,p),!0};var r=l(n("./events.js")),a=l(n("./externalModules.js")),i=l(n("./manipulators/anyHandlesOutsideImage.js")),o=n("./stateManagement/toolState.js"),s=l(n("./util/triggerEvent.js"));function l(e){return e&&e.__esModule?e:{default:e}}},"./manipulators/touchMoveHandle.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,o,u){s.value=!0;var d=e.detail,c=a.default.cornerstone,f=d.element,h=c.getEnabledElement(f),p=((new Date).getTime(),-57),m={x:d.currentPoints.page.x,y:d.currentPoints.page.y+p},g=c.pageToPixel(f,m.x,m.y);function v(e){var a=e.detail;s.value=!1,!1===o.hasMoved&&(o.hasMoved=!0),o.active=!0;var l=a.currentPoints,u={x:l.page.x,y:l.page.y+p};g=c.pageToPixel(f,u.x,u.y),o.x=g.x,o.y=g.y,c.updateImage(f),(0,i.default)(f,r.default.MEASUREMENT_MODIFIED,{toolType:t,element:f,measurementData:n})}function y(e){var t=e.detail;s.value=!1,o.active=!1,f.removeEventListener(r.default.TOUCH_DRAG,v),l.forEach(function(e){f.removeEventListener(e,y)}),c.updateImage(f),e.type===r.default.TOUCH_PRESS&&(t.handlePressed=n,o.x=d.currentPoints.image.x,o.y=d.currentPoints.image.y),"function"==typeof u&&u(e)}f.addEventListener(r.default.TOUCH_DRAG,v),l.forEach(function(e){f.addEventListener(e,y)}),function e(t,n,r,i,o){if(r.value){var s=a.default.cornerstone,l=((new Date).getTime(),Math.abs(n.y-o.y)),u=l/10;if(l<1)return n.y=o.y,void(r.value=!1);n.y>o.y?n.y-=u:n.y<o.y&&(n.y+=u),s.updateImage(i.element),s.requestAnimationFrame(function(){e(0,n,r,i,o)})}}(0,o,s,h,g)};var r=o(n("./events.js")),a=o(n("./externalModules.js")),i=o(n("./util/triggerEvent.js"));function o(e){return e&&e.__esModule?e:{default:e}}var s={value:!1},l=[r.default.TOUCH_END,r.default.TOUCH_DRAG_END,r.default.TOUCH_PINCH,r.default.TOUCH_PRESS,r.default.TAP]},"./measurementManager/lineSampleMeasurement.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=a.default.cornerstone,t=this;t.samples=[],this.set=function(n){t.samples=n,(0,i.default)(e.events,r.default.LINE_SAMPLE_UPDATED)}};var r=o(n("./events.js")),a=o(n("./externalModules.js")),i=o(n("./util/triggerEvent.js"));function o(e){return e&&e.__esModule?e:{default:e}}},"./measurementManager/measurementManager.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n("./events.js")),a=o(n("./externalModules.js")),i=o(n("./util/triggerEvent.js"));function o(e){return e&&e.__esModule?e:{default:e}}var s=new function(){var e=a.default.cornerstone,t=this;t.measurements=[],this.add=function(n){var a=t.measurements.push(n);(0,i.default)(e.events,r.default.MEASUREMENT_ADDED,{index:a,measurement:n})},this.remove=function(n){var a=t.measurements[n];t.measurements.splice(n,1),(0,i.default)(e.events,r.default.MEASUREMENT_REMOVED,{index:n,measurement:a})}};t.default=s},"./orientation/getOrientationString.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=(0,a.default)(e),n="",i=t.x<0?"R":"L",o=t.y<0?"A":"P",s=t.z<0?"F":"H",l=new r.default.cornerstoneMath.Vector3(Math.abs(t.x),Math.abs(t.y),Math.abs(t.z)),u=0;u<3;u++)if(l.x>1e-4&&l.x>l.y&&l.x>l.z)n+=i,l.x=0;else if(l.y>1e-4&&l.y>l.x&&l.y>l.z)n+=o,l.y=0;else{if(!(l.z>1e-4&&l.z>l.x&&l.z>l.y))break;n+=s,l.z=0}return n};var r=i(n("./externalModules.js")),a=i(n("./util/convertToVector3.js"));function i(e){return e&&e.__esModule?e:{default:e}}},"./orientation/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n("./orientation/getOrientationString.js")),a=i(n("./orientation/invertOrientationString.js"));function i(e){return e&&e.__esModule?e:{default:e}}t.default={getOrientationString:r.default,invertOrientationString:a.default}},"./orientation/invertOrientationString.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.replace("H","f");return(t=(t=(t=(t=(t=t.replace("F","h")).replace("R","l")).replace("L","r")).replace("A","p")).replace("P","a")).toUpperCase()}},"./paintingTools/adaptiveBrush.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.adaptiveBrush=void 0;var r=l(n("./externalModules.js")),a=n("./stateManagement/toolState.js"),i=l(n("./paintingTools/brushTool.js")),o=l(n("./paintingTools/getCircle.js")),s=n("./paintingTools/drawBrush.js");function l(e){return e&&e.__esModule?e:{default:e}}var u="brush",d={draw:1,radius:5,tolerance:5,minRadius:1,maxRadius:20,hoverColor:"rgba(230, 25, 75, 1.0)",dragColor:"rgba(230, 25, 75, 0.8)",active:!1},c=void 0,f=void 0,h=void 0,p=void 0,m=void 0;function g(e){var t=y.getConfiguration(),n=e.element,i=r.default.cornerstone.getLayer(n,t.brushLayerId),l=r.default.cornerstone.getLayers(n)[0],d=i.image,m=d.rows,g=d.columns,v=(0,a.getToolState)(n,u).data[0];p=function(e,t,n,r){for(var a=y.getConfiguration(),i=a.draw,l=Math.round(c.x),u=Math.round(c.y),d=null,p=[],m=a.radius;0!==d&&m>a.minRadius;){d=0,p=(0,o.default)(m,n,r,l,u);for(var g=0;g<p.length;g++){var v=e[p[g][1]*r+p[g][0]];if(v>f||v<h){d++;break}}m--}return 0===d&&(0,s.drawBrushPixels)(p,t,i,r),m}(l.image.getPixelData(),v.pixelData,m,g),i.invalid=!0,r.default.cornerstone.updateImage(n)}function v(e){var t=y.getConfiguration(),n=e.element,i=r.default.cornerstone.getLayer(n,t.brushLayerId),l=i.image,d=l.rows,c=l.columns,f=e.currentPoints.image,h=f.x,p=f.y,m=(0,a.getToolState)(n,u).data[0].pixelData,g=t.draw;if(!(h<0||h>c||p<0||p>d)){var v=(0,o.default)(t.radius,d,c,h,p);(0,s.drawBrushPixels)(v,m,g,c),i.invalid=!0,r.default.cornerstone.updateImage(n)}}var y=(0,i.default)({onMouseMove:function(e){var t=e.detail;c=t.currentPoints.image,r.default.cornerstone.updateImage(t.element)},onMouseDown:function(e){var t=e.detail,n=t.element,a=y.getConfiguration(),i=r.default.cornerstone.getLayer(n,a.brushLayerId),s=r.default.cornerstone.getLayers(n)[0],l=t.currentPoints.image,u=i.image,d=u.columns,p=(0,o.default)(a.radius,u.rows,d,l.x,l.y);0===a.draw?v(t):(function(e,t,n){var r=y.getConfiguration().tolerance,a=Number.MAX_VALUE,i=-Number.MAX_VALUE;e.forEach(function(e){var r=t[e[1]*n+e[0]];a=Math.min(r,a),i=Math.max(r,i)}),h=a-r,f=i+r}(p,s.image.getPixelData(),d),g(t)),m=!0,c=t.currentPoints.image},onMouseUp:function(e){var t=e.detail;c=t.currentPoints.image;var n=y.getConfiguration();m=!1,p=n.radius,r.default.cornerstone.updateImage(t.element)},onDrag:function(e){var t=e.detail;0===d.draw?v(t):g(t),m=!0,c=t.currentPoints.image},toolType:"adaptiveBrush",onImageRendered:function(e){var t=e.detail;if(c){var n=t.image,r=n.rows,a=n.columns,i=c.x,l=c.y;if(!(i<0||i>a||l<0||l>r)){var u=y.getConfiguration(),d=t.canvasContext,f=m?u.dragColor:u.hoverColor,h=t.element;if(p=m&&p||u.radius,d.setTransform(1,0,0,1,0,0),u.active){var g=(0,o.default)(p,r,a,i,l);(0,s.drawBrushOnCanvas)(g,d,f,h)}}}}});y.setConfiguration(d),t.adaptiveBrush=y},"./paintingTools/brush.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.brush=void 0;var r=u(n("./externalModules.js")),a=n("./stateManagement/toolState.js"),i=u(n("./paintingTools/brushTool.js")),o=u(n("./paintingTools/getCircle.js")),s=n("./paintingTools/drawBrush.js"),l=n("./paintingTools/fill.js");function u(e){return e&&e.__esModule?e:{default:e}}var d="brush",c=void 0,f=!1;function h(e){var t=p.getConfiguration(),n=e.element,i=r.default.cornerstone.getLayer(n,t.brushLayerId),l=i.image,u=l.rows,c=l.columns,f=e.currentPoints.image,h=f.x,m=f.y,g=(0,a.getToolState)(n,d).data[0].pixelData,v=t.draw;if(!(h<0||h>c||m<0||m>u)){var y=(0,o.default)(t.radius,u,c,h,m);(0,s.drawBrushPixels)(y,g,v,c),i.invalid=!0,r.default.cornerstone.updateImage(n)}}var p=(0,i.default)({onMouseMove:function(e){var t=e.detail;c=t.currentPoints.image,r.default.cornerstone.updateImage(t.element)},onMouseDown:function(e){var t=e.detail;h(t),f=!0,c=t.currentPoints.image},onMouseUp:function(e){c=e.detail.currentPoints.image,f=!1},onDrag:function(e){var t=e.detail;h(t),f=!0,c=t.currentPoints.image},toolType:"brush",onImageRendered:function(e){var t=e.detail;if(c){var n=t.image,r=n.rows,a=n.columns,i=c.x,l=c.y;if(!(i<0||i>a||l<0||l>r)){var u=p.getConfiguration(),d=u.radius,h=t.canvasContext,m=f?u.dragColor:u.hoverColor,g=t.element;if(h.setTransform(1,0,0,1,0,0),u.active){var v=(0,o.default)(d,r,a,i,l);(0,s.drawBrushOnCanvas)(v,h,m,g)}}}},onMouseDoubleClick:function(e){!function(e){var t=p.getConfiguration(),n=t.radius,i=e.element,o=r.default.cornerstone.getLayer(i,t.brushLayerId),s=o.image,u=s.rows,c=s.columns,f=e.currentPoints.image,h=f.x,m=f.y,g=(0,a.getToolState)(i,d).data[0].pixelData,v=t.draw;if(!(h<0||h>c||m<0||m>u)){h=Math.round(h),m=Math.round(m);var y=(0,l.getEndOfCircle)(h,m,c,u,g,v);Math.abs(y[0]-y[2])>2*n&&Math.abs(y[1]-y[3])>2*n||((0,l.connectEndsOfBrush)(h,m,c,u,y,g,v)&&(0,l.isCircleInPolygon)(h,m,c,u,y,g,v)&&(0,l.fillColor)(h,y[0]-1,c,u,g,v),o.invalid=!0,r.default.cornerstone.updateImage(i))}}(e.detail)}});p.setConfiguration({draw:1,radius:5,minRadius:1,maxRadius:20,hoverColor:"rgba(230, 25, 75, 1.0)",dragColor:"rgba(230, 25, 75, 0.8)",active:!1}),t.brush=p},"./paintingTools/brushTool.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.toolType;function n(e){var t=e.detail,n=!1;n=function(e){var t=e.keyCode,n=!1;return 109===t||173===t?(m(),n=!0):61!==t&&107!==t||(p(),n=!0),n}(t)||n,(n=function(e){var t=e.keyCode,n=!1;return 219===t?(v(),n=!0):221===t&&(g(),n=!0),n}(t)||n)&&a.default.cornerstone.updateImage(t.element)}function d(e){var t=j.getConfiguration(),n=a.default.cornerstone.colors.getColormap(t.colormapId);t.draw=e;var r=n.getColor(t.draw);t.hoverColor="rgba("+r[[0]]+", "+r[[1]]+", "+r[[2]]+", 1.0 )",t.dragColor="rgba("+r[[0]]+", "+r[[1]]+", "+r[[2]]+", 0.8 )"}function p(){var e=j.getConfiguration();e.radius=(0,u.default)(e.radius+1,e.minRadius,e.maxRadius)}function m(){var e=j.getConfiguration();e.radius=(0,u.default)(e.radius-1,e.minRadius,e.maxRadius)}function g(){var e=j.getConfiguration(),t=y(),n=e.draw+1;n===t&&(n=0),d(n)}function v(){var e=j.getConfiguration(),t=y(),n=e.draw-1;n<0&&(n=t-1),d(n)}function y(){var e=j.getConfiguration();return a.default.cornerstone.colors.getColormap(e.colormapId).getNumberOfColors()}function b(t){e.onMouseMove(t)}function w(t){var n=t.detail.element;e.onMouseUp(t),n.removeEventListener(r.default.MOUSE_DRAG,b),n.removeEventListener(r.default.MOUSE_DRAG,x),n.removeEventListener(r.default.MOUSE_UP,w),n.removeEventListener(r.default.MOUSE_CLICK,w)}function x(t){return e.onDrag(t),!1}function _(t){e.onMouseDoubleClick(t)}function E(n){var a=n.detail,i=a.element,o=(0,l.getToolOptions)(t,i);if((0,s.default)(a.which,o.mouseButtonMask))return i.addEventListener(r.default.MOUSE_DRAG,x),i.addEventListener(r.default.MOUSE_UP,w),i.addEventListener(r.default.MOUSE_CLICK,w),i.addEventListener(r.default.MOUSE_DOUBLE_CLICK,_),e.onMouseDown(n),!1;i.addEventListener(r.default.MOUSE_DRAG,b),i.addEventListener(r.default.MOUSE_UP,w)}function T(t){var n=t.detail,r=n.element,o=(0,i.getToolState)(r,c),s=void 0;o?s=o.data[0].pixelData:(s=new Uint8ClampedArray(n.image.width*n.image.height),(0,i.addToolState)(r,c,{pixelData:s}));var l=a.default.cornerstone.getLayer(n.element,f);l.image.setPixelData(s),l.invalid=!0,a.default.cornerstone.updateImage(r),e.onImageRendered(t)}var j=(0,o.default)({mouseMoveCallback:b,mouseDownActivateCallback:E,onImageRendered:T,deactivate:function(e){e.removeEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,T),e.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,E),e.removeEventListener(r.default.MOUSE_MOVE,b),e.removeEventListener(r.default.MOUSE_DOUBLE_CLICK,_),e.removeEventListener(r.default.KEY_DOWN,n),e.addEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,T),j.getConfiguration().active=!1}});return j.keyDownCallback=n,j.activate=function(e,o){(0,l.setToolOptions)(t,e,{mouseButtonMask:o}),e.removeEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,T),e.addEventListener(a.default.cornerstone.EVENTS.IMAGE_RENDERED,T),e.removeEventListener(r.default.MOUSE_DOWN_ACTIVATE,E),e.addEventListener(r.default.MOUSE_DOWN_ACTIVATE,E),e.removeEventListener(r.default.MOUSE_MOVE,b),e.addEventListener(r.default.MOUSE_MOVE,b),e.removeEventListener(r.default.KEY_DOWN,n),e.addEventListener(r.default.KEY_DOWN,n);var s=a.default.cornerstone.getEnabledElement(e),u=s.image,d=u.width,p=u.height,m=new Uint8ClampedArray(d*p),g=j.getConfiguration();g.active=!0;var v=g.colormapId;if(!v){var y=j.getConfiguration();(function(e){var t=a.default.cornerstone.colors.getColormap(e);t.setNumberOfColors(20),t.setColor(0,[255,255,255,0]),t.setColor(1,[230,25,75,102]),t.setColor(2,[60,180,175,102]),t.setColor(3,[255,225,25,102]),t.setColor(4,[0,130,200,102]),t.setColor(5,[245,130,48,102]),t.setColor(6,[145,30,180,102]),t.setColor(7,[70,240,240,102]),t.setColor(8,[240,50,230,102]),t.setColor(9,[210,245,60,102]),t.setColor(10,[250,190,190,102]),t.setColor(11,[0,128,128,102]),t.setColor(12,[230,190,255,102]),t.setColor(13,[170,110,40,102]),t.setColor(14,[255,250,200,102]),t.setColor(15,[128,0,0,102]),t.setColor(16,[170,255,195,102]),t.setColor(17,[128,128,0,102]),t.setColor(18,[255,215,180,102]),t.setColor(19,[0,0,128,102])})(v="BrushColorMap"),y.colormapId=v}var w={minPixelValue:0,maxPixelValue:1,slope:1,intercept:0,getPixelData:function(){return m},rows:s.image.height,columns:s.image.width,height:p,width:d,pixelData:m,setPixelData:function(e){m=e},colormap:v,color:!1,rgba:!1,labelmap:!0,invert:!1,columnPixelSpacing:1,rowPixelSpacing:1,sizeInBytes:s.image.width*s.image.height},x=void 0;h||(h=a.default.cornerstone.addLayer(e,a.default.cornerstone.getEnabledElement(e).image)),f&&(x=a.default.cornerstone.getLayer(e,f)),x||(f=a.default.cornerstone.addLayer(e,w,{viewport:{pixelReplication:!0}})),(0,i.addToolState)(e,c,{pixelData:m}),g.brushLayerId=f,j.setConfiguration(g),a.default.cornerstone.updateImage(e)},j.changeDrawColor=d,j.increaseRadius=p,j.decreaseRadius=m,j.nextSegmentation=g,j.previousSegmentation=v,j};var r=d(n("./events.js")),a=d(n("./externalModules.js")),i=n("./stateManagement/toolState.js"),o=d(n("./imageTools/mouseButtonTool.js")),s=d(n("./util/isMouseButtonEnabled.js")),l=n("./toolOptions.js"),u=d(n("./util/clip.js"));function d(e){return e&&e.__esModule?e:{default:e}}var c="brush",f=void 0,h=void 0},"./paintingTools/drawBrush.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawBrushOnCanvas=t.drawBrushPixels=void 0;var r,a=(r=n("./externalModules.js"))&&r.__esModule?r:{default:r},i=n("./util/drawing.js");t.drawBrushPixels=function(e,t,n,r){e.forEach(function(e){t[e[1]*r+e[0]]=n})},t.drawBrushOnCanvas=function(e,t,n,r){var o=a.default.cornerstone.pixelToCanvas(r,{x:0,y:0}),s=a.default.cornerstone.pixelToCanvas(r,{x:1,y:1}),l=s.x-o.x,u=s.y-o.y;(0,i.draw)(t,function(t){e.forEach(function(e){var o=a.default.cornerstone.pixelToCanvas(r,{x:e[0],y:e[1]});(0,i.fillBox)(t,{left:o.x,top:o.y,width:l,height:u},n)})})}},"./paintingTools/fill.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fillColor=t.isCircleInPolygon=t.connectEndsOfBrush=t.getEndOfCircle=void 0;var r=n("./paintingTools/drawBrush.js"),a=n("./paintingTools/queue.js");function i(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=e;e<t?i<=t:i>=t;i+=e<t?1:-1){if(a&&n(r,i))return i;if(!a&&n(i,r))return i}return null}function o(e,t,n){return t[e]===n}function s(e,t,n,r,i,s){var l=e,u=t,d=0,c=new a.Queue,f=[],h=[0,1,0,-1],p=[-1,0,1,0],m=0,g=function(e,t){return t*n+e};c.enqueue({x:e,y:t});for(var v=0;v<r*n;v+=1)f.push(0);for(f[g(e,t)]=1;0!==c.size()&&m<=r*n;){m+=1;var y=c.dequeue(),b=g(y.x,y.y);if(d<f[b]){var w=[y.x,y.y,f[b]];l=w[0],u=w[1],d=w[2]}for(var x=0;x<4;x+=1){var _=y.y+p[x],E=y.x+h[x],T=g(E,_);_<0||_>=r||E<0||E>=n||o(T,i,s)&&0===f[T]&&(f[T]=f[b]+1,c.enqueue({x:E,y:_}))}}return{x:l,y:u}}function l(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=[],i=e;e<t?i<=t:i>=t;i+=e<t?1:-1)a.push(r?[n,i]:[i,n]);return a}t.getEndOfCircle=function(e,t,n,r,a,s){var l=function(e,t){return t*n+e};return[i(t,0,function(e,t){return!o(l(e,t-1),a,s)},e,!0),i(e,n,function(e,t){return!o(l(e+1,t),a,s)},t,!1),i(t,r,function(e,t){return!o(l(e,t+1),a,s)},e,!0),i(e,0,function(e,t){return!o(l(e-1,t),a,s)},t,!1)]},t.connectEndsOfBrush=function(e,t,n,a,u,d,c){var f=function(e,t,a){return(0,r.drawBrushPixels)([[e,t]],d,a,n)},h=function(e,t){return(0,r.drawBrushPixels)(e,d,t,n)},p=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(l){a=!0,i=l}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(function(e,t,n,r,a,s,l){for(var u=[0,1,0,-1],d=[-1,0,1,0],c=Number.MAX_SAFE_INTEGER,f=-1,h=void 0,p=void 0,m=void 0,g=function(e,t){return t*n+e},v=function(v){var y=void 0,b=void 0,w=void 0;if(v%2){if(null===(b=i(a[v]+u[v],1===v?n:0,function(e,t){return o(g(e,t),s,l)},y=t,!1)))return"continue";w=i(b+u[v],1===v?n:0,function(e,t){return!o(g(e+u[v],t+d[v]),s,l)},y,!1)}else{if(null===(b=i(a[v]+d[v],0===v?0:r,function(e,t){return o(g(e,t),s,l)},y=e,!0)))return"continue";w=i(b+d[v],0===v?0:r,function(e,t){return!o(g(e+u[v],t+d[v]),s,l)},y,!0)}var x=Math.abs(b-(v%2?e:t));c>x&&(c=x,f=v,h=y,p=b,m=w)},y=0;y<a.length;y++)v(y);return c===Number.MAX_SAFE_INTEGER?[null,null,null,null]:[f,h,p,m]}(e,t,n,a,u,d,c),4),m=p[0],g=p[1],v=p[2],y=p[3],b=[];if(null===m)return!1;if(h(l(v,y,g,!(m%2)),0),m%2){var w=s(v,g-1,n,a,d,c),x=s(v,g+1,n,a,d,c);b.push(w),b.push(x)}else{var _=s(g-1,v,n,a,d,c),E=s(g+1,v,n,a,d,c);b.push(_),b.push(E)}if(h(l(v,y,g,!(m%2)),c),b.sort(function(e,t){return e.x-t.x}),b[0].x===b[1].x)h(l(b[0].y,b[1].y,b[0].x,!0),c);else{var T=(b[1].y-b[0].y)/(b[1].x-b[0].x),j=b[0].y-T*b[0].x;if(Math.abs(T)>=1){b.sort(function(e,t){return e.y-t.y});for(var S=b[0].y;S<=b[1].y;S+=1)for(var C=-0;C<=2;C+=1)f(Math.round((S-j)/T)+C,S,c)}else for(var O=b[0].x;O<=b[1].x;O+=1)for(var P=-0;P<=2;P+=1)f(O,Math.round(T*O+j)+P,c)}return!0},t.isCircleInPolygon=function(e,t,n,r,a,s,l){var u=function(e,t){return t*n+e},d=i(a[3]-1,0,function(e,t){return o(u(e,t),s,l)},t,!1),c=i(a[1]+1,n,function(e,t){return o(u(e,t),s,l)},t,!1);return d&&c},t.fillColor=function(e,t,n,i,s,l){var u=new a.Queue,d=[0,1,0,-1],c=[-1,0,1,0],f=0,h=function(e,t){return t*n+e},p=function(e,t,a){return(0,r.drawBrushPixels)([[e,t]],s,a,n)};for(u.enqueue({x:e,y:t}),p(e,t,l);0!==u.size()&&f<=i*n;){f+=1;for(var m=u.dequeue(),g=0;g<4;g+=1){var v=m.y+c[g],y=m.x+d[g];v<0||v>=i||y<0||y>=n||o(h(y,v),s,l)||(u.enqueue({x:y,y:v}),p(y,v,l))}}}},"./paintingTools/getCircle.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=Math.round(arguments.length>3&&void 0!==arguments[3]?arguments[3]:0),i=Math.round(r);if(1===e)return[[a,i]];for(var o=[],s=0,l=-e;l<=e;l++){var u=i+l;if(!(u>t||u<0))for(var d=-e;d<=e;d++){var c=a+d;c>n||c<0||d*d+l*l<e*e&&(o[s++]=[a+d,i+l])}}return o}},"./paintingTools/queue.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.Queue=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.store={},this.front=0,this.end=0}return r(e,[{key:"enqueue",value:function(e){this.store[this.end]=e,this.end++}},{key:"dequeue",value:function(){if(this.front===this.end)return null;var e=this.store[this.front];return delete this.store[this.front],this.front++,e}},{key:"size",value:function(){return this.end-this.front}}]),e}()},"./referenceLines/calculateReferenceLine.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,r.planePlaneIntersection)(e,t);if(n)return{start:(0,r.projectPatientPointToImagePlane)(n.start,e),end:(0,r.projectPatientPointToImagePlane)(n.end,e)}};var r=n("./util/pointProjector.js")},"./referenceLines/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n("./referenceLines/calculateReferenceLine.js")),a=o(n("./referenceLines/referenceLinesTool.js")),i=o(n("./referenceLines/renderActiveReferenceLine.js"));function o(e){return e&&e.__esModule?e:{default:e}}t.default={calculateReferenceLine:r.default,tool:a.default,renderActiveReferenceLine:i.default}},"./referenceLines/referenceLinesTool.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n("./externalModules.js")),a=n("./stateManagement/toolState.js"),i=o(n("./referenceLines/renderActiveReferenceLine.js"));function o(e){return e&&e.__esModule?e:{default:e}}var s="referenceLines";function l(e){var t=e.detail,n=(0,a.getToolState)(e.currentTarget,s);if(void 0!==n){var i=n.data[0].synchronizationContext.getSourceElements(),o=n.data[0].renderer,l=t.canvasContext.canvas.getContext("2d");r.default.cornerstone.setToPixelCoordinateSystem(t.enabledElement,l),i.forEach(function(n){n!==e.currentTarget&&o(l,t,e.currentTarget,n)})}}t.default={enable:function(e,t,n){(0,a.addToolState)(e,s,{synchronizationContext:t,renderer:n=n||i.default}),e.removeEventListener(r.default.cornerstone.EVENTS.IMAGE_RENDERED,l),e.addEventListener(r.default.cornerstone.EVENTS.IMAGE_RENDERED,l),r.default.cornerstone.updateImage(e)},disable:function(e){e.removeEventListener(r.default.cornerstone.EVENTS.IMAGE_RENDERED,l),r.default.cornerstone.updateImage(e)}}},"./referenceLines/renderActiveReferenceLine.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,l){var u=r.default.cornerstone,d=u.getEnabledElement(n).image,c=u.getEnabledElement(l).image;if(d&&c){var f=u.metaData.get("imagePlaneModule",d.imageId),h=u.metaData.get("imagePlaneModule",c.imageId);if(f&&h&&f.rowCosines&&f.columnCosines&&f.imagePositionPatient&&h.rowCosines&&h.columnCosines&&h.imagePositionPatient&&f.frameOfReferenceUID===h.frameOfReferenceUID){f.rowCosines=(0,o.default)(f.rowCosines),f.columnCosines=(0,o.default)(f.columnCosines),f.imagePositionPatient=(0,o.default)(f.imagePositionPatient),h.rowCosines=(0,o.default)(h.rowCosines),h.columnCosines=(0,o.default)(h.columnCosines),h.imagePositionPatient=(0,o.default)(h.imagePositionPatient);var p=f.rowCosines.clone().cross(f.columnCosines),m=h.rowCosines.clone().cross(h.columnCosines),g=p.angleTo(m);if(!((g=Math.abs(g))<.5)){var v=(0,a.default)(f,h);if(v){var y=i.default.getActiveColor();e.setTransform(1,0,0,1,0,0),(0,s.draw)(e,function(e){(0,s.drawLine)(e,t.element,v.start,v.end,{color:y})})}}}}};var r=l(n("./externalModules.js")),a=l(n("./referenceLines/calculateReferenceLine.js")),i=l(n("./stateManagement/toolColors.js")),o=l(n("./util/convertToVector3.js")),s=n("./util/drawing.js");function l(e){return e&&e.__esModule?e:{default:e}}},"./requestPool/requestPoolManager.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=(r=n("./externalModules.js"))&&r.__esModule?r:{default:r},i=n("./util/getMaxSimultaneousRequests.js"),o={interaction:[],thumbnail:[],prefetch:[]},s={interaction:0,thumbnail:0,prefetch:0},l={interaction:6,thumbnail:6,prefetch:5},u=!1,d=20;function c(){u&&setTimeout(function(){h()},d)}function f(e){var t=a.default.cornerstone,n=e.type;s[n]++,u=!0;var r=e.imageId,i=e.doneCallback,o=e.failCallback,l=t.imageCache.getImageLoadObject(r);if(l)l.promise.then(function(e){s[n]--,i(e),c()},function(e){s[n]--,o(e),c()});else{var d=function(e){return"prefetch"===e.type?-5:"interactive"===e.type?0:"thumbnail"===e.type?5:void 0}(e);(!0===e.preventCache?t.loadImage(r,{priority:d,type:e.type}):t.loadAndCacheImage(r,{priority:d,type:e.type})).then(function(e){s[n]--,i(e),c()},function(e){s[n]--,o(e),c()})}}function h(){var e=(0,i.getMaxSimultaneousRequests)();l={interaction:Math.max(e,1),thumbnail:Math.max(e-2,1),prefetch:Math.max(e-1,1)};for(var t=e-(s.interaction+s.thumbnail+s.prefetch),n=0;n<t;n++){var r=o.interaction.length&&s.interaction<l.interaction?o.interaction.shift():o.thumbnail.length&&s.thumbnail<l.thumbnail?o.thumbnail.shift():o.prefetch.length&&s.prefetch<l.prefetch?o.prefetch.shift():(o.interaction.length||o.thumbnail.length||o.prefetch.length||(u=!1),!1);r&&f(r)}}t.default={addRequest:function(e,t,n,r,i,s,l){if(!o.hasOwnProperty(n))throw new Error("Request type must be one of interaction, thumbnail, or prefetch");if(e&&t){var d={type:n,imageId:t,preventCache:r,doneCallback:i,failCallback:s},c=a.default.cornerstone.imageCache.getImageLoadObject(t);c?c.promise.then(function(e){i(e)},function(e){s(e)}):(l?o[n].unshift(d):o[n].push(d),u=!0)}},clearRequestStack:function(e){if(!o.hasOwnProperty(e))throw new Error("Request type must be one of interaction, thumbnail, or prefetch");o[e]=[]},startGrabbing:h,getRequestPool:function(){return o}}},"./stackTools/fusionRenderer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(r=n("./externalModules.js"))&&r.__esModule?r:{default:r},o=n("./stateManagement/toolState.js"),s=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.currentImageIdIndex=0,this.layerIds=[],this.findImageFn=void 0}return a(e,[{key:"render",value:function(e,t){var n=this;if(!Number.isInteger(this.currentImageIdIndex))throw new Error("FusionRenderer: render - Image ID Index is not an integer");if(!this.findImageFn)throw new Error("No findImage function has been defined");t||(t=(0,o.getToolState)(e,"stack").data);var r=i.default.cornerstone,a=t[0],s=a.imageIds[this.currentImageIdIndex],l=t.slice(1,t.length);r.loadAndCacheImage(s).then(function(t){var i=n.layerIds[0];i?r.setLayerImage(e,t,i):(i=r.addLayer(e,t,a.options),n.layerIds.push(i)),r.displayImage(e,t),l.forEach(function(t,a){var o=n.findImageFn(t.imageIds,s),l=n.layerIds[a+1];l||(l=r.addLayer(e,void 0,t.options),n.layerIds.push(l)),o?r.loadAndCacheImage(o).then(function(t){r.setLayerImage(e,t,l),r.updateImage(e)}):(r.setLayerImage(e,void 0,l),r.setActiveLayer(e,i),r.updateImage(e))})})}}]),e}();t.default=s},"./stackTools/playClip.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stopClip=t.playClip=void 0;var r=l(n("./events.js")),a=l(n("./externalModules.js")),i=l(n("./stateManagement/loadHandlerManager.js")),o=n("./stateManagement/toolState.js"),s=l(n("./util/triggerEvent.js"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){var t=e.intervalId;void 0!==t&&(e.intervalId=void 0,e.usingFrameTimeVector?clearTimeout(t):clearInterval(t))}t.playClip=function(e,t){var n=void 0,l=void 0;if(void 0===e)throw new Error("playClip: element must not be undefined");var d=(0,o.getToolState)(e,"stack");if(d&&d.data&&d.data.length){var c=a.default.cornerstone,f=void 0;if(d.data.length>1){var h=(0,o.getToolState)(e,"stackRenderer");h&&h.data&&h.data.length&&(f=h.data[0])}var p=d.data[0],m=(0,o.getToolState)(e,"playClip");m&&m.data&&m.data.length?u(n=m.data[0]):(0,o.addToolState)(e,"playClip",n={intervalId:void 0,framesPerSecond:30,lastFrameTimeStamp:void 0,frameRate:0,frameTimeVector:void 0,ignoreFrameTimeVector:!1,usingFrameTimeVector:!1,speed:1,reverse:!1,loop:!0}),(t<0||t>0)&&(n.framesPerSecond=Number(t),n.reverse=n.framesPerSecond<0,n.ignoreFrameTimeVector=!0),!0!==n.ignoreFrameTimeVector&&n.frameTimeVector&&n.frameTimeVector.length===p.imageIds.length&&(l=function(e,t){var n=void 0,r=void 0,a=void 0,i=0,o=e.length,s=[];for(s.isTimeVarying=!1,("number"!=typeof t||t<=0)&&(t=1),n=1;n<o;n++)a=Number(e[n])/t|0,s.push(a),1===n?r=a:a!==r&&(s.isTimeVarying=!0),i+=a;return s.length>0&&s.push(a=s.isTimeVarying?i/s.length|0:s[0]),s}(n.frameTimeVector,n.speed));var g=function(){var t=void 0,a=void 0,o=void 0,l=p.currentImageIdIndex,h=p.imageIds.length;if(n.reverse?l--:l++,!n.loop&&(l<0||l>=h))return u(n),void function(e){(0,s.default)(e,r.default.CLIP_STOPPED,{element:e})}(e);l>=h&&(l=0),l<0&&(l=h-1),l!==p.currentImageIdIndex&&(t=i.default.getStartLoadHandler(),a=i.default.getEndLoadHandler(),o=i.default.getErrorLoadingHandler(),t&&t(e),(!0===p.preventCache?c.loadImage(p.imageIds[l]):c.loadAndCacheImage(p.imageIds[l])).then(function(t){try{p.currentImageIdIndex=l,f?(f.currentImageIdIndex=l,f.render(e,d.data)):c.displayImage(e,t),a&&a(e,t)}catch(n){return}},function(t){o&&o(e,p.imageIds[l],t)}))};l&&l.length>0&&l.isTimeVarying?(n.usingFrameTimeVector=!0,n.intervalId=setTimeout(function e(){n.intervalId=setTimeout(e,l[p.currentImageIdIndex]),g()},0)):(n.usingFrameTimeVector=!1,n.intervalId=setInterval(g,1e3/Math.abs(n.framesPerSecond)))}},t.stopClip=function(e){var t=(0,o.getToolState)(e,"playClip");t&&t.data&&t.data.length&&u(t.data[0])}},"./stackTools/scrollIndicator.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=(r=n("./imageTools/displayTool.js"))&&r.__esModule?r:{default:r},i=n("./stateManagement/toolState.js"),o=n("./util/drawing.js"),s=(0,a.default)(function(e){var t=e.detail,n=t.element,r=t.enabledElement.canvas.width,a=t.enabledElement.canvas.height;if(!r||!a)return!1;var l=(0,o.getNewContext)(t.enabledElement.canvas);(0,o.draw)(l,function(e){var t=s.getConfiguration();(0,o.fillBox)(e,"horizontal"===t.orientation?{left:0,top:a-6,width:r,height:6}:{left:0,top:0,width:6,height:a},t.backgroundColor);var l=(0,i.getToolState)(n,"stack");if(l&&l.data&&l.data.length){var u=l.data[0].imageIds,d=l.data[0].currentImageIdIndex,c=r/u.length,f=a/u.length;(0,o.fillBox)(e,"horizontal"===t.orientation?{left:c*d,top:a-6,width:c,height:6}:{left:0,top:f*d,width:6,height:f},t.fillColor)}})});s.setConfiguration({backgroundColor:"rgb(19, 63, 141)",fillColor:"white",orientation:"horizontal"}),t.default=s},"./stackTools/stackPrefetch.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n("./externalModules.js")),a=l(n("./requestPool/requestPoolManager.js")),i=l(n("./stateManagement/loadHandlerManager.js")),o=n("./stateManagement/toolState.js"),s=n("./util/getMaxSimultaneousRequests.js");function l(e){return e&&e.__esModule?e:{default:e}}var u="stackPrefetch",d="prefetch",c={maxImagesToPrefetch:1/0,preserveExistingPool:!1},f=void 0,h=10;function p(e,t){e=Math.round(e)||0;var n=[],r=(t=Math.round(t)||0)-e+1;if(r<=0)return n;for(;r--;)n[r]=t--;return n}var m=function(e){return Math.max.apply(null,e)},g=function(e){return Math.min.apply(null,e)};function v(e){var t=(0,o.getToolState)(e,"stack");if(t&&t.data&&t.data.length){var n=t.data[0],s=(0,o.getToolState)(e,u);if(s){var l=s.data[0]||{};if(l.indicesToRequest&&l.indicesToRequest.length||(l.enabled=!1),!1!==l.enabled&&(s.data[0].indicesToRequest.sort(function(e,t){return e-t}),l.indicesToRequest.slice().forEach(function(e){var t=n.imageIds[e];t&&r.default.cornerstone.imageCache.getImageLoadObject(t)&&L(e)}),l.indicesToRequest.length)){c.preserveExistingPool||a.default.clearRequestStack(d);for(var f,h,p,v,y=(h=n.currentImageIdIndex,p=[],v=[],(f=l.indicesToRequest).forEach(function(e){e<h?p.push(e):e>h&&v.push(e)}),{low:f.indexOf(m(p)),high:f.indexOf(g(v))}),b=void 0,w=void 0,x=i.default.getErrorLoadingHandler(),_=y.low,E=y.high,T=[];_>=0||E<l.indicesToRequest.length;){var j=n.currentImageIdIndex,S=!(j-l.indicesToRequest[_]>c.maxImagesToPrefetch)&&_>=0,C=!(l.indicesToRequest[E]-j>c.maxImagesToPrefetch)&&E<l.indicesToRequest.length;if(!C&&!S)break;S&&(w=l.indicesToRequest[_--],T.push(b=n.imageIds[w])),C&&(w=l.indicesToRequest[E++],T.push(b=n.imageIds[w]))}var O=!0,P=!1,I=void 0;try{for(var M,D=T.reverse()[Symbol.iterator]();!(O=(M=D.next()).done);O=!0)a.default.addRequest(e,M.value,d,!1,A,k,!0)}catch(R){P=!0,I=R}finally{try{!O&&D.return&&D.return()}finally{if(P)throw I}}a.default.startGrabbing()}}}function L(e){var t=l.indicesToRequest.indexOf(e);t>-1&&l.indicesToRequest.splice(t,1)}function A(e){L(n.imageIds.indexOf(e.imageId))}function k(t){console.log("prefetch errored: "+t),x&&x(e,b,t,"stackPrefetch")}}function y(e){return function(t){var n=t.detail,r=void 0;try{r=(0,o.getToolState)(e,"stack")}catch(s){return}if(r&&r.data&&r.data.length){var a=r.data[0].imageIds.indexOf(n.imageId);if(!(a<0)){var i=(0,o.getToolState)(e,u);i&&i.data&&i.data.length&&i.data[0].indicesToRequest.push(a)}}}}function b(e){clearTimeout(f),f=setTimeout(function(){var t=e.target;try{v(t)}catch(n){return}},h)}t.default={enable:function(e){(0,o.getToolState)(e,u).data=[];var t=(0,o.getToolState)(e,"stack");if(t&&t.data&&t.data.length){var n=t.data[0];if(!0!==n.preventCache){var a={indicesToRequest:p(0,n.imageIds.length-1),enabled:!0,direction:1},i=a.indicesToRequest.indexOf(n.currentImageIdIndex);a.indicesToRequest.splice(i,1),(0,o.addToolState)(e,u,a),v(e),e.removeEventListener(r.default.cornerstone.EVENTS.NEW_IMAGE,b),e.addEventListener(r.default.cornerstone.EVENTS.NEW_IMAGE,b);var s=y(e);r.default.cornerstone.events.removeEventListener(r.default.cornerstone.EVENTS.IMAGE_CACHE_PROMISE_REMOVED,s),r.default.cornerstone.events.addEventListener(r.default.cornerstone.EVENTS.IMAGE_CACHE_PROMISE_REMOVED,s)}else console.warn("A stack that should not be cached was given the stackPrefetch")}},disable:function(e){clearTimeout(f),e.removeEventListener(r.default.cornerstone.EVENTS.NEW_IMAGE,b);var t=y(e);r.default.cornerstone.events.removeEventListener(r.default.cornerstone.EVENTS.IMAGE_CACHE_PROMISE_REMOVED,t);var n=(0,o.getToolState)(e,u);n&&n.data.length&&(n.data[0].enabled=!1,a.default.clearRequestStack(d))},getConfiguration:function(){return c},setConfiguration:function(e){c=e,e.maxSimultaneousRequests&&(0,s.setMaxSimultaneousRequests)(e.maxSimultaneousRequests)}}},"./stackTools/stackRenderers.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=(r=n("./stackTools/fusionRenderer.js"))&&r.__esModule?r:{default:r},i={};i.FusionRenderer=a.default,t.default=i},"./stackTools/stackScroll.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stackScrollMultiTouch=t.stackScrollTouchDrag=t.stackScrollWheel=t.stackScroll=void 0;var r=f(n("./events.js")),a=f(n("./imageTools/touchDragTool.js")),i=f(n("./imageTools/multiTouchDragTool.js")),o=f(n("./imageTools/simpleMouseButtonTool.js")),s=f(n("./imageTools/mouseWheelTool.js")),l=f(n("./util/isMouseButtonEnabled.js")),u=f(n("./util/scroll.js")),d=n("./stateManagement/toolState.js"),c=n("./toolOptions.js");function f(e){return e&&e.__esModule?e:{default:e}}var h="stackScroll";function p(e){var t=e.detail.element;t.removeEventListener(r.default.MOUSE_DRAG,m),t.removeEventListener(r.default.MOUSE_UP,p),t.removeEventListener(r.default.MOUSE_CLICK,p)}function m(e){var t=e.detail,n=t.element,r=(0,d.getToolState)(n,"stack");if(r&&r.data&&r.data.length){var a=r.data[0],i=g.getConfiguration(),o=!0;i&&void 0!==i.allowSkipping&&(o=i.allowSkipping);var s=Math.max(2,n.offsetHeight/Math.max(a.imageIds.length,8));i&&i.stackScrollSpeed&&(s=i.stackScrollSpeed);var l=(0,c.getToolOptions)(h,n),f=l.deltaY||0;if(f+=t.deltaPoints.page.y,Math.abs(f)>=s){var p=Math.round(f/s);(0,u.default)(n,p,!1,o),l.deltaY=f%s}else l.deltaY=f;(0,c.setToolOptions)(h,n,l),e.preventDefault(),e.stopPropagation()}}var g=(0,o.default)(function(e){var t=e.detail,n=t.element,a=(0,c.getToolOptions)(h,n);if((0,l.default)(t.which,a.mouseButtonMask))return a.deltaY=0,(0,c.setToolOptions)(h,n,a),n.addEventListener(r.default.MOUSE_DRAG,m),n.addEventListener(r.default.MOUSE_UP,p),n.addEventListener(r.default.MOUSE_CLICK,p),e.stopImmediatePropagation(),!1},h),v=(0,s.default)(function(e){var t=e.detail,n=-t.direction,r=g.getConfiguration(),a=!1,i=!0;r&&(a=void 0!==r.loop&&r.loop,i=void 0===r.allowSkipping||r.allowSkipping),(0,u.default)(t.element,n,a,i)}),y={eventData:{deltaY:0}},b=(0,a.default)(m,"stackScrollTouchDrag",y),w=(0,i.default)(function(e){var t=e.detail,n=w.getConfiguration();n&&n.testPointers(t)&&m(e)},y);w.setConfiguration({testPointers:function(e){return e.numPointers>=3}}),t.stackScroll=g,t.stackScrollWheel=v,t.stackScrollTouchDrag=b,t.stackScrollMultiTouch=w},"./stackTools/stackScrollKeyboard.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n("./util/scroll.js")),a=i(n("./imageTools/keyboardTool.js"));function i(e){return e&&e.__esModule?e:{default:e}}var o=(0,a.default)(function(e){var t=e.detail,n=t.keyCode;if(38===n||40===n){var a=1;40===n&&(a=-1),(0,r.default)(t.element,a)}});t.default=o},"./stateManagement/appState.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=(r=n("./externalModules.js"))&&r.__esModule?r:{default:r},i=n("./stateManagement/imageIdSpecificStateManager.js"),o=n("./stateManagement/toolState.js");t.default={save:function(e){var t={imageIdToolState:i.globalImageIdSpecificToolStateManager.saveToolState(),elementToolState:{},elementViewport:{}};return e.forEach(function(e){var n=(0,o.getElementToolStateManager)(e);n!==i.globalImageIdSpecificToolStateManager&&(t.elementToolState[e.id]=n.saveToolState(),t.elementViewport[e.id]=a.default.cornerstone.getViewport(e))}),t},restore:function(e){if(e.hasOwnProperty("imageIdToolState")&&e.hasOwnProperty("elementToolState")&&e.hasOwnProperty("elementViewport")){var t=a.default.cornerstone;return i.globalImageIdSpecificToolStateManager.restoreToolState(e.imageIdToolState),Object.keys(e.elementViewport).forEach(function(n){var r=document.getElementById(n);if(r&&e.elementToolState.hasOwnProperty(n)){var a=(0,o.getElementToolStateManager)(r);a!==i.globalImageIdSpecificToolStateManager&&(a.restoreToolState(e.elementToolState[n]),t.setViewport(r,e.elementViewport[n]),t.updateImage(r))}}),e}}}},"./stateManagement/frameOfReferenceStateManager.js":function(e,t,n){"use strict";function r(){var e={};return{get:function(t,n){if(!1!==e.hasOwnProperty(t)){var r=e[t];if(!1!==r.hasOwnProperty(n))return r[n]}},add:function(t,n,r){!1===e.hasOwnProperty(t)&&(e[t]={});var a=e[t];!1===a.hasOwnProperty(n)&&(a[n]={data:[]}),a[n].data.push(r)},remove:function(t,n,r){if(!1!==e.hasOwnProperty(t)){var a=e[t];if(!1!==a.hasOwnProperty(n)){for(var i=a[n],o=-1,s=0;s<i.data.length;s++)i.data[s]===r&&(o=s);-1!==o&&i.data.splice(o,1)}}}}}Object.defineProperty(t,"__esModule",{value:!0});var a=r();t.newFrameOfReferenceSpecificToolStateManager=r,t.globalFrameOfReferenceSpecificToolStateManager=a},"./stateManagement/imageIdSpecificStateManager.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.globalImageIdSpecificToolStateManager=t.newImageIdSpecificToolStateManager=void 0;var r,a=(r=n("./externalModules.js"))&&r.__esModule?r:{default:r};function i(){var e={};return{get:function(t,n){var r=a.default.cornerstone.getEnabledElement(t);if(r.image&&!1!==e.hasOwnProperty(r.image.imageId)){var i=e[r.image.imageId];if(!1!==i.hasOwnProperty(n))return i[n]}},add:function(t,n,r){var i=a.default.cornerstone.getEnabledElement(t);i.image&&!1!==e.hasOwnProperty(i.image.imageId)||(e[i.image.imageId]={});var o=e[i.image.imageId];!1===o.hasOwnProperty(n)&&(o[n]={data:[]}),o[n].data.push(r)},clear:function(t){var n=a.default.cornerstone.getEnabledElement(t);n.image&&!1!==e.hasOwnProperty(n.image.imageId)&&delete e[n.image.imageId]},saveImageIdToolState:function(t){return e[t]},restoreImageIdToolState:function(t,n){e[t]=n},saveToolState:function(){return e},restoreToolState:function(t){e=t},toolState:e}}var o=i();t.newImageIdSpecificToolStateManager=i,t.globalImageIdSpecificToolStateManager=o},"./stateManagement/loadHandlerManager.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=void 0,a=void 0,i=void 0;t.default={setStartLoadHandler:function(e){r=e},getStartLoadHandler:function(){return r},setEndLoadHandler:function(e){a=e},getEndLoadHandler:function(){return a},setErrorLoadingHandler:function(e){i=e},getErrorLoadingHandler:function(){return i}}},"./stateManagement/stackSpecificStateManager.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addStackStateManager=t.newStackSpecificToolStateManager=t.stackSpecificStateManager=void 0;var r=n("./stateManagement/imageIdSpecificStateManager.js"),a=n("./stateManagement/toolState.js");function i(e,t){var n={};return{get:function(r,a){return e.indexOf(a)>=0?(!1===n.hasOwnProperty(a)&&(n[a]={data:[]}),n[a]):t.get(r,a)},add:function(r,a,i){if(!(e.indexOf(a)>=0))return t.add(r,a,i);!1===n.hasOwnProperty(a)&&(n[a]={data:[]}),n[a].data.push(i)},saveToolState:function(){return n},restoreToolState:function(e){n=e},toolState:n}}var o=[];function s(e,t){var n=(0,a.getElementToolStateManager)(e);n||(n=r.globalImageIdSpecificToolStateManager);var s=["stack","stackPrefetch","playClip","volume","slab","referenceLines","crosshairs","stackRenderer"];t&&(s=s.concat(t));var l=i(s,n);o.push(l),(0,a.setElementToolStateManager)(e,l)}t.stackSpecificStateManager={newStackSpecificToolStateManager:i,addStackStateManager:s},t.newStackSpecificToolStateManager=i,t.addStackStateManager=s},"./stateManagement/textStyle.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=15,a=r+"px Arial",i="transparent";t.default={setFont:function(e){a=e},getFont:function(){return a},setFontSize:function(e){r=e},getFontSize:function(){return r},setBackgroundColor:function(e){i=e},getBackgroundColor:function(){return i}}},"./stateManagement/timeSeriesSpecificStateManager.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newTimeSeriesSpecificToolStateManager=t.addTimeSeriesStateManager=void 0;var r=n("./stateManagement/imageIdSpecificStateManager.js"),a=n("./stateManagement/toolState.js");function i(e,t){var n={};return{get:function(r,a){return e.indexOf(a)>=0?(!1===n.hasOwnProperty(a)&&(n[a]={data:[]}),n[a]):t.get(r,a)},add:function(r,a,i){if(!(e.indexOf(a)>=0))return t.add(r,a,i);!1===n.hasOwnProperty(a)&&(n[a]={data:[]}),n[a].data.push(i)}}}var o=[];t.addTimeSeriesStateManager=function(e,t){t=t||["timeSeries"];var n=(0,a.getElementToolStateManager)(e);void 0===n&&(n=r.globalImageIdSpecificToolStateManager);var s=i(t,n);o.push(s),(0,a.setElementToolStateManager)(e,s)},t.newTimeSeriesSpecificToolStateManager=i},"./stateManagement/toolColors.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="white",a="greenyellow",i="transparent";t.default={setFillColor:function(e){i=e},getFillColor:function(){return i},setToolColor:function(e){r=e},getToolColor:function(){return r},setActiveColor:function(e){a=e},getActiveColor:function(){return a},getColorIfActive:function(e){return e.color?e.color:e.active?a:r}}},"./stateManagement/toolCoordinates.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=void 0;t.default={setCoords:function(e){r=e.currentPoints.canvas},getCoords:function(){return r}}},"./stateManagement/toolState.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getElementToolStateManager=t.setElementToolStateManager=t.clearToolState=t.removeToolState=t.getToolState=t.addToolState=void 0;var r=s(n("./events.js")),a=s(n("./externalModules.js")),i=n("./stateManagement/imageIdSpecificStateManager.js"),o=s(n("./util/triggerEvent.js"));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=a.default.cornerstone.getEnabledElement(e);return void 0===t.toolStateManager&&(t.toolStateManager=i.globalImageIdSpecificToolStateManager),t.toolStateManager}t.addToolState=function(e,t,n){l(e).add(e,t,n),(0,o.default)(e,r.default.MEASUREMENT_ADDED,{toolType:t,element:e,measurementData:n})},t.getToolState=function(e,t){return l(e).get(e,t)},t.removeToolState=function(e,t,n){for(var a=l(e).get(e,t),i=-1,s=0;s<a.data.length;s++)a.data[s]===n&&(i=s);-1!==i&&(a.data.splice(i,1),(0,o.default)(e,r.default.MEASUREMENT_REMOVED,{toolType:t,element:e,measurementData:n}))},t.clearToolState=function(e,t){var n=l(e).get(e,t);void 0!==n&&(n.data=[])},t.setElementToolStateManager=function(e,t){a.default.cornerstone.getEnabledElement(e).toolStateManager=t},t.getElementToolStateManager=l},"./stateManagement/toolStyle.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=1,a=2;t.default={setToolWidth:function(e){r=e},getToolWidth:function(){return r},setActiveWidth:function(e){a=e},getActiveWidth:function(){return a}}},"./synchronization/Synchronizer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n("./externalModules.js")),a=o(n("./util/convertToVector3.js")),i=n("./toolOptions.js");function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return e.filter(function(e,t,n){return n.indexOf(e)===t})}t.default=function(e,t){var n=r.default.cornerstone,o=this,l=[],u=[],d=!1,c={},f=t;function h(e,t){o.enabled&&l.length&&u.length&&(d=!0,u.forEach(function(n){var r=u.indexOf(n);if(-1!==r){var a=c.imageIds.targetElements[r],i=l.indexOf(e);if(-1!==i){var s=c.imageIds.sourceElements[i],d=void 0;s===a?d=0:void 0!==c.distances[s]&&(d=c.distances[s][a]),f(o,e,n,t,d)}}}),d=!1)}function p(e){!0!==d&&h(e.currentTarget,e.detail)}function m(e){var t=e.detail.element;o.remove(t),(0,i.clearToolOptionsByElement)(t)}this.enabled=!0,this.setHandler=function(e){f=e},this.getHandler=function(){return f},this.getDistances=function(){l.length&&u.length&&(c.distances={},c.imageIds={sourceElements:[],targetElements:[]},l.forEach(function(e){var t=n.getEnabledElement(e);if(t&&t.image){var r=t.image.imageId,i=n.metaData.get("imagePlaneModule",r);if(i&&i.imagePositionPatient){var o=(0,a.default)(i.imagePositionPatient);c.hasOwnProperty(t)||(c.distances[r]={},c.imageIds.sourceElements.push(r),u.forEach(function(t){var i=n.getEnabledElement(t);if(i&&i.image){var s=i.image.imageId;if(c.imageIds.targetElements.push(s),e!==t&&r!==s&&!c.distances[r].hasOwnProperty(s)){var l=n.metaData.get("imagePlaneModule",s);if(l&&l.imagePositionPatient){var u=(0,a.default)(l.imagePositionPatient);c.distances[r][s]=u.clone().sub(o)}}}}),Object.keys(c.distances[r]).length||delete c.distances[r])}}}))},this.addSource=function(t){-1===l.indexOf(t)&&(l.push(t),e.split(" ").forEach(function(e){t.addEventListener(e,p)}),o.getDistances(),o.updateDisableHandlers())},this.addTarget=function(e){-1===u.indexOf(e)&&(u.push(e),o.getDistances(),f(o,e,e,0),o.updateDisableHandlers())},this.add=function(e){o.addSource(e),o.addTarget(e)},this.removeSource=function(t){var n=l.indexOf(t);-1!==n&&(l.splice(n,1),e.split(" ").forEach(function(e){t.removeEventListener(e,p)}),o.getDistances(),h(t),o.updateDisableHandlers())},this.removeTarget=function(e){var t=u.indexOf(e);-1!==t&&(u.splice(t,1),o.getDistances(),f(o,e,e,0),o.updateDisableHandlers())},this.remove=function(e){o.removeTarget(e),o.removeSource(e)},this.getSourceElements=function(){return l},this.getTargetElements=function(){return u},this.displayImage=function(e,t,r){d=!0,n.displayImage(e,t,r),d=!1},this.setViewport=function(e,t){d=!0,n.setViewport(e,t),d=!1},this.updateDisableHandlers=function(){s(l.concat(u)).forEach(function(e){e.removeEventListener(r.default.cornerstone.EVENTS.ELEMENT_DISABLED,m),e.addEventListener(r.default.cornerstone.EVENTS.ELEMENT_DISABLED,m)})},this.destroy=function(){s(l.concat(u)).forEach(function(e){o.remove(e)})}}},"./synchronization/panZoomSynchronizer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(n!==t){var r=a.default.cornerstone,i=r.getViewport(t),o=r.getViewport(n);o.scale===i.scale&&o.translation.x===i.translation.x&&o.translation.y===i.translation.y||(o.scale=i.scale,o.translation.x=i.translation.x,o.translation.y=i.translation.y,e.setViewport(n,o))}};var r,a=(r=n("./externalModules.js"))&&r.__esModule?r:{default:r}},"./synchronization/stackImageIndexSynchronizer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(n!==t){var s=r.default.cornerstone,l=(0,a.getToolState)(t,"stack").data[0],u=(0,a.getToolState)(n,"stack").data[0],d=l.currentImageIdIndex;if((d=(0,o.default)(d,0,u.imageIds.length-1))!==u.currentImageIdIndex){var c=i.default.getStartLoadHandler(),f=i.default.getEndLoadHandler(),h=i.default.getErrorLoadingHandler();c&&c(n),(!0===u.preventCache?s.loadImage(u.imageIds[d]):s.loadAndCacheImage(u.imageIds[d])).then(function(t){var r=s.getViewport(n);u.currentImageIdIndex=d,e.displayImage(n,t,r),f&&f(n,t)},function(e){h&&h(n,u.imageIds[d],e)})}}};var r=s(n("./externalModules.js")),a=n("./stateManagement/toolState.js"),i=s(n("./stateManagement/loadHandlerManager.js")),o=s(n("./util/clip.js"));function s(e){return e&&e.__esModule?e:{default:e}}},"./synchronization/stackImagePositionOffsetSynchronizer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,s,l){if(n!==t){var u=r.default.cornerstone,d=u.getEnabledElement(t),c=u.metaData.get("imagePlaneModule",d.image.imageId);if(void 0!==c&&void 0!==c.imagePositionPatient){var f=(0,o.default)(c.imagePositionPatient),h=(0,a.getToolState)(n,"stack").data[0],p=Number.MAX_VALUE,m=-1;if(l){var g=f.clone().add(l);if(h.imageIds.forEach(function(e,t){var n=u.metaData.get("imagePlaneModule",e);if(void 0!==n&&void 0!==n.imagePositionPatient){var r=(0,o.default)(n.imagePositionPatient),a=g.distanceToSquared(r);a<p&&(p=a,m=t)}}),m!==h.currentImageIdIndex&&-1!==m){var v=i.default.getStartLoadHandler(),y=i.default.getEndLoadHandler(),b=i.default.getErrorLoadingHandler();h.currentImageIdIndex=m;var w=h.imageIds[m];v&&v(n),(!0===h.preventCache?u.loadImage(w):u.loadAndCacheImage(w)).then(function(t){var r=u.getViewport(n);h.currentImageIdIndex===m&&(e.displayImage(n,t,r),y&&y(n,t))},function(e){b&&b(n,h.imageIds[m],e)})}}}}};var r=s(n("./externalModules.js")),a=n("./stateManagement/toolState.js"),i=s(n("./stateManagement/loadHandlerManager.js")),o=s(n("./util/convertToVector3.js"));function s(e){return e&&e.__esModule?e:{default:e}}},"./synchronization/stackImagePositionSynchronizer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(n!==t){var s=r.default.cornerstone,l=s.getEnabledElement(t).image,u=s.metaData.get("imagePlaneModule",l.imageId);if(void 0!==u&&void 0!==u.imagePositionPatient){var d=(0,o.default)(u.imagePositionPatient),c=(0,a.getToolState)(n,"stack").data[0],f=Number.MAX_VALUE,h=-1;if(c.imageIds.forEach(function(e,t){var n=s.metaData.get("imagePlaneModule",e);if(void 0!==n&&void 0!==n.imagePositionPatient){var r=(0,o.default)(n.imagePositionPatient).distanceToSquared(d);r<f&&(f=r,h=t)}}),h!==c.currentImageIdIndex){var p=i.default.getStartLoadHandler(),m=i.default.getEndLoadHandler(),g=i.default.getErrorLoadingHandler();c.currentImageIdIndex=h;var v=c.imageIds[h];p&&p(n),-1!==h&&(!0===c.preventCache?s.loadImage(v):s.loadAndCacheImage(v)).then(function(t){var r=s.getViewport(n);c.currentImageIdIndex===h&&(e.displayImage(n,t,r),m&&m(n,t))},function(e){g&&g(n,c.imageIds[h],e)})}}}};var r=s(n("./externalModules.js")),a=n("./stateManagement/toolState.js"),i=s(n("./stateManagement/loadHandlerManager.js")),o=s(n("./util/convertToVector3.js"));function s(e){return e&&e.__esModule?e:{default:e}}},"./synchronization/stackScrollSynchronizer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,s){if(t!==n&&s&&s.direction){var l=r.default.cornerstone,u=(0,a.getToolState)(n,"stack").data[0],d=u.currentImageIdIndex+s.direction;if(d=(0,o.default)(d,0,u.imageIds.length-1),u.currentImageIdIndex!==d){var c=i.default.getStartLoadHandler(),f=i.default.getEndLoadHandler(),h=i.default.getErrorLoadingHandler();u.currentImageIdIndex=d;var p=u.imageIds[d];c&&c(n),(!0===u.preventCache?l.loadImage(p):l.loadAndCacheImage(p)).then(function(t){var r=l.getViewport(n);u.currentImageIdIndex===d&&(e.displayImage(n,t,r),f&&f(n,t))},function(e){h&&h(n,u.imageIds[d],e)})}}};var r=s(n("./externalModules.js")),a=n("./stateManagement/toolState.js"),i=s(n("./stateManagement/loadHandlerManager.js")),o=s(n("./util/clip.js"));function s(e){return e&&e.__esModule?e:{default:e}}},"./synchronization/updateImageSynchronizer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){n!==t&&a.default.cornerstone.updateImage(n)};var r,a=(r=n("./externalModules.js"))&&r.__esModule?r:{default:r}},"./synchronization/wwwcSynchronizer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(n!==t){var r=a.default.cornerstone,i=r.getViewport(t),o=r.getViewport(n);o.voi.windowWidth===i.voi.windowWidth&&o.voi.windowCenter===i.voi.windowCenter&&o.invert===i.invert||(o.voi.windowWidth=i.voi.windowWidth,o.voi.windowCenter=i.voi.windowCenter,o.invert=i.invert,e.setViewport(n,o))}};var r,a=(r=n("./externalModules.js"))&&r.__esModule?r:{default:r}},"./timeSeriesTools/incrementTimePoint.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var s=(0,a.getToolState)(e,"timeSeries");if(s&&s.data&&s.data.length){var l=r.default.cornerstone,u=s.data[0],d=u.stacks[u.currentStackIndex].currentImageIdIndex,c=u.currentStackIndex+t;if(n?(c>=u.stacks.length&&(c=0),c<0&&(c=u.stacks.length-1)):c=(0,o.default)(c,0,u.stacks.length-1),c!==u.currentStackIndex){var f=l.getViewport(e),h=u.stacks[c],p=i.default.getStartLoadHandler(),m=i.default.getEndLoadHandler(),g=i.default.getErrorLoadingHandler();p&&p(e),(!0===h.preventCache?l.loadImage(h.imageIds[d]):l.loadAndCacheImage(h.imageIds[d])).then(function(t){u.currentImageIdIndex!==d&&(h.currentImageIdIndex=d,u.currentStackIndex=c,l.displayImage(e,t,f),m&&m(e,t))},function(t){g&&g(e,h.imageIds[d],t)})}}};var r=s(n("./externalModules.js")),a=n("./stateManagement/toolState.js"),i=s(n("./stateManagement/loadHandlerManager.js")),o=s(n("./util/clip.js"));function s(e){return e&&e.__esModule?e:{default:e}}},"./timeSeriesTools/probeTool4D.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n("./externalModules.js")),a=c(n("./imageTools/mouseButtonTool.js")),i=c(n("./manipulators/drawHandles.js")),o=n("./stateManagement/toolState.js"),s=c(n("./measurementManager/measurementManager.js")),l=c(n("./measurementManager/lineSampleMeasurement.js")),u=c(n("./util/drawTextBox.js")),d=n("./util/drawing.js");function c(e){return e&&e.__esModule?e:{default:e}}var f=(0,a.default)({createNewMeasurement:function(e){var t=(0,o.getToolState)(e.element,"timeSeries");if(void 0!==t&&void 0!==t.data&&0!==t.data.length){var n=t.data[0],a={timeSeries:n,lineSample:new l.default,imageIdIndex:n.stacks[n.currentStackIndex].currentImageIdIndex,visible:!0,handles:{end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!0}}};return function(e){var t=r.default.cornerstone,n=[];e.timeSeries.stacks.forEach(function(r){(!0===r.preventCache?t.loadImage(r.imageIds[e.imageIdIndex]):t.loadAndCacheImage(r.imageIds[e.imageIdIndex])).then(function(t){var r=Math.round(e.handles.end.x)+Math.round(e.handles.end.y)*t.width,a=t.getPixelData()[r];n.push(a)})}),e.lineSample.set(n)}(a),s.default.add(a),a}},onImageRendered:function(e){var t=r.default.cornerstone,n=e.detail,a=(0,o.getToolState)(e.currentTarget,"probe4D");if(a){var s=n.canvasContext;s.setTransform(1,0,0,1,0,0);for(var l=function(e){(0,d.draw)(s,function(r){var o=a.data[e];(0,i.default)(r,n,o.handles,"white");var s=t.pixelToCanvas(n.element,{x:o.handles.end.x+3,y:o.handles.end.y-3});(0,u.default)(r,o.handles.end.x+", "+o.handles.end.y,s.x,s.y,"white")})},c=0;c<a.data.length;c++)l(c)}},toolType:"probe4D"});t.default=f},"./timeSeriesTools/timeSeriesPlayer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n("./stateManagement/toolState.js"),i=(r=n("./timeSeriesTools/incrementTimePoint.js"))&&r.__esModule?r:{default:r},o="timeSeriesPlayer";t.default={start:function(e,t){if(void 0===e)throw new Error("playClip: element must not be undefined");void 0===t&&(t=30);var n=(0,a.getToolState)(e,"timeSeries");if(void 0!==n&&void 0!==n.data&&0!==n.data.length){var r=(0,a.getToolState)(e,o),s=void 0;void 0===r||0===r.data.length?(0,a.addToolState)(e,o,s={intervalId:void 0,framesPerSecond:t,lastFrameTimeStamp:void 0,frameRate:0}):(s=r.data[0]).framesPerSecond=t,void 0===s.intervalId&&(s.intervalId=setInterval(function(){(0,i.default)(e,s.framesPerSecond>0?1:-1,!0)},1e3/Math.abs(s.framesPerSecond)))}},stop:function(e){var t=(0,a.getToolState)(e,o);if(t&&t.data&&t.data.length){var n=t.data[0];clearInterval(n.intervalId),n.intervalId=void 0}}}},"./timeSeriesTools/timeSeriesScroll.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timeSeriesScrollTouchDrag=t.timeSeriesScrollWheel=t.timeSeriesScroll=void 0;var r=c(n("./events.js")),a=c(n("./imageTools/simpleMouseButtonTool.js")),i=c(n("./imageTools/touchDragTool.js")),o=c(n("./imageTools/mouseWheelTool.js")),s=c(n("./timeSeriesTools/incrementTimePoint.js")),l=c(n("./util/isMouseButtonEnabled.js")),u=n("./stateManagement/toolState.js"),d=n("./toolOptions.js");function c(e){return e&&e.__esModule?e:{default:e}}var f="timeSeriesScroll";function h(e){var t=e.detail.element;t.removeEventListener(r.default.MOUSE_DRAG,p),t.removeEventListener(r.default.MOUSE_UP,h),t.removeEventListener(r.default.MOUSE_CLICK,h)}function p(e){var t=e.detail,n=t.element;e.data.deltaY+=t.deltaPoints.page.y;var r=(0,u.getToolState)(t.element,"timeSeries");if(void 0!==r&&void 0!==r.data&&0!==r.data.length){var a=n.offsetHeight/r.data[0].stacks.length;if(void 0!==e.data.options&&void 0!==e.data.options.timeSeriesScrollSpeed&&(a=e.data.options.timeSeriesScrollSpeed),e.data.deltaY>=a||e.data.deltaY<=-a){var i=Math.round(e.data.deltaY/a),o=e.data.deltaY%a;(0,s.default)(t.element,i),e.data.deltaY=o}return!1}}var m=(0,a.default)(function(e){var t=e.detail,n=t.element,a=(0,d.getToolOptions)(f,n);if((0,l.default)(t.which,a.mouseButtonMask))return a.deltaY=0,(0,d.setToolOptions)(f,n,a),n.addEventListener(r.default.MOUSE_DRAG,p),n.addEventListener(r.default.MOUSE_UP,h),n.addEventListener(r.default.MOUSE_CLICK,h),e.stopImmediatePropagation(),!1},f),g=(0,o.default)(function(e){var t=e.detail;(0,s.default)(t.element,-t.direction)}),v=(0,i.default)(function(e){var t=e.originalEvent.detail,n={deltaY:0};n.deltaY+=t.deltaPoints.page.y;var r=(0,u.getToolState)(t.element,"stack");if(void 0!==r&&void 0!==r.data&&0!==r.data.length){if(n.deltaY>=3||n.deltaY<=-3){var a=n.deltaY%3;(0,s.default)(n.element,n.deltaY/3),n.deltaY=a}return!1}});t.timeSeriesScroll=m,t.timeSeriesScrollWheel=g,t.timeSeriesScrollTouchDrag=v},"./toolOptions.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};t.getToolOptions=function(e,t){if(!r[e])return{};var n=r[e].find(function(e){return e.element===t});return n?n.options:{}},t.setToolOptions=function(e,t,n){if(r[e]){var a=r[e].findIndex(function(e){return e.element===t});-1===a?r[e].push({element:t,options:n}):r[e][a].options=Object.assign(r[e][a].options||{},n)}else r[e]=[{element:t,options:n}]},t.clearToolOptions=function(e,t){var n=r[e];n&&(r[e]=n.filter(function(e){return e.element!==t}))},t.clearToolOptionsByToolType=function(e){delete r[e]},t.clearToolOptionsByElement=function(e){for(var t in r)r[t]=r[t].filter(function(t){return t.element!==e})}},"./util/calculateEllipseStatistics.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n=0,r=0,i=0,o=0,s=t.top;s<t.top+t.height;s++)for(var l=t.left;l<t.left+t.width;l++)(0,a.default)(t,{x:l,y:s})&&(n+=e[o],r+=e[o]*e[o],i++),o++;if(0===i)return{count:i,mean:0,variance:0,stdDev:0};var u=n/i,d=r/i-u*u;return{count:i,mean:u,variance:d,stdDev:Math.sqrt(d)}};var r,a=(r=n("./util/pointInEllipse.js"))&&r.__esModule?r:{default:r}},"./util/calculateSUV.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=a.default.cornerstone,r=n.metaData.get("patientStudyModule",e.imageId),o=n.metaData.get("generalSeriesModule",e.imageId);if(r&&o&&"PT"===o.modality){var s=t*e.slope+e.intercept,l=r.patientWeight;if(l){var u=n.metaData.get("petIsotopeModule",e.imageId);if(u){var d=u.radiopharmaceuticalInfo,c=d.radiopharmaceuticalStartTime,f=d.radionuclideTotalDose,h=d.radionuclideHalfLife,p=o.seriesTime;if(c&&f&&h&&p){var m=i(p.fractionalSeconds||0)+p.seconds+60*p.minutes+60*p.hours*60,g=i(c.fractionalSeconds)+c.seconds+60*c.minutes+60*c.hours*60;return s*l/(f*Math.exp(-(m-g)*Math.log(2)/h))*1e3}}}}};var r,a=(r=n("./externalModules.js"))&&r.__esModule?r:{default:r};function i(e){return parseFloat("."+e)}},"./util/clip.js":function(e,t,n){"use strict";function r(e,t,n){return Math.min(Math.max(t,e),n)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.clipToBox=function(e,t){e.x=r(e.x,0,t.width),e.y=r(e.y,0,t.height)}},"./util/convertToVector3.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=a.default.cornerstoneMath;return e instanceof t.Vector3?e:new t.Vector3(e[0],e[1],e[2])};var r,a=(r=n("./externalModules.js"))&&r.__esModule?r:{default:r}},"./util/copyPoints.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{page:a.default.cornerstoneMath.point.copy(e.page),image:a.default.cornerstoneMath.point.copy(e.image),client:a.default.cornerstoneMath.point.copy(e.client),canvas:a.default.cornerstoneMath.point.copy(e.canvas)}};var r,a=(r=n("./externalModules.js"))&&r.__esModule?r:{default:r}},"./util/drawArrow.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a,i){var o=Math.atan2(n.y-t.y,n.x-t.x),s={color:a,lineWidth:i};(0,r.drawLine)(e,void 0,t,n,s,"canvas"),s={color:a,lineWidth:i,fillStyle:a};var l=[{x:n.x-10*Math.cos(o-Math.PI/7),y:n.y-10*Math.sin(o-Math.PI/7)},{x:n.x-10*Math.cos(o+Math.PI/7),y:n.y-10*Math.sin(o+Math.PI/7)},n];(0,r.drawJoinedLines)(e,void 0,n,l,s,"canvas")};var r=n("./util/drawing.js")},"./util/drawCircle.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a){(0,r.drawCircle)(e,void 0,t,6,{color:n,lineWidth:a},"canvas")};var r=n("./util/drawing.js")},"./util/drawEllipse.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a,i){(0,r.drawEllipse)(e,void 0,{x:t,y:n},{x:t+a,y:n+i},{},"canvas")};var r=n("./util/drawing.js")},"./util/drawLink.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,o,s){var l=e.length>0?a.default.cornerstoneMath.point.findClosestPoint(e,t):t,u=a.default.cornerstoneMath.point.findClosestPoint([{x:n.left+n.width/2,y:n.top},{x:n.left,y:n.top+n.height/2},{x:n.left+n.width/2,y:n.top+n.height},{x:n.left+n.width,y:n.top+n.height/2}],l);(0,i.drawLine)(r,void 0,l,u,{color:o,lineWidth:s,lineDash:[2,3]},"canvas")};var r,a=(r=n("./externalModules.js"))&&r.__esModule?r:{default:r},i=n("./util/drawing.js")},"./util/drawLinkedTextBox.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,o,s,l,u,d,c,f){var h=r.default.cornerstone,p=h.pixelToCanvas(t,n);if(c&&(p.x+=c),n.boundingBox=(0,a.default)(e,o,p.x,p.y,u,{centering:{x:!1,y:f}}),n.hasMoved){var m=l(s).map(function(e){return h.pixelToCanvas(t,e)});(0,i.default)(m,p,n.boundingBox,e,u,d)}};var r=o(n("./externalModules.js")),a=o(n("./util/drawTextBox.js")),i=o(n("./util/drawLink.js"));function o(e){return e&&e.__esModule?e:{default:e}}},"./util/drawTextBox.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.textBoxWidth=o,t.default=function(e,t,n,r,s,l){"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]);var u=a.default.getFontSize(),d=a.default.getBackgroundColor(),c=0;t.forEach(function(t){var n=o(e,t,5);c=Math.max(c,n)});var f={width:c,height:5+t.length*(u+5)};return(0,i.draw)(e,function(e){e.strokeStyle=s,l&&l.centering&&!0===l.centering.x&&(n-=f.width/2),l&&l.centering&&!0===l.centering.y&&(r-=f.height/2),f.left=n,f.top=r,(0,i.fillBox)(e,f,l&&!0===l.debug?"#FF0000":d),(0,i.fillTextLines)(e,f,t,s,5)}),f};var r,a=(r=n("./stateManagement/textStyle.js"))&&r.__esModule?r:{default:r},i=n("./util/drawing.js");function o(e,t,n){var r=a.default.getFont(),i=e.font;r&&r!==i&&(e.font=r);var o=e.measureText(t).width;return r&&r!==i&&(e.font=i),o+2*n}},"./util/drawing.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNewContext=function(e){var t=e.getContext("2d");return t.setTransform(1,0,0,1,0,0),t},t.draw=function(e,t){e.save(),t(e),e.restore()},t.path=o,t.setShadow=function(e,t){t.shadow&&(e.shadowColor=t.shadowColor||"#000000",e.shadowOffsetX=t.shadowOffsetX||1,e.shadowOffsetY=t.shadowOffsetY||1)},t.drawLine=function(e,t,n,r,i){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"pixel";o(e,i,function(e){if("pixel"===s){var i=a.default.cornerstone;n=i.pixelToCanvas(t,n),r=i.pixelToCanvas(t,r)}e.moveTo(n.x,n.y),e.lineTo(r.x,r.y)})},t.drawLines=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"pixel";o(e,r,function(e){n.forEach(function(n){var r=n.start,o=n.end;if("pixel"===i){var s=a.default.cornerstone;r=s.pixelToCanvas(t,r),o=s.pixelToCanvas(t,o)}e.moveTo(r.x,r.y),e.lineTo(o.x,o.y)})})},t.drawJoinedLines=function(e,t,n,r,i){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"pixel";o(e,i,function(e){if("pixel"===s){var i=a.default.cornerstone;n=i.pixelToCanvas(t,n),r=r.map(function(e){return i.pixelToCanvas(t,e)})}e.moveTo(n.x,n.y),r.forEach(function(t){e.lineTo(t.x,t.y)})})},t.drawCircle=function(e,t,n,r,i){"pixel"===(arguments.length>5&&void 0!==arguments[5]?arguments[5]:"pixel")&&(n=a.default.cornerstone.pixelToCanvas(t,n)),o(e,i,function(e){e.arc(n.x,n.y,r,0,2*Math.PI)})},t.drawEllipse=function(e,t,n,r,i){"pixel"===(arguments.length>5&&void 0!==arguments[5]?arguments[5]:"pixel")&&(n=a.default.cornerstone.pixelToCanvas(t,n),r=a.default.cornerstone.pixelToCanvas(t,r));var s=Math.min(n.x,r.x),l=Math.min(n.y,r.y),u=Math.abs(n.x-r.x),d=Math.abs(n.y-r.y),c=u/2*.5522848,f=d/2*.5522848,h=s+u,p=l+d,m=s+u/2,g=l+d/2;o(e,i,function(e){e.moveTo(s,g),e.bezierCurveTo(s,g-f,m-c,l,m,l),e.bezierCurveTo(m+c,l,h,g-f,h,g),e.bezierCurveTo(h,g+f,m+c,p,m,p),e.bezierCurveTo(m-c,p,s,g+f,s,g),e.closePath()})},t.drawRect=function(e,t,n,r,i){if("pixel"===(arguments.length>5&&void 0!==arguments[5]?arguments[5]:"pixel")){var s=a.default.cornerstone;n=s.pixelToCanvas(t,n),r=s.pixelToCanvas(t,r)}var l=Math.min(n.x,r.x),u=Math.min(n.y,r.y),d=Math.abs(n.x-r.x),c=Math.abs(n.y-r.y);o(e,i,function(e){e.rect(l,u,d,c)})},t.fillOutsideRect=function(e,t,n,r,i){if("pixel"===(arguments.length>5&&void 0!==arguments[5]?arguments[5]:"pixel")){var s=a.default.cornerstone;n=s.pixelToCanvas(t,n),r=s.pixelToCanvas(t,r)}var l=Math.min(n.x,r.x),u=Math.min(n.y,r.y),d=Math.abs(n.x-r.x),c=Math.abs(n.y-r.y);o(e,i,function(e){e.rect(0,0,e.canvas.clientWidth,e.canvas.clientHeight),e.rect(l+d,u,-d,c)})},t.fillBox=function(e,t,n){e.fillStyle=n,e.fillRect(t.left,t.top,t.width,t.height)},t.fillTextLines=function(e,t,n,r,a){var o=i.textStyle.getFontSize();e.font=i.textStyle.getFont(),e.textBaseline="top",e.fillStyle=r,n.forEach(function(n,r){e.fillText(n,t.left+a,t.top+a+r*(o+a))})};var r,a=(r=n("./externalModules.js"))&&r.__esModule?r:{default:r},i=n("./index.js");function o(e,t,n){var r=t.color,a=t.lineWidth,o=t.fillStyle,s=t.lineDash;e.beginPath(),e.strokeStyle=r||e.strokeStyle,e.lineWidth=a||void 0===a&&i.toolStyle.getToolWidth()||e.lineWidth,s&&e.setLineDash(s),n(e),o&&(e.fillStyle=o,e.fill()),e.stroke(),s&&e.setLineDash([])}},"./util/freehand/ClickedLineData.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClickedLineData=function e(t,n){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.toolIndex=t,this.handleIndexArray=n}},"./util/freehand/FreehandHandleData.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FreehandHandleData=function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.x=t.x,this.y=t.y,this.highlight=n,this.active=r,this.lines=[]}},"./util/freehand/FreehandLineFinder.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FreehandLineFinder=void 0;var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n("./stateManagement/toolState.js"),o=(r=n("./externalModules.js"))&&r.__esModule?r:{default:r},s=n("./util/freehand/ClickedLineData.js");t.FreehandLineFinder=function(){function e(t){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this._eventData=t}return a(e,[{key:"findLine",value:function(){var e=this.findTool();if(null===e)return null;var t=this._getCloseLinesInTool(e);return t?this._findCorrectLine(e,t):null}},{key:"findTool",value:function(){return this._toolData=(0,i.getToolState)(this._eventData.element,"freehand"),this._mousePoint=this._eventData.currentPoints.canvas,this._toolData?this._nearestHandleToPointAllTools().toolIndex:null}},{key:"_nearestHandleToPointAllTools",value:function(){for(var e=this._toolData,t={toolIndex:null,handleIndex:null,distance:1/0},n=0;n<e.data.length;n++){var r=this._nearestHandleToPoint(n);null!==r&&r.distance<t.distance&&(t=r)}return t}},{key:"_nearestHandleToPoint",value:function(e){var t=this._eventData,n=this._toolData.data[e];if(void 0===n.handles)return null;if(!1===n.visible)return null;for(var r={toolIndex:e,handleIndex:null,distance:1/0},a=0;a<n.handles.length;a++){var i=o.default.cornerstone.pixelToCanvas(t.element,n.handles[a]),s=o.default.cornerstoneMath.point.distance(i,this._mousePoint);s<r.distance&&(r.handleIndex=a,r.distance=s)}return r}},{key:"_getCloseLinesInTool",value:function(t){for(var n=this._toolData.data[t].handles,r=[],a=0;a<n.length;a++){var i=e.getNextHandleIndex(a,n.length);this._distanceOfPointfromLine(n[a],n[i])<10&&r.push([a,i])}return r}},{key:"_findCorrectLine",value:function(e,t){for(var n=0;n<t.length;n++)if(this._pointProjectsToLineSegment(e,t[n]))return new s.ClickedLineData(e,t[n]);return null}},{key:"_pointProjectsToLineSegment",value:function(t,n){var r=this._toolData.data[t];if(void 0!==r.handles){if(!1===r.visible)return!1;var a=e.getCanvasPointsFromHandles(r.handles[n[0]],r.handles[n[1]],this._eventData.element),i=e.getLineAsVector(a),o=this._getLineOriginToMouseAsVector(a),s=(o[0]*i[0]+o[1]*i[1])/i.magnitude;return s>0&&s<i.magnitude}}},{key:"_getLineOriginToMouseAsVector",value:function(e){return[this._mousePoint.x-e[0].x,this._mousePoint.y-e[0].y]}},{key:"_distanceOfPointfromLine",value:function(e,t){var n=this._eventData,r=o.default.cornerstone.pixelToCanvas(n.element,e),a=o.default.cornerstone.pixelToCanvas(n.element,t),i=this._mousePoint;return Math.abs((a.y-r.y)*i.x-(a.x-r.x)*i.y+a.x*r.y-a.y*r.x)/o.default.cornerstoneMath.point.distance(r,a)}}],[{key:"getCanvasPointsFromHandles",value:function(e,t,n){var r=[];return e.x<t.x?(r.push(o.default.cornerstone.pixelToCanvas(n,e)),r.push(o.default.cornerstone.pixelToCanvas(n,t))):(r.push(o.default.cornerstone.pixelToCanvas(n,t)),r.push(o.default.cornerstone.pixelToCanvas(n,e))),r}},{key:"getLineAsVector",value:function(e){var t=[e[1].x-e[0].x,e[1].y-e[0].y];return t.magnitude=o.default.cornerstoneMath.point.distance(e[0],e[1]),t}},{key:"getNextHandleIndex",value:function(e,t){return e<t-1?e+1:0}}]),e}()},"./util/freehand/Sculpter.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sculpter=void 0;var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(r=n("./externalModules.js"))&&r.__esModule?r:{default:r},o=n("./imageTools/freehandSculpter.js"),s=n("./util/freehand/FreehandHandleData.js"),l=n("./util/clip.js");t.Sculpter=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this)}return a(e,[{key:"sculpt",value:function(e,t){this._setData(e,t),this._pushHandles(),this._insertNewHandles(),this._consolidateHandles()}},{key:"_setData",value:function(e,t){var n=o.freehandSculpter.getConfiguration();this._eventData=e,this._element=e.element,this._image=e.image,this._mousePoint=e.currentPoints.image,this._dataHandles=t,this._toolSize=n.toolSizeImage,this._minSpacing=n.minSpacing,this._maxSpacing=n.maxSpacing}},{key:"_pushHandles",value:function(){for(var e=this._dataHandles,t=this._mousePoint,n=this._toolSize,r=0;r<e.length;r++){var a=i.default.cornerstoneMath.point.distance(e[r],t);a<n&&this._pushOneHandle(r,a)}}},{key:"_pushOneHandle",value:function(t,n){var r=this._dataHandles,a=r[t],i=this._mousePoint,o=this._toolSize,s={x:i.x+o*((a.x-i.x)/n),y:i.y+o*((a.y-i.y)/n)};(0,l.clipToBox)(s,this._image),a.x=s.x,a.y=s.y;var u=e.getPreviousHandleIndex(t,r.length);r[u].lines.pop(),r[u].lines.push(a)}},{key:"_insertNewHandles",value:function(){for(var e=this._findNewHandleIndicies(),t=0,n=0;n<e.length;n++)this._insertHandleRadially(e[n]+1+t),t++}},{key:"_findNewHandleIndicies",value:function(){for(var t=this._dataHandles,n=[],r=0;r<t.length;r++){var a=i.default.cornerstone.pixelToCanvas(this._element,t[r]),o=e.getNextHandleIndex(r,t.length),s=i.default.cornerstone.pixelToCanvas(this._element,t[o]);i.default.cornerstoneMath.point.distance(a,s)>this._maxSpacing&&n.push(r)}return n}},{key:"_insertHandleRadially",value:function(t){var n=this._dataHandles,r=t-1,a=e.getNextHandleIndexBeforeInsert(t,n.length),i=this._getInsertPosition(t,r,a),o=new s.FreehandHandleData(i);n.splice(t,0,o),n[r].lines.pop(),n[r].lines.push(n[t]),n[t].lines.push(t===n.length-1?n[0]:n[t+1])}},{key:"_getInsertPosition",value:function(e,t,n){var r=this._toolSize,a=this._mousePoint,o=this._dataHandles,s={x:(o[t].x+o[n].x)/2,y:(o[t].y+o[n].y)/2},u=i.default.cornerstoneMath.point.distance(a,s),d=void 0;if(u<r){var c={x:(s.x-a.x)/u,y:(s.y-a.y)/u};d={x:a.x+r*c.x,y:a.y+r*c.y}}else d=s;return(0,l.clipToBox)(d,this._image),d}},{key:"_consolidateHandles",value:function(){if(this._dataHandles.length>3){var e=this._findCloseHandlePairs();this._mergeCloseHandles(e)}}},{key:"_mergeCloseHandles",value:function(t){for(var n=0,r=0;r<t.length;r++){var a=e.getCorrectedPair(t[r],n);this._combineHandles(a),n++}var i=this._findCloseHandlePairs();i.length&&this._mergeCloseHandles(i)}},{key:"_findCloseHandlePairs",value:function(){for(var t=this._dataHandles,n=this._element,r=[],a=t.length,o=0;o<a;o++){var s=i.default.cornerstone.pixelToCanvas(n,t[o]),l=e.getNextHandleIndex(o,t.length),u=i.default.cornerstone.pixelToCanvas(n,t[l]);i.default.cornerstoneMath.point.distance(s,u)<this._minSpacing&&(r.push([o,l]),0===o&&(a-=1),o++)}return r}},{key:"_combineHandles",value:function(t){var n=this._dataHandles,r={x:(n[t[0]].x+n[t[1]].x)/2,y:(n[t[0]].y+n[t[1]].y)/2};(0,l.clipToBox)(r,this._image),n[t[0]].x=r.x,n[t[0]].y=r.y;var a=e.getNextHandleIndex(t[1],n.length);n[t[0]].lines.pop(),n[t[0]].lines.push(n[a]),n.splice(t[1],1)}}],[{key:"getNextHandleIndex",value:function(e,t){return e===t-1?0:e+1}},{key:"getNextHandleIndexBeforeInsert",value:function(e,t){return e===t?0:e}},{key:"getPreviousHandleIndex",value:function(e,t){return 0===e?t-1:e-1}},{key:"getCorrectedPair",value:function(e,t){var n=[e[0]-t,e[1]-t];return n[1]<0&&(n[1]=0),n}}]),e}()},"./util/freehand/calculateFreehandStatistics.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r={count:0,mean:0,variance:0,stdDev:0},a=function(e,t,n){for(var r={value:0,squared:0,count:0},a=0,o=t.top;o<t.top+t.height;o++)for(var s=t.left;s<t.left+t.width;s++)i(n,{x:s,y:o},r,e[a]),a++;return r}(e,t,n);return 0===a.count?r:(r.count=a.count,r.mean=a.value/a.count,r.variance=a.squared/a.count-r.mean*r.mean,r.stdDev=Math.sqrt(r.variance),r)};var r,a=(r=n("./util/freehand/pointInFreehand.js"))&&r.__esModule?r:{default:r};function i(e,t,n,r){(0,a.default)(e,t)&&(n.value+=r,n.squared+=r*r,n.count++)}},"./util/freehand/dragObject.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=a.freehand.getConfiguration();n.movingTextBox&&function(e){var t=a.freehand.getConfiguration();e.hasMoved=!0,e.x=t.mouseLocation.handles.start.x,e.y=t.mouseLocation.handles.start.y}(e),n.modifying&&function(e,t){var n=a.freehand.getConfiguration();if(t.handles.invalidHandlePlacement=i.default.modify(t.handles,e),t.active=!0,t.highlight=!0,t.handles[e].x=n.mouseLocation.handles.start.x,t.handles[e].y=n.mouseLocation.handles.start.y,e){var r=t.handles[e-1].lines[t.handles[e-1].lines.length-1];r.x=n.mouseLocation.handles.start.x,r.y=n.mouseLocation.handles.start.y}}(e,t)};var r,a=n("./imageTools/freehand.js"),i=(r=n("./util/freehand/freeHandIntersect.js"))&&r.__esModule?r:{default:r}},"./util/freehand/dropObject.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=r.freehand.getConfiguration();return!0===n.movingTextBox?(function(e,t){var n=r.freehand.getConfiguration();n.movingTextBox=!1,t.data[n.currentTool].invalidated=!0,n.currentHandle=0,n.currentTool=-1}(0,t),"textBox"):n.modifying?(function(e,t){var n=r.freehand.getConfiguration(),a=t.data[n.currentTool].handles;if(a.invalidHandlePlacement){var i=n.currentHandle,o=a[i],s=void 0;s=0===i?a[a.length-1]:a[i-1],o.x=n.dragOrigin.x,o.y=n.dragOrigin.y,s.lines[0]=o,a.invalidHandlePlacement=!1}}(0,t),"handle"):null};var r=n("./imageTools/freehand.js")},"./util/freehand/freeHandArea.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=0,r=e.length-1;t=t||1;for(var a=0;a<e.length;a++)n+=(e[r].x+e[a].x)*(e[r].y-e[a].y),r=a;return Math.abs(n*t/2)}},"./util/freehand/freeHandIntersect.js":function(e,t,n){"use strict";function r(e,t,n,r){for(var o=e.length-1,s=0;s<e.length;s++)if(-1===r.indexOf(s)&&-1===r.indexOf(o)){if(a(t,n,i(e[o]),i(e[s])))return!0;o=s}else o=s;return!1}function a(e,t,n,r){var a=!1,i=[o(e,t,n),o(e,t,r),o(n,r,e),o(n,r,t)];return i[0]!==i[1]&&i[2]!==i[3]||(0===i[0]&&s(e,n,t)?a=!0:0===i[1]&&s(e,r,t)?a=!0:0===i[2]&&s(n,e,r)?a=!0:0===i[3]&&s(n,t,r)&&(a=!0),a)}function i(e){return{x:e.x,y:e.y}}function o(e,t,n){var r=(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y);return 0===r?0:r>0?1:2}function s(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}Object.defineProperty(t,"__esModule",{value:!0}),t.default={newHandle:function(e,t){var n=t.length-1;return r(t,i(t[n]),i(e),[n])},end:function(e){var t=e.length-1;return r(e,i(e[t]),i(e[0]),[t,0])},modify:function(e,t){var n=i(e[t]),a=t-1;0===t&&(a=e.length-1);var o=i(e[a]);return!!r(e,n,o,[t,a])||r(e,n,o=i(e[a=t===e.length-1?0:t+1]),[t,a])}}},"./util/freehand/insertOrDelete.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.detail;if(t&&null!==t.handleNearby)!function(e,t){var n=(0,o.getToolState)(e.element,l);if(void 0!==n){var r=t.handleIndex,a=n.data[t.toolIndex];a.handles.length<=3||(r===a.handles.length-1?(a.handles[r-1].lines.pop(),a.handles[r-1].lines.push(a.handles[0])):0===r?(a.handles[a.handles.length-1].lines.pop(),a.handles[a.handles.length-1].lines.push(a.handles[r+1])):(a.handles[r-1].lines.pop(),a.handles[r-1].lines.push(a.handles[r+1])),a.handles.splice(r,1),a.invalidated=!0,a.active=!0,a.highlight=!0,s.default.cornerstone.updateImage(e.element))}}(n,{toolIndex:t.toolIndex,handleIndex:t.handleNearby});else{var r=new a.FreehandLineFinder(n).findLine();r&&function(e,t){var n=(0,o.getToolState)(e.element,l);if(void 0!==n){var r=n.data[t.toolIndex],a=function(e){for(var t=e.handleIndexArray,n=1/0,r=t.includes(0),a=0;a<t.length;a++){var i=t[a];0!==i&&i<n&&(n=i)}return r&&1===n&&(n=0),++n}(t);if(a!==1/0){var u=new i.FreehandHandleData(e.currentPoints.image);r.handles.splice(a,0,u),r.handles[a-1].lines.pop(),r.handles[a-1].lines.push(e.currentPoints.image),r.handles[a].lines.push(a===r.handles.length-1?r.handles[0]:r.handles[a+1]),r.active=!0,r.highlight=!0,r.invalidated=!0,s.default.cornerstone.updateImage(e.element)}}}(n,r)}e.preventDefault(),e.stopPropagation()};var r,a=n("./util/freehand/FreehandLineFinder.js"),i=n("./util/freehand/FreehandHandleData.js"),o=n("./stateManagement/toolState.js"),s=(r=n("./externalModules.js"))&&r.__esModule?r:{default:r},l="freehand"},"./util/freehand/keysHeld.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.keyDownCallback=function(e){var t=e.detail,n=i.freehand.getConfiguration(),r=t.keyCode,s=!1;r===o.CTRL&&(n.keyDown.ctrl=!0,s=!0),r===o.SHIFT&&(n.keyDown.shift=!0),r===o.ALT&&(n.keyDown.alt=!0),s&&a.default.cornerstone.updateImage(t.element)},t.keyUpCallback=function(e){var t=e.detail,n=i.freehand.getConfiguration(),r=t.keyCode,s=!1;r===o.CTRL&&(n.keyDown.ctrl=!1,s=!0),r===o.SHIFT&&(n.keyDown.shift=!1),r===o.ALT&&(n.keyDown.alt=!1),s&&a.default.cornerstone.updateImage(t.element)};var r,a=(r=n("./externalModules.js"))&&r.__esModule?r:{default:r},i=n("./imageTools/freehand.js"),o={SHIFT:16,CTRL:17,ALT:18}},"./util/freehand/pointInFreehand.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n=!1,r=e.length-1,a=0;a<e.length;a++)void 0,void 0,void 0,d=(s=e[r]).y,!(!((u=(o=e[a]).y)<(l=(i=t).y)&&l<d||d<l&&l<u)||!function(e,t,n){if(t.x>e.x&&n.x>e.x)return!0;if(t.x===n.x)return e.x<t.x;if(t.x>n.x){var r=t;t=n,n=r}var a=function(e,t,n){var r=(n.y-t.y)/(n.x-t.x);return{value:t.x+r*(e.x-t.x),gradient:r}}(e,t,n);return Math.sign(a.gradient)*e.y>a.value}(i,o,s))&&(n=!n),r=a;var i,o,s,l,u,d;return n}},"./util/getLuminance.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,i){if(!e)throw new Error("getLuminance: parameter element must not be undefined");t=Math.round(t),n=Math.round(n);var o=a.default.cornerstone.getEnabledElement(e).image,s=[],l=0,u=o.getPixelData(),d=void 0,c=void 0,f=void 0;if(o.color)for(c=0;c<i;c++)for(f=0;f<r;f++)s[l++]=.2126*u[d=4*((c+n)*o.columns+(f+t))]+.7152*u[d+1]+.0722*u[d+2];else for(c=0;c<i;c++)for(f=0;f<r;f++)s[l++]=u[d=(c+n)*o.columns+(f+t)]*o.slope+o.intercept;return s};var r,a=(r=n("./externalModules.js"))&&r.__esModule?r:{default:r}},"./util/getMaxSimultaneousRequests.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=void 0,a={default:6,IE:{9:6,10:8,default:8},Firefox:{default:6},Opera:{10:8,11:6,12:6,default:6},Chrome:{default:6},Safari:{default:6}};function i(){var e=navigator.userAgent,t=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],n=void 0;return/trident/i.test(t[1])?"IE "+((n=/\brv[ :]+(\d+)/g.exec(e)||[])[1]||""):"Chrome"===t[1]&&null!==(n=e.match(/\b(OPR|Edge)\/(\d+)/))?n.slice(1).join(" ").replace("OPR","Opera"):(t=t[2]?[t[1],t[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(n=e.match(/version\/(\d+)/i))&&t.splice(1,1,n[1]),t.join(" "))}function o(){var e=i().split(" "),t=e[1],n=a[e[0]];return n?n[t]?n[t]:n.default:a.default}t.getDefaultSimultaneousRequests=o,t.getMaxSimultaneousRequests=function(){return r||o()},t.setMaxSimultaneousRequests=function(e){r=e},t.getBrowserInfo=i,t.isMobileDevice=function(){return new RegExp("Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini").test(navigator.userAgent)}},"./util/getRGBPixels.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,i){if(!e)throw new Error("getRGBPixels: parameter element must not be undefined");t=Math.round(t),n=Math.round(n);var o=a.default.cornerstone.getEnabledElement(e),s=[],l=0,u=o.image.getPixelData(),d=void 0,c=void 0,f=void 0;if(o.image.color)for(c=0;c<i;c++)for(f=0;f<r;f++){var h=u[1+(d=4*((c+n)*o.image.columns+(f+t)))],p=u[d+2],m=u[d+3];s[l++]=u[d],s[l++]=h,s[l++]=p,s[l++]=m}return s};var r,a=(r=n("./externalModules.js"))&&r.__esModule?r:{default:r}},"./util/isMouseButtonEnabled.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return 0!=(t&1<<e-1)}},"./util/lineSegDistance.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){var i=a.default.cornerstone,o={start:i.pixelToCanvas(e,t),end:i.pixelToCanvas(e,n)};return a.default.cornerstoneMath.lineSegment.distanceToPoint(o,r)};var r,a=(r=n("./externalModules.js"))&&r.__esModule?r:{default:r}},"./util/makeUnselectable.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.style.webkitUserSelect="none",e.style.webkitTouchCallout="none",e.style.mozUserSelect="none",e.style.msUserSelect="none",e.style.oUserSelect="none",e.style.khtmlUserSelect="none",e.style.userSelect="none",e.unselectable="on",e.oncontextmenu=function(){return!1},!0===t&&(e.style.pointerEvents="none")}},"./util/pointInEllipse.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.width/2,r=e.height/2;if(n<=0||r<=0)return!1;var a=t.x-(e.left+n),i=t.y-(e.top+r);return a*a/(n*n)+i*i/(r*r)<=1}},"./util/pointInsideBoundingBox.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e.boundingBox)return a.default.cornerstoneMath.point.insideRect(t,e.boundingBox)};var r,a=(r=n("./externalModules.js"))&&r.__esModule?r:{default:r}},"./util/pointProjector.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.projectPatientPointToImagePlane=function(e,t){var n=(0,a.default)(t.rowCosines),r=(0,a.default)(t.columnCosines),i=(0,a.default)(t.imagePositionPatient),o=e.clone().sub(i);return{x:n.dot(o)/t.columnPixelSpacing,y:r.dot(o)/t.rowPixelSpacing}},t.imagePointToPatientPoint=o,t.planePlaneIntersection=function(e,t){var n=(0,a.default)(e.rowCosines),i=(0,a.default)(e.columnCosines),s=(0,a.default)(e.imagePositionPatient),l=(0,a.default)(t.rowCosines),u=(0,a.default)(t.columnCosines),d=(0,a.default)(t.imagePositionPatient),c=n.clone().cross(i),f=new r.default.cornerstoneMath.Plane;f.setFromNormalAndCoplanarPoint(c,s);var h=l.clone().cross(u),p=new r.default.cornerstoneMath.Plane;p.setFromNormalAndCoplanarPoint(h,d);var m=p.clone().intersectPlane(f),g=m.origin,v=m.direction,y=o({x:t.columns,y:t.rows},t),b=d.distanceTo(y),w=new r.default.cornerstoneMath.Line3;w.start=g,w.end=g.clone().add(v.multiplyScalar(b));var x=function(e,t){var n=[];return Object.keys(t).forEach(function(r){var a=e.intersectLine(t[r]);a&&n.push(a)}),n}(w,function(e){var t=o({x:0,y:0},e),n=o({x:e.columns,y:0},e),a=o({x:0,y:e.rows},e),i=o({x:e.columns,y:e.rows},e);return{top:new r.default.cornerstoneMath.Line3(t,n),left:new r.default.cornerstoneMath.Line3(t,a),right:new r.default.cornerstoneMath.Line3(n,i),bottom:new r.default.cornerstoneMath.Line3(a,i)}}(t));if(2===x.length)return{start:x[0],end:x[1]}};var r=i(n("./externalModules.js")),a=i(n("./util/convertToVector3.js"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=(0,a.default)(t.rowCosines),r=(0,a.default)(t.columnCosines),i=(0,a.default)(t.imagePositionPatient),o=n.clone().multiplyScalar(e.x);o.multiplyScalar(t.columnPixelSpacing||1);var s=r.clone().multiplyScalar(e.y);s.multiplyScalar(t.rowPixelSpacing||1);var l=o.add(s);return l.add(i),l}},"./util/roundToDecimal.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}},"./util/scroll.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=(0,a.getToolState)(e,"stack");if(s&&s.data&&s.data.length){var l=s.data[0];l.pending||(l.pending=[]);var u=l.currentImageIdIndex+t;if(n?u%=l.imageIds.length:u=(0,i.default)(u,0,l.imageIds.length-1),o)(0,r.default)(e,u);else{var d={index:u};l.pending.push(d),function e(t,n,a){if(t.pending[0]===n){if(t.currentImageIdIndex===n.index)return t.pending.splice(t.pending.indexOf(n),1),void(t.pending.length>0&&e(t,t.pending[0],a));a.addEventListener(external.cornerstone.EVENTS.NEW_IMAGE,function e(i){t.imageIds.indexOf(i.detail.image.imageId)===n.index&&(t.pending.splice(t.pending.indexOf(n),1),a.removeEventListener(external.cornerstone.EVENTS.NEW_IMAGE,e),t.pending.length>0&&function e(t,n,a){if(t.pending[0]===n){if(t.currentImageIdIndex===n.index)return t.pending.splice(t.pending.indexOf(n),1),void(t.pending.length>0&&e(t,t.pending[0],a));a.addEventListener(external.cornerstone.EVENTS.NEW_IMAGE,function r(i){t.imageIds.indexOf(i.detail.image.imageId)===n.index&&(t.pending.splice(t.pending.indexOf(n),1),a.removeEventListener(external.cornerstone.EVENTS.NEW_IMAGE,r),t.pending.length>0&&e(t,t.pending[0],a))}),(0,r.default)(a,n.index)}}(t,t.pending[0],a))}),(0,r.default)(a,n.index)}}(l,d,e)}}};var r=o(n("./util/scrollToIndex.js")),a=n("./stateManagement/toolState.js"),i=o(n("./util/clip.js"));function o(e){return e&&e.__esModule?e:{default:e}}},"./util/scrollToIndex.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,i.getToolState)(e,"stack");if(n&&n.data&&n.data.length){var u=a.default.cornerstone,d=void 0;if(n.data.length>1){var c=(0,i.getToolState)(e,"stackRenderer");c&&c.data&&c.data.length&&(d=c.data[0])}var f=n.data[0];t<0&&(t+=f.imageIds.length);var h=s.default.getStartLoadHandler(),p=s.default.getEndLoadHandler(),m=s.default.getErrorLoadingHandler();if(t!==f.currentImageIdIndex){h&&h(e);var g={newImageIdIndex:t,direction:t-f.currentImageIdIndex};f.currentImageIdIndex=t;var v=f.imageIds[t];(Boolean(f.preventCache)?u.loadImage(v):u.loadAndCacheImage(v)).then(function(r){if(f.currentImageIdIndex===t){try{u.getEnabledElement(e)}catch(a){return}d?(d.currentImageIdIndex=t,d.render(e,n.data)):u.displayImage(e,r),p&&p(e,r)}},function(n){m&&m(e,f.imageIds[t],n)}),o.default.startGrabbing(),(0,l.default)(e,r.default.STACK_SCROLL,g)}}};var r=u(n("./events.js")),a=u(n("./externalModules.js")),i=n("./stateManagement/toolState.js"),o=u(n("./requestPool/requestPoolManager.js")),s=u(n("./stateManagement/loadHandlerManager.js")),l=u(n("./util/triggerEvent.js"));function u(e){return e&&e.__esModule?e:{default:e}}},"./util/setContextToDisplayFontSize.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return a.default.cornerstone.setToPixelCoordinateSystem(e,t,.1),{fontSize:n/e.viewport.scale/.1,lineHeight:n/e.viewport.scale/.1,fontScale:.1}};var r,a=(r=n("./externalModules.js"))&&r.__esModule?r:{default:r}},"./util/triggerEvent.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=void 0;return"function"==typeof window.CustomEvent?r=new CustomEvent(t,{detail:n,cancelable:!0}):(r=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),e.dispatchEvent(r)}},"./version.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="2.4.0"}})}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("dicom-parser",[],t):"object"==typeof exports?exports["dicom-parser"]=t():e.dicomParser=t()}(this,function(){return function(e){var t=this.webpackHotUpdate;this.webpackHotUpdate=function(e,n){!function(e,t){if(x[e]&&w[e]){for(var n in w[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(m[n]=t[n]);0==--v&&0===y&&j()}}(e,n),t&&t(e,n)};var n,r=!0,a="724db93d22d12b1c5d76",i=1e4,o={},s=[],l=[];function u(e){var t=C[e];if(!t)return O;var r=function(r){return t.hot.active?(C[r]?-1===C[r].parents.indexOf(e)&&C[r].parents.push(e):(s=[e],n=r),-1===t.children.indexOf(r)&&t.children.push(r)):(console.warn("[HMR] unexpected require("+r+") from disposed module "+e),s=[]),O(r)},a=function(e){return{configurable:!0,enumerable:!0,get:function(){return O[e]},set:function(t){O[e]=t}}};for(var i in O)Object.prototype.hasOwnProperty.call(O,i)&&"e"!==i&&Object.defineProperty(r,i,a(i));return r.e=function(e){return"ready"===f&&h("prepare"),y++,O.e(e).then(t,function(e){throw t(),e});function t(){y--,"prepare"===f&&(b[e]||T(e),0===y&&0===v&&j())}},r}function d(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:n!==e,active:!0,accept:function(e,n){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._acceptedDependencies[e[r]]=n||function(){};else t._acceptedDependencies[e]=n||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:E,apply:S,status:function(e){if(!e)return f;c.push(e)},addStatusHandler:function(e){c.push(e)},removeStatusHandler:function(e){var t=c.indexOf(e);t>=0&&c.splice(t,1)},data:o[e]};return n=void 0,t}var c=[],f="idle";function h(e){f=e;for(var t=0;t<c.length;t++)c[t].call(null,e)}var p,m,g,v=0,y=0,b={},w={},x={};function _(e){return+e+""===e?+e:e}function E(e){if("idle"!==f)throw new Error("check() is only allowed in idle status");return r=e,h("check"),(t=i,t=t||1e4,new Promise(function(e,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var r=new XMLHttpRequest,i=O.p+""+a+".hot-update.json";r.open("GET",i,!0),r.timeout=t,r.send(null)}catch(o){return n(o)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)n(new Error("Manifest request to "+i+" timed out."));else if(404===r.status)e();else if(200!==r.status&&304!==r.status)n(new Error("Manifest request to "+i+" failed."));else{try{var t=JSON.parse(r.responseText)}catch(a){return void n(a)}e(t)}}})).then(function(e){if(!e)return h("idle"),null;w={},b={},x=e.c,g=e.h,h("prepare");var t=new Promise(function(e,t){p={resolve:e,reject:t}});return m={},T("dicomParser"),"prepare"===f&&0===y&&0===v&&j(),t});var t}function T(e){x[e]?(w[e]=!0,v++,function(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("script");n.charset="utf-8",n.src=O.p+""+e+"."+a+".hot-update.js",t.appendChild(n)}(e)):b[e]=!0}function j(){h("ready");var e=p;if(p=null,e)if(r)Promise.resolve().then(function(){return S(r)}).then(function(t){e.resolve(t)},function(t){e.reject(t)});else{var t=[];for(var n in m)Object.prototype.hasOwnProperty.call(m,n)&&t.push(_(n));e.resolve(t)}}function S(t){if("ready"!==f)throw new Error("apply() is only allowed in ready status");var n,r,i,l,u;function d(e){for(var t=[e],n={},r=t.slice().map(function(e){return{chain:[e],id:e}});r.length>0;){var a=r.pop(),i=a.id,o=a.chain;if((l=C[i])&&!l.hot._selfAccepted){if(l.hot._selfDeclined)return{type:"self-declined",chain:o,moduleId:i};if(l.hot._main)return{type:"unaccepted",chain:o,moduleId:i};for(var s=0;s<l.parents.length;s++){var u=l.parents[s],d=C[u];if(d){if(d.hot._declinedDependencies[i])return{type:"declined",chain:o.concat([u]),moduleId:i,parentId:u};-1===t.indexOf(u)&&(d.hot._acceptedDependencies[i]?(n[u]||(n[u]=[]),c(n[u],[i])):(delete n[u],t.push(u),r.push({chain:o.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}t=t||{};var p={},v=[],y={},b=function(){console.warn("[HMR] unexpected require("+E.moduleId+") to disposed module")};for(var w in m)if(Object.prototype.hasOwnProperty.call(m,w)){var E;u=_(w);var T=!1,j=!1,S=!1,P="";switch((E=m[w]?d(u):{type:"disposed",moduleId:w}).chain&&(P="\nUpdate propagation: "+E.chain.join(" -> ")),E.type){case"self-declined":t.onDeclined&&t.onDeclined(E),t.ignoreDeclined||(T=new Error("Aborted because of self decline: "+E.moduleId+P));break;case"declined":t.onDeclined&&t.onDeclined(E),t.ignoreDeclined||(T=new Error("Aborted because of declined dependency: "+E.moduleId+" in "+E.parentId+P));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(E),t.ignoreUnaccepted||(T=new Error("Aborted because "+u+" is not accepted"+P));break;case"accepted":t.onAccepted&&t.onAccepted(E),j=!0;break;case"disposed":t.onDisposed&&t.onDisposed(E),S=!0;break;default:throw new Error("Unexception type "+E.type)}if(T)return h("abort"),Promise.reject(T);if(j)for(u in y[u]=m[u],c(v,E.outdatedModules),E.outdatedDependencies)Object.prototype.hasOwnProperty.call(E.outdatedDependencies,u)&&(p[u]||(p[u]=[]),c(p[u],E.outdatedDependencies[u]));S&&(c(v,[E.moduleId]),y[u]=b)}var I,M=[];for(r=0;r<v.length;r++)C[u=v[r]]&&C[u].hot._selfAccepted&&M.push({module:u,errorHandler:C[u].hot._selfAccepted});h("dispose"),Object.keys(x).forEach(function(e){!1===x[e]&&function(e){delete installedChunks[e]}(e)});for(var D,L=v.slice();L.length>0;)if(u=L.pop(),l=C[u]){var A={},k=l.hot._disposeHandlers;for(i=0;i<k.length;i++)(n=k[i])(A);for(o[u]=A,l.hot.active=!1,delete C[u],delete p[u],i=0;i<l.children.length;i++){var R=C[l.children[i]];R&&(I=R.parents.indexOf(u))>=0&&R.parents.splice(I,1)}}for(u in p)if(Object.prototype.hasOwnProperty.call(p,u)&&(l=C[u]))for(D=p[u],i=0;i<D.length;i++)(I=l.children.indexOf(D[i]))>=0&&l.children.splice(I,1);for(u in h("apply"),a=g,y)Object.prototype.hasOwnProperty.call(y,u)&&(e[u]=y[u]);var U=null;for(u in p)if(Object.prototype.hasOwnProperty.call(p,u)&&(l=C[u])){D=p[u];var N=[];for(r=0;r<D.length;r++)if(n=l.hot._acceptedDependencies[D[r]]){if(-1!==N.indexOf(n))continue;N.push(n)}for(r=0;r<N.length;r++){n=N[r];try{n(D)}catch(H){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:u,dependencyId:D[r],error:H}),t.ignoreErrored||U||(U=H)}}}for(r=0;r<M.length;r++){var B=M[r];s=[u=B.module];try{O(u)}catch(H){if("function"==typeof B.errorHandler)try{B.errorHandler(H)}catch(F){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:u,error:F,originalError:H}),t.ignoreErrored||U||(U=F),U||(U=H)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:u,error:H}),t.ignoreErrored||U||(U=H)}}return U?(h("fail"),Promise.reject(U)):(h("idle"),new Promise(function(e){e(v)}))}var C={};function O(t){if(C[t])return C[t].exports;var n=C[t]={i:t,l:!1,exports:{},hot:d(t),parents:(l=s,s=[],l),children:[]};return e[t].call(n.exports,n,n.exports,u(t)),n.l=!0,n.exports}return O.m=e,O.c=C,O.d=function(e,t,n){O.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},O.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},O.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return O.d(t,"a",t),t},O.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},O.p="",O.h=function(){return a},u("./index.js")(O.s="./index.js")}({"../node_modules/assert/assert.js":function(e,t,n){"use strict";(function(t){function r(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,a=0,i=Math.min(n,r);a<i;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0}function a(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var i=n("../node_modules/util/util.js"),o=Object.prototype.hasOwnProperty,s=Array.prototype.slice,l="foo"===(function(){}).name;function u(e){return Object.prototype.toString.call(e)}function d(e){return!a(e)&&"function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer)))}var c=e.exports=v,f=/\s*function\s+([^\(\s]*)\s*/;function h(e){if(i.isFunction(e)){if(l)return e.name;var t=e.toString().match(f);return t&&t[1]}}function p(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function m(e){if(l||!i.isFunction(e))return i.inspect(e);var t=h(e);return"[Function"+(t?": "+t:"")+"]"}function g(e,t,n,r,a){throw new c.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:a})}function v(e,t){e||g(e,!0,t,"==",c.ok)}function y(e,t,n,o){if(e===t)return!0;if(a(e)&&a(t))return 0===r(e,t);if(i.isDate(e)&&i.isDate(t))return e.getTime()===t.getTime();if(i.isRegExp(e)&&i.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(d(e)&&d(t)&&u(e)===u(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(a(e)!==a(t))return!1;var l=(o=o||{actual:[],expected:[]}).actual.indexOf(e);return-1!==l&&l===o.expected.indexOf(t)||(o.actual.push(e),o.expected.push(t),function(e,t,n,r){if(null==e||null==t)return!1;if(i.isPrimitive(e)||i.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var a=b(e),o=b(t);if(a&&!o||!a&&o)return!1;if(a)return y(e=s.call(e),t=s.call(t),n);var l,u,d=_(e),c=_(t);if(d.length!==c.length)return!1;for(d.sort(),c.sort(),u=d.length-1;u>=0;u--)if(d[u]!==c[u])return!1;for(u=d.length-1;u>=0;u--)if(!y(e[l=d[u]],t[l],n,r))return!1;return!0}(e,t,n,o))}return n?e===t:e==t}function b(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function w(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(n){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function x(e,t,n,r){var a;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),a=function(e){var t;try{e()}catch(n){t=n}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!a&&g(a,n,"Missing expected exception"+r);var o="string"==typeof r,s=!e&&a&&!n;if((!e&&i.isError(a)&&o&&w(a,n)||s)&&g(a,n,"Got unwanted exception"+r),e&&a&&n&&!w(a,n)||!e&&a)throw a}c.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=p(m(this.actual),128)+" "+this.operator+" "+p(m(this.expected),128),this.generatedMessage=!0);var t=e.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,a=h(t),i=r.indexOf("\n"+a);if(i>=0){var o=r.indexOf("\n",i+1);r=r.substring(o+1)}this.stack=r}}},i.inherits(c.AssertionError,Error),c.fail=g,c.ok=v,c.equal=function(e,t,n){e!=t&&g(e,t,n,"==",c.equal)},c.notEqual=function(e,t,n){e==t&&g(e,t,n,"!=",c.notEqual)},c.deepEqual=function(e,t,n){y(e,t,!1)||g(e,t,n,"deepEqual",c.deepEqual)},c.deepStrictEqual=function(e,t,n){y(e,t,!0)||g(e,t,n,"deepStrictEqual",c.deepStrictEqual)},c.notDeepEqual=function(e,t,n){y(e,t,!1)&&g(e,t,n,"notDeepEqual",c.notDeepEqual)},c.notDeepStrictEqual=function e(t,n,r){y(t,n,!0)&&g(t,n,r,"notDeepStrictEqual",e)},c.strictEqual=function(e,t,n){e!==t&&g(e,t,n,"===",c.strictEqual)},c.notStrictEqual=function(e,t,n){e===t&&g(e,t,n,"!==",c.notStrictEqual)},c.throws=function(e,t,n){x(!0,e,t,n)},c.doesNotThrow=function(e,t,n){x(!1,e,t,n)},c.ifError=function(e){if(e)throw e};var _=Object.keys||function(e){var t=[];for(var n in e)o.call(e,n)&&t.push(n);return t}}).call(this,n("../node_modules/webpack/buildin/global.js"))},"../node_modules/base64-js/index.js":function(e,t,n){"use strict";t.byteLength=function(e){return 3*e.length/4-u(e)},t.toByteArray=function(e){var t,n,r,o,s,l=e.length;o=u(e),s=new i(3*l/4-o),n=o>0?l-4:l;var d=0;for(t=0;t<n;t+=4)r=a[e.charCodeAt(t)]<<18|a[e.charCodeAt(t+1)]<<12|a[e.charCodeAt(t+2)]<<6|a[e.charCodeAt(t+3)],s[d++]=r>>16&255,s[d++]=r>>8&255,s[d++]=255&r;return 2===o?(r=a[e.charCodeAt(t)]<<2|a[e.charCodeAt(t+1)]>>4,s[d++]=255&r):1===o&&(r=a[e.charCodeAt(t)]<<10|a[e.charCodeAt(t+1)]<<4|a[e.charCodeAt(t+2)]>>2,s[d++]=r>>8&255,s[d++]=255&r),s},t.fromByteArray=function(e){for(var t,n=e.length,a=n%3,i="",o=[],s=0,l=n-a;s<l;s+=16383)o.push(d(e,s,s+16383>l?l:s+16383));return 1===a?(i+=r[(t=e[n-1])>>2],i+=r[t<<4&63],i+="=="):2===a&&(i+=r[(t=(e[n-2]<<8)+e[n-1])>>10],i+=r[t>>4&63],i+=r[t<<2&63],i+="="),o.push(i),o.join("")};for(var r=[],a=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=o.length;s<l;++s)r[s]=o[s],a[o.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function d(e,t,n){for(var a,i=[],o=t;o<n;o+=3)i.push(r[(a=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]))>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return i.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},"../node_modules/browserify-zlib/lib/binding.js":function(e,t,n){"use strict";(function(e,r){var a=n("../node_modules/assert/assert.js"),i=n("../node_modules/pako/lib/zlib/zstream.js"),o=n("../node_modules/pako/lib/zlib/deflate.js"),s=n("../node_modules/pako/lib/zlib/inflate.js"),l=n("../node_modules/pako/lib/zlib/constants.js");for(var u in l)t[u]=l[u];function d(e){if("number"!=typeof e||e<t.DEFLATE||e>t.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=e,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7,d.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,a(this.init_done,"close before init"),a(this.mode<=t.UNZIP),this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?o.deflateEnd(this.strm):this.mode!==t.INFLATE&&this.mode!==t.GUNZIP&&this.mode!==t.INFLATERAW&&this.mode!==t.UNZIP||s.inflateEnd(this.strm),this.mode=t.NONE,this.dictionary=null)},d.prototype.write=function(e,t,n,r,a,i,o){return this._write(!0,e,t,n,r,a,i,o)},d.prototype.writeSync=function(e,t,n,r,a,i,o){return this._write(!1,e,t,n,r,a,i,o)},d.prototype._write=function(n,i,o,s,l,u,d,c){if(a.equal(arguments.length,8),a(this.init_done,"write before init"),a(this.mode!==t.NONE,"already finalized"),a.equal(!1,this.write_in_progress,"write already in progress"),a.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,a.equal(!1,void 0===i,"must provide flush value"),this.write_in_progress=!0,i!==t.Z_NO_FLUSH&&i!==t.Z_PARTIAL_FLUSH&&i!==t.Z_SYNC_FLUSH&&i!==t.Z_FULL_FLUSH&&i!==t.Z_FINISH&&i!==t.Z_BLOCK)throw new Error("Invalid flush value");if(null==o&&(o=e.alloc(0),l=0,s=0),this.strm.avail_in=l,this.strm.input=o,this.strm.next_in=s,this.strm.avail_out=c,this.strm.output=u,this.strm.next_out=d,this.flush=i,!n)return this._process(),this._checkError()?this._afterSync():void 0;var f=this;return r.nextTick(function(){f._process(),f._after()}),this},d.prototype._afterSync=function(){var e=this.strm.avail_out,t=this.strm.avail_in;return this.write_in_progress=!1,[t,e]},d.prototype._process=function(){var e=null;switch(this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=o.deflate(this.strm,this.flush);break;case t.UNZIP:switch(this.strm.avail_in>0&&(e=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===e)break;if(31!==this.strm.input[e]){this.mode=t.INFLATE;break}if(this.gzip_id_bytes_read=1,e++,1===this.strm.avail_in)break;case 1:if(null===e)break;139===this.strm.input[e]?(this.gzip_id_bytes_read=2,this.mode=t.GUNZIP):this.mode=t.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:for(this.err=s.inflate(this.strm,this.flush),this.err===t.Z_NEED_DICT&&this.dictionary&&(this.err=s.inflateSetDictionary(this.strm,this.dictionary),this.err===t.Z_OK?this.err=s.inflate(this.strm,this.flush):this.err===t.Z_DATA_ERROR&&(this.err=t.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===t.GUNZIP&&this.err===t.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=s.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},d.prototype._checkError=function(){switch(this.err){case t.Z_OK:case t.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===t.Z_FINISH)return this._error("unexpected end of file"),!1;break;case t.Z_STREAM_END:break;case t.Z_NEED_DICT:return this._error(null==this.dictionary?"Missing dictionary":"Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},d.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,t=this.strm.avail_in;this.write_in_progress=!1,this.callback(t,e),this.pending_close&&this.close()}},d.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},d.prototype.init=function(e,n,r,i,o){a(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),a(e>=8&&e<=15,"invalid windowBits"),a(n>=-1&&n<=9,"invalid compression level"),a(r>=1&&r<=9,"invalid memlevel"),a(i===t.Z_FILTERED||i===t.Z_HUFFMAN_ONLY||i===t.Z_RLE||i===t.Z_FIXED||i===t.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(n,e,r,i,o),this._setDictionary()},d.prototype.params=function(){throw new Error("deflateParams Not supported")},d.prototype.reset=function(){this._reset(),this._setDictionary()},d.prototype._init=function(e,n,r,a,l){switch(this.level=e,this.windowBits=n,this.memLevel=r,this.strategy=a,this.flush=t.Z_NO_FLUSH,this.err=t.Z_OK,this.mode!==t.GZIP&&this.mode!==t.GUNZIP||(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),this.mode!==t.DEFLATERAW&&this.mode!==t.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new i,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=o.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:this.err=s.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==t.Z_OK&&this._error("Init error"),this.dictionary=l,this.write_in_progress=!1,this.init_done=!0},d.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:this.err=o.deflateSetDictionary(this.strm,this.dictionary)}this.err!==t.Z_OK&&this._error("Failed to set dictionary")}},d.prototype._reset=function(){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:case t.GZIP:this.err=o.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:case t.GUNZIP:this.err=s.inflateReset(this.strm)}this.err!==t.Z_OK&&this._error("Failed to reset stream")},t.Zlib=d}).call(this,n("../node_modules/buffer/index.js").Buffer,n("../node_modules/process/browser.js"))},"../node_modules/browserify-zlib/lib/index.js":function(e,t,n){"use strict";(function(e){var r=n("../node_modules/buffer/index.js").Buffer,a=n("../node_modules/stream-browserify/index.js").Transform,i=n("../node_modules/browserify-zlib/lib/binding.js"),o=n("../node_modules/util/util.js"),s=n("../node_modules/assert/assert.js").ok,l=n("../node_modules/buffer/index.js").kMaxLength,u="Cannot create final Buffer. It would be larger than 0x"+l.toString(16)+" bytes";i.Z_MIN_WINDOWBITS=8,i.Z_MAX_WINDOWBITS=15,i.Z_DEFAULT_WINDOWBITS=15,i.Z_MIN_CHUNK=64,i.Z_MAX_CHUNK=1/0,i.Z_DEFAULT_CHUNK=16384,i.Z_MIN_MEMLEVEL=1,i.Z_MAX_MEMLEVEL=9,i.Z_DEFAULT_MEMLEVEL=8,i.Z_MIN_LEVEL=-1,i.Z_MAX_LEVEL=9,i.Z_DEFAULT_LEVEL=i.Z_DEFAULT_COMPRESSION;for(var d=Object.keys(i),c=0;c<d.length;c++){var f=d[c];f.match(/^Z/)&&Object.defineProperty(t,f,{enumerable:!0,value:i[f],writable:!1})}for(var h={Z_OK:i.Z_OK,Z_STREAM_END:i.Z_STREAM_END,Z_NEED_DICT:i.Z_NEED_DICT,Z_ERRNO:i.Z_ERRNO,Z_STREAM_ERROR:i.Z_STREAM_ERROR,Z_DATA_ERROR:i.Z_DATA_ERROR,Z_MEM_ERROR:i.Z_MEM_ERROR,Z_BUF_ERROR:i.Z_BUF_ERROR,Z_VERSION_ERROR:i.Z_VERSION_ERROR},p=Object.keys(h),m=0;m<p.length;m++){var g=p[m];h[h[g]]=g}function v(e,t,n){var a=[],i=0;function o(){for(var t;null!==(t=e.read());)a.push(t),i+=t.length;e.once("readable",o)}function s(){var t,o=null;i>=l?o=new RangeError(u):t=r.concat(a,i),a=[],e.close(),n(o,t)}e.on("error",function(t){e.removeListener("end",s),e.removeListener("readable",o),n(t)}),e.on("end",s),e.end(t),o()}function y(e,t){if("string"==typeof t&&(t=r.from(t)),!r.isBuffer(t))throw new TypeError("Not a string or buffer");return e._processChunk(t,e._finishFlushFlag)}function b(e){if(!(this instanceof b))return new b(e);C.call(this,e,i.DEFLATE)}function w(e){if(!(this instanceof w))return new w(e);C.call(this,e,i.INFLATE)}function x(e){if(!(this instanceof x))return new x(e);C.call(this,e,i.GZIP)}function _(e){if(!(this instanceof _))return new _(e);C.call(this,e,i.GUNZIP)}function E(e){if(!(this instanceof E))return new E(e);C.call(this,e,i.DEFLATERAW)}function T(e){if(!(this instanceof T))return new T(e);C.call(this,e,i.INFLATERAW)}function j(e){if(!(this instanceof j))return new j(e);C.call(this,e,i.UNZIP)}function S(e){return e===i.Z_NO_FLUSH||e===i.Z_PARTIAL_FLUSH||e===i.Z_SYNC_FLUSH||e===i.Z_FULL_FLUSH||e===i.Z_FINISH||e===i.Z_BLOCK}function C(e,n){var o=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||t.Z_DEFAULT_CHUNK,a.call(this,e),e.flush&&!S(e.flush))throw new Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!S(e.finishFlush))throw new Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||i.Z_NO_FLUSH,this._finishFlushFlag=void 0!==e.finishFlush?e.finishFlush:i.Z_FINISH,e.chunkSize&&(e.chunkSize<t.Z_MIN_CHUNK||e.chunkSize>t.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<t.Z_MIN_WINDOWBITS||e.windowBits>t.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<t.Z_MIN_LEVEL||e.level>t.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<t.Z_MIN_MEMLEVEL||e.memLevel>t.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=t.Z_FILTERED&&e.strategy!=t.Z_HUFFMAN_ONLY&&e.strategy!=t.Z_RLE&&e.strategy!=t.Z_FIXED&&e.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!r.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new i.Zlib(n);var s=this;this._hadError=!1,this._handle.onerror=function(e,n){O(s),s._hadError=!0;var r=new Error(e);r.errno=n,r.code=t.codes[n],s.emit("error",r)};var l=t.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(l=e.level);var u=t.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(u=e.strategy),this._handle.init(e.windowBits||t.Z_DEFAULT_WINDOWBITS,l,e.memLevel||t.Z_DEFAULT_MEMLEVEL,u,e.dictionary),this._buffer=r.allocUnsafe(this._chunkSize),this._offset=0,this._level=l,this._strategy=u,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!o._handle},configurable:!0,enumerable:!0})}function O(t,n){n&&e.nextTick(n),t._handle&&(t._handle.close(),t._handle=null)}function P(e){e.emit("close")}Object.defineProperty(t,"codes",{enumerable:!0,value:Object.freeze(h),writable:!1}),t.Deflate=b,t.Inflate=w,t.Gzip=x,t.Gunzip=_,t.DeflateRaw=E,t.InflateRaw=T,t.Unzip=j,t.createDeflate=function(e){return new b(e)},t.createInflate=function(e){return new w(e)},t.createDeflateRaw=function(e){return new E(e)},t.createInflateRaw=function(e){return new T(e)},t.createGzip=function(e){return new x(e)},t.createGunzip=function(e){return new _(e)},t.createUnzip=function(e){return new j(e)},t.deflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),v(new b(t),e,n)},t.deflateSync=function(e,t){return y(new b(t),e)},t.gzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),v(new x(t),e,n)},t.gzipSync=function(e,t){return y(new x(t),e)},t.deflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),v(new E(t),e,n)},t.deflateRawSync=function(e,t){return y(new E(t),e)},t.unzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),v(new j(t),e,n)},t.unzipSync=function(e,t){return y(new j(t),e)},t.inflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),v(new w(t),e,n)},t.inflateSync=function(e,t){return y(new w(t),e)},t.gunzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),v(new _(t),e,n)},t.gunzipSync=function(e,t){return y(new _(t),e)},t.inflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),v(new T(t),e,n)},t.inflateRawSync=function(e,t){return y(new T(t),e)},o.inherits(C,a),C.prototype.params=function(n,r,a){if(n<t.Z_MIN_LEVEL||n>t.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+n);if(r!=t.Z_FILTERED&&r!=t.Z_HUFFMAN_ONLY&&r!=t.Z_RLE&&r!=t.Z_FIXED&&r!=t.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+r);if(this._level!==n||this._strategy!==r){var o=this;this.flush(i.Z_SYNC_FLUSH,function(){s(o._handle,"zlib binding closed"),o._handle.params(n,r),o._hadError||(o._level=n,o._strategy=r,a&&a())})}else e.nextTick(a)},C.prototype.reset=function(){return s(this._handle,"zlib binding closed"),this._handle.reset()},C.prototype._flush=function(e){this._transform(r.alloc(0),"",e)},C.prototype.flush=function(t,n){var a=this,o=this._writableState;("function"==typeof t||void 0===t&&!n)&&(n=t,t=i.Z_FULL_FLUSH),o.ended?n&&e.nextTick(n):o.ending?n&&this.once("end",n):o.needDrain?n&&this.once("drain",function(){return a.flush(t,n)}):(this._flushFlag=t,this.write(r.alloc(0),"",n))},C.prototype.close=function(t){O(this,t),e.nextTick(P,this)},C.prototype._transform=function(e,t,n){var a,o=this._writableState,s=(o.ending||o.ended)&&(!e||o.length===e.length);return null===e||r.isBuffer(e)?this._handle?(s?a=this._finishFlushFlag:(a=this._flushFlag,e.length>=o.length&&(this._flushFlag=this._opts.flush||i.Z_NO_FLUSH)),void this._processChunk(e,a,n)):n(new Error("zlib binding closed")):n(new Error("invalid input"))},C.prototype._processChunk=function(e,t,n){var a=e&&e.length,i=this._chunkSize-this._offset,o=0,d=this,c="function"==typeof n;if(!c){var f,h=[],p=0;this.on("error",function(e){f=e}),s(this._handle,"zlib binding closed");do{var m=this._handle.writeSync(t,e,o,a,this._buffer,this._offset,i)}while(!this._hadError&&y(m[0],m[1]));if(this._hadError)throw f;if(p>=l)throw O(this),new RangeError(u);var g=r.concat(h,p);return O(this),g}s(this._handle,"zlib binding closed");var v=this._handle.write(t,e,o,a,this._buffer,this._offset,i);function y(l,u){if(this&&(this.buffer=null,this.callback=null),!d._hadError){var f=i-u;if(s(f>=0,"have should not go down"),f>0){var m=d._buffer.slice(d._offset,d._offset+f);d._offset+=f,c?d.push(m):(h.push(m),p+=m.length)}if((0===u||d._offset>=d._chunkSize)&&(i=d._chunkSize,d._offset=0,d._buffer=r.allocUnsafe(d._chunkSize)),0===u){if(o+=a-l,a=l,!c)return!0;var g=d._handle.write(t,e,o,a,d._buffer,d._offset,d._chunkSize);return g.callback=y,void(g.buffer=e)}if(!c)return!1;n()}}v.buffer=e,v.callback=y},o.inherits(b,C),o.inherits(w,C),o.inherits(x,C),o.inherits(_,C),o.inherits(E,C),o.inherits(T,C),o.inherits(j,C)}).call(this,n("../node_modules/process/browser.js"))},"../node_modules/buffer/index.js":function(e,t,n){"use strict";(function(e){var r=n("../node_modules/base64-js/index.js"),a=n("../node_modules/ieee754/index.js"),i=n("../node_modules/isarray/index.js");function o(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=f(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),a=(e=s(e,r)).write(t,n);return a!==r&&(e=e.slice(0,a)),e}(e,t,n):function(e,t){if(l.isBuffer(t)){var n=0|h(t.length);return 0===(e=s(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):f(e,t);if("Buffer"===t.type&&i(t.data))return f(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function d(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t){if(d(t),e=s(e,t<0?0:0|h(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|h(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function p(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(e).length;default:if(r)return B(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,a){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:v(e,t,n,r,a);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,r,a){var i,o=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,l/=2,n/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(a){var d=-1;for(i=n;i<s;i++)if(u(e,i)===u(t,-1===d?0:i-d)){if(-1===d&&(d=i),i-d+1===l)return d*o}else-1!==d&&(i-=i-d),d=-1}else for(n+l>s&&(n=s-l),i=n;i>=0;i--){for(var c=!0,f=0;f<l;f++)if(u(e,i+f)!==u(t,f)){c=!1;break}if(c)return i}return-1}function y(e,t,n,r){n=Number(n)||0;var a=e.length-n;r?(r=Number(r))>a&&(r=a):r=a;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}function b(e,t,n,r){return F(B(t,e.length-n),e,n,r)}function w(e,t,n,r){return F(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function x(e,t,n,r){return w(e,t,n,r)}function _(e,t,n,r){return F(H(t),e,n,r)}function E(e,t,n,r){return F(function(e,t){for(var n,r,a=[],i=0;i<e.length&&!((t-=2)<0);++i)r=(n=e.charCodeAt(i))>>8,a.push(n%256),a.push(r);return a}(t,e.length-n),e,n,r)}function T(e,t,n){return r.fromByteArray(0===t&&n===e.length?e:e.slice(t,n))}function j(e,t,n){n=Math.min(e.length,n);for(var r=[],a=t;a<n;){var i,o,s,l,u=e[a],d=null,c=u>239?4:u>223?3:u>191?2:1;if(a+c<=n)switch(c){case 1:u<128&&(d=u);break;case 2:128==(192&(i=e[a+1]))&&(l=(31&u)<<6|63&i)>127&&(d=l);break;case 3:o=e[a+2],128==(192&(i=e[a+1]))&&128==(192&o)&&(l=(15&u)<<12|(63&i)<<6|63&o)>2047&&(l<55296||l>57343)&&(d=l);break;case 4:o=e[a+2],s=e[a+3],128==(192&(i=e[a+1]))&&128==(192&o)&&128==(192&s)&&(l=(15&u)<<18|(63&i)<<12|(63&o)<<6|63&s)>65535&&l<1114112&&(d=l)}null===d?(d=65533,c=1):d>65535&&(r.push((d-=65536)>>>10&1023|55296),d=56320|1023&d),r.push(d),a+=c}return function(e){var t=e.length;if(t<=S)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=S));return n}(r)}t.Buffer=l,t.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=o(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return u(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return function(e,t,n,r){return d(t),t<=0?s(null,t):void 0!==n?"string"==typeof r?s(null,t).fill(n,r):s(null,t).fill(n):s(null,t)}(0,e,t,n)},l.allocUnsafe=function(e){return c(null,e)},l.allocUnsafeSlow=function(e){return c(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,a=0,i=Math.min(n,r);a<i;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=l.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var o=e[n];if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,a),a+=o.length}return r},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?j(this,0,e):(function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,n);case"utf8":case"utf-8":return j(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return O(this,t,n);case"base64":return T(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}).apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,r,a){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),t<0||n>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&t>=n)return 0;if(r>=a)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(a>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(i,o),u=this.slice(r,a),d=e.slice(t,n),c=0;c<s;++c)if(u[c]!==d[c]){i=u[c],o=d[c];break}return i<o?-1:o<i?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return x(this,e,t,n);case"base64":return _(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var S=4096;function C(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}function P(e,t,n){var r,a=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>a)&&(n=a);for(var i="",o=t;o<n;++o)i+=(r=e[o])<16?"0"+r.toString(16):r.toString(16);return i}function I(e,t,n){for(var r=e.slice(t,n),a="",i=0;i<r.length;i+=2)a+=String.fromCharCode(r[i]+256*r[i+1]);return a}function M(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,r,a,i){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function L(e,t,n,r){t<0&&(t=65535+t+1);for(var a=0,i=Math.min(e.length-n,2);a<i;++a)e[n+a]=(t&255<<8*(r?a:1-a))>>>8*(r?a:1-a)}function A(e,t,n,r){t<0&&(t=4294967295+t+1);for(var a=0,i=Math.min(e.length-n,4);a<i;++a)e[n+a]=t>>>8*(r?a:3-a)&255}function k(e,t,n,r,a,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(e,t,n,r,i){return i||k(e,0,n,4),a.write(e,t,n,r,23,4),n+4}function U(e,t,n,r,i){return i||k(e,0,n,8),a.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=l.prototype;else{var a=t-e;n=new l(a,void 0);for(var i=0;i<a;++i)n[i]=this[i+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e],a=1,i=0;++i<t&&(a*=256);)r+=this[e+i]*a;return r},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e+--t],a=1;t>0&&(a*=256);)r+=this[e+--t]*a;return r},l.prototype.readUInt8=function(e,t){return t||M(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||M(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||M(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e],a=1,i=0;++i<t&&(a*=256);)r+=this[e+i]*a;return r>=(a*=128)&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=t,a=1,i=this[e+--r];r>0&&(a*=256);)i+=this[e+--r]*a;return i>=(a*=128)&&(i-=Math.pow(2,8*t)),i},l.prototype.readInt8=function(e,t){return t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||M(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||M(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||M(e,4,this.length),a.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||M(e,4,this.length),a.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||M(e,8,this.length),a.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||M(e,8,this.length),a.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||D(this,e,t,n,Math.pow(2,8*n)-1,0);var a=1,i=0;for(this[t]=255&e;++i<n&&(a*=256);)this[t+i]=e/a&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||D(this,e,t,n,Math.pow(2,8*n)-1,0);var a=n-1,i=1;for(this[t+a]=255&e;--a>=0&&(i*=256);)this[t+a]=e/i&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):A(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):A(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);D(this,e,t,n,a-1,-a)}var i=0,o=1,s=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);D(this,e,t,n,a-1,-a)}var i=n-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):A(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):A(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return R(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return R(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return U(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return U(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var a,i=r-n;if(this===e&&n<t&&t<r)for(a=i-1;a>=0;--a)e[a+t]=this[a+n];else if(i<1e3||!l.TYPED_ARRAY_SUPPORT)for(a=0;a<i;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},l.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var o=l.isBuffer(e)?e:B(new l(e,r).toString()),s=o.length;for(i=0;i<n-t;++i)this[i+t]=o[i%s]}return this};var N=/[^+\/0-9A-Za-z-_]/g;function B(e,t){var n;t=t||1/0;for(var r=e.length,a=null,i=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&i.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&i.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function H(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(N,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function F(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}}).call(this,n("../node_modules/webpack/buildin/global.js"))},"../node_modules/core-util-is/lib/util.js":function(e,t,n){(function(e){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(this,n("../node_modules/buffer/index.js").Buffer)},"../node_modules/events/events.js":function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function a(e){return"object"==typeof e&&null!==e}function i(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,o,s,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var d=new Error('Uncaught, unspecified "error" event. ('+t+")");throw d.context=t,d}if(i(n=this._events[e]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(a(n))for(s=Array.prototype.slice.call(arguments,1),o=(u=n.slice()).length,l=0;l<o;l++)u[l].apply(this,s);return!0},n.prototype.on=n.prototype.addListener=function(e,t){var o;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(o=i(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var n=!1;function a(){this.removeListener(e,a),n||(n=!0,t.apply(this,arguments))}return a.listener=t,this.on(e,a),this},n.prototype.removeListener=function(e,t){var n,i,o,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(n=this._events[e]).length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(n)){for(s=o;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},"../node_modules/ieee754/index.js":function(e,t){t.read=function(e,t,n,r,a){var i,o,s=8*a-r-1,l=(1<<s)-1,u=l>>1,d=-7,c=n?a-1:0,f=n?-1:1,h=e[t+c];for(c+=f,i=h&(1<<-d)-1,h>>=-d,d+=s;d>0;i=256*i+e[t+c],c+=f,d-=8);for(o=i&(1<<-d)-1,i>>=-d,d+=r;d>0;o=256*o+e[t+c],c+=f,d-=8);if(0===i)i=1-u;else{if(i===l)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),i-=u}return(h?-1:1)*o*Math.pow(2,i-r)},t.write=function(e,t,n,r,a,i){var o,s,l,u=8*i-a-1,d=(1<<u)-1,c=d>>1,f=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=d):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+c>=1?f/l:f*Math.pow(2,1-c))*l>=2&&(o++,l/=2),o+c>=d?(s=0,o=d):o+c>=1?(s=(t*l-1)*Math.pow(2,a),o+=c):(s=t*Math.pow(2,c-1)*Math.pow(2,a),o=0));a>=8;e[n+h]=255&s,h+=p,s/=256,a-=8);for(o=o<<a|s,u+=a;u>0;e[n+h]=255&o,h+=p,o/=256,u-=8);e[n+h-p]|=128*m}},"../node_modules/inherits/inherits_browser.js":function(e,t){e.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},"../node_modules/isarray/index.js":function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},"../node_modules/pako/lib/utils/common.js":function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)a(n,r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,a){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),a);else for(var i=0;i<r;i++)e[a+i]=t[n+i]},flattenChunks:function(e){var t,n,r,a,i,o;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(o=new Uint8Array(r),a=0,t=0,n=e.length;t<n;t++)o.set(i=e[t],a),a+=i.length;return o}},o={arraySet:function(e,t,n,r,a){for(var i=0;i<r;i++)e[a+i]=t[n+i]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,i)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,o))},t.setTyped(r)},"../node_modules/pako/lib/zlib/adler32.js":function(e,t,n){"use strict";e.exports=function(e,t,n,r){for(var a=65535&e|0,i=e>>>16&65535|0,o=0;0!==n;){n-=o=n>2e3?2e3:n;do{i=i+(a=a+t[r++]|0)|0}while(--o);a%=65521,i%=65521}return a|i<<16|0}},"../node_modules/pako/lib/zlib/constants.js":function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},"../node_modules/pako/lib/zlib/crc32.js":function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,n,a){var i=r,o=a+n;e^=-1;for(var s=a;s<o;s++)e=e>>>8^i[255&(e^t[s])];return-1^e}},"../node_modules/pako/lib/zlib/deflate.js":function(e,t,n){"use strict";var r,a=n("../node_modules/pako/lib/utils/common.js"),i=n("../node_modules/pako/lib/zlib/trees.js"),o=n("../node_modules/pako/lib/zlib/adler32.js"),s=n("../node_modules/pako/lib/zlib/crc32.js"),l=n("../node_modules/pako/lib/zlib/messages.js"),u=0,d=4,c=0,f=-2,h=-1,p=1,m=4,g=2,v=8,y=9,b=286,w=30,x=19,_=2*b+1,E=15,T=3,j=258,S=j+T+1,C=42,O=113,P=1,I=2,M=3,D=4;function L(e,t){return e.msg=l[t],t}function A(e){return(e<<1)-(e>4?9:0)}function k(e){for(var t=e.length;--t>=0;)e[t]=0}function R(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(a.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function U(e,t){i._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,R(e.strm)}function N(e,t){e.pending_buf[e.pending++]=t}function B(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function H(e,t){var n,r,a=e.max_chain_length,i=e.strstart,o=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-S?e.strstart-(e.w_size-S):0,u=e.window,d=e.w_mask,c=e.prev,f=e.strstart+j,h=u[i+o-1],p=u[i+o];e.prev_length>=e.good_match&&(a>>=2),s>e.lookahead&&(s=e.lookahead);do{if(u[(n=t)+o]===p&&u[n+o-1]===h&&u[n]===u[i]&&u[++n]===u[i+1]){i+=2,n++;do{}while(u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&i<f);if(r=j-(f-i),i=f-j,r>o){if(e.match_start=t,o=r,r>=s)break;h=u[i+o-1],p=u[i+o]}}}while((t=c[t&d])>l&&0!=--a);return o<=e.lookahead?o:e.lookahead}function F(e){var t,n,r,i,l,u,d,c,f,h,p=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=p+(p-S)){a.arraySet(e.window,e.window,p,p,0),e.match_start-=p,e.strstart-=p,e.block_start-=p,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=p?r-p:0}while(--n);t=n=p;do{r=e.prev[--t],e.prev[t]=r>=p?r-p:0}while(--n);i+=p}if(0===e.strm.avail_in)break;if(d=e.window,c=e.strstart+e.lookahead,h=void 0,(h=(u=e.strm).avail_in)>(f=i)&&(h=f),n=0===h?0:(u.avail_in-=h,a.arraySet(d,u.input,u.next_in,h,c),1===u.state.wrap?u.adler=o(u.adler,d,h,c):2===u.state.wrap&&(u.adler=s(u.adler,d,h,c)),u.next_in+=h,u.total_in+=h,h),e.lookahead+=n,e.lookahead+e.insert>=T)for(e.ins_h=e.window[l=e.strstart-e.insert],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+T-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<T)););}while(e.lookahead<S&&0!==e.strm.avail_in)}function V(e,t){for(var n,r;;){if(e.lookahead<S){if(F(e),e.lookahead<S&&t===u)return P;if(0===e.lookahead)break}if(n=0,e.lookahead>=T&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+T-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-S&&(e.match_length=H(e,n)),e.match_length>=T)if(r=i._tr_tally(e,e.strstart-e.match_start,e.match_length-T),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=T){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+T-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(U(e,!1),0===e.strm.avail_out))return P}return e.insert=e.strstart<T-1?e.strstart:T-1,t===d?(U(e,!0),0===e.strm.avail_out?M:D):e.last_lit&&(U(e,!1),0===e.strm.avail_out)?P:I}function z(e,t){for(var n,r,a;;){if(e.lookahead<S){if(F(e),e.lookahead<S&&t===u)return P;if(0===e.lookahead)break}if(n=0,e.lookahead>=T&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+T-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=T-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-S&&(e.match_length=H(e,n),e.match_length<=5&&(e.strategy===p||e.match_length===T&&e.strstart-e.match_start>4096)&&(e.match_length=T-1)),e.prev_length>=T&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-T,r=i._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-T),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=a&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+T-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=T-1,e.strstart++,r&&(U(e,!1),0===e.strm.avail_out))return P}else if(e.match_available){if((r=i._tr_tally(e,0,e.window[e.strstart-1]))&&U(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return P}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=i._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<T-1?e.strstart:T-1,t===d?(U(e,!0),0===e.strm.avail_out?M:D):e.last_lit&&(U(e,!1),0===e.strm.avail_out)?P:I}function W(e,t,n,r,a){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=a}function q(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*_),this.dyn_dtree=new a.Buf16(2*(2*w+1)),this.bl_tree=new a.Buf16(2*(2*x+1)),k(this.dyn_ltree),k(this.dyn_dtree),k(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(E+1),this.heap=new a.Buf16(2*b+1),k(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*b+1),k(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function G(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=g,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?C:O,e.adler=2===t.wrap?0:1,t.last_flush=u,i._tr_init(t),c):L(e,f)}function Y(e){var t,n=G(e);return n===c&&((t=e.state).window_size=2*t.w_size,k(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=T-1,t.match_available=0,t.ins_h=0),n}function $(e,t,n,r,i,o){if(!e)return f;var s=1;if(t===h&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>y||n!==v||r<8||r>15||t<0||t>9||o<0||o>m)return L(e,f);8===r&&(r=9);var l=new q;return e.state=l,l.strm=e,l.wrap=s,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=i+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+T-1)/T),l.window=new a.Buf8(2*l.w_size),l.head=new a.Buf16(l.hash_size),l.prev=new a.Buf16(l.w_size),l.lit_bufsize=1<<i+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new a.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=o,l.method=n,Y(e)}r=[new W(0,0,0,0,function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(F(e),0===e.lookahead&&t===u)return P;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,U(e,!1),0===e.strm.avail_out))return P;if(e.strstart-e.block_start>=e.w_size-S&&(U(e,!1),0===e.strm.avail_out))return P}return e.insert=0,t===d?(U(e,!0),0===e.strm.avail_out?M:D):(e.strstart>e.block_start&&U(e,!1),P)}),new W(4,4,8,4,V),new W(4,5,16,8,V),new W(4,6,32,32,V),new W(4,4,16,16,z),new W(8,16,32,32,z),new W(8,16,128,128,z),new W(8,32,128,256,z),new W(32,128,258,1024,z),new W(32,258,258,4096,z)],t.deflateInit=function(e,t){return $(e,t,v,15,8,0)},t.deflateInit2=$,t.deflateReset=Y,t.deflateResetKeep=G,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?f:(e.state.gzhead=t,c):f},t.deflate=function(e,t){var n,a,o,l;if(!e||!e.state||t>5||t<0)return e?L(e,f):f;if(a=e.state,!e.output||!e.input&&0!==e.avail_in||666===a.status&&t!==d)return L(e,0===e.avail_out?-5:f);if(a.strm=e,n=a.last_flush,a.last_flush=t,a.status===C)if(2===a.wrap)e.adler=0,N(a,31),N(a,139),N(a,8),a.gzhead?(N(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),N(a,255&a.gzhead.time),N(a,a.gzhead.time>>8&255),N(a,a.gzhead.time>>16&255),N(a,a.gzhead.time>>24&255),N(a,9===a.level?2:a.strategy>=2||a.level<2?4:0),N(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(N(a,255&a.gzhead.extra.length),N(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=s(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(N(a,0),N(a,0),N(a,0),N(a,0),N(a,0),N(a,9===a.level?2:a.strategy>=2||a.level<2?4:0),N(a,3),a.status=O);else{var h=v+(a.w_bits-8<<4)<<8;h|=(a.strategy>=2||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(h|=32),h+=31-h%31,a.status=O,B(a,h),0!==a.strstart&&(B(a,e.adler>>>16),B(a,65535&e.adler)),e.adler=1}if(69===a.status)if(a.gzhead.extra){for(o=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>o&&(e.adler=s(e.adler,a.pending_buf,a.pending-o,o)),R(e),o=a.pending,a.pending!==a.pending_buf_size));)N(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>o&&(e.adler=s(e.adler,a.pending_buf,a.pending-o,o)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73;if(73===a.status)if(a.gzhead.name){o=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>o&&(e.adler=s(e.adler,a.pending_buf,a.pending-o,o)),R(e),o=a.pending,a.pending===a.pending_buf_size)){l=1;break}l=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,N(a,l)}while(0!==l);a.gzhead.hcrc&&a.pending>o&&(e.adler=s(e.adler,a.pending_buf,a.pending-o,o)),0===l&&(a.gzindex=0,a.status=91)}else a.status=91;if(91===a.status)if(a.gzhead.comment){o=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>o&&(e.adler=s(e.adler,a.pending_buf,a.pending-o,o)),R(e),o=a.pending,a.pending===a.pending_buf_size)){l=1;break}l=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,N(a,l)}while(0!==l);a.gzhead.hcrc&&a.pending>o&&(e.adler=s(e.adler,a.pending_buf,a.pending-o,o)),0===l&&(a.status=103)}else a.status=103;if(103===a.status&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&R(e),a.pending+2<=a.pending_buf_size&&(N(a,255&e.adler),N(a,e.adler>>8&255),e.adler=0,a.status=O)):a.status=O),0!==a.pending){if(R(e),0===e.avail_out)return a.last_flush=-1,c}else if(0===e.avail_in&&A(t)<=A(n)&&t!==d)return L(e,-5);if(666===a.status&&0!==e.avail_in)return L(e,-5);if(0!==e.avail_in||0!==a.lookahead||t!==u&&666!==a.status){var p=2===a.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(F(e),0===e.lookahead)){if(t===u)return P;break}if(e.match_length=0,n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(U(e,!1),0===e.strm.avail_out))return P}return e.insert=0,t===d?(U(e,!0),0===e.strm.avail_out?M:D):e.last_lit&&(U(e,!1),0===e.strm.avail_out)?P:I}(a,t):3===a.strategy?function(e,t){for(var n,r,a,o,s=e.window;;){if(e.lookahead<=j){if(F(e),e.lookahead<=j&&t===u)return P;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=T&&e.strstart>0&&(r=s[a=e.strstart-1])===s[++a]&&r===s[++a]&&r===s[++a]){o=e.strstart+j;do{}while(r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&a<o);e.match_length=j-(o-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=T?(n=i._tr_tally(e,1,e.match_length-T),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(U(e,!1),0===e.strm.avail_out))return P}return e.insert=0,t===d?(U(e,!0),0===e.strm.avail_out?M:D):e.last_lit&&(U(e,!1),0===e.strm.avail_out)?P:I}(a,t):r[a.level].func(a,t);if(p!==M&&p!==D||(a.status=666),p===P||p===M)return 0===e.avail_out&&(a.last_flush=-1),c;if(p===I&&(1===t?i._tr_align(a):5!==t&&(i._tr_stored_block(a,0,0,!1),3===t&&(k(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),R(e),0===e.avail_out))return a.last_flush=-1,c}return t!==d?c:a.wrap<=0?1:(2===a.wrap?(N(a,255&e.adler),N(a,e.adler>>8&255),N(a,e.adler>>16&255),N(a,e.adler>>24&255),N(a,255&e.total_in),N(a,e.total_in>>8&255),N(a,e.total_in>>16&255),N(a,e.total_in>>24&255)):(B(a,e.adler>>>16),B(a,65535&e.adler)),R(e),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?c:1)},t.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==C&&69!==t&&73!==t&&91!==t&&103!==t&&t!==O&&666!==t?L(e,f):(e.state=null,t===O?L(e,-3):c):f},t.deflateSetDictionary=function(e,t){var n,r,i,s,l,u,d,h,p=t.length;if(!e||!e.state)return f;if(2===(s=(n=e.state).wrap)||1===s&&n.status!==C||n.lookahead)return f;for(1===s&&(e.adler=o(e.adler,t,p,0)),n.wrap=0,p>=n.w_size&&(0===s&&(k(n.head),n.strstart=0,n.block_start=0,n.insert=0),h=new a.Buf8(n.w_size),a.arraySet(h,t,p-n.w_size,n.w_size,0),t=h,p=n.w_size),l=e.avail_in,u=e.next_in,d=e.input,e.avail_in=p,e.next_in=0,e.input=t,F(n);n.lookahead>=T;){r=n.strstart,i=n.lookahead-(T-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+T-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--i);n.strstart=r,n.lookahead=T-1,F(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=T-1,n.match_available=0,e.next_in=u,e.input=d,e.avail_in=l,n.wrap=s,c},t.deflateInfo="pako deflate (from Nodeca project)"},"../node_modules/pako/lib/zlib/inffast.js":function(e,t,n){"use strict";e.exports=function(e,t){var n,r,a,i,o,s,l,u,d,c,f,h,p,m,g,v,y,b,w,x,_,E,T,j,S;j=e.input,a=(r=e.next_in)+(e.avail_in-5),S=e.output,o=(i=e.next_out)-(t-e.avail_out),s=i+(e.avail_out-257),l=(n=e.state).dmax,u=n.wsize,d=n.whave,c=n.wnext,f=n.window,h=n.hold,p=n.bits,m=n.lencode,g=n.distcode,v=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{p<15&&(h+=j[r++]<<p,h+=j[r++]<<(p+=8),p+=8),b=m[h&v];t:for(;;){if(h>>>=w=b>>>24,p-=w,0==(w=b>>>16&255))S[i++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=m[(65535&b)+(h&(1<<w)-1)];continue t}if(32&w){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}x=65535&b,(w&=15)&&(p<w&&(h+=j[r++]<<p,p+=8),x+=h&(1<<w)-1,h>>>=w,p-=w),p<15&&(h+=j[r++]<<p,h+=j[r++]<<(p+=8),p+=8),b=g[h&y];n:for(;;){if(h>>>=w=b>>>24,p-=w,!(16&(w=b>>>16&255))){if(0==(64&w)){b=g[(65535&b)+(h&(1<<w)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(_=65535&b,p<(w&=15)&&(h+=j[r++]<<p,(p+=8)<w&&(h+=j[r++]<<p,p+=8)),(_+=h&(1<<w)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(h>>>=w,p-=w,_>(w=i-o)){if((w=_-w)>d&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(E=0,T=f,0===c){if(E+=u-w,w<x){x-=w;do{S[i++]=f[E++]}while(--w);E=i-_,T=S}}else if(c<w){if(E+=u+c-w,(w-=c)<x){x-=w;do{S[i++]=f[E++]}while(--w);if(E=0,c<x){x-=w=c;do{S[i++]=f[E++]}while(--w);E=i-_,T=S}}}else if(E+=c-w,w<x){x-=w;do{S[i++]=f[E++]}while(--w);E=i-_,T=S}for(;x>2;)S[i++]=T[E++],S[i++]=T[E++],S[i++]=T[E++],x-=3;x&&(S[i++]=T[E++],x>1&&(S[i++]=T[E++]))}else{E=i-_;do{S[i++]=S[E++],S[i++]=S[E++],S[i++]=S[E++],x-=3}while(x>2);x&&(S[i++]=S[E++],x>1&&(S[i++]=S[E++]))}break}}break}}while(r<a&&i<s);h&=(1<<(p-=(x=p>>3)<<3))-1,e.next_in=r-=x,e.next_out=i,e.avail_in=r<a?a-r+5:5-(r-a),e.avail_out=i<s?s-i+257:257-(i-s),n.hold=h,n.bits=p}},"../node_modules/pako/lib/zlib/inflate.js":function(e,t,n){"use strict";var r=n("../node_modules/pako/lib/utils/common.js"),a=n("../node_modules/pako/lib/zlib/adler32.js"),i=n("../node_modules/pako/lib/zlib/crc32.js"),o=n("../node_modules/pako/lib/zlib/inffast.js"),s=n("../node_modules/pako/lib/zlib/inftrees.js"),l=1,u=2,d=0,c=-2,f=1,h=852,p=592;function m(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(e){var t;return e&&e.state?(e.total_in=e.total_out=(t=e.state).total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=f,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(h),t.distcode=t.distdyn=new r.Buf32(p),t.sane=1,t.back=-1,d):c}function y(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,v(e)):c}function b(e,t){var n,r;return e&&e.state?(t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?c:(null!==(r=e.state).window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,y(e))):c}function w(e,t){var n,r;return e?(r=new g,e.state=r,r.window=null,(n=b(e,t))!==d&&(e.state=null),n):c}var x,_,E=!0;function T(e){if(E){var t;for(x=new r.Buf32(512),_=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(l,e.lens,0,288,x,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(u,e.lens,0,32,_,0,e.work,{bits:5}),E=!1}e.lencode=x,e.lenbits=9,e.distcode=_,e.distbits=5}function j(e,t,n,a){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new r.Buf8(o.wsize)),a>=o.wsize?(r.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>a&&(i=a),r.arraySet(o.window,t,n-a,i,o.wnext),(a-=i)?(r.arraySet(o.window,t,n-a,a,0),o.wnext=a,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}t.inflateReset=y,t.inflateReset2=b,t.inflateResetKeep=v,t.inflateInit=function(e){return w(e,15)},t.inflateInit2=w,t.inflate=function(e,t){var n,h,p,g,v,y,b,w,x,_,E,S,C,O,P,I,M,D,L,A,k,R,U,N,B=0,H=new r.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return c;12===(n=e.state).mode&&(n.mode=13),v=e.next_out,p=e.output,g=e.next_in,h=e.input,w=n.hold,x=n.bits,_=y=e.avail_in,E=b=e.avail_out,R=d;e:for(;;)switch(n.mode){case f:if(0===n.wrap){n.mode=13;break}for(;x<16;){if(0===y)break e;y--,w+=h[g++]<<x,x+=8}if(2&n.wrap&&35615===w){n.check=0,H[0]=255&w,H[1]=w>>>8&255,n.check=i(n.check,H,2,0),w=0,x=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&w)<<8)+(w>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&w)){e.msg="unknown compression method",n.mode=30;break}if(x-=4,k=8+(15&(w>>>=4)),0===n.wbits)n.wbits=k;else if(k>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<k,e.adler=n.check=1,n.mode=512&w?10:12,w=0,x=0;break;case 2:for(;x<16;){if(0===y)break e;y--,w+=h[g++]<<x,x+=8}if(n.flags=w,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=w>>8&1),512&n.flags&&(H[0]=255&w,H[1]=w>>>8&255,n.check=i(n.check,H,2,0)),w=0,x=0,n.mode=3;case 3:for(;x<32;){if(0===y)break e;y--,w+=h[g++]<<x,x+=8}n.head&&(n.head.time=w),512&n.flags&&(H[0]=255&w,H[1]=w>>>8&255,H[2]=w>>>16&255,H[3]=w>>>24&255,n.check=i(n.check,H,4,0)),w=0,x=0,n.mode=4;case 4:for(;x<16;){if(0===y)break e;y--,w+=h[g++]<<x,x+=8}n.head&&(n.head.xflags=255&w,n.head.os=w>>8),512&n.flags&&(H[0]=255&w,H[1]=w>>>8&255,n.check=i(n.check,H,2,0)),w=0,x=0,n.mode=5;case 5:if(1024&n.flags){for(;x<16;){if(0===y)break e;y--,w+=h[g++]<<x,x+=8}n.length=w,n.head&&(n.head.extra_len=w),512&n.flags&&(H[0]=255&w,H[1]=w>>>8&255,n.check=i(n.check,H,2,0)),w=0,x=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((S=n.length)>y&&(S=y),S&&(n.head&&(k=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,h,g,S,k)),512&n.flags&&(n.check=i(n.check,h,S,g)),y-=S,g+=S,n.length-=S),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===y)break e;S=0;do{k=h[g+S++],n.head&&k&&n.length<65536&&(n.head.name+=String.fromCharCode(k))}while(k&&S<y);if(512&n.flags&&(n.check=i(n.check,h,S,g)),y-=S,g+=S,k)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===y)break e;S=0;do{k=h[g+S++],n.head&&k&&n.length<65536&&(n.head.comment+=String.fromCharCode(k))}while(k&&S<y);if(512&n.flags&&(n.check=i(n.check,h,S,g)),y-=S,g+=S,k)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;x<16;){if(0===y)break e;y--,w+=h[g++]<<x,x+=8}if(w!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}w=0,x=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;x<32;){if(0===y)break e;y--,w+=h[g++]<<x,x+=8}e.adler=n.check=m(w),w=0,x=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=v,e.avail_out=b,e.next_in=g,e.avail_in=y,n.hold=w,n.bits=x,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){w>>>=7&x,x-=7&x,n.mode=27;break}for(;x<3;){if(0===y)break e;y--,w+=h[g++]<<x,x+=8}switch(n.last=1&w,x-=1,3&(w>>>=1)){case 0:n.mode=14;break;case 1:if(T(n),n.mode=20,6===t){w>>>=2,x-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}w>>>=2,x-=2;break;case 14:for(w>>>=7&x,x-=7&x;x<32;){if(0===y)break e;y--,w+=h[g++]<<x,x+=8}if((65535&w)!=(w>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&w,w=0,x=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(S=n.length){if(S>y&&(S=y),S>b&&(S=b),0===S)break e;r.arraySet(p,h,g,S,v),y-=S,g+=S,b-=S,v+=S,n.length-=S;break}n.mode=12;break;case 17:for(;x<14;){if(0===y)break e;y--,w+=h[g++]<<x,x+=8}if(n.nlen=257+(31&w),x-=5,n.ndist=1+(31&(w>>>=5)),x-=5,n.ncode=4+(15&(w>>>=5)),w>>>=4,x-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;x<3;){if(0===y)break e;y--,w+=h[g++]<<x,x+=8}n.lens[F[n.have++]]=7&w,w>>>=3,x-=3}for(;n.have<19;)n.lens[F[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,R=s(0,n.lens,0,19,n.lencode,0,n.work,U={bits:n.lenbits}),n.lenbits=U.bits,R){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;I=(B=n.lencode[w&(1<<n.lenbits)-1])>>>16&255,M=65535&B,!((P=B>>>24)<=x);){if(0===y)break e;y--,w+=h[g++]<<x,x+=8}if(M<16)w>>>=P,x-=P,n.lens[n.have++]=M;else{if(16===M){for(N=P+2;x<N;){if(0===y)break e;y--,w+=h[g++]<<x,x+=8}if(w>>>=P,x-=P,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}k=n.lens[n.have-1],S=3+(3&w),w>>>=2,x-=2}else if(17===M){for(N=P+3;x<N;){if(0===y)break e;y--,w+=h[g++]<<x,x+=8}x-=P,k=0,S=3+(7&(w>>>=P)),w>>>=3,x-=3}else{for(N=P+7;x<N;){if(0===y)break e;y--,w+=h[g++]<<x,x+=8}x-=P,k=0,S=11+(127&(w>>>=P)),w>>>=7,x-=7}if(n.have+S>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;S--;)n.lens[n.have++]=k}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,R=s(l,n.lens,0,n.nlen,n.lencode,0,n.work,U={bits:n.lenbits}),n.lenbits=U.bits,R){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,R=s(u,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,U={bits:n.distbits}),n.distbits=U.bits,R){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(y>=6&&b>=258){e.next_out=v,e.avail_out=b,e.next_in=g,e.avail_in=y,n.hold=w,n.bits=x,o(e,E),v=e.next_out,p=e.output,b=e.avail_out,g=e.next_in,h=e.input,y=e.avail_in,w=n.hold,x=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;I=(B=n.lencode[w&(1<<n.lenbits)-1])>>>16&255,M=65535&B,!((P=B>>>24)<=x);){if(0===y)break e;y--,w+=h[g++]<<x,x+=8}if(I&&0==(240&I)){for(D=P,L=I,A=M;I=(B=n.lencode[A+((w&(1<<D+L)-1)>>D)])>>>16&255,M=65535&B,!(D+(P=B>>>24)<=x);){if(0===y)break e;y--,w+=h[g++]<<x,x+=8}w>>>=D,x-=D,n.back+=D}if(w>>>=P,x-=P,n.back+=P,n.length=M,0===I){n.mode=26;break}if(32&I){n.back=-1,n.mode=12;break}if(64&I){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&I,n.mode=22;case 22:if(n.extra){for(N=n.extra;x<N;){if(0===y)break e;y--,w+=h[g++]<<x,x+=8}n.length+=w&(1<<n.extra)-1,w>>>=n.extra,x-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;I=(B=n.distcode[w&(1<<n.distbits)-1])>>>16&255,M=65535&B,!((P=B>>>24)<=x);){if(0===y)break e;y--,w+=h[g++]<<x,x+=8}if(0==(240&I)){for(D=P,L=I,A=M;I=(B=n.distcode[A+((w&(1<<D+L)-1)>>D)])>>>16&255,M=65535&B,!(D+(P=B>>>24)<=x);){if(0===y)break e;y--,w+=h[g++]<<x,x+=8}w>>>=D,x-=D,n.back+=D}if(w>>>=P,x-=P,n.back+=P,64&I){e.msg="invalid distance code",n.mode=30;break}n.offset=M,n.extra=15&I,n.mode=24;case 24:if(n.extra){for(N=n.extra;x<N;){if(0===y)break e;y--,w+=h[g++]<<x,x+=8}n.offset+=w&(1<<n.extra)-1,w>>>=n.extra,x-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===b)break e;if(n.offset>(S=E-b)){if((S=n.offset-S)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}C=S>n.wnext?n.wsize-(S-=n.wnext):n.wnext-S,S>n.length&&(S=n.length),O=n.window}else O=p,C=v-n.offset,S=n.length;S>b&&(S=b),b-=S,n.length-=S;do{p[v++]=O[C++]}while(--S);0===n.length&&(n.mode=21);break;case 26:if(0===b)break e;p[v++]=n.length,b--,n.mode=21;break;case 27:if(n.wrap){for(;x<32;){if(0===y)break e;y--,w|=h[g++]<<x,x+=8}if(e.total_out+=E-=b,n.total+=E,E&&(e.adler=n.check=n.flags?i(n.check,p,E,v-E):a(n.check,p,E,v-E)),E=b,(n.flags?w:m(w))!==n.check){e.msg="incorrect data check",n.mode=30;break}w=0,x=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;x<32;){if(0===y)break e;y--,w+=h[g++]<<x,x+=8}if(w!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}w=0,x=0}n.mode=29;case 29:R=1;break e;case 30:R=-3;break e;case 31:return-4;case 32:default:return c}return e.next_out=v,e.avail_out=b,e.next_in=g,e.avail_in=y,n.hold=w,n.bits=x,(n.wsize||E!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&j(e,e.output,e.next_out,E-e.avail_out)?(n.mode=31,-4):(E-=e.avail_out,e.total_in+=_-=e.avail_in,e.total_out+=E,n.total+=E,n.wrap&&E&&(e.adler=n.check=n.flags?i(n.check,p,E,e.next_out-E):a(n.check,p,E,e.next_out-E)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===_&&0===E||4===t)&&R===d&&(R=-5),R)},t.inflateEnd=function(e){if(!e||!e.state)return c;var t=e.state;return t.window&&(t.window=null),e.state=null,d},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?c:(n.head=t,t.done=!1,d):c},t.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?c:11===n.mode&&a(1,t,r,0)!==n.check?-3:j(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,d):c},t.inflateInfo="pako inflate (from Nodeca project)"},"../node_modules/pako/lib/zlib/inftrees.js":function(e,t,n){"use strict";var r=n("../node_modules/pako/lib/utils/common.js"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,l,u,d,c,f){var h,p,m,g,v,y,b,w,x,_=f.bits,E=0,T=0,j=0,S=0,C=0,O=0,P=0,I=0,M=0,D=0,L=null,A=0,k=new r.Buf16(16),R=new r.Buf16(16),U=null,N=0;for(E=0;E<=15;E++)k[E]=0;for(T=0;T<l;T++)k[t[n+T]]++;for(C=_,S=15;S>=1&&0===k[S];S--);if(C>S&&(C=S),0===S)return u[d++]=20971520,u[d++]=20971520,f.bits=1,0;for(j=1;j<S&&0===k[j];j++);for(C<j&&(C=j),I=1,E=1;E<=15;E++)if(I<<=1,(I-=k[E])<0)return-1;if(I>0&&(0===e||1!==S))return-1;for(R[1]=0,E=1;E<15;E++)R[E+1]=R[E]+k[E];for(T=0;T<l;T++)0!==t[n+T]&&(c[R[t[n+T]]++]=T);if(0===e?(L=U=c,y=19):1===e?(L=a,A-=257,U=i,N-=257,y=256):(L=o,U=s,y=-1),D=0,T=0,E=j,v=d,O=C,P=0,m=-1,g=(M=1<<C)-1,1===e&&M>852||2===e&&M>592)return 1;for(;;){b=E-P,c[T]<y?(w=0,x=c[T]):c[T]>y?(w=U[N+c[T]],x=L[A+c[T]]):(w=96,x=0),h=1<<E-P,j=p=1<<O;do{u[v+(D>>P)+(p-=h)]=b<<24|w<<16|x|0}while(0!==p);for(h=1<<E-1;D&h;)h>>=1;if(0!==h?(D&=h-1,D+=h):D=0,T++,0==--k[E]){if(E===S)break;E=t[n+c[T]]}if(E>C&&(D&g)!==m){for(0===P&&(P=C),v+=j,I=1<<(O=E-P);O+P<S&&!((I-=k[O+P])<=0);)O++,I<<=1;if(M+=1<<O,1===e&&M>852||2===e&&M>592)return 1;u[m=D&g]=C<<24|O<<16|v-d|0}}return 0!==D&&(u[v+D]=E-P<<24|64<<16|0),f.bits=C,0}},"../node_modules/pako/lib/zlib/messages.js":function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},"../node_modules/pako/lib/zlib/trees.js":function(e,t,n){"use strict";var r=n("../node_modules/pako/lib/utils/common.js");function a(e){for(var t=e.length;--t>=0;)e[t]=0}var i=0,o=256,s=o+1+29,l=30,u=19,d=2*s+1,c=15,f=16,h=256,p=16,m=17,g=18,v=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],y=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],b=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],w=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],x=new Array(2*(s+2));a(x);var _=new Array(2*l);a(_);var E=new Array(512);a(E);var T=new Array(256);a(T);var j=new Array(29);a(j);var S,C,O,P=new Array(l);function I(e,t,n,r,a){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=a,this.has_stree=e&&e.length}function M(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function D(e){return e<256?E[e]:E[256+(e>>>7)]}function L(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function A(e,t,n){e.bi_valid>f-n?(e.bi_buf|=t<<e.bi_valid&65535,L(e,e.bi_buf),e.bi_buf=t>>f-e.bi_valid,e.bi_valid+=n-f):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function k(e,t,n){A(e,n[2*t],n[2*t+1])}function R(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function U(e,t,n){var r,a,i=new Array(c+1),o=0;for(r=1;r<=c;r++)i[r]=o=o+n[r-1]<<1;for(a=0;a<=t;a++){var s=e[2*a+1];0!==s&&(e[2*a]=R(i[s]++,s))}}function N(e){var t;for(t=0;t<s;t++)e.dyn_ltree[2*t]=0;for(t=0;t<l;t++)e.dyn_dtree[2*t]=0;for(t=0;t<u;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*h]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function B(e){e.bi_valid>8?L(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function H(e,t,n,r){var a=2*t,i=2*n;return e[a]<e[i]||e[a]===e[i]&&r[t]<=r[n]}function F(e,t,n){for(var r=e.heap[n],a=n<<1;a<=e.heap_len&&(a<e.heap_len&&H(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!H(t,r,e.heap[a],e.depth));)e.heap[n]=e.heap[a],n=a,a<<=1;e.heap[n]=r}function V(e,t,n){var r,a,i,s,l=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],a=e.pending_buf[e.l_buf+l],l++,0===r?k(e,a,t):(k(e,(i=T[a])+o+1,t),0!==(s=v[i])&&A(e,a-=j[i],s),k(e,i=D(--r),n),0!==(s=y[i])&&A(e,r-=P[i],s))}while(l<e.last_lit);k(e,h,t)}function z(e,t){var n,r,a,i=t.dyn_tree,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=d,n=0;n<l;n++)0!==i[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):i[2*n+1]=0;for(;e.heap_len<2;)i[2*(a=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[a]=0,e.opt_len--,s&&(e.static_len-=o[2*a+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)F(e,i,n);a=l;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],F(e,i,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,i[2*a]=i[2*n]+i[2*r],e.depth[a]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,i[2*n+1]=i[2*r+1]=a,e.heap[1]=a++,F(e,i,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,a,i,o,s,l=t.dyn_tree,u=t.max_code,f=t.stat_desc.static_tree,h=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,m=t.stat_desc.extra_base,g=t.stat_desc.max_length,v=0;for(i=0;i<=c;i++)e.bl_count[i]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<d;n++)(i=l[2*l[2*(r=e.heap[n])+1]+1]+1)>g&&(i=g,v++),l[2*r+1]=i,r>u||(e.bl_count[i]++,o=0,r>=m&&(o=p[r-m]),e.opt_len+=(s=l[2*r])*(i+o),h&&(e.static_len+=s*(f[2*r+1]+o)));if(0!==v){do{for(i=g-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[g]--,v-=2}while(v>0);for(i=g;0!==i;i--)for(r=e.bl_count[i];0!==r;)(a=e.heap[--n])>u||(l[2*a+1]!==i&&(e.opt_len+=(i-l[2*a+1])*l[2*a],l[2*a+1]=i),r--)}}(e,t),U(i,u,e.bl_count)}function W(e,t,n){var r,a,i=-1,o=t[1],s=0,l=7,u=4;for(0===o&&(l=138,u=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)a=o,o=t[2*(r+1)+1],++s<l&&a===o||(s<u?e.bl_tree[2*a]+=s:0!==a?(a!==i&&e.bl_tree[2*a]++,e.bl_tree[2*p]++):s<=10?e.bl_tree[2*m]++:e.bl_tree[2*g]++,s=0,i=a,0===o?(l=138,u=3):a===o?(l=6,u=3):(l=7,u=4))}function q(e,t,n){var r,a,i=-1,o=t[1],s=0,l=7,u=4;for(0===o&&(l=138,u=3),r=0;r<=n;r++)if(a=o,o=t[2*(r+1)+1],!(++s<l&&a===o)){if(s<u)do{k(e,a,e.bl_tree)}while(0!=--s);else 0!==a?(a!==i&&(k(e,a,e.bl_tree),s--),k(e,p,e.bl_tree),A(e,s-3,2)):s<=10?(k(e,m,e.bl_tree),A(e,s-3,3)):(k(e,g,e.bl_tree),A(e,s-11,7));s=0,i=a,0===o?(l=138,u=3):a===o?(l=6,u=3):(l=7,u=4)}}a(P);var G=!1;function Y(e,t,n,a){A(e,(i<<1)+(a?1:0),3),function(e,t,n,a){B(e),L(e,n),L(e,~n),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n)}t._tr_init=function(e){G||(function(){var e,t,n,r,a,i=new Array(c+1);for(n=0,r=0;r<28;r++)for(j[r]=n,e=0;e<1<<v[r];e++)T[n++]=r;for(T[n-1]=r,a=0,r=0;r<16;r++)for(P[r]=a,e=0;e<1<<y[r];e++)E[a++]=r;for(a>>=7;r<l;r++)for(P[r]=a<<7,e=0;e<1<<y[r]-7;e++)E[256+a++]=r;for(t=0;t<=c;t++)i[t]=0;for(e=0;e<=143;)x[2*e+1]=8,e++,i[8]++;for(;e<=255;)x[2*e+1]=9,e++,i[9]++;for(;e<=279;)x[2*e+1]=7,e++,i[7]++;for(;e<=287;)x[2*e+1]=8,e++,i[8]++;for(U(x,s+1,i),e=0;e<l;e++)_[2*e+1]=5,_[2*e]=R(e,5);S=new I(x,v,o+1,s,c),C=new I(_,y,0,l,c),O=new I(new Array(0),b,0,u,7)}(),G=!0),e.l_desc=new M(e.dyn_ltree,S),e.d_desc=new M(e.dyn_dtree,C),e.bl_desc=new M(e.bl_tree,O),e.bi_buf=0,e.bi_valid=0,N(e)},t._tr_stored_block=Y,t._tr_flush_block=function(e,t,n,r){var a,i,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<o;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),z(e,e.l_desc),z(e,e.d_desc),s=function(e){var t;for(W(e,e.dyn_ltree,e.l_desc.max_code),W(e,e.dyn_dtree,e.d_desc.max_code),z(e,e.bl_desc),t=u-1;t>=3&&0===e.bl_tree[2*w[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),(i=e.static_len+3+7>>>3)<=(a=e.opt_len+3+7>>>3)&&(a=i)):a=i=n+5,n+4<=a&&-1!==t?Y(e,t,n,r):4===e.strategy||i===a?(A(e,2+(r?1:0),3),V(e,x,_)):(A(e,4+(r?1:0),3),function(e,t,n,r){var a;for(A(e,t-257,5),A(e,n-1,5),A(e,r-4,4),a=0;a<r;a++)A(e,e.bl_tree[2*w[a]+1],3);q(e,e.dyn_ltree,t-1),q(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),V(e,e.dyn_ltree,e.dyn_dtree)),N(e),r&&B(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(T[n]+o+1)]++,e.dyn_dtree[2*D(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){A(e,2,3),k(e,h,x),function(e){16===e.bi_valid?(L(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},"../node_modules/pako/lib/zlib/zstream.js":function(e,t,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},"../node_modules/process-nextick-args/index.js":function(e,t,n){"use strict";(function(t){e.exports=!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?{nextTick:function(e,n,r,a){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,o,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,a)});default:for(i=new Array(s-1),o=0;o<i.length;)i[o++]=arguments[o];return t.nextTick(function(){e.apply(null,i)})}}}:t}).call(this,n("../node_modules/process/browser.js"))},"../node_modules/process/browser.js":function(e,t){var n,r,a=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var l,u=[],d=!1,c=-1;function f(){d&&l&&(d=!1,l.length?u=l.concat(u):c=-1,u.length&&h())}function h(){if(!d){var e=s(f);d=!0;for(var t=u.length;t;){for(l=u,u=[];++c<t;)l&&l[c].run();c=-1,t=u.length}l=null,d=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||d||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},"../node_modules/readable-stream/duplex-browser.js":function(e,t,n){e.exports=n("../node_modules/readable-stream/lib/_stream_duplex.js")},"../node_modules/readable-stream/lib/_stream_duplex.js":function(e,t,n){"use strict";var r=n("../node_modules/process-nextick-args/index.js"),a=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=c;var i=n("../node_modules/core-util-is/lib/util.js");i.inherits=n("../node_modules/inherits/inherits_browser.js");var o=n("../node_modules/readable-stream/lib/_stream_readable.js"),s=n("../node_modules/readable-stream/lib/_stream_writable.js");i.inherits(c,o);for(var l=a(s.prototype),u=0;u<l.length;u++){var d=l[u];c.prototype[d]||(c.prototype[d]=s.prototype[d])}function c(e){if(!(this instanceof c))return new c(e);o.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),c.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},"../node_modules/readable-stream/lib/_stream_passthrough.js":function(e,t,n){"use strict";e.exports=i;var r=n("../node_modules/readable-stream/lib/_stream_transform.js"),a=n("../node_modules/core-util-is/lib/util.js");function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}a.inherits=n("../node_modules/inherits/inherits_browser.js"),a.inherits(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},"../node_modules/readable-stream/lib/_stream_readable.js":function(e,t,n){"use strict";(function(t,r){var a=n("../node_modules/process-nextick-args/index.js");e.exports=b;var i,o=n("../node_modules/isarray/index.js");b.ReadableState=y,n("../node_modules/events/events.js");var s=function(e,t){return e.listeners(t).length},l=n("../node_modules/readable-stream/lib/internal/streams/stream-browser.js"),u=n("../node_modules/safe-buffer/index.js").Buffer,d=t.Uint8Array||function(){},c=n("../node_modules/core-util-is/lib/util.js");c.inherits=n("../node_modules/inherits/inherits_browser.js");var f=n(0),h=void 0;h=f&&f.debuglog?f.debuglog("stream"):function(){};var p,m=n("../node_modules/readable-stream/lib/internal/streams/BufferList.js"),g=n("../node_modules/readable-stream/lib/internal/streams/destroy.js");c.inherits(b,l);var v=["error","close","destroy","pause","resume"];function y(e,t){var r=t instanceof(i=i||n("../node_modules/readable-stream/lib/_stream_duplex.js"));this.objectMode=!!(e=e||{}).objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var a=e.highWaterMark,o=e.readableHighWaterMark;this.highWaterMark=a||0===a?a:r&&(o||0===o)?o:this.objectMode?16:16384,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=n("../node_modules/string_decoder/lib/string_decoder.js").StringDecoder),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function b(e){if(i=i||n("../node_modules/readable-stream/lib/_stream_duplex.js"),!(this instanceof b))return new b(e);this._readableState=new y(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),l.call(this)}function w(e,t,n,r,a){var i,o=e._readableState;return null===t?(o.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,T(e)}}(e,o)):(a||(i=function(e,t){var n,r;return u.isBuffer(r=t)||r instanceof d||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(o,t)),i?e.emit("error",i):o.objectMode||t&&t.length>0?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===u.prototype||(t=function(e){return u.from(e)}(t)),r?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):x(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?x(e,o,t,!1):S(e,o)):x(e,o,t,!1))):r||(o.reading=!1)),function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(o)}function x(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&T(e)),S(e,t)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),b.prototype.destroy=g.destroy,b.prototype._undestroy=g.undestroy,b.prototype._destroy=function(e,t){this.push(null),t(e)},b.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=u.from(e,t),t=""),n=!0),w(this,e,t,!1,n)},b.prototype.unshift=function(e){return w(this,e,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(e){return p||(p=n("../node_modules/string_decoder/lib/string_decoder.js").StringDecoder),this._readableState.decoder=new p(e),this._readableState.encoding=e,this};var _=8388608;function E(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=_?e=_:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function T(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(h("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?a.nextTick(j,e):j(e))}function j(e){h("emit readable"),e.emit("readable"),I(e)}function S(e,t){t.readingMore||(t.readingMore=!0,a.nextTick(C,e,t))}function C(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(h("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function O(e){h("readable nexttick read 0"),e.read(0)}function P(e,t){t.reading||(h("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),I(e),t.flowing&&!t.reading&&e.read(0)}function I(e){var t=e._readableState;for(h("flow",t.flowing);t.flowing&&null!==e.read(););}function M(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,a=n.data;for(e-=a.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(a+=o===i.length?i:i.slice(0,e),0==(e-=o)){o===i.length?(++r,t.head=n.next?n.next:t.tail=null):(t.head=n,n.data=i.slice(o));break}++r}return t.length-=r,a}(e,t):function(e,t){var n=u.allocUnsafe(e),r=t.head,a=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(n,n.length-e,0,o),0==(e-=o)){o===i.length?(++a,t.head=r.next?r.next:t.tail=null):(t.head=r,r.data=i.slice(o));break}++a}return t.length-=a,n}(e,t),r}(e,t.buffer,t.decoder),n);var n}function D(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,a.nextTick(L,t,e))}function L(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function A(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}b.prototype.read=function(e){h("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return h("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?D(this):T(this),null;if(0===(e=E(e,t))&&t.ended)return 0===t.length&&D(this),null;var r,a=t.needReadable;return h("need readable",a),(0===t.length||t.length-e<t.highWaterMark)&&h("length less than watermark",a=!0),t.ended||t.reading?h("reading or ended",a=!1):a&&(h("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=E(n,t))),null===(r=e>0?M(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&D(this)),null!==r&&this.emit("data",r),r},b.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,h("pipe count=%d opts=%j",i.pipesCount,t);var l=t&&!1===t.end||e===r.stdout||e===r.stderr?y:u;function u(){h("onend"),e.end()}i.endEmitted?a.nextTick(l):n.once("end",l),e.on("unpipe",function t(r,a){h("onunpipe"),r===n&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,h("cleanup"),e.removeListener("close",g),e.removeListener("finish",v),e.removeListener("drain",d),e.removeListener("error",m),e.removeListener("unpipe",t),n.removeListener("end",u),n.removeListener("end",y),n.removeListener("data",p),c=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||d())});var d=function(e){return function(){var t=e._readableState;h("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,I(e))}}(n);e.on("drain",d);var c=!1,f=!1;function p(t){h("ondata"),f=!1,!1!==e.write(t)||f||((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==A(i.pipes,e))&&!c&&(h("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,f=!0),n.pause())}function m(t){h("onerror",t),y(),e.removeListener("error",m),0===s(e,"error")&&e.emit("error",t)}function g(){e.removeListener("finish",v),y()}function v(){h("onfinish"),e.removeListener("close",g),y()}function y(){h("unpipe"),n.unpipe(e)}return n.on("data",p),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener("error",n);e._events&&e._events.error?o(e._events.error)?e._events.error.unshift(n):e._events.error=[n,e._events.error]:e.on("error",n)}(e,0,m),e.once("close",g),e.once("finish",v),e.emit("pipe",n),i.flowing||(h("pipe resume"),n.resume()),e},b.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,a=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<a;i++)r[i].emit("unpipe",this,n);return this}var o=A(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},b.prototype.addListener=b.prototype.on=function(e,t){var n=l.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&T(this):a.nextTick(O,this))}return n},b.prototype.resume=function(){var e=this._readableState;return e.flowing||(h("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,a.nextTick(P,e,t))}(this,e)),this},b.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var a in e.on("end",function(){if(h("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(a){h("wrapped data"),n.decoder&&(a=n.decoder.write(a)),n.objectMode&&null==a||(n.objectMode||a&&a.length)&&(t.push(a)||(r=!0,e.pause()))}),e)void 0===this[a]&&"function"==typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));for(var i=0;i<v.length;i++)e.on(v[i],this.emit.bind(this,v[i]));return this._read=function(t){h("wrapped _read",t),r&&(r=!1,e.resume())},this},b._fromList=M}).call(this,n("../node_modules/webpack/buildin/global.js"),n("../node_modules/process/browser.js"))},"../node_modules/readable-stream/lib/_stream_transform.js":function(e,t,n){"use strict";e.exports=o;var r=n("../node_modules/readable-stream/lib/_stream_duplex.js"),a=n("../node_modules/core-util-is/lib/util.js");function i(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);r.call(this,e),this._transformState={afterTransform:i.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",s)}function s(){var e=this;"function"==typeof this._flush?this._flush(function(t,n){l(e,t,n)}):l(this,null,null)}function l(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}a.inherits=n("../node_modules/inherits/inherits_browser.js"),a.inherits(o,r),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var a=this._readableState;(r.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},"../node_modules/readable-stream/lib/_stream_writable.js":function(e,t,n){"use strict";(function(t,r,a){var i=n("../node_modules/process-nextick-args/index.js");function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;for(e.entry=null;r;){var a=r.callback;t.pendingcb--,a(void 0),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=y;var s,l=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:i.nextTick;y.WritableState=v;var u=n("../node_modules/core-util-is/lib/util.js");u.inherits=n("../node_modules/inherits/inherits_browser.js");var d,c={deprecate:n("../node_modules/util-deprecate/browser.js")},f=n("../node_modules/readable-stream/lib/internal/streams/stream-browser.js"),h=n("../node_modules/safe-buffer/index.js").Buffer,p=a.Uint8Array||function(){},m=n("../node_modules/readable-stream/lib/internal/streams/destroy.js");function g(){}function v(e,t){s=s||n("../node_modules/readable-stream/lib/_stream_duplex.js");var r=t instanceof s;this.objectMode=!!(e=e||{}).objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var a=e.highWaterMark,u=e.writableHighWaterMark;this.highWaterMark=a||0===a?a:r&&(u||0===u)?u:this.objectMode?16:16384,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===e.decodeStrings),this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,a=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,a){--t.pendingcb,n?(i.nextTick(a,r),i.nextTick(T,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(a(r),e._writableState.errorEmitted=!0,e.emit("error",r),T(e,t))}(e,n,r,t,a);else{var o=_(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||x(e,n),r?l(w,e,n,o,a):w(e,n,o,a)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function y(e){if(s=s||n("../node_modules/readable-stream/lib/_stream_duplex.js"),!(d.call(y,this)||this instanceof s))return new y(e);this._writableState=new v(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),f.call(this)}function b(e,t,n,r,a,i,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(a,t.onwrite):e._write(a,i,t.onwrite),t.sync=!1}function w(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),T(e,t)}function x(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=new Array(t.bufferedRequestCount),a=t.corkedRequestsFree;a.entry=n;for(var i=0,s=!0;n;)r[i]=n,n.isBuf||(s=!1),n=n.next,i+=1;r.allBuffers=s,b(e,t,!0,t.length,r,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk;if(b(e,t,!1,t.objectMode?1:l.length,l,n.encoding,n.callback),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function _(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function E(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),T(e,t)})}function T(e,t){var n=_(t);return n&&(function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,i.nextTick(E,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}u.inherits(y,f),v.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(v.prototype,"buffer",{get:c.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(e){return!!d.call(this,e)||this===y&&e&&e._writableState instanceof v}})):d=function(e){return e instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(e,t,n){var r,a=this._writableState,o=!1,s=!a.objectMode&&(h.isBuffer(r=e)||r instanceof p);return s&&!h.isBuffer(e)&&(e=function(e){return h.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=a.defaultEncoding),"function"!=typeof n&&(n=g),a.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),i.nextTick(t,n)}(this,n):(s||function(e,t,n,r){var a=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),i.nextTick(r,o),a=!1),a}(this,a,e,n))&&(a.pendingcb++,o=function(e,t,n,r,a,i){if(!n){var o=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=h.from(t,n)),t}(t,r,a);r!==o&&(n=!0,a="buffer",r=o)}var s=t.objectMode?1:r.length;t.length+=s;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:a,isBuf:n,callback:i,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else b(e,t,!1,s,r,a,i);return l}(this,a,s,e,t,n)),o},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||x(this,e))},y.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},y.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,T(e,t),n&&(t.finished?i.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),y.prototype.destroy=m.destroy,y.prototype._undestroy=m.undestroy,y.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,n("../node_modules/process/browser.js"),n("../node_modules/timers-browserify/main.js").setImmediate,n("../node_modules/webpack/buildin/global.js"))},"../node_modules/readable-stream/lib/internal/streams/BufferList.js":function(e,t,n){"use strict";var r=n("../node_modules/safe-buffer/index.js").Buffer,a=n(1);e.exports=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t=r.allocUnsafe(e>>>0),n=this.head,a=0;n;)n.data.copy(t,a),a+=n.data.length,n=n.next;return t},e}(),a&&a.inspect&&a.inspect.custom&&(e.exports.prototype[a.inspect.custom]=function(){var e=a.inspect({length:this.length});return this.constructor.name+" "+e})},"../node_modules/readable-stream/lib/internal/streams/destroy.js":function(e,t,n){"use strict";var r=n("../node_modules/process-nextick-args/index.js");function a(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(a,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(r.nextTick(a,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},"../node_modules/readable-stream/lib/internal/streams/stream-browser.js":function(e,t,n){e.exports=n("../node_modules/events/events.js").EventEmitter},"../node_modules/readable-stream/passthrough.js":function(e,t,n){e.exports=n("../node_modules/readable-stream/readable-browser.js").PassThrough},"../node_modules/readable-stream/readable-browser.js":function(e,t,n){(t=e.exports=n("../node_modules/readable-stream/lib/_stream_readable.js")).Stream=t,t.Readable=t,t.Writable=n("../node_modules/readable-stream/lib/_stream_writable.js"),t.Duplex=n("../node_modules/readable-stream/lib/_stream_duplex.js"),t.Transform=n("../node_modules/readable-stream/lib/_stream_transform.js"),t.PassThrough=n("../node_modules/readable-stream/lib/_stream_passthrough.js")},"../node_modules/readable-stream/transform.js":function(e,t,n){e.exports=n("../node_modules/readable-stream/readable-browser.js").Transform},"../node_modules/readable-stream/writable-browser.js":function(e,t,n){e.exports=n("../node_modules/readable-stream/lib/_stream_writable.js")},"../node_modules/safe-buffer/index.js":function(e,t,n){var r=n("../node_modules/buffer/index.js"),a=r.Buffer;function i(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return a(e,t,n)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=r:(i(r,t),t.Buffer=o),i(a,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=a(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},"../node_modules/setimmediate/setImmediate.js":function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,a,i,o,s,l=1,u={},d=!1,c=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){p(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(o="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&p(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(o+t,"*")}):e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){i.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(a=c.documentElement,r=function(e){var t=c.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,a.removeChild(t),t=null},a.appendChild(t)}):r=function(e){setTimeout(p,0,e)},f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];return u[l]={callback:e,args:t},r(l),l++},f.clearImmediate=h}function h(e){delete u[e]}function p(e){if(d)setTimeout(p,0,e);else{var t=u[e];if(t){d=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{h(e),d=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n("../node_modules/webpack/buildin/global.js"),n("../node_modules/process/browser.js"))},"../node_modules/stream-browserify/index.js":function(e,t,n){e.exports=a;var r=n("../node_modules/events/events.js").EventEmitter;function a(){r.call(this)}n("../node_modules/inherits/inherits_browser.js")(a,r),a.Readable=n("../node_modules/readable-stream/readable-browser.js"),a.Writable=n("../node_modules/readable-stream/writable-browser.js"),a.Duplex=n("../node_modules/readable-stream/duplex-browser.js"),a.Transform=n("../node_modules/readable-stream/transform.js"),a.PassThrough=n("../node_modules/readable-stream/passthrough.js"),a.Stream=a,a.prototype.pipe=function(e,t){var n=this;function a(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",a),e.on("drain",i),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",l));var o=!1;function s(){o||(o=!0,e.end())}function l(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(d(),0===r.listenerCount(this,"error"))throw e}function d(){n.removeListener("data",a),e.removeListener("drain",i),n.removeListener("end",s),n.removeListener("close",l),n.removeListener("error",u),e.removeListener("error",u),n.removeListener("end",d),n.removeListener("close",d),e.removeListener("close",d)}return n.on("error",u),e.on("error",u),n.on("end",d),n.on("close",d),e.on("close",d),e.emit("pipe",n),e}},"../node_modules/string_decoder/lib/string_decoder.js":function(e,t,n){"use strict";var r=n("../node_modules/safe-buffer/index.js").Buffer,a=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===a||!a(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=u,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=d,this.end=c,t=3;break;default:return this.write=f,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:-1}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"\ufffd".repeat(n);if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"\ufffd".repeat(n+1);if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"\ufffd".repeat(n+2)}}(this,e,t);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):t}function d(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.StringDecoder=i,i.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd".repeat(this.lastTotal-this.lastNeed):t},i.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var a=o(t[r]);return a>=0?(a>0&&(e.lastNeed=a-1),a):--r<n?0:(a=o(t[r]))>=0?(a>0&&(e.lastNeed=a-2),a):--r<n?0:(a=o(t[r]))>=0?(a>0&&(2===a?a=0:e.lastNeed=a-3),a):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},"../node_modules/timers-browserify/main.js":function(e,t,n){(function(e){var r=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(r.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new a(r.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n("../node_modules/setimmediate/setImmediate.js"),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n("../node_modules/webpack/buildin/global.js"))},"../node_modules/util-deprecate/browser.js":function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(r){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,n("../node_modules/webpack/buildin/global.js"))},"../node_modules/util/node_modules/inherits/inherits_browser.js":function(e,t){e.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},"../node_modules/util/support/isBufferBrowser.js":function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},"../node_modules/util/util.js":function(e,t,n){(function(e,r){var a=/%[sdj%]/g;t.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,o=String(e).replace(a,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),l=r[n];n<i;l=r[++n])m(l)||!w(l)?o+=" "+l:o+=" "+s(l);return o},t.deprecate=function(n,a){if(y(e.process))return function(){return t.deprecate(n,a).apply(this,arguments)};if(!0===r.noDeprecation)return n;var i=!1;return function(){if(!i){if(r.throwDeprecation)throw new Error(a);r.traceDeprecation?console.trace(a):console.error(a),i=!0}return n.apply(this,arguments)}};var i,o={};function s(e,n){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),p(n)?r.showHidden=n:n&&t._extend(r,n),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=l),d(r,e,r.depth)}function l(e,t){var n=s.styles[t];return n?"\x1b["+s.colors[n][0]+"m"+e+"\x1b["+s.colors[n][1]+"m":e}function u(e,t){return e}function d(e,n,r){if(e.customInspect&&n&&E(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var a=n.inspect(r,e);return v(a)||(a=d(e,a,r)),a}var i=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(v(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return g(t)?e.stylize(""+t,"number"):p(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}(e,n);if(i)return i;var o,s=Object.keys(n),l=(o={},s.forEach(function(e,t){o[e]=!0}),o);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),_(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(n);if(0===s.length){if(E(n))return e.stylize("[Function"+(n.name?": "+n.name:"")+"]","special");if(b(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(x(n))return e.stylize(Date.prototype.toString.call(n),"date");if(_(n))return c(n)}var u,w="",T=!1,j=["{","}"];return h(n)&&(T=!0,j=["[","]"]),E(n)&&(w=" [Function"+(n.name?": "+n.name:"")+"]"),b(n)&&(w=" "+RegExp.prototype.toString.call(n)),x(n)&&(w=" "+Date.prototype.toUTCString.call(n)),_(n)&&(w=" "+c(n)),0!==s.length||T&&0!=n.length?r<0?b(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),u=T?function(e,t,n,r,a){for(var i=[],o=0,s=t.length;o<s;++o)C(t,String(o))?i.push(f(e,t,n,r,String(o),!0)):i.push("");return a.forEach(function(a){a.match(/^\d+$/)||i.push(f(e,t,n,r,a,!0))}),i}(e,n,r,l,s):s.map(function(t){return f(e,n,r,l,t,T)}),e.seen.pop(),function(e,t,n){return e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(u,w,j)):j[0]+w+j[1]}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,a,i){var o,s,l;if((l=Object.getOwnPropertyDescriptor(t,a)||{value:t[a]}).get?s=e.stylize(l.set?"[Getter/Setter]":"[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),C(r,a)||(o="["+a+"]"),s||(e.seen.indexOf(l.value)<0?(s=m(n)?d(e,l.value,null):d(e,l.value,n-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),y(o)){if(i&&a.match(/^\d+$/))return s;(o=JSON.stringify(""+a)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function h(e){return Array.isArray(e)}function p(e){return"boolean"==typeof e}function m(e){return null===e}function g(e){return"number"==typeof e}function v(e){return"string"==typeof e}function y(e){return void 0===e}function b(e){return w(e)&&"[object RegExp]"===T(e)}function w(e){return"object"==typeof e&&null!==e}function x(e){return w(e)&&"[object Date]"===T(e)}function _(e){return w(e)&&("[object Error]"===T(e)||e instanceof Error)}function E(e){return"function"==typeof e}function T(e){return Object.prototype.toString.call(e)}function j(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(y(i)&&(i=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!o[e])if(new RegExp("\\b"+e+"\\b","i").test(i)){var n=r.pid;o[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else o[e]=function(){};return o[e]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=p,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=g,t.isString=v,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=y,t.isRegExp=b,t.isObject=w,t.isDate=x,t.isError=_,t.isFunction=E,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n("../node_modules/util/support/isBufferBrowser.js");var S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,n;console.log("%s - %s",(n=[j((e=new Date).getHours()),j(e.getMinutes()),j(e.getSeconds())].join(":"),[e.getDate(),S[e.getMonth()],n].join(" ")),t.format.apply(t,arguments))},t.inherits=n("../node_modules/util/node_modules/inherits/inherits_browser.js"),t._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,n("../node_modules/webpack/buildin/global.js"),n("../node_modules/process/browser.js"))},"../node_modules/webpack/buildin/global.js":function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(r){"object"==typeof window&&(n=window)}e.exports=n},"../node_modules/webpack/buildin/module.js":function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},"./alloc.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t,n){if(void 0!==e&&t instanceof e)return e.alloc(n);if(t instanceof Uint8Array)return new Uint8Array(n);throw"dicomParser.alloc: unknown type for byteArray"}}).call(this,n("../node_modules/buffer/index.js").Buffer)},"./bigEndianByteArrayParser.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={readUint16:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readUint16: position cannot be less than 0";if(t+2>e.length)throw"bigEndianByteArrayParser.readUint16: attempt to read past end of buffer";return(e[t]<<8)+e[t+1]},readInt16:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readInt16: position cannot be less than 0";if(t+2>e.length)throw"bigEndianByteArrayParser.readInt16: attempt to read past end of buffer";var n=(e[t]<<8)+e[t+1];return 32768&n&&(n=n-65535-1),n},readUint32:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readUint32: position cannot be less than 0";if(t+4>e.length)throw"bigEndianByteArrayParser.readUint32: attempt to read past end of buffer";return 256*(256*(256*e[t]+e[t+1])+e[t+2])+e[t+3]},readInt32:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readInt32: position cannot be less than 0";if(t+4>e.length)throw"bigEndianByteArrayParser.readInt32: attempt to read past end of buffer";return(e[t]<<24)+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3]},readFloat:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readFloat: position cannot be less than 0";if(t+4>e.length)throw"bigEndianByteArrayParser.readFloat: attempt to read past end of buffer";var n=new Uint8Array(4);return n[3]=e[t],n[2]=e[t+1],n[1]=e[t+2],n[0]=e[t+3],new Float32Array(n.buffer)[0]},readDouble:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readDouble: position cannot be less than 0";if(t+8>e.length)throw"bigEndianByteArrayParser.readDouble: attempt to read past end of buffer";var n=new Uint8Array(8);return n[7]=e[t],n[6]=e[t+1],n[5]=e[t+2],n[4]=e[t+3],n[3]=e[t+4],n[2]=e[t+5],n[1]=e[t+6],n[0]=e[t+7],new Float64Array(n.buffer)[0]}}},"./byteArrayParser.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readFixedString=function(e,t,n){if(n<0)throw"dicomParser.readFixedString - length cannot be less than 0";if(t+n>e.length)throw"dicomParser.readFixedString: attempt to read past end of buffer";for(var r,a="",i=0;i<n;i++){if(0===(r=e[t+i]))return t+=n,a;a+=String.fromCharCode(r)}return a}},"./byteStream.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(r=n("./sharedCopy.js"))&&r.__esModule?r:{default:r},o=n("./byteArrayParser.js"),s=function(){function t(n,r,a){if(function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),void 0===n)throw"dicomParser.ByteStream: missing required parameter 'byteArrayParser'";if(void 0===r)throw"dicomParser.ByteStream: missing required parameter 'byteArray'";if(r instanceof Uint8Array==0&&r instanceof e==0)throw"dicomParser.ByteStream: parameter byteArray is not of type Uint8Array or Buffer";if(a<0)throw"dicomParser.ByteStream: parameter 'position' cannot be less than 0";if(a>=r.length)throw"dicomParser.ByteStream: parameter 'position' cannot be greater than or equal to 'byteArray' length";this.byteArrayParser=n,this.byteArray=r,this.position=a||0,this.warnings=[]}return a(t,[{key:"seek",value:function(e){if(this.position+e<0)throw"dicomParser.ByteStream.prototype.seek: cannot seek to position < 0";this.position+=e}},{key:"readByteStream",value:function(e){if(this.position+e>this.byteArray.length)throw"dicomParser.ByteStream.prototype.readByteStream: readByteStream - buffer overread";var n=(0,i.default)(this.byteArray,this.position,e);return this.position+=e,new t(this.byteArrayParser,n)}},{key:"readUint16",value:function(){var e=this.byteArrayParser.readUint16(this.byteArray,this.position);return this.position+=2,e}},{key:"readUint32",value:function(){var e=this.byteArrayParser.readUint32(this.byteArray,this.position);return this.position+=4,e}},{key:"readFixedString",value:function(e){var t=(0,o.readFixedString)(this.byteArray,this.position,e);return this.position+=e,t}}]),t}();t.default=s}).call(this,n("../node_modules/buffer/index.js").Buffer)},"./dataSet.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n("./byteArrayParser.js");function i(e,t){return void 0!==e.parser?e.parser:t}var o=function(){function e(t,n,r){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.byteArrayParser=t,this.byteArray=n,this.elements=r}return r(e,[{key:"uint16",value:function(e,t){var n=this.elements[e];if(t=void 0!==t?t:0,n&&0!==n.length)return i(n,this.byteArrayParser).readUint16(this.byteArray,n.dataOffset+2*t)}},{key:"int16",value:function(e,t){var n=this.elements[e];if(t=void 0!==t?t:0,n&&0!==n.length)return i(n,this.byteArrayParser).readInt16(this.byteArray,n.dataOffset+2*t)}},{key:"uint32",value:function(e,t){var n=this.elements[e];if(t=void 0!==t?t:0,n&&0!==n.length)return i(n,this.byteArrayParser).readUint32(this.byteArray,n.dataOffset+4*t)}},{key:"int32",value:function(e,t){var n=this.elements[e];if(t=void 0!==t?t:0,n&&0!==n.length)return i(n,this.byteArrayParser).readInt32(this.byteArray,n.dataOffset+4*t)}},{key:"float",value:function(e,t){var n=this.elements[e];if(t=void 0!==t?t:0,n&&0!==n.length)return i(n,this.byteArrayParser).readFloat(this.byteArray,n.dataOffset+4*t)}},{key:"double",value:function(e,t){var n=this.elements[e];if(t=void 0!==t?t:0,n&&0!==n.length)return i(n,this.byteArrayParser).readDouble(this.byteArray,n.dataOffset+8*t)}},{key:"numStringValues",value:function(e){var t=this.elements[e];if(t&&t.length>0){var n=(0,a.readFixedString)(this.byteArray,t.dataOffset,t.length).match(/\\/g);return null===n?1:n.length+1}}},{key:"string",value:function(e,t){var n=this.elements[e];if(n&&n.length>0){var r=(0,a.readFixedString)(this.byteArray,n.dataOffset,n.length);return t>=0?r.split("\\")[t].trim():r.trim()}}},{key:"text",value:function(e,t){var n=this.elements[e];if(n&&n.length>0){var r=(0,a.readFixedString)(this.byteArray,n.dataOffset,n.length);return t>=0?r.split("\\")[t].replace(/ +$/,""):r.replace(/ +$/,"")}}},{key:"floatString",value:function(e,t){var n=this.elements[e];if(n&&n.length>0){var r=this.string(e,t=void 0!==t?t:0);if(void 0!==r)return parseFloat(r)}}},{key:"intString",value:function(e,t){var n=this.elements[e];if(n&&n.length>0){var r=this.string(e,t=void 0!==t?t:0);if(void 0!==r)return parseInt(r)}}},{key:"attributeTag",value:function(e){var t=this.elements[e];if(t&&4===t.length){var n=i(t,this.byteArrayParser).readUint16,r=this.byteArray,a=t.dataOffset;return"x"+("00000000"+(256*n(r,a)*256+n(r,a+2)).toString(16)).substr(-8)}}}]),e}();t.default=o},"./findAndSetUNElementLength.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(void 0===e)throw"dicomParser.findAndSetUNElementLength: missing required parameter 'byteStream'";for(var n=e.byteArray.length-8;e.position<=n;)if(65534===e.readUint16()&&57565===e.readUint16())return 0!==e.readUint32()&&e.warnings("encountered non zero length following item delimiter at position "+(e.position-4)+" while reading element of undefined length with tag "+t.tag),void(t.length=e.position-t.dataOffset);t.length=e.byteArray.length-t.dataOffset,e.seek(e.byteArray.length-e.position)}},"./findEndOfEncapsulatedPixelData.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(void 0===e)throw"dicomParser.findEndOfEncapsulatedElement: missing required parameter 'byteStream'";if(void 0===t)throw"dicomParser.findEndOfEncapsulatedElement: missing required parameter 'element'";if(t.encapsulatedPixelData=!0,t.basicOffsetTable=[],t.fragments=[],"xfffee000"!==(0,a.default)(e))throw"dicomParser.findEndOfEncapsulatedElement: basic offset table not found";for(var r=e.readUint32()/4,i=0;i<r;i++){var o=e.readUint32();t.basicOffsetTable.push(o)}for(var s=e.position;e.position<e.byteArray.length;){var l=(0,a.default)(e),u=e.readUint32();if("xfffee0dd"===l)return e.seek(u),void(t.length=e.position-t.dataOffset);if("xfffee000"!==l)return n&&n.push("unexpected tag "+l+" while searching for end of pixel data element with undefined length"),u>e.byteArray.length-e.position&&(u=e.byteArray.length-e.position),t.fragments.push({offset:e.position-s-8,position:e.position,length:u}),e.seek(u),void(t.length=e.position-t.dataOffset);t.fragments.push({offset:e.position-s-8,position:e.position,length:u}),e.seek(u)}n&&n.push("pixel data element "+t.tag+" missing sequence delimiter tag xfffee0dd")};var r,a=(r=n("./readTag.js"))&&r.__esModule?r:{default:r}},"./findItemDelimitationItem.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(void 0===e)throw"dicomParser.readDicomElementImplicit: missing required parameter 'byteStream'";for(var n=e.byteArray.length-8;e.position<=n;)if(65534===e.readUint16()&&57357===e.readUint16())return 0!==e.readUint32()&&e.warnings("encountered non zero length following item delimiter at position "+(e.position-4)+" while reading element of undefined length with tag "+t.tag),void(t.length=e.position-t.dataOffset);t.length=e.byteArray.length-t.dataOffset,e.seek(e.byteArray.length-e.position)}},"./index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readTag=t.readSequenceItem=t.readSequenceItemsImplicit=t.readSequenceItemsExplicit=t.readPart10Header=t.readEncapsulatedPixelDataFromFragments=t.readEncapsulatedPixelData=t.readEncapsulatedImageFrame=t.readDicomElementImplicit=t.readDicomElementExplicit=t.parseDicom=t.littleEndianByteArrayParser=t.findItemDelimitationItemAndSetElementLength=t.findEndOfEncapsulatedElement=t.findAndSetUNElementLength=t.DataSet=t.sharedCopy=t.ByteStream=t.bigEndianByteArrayParser=t.version=t.alloc=t.readFixedString=t.parseDicomDataSetImplicit=t.parseDicomDataSetExplicit=t.createJPEGBasicOffsetTable=t.explicitDataSetToJS=t.explicitElementToString=t.parseDA=t.parseTM=t.parsePN=t.isPrivateTag=t.isStringVr=void 0;var r=n("./util/index.js"),a=n("./parseDicomDataSet.js"),i=n("./byteArrayParser.js"),o=C(n("./alloc.js")),s=C(n("./version.js")),l=C(n("./bigEndianByteArrayParser.js")),u=C(n("./byteStream.js")),d=C(n("./sharedCopy.js")),c=C(n("./dataSet.js")),f=C(n("./findAndSetUNElementLength.js")),h=C(n("./findEndOfEncapsulatedPixelData.js")),p=C(n("./findItemDelimitationItem.js")),m=C(n("./littleEndianByteArrayParser.js")),g=C(n("./parseDicom.js")),v=C(n("./readDicomElementExplicit.js")),y=C(n("./readDicomElementImplicit.js")),b=C(n("./readEncapsulatedImageFrame.js")),w=C(n("./readEncapsulatedPixelData.js")),x=C(n("./readEncapsulatedPixelDataFromFragments.js")),_=C(n("./readPart10Header.js")),E=C(n("./readSequenceElementExplicit.js")),T=C(n("./readSequenceElementImplicit.js")),j=C(n("./readSequenceItem.js")),S=C(n("./readTag.js"));function C(e){return e&&e.__esModule?e:{default:e}}var O={isStringVr:r.isStringVr,isPrivateTag:r.isPrivateTag,parsePN:r.parsePN,parseTM:r.parseTM,parseDA:r.parseDA,explicitElementToString:r.explicitElementToString,explicitDataSetToJS:r.explicitDataSetToJS,createJPEGBasicOffsetTable:r.createJPEGBasicOffsetTable,parseDicomDataSetExplicit:a.parseDicomDataSetExplicit,parseDicomDataSetImplicit:a.parseDicomDataSetImplicit,readFixedString:i.readFixedString,alloc:o.default,version:s.default,bigEndianByteArrayParser:l.default,ByteStream:u.default,sharedCopy:d.default,DataSet:c.default,findAndSetUNElementLength:f.default,findEndOfEncapsulatedElement:h.default,findItemDelimitationItemAndSetElementLength:p.default,littleEndianByteArrayParser:m.default,parseDicom:g.default,readDicomElementExplicit:v.default,readDicomElementImplicit:y.default,readEncapsulatedImageFrame:b.default,readEncapsulatedPixelData:w.default,readEncapsulatedPixelDataFromFragments:x.default,readPart10Header:_.default,readSequenceItemsExplicit:E.default,readSequenceItemsImplicit:T.default,readSequenceItem:j.default,readTag:S.default};t.isStringVr=r.isStringVr,t.isPrivateTag=r.isPrivateTag,t.parsePN=r.parsePN,t.parseTM=r.parseTM,t.parseDA=r.parseDA,t.explicitElementToString=r.explicitElementToString,t.explicitDataSetToJS=r.explicitDataSetToJS,t.createJPEGBasicOffsetTable=r.createJPEGBasicOffsetTable,t.parseDicomDataSetExplicit=a.parseDicomDataSetExplicit,t.parseDicomDataSetImplicit=a.parseDicomDataSetImplicit,t.readFixedString=i.readFixedString,t.alloc=o.default,t.version=s.default,t.bigEndianByteArrayParser=l.default,t.ByteStream=u.default,t.sharedCopy=d.default,t.DataSet=c.default,t.findAndSetUNElementLength=f.default,t.findEndOfEncapsulatedElement=h.default,t.findItemDelimitationItemAndSetElementLength=p.default,t.littleEndianByteArrayParser=m.default,t.parseDicom=g.default,t.readDicomElementExplicit=v.default,t.readDicomElementImplicit=y.default,t.readEncapsulatedImageFrame=b.default,t.readEncapsulatedPixelData=w.default,t.readEncapsulatedPixelDataFromFragments=x.default,t.readPart10Header=_.default,t.readSequenceItemsExplicit=E.default,t.readSequenceItemsImplicit=T.default,t.readSequenceItem=j.default,t.readTag=S.default,t.default=O},"./littleEndianByteArrayParser.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={readUint16:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readUint16: position cannot be less than 0";if(t+2>e.length)throw"littleEndianByteArrayParser.readUint16: attempt to read past end of buffer";return e[t]+256*e[t+1]},readInt16:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readInt16: position cannot be less than 0";if(t+2>e.length)throw"littleEndianByteArrayParser.readInt16: attempt to read past end of buffer";var n=e[t]+(e[t+1]<<8);return 32768&n&&(n=n-65535-1),n},readUint32:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readUint32: position cannot be less than 0";if(t+4>e.length)throw"littleEndianByteArrayParser.readUint32: attempt to read past end of buffer";return e[t]+256*e[t+1]+256*e[t+2]*256+256*e[t+3]*256*256},readInt32:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readInt32: position cannot be less than 0";if(t+4>e.length)throw"littleEndianByteArrayParser.readInt32: attempt to read past end of buffer";return e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24)},readFloat:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readFloat: position cannot be less than 0";if(t+4>e.length)throw"littleEndianByteArrayParser.readFloat: attempt to read past end of buffer";var n=new Uint8Array(4);return n[0]=e[t],n[1]=e[t+1],n[2]=e[t+2],n[3]=e[t+3],new Float32Array(n.buffer)[0]},readDouble:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readDouble: position cannot be less than 0";if(t+8>e.length)throw"littleEndianByteArrayParser.readDouble: attempt to read past end of buffer";var n=new Uint8Array(8);return n[0]=e[t],n[1]=e[t+1],n[2]=e[t+2],n[3]=e[t+3],n[4]=e[t+4],n[5]=e[t+5],n[6]=e[t+6],n[7]=e[t+7],new Float64Array(n.buffer)[0]}}},"./parseDicom.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t,f){if(void 0===t)throw"dicomParser.parseDicom: missing required parameter 'byteArray'";return function(e,t){for(var n in e.elements)e.elements.hasOwnProperty(n)&&(t.elements[n]=e.elements[n]);return void 0!==e.warnings&&(t.warnings=e.warnings.concat(t.warnings)),t}(h=(0,l.default)(t,f),function(l){var h=function(e){if(void 0===e.elements.x00020010)throw"dicomParser.parseDicom: missing required meta header attribute 0002,0010";var n=e.elements.x00020010;return d.readFixedString(t,n.dataOffset,n.length)}(l),p=function(e){return"1.2.840.10008.1.2"!==e}(h),m=function(o,l){if("1.2.840.10008.1.2.1.99"===o){if(f&&f.inflater){var d=f.inflater(t,l);return new i.default(s.default,d,0)}if(void 0!==e&&this.module!==e){var c=n("../node_modules/browserify-zlib/lib/index.js"),h=(0,u.default)(t,l,t.length-l),p=c.inflateRawSync(h),m=(0,r.default)(t,p.length+l);return t.copy(m,0,0,l),p.copy(m,l),new i.default(s.default,m,0)}if("undefined"!=typeof pako){var g=t.slice(l),v=pako.inflateRaw(g),y=(0,r.default)(t,v.length+l);return y.set(t.slice(0,l),0),y.set(v,l),new i.default(s.default,y,0)}throw"dicomParser.parseDicom: no inflater available to handle deflate transfer syntax"}return new i.default("1.2.840.10008.1.2.2"===o?a.default:s.default,t,l)}(h,l.position),g=new o.default(m.byteArrayParser,m.byteArray,{});g.warnings=m.warnings;try{p?c.parseDicomDataSetExplicit(g,m,m.byteArray.length,f):c.parseDicomDataSetImplicit(g,m,m.byteArray.length,f)}catch(v){throw{exception:v,dataSet:g}}return g}(h));var h};var r=h(n("./alloc.js")),a=h(n("./bigEndianByteArrayParser.js")),i=h(n("./byteStream.js")),o=h(n("./dataSet.js")),s=h(n("./littleEndianByteArrayParser.js")),l=h(n("./readPart10Header.js")),u=h(n("./sharedCopy.js")),d=f(n("./byteArrayParser.js")),c=f(n("./parseDicomDataSet.js"));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}}).call(this,n("../node_modules/webpack/buildin/module.js")(e))},"./parseDicomDataSet.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDicomDataSetExplicit=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(void 0===t)throw"dicomParser.parseDicomDataSetExplicit: missing required parameter 'byteStream'";if((n=void 0===n?t.byteArray.length:n)<t.position||n>t.byteArray.length)throw"dicomParser.parseDicomDataSetExplicit: invalid value for parameter 'maxP osition'";for(var i=e.elements;t.position<n;){var o=(0,r.default)(t,e.warnings,a.untilTag);if(i[o.tag]=o,o.tag===a.untilTag)return}if(t.position>n)throw"dicomParser:parseDicomDataSetExplicit: buffer overrun"},t.parseDicomDataSetImplicit=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(void 0===t)throw"dicomParser.parseDicomDataSetImplicit: missing required parameter 'byteStream'";if((n=void 0===n?e.byteArray.length:n)<t.position||n>t.byteArray.length)throw"dicomParser.parseDicomDataSetImplicit: invalid value for parameter 'maxPosition'";for(var i=e.elements;t.position<n;){var o=(0,a.default)(t,r.untilTag,r.vrCallback);if(i[o.tag]=o,o.tag===r.untilTag)return}};var r=i(n("./readDicomElementExplicit.js")),a=i(n("./readDicomElementImplicit.js"));function i(e){return e&&e.__esModule?e:{default:e}}},"./readDicomElementExplicit.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(void 0===e)throw"dicomParser.readDicomElementExplicit: missing required parameter 'byteStream'";var l={tag:(0,o.default)(e),vr:e.readFixedString(2)};return 2===u(l.vr)?(l.length=e.readUint16(),l.dataOffset=e.position):(e.seek(2),l.length=e.readUint32(),l.dataOffset=e.position),4294967295===l.length&&(l.hadUndefinedLength=!0),l.tag===n?l:"SQ"===l.vr?((0,s.default)(e,l,t),l):4294967295===l.length?"x7fe00010"===l.tag?((0,r.default)(e,l,t),l):"UN"===l.vr?((0,a.default)(e,l),l):((0,i.default)(e,l),l):(e.seek(l.length),l)};var r=l(n("./findEndOfEncapsulatedPixelData.js")),a=l(n("./findAndSetUNElementLength.js")),i=l(n("./findItemDelimitationItem.js")),o=l(n("./readTag.js")),s=l(n("./readSequenceElementExplicit.js"));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){return"OB"===e||"OW"===e||"SQ"===e||"OF"===e||"UT"===e||"UN"===e?4:2}},"./readDicomElementImplicit.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(void 0===e)throw"dicomParser.readDicomElementImplicit: missing required parameter 'byteStream'";var o={tag:(0,i.default)(e),length:e.readUint32(),dataOffset:e.position};return 4294967295===o.length&&(o.hadUndefinedLength=!0),o.tag===t?o:s(o,e,n)?((0,a.default)(e,o),o):o.hadUndefinedLength?((0,r.default)(e,o),o):(e.seek(o.length),o)};var r=o(n("./findItemDelimitationItem.js")),a=o(n("./readSequenceElementImplicit.js")),i=o(n("./readTag.js"));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e,t,n){if(void 0!==n)return"SQ"===n(e.tag);if(t.position+4<=t.byteArray.length){var r=(0,i.default)(t);return t.seek(-4),"xfffee000"===r||"xfffee0dd"===r}return t.warnings.push("eof encountered before finding sequence item tag or sequence delimiter tag in peeking to determine VR"),!1}},"./readEncapsulatedImageFrame.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,s){if(void 0===e)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'dataSet'";if(void 0===t)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'pixelDataElement'";if(void 0===n)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'frameIndex'";if(void 0===(r=r||t.basicOffsetTable))throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' does not have basicOffsetTable";if("x7fe00010"!==t.tag)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010)";if(!0!==t.encapsulatedPixelData)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==t.hadUndefinedLength)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have undefined length";if(void 0===t.fragments)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have fragments";if(0===r.length)throw"dicomParser.readEncapsulatedImageFrame: basicOffsetTable has zero entries";if(n<0)throw"dicomParser.readEncapsulatedImageFrame: parameter 'frameIndex' must be >= 0";if(n>=r.length)throw"dicomParser.readEncapsulatedImageFrame: parameter 'frameIndex' must be < basicOffsetTable.length";var l=i(s=s||t.fragments,r[n]);if(void 0===l)throw"dicomParser.readEncapsulatedImageFrame: unable to find fragment that matches basic offset table entry";var u=o(n,r,s,l);return(0,a.default)(e,t,l,u,s)};var r,a=(r=n("./readEncapsulatedPixelDataFromFragments.js"))&&r.__esModule?r:{default:r},i=function(e,t){for(var n=0;n<e.length;n++)if(e[n].offset===t)return n},o=function(e,t,n,r){if(e===t.length-1)return n.length-r;for(var a=t[e+1],i=r+1;i<n.length;i++)if(n[i].offset===a)return i-r;throw"dicomParser.calculateNumberOfFragmentsForFrame: could not find fragment with offset matching basic offset table"}},"./readEncapsulatedPixelData.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(o||(o=!0,console&&console.log&&console.log("WARNING: dicomParser.readEncapsulatedPixelData() has been deprecated")),void 0===e)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'dataSet'";if(void 0===t)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'element'";if(void 0===n)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'frame'";if("x7fe00010"!==t.tag)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to non pixel data tag (expected tag = x7fe00010)";if(!0!==t.encapsulatedPixelData)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(!0!==t.hadUndefinedLength)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.basicOffsetTable)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.fragments)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(n<0)throw"dicomParser.readEncapsulatedPixelData: parameter 'frame' must be >= 0";return 0!==t.basicOffsetTable.length?(0,r.default)(e,t,n):(0,a.default)(e,t,0,t.fragments.length)};var r=i(n("./readEncapsulatedImageFrame.js")),a=i(n("./readEncapsulatedPixelDataFromFragments.js"));function i(e){return e&&e.__esModule?e:{default:e}}var o=!1},"./readEncapsulatedPixelDataFromFragments.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,s,u){if(u=u||t.fragments,void 0===e)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'dataSet'";if(void 0===t)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'pixelDataElement'";if(void 0===n)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'startFragmentIndex'";if(void 0===(s=s||1))throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'numFragments'";if("x7fe00010"!==t.tag)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010";if(!0!==t.encapsulatedPixelData)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==t.hadUndefinedLength)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.basicOffsetTable)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.fragments)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(t.fragments.length<=0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(n<0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragmentIndex' must be >= 0";if(n>=t.fragments.length)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragmentIndex' must be < number of fragments";if(s<1)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'numFragments' must be > 0";if(n+s>t.fragments.length)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragment' + 'numFragments' < number of fragments";var d=new a.default(e.byteArrayParser,e.byteArray,t.dataOffset),c=(0,i.default)(d);if("xfffee000"!==c.tag)throw"dicomParser.readEncapsulatedPixelData: missing basic offset table xfffee000";d.seek(c.length);var f=d.position;if(1===s)return(0,o.default)(d.byteArray,f+u[n].offset+8,u[n].length);for(var h=l(u,n,s),p=(0,r.default)(d.byteArray,h),m=0,g=n;g<n+s;g++)for(var v=f+u[g].offset+8,y=0;y<u[g].length;y++)p[m++]=d.byteArray[v++];return p};var r=s(n("./alloc.js")),a=s(n("./byteStream.js")),i=s(n("./readSequenceItem.js")),o=s(n("./sharedCopy.js"));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e,t,n){for(var r=0,a=t;a<t+n;a++)r+=e[a].length;return r}},"./readPart10Header.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(void 0===e)throw"dicomParser.readPart10Header: missing required parameter 'byteArray'";var n=new r.default(i.default,e);return function(){!function(){if(n.seek(128),"DICM"!==n.readFixedString(4))throw"dicomParser.readPart10Header: DICM prefix not found at location 132 - this is not a valid DICOM P10 file."}();for(var e=[],t={};n.position<n.byteArray.length;){var r=n.position,s=(0,o.default)(n,e);if(s.tag>"x0002ffff"){n.position=r;break}s.parser=i.default,t[s.tag]=s}var l=new a.default(n.byteArrayParser,n.byteArray,t);return l.warnings=n.warnings,l.position=n.position,l}()};var r=s(n("./byteStream.js")),a=s(n("./dataSet.js")),i=s(n("./littleEndianByteArrayParser.js")),o=s(n("./readDicomElementExplicit.js"));function s(e){return e&&e.__esModule?e:{default:e}}},"./readSequenceElementExplicit.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(void 0===e)throw"dicomParser.readSequenceItemsExplicit: missing required parameter 'byteStream'";if(void 0===t)throw"dicomParser.readSequenceItemsExplicit: missing required parameter 'element'";t.items=[],4294967295===t.length?function(e,t,n){for(;e.position+4<=e.byteArray.length;){var r=(0,o.default)(e);if(e.seek(-4),"xfffee0dd"===r)return t.length=e.position-t.dataOffset,e.seek(8),t;var a=u(e,n);t.items.push(a)}n.push("eof encountered before finding sequence delimitation tag while reading sequence of undefined length"),t.length=e.position-t.dataOffset}(e,t,n):function(e,t,n){for(var r=t.dataOffset+t.length;e.position<r;){var a=u(e,n);t.items.push(a)}}(e,t,n)};var r=l(n("./dataSet.js")),a=l(n("./readDicomElementExplicit.js")),i=l(n("./readSequenceItem.js")),o=l(n("./readTag.js")),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("./parseDicomDataSet.js"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=(0,i.default)(e);return 4294967295===n.length?(n.hadUndefinedLength=!0,n.dataSet=function(e,t){for(var n={};e.position<e.byteArray.length;){var i=(0,a.default)(e,t);if(n[i.tag]=i,"xfffee00d"===i.tag)return new r.default(e.byteArrayParser,e.byteArray,n)}return t.push("eof encountered before finding item delimiter tag while reading sequence item of undefined length"),new r.default(e.byteArrayParser,e.byteArray,n)}(e,t),n.length=e.position-n.dataOffset):(n.dataSet=new r.default(e.byteArrayParser,e.byteArray,{}),s.parseDicomDataSetExplicit(n.dataSet,e,e.position+n.length)),n}},"./readSequenceElementImplicit.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(void 0===e)throw"dicomParser.readSequenceItemsImplicit: missing required parameter 'byteStream'";if(void 0===t)throw"dicomParser.readSequenceItemsImplicit: missing required parameter 'element'";t.items=[],4294967295===t.length?function(e,t,n){for(;e.position+4<=e.byteArray.length;){var r=(0,o.default)(e);if(e.seek(-4),"xfffee0dd"===r)return t.length=e.position-t.dataOffset,e.seek(8),t;var a=u(e,n);t.items.push(a)}e.warnings.push("eof encountered before finding sequence delimiter in sequence of undefined length"),t.length=e.byteArray.length-t.dataOffset}(e,t,n):function(e,t,n){for(var r=t.dataOffset+t.length;e.position<r;){var a=u(e,n);t.items.push(a)}}(e,t,n)};var r=l(n("./dataSet.js")),a=l(n("./readDicomElementImplicit.js")),i=l(n("./readSequenceItem.js")),o=l(n("./readTag.js")),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("./parseDicomDataSet.js"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=(0,i.default)(e);return 4294967295===n.length?(n.hadUndefinedLength=!0,n.dataSet=function(e,t){for(var n={};e.position<e.byteArray.length;){var i=(0,a.default)(e,void 0,t);if(n[i.tag]=i,"xfffee00d"===i.tag)return new r.default(e.byteArrayParser,e.byteArray,n)}return e.warnings.push("eof encountered before finding sequence item delimiter in sequence item of undefined length"),new r.default(e.byteArrayParser,e.byteArray,n)}(e,t),n.length=e.position-n.dataOffset):(n.dataSet=new r.default(e.byteArrayParser,e.byteArray,{}),s.parseDicomDataSetImplicit(n.dataSet,e,e.position+n.length,{vrCallback:t})),n}},"./readSequenceItem.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(void 0===e)throw"dicomParser.readSequenceItem: missing required parameter 'byteStream'";var t={tag:(0,a.default)(e),length:e.readUint32(),dataOffset:e.position};if("xfffee000"!==t.tag)throw"dicomParser.readSequenceItem: item tag (FFFE,E000) not found at offset "+e.position;return t};var r,a=(r=n("./readTag.js"))&&r.__esModule?r:{default:r}},"./readTag.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(void 0===e)throw"dicomParser.readTag: missing required parameter 'byteStream'";return"x"+("00000000"+(256*e.readUint16()*256+e.readUint16()).toString(16)).substr(-8)}},"./sharedCopy.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t,n,r){if(void 0!==e&&t instanceof e)return t.slice(n,n+r);if(t instanceof Uint8Array)return new Uint8Array(t.buffer,t.byteOffset+n,r);throw"dicomParser.from: unknown type for byteArray"}}).call(this,n("../node_modules/buffer/index.js").Buffer)},"./util/createJPEGBasicOffsetTable.js":function(e,t,n){"use strict";function r(e,t){return 255===e.byteArray[t]&&217===e.byteArray[t+1]}function a(e,t,n){var a=t.fragments[n];return!(!r(e,a.position+a.length-2)&&!r(e,a.position+a.length-3))}function i(e,t,n){for(var r=n;r<t.fragments.length;r++)if(a(e,t,r))return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(void 0===e)throw"dicomParser.createJPEGBasicOffsetTable: missing required parameter dataSet";if(void 0===t)throw"dicomParser.createJPEGBasicOffsetTable: missing required parameter pixelDataElement";if("x7fe00010"!==t.tag)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010'";if(!0!==t.encapsulatedPixelData)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==t.hadUndefinedLength)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.basicOffsetTable)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.fragments)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(t.fragments.length<=0)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(n&&n.length<=0)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'fragments' must not be zero length";n=n||t.fragments;for(var r=[],a=0;;){r.push(t.fragments[a].offset);var o=i(e,t,a);if(void 0===o||o===t.fragments.length-1)return r;a=o+1}}},"./util/dataSetToJS.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,n){if(void 0===t)throw"dicomParser.explicitDataSetToJS: missing required parameter dataSet";n=n||{omitPrivateAttibutes:!0,maxElementLength:128};var r={};for(var o in t.elements){var s=t.elements[o];if(!0!==n.omitPrivateAttibutes||!i.isPrivateTag(o))if(s.items){for(var l=[],u=0;u<s.items.length;u++)l.push(e(s.items[u].dataSet,n));r[o]=l}else{var d;d=void 0,s.length<n.maxElementLength&&(d=(0,a.default)(t,s)),r[o]=void 0!==d?d:{dataOffset:s.dataOffset,length:s.length}}}return r};var r,a=(r=n("./util/elementToString.js"))&&r.__esModule?r:{default:r},i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("./util/util.js"))},"./util/elementToString.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(void 0===e||void 0===t)throw"dicomParser.explicitElementToString: missing required parameters";if(void 0===t.vr)throw"dicomParser.explicitElementToString: cannot convert implicit element to string";var n,a=t.vr,i=t.tag;function o(t,n){for(var r="",a=0;a<t;a++)0!==a&&(r+="/"),r+=n.call(e,i,a).toString();return r}if(!0===r.isStringVr(a))n=e.string(i);else{if("AT"===a){var s=e.uint32(i);if(void 0===s)return;return s<0&&(s=4294967295+s+1),"x"+s.toString(16).toUpperCase()}"US"===a?n=o(t.length/2,e.uint16):"SS"===a?n=o(t.length/2,e.int16):"UL"===a?n=o(t.length/4,e.uint32):"SL"===a?n=o(t.length/4,e.int32):"FD"===a?n=o(t.length/8,e.double):"FL"===a&&(n=o(t.length/4,e.float))}return n};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("./util/util.js"))},"./util/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createJPEGBasicOffsetTable=t.explicitDataSetToJS=t.explicitElementToString=t.parseDA=t.parseTM=t.parsePN=t.isPrivateTag=t.isStringVr=void 0;var r=n("./util/util.js"),a=u(n("./util/parseTM.js")),i=u(n("./util/parseDA.js")),o=u(n("./util/elementToString.js")),s=u(n("./util/dataSetToJS.js")),l=u(n("./util/createJPEGBasicOffsetTable.js"));function u(e){return e&&e.__esModule?e:{default:e}}t.isStringVr=r.isStringVr,t.isPrivateTag=r.isPrivateTag,t.parsePN=r.parsePN,t.parseTM=a.default,t.parseDA=i.default,t.explicitElementToString=o.default,t.explicitDataSetToJS=s.default,t.createJPEGBasicOffsetTable=l.default},"./util/parseDA.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e&&8===e.length){var n=parseInt(e.substring(0,4),10),r=parseInt(e.substring(4,6),10),a=parseInt(e.substring(6,8),10);if(t&&1!=(i=a,o=r,s=n,!isNaN(s)&&o>0&&o<=12&&i>0&&i<=function(e,t){switch(e){case 2:return t%4==0&&t%100||t%400==0?29:28;case 9:case 4:case 6:case 11:return 30;default:return 31}}(o,s)))throw"invalid DA '"+e+"'";return{year:n,month:r,day:a}}var i,o,s;if(t)throw"invalid DA '"+e+"'"}},"./util/parseTM.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e.length>=2){var n=parseInt(e.substring(0,2),10),r=e.length>=4?parseInt(e.substring(2,4),10):void 0,a=e.length>=6?parseInt(e.substring(4,6),10):void 0,i=e.length>=8?parseInt(e.substring(7,13),10):void 0;if(t&&(isNaN(n)||void 0!==r&&isNaN(r)||void 0!==a&&isNaN(a)||void 0!==i&&isNaN(i)||n<0||n>23||r&&(r<0||r>59)||a&&(a<0||a>59)||i&&(i<0||i>999999)))throw"invalid TM '"+e+"'";return{hours:n,minutes:r,seconds:a,fractionalSeconds:i}}if(t)throw"invalid TM '"+e+"'"}},"./util/util.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={AE:!0,AS:!0,AT:!1,CS:!0,DA:!0,DS:!0,DT:!0,FL:!1,FD:!1,IS:!0,LO:!0,LT:!0,OB:!1,OD:!1,OF:!1,OW:!1,PN:!0,SH:!0,SL:!1,SQ:!1,SS:!1,ST:!0,TM:!0,UI:!0,UL:!1,UN:void 0,UR:!0,US:!1,UT:!0};t.isStringVr=function(e){return r[e]},t.isPrivateTag=function(e){return parseInt(e[4],10)%2==1},t.parsePN=function(e){if(void 0!==e){var t=e.split("^");return{familyName:t[0],givenName:t[1],middleName:t[2],prefix:t[3],suffix:t[4]}}}},"./version.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="1.8.2"},0:function(e,t){},1:function(e,t){}})}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("cornerstoneWADOImageLoader",[],t):"object"==typeof exports?exports.cornerstoneWADOImageLoader=t():e.cornerstoneWADOImageLoader=t()}(this,function(){return function(e){var t=this.webpackHotUpdate_name_;this.webpackHotUpdate_name_=function(e,n){!function(e,t){if(x[e]&&w[e]){for(var n in w[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(m[n]=t[n]);0==--v&&0===y&&j()}}(e,n),t&&t(e,n)};var n,r=!0,a="8ffa164be7f9a32e3dae",i=1e4,o={},s=[],l=[];function u(e){var t=C[e];if(!t)return O;var r=function(r){return t.hot.active?(C[r]?-1===C[r].parents.indexOf(e)&&C[r].parents.push(e):(s=[e],n=r),-1===t.children.indexOf(r)&&t.children.push(r)):(console.warn("[HMR] unexpected require("+r+") from disposed module "+e),s=[]),O(r)},a=function(e){return{configurable:!0,enumerable:!0,get:function(){return O[e]},set:function(t){O[e]=t}}};for(var i in O)Object.prototype.hasOwnProperty.call(O,i)&&"e"!==i&&"t"!==i&&Object.defineProperty(r,i,a(i));return r.e=function(e){return"ready"===f&&h("prepare"),y++,O.e(e).then(t,function(e){throw t(),e});function t(){y--,"prepare"===f&&(b[e]||T(e),0===y&&0===v&&j())}},r.t=function(e,t){return 1&t&&(e=r(e)),O.t(e,-2&t)},r}function d(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:n!==e,active:!0,accept:function(e,n){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._acceptedDependencies[e[r]]=n||function(){};else t._acceptedDependencies[e]=n||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:E,apply:S,status:function(e){if(!e)return f;c.push(e)},addStatusHandler:function(e){c.push(e)},removeStatusHandler:function(e){var t=c.indexOf(e);t>=0&&c.splice(t,1)},data:o[e]};return n=void 0,t}var c=[],f="idle";function h(e){f=e;for(var t=0;t<c.length;t++)c[t].call(null,e)}var p,m,g,v=0,y=0,b={},w={},x={};function _(e){return+e+""===e?+e:e}function E(e){if("idle"!==f)throw new Error("check() is only allowed in idle status");return r=e,h("check"),(t=i,t=t||1e4,new Promise(function(e,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var r=new XMLHttpRequest,i=O.p+""+a+".hot-update.json";r.open("GET",i,!0),r.timeout=t,r.send(null)}catch(o){return n(o)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)n(new Error("Manifest request to "+i+" timed out."));else if(404===r.status)e();else if(200!==r.status&&304!==r.status)n(new Error("Manifest request to "+i+" failed."));else{try{var t=JSON.parse(r.responseText)}catch(a){return void n(a)}e(t)}}})).then(function(e){if(!e)return h("idle"),null;w={},b={},x=e.c,g=e.h,h("prepare");var t=new Promise(function(e,t){p={resolve:e,reject:t}});return m={},T("cornerstoneWADOImageLoader"),"prepare"===f&&0===y&&0===v&&j(),t});var t}function T(e){x[e]?(w[e]=!0,v++,function(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("script");n.charset="utf-8",n.src=O.p+""+e+"."+a+".hot-update.js",t.appendChild(n)}(e)):b[e]=!0}function j(){h("ready");var e=p;if(p=null,e)if(r)Promise.resolve().then(function(){return S(r)}).then(function(t){e.resolve(t)},function(t){e.reject(t)});else{var t=[];for(var n in m)Object.prototype.hasOwnProperty.call(m,n)&&t.push(_(n));e.resolve(t)}}function S(t){if("ready"!==f)throw new Error("apply() is only allowed in ready status");var n,r,i,l,u;function d(e){for(var t=[e],n={},r=t.slice().map(function(e){return{chain:[e],id:e}});r.length>0;){var a=r.pop(),i=a.id,o=a.chain;if((l=C[i])&&!l.hot._selfAccepted){if(l.hot._selfDeclined)return{type:"self-declined",chain:o,moduleId:i};if(l.hot._main)return{type:"unaccepted",chain:o,moduleId:i};for(var s=0;s<l.parents.length;s++){var u=l.parents[s],d=C[u];if(d){if(d.hot._declinedDependencies[i])return{type:"declined",chain:o.concat([u]),moduleId:i,parentId:u};-1===t.indexOf(u)&&(d.hot._acceptedDependencies[i]?(n[u]||(n[u]=[]),c(n[u],[i])):(delete n[u],t.push(u),r.push({chain:o.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}t=t||{};var p={},v=[],y={},b=function(){console.warn("[HMR] unexpected require("+E.moduleId+") to disposed module")};for(var w in m)if(Object.prototype.hasOwnProperty.call(m,w)){var E;u=_(w);var T=!1,j=!1,S=!1,P="";switch((E=m[w]?d(u):{type:"disposed",moduleId:w}).chain&&(P="\nUpdate propagation: "+E.chain.join(" -> ")),E.type){case"self-declined":t.onDeclined&&t.onDeclined(E),t.ignoreDeclined||(T=new Error("Aborted because of self decline: "+E.moduleId+P));break;case"declined":t.onDeclined&&t.onDeclined(E),t.ignoreDeclined||(T=new Error("Aborted because of declined dependency: "+E.moduleId+" in "+E.parentId+P));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(E),t.ignoreUnaccepted||(T=new Error("Aborted because "+u+" is not accepted"+P));break;case"accepted":t.onAccepted&&t.onAccepted(E),j=!0;break;case"disposed":t.onDisposed&&t.onDisposed(E),S=!0;break;default:throw new Error("Unexception type "+E.type)}if(T)return h("abort"),Promise.reject(T);if(j)for(u in y[u]=m[u],c(v,E.outdatedModules),E.outdatedDependencies)Object.prototype.hasOwnProperty.call(E.outdatedDependencies,u)&&(p[u]||(p[u]=[]),c(p[u],E.outdatedDependencies[u]));S&&(c(v,[E.moduleId]),y[u]=b)}var I,M=[];for(r=0;r<v.length;r++)C[u=v[r]]&&C[u].hot._selfAccepted&&M.push({module:u,errorHandler:C[u].hot._selfAccepted});h("dispose"),Object.keys(x).forEach(function(e){!1===x[e]&&function(e){delete installedChunks[e]}(e)});for(var D,L=v.slice();L.length>0;)if(u=L.pop(),l=C[u]){var A={},k=l.hot._disposeHandlers;for(i=0;i<k.length;i++)(n=k[i])(A);for(o[u]=A,l.hot.active=!1,delete C[u],delete p[u],i=0;i<l.children.length;i++){var R=C[l.children[i]];R&&(I=R.parents.indexOf(u))>=0&&R.parents.splice(I,1)}}for(u in p)if(Object.prototype.hasOwnProperty.call(p,u)&&(l=C[u]))for(D=p[u],i=0;i<D.length;i++)(I=l.children.indexOf(D[i]))>=0&&l.children.splice(I,1);for(u in h("apply"),a=g,y)Object.prototype.hasOwnProperty.call(y,u)&&(e[u]=y[u]);var U=null;for(u in p)if(Object.prototype.hasOwnProperty.call(p,u)&&(l=C[u])){D=p[u];var N=[];for(r=0;r<D.length;r++)if(n=l.hot._acceptedDependencies[D[r]]){if(-1!==N.indexOf(n))continue;N.push(n)}for(r=0;r<N.length;r++){n=N[r];try{n(D)}catch(H){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:u,dependencyId:D[r],error:H}),t.ignoreErrored||U||(U=H)}}}for(r=0;r<M.length;r++){var B=M[r];s=[u=B.module];try{O(u)}catch(H){if("function"==typeof B.errorHandler)try{B.errorHandler(H)}catch(F){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:u,error:F,originalError:H}),t.ignoreErrored||U||(U=F),U||(U=H)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:u,error:H}),t.ignoreErrored||U||(U=H)}}return U?(h("fail"),Promise.reject(U)):(h("idle"),new Promise(function(e){e(v)}))}var C={};function O(t){if(C[t])return C[t].exports;var n=C[t]={i:t,l:!1,exports:{},hot:d(t),parents:(l=s,s=[],l),children:[]};return e[t].call(n.exports,n,n.exports,u(t)),n.l=!0,n.exports}return O.m=e,O.c=C,O.d=function(e,t,n){O.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},O.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},O.t=function(e,t){if(1&t&&(e=O(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(O.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)O.d(n,r,(function(t){return e[t]}).bind(null,r));return n},O.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return O.d(t,"a",t),t},O.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},O.p="",O.h=function(){return a},u("./imageLoader/index.js")(O.s="./imageLoader/index.js")}({"./externalModules.js":function(e,t,n){"use strict";n.r(t);var r,a,i=n("./imageLoader/registerLoaders.js");t.default={set cornerstone(e){r=e,Object(i.default)(r)},get cornerstone(){if(!r){if(!window||!window.cornerstone)throw new Error("cornerstoneWADOImageLoader requires a copy of Cornerstone to work properly. Please add cornerstoneWADOImageLoader.external.cornerstone = cornerstone; to your application.");r=window.cornerstone,Object(i.default)(r)}return r},set dicomParser(e){a=e},get dicomParser(){if(!a){if(!window||!window.dicomParser)throw new Error("cornerstoneWADOImageLoader requires a copy of dicomParser to work properly. Please add cornerstoneWADOImageLoader.external.dicomParser = dicomParser; to your application.");a=window.dicomParser}return a}}},"./imageLoader/colorSpaceConverters/convertPALETTECOLOR.js":function(e,t,n){"use strict";function r(e,t){for(var n=e.length,r=new Uint8ClampedArray(n),a=0;a<n;++a)r[a]=e[a]>>t;return r}n.r(t),t.default=function(e,t){for(var n=e.columns*e.rows,a=e.pixelData,i=e.greenPaletteColorLookupTableData,o=e.bluePaletteColorLookupTableData,s=e.redPaletteColorLookupTableData.length,l=0,u=0,d=e.redPaletteColorLookupTableDescriptor[1],c=8===e.redPaletteColorLookupTableDescriptor[2]?0:8,f=r(e.redPaletteColorLookupTableData,c),h=r(i,c),p=r(o,c),m=0;m<n;++m){var g=a[l++];g<d?g=0:g>d+s-1?g=s-1:g-=d,t[u++]=f[g],t[u++]=h[g],t[u++]=p[g],t[u++]=255}}},"./imageLoader/colorSpaceConverters/convertRGBColorByPixel.js":function(e,t,n){"use strict";n.r(t),t.default=function(e,t){if(void 0===e)throw new Error("decodeRGB: rgbBuffer must not be undefined");if(e.length%3!=0)throw new Error("decodeRGB: rgbBuffer length must be divisible by 3");for(var n=e.length/3,r=0,a=0,i=0;i<n;i++)t[a++]=e[r++],t[a++]=e[r++],t[a++]=e[r++],t[a++]=255}},"./imageLoader/colorSpaceConverters/convertRGBColorByPlane.js":function(e,t,n){"use strict";n.r(t),t.default=function(e,t){if(void 0===e)throw new Error("decodeRGB: rgbBuffer must not be undefined");if(e.length%3!=0)throw new Error("decodeRGB: rgbBuffer length must be divisible by 3");for(var n=e.length/3,r=0,a=0,i=n,o=2*n,s=0;s<n;s++)t[r++]=e[a++],t[r++]=e[i++],t[r++]=e[o++],t[r++]=255}},"./imageLoader/colorSpaceConverters/convertYBRFullByPixel.js":function(e,t,n){"use strict";n.r(t),t.default=function(e,t){if(void 0===e)throw new Error("decodeRGB: ybrBuffer must not be undefined");if(e.length%3!=0)throw new Error("decodeRGB: ybrBuffer length must be divisble by 3");for(var n=e.length/3,r=0,a=0,i=0;i<n;i++){var o=e[r++],s=e[r++],l=e[r++];t[a++]=o+1.402*(l-128),t[a++]=o-.34414*(s-128)-.71414*(l-128),t[a++]=o+1.772*(s-128),t[a++]=255}}},"./imageLoader/colorSpaceConverters/convertYBRFullByPlane.js":function(e,t,n){"use strict";n.r(t),t.default=function(e,t){if(void 0===e)throw new Error("decodeRGB: ybrBuffer must not be undefined");if(e.length%3!=0)throw new Error("decodeRGB: ybrBuffer length must be divisble by 3");for(var n=e.length/3,r=0,a=0,i=n,o=2*n,s=0;s<n;s++){var l=e[a++],u=e[i++],d=e[o++];t[r++]=l+1.402*(d-128),t[r++]=l-.34414*(u-128)-.71414*(d-128),t[r++]=l+1.772*(u-128),t[r++]=255}}},"./imageLoader/colorSpaceConverters/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./imageLoader/colorSpaceConverters/convertRGBColorByPixel.js");n.d(t,"convertRGBColorByPixel",function(){return r.default});var a=n("./imageLoader/colorSpaceConverters/convertRGBColorByPlane.js");n.d(t,"convertRGBColorByPlane",function(){return a.default});var i=n("./imageLoader/colorSpaceConverters/convertYBRFullByPixel.js");n.d(t,"convertYBRFullByPixel",function(){return i.default});var o=n("./imageLoader/colorSpaceConverters/convertYBRFullByPlane.js");n.d(t,"convertYBRFullByPlane",function(){return o.default});var s=n("./imageLoader/colorSpaceConverters/convertPALETTECOLOR.js");n.d(t,"convertPALETTECOLOR",function(){return s.default})},"./imageLoader/configure.js":function(e,t,n){"use strict";n.r(t);var r=n("./imageLoader/internal/index.js");t.default=function(e){Object(r.setOptions)(e)}},"./imageLoader/convertColorSpace.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return i});var r=n("./imageLoader/colorSpaceConverters/index.js");function a(e,t){0===e.planarConfiguration?Object(r.convertRGBColorByPixel)(e.pixelData,t):Object(r.convertRGBColorByPlane)(e.pixelData,t)}function i(e,t){var n=t.data;if("RGB"===e.photometricInterpretation)a(e,n);else if("YBR_RCT"===e.photometricInterpretation)a(e,n);else if("YBR_ICT"===e.photometricInterpretation)a(e,n);else if("PALETTE COLOR"===e.photometricInterpretation)Object(r.convertPALETTECOLOR)(e,n);else if("YBR_FULL_422"===e.photometricInterpretation)a(e,n);else{if("YBR_FULL"!==e.photometricInterpretation)throw new Error("No color space conversion for photometric interpretation ".concat(e.photometricInterpretation));!function(e,t){0===e.planarConfiguration?Object(r.convertYBRFullByPixel)(e.pixelData,t):Object(r.convertYBRFullByPlane)(e.pixelData,t)}(e,n)}}},"./imageLoader/createImage.js":function(e,t,n){"use strict";n.r(t);var r=n("./externalModules.js"),a=n("./imageLoader/getImageFrame.js"),i=n("./imageLoader/decodeImageFrame.js"),o=n("./imageLoader/isColorImage.js"),s=n("./imageLoader/convertColorSpace.js"),l=n("./shared/getMinMax.js"),u=n("./imageLoader/isJPEGBaseline8BitColor.js"),d="";t.default=function(e,t,n,c){if(!t||!t.length)return Promise.reject(new Error("The file does not contain image data."));var f=r.default.cornerstone,h=document.createElement("canvas"),p=Object(a.default)(e),m=Object(i.default)(p,n,t,h,c);return new Promise(function(t,r){m.then(function(r){var a=f.metaData.get("imagePlaneModule",e)||{},i=f.metaData.get("voiLutModule",e)||{},c=f.metaData.get("modalityLutModule",e)||{},p=f.metaData.get("sopCommonModule",e)||{},m=Object(o.default)(r.photometricInterpretation);if(!Object(u.default)(r,n)&&(function(e){e.pixelData=32===e.bitsAllocated?new Float32Array(e.pixelData):16===e.bitsAllocated?0===e.pixelRepresentation?new Uint16Array(e.pixelData):new Int16Array(e.pixelData):new Uint8Array(e.pixelData)}(r),m)){h.height=r.rows,h.width=r.columns;var g=h.getContext("2d").createImageData(r.columns,r.rows);Object(s.default)(r,g),r.imageData=g,r.pixelData=g.data;var v=Object(l.default)(r.pixelData);r.smallestPixelValue=v.min,r.largestPixelValue=v.max}var y,b={imageId:e,color:m,columnPixelSpacing:a.columnPixelSpacing,columns:r.columns,height:r.rows,intercept:c.rescaleIntercept?c.rescaleIntercept:0,invert:"MONOCHROME1"===r.photometricInterpretation,minPixelValue:r.smallestPixelValue,maxPixelValue:r.largestPixelValue,rowPixelSpacing:a.rowPixelSpacing,rows:r.rows,sizeInBytes:r.pixelData.length,slope:c.rescaleSlope?c.rescaleSlope:1,width:r.columns,windowCenter:i.windowCenter?i.windowCenter[0]:void 0,windowWidth:i.windowWidth?i.windowWidth[0]:void 0,decodeTimeInMS:r.decodeTimeInMS,floatPixelData:void 0};if(r.pixelData instanceof Float32Array){var w=r.pixelData,x=function(e){for(var t=Object(l.default)(e),n=Math.abs(t.max-t.min)/65535,r=t.min,a=e.length,i=new Uint16Array(a),o=65535,s=0,u=0;u<a;u++){var d=Math.floor((e[u]-r)/n);i[u]=d,o=Math.min(o,d),s=Math.max(s,d)}return{min:o,max:s,intPixelData:i,slope:n,intercept:r}}(w);b.minPixelValue=x.min,b.maxPixelValue=x.max,b.slope=x.slope,b.intercept=x.intercept,b.floatPixelData=w,b.getPixelData=function(){return x.intPixelData}}else b.getPixelData=function(){return r.pixelData};if(b.color&&(b.getCanvas=function(){return d===e?h:(h.height=b.rows,h.width=b.columns,h.getContext("2d").putImageData(r.imageData,0,0),d=e,h)}),c.modalityLUTSequence&&c.modalityLUTSequence.length>0&&"1.2.840.10008.5.1.4.1.1.12.1"!==(y=p.sopClassUID)&&"1.2.840.10008.5.1.4.1.1.12.2.1"!==y&&(b.modalityLUT=c.modalityLUTSequence[0]),i.voiLUTSequence&&i.voiLUTSequence.length>0&&(b.voiLUT=i.voiLUTSequence[0]),b.color&&(b.windowWidth=255,b.windowCenter=127),void 0===b.windowCenter||void 0===b.windowWidth){var _=b.maxPixelValue*b.slope+b.intercept,E=b.minPixelValue*b.slope+b.intercept;b.windowWidth=_-E,b.windowCenter=(_+E)/2}t(b)},r)})}},"./imageLoader/decodeImageFrame.js":function(e,t,n){"use strict";n.r(t);var r=n("./imageLoader/internal/options.js"),a=n("./imageLoader/webWorkerManager.js"),i=n("./imageLoader/decodeJPEGBaseline8BitColor.js"),o=n("./shared/decodeImageFrame.js"),s=n("./shared/calculateMinMax.js"),l=n("./shared/decoders/decodeJPEG2000.js"),u=n("./shared/decoders/decodeJPEGLS.js"),d=!1;function c(e,t,n,i){var c=i.priority||void 0,f=i.transferPixelData?[n.buffer]:void 0,h=Object(r.getOptions)(),p=h.strict,m=h.decodeConfig;return!1===h.useWebWorkers?(!1===d&&(Object(l.initializeJPEG2000)(m),Object(u.initializeJPEGLS)(m),d=!0),new Promise(function(r,a){try{var l=o.default.apply(void 0,[e,t,n,m,i]);Object(s.default)(l,p),r(l)}catch(u){a(u)}})):a.default.addTask("decodeTask",{imageFrame:e,transferSyntax:t,pixelData:n,options:i},c,f).promise}t.default=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return"1.2.840.10008.1.2"===t?c(e,t,n,a):"1.2.840.10008.1.2.1"===t?c(e,t,n,a):"1.2.840.10008.1.2.2"===t?c(e,t,n,a):"1.2.840.10008.1.2.1.99"===t?c(e,t,n,a):"1.2.840.10008.1.2.5"===t?c(e,t,n,a):"1.2.840.10008.1.2.4.50"===t?8!==e.bitsAllocated||3!==e.samplesPerPixel&&4!==e.samplesPerPixel?c(e,t,n,a):Object(i.default)(e,n,r):"1.2.840.10008.1.2.4.51"===t?c(e,t,n,a):"1.2.840.10008.1.2.4.57"===t?c(e,t,n,a):"1.2.840.10008.1.2.4.70"===t?c(e,t,n,a):"1.2.840.10008.1.2.4.80"===t?c(e,t,n,a):"1.2.840.10008.1.2.4.81"===t?c(e,t,n,a):"1.2.840.10008.1.2.4.90"===t?c(e,t,n,a):"1.2.840.10008.1.2.4.91"===t?c(e,t,n,a):new Promise(function(e,n){n(new Error("No decoder for transfer syntax ".concat(t)))})}},"./imageLoader/decodeJPEGBaseline8BitColor.js":function(e,t,n){"use strict";n.r(t);var r=n("./shared/getMinMax.js");t.default=function(e,t,n){var a=(new Date).getTime(),i=new Blob([t],{type:"image/jpeg"});return new Promise(function(t,o){var s=new FileReader;void 0===s.readAsBinaryString?s.readAsArrayBuffer(i):s.readAsBinaryString(i),s.onload=function(){var i=new Image;i.onload=function(){n.height=i.height,n.width=i.width,e.rows=i.height,e.columns=i.width;var o=n.getContext("2d");o.drawImage(this,0,0);var s=o.getImageData(0,0,i.width,i.height),l=(new Date).getTime();e.pixelData=s.data,e.imageData=s,e.decodeTimeInMS=l-a;var u=Object(r.default)(e.pixelData);e.smallestPixelValue=u.min,e.largestPixelValue=u.max,t(e)},i.onerror=function(e){o(e)},i.src="data:image/jpeg;base64,".concat(void 0===s.readAsBinaryString?window.btoa(function(e){var t;try{return decodeURIComponent(escape(e))}catch(n){if((t=n)instanceof URIError)return e;throw t}}(String.fromCharCode.apply(null,Array.prototype.slice.apply(new Uint8Array(s.result))))):window.btoa(s.result))},s.onerror=function(e){o(e)}})}},"./imageLoader/getImageFrame.js":function(e,t,n){"use strict";n.r(t);var r=n("./externalModules.js");t.default=function(e){var t=r.default.cornerstone.metaData.get("imagePixelModule",e);return{samplesPerPixel:t.samplesPerPixel,photometricInterpretation:t.photometricInterpretation,planarConfiguration:t.planarConfiguration,rows:t.rows,columns:t.columns,bitsAllocated:t.bitsAllocated,bitsStored:t.bitsStored,pixelRepresentation:t.pixelRepresentation,smallestPixelValue:t.smallestPixelValue,largestPixelValue:t.largestPixelValue,redPaletteColorLookupTableDescriptor:t.redPaletteColorLookupTableDescriptor,greenPaletteColorLookupTableDescriptor:t.greenPaletteColorLookupTableDescriptor,bluePaletteColorLookupTableDescriptor:t.bluePaletteColorLookupTableDescriptor,redPaletteColorLookupTableData:t.redPaletteColorLookupTableData,greenPaletteColorLookupTableData:t.greenPaletteColorLookupTableData,bluePaletteColorLookupTableData:t.bluePaletteColorLookupTableData,pixelData:void 0}}},"./imageLoader/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./imageLoader/colorSpaceConverters/index.js");n.d(t,"convertRGBColorByPixel",function(){return r.convertRGBColorByPixel}),n.d(t,"convertRGBColorByPlane",function(){return r.convertRGBColorByPlane}),n.d(t,"convertYBRFullByPixel",function(){return r.convertYBRFullByPixel}),n.d(t,"convertYBRFullByPlane",function(){return r.convertYBRFullByPlane}),n.d(t,"convertPALETTECOLOR",function(){return r.convertPALETTECOLOR});var a=n("./imageLoader/wadouri/index.js");n.d(t,"wadouri",function(){return a.default});var i=n("./imageLoader/wadors/index.js");n.d(t,"wadors",function(){return i.default});var o=n("./imageLoader/configure.js");n.d(t,"configure",function(){return o.default});var s=n("./imageLoader/convertColorSpace.js");n.d(t,"convertColorSpace",function(){return s.default});var l=n("./imageLoader/createImage.js");n.d(t,"createImage",function(){return l.default});var u=n("./imageLoader/decodeImageFrame.js");n.d(t,"decodeImageFrame",function(){return u.default});var d=n("./imageLoader/decodeJPEGBaseline8BitColor.js");n.d(t,"decodeJPEGBaseline8BitColor",function(){return d.default});var c=n("./imageLoader/getImageFrame.js");n.d(t,"getImageFrame",function(){return c.default});var f=n("./shared/getMinMax.js");n.d(t,"getMinMax",function(){return f.default});var h=n("./imageLoader/isColorImage.js");n.d(t,"isColorImage",function(){return h.default});var p=n("./imageLoader/isJPEGBaseline8BitColor.js");n.d(t,"isJPEGBaseline8BitColor",function(){return p.default});var m=n("./imageLoader/webWorkerManager.js");n.d(t,"webWorkerManager",function(){return m.default});var g=n("./version.js");n.d(t,"version",function(){return g.default});var v=n("./imageLoader/internal/index.js");n.d(t,"internal",function(){return v.internal});var y=n("./externalModules.js");n.d(t,"external",function(){return y.default}),t.default={convertRGBColorByPixel:r.convertRGBColorByPixel,convertRGBColorByPlane:r.convertRGBColorByPlane,convertYBRFullByPixel:r.convertYBRFullByPixel,convertYBRFullByPlane:r.convertYBRFullByPlane,convertPALETTECOLOR:r.convertPALETTECOLOR,wadouri:a.default,wadors:i.default,configure:o.default,convertColorSpace:s.default,createImage:l.default,decodeImageFrame:u.default,decodeJPEGBaseline8BitColor:d.default,getImageFrame:c.default,getMinMax:f.default,isColorImage:h.default,isJPEGBaseline8BitColor:p.default,webWorkerManager:m.default,version:g.default,internal:v.internal,external:y.default}},"./imageLoader/internal/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,"internal",function(){return i});var r=n("./imageLoader/internal/xhrRequest.js");n.d(t,"xhrRequest",function(){return r.default});var a=n("./imageLoader/internal/options.js");n.d(t,"setOptions",function(){return a.setOptions}),n.d(t,"getOptions",function(){return a.getOptions});var i={xhrRequest:r.default,setOptions:a.setOptions,getOptions:a.getOptions}},"./imageLoader/internal/options.js":function(e,t,n){"use strict";n.r(t),n.d(t,"setOptions",function(){return a}),n.d(t,"getOptions",function(){return i});var r={beforeSend:function(){},imageCreated:function(){},strict:!1,useWebWorkers:!0,decodeConfig:{usePDFJS:!1}};function a(e){r=Object.assign(r,e)}function i(){return r}},"./imageLoader/internal/xhrRequest.js":function(e,t,n){"use strict";n.r(t);var r=n("./externalModules.js"),a=n("./imageLoader/internal/options.js");t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.default.cornerstone,s=Object(a.getOptions)();return new Promise(function(r,a){var l=new XMLHttpRequest;l.open("get",e,!0),l.responseType="arraybuffer",s.beforeSend(l,t,n,i),Object.keys(n).forEach(function(e){l.setRequestHeader(e,n[e])}),i.deferred={resolve:r,reject:a},i.url=e,i.imageId=t,l.onloadstart=function(n){s.onloadstart&&s.onloadstart(n,i),o.triggerEvent(o.events,"cornerstoneimageloadstart",{url:e,imageId:t})},l.onloadend=function(n){s.onloadend&&s.onloadend(n,i),o.triggerEvent(o.events,"cornerstoneimageloadend",{url:e,imageId:t})},l.onreadystatechange=function(e){s.onreadystatechange?s.onreadystatechange(e,i):4===l.readyState&&(200===l.status?r(l.response,l):a(l))},l.onprogress=function(n){var r,a,l=n.loaded;n.lengthComputable&&(r=n.total,a=Math.round(l/r*100)),s.onprogress&&s.onprogress(n,i),o.triggerEvent(o.events,"cornerstoneimageloadprogress",{url:e,imageId:t,loaded:l,total:r,percentComplete:a})},l.send()})}},"./imageLoader/isColorImage.js":function(e,t,n){"use strict";n.r(t),t.default=function(e){return"RGB"===e||"PALETTE COLOR"===e||"YBR_FULL"===e||"YBR_FULL_422"===e||"YBR_PARTIAL_422"===e||"YBR_PARTIAL_420"===e||"YBR_RCT"===e||"YBR_ICT"===e}},"./imageLoader/isJPEGBaseline8BitColor.js":function(e,t,n){"use strict";n.r(t),t.default=function(e,t){if(t=t||e.transferSyntax,8===e.bitsAllocated&&"1.2.840.10008.1.2.4.50"===t&&(3===e.samplesPerPixel||4===e.samplesPerPixel))return!0}},"./imageLoader/registerLoaders.js":function(e,t,n){"use strict";n.r(t);var r=n("./imageLoader/wadors/index.js"),a=n("./imageLoader/wadouri/index.js");t.default=function(e){r.default.register(e),a.default.register(e)}},"./imageLoader/wadors/findIndexOfString.js":function(e,t,n){"use strict";function r(e,t,n){if(n+e.length>t.length)return!1;for(var r=n,a=0;a<e.length;a++)if(e[a]!==t[r++])return!1;return!0}n.r(t),t.default=function(e,t,n){n=n||0;for(var a=function(e){for(var t=new Uint8Array(e.length),n=0,r=e.length;n<r;n++)t[n]=e.charCodeAt(n);return t}(t),i=n;i<e.length;i++)if(a[0]===e[i]&&r(a,e,i))return i;return-1}},"./imageLoader/wadors/getPixelData.js":function(e,t,n){"use strict";n.r(t);var r=n("./imageLoader/internal/index.js"),a=n("./imageLoader/wadors/findIndexOfString.js");function i(e){for(var t=0;t<e.length;t++)if("Content-Type:"===e[t].substr(0,13))return e[t].substr(13).trim()}t.default=function(e,t){var n={accept:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/octet-stream"};return new Promise(function(o,s){Object(r.xhrRequest)(e,t,n).then(function(e){var t=new Uint8Array(e),n=Object(a.default)(t,"\r\n\r\n");-1===n&&s(new Error("invalid response - no multipart mime header"));var r=function(e,t,n){t=t||0,n=n||e.length-t;for(var r="",a=t;a<t+n;a++)r+=String.fromCharCode(e[a]);return r}(t,0,n).split("\r\n"),l=function(e){for(var t=0;t<e.length;t++)if("--"===e[t].substr(0,2))return e[t]}(r);l||s(new Error("invalid response - no boundary marker"));var u=n+4,d=Object(a.default)(t,l,u);-1===d&&s(new Error("invalid response - terminating boundary not found"));var c=d-u-2;o({contentType:i(r),imageFrame:{pixelData:new Uint8Array(e,u,c)}})})})}},"./imageLoader/wadors/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./imageLoader/wadors/metaData/index.js"),a=n("./imageLoader/wadors/findIndexOfString.js"),i=n("./imageLoader/wadors/getPixelData.js"),o=n("./imageLoader/wadors/metaDataManager.js"),s=n("./imageLoader/wadors/loadImage.js"),l=n("./imageLoader/wadors/register.js");t.default={metaData:{getNumberString:r.getNumberString,getNumberValue:r.getNumberValue,getNumberValues:r.getNumberValues,getValue:r.getValue,metaDataProvider:r.metaDataProvider},findIndexOfString:a.default,getPixelData:i.default,loadImage:s.default,metaDataManager:o.default,register:l.default}},"./imageLoader/wadors/loadImage.js":function(e,t,n){"use strict";n.r(t),n.d(t,"getTransferSyntaxForContentType",function(){return o});var r=n("./imageLoader/wadors/metaDataManager.js"),a=n("./imageLoader/wadors/getPixelData.js"),i=n("./imageLoader/createImage.js");function o(e){if(!e)return"1.2.840.10008.1.2";var t=e.split(";"),n={};t.forEach(function(e){var t=e.split("=");if(2===t.length){var r=t[1].trim().replace(/"/g,"");n[t[0].trim()]=r}});var r={"image/jpeg":"1.2.840.10008.1.2.4.70","image/x-dicom-rle":"1.2.840.10008.1.2.5","image/x-jls":"1.2.840.10008.1.2.4.80","image/jp2":"1.2.840.10008.1.2.4.90","image/jpx":"1.2.840.10008.1.2.4.92"};return n["transfer-syntax"]?n["transfer-syntax"]:e&&!Object.keys(n).length&&r[e]?r[e]:n.type&&r[n.type]?r[n.type]:"1.2.840.10008.1.2"}t.default=function(e,t){var n=(new Date).getTime(),s=e.substring(7);return{promise:new Promise(function(l,u){if(void 0===r.default.get(e)){var d=new Error("no metadata for imageId ".concat(e));return u(d)}Object(a.default)(s,e,'multipart/related; type="application/octet-stream"').then(function(r){var a=o(r.contentType),s=r.imageFrame.pixelData;Object(i.default)(e,s,a,t).then(function(e){var t=(new Date).getTime();e.loadTimeInMS=t-n,l(e)},u)},u)}),cancelFn:void 0}}},"./imageLoader/wadors/metaData/getNumberString.js":function(e,t,n){"use strict";n.r(t);var r=n("./imageLoader/wadors/metaData/getValue.js");t.default=function(e,t,n){var a=Object(r.default)(e,t,n);if(void 0!==a)return parseFloat(a)}},"./imageLoader/wadors/metaData/getNumberValue.js":function(e,t,n){"use strict";n.r(t);var r=n("./imageLoader/wadors/metaData/getValue.js");t.default=function(e,t){var n=Object(r.default)(e,t);if(void 0!==n)return parseFloat(n)}},"./imageLoader/wadors/metaData/getNumberValues.js":function(e,t,n){"use strict";n.r(t),t.default=function(e,t){if(e&&e.Value&&!(t&&e.Value.length<t)){for(var n=[],r=0;r<e.Value.length;r++)n.push(parseFloat(e.Value[r]));return n}}},"./imageLoader/wadors/metaData/getValue.js":function(e,t,n){"use strict";n.r(t),t.default=function(e,t,n){return t=t||0,e&&e.Value?e.Value.length<=t?n:e.Value[t]:n}},"./imageLoader/wadors/metaData/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./imageLoader/wadors/metaData/getNumberString.js");n.d(t,"getNumberString",function(){return r.default});var a=n("./imageLoader/wadors/metaData/getNumberValue.js");n.d(t,"getNumberValue",function(){return a.default});var i=n("./imageLoader/wadors/metaData/getNumberValues.js");n.d(t,"getNumberValues",function(){return i.default});var o=n("./imageLoader/wadors/metaData/getValue.js");n.d(t,"getValue",function(){return o.default});var s=n("./imageLoader/wadors/metaData/metaDataProvider.js");n.d(t,"metaDataProvider",function(){return s.default})},"./imageLoader/wadors/metaData/metaDataProvider.js":function(e,t,n){"use strict";n.r(t);var r=n("./externalModules.js"),a=n("./imageLoader/wadors/metaData/getNumberValues.js"),i=n("./imageLoader/wadors/metaData/getValue.js"),o=n("./imageLoader/wadors/metaData/getNumberValue.js"),s=n("./imageLoader/wadors/metaDataManager.js");t.default=function(e,t){var n=r.default.dicomParser,l=s.default.get(t);if(l){if("generalSeriesModule"===e)return{modality:Object(i.default)(l["00080060"]),seriesInstanceUID:Object(i.default)(l["0020000e"]),seriesNumber:Object(o.default)(l["00200011"]),studyInstanceUID:Object(i.default)(l["0020000d"]),seriesDate:n.parseDA(Object(i.default)(l["00080021"])),seriesTime:n.parseTM(Object(i.default)(l["00080031"],0,""))};if("patientStudyModule"===e)return{patientAge:Object(o.default)(l["00101010"]),patientSize:Object(o.default)(l["00101020"]),patientWeight:Object(o.default)(l["00101030"])};if("imagePlaneModule"===e){var u=Object(a.default)(l["00200037"],6),d=Object(a.default)(l["00200032"],3),c=Object(a.default)(l["00280030"],2),f=null,h=null;c&&(h=c[0],f=c[1]);var p=null,m=null;return u&&(p=[parseFloat(u[0]),parseFloat(u[1]),parseFloat(u[2])],m=[parseFloat(u[3]),parseFloat(u[4]),parseFloat(u[5])]),{frameOfReferenceUID:Object(i.default)(l["00200052"]),rows:Object(o.default)(l["00280010"]),columns:Object(o.default)(l["00280011"]),imageOrientationPatient:u,rowCosines:p,columnCosines:m,imagePositionPatient:d,sliceThickness:Object(o.default)(l["00180050"]),sliceLocation:Object(o.default)(l["00201041"]),pixelSpacing:c,rowPixelSpacing:h,columnPixelSpacing:f}}if("imagePixelModule"===e)return{samplesPerPixel:Object(o.default)(l["00280002"]),photometricInterpretation:Object(i.default)(l["00280004"]),rows:Object(o.default)(l["00280010"]),columns:Object(o.default)(l["00280011"]),bitsAllocated:Object(o.default)(l["00280100"]),bitsStored:Object(o.default)(l["00280101"]),highBit:Object(i.default)(l["00280102"]),pixelRepresentation:Object(o.default)(l["00280103"]),planarConfiguration:Object(o.default)(l["00280006"]),pixelAspectRatio:Object(i.default)(l["00280034"]),smallestPixelValue:Object(o.default)(l["00280106"]),largestPixelValue:Object(o.default)(l["00280107"]),redPaletteColorLookupTableDescriptor:Object(a.default)(l["00281101"]),greenPaletteColorLookupTableDescriptor:Object(a.default)(l["00281102"]),bluePaletteColorLookupTableDescriptor:Object(a.default)(l["00281103"]),redPaletteColorLookupTableData:Object(a.default)(l["00281201"]),greenPaletteColorLookupTableData:Object(a.default)(l["00281202"]),bluePaletteColorLookupTableData:Object(a.default)(l["00281203"])};if("voiLutModule"===e)return{windowCenter:Object(a.default)(l["00281050"],1),windowWidth:Object(a.default)(l["00281051"],1)};if("modalityLutModule"===e)return{rescaleIntercept:Object(o.default)(l["00281052"]),rescaleSlope:Object(o.default)(l["00281053"]),rescaleType:Object(i.default)(l["00281054"])};if("sopCommonModule"===e)return{sopClassUID:Object(i.default)(l["00080016"]),sopInstanceUID:Object(i.default)(l["00080018"])};if("petIsotopeModule"===e){var g=Object(i.default)(l["00540016"]);if(void 0===g)return;return{radiopharmaceuticalInfo:{radiopharmaceuticalStartTime:n.parseTM(Object(i.default)(g["00181072"],0,"")),radionuclideTotalDose:Object(o.default)(g["00181074"]),radionuclideHalfLife:Object(o.default)(g["00181075"])}}}}}},"./imageLoader/wadors/metaDataManager.js":function(e,t,n){"use strict";n.r(t);var r=[];t.default={add:function(e,t){r[e]=t},get:function(e){return r[e]},remove:function(e){r[e]=void 0},purge:function(){r=[]}}},"./imageLoader/wadors/register.js":function(e,t,n){"use strict";n.r(t);var r=n("./imageLoader/wadors/loadImage.js"),a=n("./imageLoader/wadors/metaData/index.js");t.default=function(e){e.registerImageLoader("wadors",r.default),e.metaData.addProvider(a.metaDataProvider)}},"./imageLoader/wadouri/dataSetCacheManager.js":function(e,t,n){"use strict";n.r(t),n.d(t,"getInfo",function(){return l});var r=n("./externalModules.js"),a=n("./imageLoader/internal/index.js"),i=0,o={},s={};function l(){return{cacheSizeInBytes:i,numberOfDataSetsCached:Object.keys(o).length}}t.default={isLoaded:function(e){return void 0!==o[e]},load:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.xhrRequest,n=arguments.length>2?arguments[2]:void 0,u=r.default.cornerstone,d=r.default.dicomParser;if(o[e])return new Promise(function(t){o[e].cacheCount++,t(o[e].dataSet)});if(s[e])return s[e].cacheCount++,s[e];var c=t(e,n),f=new Promise(function(t,n){c.then(function(r){var a,s=new Uint8Array(r);try{a=d.parseDicom(s)}catch(c){return n(c)}o[e]={dataSet:a,cacheCount:f.cacheCount},i+=a.byteArray.length,t(a),u.triggerEvent(u.events,"datasetscachechanged",{uri:e,action:"loaded",cacheInfo:l()})},n).then(function(){delete s[e]},function(){delete s[e]})});return f.cacheCount=1,s[e]=f,f},unload:function(e){var t=r.default.cornerstone;o[e]&&(o[e].cacheCount--,0===o[e].cacheCount&&(i-=o[e].dataSet.byteArray.length,delete o[e],t.triggerEvent(t.events,"datasetscachechanged",{uri:e,action:"unloaded",cacheInfo:l()})))},getInfo:l,purge:function(){o={},s={}},get:function(e){if(o[e])return o[e].dataSet}}},"./imageLoader/wadouri/fileManager.js":function(e,t,n){"use strict";n.r(t);var r=[];t.default={add:function(e){var t=r.push(e);return"dicomfile:".concat(t-1)},get:function(e){return r[e]},remove:function(e){r[e]=void 0},purge:function(){r=[]}}},"./imageLoader/wadouri/getEncapsulatedImageFrame.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return a});var r=n("./externalModules.js");function a(e,t){var n=r.default.dicomParser;if(e.elements.x7fe00010&&e.elements.x7fe00010.basicOffsetTable.length)return n.readEncapsulatedImageFrame(e,e.elements.x7fe00010,t);if(function(e){return e.intString("x00280008")!==e.elements.x7fe00010.fragments.length}(e)){var a=n.createJPEGBasicOffsetTable(e,e.elements.x7fe00010);return n.readEncapsulatedImageFrame(e,e.elements.x7fe00010,t,a)}return n.readEncapsulatedPixelDataFromFragments(e,e.elements.x7fe00010,t)}},"./imageLoader/wadouri/getPixelData.js":function(e,t,n){"use strict";n.r(t);var r=n("./imageLoader/wadouri/getEncapsulatedImageFrame.js"),a=n("./imageLoader/wadouri/getUncompressedImageFrame.js");t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.elements.x7fe00010||e.elements.x7fe00008;return n?n.encapsulatedPixelData?Object(r.default)(e,t):Object(a.default)(e,t):null}},"./imageLoader/wadouri/getUncompressedImageFrame.js":function(e,t,n){"use strict";n.r(t);var r=n("./imageLoader/wadouri/unpackBinaryFrame.js");t.default=function(e,t){var n,a=e.elements.x7fe00010||e.elements.x7fe00008,i=e.uint16("x00280100"),o=e.uint16("x00280010"),s=e.uint16("x00280011"),l=e.uint16("x00280002"),u=a.dataOffset,d=o*s*l;if(8===i){if((n=u+t*d)>=e.byteArray.length)throw new Error("frame exceeds size of pixelData");return new Uint8Array(e.byteArray.buffer,n,d)}if(16===i){if((n=u+t*d*2)>=e.byteArray.length)throw new Error("frame exceeds size of pixelData");return new Uint8Array(e.byteArray.buffer,n,2*d)}if(1===i){if((n=u+t*d*.125)>=e.byteArray.length)throw new Error("frame exceeds size of pixelData");return Object(r.default)(e.byteArray,n,d)}if(32===i){if((n=u+t*d*4)>=e.byteArray.length)throw new Error("frame exceeds size of pixelData");return new Uint8Array(e.byteArray.buffer,n,4*d)}throw new Error("unsupported pixel format")}},"./imageLoader/wadouri/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./imageLoader/wadouri/metaData/index.js"),a=n("./imageLoader/wadouri/dataSetCacheManager.js"),i=n("./imageLoader/wadouri/fileManager.js"),o=n("./imageLoader/wadouri/getEncapsulatedImageFrame.js"),s=n("./imageLoader/wadouri/getUncompressedImageFrame.js"),l=n("./imageLoader/wadouri/loadFileRequest.js"),u=n("./imageLoader/wadouri/loadImage.js"),d=n("./imageLoader/wadouri/parseImageId.js"),c=n("./imageLoader/wadouri/unpackBinaryFrame.js"),f=n("./imageLoader/wadouri/register.js");t.default={metaData:{getImagePixelModule:r.getImagePixelModule,getLUTs:r.getLUTs,getModalityLUTOutputPixelRepresentation:r.getModalityLUTOutputPixelRepresentation,getNumberValues:r.getNumberValues,metaDataProvider:r.metaDataProvider},dataSetCacheManager:a.default,fileManager:i.default,getEncapsulatedImageFrame:o.default,getUncompressedImageFrame:s.default,loadFileRequest:l.default,loadImageFromPromise:u.loadImageFromPromise,getLoaderForScheme:u.getLoaderForScheme,loadImage:u.loadImage,parseImageId:d.default,unpackBinaryFrame:c.default,register:f.default}},"./imageLoader/wadouri/loadFileRequest.js":function(e,t,n){"use strict";n.r(t);var r=n("./imageLoader/wadouri/parseImageId.js"),a=n("./imageLoader/wadouri/fileManager.js");t.default=function(e){var t=Object(r.default)(e),n=parseInt(t.url,10),i=a.default.get(n);return new Promise(function(e,t){var n=new FileReader;n.onload=function(t){e(t.target.result)},n.onerror=t,n.readAsArrayBuffer(i)})}},"./imageLoader/wadouri/loadImage.js":function(e,t,n){"use strict";n.r(t),n.d(t,"loadImageFromPromise",function(){return u}),n.d(t,"getLoaderForScheme",function(){return d}),n.d(t,"loadImage",function(){return c});var r=n("./imageLoader/createImage.js"),a=n("./imageLoader/wadouri/parseImageId.js"),i=n("./imageLoader/wadouri/dataSetCacheManager.js"),o=n("./imageLoader/wadouri/loadFileRequest.js"),s=n("./imageLoader/wadouri/getPixelData.js"),l=n("./imageLoader/internal/index.js");function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,u=arguments.length>5?arguments[5]:void 0,d=(new Date).getTime(),c={cancelFn:void 0};return c.promise=new Promise(function(f,h){e.then(function(e){var p=Object(s.default)(e,n),m=e.string("x00020010"),g=(new Date).getTime(),v=Object(r.default)(t,p,m,l);!function(e,t){e.decache=function(){var e=Object(a.default)(t);i.default.unload(e.url)}}(c,t),v.then(function(t){t.data=e,t.sharedCacheKey=o;var n=(new Date).getTime();t.loadTimeInMS=g-d,t.totalTimeInMS=n-d,void 0!==u&&void 0!==u.imageDoneCallback&&u.imageDoneCallback(t),f(t)},function(t){h({error:t,dataSet:e})})},function(e){h({error:e})})}),c}function d(e){return"dicomweb"===e||"wadouri"===e?l.xhrRequest:"dicomfile"===e?o.default:void 0}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(a.default)(e),o=(t=Object.assign({},t)).loader;return void 0===o?o=d(n.scheme):delete t.loader,i.default.isLoaded(n.url)?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=(new Date).getTime();return{promise:new Promise(function(l,u){var d,c=(new Date).getTime();try{var f=Object(s.default)(e,n),h=e.string("x00020010");d=Object(r.default)(t,f,h,i)}catch(p){return void u({error:p,dataSet:e})}d.then(function(t){t.data=e,t.sharedCacheKey=a;var n=(new Date).getTime();t.loadTimeInMS=c-o,t.totalTimeInMS=n-o,l(t)},u)}),cancelFn:void 0}}(i.default.get(n.url,o,e),e,n.frame,n.url,t):u(i.default.load(n.url,o,e),e,n.frame,n.url,t)}},"./imageLoader/wadouri/metaData/getImagePixelModule.js":function(e,t,n){"use strict";function r(e,t){if(e.elements[t]&&6===e.elements[t].length)return[e.uint16(t,0),e.uint16(t,1),e.uint16(t,2)]}function a(e,t,n){for(var r=[],a=e.elements[t],i=0;i<n[0];i++)r[i]=16===n[2]?e.uint16(t,i):e.byteArray[i+a.dataOffset];return r}n.r(t),t.default=function(e){var t={samplesPerPixel:e.uint16("x00280002"),photometricInterpretation:e.string("x00280004"),rows:e.uint16("x00280010"),columns:e.uint16("x00280011"),bitsAllocated:e.uint16("x00280100"),bitsStored:e.uint16("x00280101"),highBit:e.uint16("x00280102"),pixelRepresentation:e.uint16("x00280103"),planarConfiguration:e.uint16("x00280006"),pixelAspectRatio:e.string("x00280034")};return function(e,t){0===e.uint16("x00280103")?(t.smallestPixelValue=e.uint16("x00280106"),t.largestPixelValue=e.uint16("x00280107")):(t.smallestPixelValue=e.int16("x00280106"),t.largestPixelValue=e.int16("x00280107"))}(e,t),"PALETTE COLOR"===t.photometricInterpretation&&e.elements.x00281101&&function(e,t){t.redPaletteColorLookupTableDescriptor=r(e,"x00281101"),t.greenPaletteColorLookupTableDescriptor=r(e,"x00281102"),t.bluePaletteColorLookupTableDescriptor=r(e,"x00281103"),0===t.redPaletteColorLookupTableDescriptor[0]&&(t.redPaletteColorLookupTableDescriptor[0]=65536,t.greenPaletteColorLookupTableDescriptor[0]=65536,t.bluePaletteColorLookupTableDescriptor[0]=65536);var n=e.elements.x00281201.length===t.redPaletteColorLookupTableDescriptor[0]?8:16;t.redPaletteColorLookupTableDescriptor[2]!==n&&(t.redPaletteColorLookupTableDescriptor[2]=n,t.greenPaletteColorLookupTableDescriptor[2]=n,t.bluePaletteColorLookupTableDescriptor[2]=n),t.redPaletteColorLookupTableData=a(e,"x00281201",t.redPaletteColorLookupTableDescriptor),t.greenPaletteColorLookupTableData=a(e,"x00281202",t.greenPaletteColorLookupTableDescriptor),t.bluePaletteColorLookupTableData=a(e,"x00281203",t.bluePaletteColorLookupTableDescriptor)}(e,t),t}},"./imageLoader/wadouri/metaData/getLUTs.js":function(e,t,n){"use strict";function r(e,t){var n=t.uint16("x00283002",0);0===n&&(n=65535);for(var r={id:"1",firstValueMapped:0===e?t.uint16("x00283002",1):t.int16("x00283002",1),numBitsPerEntry:t.uint16("x00283002",2),lut:[]},a=0;a<n;a++)r.lut[a]=0===e?t.uint16("x00283006",a):t.int16("x00283006",a);return r}n.r(t),t.default=function(e,t){if(t&&t.items.length){for(var n=[],a=0;a<t.items.length;a++){var i=r(e,t.items[a].dataSet);i&&n.push(i)}return n}}},"./imageLoader/wadouri/metaData/getModalityLUTOutputPixelRepresentation.js":function(e,t,n){"use strict";n.r(t),t.default=function(e){var t=e.string("x00080016");if("1.2.840.10008.5.1.4.1.1.2"===t||"1.2.840.10008.5.1.4.1.1.2.1"===t)return 1;var n=e.floatString("x00281052"),r=e.floatString("x00281053");return void 0!==n&&void 0!==r?function(e){var t=e.uint16("x00280103"),n=e.uint16("x00280101");return 0===t?0:-1<<n-1}(e)*r+n<0?1:0:e.elements.x00283000&&e.elements.x00283000.length>0?0:e.uint16("x00280103")}},"./imageLoader/wadouri/metaData/getNumberValues.js":function(e,t,n){"use strict";n.r(t),t.default=function(e,t,n){var r=[],a=e.string(t);if(a){var i=a.split("\\");if(!(n&&i.length<n)){for(var o=0;o<i.length;o++)r.push(parseFloat(i[o]));return r}}}},"./imageLoader/wadouri/metaData/index.js":function(e,t,n){"use strict";n.r(t);var r=n("./imageLoader/wadouri/metaData/getImagePixelModule.js");n.d(t,"getImagePixelModule",function(){return r.default});var a=n("./imageLoader/wadouri/metaData/getLUTs.js");n.d(t,"getLUTs",function(){return a.default});var i=n("./imageLoader/wadouri/metaData/getModalityLUTOutputPixelRepresentation.js");n.d(t,"getModalityLUTOutputPixelRepresentation",function(){return i.default});var o=n("./imageLoader/wadouri/metaData/getNumberValues.js");n.d(t,"getNumberValues",function(){return o.default});var s=n("./imageLoader/wadouri/metaData/metaDataProvider.js");n.d(t,"metaDataProvider",function(){return s.default})},"./imageLoader/wadouri/metaData/metaDataProvider.js":function(e,t,n){"use strict";n.r(t);var r=n("./externalModules.js"),a=n("./imageLoader/wadouri/metaData/getNumberValues.js"),i=n("./imageLoader/wadouri/parseImageId.js"),o=n("./imageLoader/wadouri/dataSetCacheManager.js"),s=n("./imageLoader/wadouri/metaData/getImagePixelModule.js"),l=n("./imageLoader/wadouri/metaData/getLUTs.js"),u=n("./imageLoader/wadouri/metaData/getModalityLUTOutputPixelRepresentation.js");t.default=function(e,t){var n=r.default.dicomParser,d=Object(i.default)(t),c=o.default.get(d.url);if(c){if("generalSeriesModule"===e)return{modality:c.string("x00080060"),seriesInstanceUID:c.string("x0020000e"),seriesNumber:c.intString("x00200011"),studyInstanceUID:c.string("x0020000d"),seriesDate:n.parseDA(c.string("x00080021")),seriesTime:n.parseTM(c.string("x00080031")||"")};if("patientStudyModule"===e)return{patientAge:c.intString("x00101010"),patientSize:c.floatString("x00101020"),patientWeight:c.floatString("x00101030")};if("imagePlaneModule"===e){var f=Object(a.default)(c,"x00200037",6),h=Object(a.default)(c,"x00200032",3),p=Object(a.default)(c,"x00280030",2),m=null,g=null;p&&(g=p[0],m=p[1]);var v=null,y=null;return f&&(v=[parseFloat(f[0]),parseFloat(f[1]),parseFloat(f[2])],y=[parseFloat(f[3]),parseFloat(f[4]),parseFloat(f[5])]),{frameOfReferenceUID:c.string("x00200052"),rows:c.uint16("x00280010"),columns:c.uint16("x00280011"),imageOrientationPatient:f,rowCosines:v,columnCosines:y,imagePositionPatient:h,sliceThickness:c.floatString("x00180050"),sliceLocation:c.floatString("x00201041"),pixelSpacing:p,rowPixelSpacing:g,columnPixelSpacing:m}}if("imagePixelModule"===e)return Object(s.default)(c);if("modalityLutModule"===e)return{rescaleIntercept:c.floatString("x00281052"),rescaleSlope:c.floatString("x00281053"),rescaleType:c.string("x00281054"),modalityLUTSequence:Object(l.default)(c.uint16("x00280103"),c.elements.x00283000)};if("voiLutModule"===e){var b=Object(u.default)(c);return{windowCenter:Object(a.default)(c,"x00281050",1),windowWidth:Object(a.default)(c,"x00281051",1),voiLUTSequence:Object(l.default)(b,c.elements.x00283010)}}if("sopCommonModule"===e)return{sopClassUID:c.string("x00080016"),sopInstanceUID:c.string("x00080018")};if("petIsotopeModule"===e){var w=c.elements.x00540016;if(void 0===w)return;var x=w.items[0].dataSet;return{radiopharmaceuticalInfo:{radiopharmaceuticalStartTime:n.parseTM(x.string("x00181072")||""),radionuclideTotalDose:x.floatString("x00181074"),radionuclideHalfLife:x.floatString("x00181075")}}}}}},"./imageLoader/wadouri/parseImageId.js":function(e,t,n){"use strict";n.r(t),t.default=function(e){var t,n=e.indexOf(":"),r=e.substring(n+1),a=r.indexOf("frame=");if(-1!==a){var i=r.substr(a+6);t=parseInt(i,10),r=r.substr(0,a-1)}return{scheme:e.substr(0,n),url:r,frame:t}}},"./imageLoader/wadouri/register.js":function(e,t,n){"use strict";n.r(t);var r=n("./imageLoader/wadouri/loadImage.js"),a=n("./imageLoader/wadouri/metaData/index.js");t.default=function(e){e.registerImageLoader("dicomweb",r.loadImage),e.registerImageLoader("wadouri",r.loadImage),e.registerImageLoader("dicomfile",r.loadImage),e.metaData.addProvider(a.metaDataProvider)}},"./imageLoader/wadouri/unpackBinaryFrame.js":function(e,t,n){"use strict";function r(e,t){return e&1<<t}n.r(t),t.default=function(e,t,n){for(var a=new Uint8Array(n),i=0;i<n;i++){var o=Math.floor(i/8);a[i]=r(e[o+t],i%8)?1:0}return a}},"./imageLoader/webWorkerManager.js":function(e,t,n){"use strict";n.r(t);var r,a=n("./imageLoader/internal/options.js"),i=0,o=[],s=[],l=Object(a.getOptions)(),u={maxWebWorkers:navigator.hardwareConcurrency||1,startWebWorkersOnDemand:!0,webWorkerPath:"../../dist/cornerstoneWADOImageLoaderWebWorker.js",webWorkerTaskPaths:[],taskConfiguration:{decodeTask:{loadCodecsOnStartup:!0,initializeCodecsOnStartup:!1,codecsPath:"../dist/cornerstoneWADOImageLoaderCodecs.js",usePDFJS:!1,strict:l.strict}}},d={maxWebWorkers:0,numWebWorkers:0,numTasksQueued:0,numTasksExecuting:0,numTasksCompleted:0,totalTaskTimeInMS:0,totalTimeDelayedInMS:0};function c(){if(o.length){for(var e=0;e<s.length;e++)if("ready"===s[e].status){s[e].status="busy";var t=o.shift();t.start=(new Date).getTime();var n=(new Date).getTime();return d.totalTimeDelayedInMS+=n-t.added,s[e].task=t,s[e].worker.postMessage({taskType:t.taskType,workerIndex:e,data:t.data},t.transferList),void d.numTasksExecuting++}s.length<r.maxWebWorkers&&h()}}function f(e){if("initialize"===e.data.taskType)s[e.data.workerIndex].status="ready",c();else{var t=s[e.data.workerIndex].task.start;s[e.data.workerIndex].task.deferred.resolve(e.data.result),s[e.data.workerIndex].task=void 0,d.numTasksExecuting--,s[e.data.workerIndex].status="ready",d.numTasksCompleted++;var n=(new Date).getTime();d.totalTaskTimeInMS+=n-t,c()}}function h(){if(!(s.length>=r.maxWebWorkers)){var e=new Worker(r.webWorkerPath);s.push({worker:e,status:"initializing"}),e.addEventListener("message",f),e.postMessage({taskType:"initialize",workerIndex:s.length-1,config:r})}}function p(e){if(e=e||u,r)throw new Error("WebWorkerManager already initialized");if((r=e).maxWebWorkers=r.maxWebWorkers||navigator.hardwareConcurrency||1,!r.startWebWorkersOnDemand)for(var t=0;t<r.maxWebWorkers;t++)h()}t.default={initialize:p,loadWebWorkerTask:function(e,t){r.webWorkerTaskPaths.push(e),t&&(r.taskConfiguration=Object.assign(r.taskConfiguration,t));for(var n=0;n<s.length;n++)s[n].worker.postMessage({taskType:"loadWebWorkerTask",workerIndex:s.length-1,sourcePath:e,config:r})},addTask:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0;r||p();var s,l={},u=new Promise(function(e,t){l={resolve:e,reject:t}});for(s=0;s<o.length&&!(o[s].priority<n);s++);var d=i++;return o.splice(s,0,{taskId:d,taskType:e,status:"ready",added:(new Date).getTime(),data:t,deferred:l,priority:n,transferList:a}),c(),{taskId:d,promise:u}},getStatistics:function(){return d.maxWebWorkers=r.maxWebWorkers,d.numWebWorkers=s.length,d.numTasksQueued=o.length,d},setTaskPriority:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<o.length;n++)if(o[n].taskId===e){var r=o.splice(n,1)[0];for(r.priority=t,n=0;n<o.length&&!(o[n].priority<t);n++);return o.splice(n,0,r),!0}return!1},cancelTask:function(e,t){for(var n=0;n<o.length;n++)if(o[n].taskId===e)return o.splice(n,1).deferred.reject(t),!0;return!1}}},"./shared/calculateMinMax.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return a});var r=n("./shared/getMinMax.js");function a(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(r.default)(e.pixelData),a=!(i(e.smallestPixelValue)&&i(e.largestPixelValue));!0!==t||a?(e.smallestPixelValue=n.min,e.largestPixelValue=n.max):(e.smallestPixelValue!==n.min&&console.warn("Image smallestPixelValue tag is incorrect. Rendering performance will suffer considerably."),e.largestPixelValue!==n.max&&console.warn("Image largestPixelValue tag is incorrect. Rendering performance will suffer considerably."))}function i(e){return"number"==typeof e}},"./shared/decodeImageFrame.js":function(e,t,n){"use strict";n.r(t);var r=n("./shared/decoders/decodeLittleEndian.js"),a=n("./shared/decoders/decodeBigEndian.js"),i=n("./shared/decoders/decodeRLE.js"),o=n("./shared/decoders/decodeJPEGBaseline.js"),s=n("./shared/decoders/decodeJPEGLossless.js"),l=n("./shared/decoders/decodeJPEGLS.js"),u=n("./shared/decoders/decodeJPEG2000.js");t.default=function(e,t,n,d,c){var f=(new Date).getTime();if("1.2.840.10008.1.2"===t)e=Object(r.default)(e,n);else if("1.2.840.10008.1.2.1"===t)e=Object(r.default)(e,n);else if("1.2.840.10008.1.2.2"===t)e=Object(a.default)(e,n);else if("1.2.840.10008.1.2.1.99"===t)e=Object(r.default)(e,n);else if("1.2.840.10008.1.2.5"===t)e=Object(i.default)(e,n);else if("1.2.840.10008.1.2.4.50"===t)e=Object(o.default)(e,n);else if("1.2.840.10008.1.2.4.51"===t)e=Object(o.default)(e,n);else if("1.2.840.10008.1.2.4.57"===t)e=Object(s.default)(e,n);else if("1.2.840.10008.1.2.4.70"===t)e=Object(s.default)(e,n);else if("1.2.840.10008.1.2.4.80"===t)e=Object(l.default)(e,n);else if("1.2.840.10008.1.2.4.81"===t)e=Object(l.default)(e,n);else if("1.2.840.10008.1.2.4.90"===t)e=Object(u.default)(e,n,d,c);else{if("1.2.840.10008.1.2.4.91"!==t)throw new Error("no decoder for transfer syntax ".concat(t));e=Object(u.default)(e,n,d,c)}var h=void 0!==e.pixelRepresentation&&1===e.pixelRepresentation,p=h&&void 0!==e.bitsStored?32-e.bitsStored:void 0;if(h&&void 0!==p)for(var m=0;m<e.pixelData.length;m++)e.pixelData[m]=e.pixelData[m]<<p>>p;var g=(new Date).getTime();return e.decodeTimeInMS=g-f,e}},"./shared/decoders/decodeBigEndian.js":function(e,t,n){"use strict";n.r(t),t.default=function(e,t){if(16===e.bitsAllocated){var n=t.buffer,r=t.byteOffset,a=t.length;r%2&&(n=n.slice(r),r=0),e.pixelData=0===e.pixelRepresentation?new Uint16Array(n,r,a/2):new Int16Array(n,r,a/2);for(var i=0;i<e.pixelData.length;i++)e.pixelData[i]=(255&(o=e.pixelData[i]))<<8|o>>8&255}else 8===e.bitsAllocated&&(e.pixelData=t);var o;return e}},"./shared/decoders/decodeJPEG2000.js":function(e,t,n){"use strict";var r;function a(e){if(!e.usePDFJS&&"undefined"==typeof OpenJPEG)throw new Error("OpenJPEG decoder not loaded");if(!(r||(r=OpenJPEG())&&r._jp2_decode))throw new Error("OpenJPEG failed to initialize")}n.r(t),n.d(t,"initializeJPEG2000",function(){return a}),t.default=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return a(n),i.usePDFJS||n.usePDFJS?function(e,t){var n=new JpxImage;n.parse(t);var r=n.tiles.length;if(1!==r)throw new Error("JPEG2000 decoder returned a tileCount of ".concat(r,", when 1 is expected"));return e.columns=n.width,e.rows=n.height,e.pixelData=n.tiles[0].items,e}(e,t):function(e,t){var n=function(e,t,n){var a=r._malloc(e.length);r.writeArrayToMemory(e,a);var i=r._malloc(4),o=r._malloc(4),s=r._malloc(4),l=r._malloc(4),u=r._malloc(4),d=(new Date).getTime();if(0!==r.ccall("jp2_decode","number",["number","number","number","number","number","number","number"],[a,e.length,i,o,s,l,u]))return console.log("[opj_decode] decoding failed!"),r._free(a),r._free(r.getValue(i,"*")),r._free(s),r._free(l),r._free(o),void r._free(u);var c=r.getValue(i,"*"),f={length:r.getValue(o,"i32"),sx:r.getValue(s,"i32"),sy:r.getValue(l,"i32"),nbChannels:r.getValue(u,"i32"),perf_timetodecode:void 0,pixelData:void 0},h=f.sx*f.sy*f.nbChannels,p=new Int32Array(r.HEAP32.buffer,c,h);if(1===t)if(Uint8Array.from)f.pixelData=Uint8Array.from(p);else{f.pixelData=new Uint8Array(h);for(var m=0;m<h;m++)f.pixelData[m]=p[m]}else if(n)if(Int16Array.from)f.pixelData=Int16Array.from(p);else{f.pixelData=new Int16Array(h);for(var g=0;g<h;g++)f.pixelData[g]=p[g]}else if(Uint16Array.from)f.pixelData=Uint16Array.from(p);else{f.pixelData=new Uint16Array(h);for(var v=0;v<h;v++)f.pixelData[v]=p[v]}var y=(new Date).getTime();return f.perf_timetodecode=y-d,r._free(a),r._free(i),r._free(c),r._free(o),r._free(s),r._free(l),r._free(u),f}(t,e.bitsAllocated<=8?1:2,1===e.pixelRepresentation);return e.columns=n.sx,e.rows=n.sy,e.pixelData=n.pixelData,n.nbChannels>1&&(e.photometricInterpretation="RGB"),e}(e,t)}},"./shared/decoders/decodeJPEGBaseline.js":function(e,t,n){"use strict";n.r(t),t.default=function(e,t){if("undefined"==typeof JpegImage)throw new Error("No JPEG Baseline decoder loaded");var n=new JpegImage;return n.parse(t),n.colorTransform=!1,8===e.bitsAllocated?(e.pixelData=n.getData(e.columns,e.rows),e):16===e.bitsAllocated?(e.pixelData=n.getData16(e.columns,e.rows),e):void 0}},"./shared/decoders/decodeJPEGLS.js":function(e,t,n){"use strict";var r;function a(){if("undefined"==typeof CharLS)throw new Error("No JPEG-LS decoder loaded");if(!(r||(r=CharLS())&&r._jpegls_decode))throw new Error("JPEG-LS failed to initialize")}n.r(t),n.d(t,"initializeJPEGLS",function(){return a}),t.default=function(e,t){a();var n=function(e,t){var n=r._malloc(e.length);r.writeArrayToMemory(e,n);var a=r._malloc(4),i=r._malloc(4),o=r._malloc(4),s=r._malloc(4),l=r._malloc(4),u=r._malloc(4),d=r._malloc(4),c=r._malloc(4),f=r._malloc(4),h={result:r.ccall("jpegls_decode","number",["number","number","number","number","number","number","number","number","number","number","number"],[n,e.length,a,i,o,s,l,u,c,d,f]),width:r.getValue(o,"i32"),height:r.getValue(s,"i32"),bitsPerSample:r.getValue(l,"i32"),stride:r.getValue(u,"i32"),components:r.getValue(c,"i32"),allowedLossyError:r.getValue(d,"i32"),interleaveMode:r.getValue(f,"i32"),pixelData:void 0},p=r.getValue(a,"*");return h.bitsPerSample<=8?(h.pixelData=new Uint8Array(h.width*h.height*h.components),h.pixelData.set(new Uint8Array(r.HEAP8.buffer,p,h.pixelData.length))):t?(h.pixelData=new Int16Array(h.width*h.height*h.components),h.pixelData.set(new Int16Array(r.HEAP16.buffer,p,h.pixelData.length))):(h.pixelData=new Uint16Array(h.width*h.height*h.components),h.pixelData.set(new Uint16Array(r.HEAP16.buffer,p,h.pixelData.length))),r._free(n),r._free(p),r._free(a),r._free(i),r._free(o),r._free(s),r._free(l),r._free(u),r._free(c),r._free(f),h}(t,1===e.pixelRepresentation);if(0!==n.result&&6!==n.result)throw new Error("JPEG-LS decoder failed to decode frame (error code ".concat(n.result,")"));return e.columns=n.width,e.rows=n.height,e.pixelData=n.pixelData,e}},"./shared/decoders/decodeJPEGLossless.js":function(e,t,n){"use strict";n.r(t),t.default=function(e,t){if("undefined"==typeof jpeg||void 0===jpeg.lossless||void 0===jpeg.lossless.Decoder)throw new Error("No JPEG Lossless decoder loaded");var n=e.bitsAllocated<=8?1:2,r=t.buffer,a=(new jpeg.lossless.Decoder).decode(r,t.byteOffset,t.length,n);return 0===e.pixelRepresentation?16===e.bitsAllocated?(e.pixelData=new Uint16Array(a.buffer),e):(e.pixelData=new Uint8Array(a.buffer),e):(e.pixelData=new Int16Array(a.buffer),e)}},"./shared/decoders/decodeLittleEndian.js":function(e,t,n){"use strict";n.r(t),t.default=function(e,t){var n=t.buffer,r=t.byteOffset,a=t.length;return 16===e.bitsAllocated?(r%2&&(n=n.slice(r),r=0),e.pixelData=0===e.pixelRepresentation?new Uint16Array(n,r,a/2):new Int16Array(n,r,a/2)):8===e.bitsAllocated||1===e.bitsAllocated?e.pixelData=t:32===e.bitsAllocated&&(r%2&&(n=n.slice(r),r=0),e.pixelData=new Float32Array(n,r,a/4)),e}},"./shared/decoders/decodeRLE.js":function(e,t,n){"use strict";n.r(t),t.default=function(e,t){if(8===e.bitsAllocated)return e.planarConfiguration?function(e,t){for(var n=t,r=e.rows*e.columns,a=new ArrayBuffer(r*e.samplesPerPixel),i=new DataView(n.buffer,n.byteOffset),o=new Int8Array(n.buffer,n.byteOffset),s=new Int8Array(a),l=0,u=i.getInt32(0,!0),d=0;d<u;++d){l=d*r;var c=i.getInt32(4*(d+1),!0),f=i.getInt32(4*(d+2),!0);0===f&&(f=n.length);for(var h=r*u;c<f;){var p=o[c++];if(p>=0&&p<=127)for(var m=0;m<p+1&&l<h;++m)s[l]=o[c++],l++;else if(p<=-1&&p>=-127)for(var g=o[c++],v=0;v<1-p&&l<h;++v)s[l]=g,l++}}return e.pixelData=new Uint8Array(a),e}(e,t):function(e,t){for(var n=t,r=e.rows*e.columns,a=new ArrayBuffer(r*e.samplesPerPixel),i=new DataView(n.buffer,n.byteOffset),o=new Int8Array(n.buffer,n.byteOffset),s=new Int8Array(a),l=0,u=i.getInt32(0,!0),d=0;d<u;++d){l=d;var c=i.getInt32(4*(d+1),!0),f=i.getInt32(4*(d+2),!0);0===f&&(f=n.length);for(var h=r*u;c<f;){var p=o[c++];if(p>=0&&p<=127)for(var m=0;m<p+1&&l<h;++m)s[l]=o[c++],l+=e.samplesPerPixel;else if(p<=-1&&p>=-127)for(var g=o[c++],v=0;v<1-p&&l<h;++v)s[l]=g,l+=e.samplesPerPixel}}return e.pixelData=new Uint8Array(a),e}(e,t);if(16===e.bitsAllocated)return function(e,t){for(var n=t,r=e.rows*e.columns,a=new ArrayBuffer(r*e.samplesPerPixel*2),i=new DataView(n.buffer,n.byteOffset),o=new Int8Array(n.buffer,n.byteOffset),s=new Int8Array(a),l=i.getInt32(0,!0),u=0;u<l;++u){var d=0,c=0===u?1:0,f=i.getInt32(4*(u+1),!0),h=i.getInt32(4*(u+2),!0);for(0===h&&(h=n.length);f<h;){var p=o[f++];if(p>=0&&p<=127)for(var m=0;m<p+1&&d<r;++m)s[2*d+c]=o[f++],d++;else if(p<=-1&&p>=-127)for(var g=o[f++],v=0;v<1-p&&d<r;++v)s[2*d+c]=g,d++}}return e.pixelData=0===e.pixelRepresentation?new Uint16Array(a):new Int16Array(a),e}(e,t);throw new Error("unsupported pixel format for RLE")}},"./shared/getMinMax.js":function(e,t,n){"use strict";n.r(t),t.default=function(e){for(var t,n=e[0],r=e[0],a=e.length,i=1;i<a;i++)t=e[i],n=Math.min(n,t),r=Math.max(r,t);return{min:n,max:r}}},"./version.js":function(e,t,n){"use strict";n.r(t),t.default="2.2.2"}})});